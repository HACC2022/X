{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app\\imports\\ui\\pages\\SignIn.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/ui/pages/SignIn.jsx","filename":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app\\imports\\ui\\pages\\SignIn.jsx","inputSourceMap":{"version":3,"sources":["imports/ui/pages/SignIn.jsx"],"names":["React","useState","Link","Navigate","Meteor","Alert","Card","Col","Container","Row","SimpleSchema","SimpleSchema2Bridge","AutoForm","ErrorsField","SubmitField","TextField","SignIn","error","setError","redirect","setRedirect","schema","email","String","password","bridge","submit","doc","loginWithPassword","err","reason","data"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, Navigate } from 'react-router-dom';\r\nimport { Meteor } from 'meteor/meteor';\r\nimport { Alert, Card, Col, Container, Row } from 'react-bootstrap';\r\nimport SimpleSchema from 'simpl-schema';\r\nimport SimpleSchema2Bridge from 'uniforms-bridge-simple-schema-2';\r\nimport { AutoForm, ErrorsField, SubmitField, TextField } from 'uniforms-bootstrap5';\r\n\r\n/**\r\n * Signin page overrides the form’s submit event and call Meteor’s loginWithPassword().\r\n * Authentication errors modify the component’s state to be displayed\r\n */\r\nconst SignIn = () => {\r\n  const [error, setError] = useState('');\r\n  const [redirect, setRedirect] = useState(false);\r\n  const schema = new SimpleSchema({\r\n    email: String,\r\n    password: String,\r\n  });\r\n  const bridge = new SimpleSchema2Bridge(schema);\r\n\r\n  // Handle Signin submission using Meteor's account mechanism.\r\n  const submit = (doc) => {\r\n    // console.log('submit', doc, redirect);\r\n    const { email, password } = doc;\r\n    Meteor.loginWithPassword(email, password, (err) => {\r\n      if (err) {\r\n        setError(err.reason);\r\n      } else {\r\n        setRedirect(true);\r\n      }\r\n    });\r\n    // console.log('submit2', email, password, error, redirect);\r\n  };\r\n\r\n  // Render the signin form.\r\n  // console.log('render', error, redirect);\r\n  // if correct authentication, redirect to page instead of login screen\r\n  if (redirect) {\r\n    return (<Navigate to=\"/\" />);\r\n  }\r\n  // Otherwise return the Login form.\r\n  return (\r\n    <Container id=\"signin-page\" className=\"py-3\">\r\n      <Row className=\"justify-content-center\">\r\n        <Col xs={5}>\r\n          <Col className=\"text-center\">\r\n            <h2>Login to your account</h2>\r\n          </Col>\r\n          <AutoForm schema={bridge} onSubmit={data => submit(data)}>\r\n            <Card>\r\n              <Card.Body>\r\n                <TextField id=\"signin-form-email\" name=\"email\" placeholder=\"E-mail address\" />\r\n                <TextField id=\"signin-form-password\" name=\"password\" placeholder=\"Password\" type=\"password\" />\r\n                <ErrorsField />\r\n                <SubmitField id=\"signin-form-submit\" />\r\n              </Card.Body>\r\n            </Card>\r\n          </AutoForm>\r\n          <Alert variant=\"light\">\r\n            <Link to=\"/signup\">Click here to Register</Link>\r\n          </Alert>\r\n          {error === '' ? (\r\n            ''\r\n          ) : (\r\n            <Alert variant=\"danger\">\r\n              <Alert.Heading>Login was not successful</Alert.Heading>\r\n              {error}\r\n            </Alert>\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n"]},"targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app","root":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app\\imports\\ui\\pages\\SignIn.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/SignIn.jsx"}},"code":"!function (module1) {\n  let React, useState;\n  module1.link(\"react\", {\n    default(v) {\n      React = v;\n    },\n\n    useState(v) {\n      useState = v;\n    }\n\n  }, 0);\n  let Link, Navigate;\n  module1.link(\"react-router-dom\", {\n    Link(v) {\n      Link = v;\n    },\n\n    Navigate(v) {\n      Navigate = v;\n    }\n\n  }, 1);\n  let Meteor;\n  module1.link(\"meteor/meteor\", {\n    Meteor(v) {\n      Meteor = v;\n    }\n\n  }, 2);\n  let Alert, Card, Col, Container, Row;\n  module1.link(\"react-bootstrap\", {\n    Alert(v) {\n      Alert = v;\n    },\n\n    Card(v) {\n      Card = v;\n    },\n\n    Col(v) {\n      Col = v;\n    },\n\n    Container(v) {\n      Container = v;\n    },\n\n    Row(v) {\n      Row = v;\n    }\n\n  }, 3);\n  let SimpleSchema;\n  module1.link(\"simpl-schema\", {\n    default(v) {\n      SimpleSchema = v;\n    }\n\n  }, 4);\n  let SimpleSchema2Bridge;\n  module1.link(\"uniforms-bridge-simple-schema-2\", {\n    default(v) {\n      SimpleSchema2Bridge = v;\n    }\n\n  }, 5);\n  let AutoForm, ErrorsField, SubmitField, TextField;\n  module1.link(\"uniforms-bootstrap5\", {\n    AutoForm(v) {\n      AutoForm = v;\n    },\n\n    ErrorsField(v) {\n      ErrorsField = v;\n    },\n\n    SubmitField(v) {\n      SubmitField = v;\n    },\n\n    TextField(v) {\n      TextField = v;\n    }\n\n  }, 6);\n\n  ___INIT_METEOR_FAST_REFRESH(module);\n\n  var _s = $RefreshSig$();\n\n  /**\r\n   * Signin page overrides the form’s submit event and call Meteor’s loginWithPassword().\r\n   * Authentication errors modify the component’s state to be displayed\r\n   */\n  const SignIn = () => {\n    _s();\n\n    const [error, setError] = useState('');\n    const [redirect, setRedirect] = useState(false);\n    const schema = new SimpleSchema({\n      email: String,\n      password: String\n    });\n    const bridge = new SimpleSchema2Bridge(schema); // Handle Signin submission using Meteor's account mechanism.\n\n    const submit = doc => {\n      // console.log('submit', doc, redirect);\n      const {\n        email,\n        password\n      } = doc;\n      Meteor.loginWithPassword(email, password, err => {\n        if (err) {\n          setError(err.reason);\n        } else {\n          setRedirect(true);\n        }\n      }); // console.log('submit2', email, password, error, redirect);\n    }; // Render the signin form.\n    // console.log('render', error, redirect);\n    // if correct authentication, redirect to page instead of login screen\n\n\n    if (redirect) {\n      return /*#__PURE__*/React.createElement(Navigate, {\n        to: \"/\"\n      });\n    } // Otherwise return the Login form.\n\n\n    return /*#__PURE__*/React.createElement(Container, {\n      id: \"signin-page\",\n      className: \"py-3\"\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-content-center\"\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 5\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"text-center\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"Login to your account\")), /*#__PURE__*/React.createElement(AutoForm, {\n      schema: bridge,\n      onSubmit: data => submit(data)\n    }, /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(Card.Body, null, /*#__PURE__*/React.createElement(TextField, {\n      id: \"signin-form-email\",\n      name: \"email\",\n      placeholder: \"E-mail address\"\n    }), /*#__PURE__*/React.createElement(TextField, {\n      id: \"signin-form-password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      type: \"password\"\n    }), /*#__PURE__*/React.createElement(ErrorsField, null), /*#__PURE__*/React.createElement(SubmitField, {\n      id: \"signin-form-submit\"\n    })))), /*#__PURE__*/React.createElement(Alert, {\n      variant: \"light\"\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/signup\"\n    }, \"Click here to Register\")), error === '' ? '' : /*#__PURE__*/React.createElement(Alert, {\n      variant: \"danger\"\n    }, /*#__PURE__*/React.createElement(Alert.Heading, null, \"Login was not successful\"), error))));\n  };\n\n  _s(SignIn, \"2Iyp3CbhTQZpE3rcbiGnlh8yh+g=\");\n\n  _c = SignIn;\n  module1.exportDefault(SignIn);\n\n  var _c;\n\n  $RefreshReg$(_c, \"SignIn\");\n}.call(this, module);","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA;AACA;AACA;AACA;AACA,QAAMA,MAAM,GAAG,MAAM;AAAAC;;AACnB,UAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAAC,EAAD,CAAlC;AACA,UAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BF,QAAQ,CAAC,KAAD,CAAxC;AACA,UAAMG,MAAM,GAAG,IAAIC,YAAJ,CAAiB;AAC9BC,WAAK,EAAEC,MADuB;AAE9BC,cAAQ,EAAED;AAFoB,KAAjB,CAAf;AAIA,UAAME,MAAM,GAAG,IAAIC,mBAAJ,CAAwBN,MAAxB,CAAf,CAPmB,CASnB;;AACA,UAAMO,MAAM,GAAIC,GAAD,IAAS;AACtB;AACA,YAAM;AAAEN,aAAF;AAASE;AAAT,UAAsBI,GAA5B;AACAC,YAAM,CAACC,iBAAPD,CAAyBP,KAAzBO,EAAgCL,QAAhCK,EAA2CE,GAAD,IAAS;AACjD,YAAIA,GAAJ,EAAS;AACPf,kBAAQ,CAACe,GAAG,CAACC,MAAL,CAARhB;AADF,eAEO;AACLG,qBAAW,CAAC,IAAD,CAAXA;AACD;AALH,SAHsB,CAUtB;AAVF,MAVmB,CAuBnB;AACA;AACA;;;AACA,QAAID,QAAJ,EAAc;AACZ,0BAAQ,oBAAC,QAAD;AAAU,YAAG;AAAb,QAAR;AA3BiB,MA6BnB;;;AACA,wBACE,oBAAC,SAAD;AAAW,UAAG,aAAd;AAA4B,iBAAU;AAAtC,oBACE,oBAAC,GAAD;AAAK,iBAAU;AAAf,oBACE,oBAAC,GAAD;AAAK,UAAI;AAAT,oBACE,oBAAC,GAAD;AAAK,iBAAU;AAAf,oBACE,wDADF,CADF,eAIE,oBAAC,QAAD;AAAU,cAAQO,MAAlB;AAA0B,gBAAUQ,IAAI,IAAIN,MAAM,CAACM,IAAD;AAAlD,oBACE,oBAAC,IAAD,qBACE,oBAAC,IAAD,CAAM,IAAN,qBACE,oBAAC,SAAD;AAAW,UAAG,mBAAd;AAAkC,YAAK,OAAvC;AAA+C,mBAAY;AAA3D,MADF,eAEE,oBAAC,SAAD;AAAW,UAAG,sBAAd;AAAqC,YAAK,UAA1C;AAAqD,mBAAY,UAAjE;AAA4E,YAAK;AAAjF,MAFF,eAGE,oBAAC,WAAD,OAHF,eAIE,oBAAC,WAAD;AAAa,UAAG;AAAhB,MAJF,CADF,CADF,CAJF,eAcE,oBAAC,KAAD;AAAO,eAAQ;AAAf,oBACE,oBAAC,IAAD;AAAM,UAAG;AAAT,gCADF,CAdF,EAiBGlB,KAAK,KAAK,EAAVA,GACC,EADDA,gBAGC,oBAAC,KAAD;AAAO,eAAQ;AAAf,oBACE,oBAAC,KAAD,CAAO,OAAP,mCADF,EAEGA,KAFH,CApBJ,CADF,CADF,CADF;AA9BF;;KAAMF,Q;;OAAAA;wBAgESA","names":["SignIn","_s","error","setError","useState","redirect","setRedirect","schema","SimpleSchema","email","String","password","bridge","SimpleSchema2Bridge","submit","doc","Meteor","loginWithPassword","err","reason","data"],"sources":["imports/ui/pages/SignIn.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, Navigate } from 'react-router-dom';\r\nimport { Meteor } from 'meteor/meteor';\r\nimport { Alert, Card, Col, Container, Row } from 'react-bootstrap';\r\nimport SimpleSchema from 'simpl-schema';\r\nimport SimpleSchema2Bridge from 'uniforms-bridge-simple-schema-2';\r\nimport { AutoForm, ErrorsField, SubmitField, TextField } from 'uniforms-bootstrap5';\r\n\r\n/**\r\n * Signin page overrides the form’s submit event and call Meteor’s loginWithPassword().\r\n * Authentication errors modify the component’s state to be displayed\r\n */\r\nconst SignIn = () => {\r\n  const [error, setError] = useState('');\r\n  const [redirect, setRedirect] = useState(false);\r\n  const schema = new SimpleSchema({\r\n    email: String,\r\n    password: String,\r\n  });\r\n  const bridge = new SimpleSchema2Bridge(schema);\r\n\r\n  // Handle Signin submission using Meteor's account mechanism.\r\n  const submit = (doc) => {\r\n    // console.log('submit', doc, redirect);\r\n    const { email, password } = doc;\r\n    Meteor.loginWithPassword(email, password, (err) => {\r\n      if (err) {\r\n        setError(err.reason);\r\n      } else {\r\n        setRedirect(true);\r\n      }\r\n    });\r\n    // console.log('submit2', email, password, error, redirect);\r\n  };\r\n\r\n  // Render the signin form.\r\n  // console.log('render', error, redirect);\r\n  // if correct authentication, redirect to page instead of login screen\r\n  if (redirect) {\r\n    return (<Navigate to=\"/\" />);\r\n  }\r\n  // Otherwise return the Login form.\r\n  return (\r\n    <Container id=\"signin-page\" className=\"py-3\">\r\n      <Row className=\"justify-content-center\">\r\n        <Col xs={5}>\r\n          <Col className=\"text-center\">\r\n            <h2>Login to your account</h2>\r\n          </Col>\r\n          <AutoForm schema={bridge} onSubmit={data => submit(data)}>\r\n            <Card>\r\n              <Card.Body>\r\n                <TextField id=\"signin-form-email\" name=\"email\" placeholder=\"E-mail address\" />\r\n                <TextField id=\"signin-form-password\" name=\"password\" placeholder=\"Password\" type=\"password\" />\r\n                <ErrorsField />\r\n                <SubmitField id=\"signin-form-submit\" />\r\n              </Card.Body>\r\n            </Card>\r\n          </AutoForm>\r\n          <Alert variant=\"light\">\r\n            <Link to=\"/signup\">Click here to Register</Link>\r\n          </Alert>\r\n          {error === '' ? (\r\n            ''\r\n          ) : (\r\n            <Alert variant=\"danger\">\r\n              <Alert.Heading>Login was not successful</Alert.Heading>\r\n              {error}\r\n            </Alert>\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n"]},"sourceType":"module","externalDependencies":{},"hash":"e79bc4c206fbacc9cc7a530471cad8f17e688a37"}
