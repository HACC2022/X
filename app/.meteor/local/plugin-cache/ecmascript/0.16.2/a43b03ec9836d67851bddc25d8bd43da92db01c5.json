{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app\\imports\\startup\\server\\Publications.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.windows.x86_64"},"sourceFileName":"imports/startup/server/Publications.js","filename":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app\\imports\\startup\\server\\Publications.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app","root":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\zianz\\OneDrive\\Documents\\GitHub\\X\\app\\imports\\startup\\server\\Publications.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/startup/server/Publications.js"}},"code":"let Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Roles;\nmodule.link(\"meteor/alanning:roles\", {\n  Roles(v) {\n    Roles = v;\n  }\n\n}, 1);\nlet Stuffs;\nmodule.link(\"../../api/stuff/Stuff\", {\n  Stuffs(v) {\n    Stuffs = v;\n  }\n\n}, 2);\n// User-level publication.\n// If logged in, then publish documents owned by this user. Otherwise publish nothing.\nMeteor.publish(Stuffs.userPublicationName, function () {\n  if (this.userId) {\n    const username = Meteor.users.findOne(this.userId).username;\n    return Stuffs.collection.find({\n      owner: username\n    });\n  }\n\n  return this.ready();\n}); // Admin-level publication.\n// If logged in and with admin role, then publish all documents from all users. Otherwise publish nothing.\n\nMeteor.publish(Stuffs.adminPublicationName, function () {\n  if (this.userId && Roles.userIsInRole(this.userId, 'admin')) {\n    return Stuffs.collection.find();\n  }\n\n  return this.ready();\n}); // alanning:roles publication\n// Recommended code to publish roles for each user.\n\nMeteor.publish(null, function () {\n  if (this.userId) {\n    return Meteor.roleAssignment.find({\n      'user._id': this.userId\n    });\n  }\n\n  return this.ready();\n});","map":{"version":3,"sources":["imports/startup/server/Publications.js"],"names":["Meteor","module","link","v","Roles","Stuffs","publish","userPublicationName","userId","username","users","findOne","collection","find","owner","ready","adminPublicationName","userIsInRole","roleAssignment"],"mappings":"AAAA,IAAIA,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,EAAAA,MAAM,CAACG,CAAD,EAAG;AAACH,IAAAA,MAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACE,EAAAA,KAAK,CAACD,CAAD,EAAG;AAACC,IAAAA,KAAK,GAACD,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;AAA2D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACG,EAAAA,MAAM,CAACF,CAAD,EAAG;AAACE,IAAAA,MAAM,GAACF,CAAP;AAAS;;AAApB,CAApC,EAA0D,CAA1D;AAIhJ;AACA;AACAH,MAAM,CAACM,OAAP,CAAeD,MAAM,CAACE,mBAAtB,EAA2C,YAAY;AACrD,MAAI,KAAKC,MAAT,EAAiB;AACf,UAAMC,QAAQ,GAAGT,MAAM,CAACU,KAAP,CAAaC,OAAb,CAAqB,KAAKH,MAA1B,EAAkCC,QAAnD;AACA,WAAOJ,MAAM,CAACO,UAAP,CAAkBC,IAAlB,CAAuB;AAAEC,MAAAA,KAAK,EAAEL;AAAT,KAAvB,CAAP;AACD;;AACD,SAAO,KAAKM,KAAL,EAAP;AACD,CAND,E,CAQA;AACA;;AACAf,MAAM,CAACM,OAAP,CAAeD,MAAM,CAACW,oBAAtB,EAA4C,YAAY;AACtD,MAAI,KAAKR,MAAL,IAAeJ,KAAK,CAACa,YAAN,CAAmB,KAAKT,MAAxB,EAAgC,OAAhC,CAAnB,EAA6D;AAC3D,WAAOH,MAAM,CAACO,UAAP,CAAkBC,IAAlB,EAAP;AACD;;AACD,SAAO,KAAKE,KAAL,EAAP;AACD,CALD,E,CAOA;AACA;;AACAf,MAAM,CAACM,OAAP,CAAe,IAAf,EAAqB,YAAY;AAC/B,MAAI,KAAKE,MAAT,EAAiB;AACf,WAAOR,MAAM,CAACkB,cAAP,CAAsBL,IAAtB,CAA2B;AAAE,kBAAY,KAAKL;AAAnB,KAA3B,CAAP;AACD;;AACD,SAAO,KAAKO,KAAL,EAAP;AACD,CALD","sourcesContent":["import { Meteor } from 'meteor/meteor';\r\nimport { Roles } from 'meteor/alanning:roles';\r\nimport { Stuffs } from '../../api/stuff/Stuff';\r\n\r\n// User-level publication.\r\n// If logged in, then publish documents owned by this user. Otherwise publish nothing.\r\nMeteor.publish(Stuffs.userPublicationName, function () {\r\n  if (this.userId) {\r\n    const username = Meteor.users.findOne(this.userId).username;\r\n    return Stuffs.collection.find({ owner: username });\r\n  }\r\n  return this.ready();\r\n});\r\n\r\n// Admin-level publication.\r\n// If logged in and with admin role, then publish all documents from all users. Otherwise publish nothing.\r\nMeteor.publish(Stuffs.adminPublicationName, function () {\r\n  if (this.userId && Roles.userIsInRole(this.userId, 'admin')) {\r\n    return Stuffs.collection.find();\r\n  }\r\n  return this.ready();\r\n});\r\n\r\n// alanning:roles publication\r\n// Recommended code to publish roles for each user.\r\nMeteor.publish(null, function () {\r\n  if (this.userId) {\r\n    return Meteor.roleAssignment.find({ 'user._id': this.userId });\r\n  }\r\n  return this.ready();\r\n});\r\n"]},"sourceType":"module","externalDependencies":{},"hash":"a43b03ec9836d67851bddc25d8bd43da92db01c5"}
