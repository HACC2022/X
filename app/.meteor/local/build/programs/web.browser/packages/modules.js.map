{"version":3,"sources":["meteor://ðŸ’»app/node_modules/chart.js/dist/chunks/helpers.segment.mjs","meteor://ðŸ’»app/node_modules/chart.js/dist/chart.mjs","meteor://ðŸ’»app/node_modules/dequal/dist/index.mjs"],"names":["noop","uid","id","isNullOrUndef","value","isArray","Array","type","Object","prototype","toString","call","slice","isObject","isNumberFinite","Number","isFinite","finiteOrDefault","defaultValue","valueOrDefault","toPercentage","dimension","endsWith","parseFloat","toDimension","callback","fn","args","thisArg","apply","each","loopable","reverse","i","len","keys","length","_elementsEqual","a0","a1","ilen","v0","v1","datasetIndex","index","clone$1","source","map","target","create","klen","k","isValidKey","key","indexOf","_merger","options","tval","sval","merge","sources","merger","mergeIf","_mergerIf","hasOwnProperty","_deprecated","scope","previous","current","undefined","console","warn","keyResolvers","v","x","o","y","resolveObjectKey","obj","resolver","_getKeyResolver","_splitKey","parts","split","tmp","part","push","_capitalize","str","charAt","toUpperCase","defined","isFunction","setsEqual","a","b","size","item","has","_isClickEvent","e","PI","Math","TAU","PITAU","INFINITY","POSITIVE_INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","niceNum","range","roundedRange","round","almostEquals","niceRange","pow","floor","fraction","niceFraction","_factorize","result","sqrt","sort","pop","isNumber","n","isNaN","epsilon","abs","almostWhole","rounded","_setMinAndMaxByKey","array","property","min","max","toRadians","degrees","toDegrees","radians","_decimalPlaces","p","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","start","end","sameAngleIsFullCircle","s","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_int16Range","_isBetween","_lookup","table","cmp","hi","lo","mid","_lookupByKey","last","_rlookupByKey","_filterBetween","values","arrayEvents","listenArrayEvents","listener","_chartjs","listeners","defineProperty","configurable","enumerable","forEach","method","base","res","object","unlistenArrayEvents","stub","splice","_arrayUnique","items","set","Set","add","from","fontString","pixelSize","fontStyle","fontFamily","requestAnimFrame","window","requestAnimationFrame","throttled","updateFn","updateArgs","ticking","rest","debounce","delay","timeout","clearTimeout","setTimeout","_toLeftRightCenter","align","_alignStartEnd","_textX","left","right","rtl","check","_getStartAndCountOfVisiblePoints","meta","points","animationsDisabled","pointCount","count","_sorted","iScale","_parsed","axis","minDefined","maxDefined","getUserBounds","getPixelForValue","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","xmin","xmax","ymin","ymax","changed","assign","atEdge","t","elasticIn","sin","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","m","d","easeInOutBounce","lim","l","h","p2b","n2b","b2n","n2p","map$1","A","B","C","D","E","F","c","f","hex","h1","h2","eq","isShort","r","g","hexParse","ret","alpha","hexString","HUE_RE","hsl2rgbn","hsv2rgbn","hwb2rgbn","w","rgb","hueValue","rgb2hsl","calln","hsl2rgb","hwb2rgb","hsv2rgb","hue","hueParse","exec","p1","p2","rotate","deg","hslString","Z","Y","X","W","V","U","T","S","R","Q","P","O","N","M","L","K","G","H","I","J","names$1","OiceXe","antiquewEte","aqua","aquamarRe","azuY","beige","bisque","black","blanKedOmond","Xe","XeviTet","bPwn","burlywood","caMtXe","KartYuse","KocTate","cSO","cSnflowerXe","cSnsilk","crimson","cyan","xXe","xcyan","xgTMnPd","xWay","xgYF","xgYy","xkhaki","xmagFta","xTivegYF","xSange","xScEd","xYd","xsOmon","xsHgYF","xUXe","xUWay","xUgYy","xQe","xviTet","dAppRk","dApskyXe","dimWay","dimgYy","dodgerXe","fiYbrick","flSOwEte","foYstWAn","fuKsia","gaRsbSo","ghostwEte","gTd","gTMnPd","Way","gYF","gYFLw","gYy","honeyMw","hotpRk","RdianYd","Rdigo","ivSy","khaki","lavFMr","lavFMrXsh","lawngYF","NmoncEffon","ZXe","ZcSO","Zcyan","ZgTMnPdLw","ZWay","ZgYF","ZgYy","ZpRk","ZsOmon","ZsHgYF","ZskyXe","ZUWay","ZUgYy","ZstAlXe","ZLw","lime","limegYF","lRF","magFta","maPon","VaquamarRe","VXe","VScEd","VpurpN","VsHgYF","VUXe","VsprRggYF","VQe","VviTetYd","midnightXe","mRtcYam","mistyPse","moccasR","navajowEte","navy","Tdlace","Tive","TivedBb","Sange","SangeYd","ScEd","pOegTMnPd","pOegYF","pOeQe","pOeviTetYd","papayawEp","pHKpuff","peru","pRk","plum","powMrXe","purpN","YbeccapurpN","Yd","Psybrown","PyOXe","saddNbPwn","sOmon","sandybPwn","sHgYF","sHshell","siFna","silver","skyXe","UXe","UWay","UgYy","snow","sprRggYF","stAlXe","tan","teO","tEstN","tomato","Qe","viTet","JHt","wEte","wEtesmoke","Lw","LwgYF","unpack","unpacked","tkeys","j","ok","nk","replace","parseInt","names","nameParse","transparent","toLowerCase","RGB_RE","rgbParse","rgbString","to","interpolate","rgb1","rgb2","modHSL","ratio","clone","proto","fromObject","input","functionParse","Color","constructor","_rgb","_valid","valid","mix","color","weight","c1","c2","w2","w1","clearer","greyscale","val","opaquer","negate","lighten","darken","saturate","desaturate","index_esm","isPatternOrGradient","getHoverColor","overrides","descriptors","getScope$1","node","root","Defaults","_descriptors","animation","backgroundColor","borderColor","datasets","devicePixelRatio","context","chart","platform","getDevicePixelRatio","elements","events","font","family","style","lineHeight","hover","hoverBackgroundColor","ctx","hoverBorderColor","hoverColor","indexAxis","interaction","mode","intersect","includeInvisible","maintainAspectRatio","onHover","onClick","parsing","plugins","responsive","scale","scales","showLine","drawActiveElementsOnTop","describe","get","override","route","name","targetScope","targetName","scopeObject","targetScopeObject","privateName","defineProperties","writable","local","defaults","_scriptable","startsWith","_indexable","_fallback","toFontString","_measureText","data","gc","longest","string","textWidth","measureText","width","_longestText","arrayOfThings","cache","garbageCollect","save","jlen","thing","nestedThing","restore","gcLen","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","clearCanvas","canvas","getContext","resetTransform","clearRect","height","drawPoint","drawPointLegend","xOffset","yOffset","cornerRadius","pointStyle","rotation","radius","rad","translate","drawImage","beginPath","ellipse","arc","closePath","moveTo","lineTo","SQRT1_2","rect","fill","borderWidth","stroke","_isPointInArea","point","area","margin","top","bottom","clipArea","clip","unclipArea","_steppedLineTo","flip","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","renderText","text","opts","lines","strokeWidth","strokeColor","line","setRenderOpts","strokeStyle","lineWidth","strokeText","maxWidth","fillText","decorateText","translation","fillStyle","textAlign","textBaseline","strikethrough","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","decorationWidth","addRoundedRectPath","topLeft","bottomLeft","bottomRight","topRight","LINE_HEIGHT","RegExp","FONT_STYLE","toLineHeight","matches","match","numberOrZero","_readValueToProps","props","objProps","read","prop","toTRBL","toTRBLCorners","toPadding","toFont","fallback","resolve","inputs","info","cacheable","_addGrace","minmax","grace","beginAtZero","change","keepZero","createContext","parentContext","_createResolver","scopes","prefixes","rootScopes","getTarget","_resolve","Symbol","toStringTag","_cacheable","_scopes","_rootScopes","_getTarget","Proxy","deleteProperty","_keys","_cached","_resolveWithPrefixes","getOwnPropertyDescriptor","Reflect","getPrototypeOf","getKeysFromAllScopes","includes","ownKeys","storage","_storage","_attachContext","proxy","subProxy","descriptorDefaults","_proxy","_context","_subProxy","_stack","setContext","receiver","_resolveWithContext","allKeys","scriptable","indexable","_allKeys","isScriptable","isIndexable","readKey","prefix","needsSubResolver","_resolveScriptable","_resolveArray","Error","join","delete","createSubResolver","arr","filter","resolveFallback","getScope","parent","addScopes","parentScopes","parentFallback","allScopes","addScopesFromKey","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","_parsing","parsed","parse","EPSILON","getPoint","skip","getValueAxis","splineCurve","firstPoint","middlePoint","afterPoint","next","d01","d12","s01","s12","fa","fb","monotoneAdjust","deltaK","mK","pointsLen","alphaK","betaK","tauK","squaredMagnitude","pointCurrent","pointAfter","monotoneCompute","valueAxis","delta","pointBefore","iPixel","vPixel","splineCurveMonotone","slopeDelta","capControlPoint","pt","capBezierPoints","inArea","inAreaPrev","inAreaNext","_updateBezierControlPoints","loop","controlPoints","spanGaps","cubicInterpolationMode","prev","tension","_isDomSupported","document","_getParentNode","domNode","parentNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","element","getStyle","el","getPropertyValue","positions","getPositionedStyle","styles","suffix","pos","useOffsetPos","shadowRoot","getCanvasPosition","_s","touches","offsetX","offsetY","box","getBoundingClientRect","clientX","clientY","getRelativePosition","evt","borderBox","boxSizing","paddings","borders","getContainerSize","maxHeight","container","clientWidth","clientHeight","containerStyle","containerBorder","containerPadding","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","containerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","passive","addEventListener","removeEventListener","readUsedSize","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","intlCache","Map","getNumberFormat","locale","cacheKey","JSON","stringify","formatter","Intl","NumberFormat","formatNumber","num","format","getRightToLeftAdapter","rectX","setWidth","xPlus","leftForLtr","itemWidth","getLeftToRightAdapter","_itemWidth","getRtlAdapter","overrideTextDirection","direction","original","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","compare","normalize","normalizeSegment","getSegment","segment","bounds","startBound","endBound","_boundSegment","inside","subStart","prevValue","startIsBefore","endIsBefore","shouldStart","shouldStop","_boundSegments","segments","sub","findStartAndEnd","solidSegments","cur","stop","_computeSegments","segmentOptions","_loop","splitByStyles","completeLoop","_fullLoop","doSplitByStyles","chartContext","_chart","baseStyle","readStyle","_datasetIndex","prevStyle","addStyle","st","dir","p0","p0DataIndex","p1DataIndex","styleChanged","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","Animator","_request","_charts","_running","_lastDate","_notify","anims","date","callbacks","numSteps","duration","initial","currentStep","_refresh","_update","Date","now","remaining","running","draw","_active","_total","tick","_getAnims","charts","complete","progress","listen","event","cb","reduce","acc","_duration","cancel","remove","animator","interpolators","boolean","factor","c0","number","Animation","cfg","currentValue","_fn","_easing","easing","_start","_target","_prop","_from","_to","_promises","active","update","elapsed","remain","wait","promises","Promise","rej","resolved","numbers","colors","animationOptions","properties","resize","show","animations","visible","hide","Animations","config","_properties","configure","animatedProps","getOwnPropertyNames","option","_animateOptions","newOptions","resolveTargetOptions","_createAnimations","$shared","awaitAll","$animations","then","anim","all","scaleClip","allowedOverflow","defaultClip","toClip","disabled","getSortedDatasetIndices","filterVisible","metasets","_getSortedDatasetMetas","applyStack","stack","dsIndex","singleMode","otherValue","convertObjectDataToArray","adata","isStacked","stacked","getStackKey","indexScale","valueScale","NEGATIVE_INFINITY","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","vScale","positive","getMatchingVisibleMetas","updateStacks","controller","_cachedMeta","_stacks","iAxis","vAxis","itemStacks","_top","_bottom","getFirstScaleId","shift","createDatasetContext","dataset","createDataContext","dataIndex","raw","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","shared","createStack","canStack","hidden","_stacked","DatasetController","_ctx","_cachedDataOpts","getMeta","_type","_data","_objectData","_sharedOptions","_drawStart","_drawCount","enableOptionSharing","supportsDecimation","$context","_syncList","initialize","linkScales","addElements","updateIndex","getDataset","chooseId","xid","xAxisID","yid","yAxisID","rid","rAxisID","iid","iAxisID","vid","vAxisID","getScaleForId","rScale","getDatasetMeta","scaleID","_getOtherScale","reset","_destroy","_dataCheck","isExtensible","datasetElementType","buildOrUpdateElements","resetNewElements","stackChanged","oldStacked","_resyncElements","scopeKeys","datasetScopeKeys","getOptionScopes","createResolver","sorted","parseArrayData","parseObjectData","parsePrimitiveData","isNotInOrderComparedToPrev","labels","getLabels","singleScale","xAxisKey","yAxisKey","getParsed","getDataElement","updateRangeFromParsed","parsedValue","NaN","getMinMax","otherScale","otherMin","otherMax","_skip","getAllParsedValues","getMaxOverflow","getLabelAndValue","label","getLabelForValue","_clip","chartArea","resolveDatasetElementOptions","resolveDataElementOptions","_resolveElementOptions","dataElementType","elementType","sharing","datasetElementScopeKeys","resolveNamedOptions","freeze","_resolveAnimations","transition","datasetAnimationScopeKeys","getSharedOptions","includeOptions","sharedOptions","_animationsDisabled","_getSharedOptions","firstOpts","previouslySharedOptions","updateSharedOptions","updateElement","_setStyle","removeHoverStyle","setHoverStyle","_removeDatasetHoverStyle","_setDatasetHoverStyle","arg1","arg2","numMeta","numData","_insertElements","_removeElements","move","updateElements","removed","_sync","_dataChanges","_onDataPush","arguments","_onDataPop","_onDataShift","_onDataSplice","newCount","_onDataUnshift","getAllScaleValues","_cache","$bar","visibleMetas","concat","computeMinSampleSize","_length","curr","updateMinAndPrev","ticks","getPixelForTick","computeFitCategoryTraits","ruler","stackCount","thickness","barThickness","categoryPercentage","barPercentage","chunk","pixels","computeFlexCategoryTraits","percent","parseFloatBar","entry","startValue","endValue","barStart","barEnd","_custom","parseValue","parseArrayOrPrimitive","isFloatBar","custom","barSign","actualBase","isHorizontal","borderProps","horizontal","setBorderSkipped","edge","borderSkipped","enableBorderRadius","parseEdge","swap","startEnd","orig","v2","setInflateAmount","inflateAmount","BarController","iAxisKey","vAxisKey","bars","getBasePixel","_getRuler","vpixels","head","_calculateBarValuePixels","ipixels","_calculateBarIndexPixels","center","_getStacks","grouped","skipNull","_getStackCount","_getStackIndex","_startPixel","_endPixel","baseValue","minBarLength","floating","getDataVisibility","startPixel","getPixelForDecimal","endPixel","halfGrid","getLineWidthForValue","maxBarThickness","Infinity","stackIndex","rects","_index_","offset","grid","_value_","BubbleController","tooltip","title","getRatioAndOffset","circumference","cutout","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","maxX","maxY","minX","minY","DoughnutController","innerRadius","outerRadius","getter","_getRotation","_getCircumference","_getRotationExtents","isDatasetVisible","arcs","spacing","getMaxBorderWidth","getMaxOffset","maxSize","chartWeight","_getRingWeight","maxRadius","radiusLength","_getVisibleDatasetWeightTotal","total","calculateTotal","_getRingWeightOffset","_circumference","animateRotate","calculateCircumference","animationOpts","centerX","centerY","animateScale","metaData","borderAlign","hoverBorderWidth","hoverOffset","ringWeightOffset","legend","generateLabels","legendItem","toggleDataVisibility","tooltipItem","dataLabel","formattedValue","LineController","_dataset","_decimated","animated","maxGapLength","directUpdate","prevParsed","nullData","border","lastPoint","updateControlPoints","PolarAreaController","bind","_updateRadius","minSize","cutoutPercentage","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getIndexAngle","defaultAngle","countVisibleElements","_computeAngle","getDistanceFromCenterForValue","angleLines","display","circular","pointLabels","PieController","RadarController","pointPosition","getPointPositionForValue","Element","tooltipPosition","useFinalPosition","getProps","hasValue","final","defaultRoutes","formatters","numeric","tickValue","notation","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","Ticks","drawBorder","drawOnChartArea","drawTicks","tickLength","tickWidth","tickColor","padding","minRotation","maxRotation","mirror","textStrokeWidth","textStrokeColor","autoSkip","autoSkipPadding","labelOffset","minor","major","crossAlign","showLabelBackdrop","backdropColor","backdropPadding","tickOpts","ticksLimit","maxTicksLimit","determineMaxTicks","majorIndices","enabled","getMajorIndices","numMajorIndices","first","newTicks","skipMajors","calculateSpacing","avgMajorSpacing","_tickSize","maxScale","maxChart","_maxLength","evenMajorSpacing","getEvenSpacing","factors","ceil","majorStart","majorEnd","diff","reverseAlign","offsetFromEdge","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","caches","getTickMarkLength","getTitleHeight","createScaleContext","createTickContext","titleAlign","position","titleArgs","titleX","titleY","positionAxisID","Scale","_margins","paddingTop","paddingBottom","paddingLeft","paddingRight","labelRotation","_range","_gridLineItems","_labelItems","_labelSizes","_longestTextCache","_reversePixels","_userMax","_userMin","_suggestedMax","_suggestedMin","_ticksLength","_borderValue","_dataLimitsCached","init","suggestedMin","suggestedMax","metas","getPadding","getTicks","xLabels","yLabels","beforeLayout","beforeUpdate","sampleSize","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","beforeBuildTicks","buildTicks","afterBuildTicks","samplingEnabled","_convertTicksToLabels","beforeCalculateLabelRotation","calculateLabelRotation","afterCalculateLabelRotation","afterAutoSkip","beforeFit","fit","afterFit","afterUpdate","reversePixels","_alignToPixels","alignToPixels","_callHooks","notifyPlugins","beforeTickToLabelConversion","generateTickLabels","afterTickToLabelConversion","numTicks","maxLabelDiagonal","_isVisible","labelSizes","_getLabelSizes","maxLabelWidth","widest","maxLabelHeight","highest","asin","titleOpts","gridOpts","titleHeight","tickPadding","angleRadians","labelHeight","labelWidth","_calculatePadding","_handleMargins","isRotated","labelsBelowTicks","offsetLeft","offsetRight","isFullSize","fullSize","_computeLabelSizes","widths","heights","widestLabelSize","highestLabelSize","tickFont","nestedLabel","_resolveTickFontOptions","valueAt","idx","getValueForPixel","decimal","getDecimalForPixel","getBaseValue","optionTicks","rot","_computeGridLineItems","ticksLength","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","limit","step","optsAtIndex","lineColor","tickBorderDash","tickBorderDashOffset","_computeLabelItems","tickAndPadding","hTickAndPadding","lineCount","textOffset","_getXAxisLabelAlignment","_getYAxisLabelAlignment","halfCount","tickTextAlign","backdrop","labelPadding","_computeLabelArea","drawBackground","fillRect","findIndex","drawGrid","drawLine","setLineDash","lineDashOffset","lastLineWidth","drawLabels","drawTitle","_layers","tz","z","gz","getSortedVisibleDatasetMetas","axisID","_maxDigits","fontSize","TypedRegistry","isForType","isPrototypeOf","register","parentScope","isIChartComponent","registerDefaults","unregister","itemDefaults","routeDefaults","routes","propertyParts","sourceName","sourceScope","Registry","controllers","_typedRegistries","_each","addControllers","addPlugins","addScales","getController","_get","getElement","getPlugin","getScale","removeControllers","removeElements","removePlugins","removeScales","typedRegistry","arg","reg","_getRegistryForType","_exec","itemReg","registry","component","camelMethod","ScatterController","__proto__","abstract","DateAdapter","chartOptions","formats","timestamp","amount","unit","startOf","weekday","endOf","members","adapters","_date","binarySearch","metaset","lookupMethod","getRange","evaluateInteractionItems","handler","getDistanceMetricForAxis","useX","useY","deltaX","deltaY","getIntersectItems","isPointInArea","evaluationFunc","inRange","getNearestRadialItems","getNearestCartesianItems","distanceMetric","minDistance","getCenterPoint","pointInArea","getNearestItems","getAxisItems","rangeMethod","intersectsItem","Interaction","modes","nearest","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","wrapBoxes","boxes","layoutBoxes","stackWeight","buildStacks","layouts","wrap","placed","setLayoutDims","params","vBoxMaxWidth","hBoxMaxHeight","layout","availableWidth","availableHeight","buildLayoutBoxes","centerHorizontal","centerVertical","leftAndTop","rightAndBottom","vertical","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","newWidth","outerWidth","newHeight","outerHeight","widthChanged","heightChanged","same","other","handleMaxPadding","updatePos","getMargins","marginForPositions","fitBoxes","refitBoxes","refit","setBoxDims","placeBoxes","userPadding","autoPadding","addBox","removeBox","layoutItem","minPadding","verticalBoxes","horizontalBoxes","visibleVerticalBoxCount","BasePlatform","acquireContext","releaseContext","isAttached","updateConfig","BasicPlatform","EXPANDO_KEY","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","isNullOrEmpty","initCanvas","renderHeight","getAttribute","renderWidth","displayWidth","displayHeight","eventListenerOptions","addListener","removeListener","fromNativeEvent","native","nodeListContains","nodeList","contains","createAttachObserver","observer","MutationObserver","entries","trigger","addedNodes","removedNodes","observe","childList","subtree","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","listenDevicePixelRatioChanges","unlistenDevicePixelRatioChanges","createResizeObserver","ResizeObserver","contentRect","releaseObserver","disconnect","createProxyAndListen","DomPlatform","removeAttribute","setAttribute","proxies","$proxies","handlers","attach","detach","isConnected","_detectPlatform","OffscreenCanvas","PluginService","_init","notify","hook","_createDescriptors","descriptor","plugin","cancelable","invalidate","_oldCache","_notifyStateChanges","allPlugins","createDescriptors","previousDescriptors","some","localIds","getOpts","pluginOpts","pluginScopeKeys","getIndexAxis","datasetDefaults","datasetOptions","getAxisFromDefaultScaleID","getDefaultScaleIDFromAxis","axisFromPosition","determineAxis","scaleOptions","mergeScaleConfig","chartDefaults","configScales","chartIndexAxis","firstIDs","scaleConf","error","defaultId","defaultScaleOptions","defaultID","initOptions","initData","initConfig","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","_config","_scopeCache","_resolverCache","clearCache","clear","datasetType","additionalOptionScopes","_cachedScopes","mainScope","resetCache","keyLists","chartOptionScopes","subPrefixes","getResolver","needContext","subResolver","resolverCache","hasFunction","version","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onComplete","onAnimationProgress","onProgress","getCanvas","getElementById","instances","getChart","moveNumericKeys","intKey","determineLastEvent","lastEvent","inChartArea","isClick","Chart","userConfig","initialCanvas","existingChart","_options","_aspectRatio","_metasets","_lastEvent","_listeners","_responsiveListeners","_sortedMetasets","_plugins","_hiddenIndices","attached","_doResize","resizeDelay","_initialize","bindEvents","_resize","_resizeBeforeDraw","newSize","newRatio","onResize","render","ensureScalesHaveIDs","scalesOptions","axisOptions","buildOrUpdateScales","scaleOpts","updated","isRadial","dposition","dtype","scaleType","scaleClass","hasUpdated","_updateMetasets","_destroyDatasetMeta","_removeUnreferencedMetasets","buildOrUpdateControllers","newControllers","order","ControllerClass","_resetElements","animsDisabled","_updateScales","_checkEventBindings","_updateHiddenIndices","_minPadding","_updateLayout","_updateDatasets","_eventHandler","_updateHoverStyles","existingEvents","newEvents","unbindEvents","changes","_getUniformDataChanges","datasetCount","makeSet","changeSet","noArea","_idx","_updateDataset","layers","_drawDatasets","_drawDataset","useClip","getElementsAtEventForMode","setDatasetVisibility","_updateVisibility","_stop","destroy","toBase64Image","toDataURL","bindUserEvents","bindResponsiveEvents","_add","_remove","detached","updateHoverStyle","getActiveElements","setActiveElements","activeElements","lastActive","replay","hoverOptions","deactivated","activated","eventFilter","_handleEvent","_getActiveElements","invalidatePlugins","clipArc","pixelMargin","angleMargin","toRadiusCorners","parseBorderRadius$1","angleDelta","borderRadius","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","outerStart","outerEnd","innerStart","innerEnd","rThetaToXY","theta","pathArc","innerR","spacingOffset","noSpacingInnerRadius","noSpacingOuterRadius","avNogSpacingRadius","adjustedAngle","beta","angleOffset","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","pCenter","p4","p8","outerStartX","outerStartY","outerEndX","outerEndY","drawArc","fullCircles","drawFullCircleBorders","inner","lineJoin","ArcElement","chartX","chartY","rAdjust","betweenAngles","withinRadius","halfAngle","halfRadius","radiusOffset","setStyle","lineCap","getLineMethod","stepped","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","fastPathSegment","avgX","countX","prevX","lastY","pointIndex","drawX","truncX","_getSegmentMethod","useFastPath","_getInterpolationMethod","strokePathWithCache","path","_path","Path2D","strokePathDirect","segmentMethod","usePath2D","LineElement","_points","_segments","_pointsUpdated","_interpolate","interpolated","inRange$1","hitRadius","PointElement","mouseX","mouseY","inXRange","inYRange","hoverRadius","getBarBounds","bar","half","skipOrLimit","parseBorderWidth","maxW","maxH","parseBorderRadius","maxR","enableBorder","boundingRects","outer","skipX","skipY","skipBoth","hasRadius","addNormalRectPath","inflateRect","refRect","BarElement","addRectPath","lttbDecimation","samples","decimated","bucketWidth","sampledIndex","endIndex","maxAreaPoint","maxArea","nextA","avgY","avgRangeStart","avgRangeEnd","avgRangeLength","rangeOffs","rangeTo","pointAx","pointAy","minMaxDecimation","minIndex","maxIndex","startIndex","xMin","xMax","dx","lastIndex","intermediateIndex1","intermediateIndex2","cleanDecimatedDataset","cleanDecimatedData","getStartAndCountOfVisiblePointsSimplified","plugin_decimation","algorithm","beforeElementsUpdate","xAxis","threshold","tpoints","_findSegmentEnd","_getBounds","targetSegments","tgt","subBounds","fillSources","fillSource","_getEdge","_pointsFromSegments","boundary","linePoints","_createBoundaryLine","_shouldApplyFill","_resolveTarget","propagate","visited","_decodeFill","parseFillOption","decodeTargetIndex","firstCh","_getTargetPixel","_getTargetValue","fillOption","_buildStackLine","sourcePoints","linesBelow","getLinesBelow","addPointsBelow","below","unshift","sourcePoint","postponed","findPoint","pointValue","firstValue","lastValue","simpleArc","getLineByIndex","computeBoundary","computeCircularBoundary","computeLinearBoundary","_drawfill","lineOpts","above","doFill","clipVertical","clipY","lineLoop","src","notShape","clipBounds","interpolatedLineTo","targetLoop","interpolatedPoint","afterDatasetsUpdate","_args","$filler","beforeDraw","drawTime","beforeDatasetsDraw","beforeDatasetDraw","getBoxSize","labelOpts","boxHeight","boxWidth","usePointStyle","pointStyleWidth","itemHeight","itemsEqual","Legend","_added","legendHitBoxes","_hoveredItem","doughnutMode","legendItems","columnSizes","lineWidths","buildLabels","labelFont","_computeTitleHeight","_fitRows","_fitCols","hitboxes","totalHeight","row","heightLimit","totalWidth","currentColWidth","currentColHeight","col","adjustHitBoxes","rtlHelper","hitbox","_draw","defaultColor","fontColor","halfFontSize","cursor","drawLegendBox","lineDash","drawOptions","SQRT2","yBoxTop","xBoxLeft","textDirection","realX","titleFont","titlePadding","topPaddingPlusHalfFontSize","_getLegendItemAt","hitBox","lh","handleEvent","isListened","hoveredItem","sameItem","onLeave","plugin_legend","_element","afterEvent","ci","Title","_padding","textSize","_drawArgs","fontOpts","createTitle","titleBlock","plugin_title","WeakMap","plugin_subtitle","positioners","average","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","String","createTooltipItem","getTooltipSize","body","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","before","after","beforeBody","afterBody","titleSpacing","titleMarginBottom","bodyLineHeight","displayColors","bodySpacing","footerMarginTop","footerSpacing","widthPadding","maxLineWidth","determineYAlign","doesNotFitWithAlign","xAlign","caret","caretSize","caretPadding","determineXAlign","yAlign","chartWidth","determineAlignment","alignX","alignY","paddingAndSize","getBackgroundPoint","alignment","getAlignedX","getBeforeAfterBodyLines","createTooltipContext","tooltipItems","overrideCallbacks","Tooltip","opacity","_eventPosition","_size","_cachedAnimations","_tooltipItems","dataPoints","caretX","caretY","labelColors","labelPointStyles","labelTextColors","getTitle","beforeTitle","afterTitle","getBeforeBody","getBody","bodyItems","scoped","beforeLabel","afterLabel","getAfterBody","getFooter","beforeFooter","afterFooter","_createItems","itemSort","labelColor","labelPointStyle","labelTextColor","positionAndSize","backgroundPoint","external","drawCaret","tooltipPoint","caretPosition","getCaretPosition","x3","y3","ptX","ptY","titleColor","_drawColorBox","colorX","rtlColorX","yOffSet","colorY","multiKeyBackground","outerX","innerX","strokeRect","drawBody","bodyAlign","xLinePadding","fillLineOfText","bodyAlignForCalculation","textColor","bodyColor","drawFooter","footerAlign","footerColor","tooltipSize","quadraticCurveTo","_updateAnimationTarget","animX","animY","_willRender","hasTooltipContent","globalAlpha","positionChanged","_positionChanged","_ignoreReplayEvents","plugin_tooltip","afterInit","afterDraw","labelCount","Decimation","Filler","SubTitle","addIfString","addedLabels","findOrAddLabel","lastIndexOf","CategoryScale","_startValue","_valueRange","_addedLabels","added","generateTicks$1","generationOptions","dataRange","MIN_SPACING","precision","maxTicks","maxDigits","includeBounds","maxSpaces","rmin","rmax","countDefined","minSpacing","niceMin","niceMax","numSpaces","decimalPlaces","relativeLabelSize","LinearScaleBase","_endValue","handleTickRangeOptions","setMin","setMax","minSign","maxSign","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","getTickLimit","stepSize","computeTickLimit","numericGeneratorOptions","LinearScale","isMajor","tickVal","generateTicks","endExp","endSignificand","exp","significand","lastTick","LogarithmicScale","_zero","getTickBackdropHeight","measureLabelSize","determineLimits","fitWithPointLabels","limits","valueCount","_pointLabels","pointLabelOpts","additionalAngle","centerPointLabels","getPointLabelContext","getPointPosition","drawingArea","plFont","hLimits","vLimits","updateLimits","setCenterPoint","_pointLabelItems","buildPointLabelItems","extra","outerDistance","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","drawPointLabels","backdropLeft","backdropTop","backdropWidth","backdropHeight","pathRadiusLine","drawRadiusLine","gridLineOpts","createPointLabelContext","RadialLinearScale","leftMovement","rightMovement","topMovement","bottomMovement","angleMultiplier","scalingFactor","getValueForDistanceFromCenter","scaledDistance","pointLabel","distanceFromCenter","getBasePosition","getPointLabelPosition","animate","INTERVALS","millisecond","common","steps","second","minute","hour","day","week","month","quarter","year","UNITS","sorter","adapter","_adapter","parser","isoWeekday","_parseOpts","determineUnitForAutoTicks","minUnit","capacity","interval","determineUnitForFormatting","determineMajorUnit","addTick","time","timestamps","setMajorTicks","majorUnit","ticksFromTimestamps","TimeScale","_unit","_majorUnit","_offsets","_normalized","displayFormats","normalized","_applyBounds","_getLabelBounds","getLabelTimestamps","timeOpts","_generate","_getLabelCapacity","initOffsets","offsetAfterAutoskip","getDecimalForValue","hasWeekday","getDataTimestamps","tooltipFormat","datetime","_tickFormatFunction","minorFormat","majorFormat","offsets","_getLabelSize","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","exampleLabel","prevSource","nextSource","prevTarget","nextTarget","span","TimeSeriesScale","_table","_minPos","_tableRange","_getTimestampsForTable","buildLookupTable","registerables","find","iter","tar","dequal","foo","ctor","getTime","ArrayBuffer","Uint8Array","DataView","byteLength","getInt8","isView"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;AACA,WAASA,IAAT,GAAgB,CAAE;;AAClB,QAAMC,GAAG,GAAI,YAAW;AACtB,QAAIC,EAAE,GAAG,CAAT;AACA,WAAO,YAAW;AAChB,aAAOA,EAAE,EAAT;AADF;AAFW,KAAb;;AAMA,WAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,WAAOA,KAAK,KAAK,IAAVA,IAAkB,OAAOA,KAAP,KAAiB,WAA1C;AACD;;AACD,WAASC,OAAT,CAAiBD,KAAjB,EAAwB;AACtB,QAAIE,KAAK,CAACD,OAANC,IAAiBA,KAAK,CAACD,OAANC,CAAcF,KAAdE,CAArB,EAA2C;AACzC,aAAO,IAAP;AACD;;AACD,UAAMC,IAAI,GAAGC,MAAM,CAACC,SAAPD,CAAiBE,QAAjBF,CAA0BG,IAA1BH,CAA+BJ,KAA/BI,CAAb;;AACA,QAAID,IAAI,CAACK,KAALL,CAAW,CAAXA,EAAc,CAAdA,MAAqB,SAArBA,IAAkCA,IAAI,CAACK,KAALL,CAAW,CAAC,CAAZA,MAAmB,QAAzD,EAAmE;AACjE,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AACD,WAASM,QAAT,CAAkBT,KAAlB,EAAyB;AACvB,WAAOA,KAAK,KAAK,IAAVA,IAAkBI,MAAM,CAACC,SAAPD,CAAiBE,QAAjBF,CAA0BG,IAA1BH,CAA+BJ,KAA/BI,MAA0C,iBAAnE;AACD;;AACD,QAAMM,cAAc,GAAIV,KAAD,IAAW,CAAC,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYW,MAA/C,KAA0DC,QAAQ,CAAC,CAACZ,KAAF,CAApG;;AACA,WAASa,eAAT,CAAyBb,KAAzB,EAAgCc,YAAhC,EAA8C;AAC5C,WAAOJ,cAAc,CAACV,KAAD,CAAdU,GAAwBV,KAAxBU,GAAgCI,YAAvC;AACD;;AACD,WAASC,cAAT,CAAwBf,KAAxB,EAA+Bc,YAA/B,EAA6C;AAC3C,WAAO,OAAOd,KAAP,KAAiB,WAAjB,GAA+Bc,YAA/B,GAA8Cd,KAArD;AACD;;AACD,QAAMgB,YAAY,GAAG,CAAChB,KAAD,EAAQiB,SAAR,KACnB,OAAOjB,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAACkB,QAANlB,CAAe,GAAfA,CAA7B,GACEmB,UAAU,CAACnB,KAAD,CAAVmB,GAAoB,GADtB,GAEInB,KAAK,GAAGiB,SAHd;;AAIA,QAAMG,WAAW,GAAG,CAACpB,KAAD,EAAQiB,SAAR,KAClB,OAAOjB,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAACkB,QAANlB,CAAe,GAAfA,CAA7B,GACEmB,UAAU,CAACnB,KAAD,CAAVmB,GAAoB,GAApBA,GAA0BF,SAD5B,GAEI,CAACjB,KAHP;;AAIA,WAASqB,QAAT,CAAkBC,EAAlB,EAAsBC,IAAtB,EAA4BC,OAA5B,EAAqC;AACnC,QAAIF,EAAE,IAAI,OAAOA,EAAE,CAACf,IAAV,KAAmB,UAA7B,EAAyC;AACvC,aAAOe,EAAE,CAACG,KAAHH,CAASE,OAATF,EAAkBC,IAAlBD,CAAP;AACD;AACF;;AACD,WAASI,IAAT,CAAcC,QAAd,EAAwBL,EAAxB,EAA4BE,OAA5B,EAAqCI,OAArC,EAA8C;AAC5C,QAAIC,CAAJ,EAAOC,GAAP,EAAYC,IAAZ;;AACA,QAAI9B,OAAO,CAAC0B,QAAD,CAAX,EAAuB;AACrBG,SAAG,GAAGH,QAAQ,CAACK,MAAfF;;AACA,UAAIF,OAAJ,EAAa;AACX,aAAKC,CAAC,GAAGC,GAAG,GAAG,CAAf,EAAkBD,CAAC,IAAI,CAAvB,EAA0BA,CAAC,EAA3B,EAA+B;AAC7BP,YAAE,CAACf,IAAHe,CAAQE,OAARF,EAAiBK,QAAQ,CAACE,CAAD,CAAzBP,EAA8BO,CAA9BP;AACD;AAHH,aAIO;AACL,aAAKO,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,GAAhB,EAAqBD,CAAC,EAAtB,EAA0B;AACxBP,YAAE,CAACf,IAAHe,CAAQE,OAARF,EAAiBK,QAAQ,CAACE,CAAD,CAAzBP,EAA8BO,CAA9BP;AACD;AACF;AAVH,WAWO,IAAIb,QAAQ,CAACkB,QAAD,CAAZ,EAAwB;AAC7BI,UAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAYuB,QAAZvB,CAAP2B;AACAD,SAAG,GAAGC,IAAI,CAACC,MAAXF;;AACA,WAAKD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,GAAhB,EAAqBD,CAAC,EAAtB,EAA0B;AACxBP,UAAE,CAACf,IAAHe,CAAQE,OAARF,EAAiBK,QAAQ,CAACI,IAAI,CAACF,CAAD,CAAL,CAAzBP,EAAoCS,IAAI,CAACF,CAAD,CAAxCP;AACD;AACF;AACF;;AACD,WAASW,cAAT,CAAwBC,EAAxB,EAA4BC,EAA5B,EAAgC;AAC9B,QAAIN,CAAJ,EAAOO,IAAP,EAAaC,EAAb,EAAiBC,EAAjB;;AACA,QAAI,CAACJ,EAAD,IAAO,CAACC,EAAR,IAAcD,EAAE,CAACF,MAAHE,KAAcC,EAAE,CAACH,MAAnC,EAA2C;AACzC,aAAO,KAAP;AACD;;AACD,SAAKH,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGF,EAAE,CAACF,MAAtB,EAA8BH,CAAC,GAAGO,IAAlC,EAAwC,EAAEP,CAA1C,EAA6C;AAC3CQ,QAAE,GAAGH,EAAE,CAACL,CAAD,CAAPQ;AACAC,QAAE,GAAGH,EAAE,CAACN,CAAD,CAAPS;;AACA,UAAID,EAAE,CAACE,YAAHF,KAAoBC,EAAE,CAACC,YAAvBF,IAAuCA,EAAE,CAACG,KAAHH,KAAaC,EAAE,CAACE,KAA3D,EAAkE;AAChE,eAAO,KAAP;AACD;AACF;;AACD,WAAO,IAAP;AACD;;AACD,WAASC,OAAT,CAAiBC,MAAjB,EAAyB;AACvB,QAAIzC,OAAO,CAACyC,MAAD,CAAX,EAAqB;AACnB,aAAOA,MAAM,CAACC,GAAPD,CAAWD,OAAXC,CAAP;AACD;;AACD,QAAIjC,QAAQ,CAACiC,MAAD,CAAZ,EAAsB;AACpB,YAAME,MAAM,GAAGxC,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAf;AACA,YAAM2B,IAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAYsC,MAAZtC,CAAb;AACA,YAAM0C,IAAI,GAAGf,IAAI,CAACC,MAAlB;AACA,UAAIe,CAAC,GAAG,CAAR;;AACA,aAAOA,CAAC,GAAGD,IAAX,EAAiB,EAAEC,CAAnB,EAAsB;AACpBH,cAAM,CAACb,IAAI,CAACgB,CAAD,CAAL,CAANH,GAAkBH,OAAO,CAACC,MAAM,CAACX,IAAI,CAACgB,CAAD,CAAL,CAAP,CAAzBH;AACD;;AACD,aAAOA,MAAP;AACD;;AACD,WAAOF,MAAP;AACD;;AACD,WAASM,UAAT,CAAoBC,GAApB,EAAyB;AACvB,WAAO,CAAC,WAAD,EAAc,WAAd,EAA2B,aAA3B,EAA0CC,OAA1C,CAAkDD,GAAlD,MAA2D,CAAC,CAAnE;AACD;;AACD,WAASE,OAAT,CAAiBF,GAAjB,EAAsBL,MAAtB,EAA8BF,MAA9B,EAAsCU,OAAtC,EAA+C;AAC7C,QAAI,CAACJ,UAAU,CAACC,GAAD,CAAf,EAAsB;AACpB;AACD;;AACD,UAAMI,IAAI,GAAGT,MAAM,CAACK,GAAD,CAAnB;AACA,UAAMK,IAAI,GAAGZ,MAAM,CAACO,GAAD,CAAnB;;AACA,QAAIxC,QAAQ,CAAC4C,IAAD,CAAR5C,IAAkBA,QAAQ,CAAC6C,IAAD,CAA9B,EAAsC;AACpCC,WAAK,CAACF,IAAD,EAAOC,IAAP,EAAaF,OAAb,CAALG;AADF,WAEO;AACLX,YAAM,CAACK,GAAD,CAANL,GAAcH,OAAO,CAACa,IAAD,CAArBV;AACD;AACF;;AACD,WAASW,KAAT,CAAeX,MAAf,EAAuBF,MAAvB,EAA+BU,OAA/B,EAAwC;AACtC,UAAMI,OAAO,GAAGvD,OAAO,CAACyC,MAAD,CAAPzC,GAAkByC,MAAlBzC,GAA2B,CAACyC,MAAD,CAA3C;AACA,UAAMN,IAAI,GAAGoB,OAAO,CAACxB,MAArB;;AACA,QAAI,CAACvB,QAAQ,CAACmC,MAAD,CAAb,EAAuB;AACrB,aAAOA,MAAP;AACD;;AACDQ,WAAO,GAAGA,OAAO,IAAI,EAArBA;AACA,UAAMK,MAAM,GAAGL,OAAO,CAACK,MAARL,IAAkBD,OAAjC;;AACA,SAAK,IAAItB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGO,IAApB,EAA0B,EAAEP,CAA5B,EAA+B;AAC7Ba,YAAM,GAAGc,OAAO,CAAC3B,CAAD,CAAhBa;;AACA,UAAI,CAACjC,QAAQ,CAACiC,MAAD,CAAb,EAAuB;AACrB;AACD;;AACD,YAAMX,IAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAYsC,MAAZtC,CAAb;;AACA,WAAK,IAAI2C,CAAC,GAAG,CAAR,EAAWD,IAAI,GAAGf,IAAI,CAACC,MAA5B,EAAoCe,CAAC,GAAGD,IAAxC,EAA8C,EAAEC,CAAhD,EAAmD;AACjDU,cAAM,CAAC1B,IAAI,CAACgB,CAAD,CAAL,EAAUH,MAAV,EAAkBF,MAAlB,EAA0BU,OAA1B,CAANK;AACD;AACF;;AACD,WAAOb,MAAP;AACD;;AACD,WAASc,OAAT,CAAiBd,MAAjB,EAAyBF,MAAzB,EAAiC;AAC/B,WAAOa,KAAK,CAACX,MAAD,EAASF,MAAT,EAAiB;AAACe,YAAM,EAAEE;AAAT,KAAjB,CAAZ;AACD;;AACD,WAASA,SAAT,CAAmBV,GAAnB,EAAwBL,MAAxB,EAAgCF,MAAhC,EAAwC;AACtC,QAAI,CAACM,UAAU,CAACC,GAAD,CAAf,EAAsB;AACpB;AACD;;AACD,UAAMI,IAAI,GAAGT,MAAM,CAACK,GAAD,CAAnB;AACA,UAAMK,IAAI,GAAGZ,MAAM,CAACO,GAAD,CAAnB;;AACA,QAAIxC,QAAQ,CAAC4C,IAAD,CAAR5C,IAAkBA,QAAQ,CAAC6C,IAAD,CAA9B,EAAsC;AACpCI,aAAO,CAACL,IAAD,EAAOC,IAAP,CAAPI;AADF,WAEO,IAAI,CAACtD,MAAM,CAACC,SAAPD,CAAiBwD,cAAjBxD,CAAgCG,IAAhCH,CAAqCwC,MAArCxC,EAA6C6C,GAA7C7C,CAAL,EAAwD;AAC7DwC,YAAM,CAACK,GAAD,CAANL,GAAcH,OAAO,CAACa,IAAD,CAArBV;AACD;AACF;;AACD,WAASiB,WAAT,CAAqBC,KAArB,EAA4B9D,KAA5B,EAAmC+D,QAAnC,EAA6CC,OAA7C,EAAsD;AACpD,QAAIhE,KAAK,KAAKiE,SAAd,EAAyB;AACvBC,aAAO,CAACC,IAARD,CAAaJ,KAAK,GAAG,KAARA,GAAgBC,QAAhBD,GACd,+BADcA,GACoBE,OADpBF,GAC8B,WAD3CI;AAED;AACF;;AACD,QAAME,YAAY,GAAG;AACnB,QAAIC,CAAC,IAAIA,CADU;AAEnBC,KAAC,EAAEC,CAAC,IAAIA,CAAC,CAACD,CAFS;AAGnBE,KAAC,EAAED,CAAC,IAAIA,CAAC,CAACC;AAHS,GAArB;;AAKA,WAASC,gBAAT,CAA0BC,GAA1B,EAA+BzB,GAA/B,EAAoC;AAClC,UAAM0B,QAAQ,GAAGP,YAAY,CAACnB,GAAD,CAAZmB,KAAsBA,YAAY,CAACnB,GAAD,CAAZmB,GAAoBQ,eAAe,CAAC3B,GAAD,CAAzDmB,CAAjB;;AACA,WAAOO,QAAQ,CAACD,GAAD,CAAf;AACD;;AACD,WAASE,eAAT,CAAyB3B,GAAzB,EAA8B;AAC5B,UAAMlB,IAAI,GAAG8C,SAAS,CAAC5B,GAAD,CAAtB;;AACA,WAAOyB,GAAG,IAAI;AACZ,WAAK,MAAM3B,CAAX,IAAgBhB,IAAhB,EAAsB;AACpB,YAAIgB,CAAC,KAAK,EAAV,EAAc;AACZ;AACD;;AACD2B,WAAG,GAAGA,GAAG,IAAIA,GAAG,CAAC3B,CAAD,CAAhB2B;AACD;;AACD,aAAOA,GAAP;AAPF;AASD;;AACD,WAASG,SAAT,CAAmB5B,GAAnB,EAAwB;AACtB,UAAM6B,KAAK,GAAG7B,GAAG,CAAC8B,KAAJ9B,CAAU,GAAVA,CAAd;AACA,UAAMlB,IAAI,GAAG,EAAb;AACA,QAAIiD,GAAG,GAAG,EAAV;;AACA,SAAK,MAAMC,IAAX,IAAmBH,KAAnB,EAA0B;AACxBE,SAAG,IAAIC,IAAPD;;AACA,UAAIA,GAAG,CAAC9D,QAAJ8D,CAAa,IAAbA,CAAJ,EAAwB;AACtBA,WAAG,GAAGA,GAAG,CAACxE,KAAJwE,CAAU,CAAVA,EAAa,CAAC,CAAdA,IAAmB,GAAzBA;AADF,aAEO;AACLjD,YAAI,CAACmD,IAALnD,CAAUiD,GAAVjD;AACAiD,WAAG,GAAG,EAANA;AACD;AACF;;AACD,WAAOjD,IAAP;AACD;;AACD,WAASoD,WAAT,CAAqBC,GAArB,EAA0B;AACxB,WAAOA,GAAG,CAACC,MAAJD,CAAW,CAAXA,EAAcE,WAAdF,KAA8BA,GAAG,CAAC5E,KAAJ4E,CAAU,CAAVA,CAArC;AACD;;AACD,QAAMG,OAAO,GAAIvF,KAAD,IAAW,OAAOA,KAAP,KAAiB,WAA5C;;AACA,QAAMwF,UAAU,GAAIxF,KAAD,IAAW,OAAOA,KAAP,KAAiB,UAA/C;;AACA,QAAMyF,SAAS,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC1B,QAAID,CAAC,CAACE,IAAFF,KAAWC,CAAC,CAACC,IAAjB,EAAuB;AACrB,aAAO,KAAP;AACD;;AACD,SAAK,MAAMC,IAAX,IAAmBH,CAAnB,EAAsB;AACpB,UAAI,CAACC,CAAC,CAACG,GAAFH,CAAME,IAANF,CAAL,EAAkB;AAChB,eAAO,KAAP;AACD;AACF;;AACD,WAAO,IAAP;AATF;;AAWA,WAASI,aAAT,CAAuBC,CAAvB,EAA0B;AACxB,WAAOA,CAAC,CAAC7F,IAAF6F,KAAW,SAAXA,IAAwBA,CAAC,CAAC7F,IAAF6F,KAAW,OAAnCA,IAA8CA,CAAC,CAAC7F,IAAF6F,KAAW,aAAhE;AACD;;AAED,QAAMC,EAAE,GAAGC,IAAI,CAACD,EAAhB;AACA,QAAME,GAAG,GAAG,IAAIF,EAAhB;AACA,QAAMG,KAAK,GAAGD,GAAG,GAAGF,EAApB;AACA,QAAMI,QAAQ,GAAG1F,MAAM,CAAC2F,iBAAxB;AACA,QAAMC,WAAW,GAAGN,EAAE,GAAG,GAAzB;AACA,QAAMO,OAAO,GAAGP,EAAE,GAAG,CAArB;AACA,QAAMQ,UAAU,GAAGR,EAAE,GAAG,CAAxB;AACA,QAAMS,aAAa,GAAGT,EAAE,GAAG,CAALA,GAAS,CAA/B;AACA,QAAMU,KAAK,GAAGT,IAAI,CAACS,KAAnB;AACA,QAAMC,IAAI,GAAGV,IAAI,CAACU,IAAlB;;AACA,WAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,UAAMC,YAAY,GAAGb,IAAI,CAACc,KAALd,CAAWY,KAAXZ,CAArB;AACAY,SAAK,GAAGG,YAAY,CAACH,KAAD,EAAQC,YAAR,EAAsBD,KAAK,GAAG,IAA9B,CAAZG,GAAkDF,YAAlDE,GAAiEH,KAAzEA;AACA,UAAMI,SAAS,GAAGhB,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAaA,IAAI,CAACkB,KAALlB,CAAWS,KAAK,CAACG,KAAD,CAAhBZ,CAAbA,CAAlB;AACA,UAAMmB,QAAQ,GAAGP,KAAK,GAAGI,SAAzB;AACA,UAAMI,YAAY,GAAGD,QAAQ,IAAI,CAAZA,GAAgB,CAAhBA,GAAoBA,QAAQ,IAAI,CAAZA,GAAgB,CAAhBA,GAAoBA,QAAQ,IAAI,CAAZA,GAAgB,CAAhBA,GAAoB,EAAjF;AACA,WAAOC,YAAY,GAAGJ,SAAtB;AACD;;AACD,WAASK,UAAT,CAAoBvH,KAApB,EAA2B;AACzB,UAAMwH,MAAM,GAAG,EAAf;AACA,UAAMC,IAAI,GAAGvB,IAAI,CAACuB,IAALvB,CAAUlG,KAAVkG,CAAb;AACA,QAAIrE,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4F,IAAhB,EAAsB5F,CAAC,EAAvB,EAA2B;AACzB,UAAI7B,KAAK,GAAG6B,CAAR7B,KAAc,CAAlB,EAAqB;AACnBwH,cAAM,CAACtC,IAAPsC,CAAY3F,CAAZ2F;AACAA,cAAM,CAACtC,IAAPsC,CAAYxH,KAAK,GAAG6B,CAApB2F;AACD;AACF;;AACD,QAAIC,IAAI,MAAMA,IAAI,GAAG,CAAb,CAAR,EAAyB;AACvBD,YAAM,CAACtC,IAAPsC,CAAYC,IAAZD;AACD;;AACDA,UAAM,CAACE,IAAPF,CAAY,CAAC9B,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA1B6B,EAA6BG,GAA7BH;AACA,WAAOA,MAAP;AACD;;AACD,WAASI,QAAT,CAAkBC,CAAlB,EAAqB;AACnB,WAAO,CAACC,KAAK,CAAC3G,UAAU,CAAC0G,CAAD,CAAX,CAAN,IAAyBjH,QAAQ,CAACiH,CAAD,CAAxC;AACD;;AACD,WAASZ,YAAT,CAAsB3C,CAAtB,EAAyBE,CAAzB,EAA4BuD,OAA5B,EAAqC;AACnC,WAAO7B,IAAI,CAAC8B,GAAL9B,CAAS5B,CAAC,GAAGE,CAAb0B,IAAkB6B,OAAzB;AACD;;AACD,WAASE,WAAT,CAAqB3D,CAArB,EAAwByD,OAAxB,EAAiC;AAC/B,UAAMG,OAAO,GAAGhC,IAAI,CAACc,KAALd,CAAW5B,CAAX4B,CAAhB;AACA,WAASgC,OAAO,GAAGH,OAAVG,IAAsB5D,CAAtB4D,IAA8BA,OAAO,GAAGH,OAAVG,IAAsB5D,CAA7D;AACD;;AACD,WAAS6D,kBAAT,CAA4BC,KAA5B,EAAmCxF,MAAnC,EAA2CyF,QAA3C,EAAqD;AACnD,QAAIxG,CAAJ,EAAOO,IAAP,EAAapC,KAAb;;AACA,SAAK6B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgG,KAAK,CAACpG,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2CP,CAAC,EAA5C,EAAgD;AAC9C7B,WAAK,GAAGoI,KAAK,CAACvG,CAAD,CAALuG,CAASC,QAATD,CAARpI;;AACA,UAAI,CAAC8H,KAAK,CAAC9H,KAAD,CAAV,EAAmB;AACjB4C,cAAM,CAAC0F,GAAP1F,GAAasD,IAAI,CAACoC,GAALpC,CAAStD,MAAM,CAAC0F,GAAhBpC,EAAqBlG,KAArBkG,CAAbtD;AACAA,cAAM,CAAC2F,GAAP3F,GAAasD,IAAI,CAACqC,GAALrC,CAAStD,MAAM,CAAC2F,GAAhBrC,EAAqBlG,KAArBkG,CAAbtD;AACD;AACF;AACF;;AACD,WAAS4F,SAAT,CAAmBC,OAAnB,EAA4B;AAC1B,WAAOA,OAAO,IAAIxC,EAAE,GAAG,GAAT,CAAd;AACD;;AACD,WAASyC,SAAT,CAAmBC,OAAnB,EAA4B;AAC1B,WAAOA,OAAO,IAAI,MAAM1C,EAAV,CAAd;AACD;;AACD,WAAS2C,cAAT,CAAwBtE,CAAxB,EAA2B;AACzB,QAAI,CAAC5D,cAAc,CAAC4D,CAAD,CAAnB,EAAwB;AACtB;AACD;;AACD,QAAI0B,CAAC,GAAG,CAAR;AACA,QAAI6C,CAAC,GAAG,CAAR;;AACA,WAAO3C,IAAI,CAACc,KAALd,CAAW5B,CAAC,GAAG0B,CAAfE,IAAoBF,CAApBE,KAA0B5B,CAAjC,EAAoC;AAClC0B,OAAC,IAAI,EAALA;AACA6C,OAAC;AACF;;AACD,WAAOA,CAAP;AACD;;AACD,WAASC,iBAAT,CAA2BC,WAA3B,EAAwCC,UAAxC,EAAoD;AAClD,UAAMC,mBAAmB,GAAGD,UAAU,CAAC1E,CAAX0E,GAAeD,WAAW,CAACzE,CAAvD;AACA,UAAM4E,mBAAmB,GAAGF,UAAU,CAACxE,CAAXwE,GAAeD,WAAW,CAACvE,CAAvD;AACA,UAAM2E,wBAAwB,GAAGjD,IAAI,CAACuB,IAALvB,CAAU+C,mBAAmB,GAAGA,mBAAtBA,GAA4CC,mBAAmB,GAAGA,mBAA5EhD,CAAjC;AACA,QAAIkD,KAAK,GAAGlD,IAAI,CAACmD,KAALnD,CAAWgD,mBAAXhD,EAAgC+C,mBAAhC/C,CAAZ;;AACA,QAAIkD,KAAK,GAAI,CAAC,GAAD,GAAOnD,EAApB,EAAyB;AACvBmD,WAAK,IAAIjD,GAATiD;AACD;;AACD,WAAO;AACLA,WADK;AAELE,cAAQ,EAAEH;AAFL,KAAP;AAID;;AACD,WAASI,qBAAT,CAA+BC,GAA/B,EAAoCC,GAApC,EAAyC;AACvC,WAAOvD,IAAI,CAACuB,IAALvB,CAAUA,IAAI,CAACiB,GAALjB,CAASuD,GAAG,CAACnF,CAAJmF,GAAQD,GAAG,CAAClF,CAArB4B,EAAwB,CAAxBA,IAA6BA,IAAI,CAACiB,GAALjB,CAASuD,GAAG,CAACjF,CAAJiF,GAAQD,GAAG,CAAChF,CAArB0B,EAAwB,CAAxBA,CAAvCA,CAAP;AACD;;AACD,WAASwD,UAAT,CAAoBhE,CAApB,EAAuBC,CAAvB,EAA0B;AACxB,WAAO,CAACD,CAAC,GAAGC,CAAJD,GAAQU,KAAT,IAAkBD,GAAlB,GAAwBF,EAA/B;AACD;;AACD,WAAS0D,eAAT,CAAyBjE,CAAzB,EAA4B;AAC1B,WAAO,CAACA,CAAC,GAAGS,GAAJT,GAAUS,GAAX,IAAkBA,GAAzB;AACD;;AACD,WAASyD,aAAT,CAAuBR,KAAvB,EAA8BS,KAA9B,EAAqCC,GAArC,EAA0CC,qBAA1C,EAAiE;AAC/D,UAAMrE,CAAC,GAAGiE,eAAe,CAACP,KAAD,CAAzB;;AACA,UAAMY,CAAC,GAAGL,eAAe,CAACE,KAAD,CAAzB;;AACA,UAAM7D,CAAC,GAAG2D,eAAe,CAACG,GAAD,CAAzB;;AACA,UAAMG,YAAY,GAAGN,eAAe,CAACK,CAAC,GAAGtE,CAAL,CAApC;;AACA,UAAMwE,UAAU,GAAGP,eAAe,CAAC3D,CAAC,GAAGN,CAAL,CAAlC;;AACA,UAAMyE,YAAY,GAAGR,eAAe,CAACjE,CAAC,GAAGsE,CAAL,CAApC;;AACA,UAAMI,UAAU,GAAGT,eAAe,CAACjE,CAAC,GAAGM,CAAL,CAAlC;;AACA,WAAON,CAAC,KAAKsE,CAANtE,IAAWA,CAAC,KAAKM,CAAjBN,IAAuBqE,qBAAqB,IAAIC,CAAC,KAAKhE,CAAtDN,IACDuE,YAAY,GAAGC,UAAfD,IAA6BE,YAAY,GAAGC,UADlD;AAED;;AACD,WAASC,WAAT,CAAqBrK,KAArB,EAA4BsI,GAA5B,EAAiCC,GAAjC,EAAsC;AACpC,WAAOrC,IAAI,CAACqC,GAALrC,CAASoC,GAATpC,EAAcA,IAAI,CAACoC,GAALpC,CAASqC,GAATrC,EAAclG,KAAdkG,CAAdA,CAAP;AACD;;AACD,WAASoE,WAAT,CAAqBtK,KAArB,EAA4B;AAC1B,WAAOqK,WAAW,CAACrK,KAAD,EAAQ,CAAC,KAAT,EAAgB,KAAhB,CAAlB;AACD;;AACD,WAASuK,UAAT,CAAoBvK,KAApB,EAA2B6J,KAA3B,EAAkCC,GAAlC,EAAuD;AAAA,QAAhB/B,OAAgB,uEAAN,IAAM;AACrD,WAAO/H,KAAK,IAAIkG,IAAI,CAACoC,GAALpC,CAAS2D,KAAT3D,EAAgB4D,GAAhB5D,IAAuB6B,OAAhC/H,IAA2CA,KAAK,IAAIkG,IAAI,CAACqC,GAALrC,CAAS2D,KAAT3D,EAAgB4D,GAAhB5D,IAAuB6B,OAAlF;AACD;;AAED,WAASyC,OAAT,CAAiBC,KAAjB,EAAwBzK,KAAxB,EAA+B0K,GAA/B,EAAoC;AAClCA,OAAG,GAAGA,GAAG,KAAMlI,KAAD,IAAWiI,KAAK,CAACjI,KAAD,CAALiI,GAAezK,KAA/B,CAAT0K;;AACA,QAAIC,EAAE,GAAGF,KAAK,CAACzI,MAANyI,GAAe,CAAxB;AACA,QAAIG,EAAE,GAAG,CAAT;AACA,QAAIC,GAAJ;;AACA,WAAOF,EAAE,GAAGC,EAALD,GAAU,CAAjB,EAAoB;AAClBE,SAAG,GAAID,EAAE,GAAGD,EAALC,IAAY,CAAnBC;;AACA,UAAIH,GAAG,CAACG,GAAD,CAAP,EAAc;AACZD,UAAE,GAAGC,GAALD;AADF,aAEO;AACLD,UAAE,GAAGE,GAALF;AACD;AACF;;AACD,WAAO;AAACC,QAAD;AAAKD;AAAL,KAAP;AACD;;AACD,QAAMG,YAAY,GAAG,CAACL,KAAD,EAAQxH,GAAR,EAAajD,KAAb,EAAoB+K,IAApB,KACnBP,OAAO,CAACC,KAAD,EAAQzK,KAAR,EAAe+K,IAAI,GACtBvI,KAAK,IAAIiI,KAAK,CAACjI,KAAD,CAALiI,CAAaxH,GAAbwH,KAAqBzK,KADR,GAEtBwC,KAAK,IAAIiI,KAAK,CAACjI,KAAD,CAALiI,CAAaxH,GAAbwH,IAAoBzK,KAF1B,CADT;;AAIA,QAAMgL,aAAa,GAAG,CAACP,KAAD,EAAQxH,GAAR,EAAajD,KAAb,KACpBwK,OAAO,CAACC,KAAD,EAAQzK,KAAR,EAAewC,KAAK,IAAIiI,KAAK,CAACjI,KAAD,CAALiI,CAAaxH,GAAbwH,KAAqBzK,KAA7C,CADT;;AAEA,WAASiL,cAAT,CAAwBC,MAAxB,EAAgC5C,GAAhC,EAAqCC,GAArC,EAA0C;AACxC,QAAIsB,KAAK,GAAG,CAAZ;AACA,QAAIC,GAAG,GAAGoB,MAAM,CAAClJ,MAAjB;;AACA,WAAO6H,KAAK,GAAGC,GAARD,IAAeqB,MAAM,CAACrB,KAAD,CAANqB,GAAgB5C,GAAtC,EAA2C;AACzCuB,WAAK;AACN;;AACD,WAAOC,GAAG,GAAGD,KAANC,IAAeoB,MAAM,CAACpB,GAAG,GAAG,CAAP,CAANoB,GAAkB3C,GAAxC,EAA6C;AAC3CuB,SAAG;AACJ;;AACD,WAAOD,KAAK,GAAG,CAARA,IAAaC,GAAG,GAAGoB,MAAM,CAAClJ,MAA1B6H,GACHqB,MAAM,CAAC1K,KAAP0K,CAAarB,KAAbqB,EAAoBpB,GAApBoB,CADGrB,GAEHqB,MAFJ;AAGD;;AACD,QAAMC,WAAW,GAAG,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,EAAyB,QAAzB,EAAmC,SAAnC,CAApB;;AACA,WAASC,iBAAT,CAA2BhD,KAA3B,EAAkCiD,QAAlC,EAA4C;AAC1C,QAAIjD,KAAK,CAACkD,QAAV,EAAoB;AAClBlD,WAAK,CAACkD,QAANlD,CAAemD,SAAfnD,CAAyBlD,IAAzBkD,CAA8BiD,QAA9BjD;;AACA;AACD;;AACDhI,UAAM,CAACoL,cAAPpL,CAAsBgI,KAAtBhI,EAA6B,UAA7BA,EAAyC;AACvCqL,kBAAY,EAAE,IADyB;AAEvCC,gBAAU,EAAE,KAF2B;AAGvC1L,WAAK,EAAE;AACLuL,iBAAS,EAAE,CAACF,QAAD;AADN;AAHgC,KAAzCjL;AAOA+K,eAAW,CAACQ,OAAZR,CAAqBlI,GAAD,IAAS;AAC3B,YAAM2I,MAAM,GAAG,YAAYzG,WAAW,CAAClC,GAAD,CAAtC;;AACA,YAAM4I,IAAI,GAAGzD,KAAK,CAACnF,GAAD,CAAlB;AACA7C,YAAM,CAACoL,cAAPpL,CAAsBgI,KAAtBhI,EAA6B6C,GAA7B7C,EAAkC;AAChCqL,oBAAY,EAAE,IADkB;AAEhCC,kBAAU,EAAE,KAFoB;;AAGhC1L,aAAK,GAAU;AAAA,4CAANuB,IAAM;AAANA,gBAAM;AAAA;;AACb,gBAAMuK,GAAG,GAAGD,IAAI,CAACpK,KAALoK,CAAW,IAAXA,EAAiBtK,IAAjBsK,CAAZ;;AACAzD,eAAK,CAACkD,QAANlD,CAAemD,SAAfnD,CAAyBuD,OAAzBvD,CAAkC2D,MAAD,IAAY;AAC3C,gBAAI,OAAOA,MAAM,CAACH,MAAD,CAAb,KAA0B,UAA9B,EAA0C;AACxCG,oBAAM,CAACH,MAAD,CAANG,CAAe,GAAGxK,IAAlBwK;AACD;AAHH;;AAKA,iBAAOD,GAAP;AACD;;AAX+B,OAAlC1L;AAHF;AAiBD;;AACD,WAAS4L,mBAAT,CAA6B5D,KAA7B,EAAoCiD,QAApC,EAA8C;AAC5C,UAAMY,IAAI,GAAG7D,KAAK,CAACkD,QAAnB;;AACA,QAAI,CAACW,IAAL,EAAW;AACT;AACD;;AACD,UAAMV,SAAS,GAAGU,IAAI,CAACV,SAAvB;AACA,UAAM/I,KAAK,GAAG+I,SAAS,CAACrI,OAAVqI,CAAkBF,QAAlBE,CAAd;;AACA,QAAI/I,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB+I,eAAS,CAACW,MAAVX,CAAiB/I,KAAjB+I,EAAwB,CAAxBA;AACD;;AACD,QAAIA,SAAS,CAACvJ,MAAVuJ,GAAmB,CAAvB,EAA0B;AACxB;AACD;;AACDJ,eAAW,CAACQ,OAAZR,CAAqBlI,GAAD,IAAS;AAC3B,aAAOmF,KAAK,CAACnF,GAAD,CAAZ;AADF;AAGA,WAAOmF,KAAK,CAACkD,QAAb;AACD;;AACD,WAASa,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,UAAMC,GAAG,GAAG,IAAIC,GAAJ,EAAZ;AACA,QAAIzK,CAAJ,EAAOO,IAAP;;AACA,SAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgK,KAAK,CAACpK,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9CwK,SAAG,CAACE,GAAJF,CAAQD,KAAK,CAACvK,CAAD,CAAbwK;AACD;;AACD,QAAIA,GAAG,CAACzG,IAAJyG,KAAajK,IAAjB,EAAuB;AACrB,aAAOgK,KAAP;AACD;;AACD,WAAOlM,KAAK,CAACsM,IAANtM,CAAWmM,GAAXnM,CAAP;AACD;;AAED,WAASuM,UAAT,CAAoBC,SAApB,EAA+BC,SAA/B,EAA0CC,UAA1C,EAAsD;AACpD,WAAOD,SAAS,GAAG,GAAZA,GAAkBD,SAAlBC,GAA8B,KAA9BA,GAAsCC,UAA7C;AACD;;AACD,QAAMC,gBAAgB,GAAI,YAAW;AACnC,QAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACjC,aAAO,UAASzL,QAAT,EAAmB;AACxB,eAAOA,QAAQ,EAAf;AADF;AAGD;;AACD,WAAOyL,MAAM,CAACC,qBAAd;AANwB,KAA1B;;AAQA,WAASC,SAAT,CAAmB1L,EAAnB,EAAuBE,OAAvB,EAAgCyL,QAAhC,EAA0C;AACxC,UAAMC,UAAU,GAAGD,QAAQ,KAAM1L,IAAD,IAAUrB,KAAK,CAACG,SAANH,CAAgBM,KAAhBN,CAAsBK,IAAtBL,CAA2BqB,IAA3BrB,CAAf,CAA3B;;AACA,QAAIiN,OAAO,GAAG,KAAd;AACA,QAAI5L,IAAI,GAAG,EAAX;AACA,WAAO,YAAkB;AAAA,yCAAN6L,IAAM;AAANA,YAAM;AAAA;;AACvB7L,UAAI,GAAG2L,UAAU,CAACE,IAAD,CAAjB7L;;AACA,UAAI,CAAC4L,OAAL,EAAc;AACZA,eAAO,GAAG,IAAVA;AACAN,wBAAgB,CAACtM,IAAjBsM,CAAsBC,MAAtBD,EAA8B,MAAM;AAClCM,iBAAO,GAAG,KAAVA;AACA7L,YAAE,CAACG,KAAHH,CAASE,OAATF,EAAkBC,IAAlBD;AAFF;AAID;AARH;AAUD;;AACD,WAAS+L,QAAT,CAAkB/L,EAAlB,EAAsBgM,KAAtB,EAA6B;AAC3B,QAAIC,OAAJ;AACA,WAAO,YAAkB;AAAA,yCAANhM,IAAM;AAANA,YAAM;AAAA;;AACvB,UAAI+L,KAAJ,EAAW;AACTE,oBAAY,CAACD,OAAD,CAAZC;AACAD,eAAO,GAAGE,UAAU,CAACnM,EAAD,EAAKgM,KAAL,EAAY/L,IAAZ,CAApBgM;AAFF,aAGO;AACLjM,UAAE,CAACG,KAAHH,CAAS,IAATA,EAAeC,IAAfD;AACD;;AACD,aAAOgM,KAAP;AAPF;AASD;;AACD,QAAMI,kBAAkB,GAAIC,KAAD,IAAWA,KAAK,KAAK,OAAVA,GAAoB,MAApBA,GAA6BA,KAAK,KAAK,KAAVA,GAAkB,OAAlBA,GAA4B,QAA/F;;AACA,QAAMC,cAAc,GAAG,CAACD,KAAD,EAAQ9D,KAAR,EAAeC,GAAf,KAAuB6D,KAAK,KAAK,OAAVA,GAAoB9D,KAApB8D,GAA4BA,KAAK,KAAK,KAAVA,GAAkB7D,GAAlB6D,GAAwB,CAAC9D,KAAK,GAAGC,GAAT,IAAgB,CAAlH;;AACA,QAAM+D,MAAM,GAAG,CAACF,KAAD,EAAQG,IAAR,EAAcC,KAAd,EAAqBC,GAArB,KAA6B;AAC1C,UAAMC,KAAK,GAAGD,GAAG,GAAG,MAAH,GAAY,OAA7B;AACA,WAAOL,KAAK,KAAKM,KAAVN,GAAkBI,KAAlBJ,GAA0BA,KAAK,KAAK,QAAVA,GAAqB,CAACG,IAAI,GAAGC,KAAR,IAAiB,CAAtCJ,GAA0CG,IAA3E;AAFF;;AAIA,WAASI,gCAAT,CAA0CC,IAA1C,EAAgDC,MAAhD,EAAwDC,kBAAxD,EAA4E;AAC1E,UAAMC,UAAU,GAAGF,MAAM,CAACpM,MAA1B;AACA,QAAI6H,KAAK,GAAG,CAAZ;AACA,QAAI0E,KAAK,GAAGD,UAAZ;;AACA,QAAIH,IAAI,CAACK,OAAT,EAAkB;AAChB,YAAM;AAACC,cAAD;AAASC;AAAT,UAAoBP,IAA1B;AACA,YAAMQ,IAAI,GAAGF,MAAM,CAACE,IAApB;AACA,YAAM;AAACrG,WAAD;AAAMC,WAAN;AAAWqG,kBAAX;AAAuBC;AAAvB,UAAqCJ,MAAM,CAACK,aAAPL,EAA3C;;AACA,UAAIG,UAAJ,EAAgB;AACd/E,aAAK,GAAGQ,WAAW,CAACnE,IAAI,CAACoC,GAALpC,CAClB4E,YAAY,CAAC4D,OAAD,EAAUD,MAAM,CAACE,IAAjB,EAAuBrG,GAAvB,CAAZwC,CAAwCF,EADtB1E,EAElBmI,kBAAkB,GAAGC,UAAH,GAAgBxD,YAAY,CAACsD,MAAD,EAASO,IAAT,EAAeF,MAAM,CAACM,gBAAPN,CAAwBnG,GAAxBmG,CAAf,CAAZ3D,CAAyDF,EAFzE1E,CAAD,EAGnB,CAHmB,EAGhBoI,UAAU,GAAG,CAHG,CAAnBzE;AAID;;AACD,UAAIgF,UAAJ,EAAgB;AACdN,aAAK,GAAGlE,WAAW,CAACnE,IAAI,CAACqC,GAALrC,CAClB4E,YAAY,CAAC4D,OAAD,EAAUD,MAAM,CAACE,IAAjB,EAAuBpG,GAAvB,EAA4B,IAA5B,CAAZuC,CAA8CH,EAA9CG,GAAmD,CADjC5E,EAElBmI,kBAAkB,GAAG,CAAH,GAAOvD,YAAY,CAACsD,MAAD,EAASO,IAAT,EAAeF,MAAM,CAACM,gBAAPN,CAAwBlG,GAAxBkG,CAAf,EAA6C,IAA7C,CAAZ3D,CAA+DH,EAA/DG,GAAoE,CAF3E5E,CAAD,EAGnB2D,KAHmB,EAGZyE,UAHY,CAAXjE,GAGaR,KAHrB0E;AADF,aAKO;AACLA,aAAK,GAAGD,UAAU,GAAGzE,KAArB0E;AACD;AACF;;AACD,WAAO;AAAC1E,WAAD;AAAQ0E;AAAR,KAAP;AACD;;AACD,WAASS,mBAAT,CAA6Bb,IAA7B,EAAmC;AACjC,UAAM;AAACc,YAAD;AAASC,YAAT;AAAiBC;AAAjB,QAAiChB,IAAvC;AACA,UAAMiB,SAAS,GAAG;AAChBC,UAAI,EAAEJ,MAAM,CAAC3G,GADG;AAEhBgH,UAAI,EAAEL,MAAM,CAAC1G,GAFG;AAGhBgH,UAAI,EAAEL,MAAM,CAAC5G,GAHG;AAIhBkH,UAAI,EAAEN,MAAM,CAAC3G;AAJG,KAAlB;;AAMA,QAAI,CAAC4G,YAAL,EAAmB;AACjBhB,UAAI,CAACgB,YAALhB,GAAoBiB,SAApBjB;AACA,aAAO,IAAP;AACD;;AACD,UAAMsB,OAAO,GAAGN,YAAY,CAACE,IAAbF,KAAsBF,MAAM,CAAC3G,GAA7B6G,IACbA,YAAY,CAACG,IAAbH,KAAsBF,MAAM,CAAC1G,GADhB4G,IAEbA,YAAY,CAACI,IAAbJ,KAAsBD,MAAM,CAAC5G,GAFhB6G,IAGbA,YAAY,CAACK,IAAbL,KAAsBD,MAAM,CAAC3G,GAHhC;AAIAnI,UAAM,CAACsP,MAAPtP,CAAc+O,YAAd/O,EAA4BgP,SAA5BhP;AACA,WAAOqP,OAAP;AACD;;AAED,QAAME,MAAM,GAAIC,CAAD,IAAOA,CAAC,KAAK,CAANA,IAAWA,CAAC,KAAK,CAAvC;;AACA,QAAMC,SAAS,GAAG,CAACD,CAAD,EAAI5F,CAAJ,EAAOnB,CAAP,KAAa,EAAE3C,IAAI,CAACiB,GAALjB,CAAS,CAATA,EAAY,MAAM0J,CAAC,IAAI,CAAX,CAAZ1J,IAA6BA,IAAI,CAAC4J,GAAL5J,CAAS,CAAC0J,CAAC,GAAG5F,CAAL,IAAU7D,GAAV,GAAgB0C,CAAzB3C,CAA/B,CAA/B;;AACA,QAAM6J,UAAU,GAAG,CAACH,CAAD,EAAI5F,CAAJ,EAAOnB,CAAP,KAAa3C,IAAI,CAACiB,GAALjB,CAAS,CAATA,EAAY,CAAC,EAAD,GAAM0J,CAAlB1J,IAAuBA,IAAI,CAAC4J,GAAL5J,CAAS,CAAC0J,CAAC,GAAG5F,CAAL,IAAU7D,GAAV,GAAgB0C,CAAzB3C,CAAvBA,GAAqD,CAArF;;AACA,QAAM8J,OAAO,GAAG;AACdC,UAAM,EAAEL,CAAC,IAAIA,CADC;AAEdM,cAAU,EAAEN,CAAC,IAAIA,CAAC,GAAGA,CAFP;AAGdO,eAAW,EAAEP,CAAC,IAAI,CAACA,CAAD,IAAMA,CAAC,GAAG,CAAV,CAHJ;AAIdQ,iBAAa,EAAER,CAAC,IAAK,CAACA,CAAC,IAAI,GAAN,IAAa,CAAb,GACjB,MAAMA,CAAN,GAAUA,CADO,GAEjB,CAAC,GAAD,IAAS,EAAEA,CAAF,IAAQA,CAAC,GAAG,CAAZ,IAAiB,CAA1B,CANU;AAOdS,eAAW,EAAET,CAAC,IAAIA,CAAC,GAAGA,CAAJA,GAAQA,CAPZ;AAQdU,gBAAY,EAAEV,CAAC,IAAI,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmB,CARxB;AASdW,kBAAc,EAAEX,CAAC,IAAK,CAACA,CAAC,IAAI,GAAN,IAAa,CAAb,GAClB,MAAMA,CAAN,GAAUA,CAAV,GAAcA,CADI,GAElB,OAAO,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmB,CAA1B,CAXU;AAYdY,eAAW,EAAEZ,CAAC,IAAIA,CAAC,GAAGA,CAAJA,GAAQA,CAARA,GAAYA,CAZhB;AAada,gBAAY,EAAEb,CAAC,IAAI,EAAE,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuB,CAAzB,CAbL;AAcdc,kBAAc,EAAEd,CAAC,IAAK,CAACA,CAAC,IAAI,GAAN,IAAa,CAAb,GAClB,MAAMA,CAAN,GAAUA,CAAV,GAAcA,CAAd,GAAkBA,CADA,GAElB,CAAC,GAAD,IAAQ,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuB,CAA/B,CAhBU;AAiBde,eAAW,EAAEf,CAAC,IAAIA,CAAC,GAAGA,CAAJA,GAAQA,CAARA,GAAYA,CAAZA,GAAgBA,CAjBpB;AAkBdgB,gBAAY,EAAEhB,CAAC,IAAI,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAAvB,GAA2B,CAlBhC;AAmBdiB,kBAAc,EAAEjB,CAAC,IAAK,CAACA,CAAC,IAAI,GAAN,IAAa,CAAb,GAClB,MAAMA,CAAN,GAAUA,CAAV,GAAcA,CAAd,GAAkBA,CAAlB,GAAsBA,CADJ,GAElB,OAAO,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAAvB,GAA2B,CAAlC,CArBU;AAsBdkB,cAAU,EAAElB,CAAC,IAAI,CAAC1J,IAAI,CAAC6K,GAAL7K,CAAS0J,CAAC,GAAGpJ,OAAbN,CAAD,GAAyB,CAtB5B;AAuBd8K,eAAW,EAAEpB,CAAC,IAAI1J,IAAI,CAAC4J,GAAL5J,CAAS0J,CAAC,GAAGpJ,OAAbN,CAvBJ;AAwBd+K,iBAAa,EAAErB,CAAC,IAAI,CAAC,GAAD,IAAQ1J,IAAI,CAAC6K,GAAL7K,CAASD,EAAE,GAAG2J,CAAd1J,IAAmB,CAA3B,CAxBN;AAyBdgL,cAAU,EAAEtB,CAAC,IAAKA,CAAC,KAAK,CAANA,GAAW,CAAXA,GAAe1J,IAAI,CAACiB,GAALjB,CAAS,CAATA,EAAY,MAAM0J,CAAC,GAAG,CAAV,CAAZ1J,CAzBnB;AA0BdiL,eAAW,EAAEvB,CAAC,IAAKA,CAAC,KAAK,CAANA,GAAW,CAAXA,GAAe,CAAC1J,IAAI,CAACiB,GAALjB,CAAS,CAATA,EAAY,CAAC,EAAD,GAAM0J,CAAlB1J,CAAD,GAAwB,CA1B5C;AA2BdkL,iBAAa,EAAExB,CAAC,IAAID,MAAM,CAACC,CAAD,CAAND,GAAYC,CAAZD,GAAgBC,CAAC,GAAG,GAAJA,GAChC,MAAM1J,IAAI,CAACiB,GAALjB,CAAS,CAATA,EAAY,MAAM0J,CAAC,GAAG,CAAJA,GAAQ,CAAd,CAAZ1J,CAD0B0J,GAEhC,OAAO,CAAC1J,IAAI,CAACiB,GAALjB,CAAS,CAATA,EAAY,CAAC,EAAD,IAAO0J,CAAC,GAAG,CAAJA,GAAQ,CAAf,CAAZ1J,CAAD,GAAkC,CAAzC,CA7BU;AA8BdmL,cAAU,EAAEzB,CAAC,IAAKA,CAAC,IAAI,CAALA,GAAUA,CAAVA,GAAc,EAAE1J,IAAI,CAACuB,IAALvB,CAAU,IAAI0J,CAAC,GAAGA,CAAlB1J,IAAuB,CAAzB,CA9BlB;AA+BdoL,eAAW,EAAE1B,CAAC,IAAI1J,IAAI,CAACuB,IAALvB,CAAU,IAAI,CAAC0J,CAAC,IAAI,CAAN,IAAWA,CAAzB1J,CA/BJ;AAgCdqL,iBAAa,EAAE3B,CAAC,IAAK,CAACA,CAAC,IAAI,GAAN,IAAa,CAAb,GACjB,CAAC,GAAD,IAAQ1J,IAAI,CAACuB,IAALvB,CAAU,IAAI0J,CAAC,GAAGA,CAAlB1J,IAAuB,CAA/B,CADiB,GAEjB,OAAOA,IAAI,CAACuB,IAALvB,CAAU,IAAI,CAAC0J,CAAC,IAAI,CAAN,IAAWA,CAAzB1J,IAA8B,CAArC,CAlCU;AAmCdsL,iBAAa,EAAE5B,CAAC,IAAID,MAAM,CAACC,CAAD,CAAND,GAAYC,CAAZD,GAAgBE,SAAS,CAACD,CAAD,EAAI,KAAJ,EAAW,GAAX,CAnC/B;AAoCd6B,kBAAc,EAAE7B,CAAC,IAAID,MAAM,CAACC,CAAD,CAAND,GAAYC,CAAZD,GAAgBI,UAAU,CAACH,CAAD,EAAI,KAAJ,EAAW,GAAX,CApCjC;;AAqCd8B,oBAAgB,CAAC9B,CAAD,EAAI;AAClB,YAAM5F,CAAC,GAAG,MAAV;AACA,YAAMnB,CAAC,GAAG,IAAV;AACA,aAAO8G,MAAM,CAACC,CAAD,CAAND,GAAYC,CAAZD,GACLC,CAAC,GAAG,GAAJA,GACI,MAAMC,SAAS,CAACD,CAAC,GAAG,CAAL,EAAQ5F,CAAR,EAAWnB,CAAX,CADnB+G,GAEI,MAAM,MAAMG,UAAU,CAACH,CAAC,GAAG,CAAJA,GAAQ,CAAT,EAAY5F,CAAZ,EAAenB,CAAf,CAH5B;AAxCY;;AA6Cd8I,cAAU,CAAC/B,CAAD,EAAI;AACZ,YAAM5F,CAAC,GAAG,OAAV;AACA,aAAO4F,CAAC,GAAGA,CAAJA,IAAS,CAAC5F,CAAC,GAAG,CAAL,IAAU4F,CAAV,GAAc5F,CAAvB4F,CAAP;AA/CY;;AAiDdgC,eAAW,CAAChC,CAAD,EAAI;AACb,YAAM5F,CAAC,GAAG,OAAV;AACA,aAAO,CAAC4F,CAAC,IAAI,CAAN,IAAWA,CAAX,IAAgB,CAAC5F,CAAC,GAAG,CAAL,IAAU4F,CAAV,GAAc5F,CAA9B,IAAmC,CAA1C;AAnDY;;AAqDd6H,iBAAa,CAACjC,CAAD,EAAI;AACf,UAAI5F,CAAC,GAAG,OAAR;;AACA,UAAI,CAAC4F,CAAC,IAAI,GAAN,IAAa,CAAjB,EAAoB;AAClB,eAAO,OAAOA,CAAC,GAAGA,CAAJA,IAAS,CAAC,CAAC5F,CAAC,IAAK,KAAP,IAAiB,CAAlB,IAAuB4F,CAAvB,GAA2B5F,CAApC4F,CAAP,CAAP;AACD;;AACD,aAAO,OAAO,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,IAAgB,CAAC,CAAC5F,CAAC,IAAK,KAAP,IAAiB,CAAlB,IAAuB4F,CAAvB,GAA2B5F,CAA3C,IAAgD,CAAvD,CAAP;AA1DY;;AA4Dd8H,gBAAY,EAAElC,CAAC,IAAI,IAAII,OAAO,CAAC+B,aAAR/B,CAAsB,IAAIJ,CAA1BI,CA5DT;;AA6Dd+B,iBAAa,CAACnC,CAAD,EAAI;AACf,YAAMoC,CAAC,GAAG,MAAV;AACA,YAAMC,CAAC,GAAG,IAAV;;AACA,UAAIrC,CAAC,GAAI,IAAIqC,CAAb,EAAiB;AACf,eAAOD,CAAC,GAAGpC,CAAJoC,GAAQpC,CAAf;AACD;;AACD,UAAIA,CAAC,GAAI,IAAIqC,CAAb,EAAiB;AACf,eAAOD,CAAC,IAAIpC,CAAC,IAAK,MAAMqC,CAAhB,CAADD,GAAuBpC,CAAvBoC,GAA2B,IAAlC;AACD;;AACD,UAAIpC,CAAC,GAAI,MAAMqC,CAAf,EAAmB;AACjB,eAAOD,CAAC,IAAIpC,CAAC,IAAK,OAAOqC,CAAjB,CAADD,GAAwBpC,CAAxBoC,GAA4B,MAAnC;AACD;;AACD,aAAOA,CAAC,IAAIpC,CAAC,IAAK,QAAQqC,CAAlB,CAADD,GAAyBpC,CAAzBoC,GAA6B,QAApC;AAzEY;;AA2EdE,mBAAe,EAAEtC,CAAC,IAAKA,CAAC,GAAG,GAAJA,GACnBI,OAAO,CAAC8B,YAAR9B,CAAqBJ,CAAC,GAAG,CAAzBI,IAA8B,GADXJ,GAEnBI,OAAO,CAAC+B,aAAR/B,CAAsBJ,CAAC,GAAG,CAAJA,GAAQ,CAA9BI,IAAmC,GAAnCA,GAAyC;AA7E/B,GAAhB;AAgFA;AACA;AACA;AACA;AACA;AACA;;AACA,WAAShJ,KAAT,CAAe3C,CAAf,EAAkB;AAChB,WAAOA,CAAC,GAAG,GAAJA,GAAU,CAAjB;AACD;;AACD,QAAM8N,GAAG,GAAG,CAAC9N,CAAD,EAAI+N,CAAJ,EAAOC,CAAP,KAAanM,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAACoC,GAALpC,CAAS7B,CAAT6B,EAAYmM,CAAZnM,CAATA,EAAyBkM,CAAzBlM,CAAzB;;AACA,WAASoM,GAAT,CAAajO,CAAb,EAAgB;AACd,WAAO8N,GAAG,CAACnL,KAAK,CAAC3C,CAAC,GAAG,IAAL,CAAN,EAAkB,CAAlB,EAAqB,GAArB,CAAV;AACD;;AACD,WAASkO,GAAT,CAAalO,CAAb,EAAgB;AACd,WAAO8N,GAAG,CAACnL,KAAK,CAAC3C,CAAC,GAAG,GAAL,CAAN,EAAiB,CAAjB,EAAoB,GAApB,CAAV;AACD;;AACD,WAASmO,GAAT,CAAanO,CAAb,EAAgB;AACd,WAAO8N,GAAG,CAACnL,KAAK,CAAC3C,CAAC,GAAG,IAAL,CAAL2C,GAAkB,GAAnB,EAAwB,CAAxB,EAA2B,CAA3B,CAAV;AACD;;AACD,WAASyL,GAAT,CAAapO,CAAb,EAAgB;AACd,WAAO8N,GAAG,CAACnL,KAAK,CAAC3C,CAAC,GAAG,GAAL,CAAN,EAAiB,CAAjB,EAAoB,GAApB,CAAV;AACD;;AACD,QAAMqO,KAAK,GAAG;AAAC,OAAG,CAAJ;AAAO,OAAG,CAAV;AAAa,OAAG,CAAhB;AAAmB,OAAG,CAAtB;AAAyB,OAAG,CAA5B;AAA+B,OAAG,CAAlC;AAAqC,OAAG,CAAxC;AAA2C,OAAG,CAA9C;AAAiD,OAAG,CAApD;AAAuD,OAAG,CAA1D;AAA6DC,KAAC,EAAE,EAAhE;AAAoEC,KAAC,EAAE,EAAvE;AAA2EC,KAAC,EAAE,EAA9E;AAAkFC,KAAC,EAAE,EAArF;AAAyFC,KAAC,EAAE,EAA5F;AAAgGC,KAAC,EAAE,EAAnG;AAAuGtN,KAAC,EAAE,EAA1G;AAA8GC,KAAC,EAAE,EAAjH;AAAqHsN,KAAC,EAAE,EAAxH;AAA4HhB,KAAC,EAAE,EAA/H;AAAmIjM,KAAC,EAAE,EAAtI;AAA0IkN,KAAC,EAAE;AAA7I,GAAd;AACA,QAAMC,GAAG,GAAG,CAAC,GAAG,kBAAJ,CAAZ;;AACA,QAAMC,EAAE,GAAGzN,CAAC,IAAIwN,GAAG,CAACxN,CAAC,GAAG,GAAL,CAAnB;;AACA,QAAM0N,EAAE,GAAG1N,CAAC,IAAIwN,GAAG,CAAC,CAACxN,CAAC,GAAG,IAAL,KAAc,CAAf,CAAHwN,GAAuBA,GAAG,CAACxN,CAAC,GAAG,GAAL,CAA1C;;AACA,QAAM2N,EAAE,GAAG3N,CAAC,IAAK,CAACA,CAAC,GAAG,IAAL,KAAc,CAAd,MAAsBA,CAAC,GAAG,GAA1B,CAAjB;;AACA,QAAM4N,OAAO,GAAGlP,CAAC,IAAIiP,EAAE,CAACjP,CAAC,CAACmP,CAAH,CAAFF,IAAWA,EAAE,CAACjP,CAAC,CAACoP,CAAH,CAAbH,IAAsBA,EAAE,CAACjP,CAAC,CAACsB,CAAH,CAAxB2N,IAAiCA,EAAE,CAACjP,CAAC,CAACqB,CAAH,CAAxD;;AACA,WAASgO,QAAT,CAAkBtO,GAAlB,EAAuB;AACrB,QAAItD,GAAG,GAAGsD,GAAG,CAACpD,MAAd;AACA,QAAI2R,GAAJ;;AACA,QAAIvO,GAAG,CAAC,CAAD,CAAHA,KAAW,GAAf,EAAoB;AAClB,UAAItD,GAAG,KAAK,CAARA,IAAaA,GAAG,KAAK,CAAzB,EAA4B;AAC1B6R,WAAG,GAAG;AACJH,WAAC,EAAE,MAAMd,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,GAAgB,EADrB;AAEJe,WAAC,EAAE,MAAMf,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,GAAgB,EAFrB;AAGJ/M,WAAC,EAAE,MAAM+M,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,GAAgB,EAHrB;AAIJhN,WAAC,EAAE5D,GAAG,KAAK,CAARA,GAAY4Q,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,GAAgB,EAA5B5Q,GAAiC;AAJhC,SAAN6R;AADF,aAOO,IAAI7R,GAAG,KAAK,CAARA,IAAaA,GAAG,KAAK,CAAzB,EAA4B;AACjC6R,WAAG,GAAG;AACJH,WAAC,EAAEd,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,IAAiB,CAAjBA,GAAqBA,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CADzB;AAEJqO,WAAC,EAAEf,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,IAAiB,CAAjBA,GAAqBA,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAFzB;AAGJO,WAAC,EAAE+M,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,IAAiB,CAAjBA,GAAqBA,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAHzB;AAIJM,WAAC,EAAE5D,GAAG,KAAK,CAARA,GAAa4Q,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAALsN,IAAiB,CAAjBA,GAAqBA,KAAK,CAACtN,GAAG,CAAC,CAAD,CAAJ,CAAvCtD,GAAmD;AAJlD,SAAN6R;AAMD;AACF;;AACD,WAAOA,GAAP;AACD;;AACD,QAAMC,KAAK,GAAG,CAAClO,CAAD,EAAIwN,CAAJ,KAAUxN,CAAC,GAAG,GAAJA,GAAUwN,CAAC,CAACxN,CAAD,CAAXA,GAAiB,EAAzC;;AACA,WAASmO,SAAT,CAAmBxP,CAAnB,EAAsB;AACpB,QAAI6O,CAAC,GAAGK,OAAO,CAAClP,CAAD,CAAPkP,GAAaH,EAAbG,GAAkBF,EAA1B;AACA,WAAOhP,CAAC,GACJ,MAAM6O,CAAC,CAAC7O,CAAC,CAACmP,CAAH,CAAP,GAAeN,CAAC,CAAC7O,CAAC,CAACoP,CAAH,CAAhB,GAAwBP,CAAC,CAAC7O,CAAC,CAACsB,CAAH,CAAzB,GAAiCiO,KAAK,CAACvP,CAAC,CAACqB,CAAH,EAAMwN,CAAN,CADlC,GAEJjP,SAFJ;AAGD;;AACD,QAAM6P,MAAM,GAAG,8GAAf;;AACA,WAASC,QAAT,CAAkB1B,CAAlB,EAAqBrI,CAArB,EAAwBoI,CAAxB,EAA2B;AACzB,UAAM1M,CAAC,GAAGsE,CAAC,GAAG9D,IAAI,CAACoC,GAALpC,CAASkM,CAATlM,EAAY,IAAIkM,CAAhBlM,CAAd;;AACA,UAAMgN,CAAC,GAAG,UAACrL,CAAD;AAAA,UAAI9E,CAAJ,uEAAQ,CAAC8E,CAAC,GAAGwK,CAAC,GAAG,EAAT,IAAe,EAAvB;AAAA,aAA8BD,CAAC,GAAG1M,CAAC,GAAGQ,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAACoC,GAALpC,CAASnD,CAAC,GAAG,CAAbmD,EAAgB,IAAInD,CAApBmD,EAAuB,CAAvBA,CAATA,EAAoC,CAAC,CAArCA,CAAtC;AAAA,KAAV;;AACA,WAAO,CAACgN,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,EAAaA,CAAC,CAAC,CAAD,CAAd,CAAP;AACD;;AACD,WAASc,QAAT,CAAkB3B,CAAlB,EAAqBrI,CAArB,EAAwB3F,CAAxB,EAA2B;AACzB,UAAM6O,CAAC,GAAG,UAACrL,CAAD;AAAA,UAAI9E,CAAJ,uEAAQ,CAAC8E,CAAC,GAAGwK,CAAC,GAAG,EAAT,IAAe,CAAvB;AAAA,aAA6BhO,CAAC,GAAGA,CAAC,GAAG2F,CAAJ3F,GAAQ6B,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAACoC,GAALpC,CAASnD,CAATmD,EAAY,IAAInD,CAAhBmD,EAAmB,CAAnBA,CAATA,EAAgC,CAAhCA,CAAzC;AAAA,KAAV;;AACA,WAAO,CAACgN,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,EAAaA,CAAC,CAAC,CAAD,CAAd,CAAP;AACD;;AACD,WAASe,QAAT,CAAkB5B,CAAlB,EAAqB6B,CAArB,EAAwBvO,CAAxB,EAA2B;AACzB,UAAMwO,GAAG,GAAGJ,QAAQ,CAAC1B,CAAD,EAAI,CAAJ,EAAO,GAAP,CAApB;AACA,QAAIxQ,CAAJ;;AACA,QAAIqS,CAAC,GAAGvO,CAAJuO,GAAQ,CAAZ,EAAe;AACbrS,OAAC,GAAG,KAAKqS,CAAC,GAAGvO,CAAT,CAAJ9D;AACAqS,OAAC,IAAIrS,CAALqS;AACAvO,OAAC,IAAI9D,CAAL8D;AACD;;AACD,SAAK9D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,EAAmBA,CAAC,EAApB,EAAwB;AACtBsS,SAAG,CAACtS,CAAD,CAAHsS,IAAU,IAAID,CAAJ,GAAQvO,CAAlBwO;AACAA,SAAG,CAACtS,CAAD,CAAHsS,IAAUD,CAAVC;AACD;;AACD,WAAOA,GAAP;AACD;;AACD,WAASC,QAAT,CAAkBZ,CAAlB,EAAqBC,CAArB,EAAwB9N,CAAxB,EAA2BsM,CAA3B,EAA8B1J,GAA9B,EAAmC;AACjC,QAAIiL,CAAC,KAAKjL,GAAV,EAAe;AACb,aAAQ,CAACkL,CAAC,GAAG9N,CAAL,IAAUsM,CAAV,IAAgBwB,CAAC,GAAG9N,CAAJ8N,GAAQ,CAARA,GAAY,CAA5B,CAAR;AACD;;AACD,QAAIA,CAAC,KAAKlL,GAAV,EAAe;AACb,aAAO,CAAC5C,CAAC,GAAG6N,CAAL,IAAUvB,CAAV,GAAc,CAArB;AACD;;AACD,WAAO,CAACuB,CAAC,GAAGC,CAAL,IAAUxB,CAAV,GAAc,CAArB;AACD;;AACD,WAASoC,OAAT,CAAiBhQ,CAAjB,EAAoB;AAClB,UAAMyC,KAAK,GAAG,GAAd;AACA,UAAM0M,CAAC,GAAGnP,CAAC,CAACmP,CAAFnP,GAAMyC,KAAhB;AACA,UAAM2M,CAAC,GAAGpP,CAAC,CAACoP,CAAFpP,GAAMyC,KAAhB;AACA,UAAMnB,CAAC,GAAGtB,CAAC,CAACsB,CAAFtB,GAAMyC,KAAhB;AACA,UAAMyB,GAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASsN,CAATtN,EAAYuN,CAAZvN,EAAeP,CAAfO,CAAZ;AACA,UAAMoC,GAAG,GAAGpC,IAAI,CAACoC,GAALpC,CAASsN,CAATtN,EAAYuN,CAAZvN,EAAeP,CAAfO,CAAZ;AACA,UAAMkM,CAAC,GAAG,CAAC7J,GAAG,GAAGD,GAAP,IAAc,CAAxB;AACA,QAAI+J,CAAJ,EAAOrI,CAAP,EAAUiI,CAAV;;AACA,QAAI1J,GAAG,KAAKD,GAAZ,EAAiB;AACf2J,OAAC,GAAG1J,GAAG,GAAGD,GAAV2J;AACAjI,OAAC,GAAGoI,CAAC,GAAG,GAAJA,GAAUH,CAAC,IAAI,IAAI1J,GAAJ,GAAUD,GAAd,CAAX8J,GAAgCH,CAAC,IAAI1J,GAAG,GAAGD,GAAV,CAArC0B;AACAqI,OAAC,GAAG+B,QAAQ,CAACZ,CAAD,EAAIC,CAAJ,EAAO9N,CAAP,EAAUsM,CAAV,EAAa1J,GAAb,CAAZ8J;AACAA,OAAC,GAAGA,CAAC,GAAG,EAAJA,GAAS,GAAbA;AACD;;AACD,WAAO,CAACA,CAAC,GAAG,CAAL,EAAQrI,CAAC,IAAI,CAAb,EAAgBoI,CAAhB,CAAP;AACD;;AACD,WAASkC,KAAT,CAAepB,CAAf,EAAkBxN,CAAlB,EAAqBC,CAArB,EAAwBsN,CAAxB,EAA2B;AACzB,WAAO,CACL/S,KAAK,CAACD,OAANC,CAAcwF,CAAdxF,IACIgT,CAAC,CAACxN,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,EAAaA,CAAC,CAAC,CAAD,CAAd,CADLxF,GAEIgT,CAAC,CAACxN,CAAD,EAAIC,CAAJ,EAAOsN,CAAP,CAHA,EAILtQ,GAJK,CAID4P,GAJC,CAAP;AAKD;;AACD,WAASgC,OAAT,CAAiBlC,CAAjB,EAAoBrI,CAApB,EAAuBoI,CAAvB,EAA0B;AACxB,WAAOkC,KAAK,CAACP,QAAD,EAAW1B,CAAX,EAAcrI,CAAd,EAAiBoI,CAAjB,CAAZ;AACD;;AACD,WAASoC,OAAT,CAAiBnC,CAAjB,EAAoB6B,CAApB,EAAuBvO,CAAvB,EAA0B;AACxB,WAAO2O,KAAK,CAACL,QAAD,EAAW5B,CAAX,EAAc6B,CAAd,EAAiBvO,CAAjB,CAAZ;AACD;;AACD,WAAS8O,OAAT,CAAiBpC,CAAjB,EAAoBrI,CAApB,EAAuB3F,CAAvB,EAA0B;AACxB,WAAOiQ,KAAK,CAACN,QAAD,EAAW3B,CAAX,EAAcrI,CAAd,EAAiB3F,CAAjB,CAAZ;AACD;;AACD,WAASqQ,GAAT,CAAarC,CAAb,EAAgB;AACd,WAAO,CAACA,CAAC,GAAG,GAAJA,GAAU,GAAX,IAAkB,GAAzB;AACD;;AACD,WAASsC,QAAT,CAAkBvP,GAAlB,EAAuB;AACrB,UAAM4M,CAAC,GAAG8B,MAAM,CAACc,IAAPd,CAAY1O,GAAZ0O,CAAV;AACA,QAAIpO,CAAC,GAAG,GAAR;AACA,QAAIrB,CAAJ;;AACA,QAAI,CAAC2N,CAAL,EAAQ;AACN;AACD;;AACD,QAAIA,CAAC,CAAC,CAAD,CAADA,KAAS3N,CAAb,EAAgB;AACdqB,OAAC,GAAGsM,CAAC,CAAC,CAAD,CAADA,GAAOM,GAAG,CAAC,CAACN,CAAC,CAAC,CAAD,CAAH,CAAVA,GAAoBO,GAAG,CAAC,CAACP,CAAC,CAAC,CAAD,CAAH,CAA3BtM;AACD;;AACD,UAAM2M,CAAC,GAAGqC,GAAG,CAAC,CAAC1C,CAAC,CAAC,CAAD,CAAH,CAAb;AACA,UAAM6C,EAAE,GAAG,CAAC7C,CAAC,CAAC,CAAD,CAAF,GAAQ,GAAnB;AACA,UAAM8C,EAAE,GAAG,CAAC9C,CAAC,CAAC,CAAD,CAAF,GAAQ,GAAnB;;AACA,QAAIA,CAAC,CAAC,CAAD,CAADA,KAAS,KAAb,EAAoB;AAClB3N,OAAC,GAAGmQ,OAAO,CAACnC,CAAD,EAAIwC,EAAJ,EAAQC,EAAR,CAAXzQ;AADF,WAEO,IAAI2N,CAAC,CAAC,CAAD,CAADA,KAAS,KAAb,EAAoB;AACzB3N,OAAC,GAAGoQ,OAAO,CAACpC,CAAD,EAAIwC,EAAJ,EAAQC,EAAR,CAAXzQ;AADK,WAEA;AACLA,OAAC,GAAGkQ,OAAO,CAAClC,CAAD,EAAIwC,EAAJ,EAAQC,EAAR,CAAXzQ;AACD;;AACD,WAAO;AACLmP,OAAC,EAAEnP,CAAC,CAAC,CAAD,CADC;AAELoP,OAAC,EAAEpP,CAAC,CAAC,CAAD,CAFC;AAGLsB,OAAC,EAAEtB,CAAC,CAAC,CAAD,CAHC;AAILqB,OAAC,EAAEA;AAJE,KAAP;AAMD;;AACD,WAASqP,MAAT,CAAgB1Q,CAAhB,EAAmB2Q,GAAnB,EAAwB;AACtB,QAAI3C,CAAC,GAAGgC,OAAO,CAAChQ,CAAD,CAAf;AACAgO,KAAC,CAAC,CAAD,CAADA,GAAOqC,GAAG,CAACrC,CAAC,CAAC,CAAD,CAADA,GAAO2C,GAAR,CAAV3C;AACAA,KAAC,GAAGkC,OAAO,CAAClC,CAAD,CAAXA;AACAhO,KAAC,CAACmP,CAAFnP,GAAMgO,CAAC,CAAC,CAAD,CAAPhO;AACAA,KAAC,CAACoP,CAAFpP,GAAMgO,CAAC,CAAC,CAAD,CAAPhO;AACAA,KAAC,CAACsB,CAAFtB,GAAMgO,CAAC,CAAC,CAAD,CAAPhO;AACD;;AACD,WAAS4Q,SAAT,CAAmB5Q,CAAnB,EAAsB;AACpB,QAAI,CAACA,CAAL,EAAQ;AACN;AACD;;AACD,UAAMqB,CAAC,GAAG2O,OAAO,CAAChQ,CAAD,CAAjB;AACA,UAAMgO,CAAC,GAAG3M,CAAC,CAAC,CAAD,CAAX;AACA,UAAMsE,CAAC,GAAGyI,GAAG,CAAC/M,CAAC,CAAC,CAAD,CAAF,CAAb;AACA,UAAM0M,CAAC,GAAGK,GAAG,CAAC/M,CAAC,CAAC,CAAD,CAAF,CAAb;AACA,WAAOrB,CAAC,CAACqB,CAAFrB,GAAM,GAANA,kBACKgO,CADLhO,eACW2F,CADX3F,gBACkB+N,CADlB/N,gBACyBmO,GAAG,CAACnO,CAAC,CAACqB,CAAH,CAD5BrB,uBAEIgO,CAFJhO,eAEU2F,CAFV3F,gBAEiB+N,CAFjB/N,OAAP;AAGD;;AACD,QAAM1B,GAAG,GAAG;AACV2B,KAAC,EAAE,MADO;AAEV4Q,KAAC,EAAE,OAFO;AAGVC,KAAC,EAAE,IAHO;AAIVC,KAAC,EAAE,KAJO;AAKVC,KAAC,EAAE,IALO;AAMVC,KAAC,EAAE,QANO;AAOVC,KAAC,EAAE,OAPO;AAQV5C,KAAC,EAAE,IARO;AASV6C,KAAC,EAAE,IATO;AAUVC,KAAC,EAAE,IAVO;AAWV7C,KAAC,EAAE,IAXO;AAYVC,KAAC,EAAE,OAZO;AAaVC,KAAC,EAAE,OAbO;AAcV4C,KAAC,EAAE,IAdO;AAeVC,KAAC,EAAE,UAfO;AAgBV5C,KAAC,EAAE,IAhBO;AAiBV6C,KAAC,EAAE,IAjBO;AAkBVC,KAAC,EAAE,IAlBO;AAmBVC,KAAC,EAAE,IAnBO;AAoBVC,KAAC,EAAE,IApBO;AAqBVC,KAAC,EAAE,OArBO;AAsBVhD,KAAC,EAAE,IAtBO;AAuBViD,KAAC,EAAE,IAvBO;AAwBVC,KAAC,EAAE,MAxBO;AAyBVC,KAAC,EAAE,IAzBO;AA0BVC,KAAC,EAAE,OA1BO;AA2BVC,KAAC,EAAE;AA3BO,GAAZ;AA6BA,QAAMC,OAAO,GAAG;AACdC,UAAM,EAAE,QADM;AAEdC,eAAW,EAAE,QAFC;AAGdC,QAAI,EAAE,MAHQ;AAIdC,aAAS,EAAE,QAJG;AAKdC,QAAI,EAAE,QALQ;AAMdC,SAAK,EAAE,QANO;AAOdC,UAAM,EAAE,QAPM;AAQdC,SAAK,EAAE,GARO;AASdC,gBAAY,EAAE,QATA;AAUdC,MAAE,EAAE,IAVU;AAWdC,WAAO,EAAE,QAXK;AAYdC,QAAI,EAAE,QAZQ;AAadC,aAAS,EAAE,QAbG;AAcdC,UAAM,EAAE,QAdM;AAedC,YAAQ,EAAE,QAfI;AAgBdC,WAAO,EAAE,QAhBK;AAiBdC,OAAG,EAAE,QAjBS;AAkBdC,eAAW,EAAE,QAlBC;AAmBdC,WAAO,EAAE,QAnBK;AAoBdC,WAAO,EAAE,QApBK;AAqBdC,QAAI,EAAE,MArBQ;AAsBdC,OAAG,EAAE,IAtBS;AAuBdC,SAAK,EAAE,MAvBO;AAwBdC,WAAO,EAAE,QAxBK;AAyBdC,QAAI,EAAE,QAzBQ;AA0BdC,QAAI,EAAE,MA1BQ;AA2BdC,QAAI,EAAE,QA3BQ;AA4BdC,UAAM,EAAE,QA5BM;AA6BdC,WAAO,EAAE,QA7BK;AA8BdC,YAAQ,EAAE,QA9BI;AA+BdC,UAAM,EAAE,QA/BM;AAgCdC,SAAK,EAAE,QAhCO;AAiCdC,OAAG,EAAE,QAjCS;AAkCdC,UAAM,EAAE,QAlCM;AAmCdC,UAAM,EAAE,QAnCM;AAoCdC,QAAI,EAAE,QApCQ;AAqCdC,SAAK,EAAE,QArCO;AAsCdC,SAAK,EAAE,QAtCO;AAuCdC,OAAG,EAAE,MAvCS;AAwCdC,UAAM,EAAE,QAxCM;AAyCdC,UAAM,EAAE,QAzCM;AA0CdC,YAAQ,EAAE,MA1CI;AA2CdC,UAAM,EAAE,QA3CM;AA4CdC,UAAM,EAAE,QA5CM;AA6CdC,YAAQ,EAAE,QA7CI;AA8CdC,YAAQ,EAAE,QA9CI;AA+CdC,YAAQ,EAAE,QA/CI;AAgDdC,YAAQ,EAAE,QAhDI;AAiDdC,UAAM,EAAE,QAjDM;AAkDdC,WAAO,EAAE,QAlDK;AAmDdC,aAAS,EAAE,QAnDG;AAoDdC,OAAG,EAAE,QApDS;AAqDdC,UAAM,EAAE,QArDM;AAsDdC,OAAG,EAAE,QAtDS;AAuDdC,OAAG,EAAE,MAvDS;AAwDdC,SAAK,EAAE,QAxDO;AAyDdC,OAAG,EAAE,QAzDS;AA0DdC,WAAO,EAAE,QA1DK;AA2DdC,UAAM,EAAE,QA3DM;AA4DdC,WAAO,EAAE,QA5DK;AA6DdC,SAAK,EAAE,QA7DO;AA8DdC,QAAI,EAAE,QA9DQ;AA+DdC,SAAK,EAAE,QA/DO;AAgEdC,UAAM,EAAE,QAhEM;AAiEdC,aAAS,EAAE,QAjEG;AAkEdC,WAAO,EAAE,QAlEK;AAmEdC,cAAU,EAAE,QAnEE;AAoEdC,OAAG,EAAE,QApES;AAqEdC,QAAI,EAAE,QArEQ;AAsEdC,SAAK,EAAE,QAtEO;AAuEdC,aAAS,EAAE,QAvEG;AAwEdC,QAAI,EAAE,QAxEQ;AAyEdC,QAAI,EAAE,QAzEQ;AA0EdC,QAAI,EAAE,QA1EQ;AA2EdC,QAAI,EAAE,QA3EQ;AA4EdC,UAAM,EAAE,QA5EM;AA6EdC,UAAM,EAAE,QA7EM;AA8EdC,UAAM,EAAE,QA9EM;AA+EdC,SAAK,EAAE,QA/EO;AAgFdC,SAAK,EAAE,QAhFO;AAiFdC,WAAO,EAAE,QAjFK;AAkFdC,OAAG,EAAE,QAlFS;AAmFdC,QAAI,EAAE,MAnFQ;AAoFdC,WAAO,EAAE,QApFK;AAqFdC,OAAG,EAAE,QArFS;AAsFdC,UAAM,EAAE,QAtFM;AAuFdC,SAAK,EAAE,QAvFO;AAwFdC,cAAU,EAAE,QAxFE;AAyFdC,OAAG,EAAE,IAzFS;AA0FdC,SAAK,EAAE,QA1FO;AA2FdC,UAAM,EAAE,QA3FM;AA4FdC,UAAM,EAAE,QA5FM;AA6FdC,QAAI,EAAE,QA7FQ;AA8FdC,aAAS,EAAE,MA9FG;AA+FdC,OAAG,EAAE,QA/FS;AAgGdC,YAAQ,EAAE,QAhGI;AAiGdC,cAAU,EAAE,QAjGE;AAkGdC,WAAO,EAAE,QAlGK;AAmGdC,YAAQ,EAAE,QAnGI;AAoGdC,WAAO,EAAE,QApGK;AAqGdC,cAAU,EAAE,QArGE;AAsGdC,QAAI,EAAE,IAtGQ;AAuGdC,UAAM,EAAE,QAvGM;AAwGdC,QAAI,EAAE,QAxGQ;AAyGdC,WAAO,EAAE,QAzGK;AA0GdC,SAAK,EAAE,QA1GO;AA2GdC,WAAO,EAAE,QA3GK;AA4GdC,QAAI,EAAE,QA5GQ;AA6GdC,aAAS,EAAE,QA7GG;AA8GdC,UAAM,EAAE,QA9GM;AA+GdC,SAAK,EAAE,QA/GO;AAgHdC,cAAU,EAAE,QAhHE;AAiHdC,aAAS,EAAE,QAjHG;AAkHdC,WAAO,EAAE,QAlHK;AAmHdC,QAAI,EAAE,QAnHQ;AAoHdC,OAAG,EAAE,QApHS;AAqHdC,QAAI,EAAE,QArHQ;AAsHdC,WAAO,EAAE,QAtHK;AAuHdC,SAAK,EAAE,QAvHO;AAwHdC,eAAW,EAAE,QAxHC;AAyHdC,MAAE,EAAE,QAzHU;AA0HdC,YAAQ,EAAE,QA1HI;AA2HdC,SAAK,EAAE,QA3HO;AA4HdC,aAAS,EAAE,QA5HG;AA6HdC,SAAK,EAAE,QA7HO;AA8HdC,aAAS,EAAE,QA9HG;AA+HdC,SAAK,EAAE,QA/HO;AAgIdC,WAAO,EAAE,QAhIK;AAiIdC,SAAK,EAAE,QAjIO;AAkIdC,UAAM,EAAE,QAlIM;AAmIdC,SAAK,EAAE,QAnIO;AAoIdC,OAAG,EAAE,QApIS;AAqIdC,QAAI,EAAE,QArIQ;AAsIdC,QAAI,EAAE,QAtIQ;AAuIdC,QAAI,EAAE,QAvIQ;AAwIdC,YAAQ,EAAE,MAxII;AAyIdC,UAAM,EAAE,QAzIM;AA0IdC,OAAG,EAAE,QA1IS;AA2IdC,OAAG,EAAE,MA3IS;AA4IdC,SAAK,EAAE,QA5IO;AA6IdC,UAAM,EAAE,QA7IM;AA8IdC,MAAE,EAAE,QA9IU;AA+IdC,SAAK,EAAE,QA/IO;AAgJdC,OAAG,EAAE,QAhJS;AAiJdC,QAAI,EAAE,QAjJQ;AAkJdC,aAAS,EAAE,QAlJG;AAmJdC,MAAE,EAAE,QAnJU;AAoJdC,SAAK,EAAE;AApJO,GAAhB;;AAsJA,WAASC,MAAT,GAAkB;AAChB,UAAMC,QAAQ,GAAG,EAAjB;AACA,UAAM7d,IAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAYkW,OAAZlW,CAAb;AACA,UAAMyf,KAAK,GAAGzf,MAAM,CAAC2B,IAAP3B,CAAYuC,GAAZvC,CAAd;AACA,QAAIyB,CAAJ,EAAOie,CAAP,EAAU/c,CAAV,EAAagd,EAAb,EAAiBC,EAAjB;;AACA,SAAKne,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGE,IAAI,CAACC,MAArB,EAA6BH,CAAC,EAA9B,EAAkC;AAChCke,QAAE,GAAGC,EAAE,GAAGje,IAAI,CAACF,CAAD,CAAdke;;AACA,WAAKD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGD,KAAK,CAAC7d,MAAtB,EAA8B8d,CAAC,EAA/B,EAAmC;AACjC/c,SAAC,GAAG8c,KAAK,CAACC,CAAD,CAAT/c;AACAid,UAAE,GAAGA,EAAE,CAACC,OAAHD,CAAWjd,CAAXid,EAAcrd,GAAG,CAACI,CAAD,CAAjBid,CAALA;AACD;;AACDjd,OAAC,GAAGmd,QAAQ,CAAC5J,OAAO,CAACyJ,EAAD,CAAR,EAAc,EAAd,CAAZhd;AACA6c,cAAQ,CAACI,EAAD,CAARJ,GAAe,CAAC7c,CAAC,IAAI,EAALA,GAAU,IAAX,EAAiBA,CAAC,IAAI,CAALA,GAAS,IAA1B,EAAgCA,CAAC,GAAG,IAApC,CAAf6c;AACD;;AACD,WAAOA,QAAP;AACD;;AACD,MAAIO,KAAJ;;AACA,WAASC,SAAT,CAAmBhb,GAAnB,EAAwB;AACtB,QAAI,CAAC+a,KAAL,EAAY;AACVA,WAAK,GAAGR,MAAM,EAAdQ;AACAA,WAAK,CAACE,WAANF,GAAoB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAApBA;AACD;;AACD,UAAMza,CAAC,GAAGya,KAAK,CAAC/a,GAAG,CAACkb,WAAJlb,EAAD,CAAf;AACA,WAAOM,CAAC,IAAI;AACV8N,OAAC,EAAE9N,CAAC,CAAC,CAAD,CADM;AAEV+N,OAAC,EAAE/N,CAAC,CAAC,CAAD,CAFM;AAGVC,OAAC,EAAED,CAAC,CAAC,CAAD,CAHM;AAIVA,OAAC,EAAEA,CAAC,CAAC1D,MAAF0D,KAAa,CAAbA,GAAiBA,CAAC,CAAC,CAAD,CAAlBA,GAAwB;AAJjB,KAAZ;AAMD;;AACD,QAAM6a,MAAM,GAAG,sGAAf;;AACA,WAASC,QAAT,CAAkBpb,GAAlB,EAAuB;AACrB,UAAM4M,CAAC,GAAGuO,MAAM,CAAC3L,IAAP2L,CAAYnb,GAAZmb,CAAV;AACA,QAAI7a,CAAC,GAAG,GAAR;AACA,QAAI8N,CAAJ,EAAOC,CAAP,EAAU9N,CAAV;;AACA,QAAI,CAACqM,CAAL,EAAQ;AACN;AACD;;AACD,QAAIA,CAAC,CAAC,CAAD,CAADA,KAASwB,CAAb,EAAgB;AACd,YAAMnP,CAAC,GAAG,CAAC2N,CAAC,CAAC,CAAD,CAAZ;AACAtM,OAAC,GAAGsM,CAAC,CAAC,CAAD,CAADA,GAAOM,GAAG,CAACjO,CAAD,CAAV2N,GAAgBG,GAAG,CAAC9N,CAAC,GAAG,GAAL,EAAU,CAAV,EAAa,GAAb,CAAvBqB;AACD;;AACD8N,KAAC,GAAG,CAACxB,CAAC,CAAC,CAAD,CAANwB;AACAC,KAAC,GAAG,CAACzB,CAAC,CAAC,CAAD,CAANyB;AACA9N,KAAC,GAAG,CAACqM,CAAC,CAAC,CAAD,CAANrM;AACA6N,KAAC,GAAG,OAAOxB,CAAC,CAAC,CAAD,CAADA,GAAOM,GAAG,CAACkB,CAAD,CAAVxB,GAAgBG,GAAG,CAACqB,CAAD,EAAI,CAAJ,EAAO,GAAP,CAA1B,CAAJA;AACAC,KAAC,GAAG,OAAOzB,CAAC,CAAC,CAAD,CAADA,GAAOM,GAAG,CAACmB,CAAD,CAAVzB,GAAgBG,GAAG,CAACsB,CAAD,EAAI,CAAJ,EAAO,GAAP,CAA1B,CAAJA;AACA9N,KAAC,GAAG,OAAOqM,CAAC,CAAC,CAAD,CAADA,GAAOM,GAAG,CAAC3M,CAAD,CAAVqM,GAAgBG,GAAG,CAACxM,CAAD,EAAI,CAAJ,EAAO,GAAP,CAA1B,CAAJA;AACA,WAAO;AACL6N,OAAC,EAAEA,CADE;AAELC,OAAC,EAAEA,CAFE;AAGL9N,OAAC,EAAEA,CAHE;AAILD,OAAC,EAAEA;AAJE,KAAP;AAMD;;AACD,WAAS+a,SAAT,CAAmBpc,CAAnB,EAAsB;AACpB,WAAOA,CAAC,KACNA,CAAC,CAACqB,CAAFrB,GAAM,GAANA,kBACYA,CAAC,CAACmP,CADdnP,eACoBA,CAAC,CAACoP,CADtBpP,eAC4BA,CAAC,CAACsB,CAD9BtB,eACoCmO,GAAG,CAACnO,CAAC,CAACqB,CAAH,CADvCrB,uBAEWA,CAAC,CAACmP,CAFbnP,eAEmBA,CAAC,CAACoP,CAFrBpP,eAE2BA,CAAC,CAACsB,CAF7BtB,MADM,CAAR;AAKD;;AACD,QAAMqc,EAAE,GAAGrc,CAAC,IAAIA,CAAC,IAAI,SAALA,GAAiBA,CAAC,GAAG,KAArBA,GAA6B6B,IAAI,CAACiB,GAALjB,CAAS7B,CAAT6B,EAAY,MAAM,GAAlBA,IAAyB,KAAzBA,GAAiC,KAA9E;;AACA,QAAMsG,IAAI,GAAGnI,CAAC,IAAIA,CAAC,IAAI,OAALA,GAAeA,CAAC,GAAG,KAAnBA,GAA2B6B,IAAI,CAACiB,GAALjB,CAAS,CAAC7B,CAAC,GAAG,KAAL,IAAc,KAAvB6B,EAA8B,GAA9BA,CAA7C;;AACA,WAASya,WAAT,CAAqBC,IAArB,EAA2BC,IAA3B,EAAiCjR,CAAjC,EAAoC;AAClC,UAAM4D,CAAC,GAAGhH,IAAI,CAACgG,GAAG,CAACoO,IAAI,CAACpN,CAAN,CAAJ,CAAd;AACA,UAAMC,CAAC,GAAGjH,IAAI,CAACgG,GAAG,CAACoO,IAAI,CAACnN,CAAN,CAAJ,CAAd;AACA,UAAM9N,CAAC,GAAG6G,IAAI,CAACgG,GAAG,CAACoO,IAAI,CAACjb,CAAN,CAAJ,CAAd;AACA,WAAO;AACL6N,OAAC,EAAEjB,GAAG,CAACmO,EAAE,CAAClN,CAAC,GAAG5D,CAAC,IAAIpD,IAAI,CAACgG,GAAG,CAACqO,IAAI,CAACrN,CAAN,CAAJ,CAAJhH,GAAoBgH,CAAxB,CAAN,CAAH,CADD;AAELC,OAAC,EAAElB,GAAG,CAACmO,EAAE,CAACjN,CAAC,GAAG7D,CAAC,IAAIpD,IAAI,CAACgG,GAAG,CAACqO,IAAI,CAACpN,CAAN,CAAJ,CAAJjH,GAAoBiH,CAAxB,CAAN,CAAH,CAFD;AAGL9N,OAAC,EAAE4M,GAAG,CAACmO,EAAE,CAAC/a,CAAC,GAAGiK,CAAC,IAAIpD,IAAI,CAACgG,GAAG,CAACqO,IAAI,CAAClb,CAAN,CAAJ,CAAJ6G,GAAoB7G,CAAxB,CAAN,CAAH,CAHD;AAILD,OAAC,EAAEkb,IAAI,CAAClb,CAALkb,GAAShR,CAAC,IAAIiR,IAAI,CAACnb,CAALmb,GAASD,IAAI,CAAClb,CAAlB;AAJR,KAAP;AAMD;;AACD,WAASob,MAAT,CAAgBzc,CAAhB,EAAmBxC,CAAnB,EAAsBkf,KAAtB,EAA6B;AAC3B,QAAI1c,CAAJ,EAAO;AACL,UAAIW,GAAG,GAAGqP,OAAO,CAAChQ,CAAD,CAAjB;AACAW,SAAG,CAACnD,CAAD,CAAHmD,GAASkB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYA,IAAI,CAACoC,GAALpC,CAASlB,GAAG,CAACnD,CAAD,CAAHmD,GAASA,GAAG,CAACnD,CAAD,CAAHmD,GAAS+b,KAA3B7a,EAAkCrE,CAAC,KAAK,CAANA,GAAU,GAAVA,GAAgB,CAAlDqE,CAAZA,CAATlB;AACAA,SAAG,GAAGuP,OAAO,CAACvP,GAAD,CAAbA;AACAX,OAAC,CAACmP,CAAFnP,GAAMW,GAAG,CAAC,CAAD,CAATX;AACAA,OAAC,CAACoP,CAAFpP,GAAMW,GAAG,CAAC,CAAD,CAATX;AACAA,OAAC,CAACsB,CAAFtB,GAAMW,GAAG,CAAC,CAAD,CAATX;AACD;AACF;;AACD,WAAS2c,KAAT,CAAe3c,CAAf,EAAkB4c,KAAlB,EAAyB;AACvB,WAAO5c,CAAC,GAAGjE,MAAM,CAACsP,MAAPtP,CAAc6gB,KAAK,IAAI,EAAvB7gB,EAA2BiE,CAA3BjE,CAAH,GAAmCiE,CAA3C;AACD;;AACD,WAAS6c,UAAT,CAAoBC,KAApB,EAA2B;AACzB,QAAI9c,CAAC,GAAG;AAACmP,OAAC,EAAE,CAAJ;AAAOC,OAAC,EAAE,CAAV;AAAa9N,OAAC,EAAE,CAAhB;AAAmBD,OAAC,EAAE;AAAtB,KAAR;;AACA,QAAIxF,KAAK,CAACD,OAANC,CAAcihB,KAAdjhB,CAAJ,EAA0B;AACxB,UAAIihB,KAAK,CAACnf,MAANmf,IAAgB,CAApB,EAAuB;AACrB9c,SAAC,GAAG;AAACmP,WAAC,EAAE2N,KAAK,CAAC,CAAD,CAAT;AAAc1N,WAAC,EAAE0N,KAAK,CAAC,CAAD,CAAtB;AAA2Bxb,WAAC,EAAEwb,KAAK,CAAC,CAAD,CAAnC;AAAwCzb,WAAC,EAAE;AAA3C,SAAJrB;;AACA,YAAI8c,KAAK,CAACnf,MAANmf,GAAe,CAAnB,EAAsB;AACpB9c,WAAC,CAACqB,CAAFrB,GAAMkO,GAAG,CAAC4O,KAAK,CAAC,CAAD,CAAN,CAAT9c;AACD;AACF;AANH,WAOO;AACLA,OAAC,GAAG2c,KAAK,CAACG,KAAD,EAAQ;AAAC3N,SAAC,EAAE,CAAJ;AAAOC,SAAC,EAAE,CAAV;AAAa9N,SAAC,EAAE,CAAhB;AAAmBD,SAAC,EAAE;AAAtB,OAAR,CAATrB;AACAA,OAAC,CAACqB,CAAFrB,GAAMkO,GAAG,CAAClO,CAAC,CAACqB,CAAH,CAATrB;AACD;;AACD,WAAOA,CAAP;AACD;;AACD,WAAS+c,aAAT,CAAuBhc,GAAvB,EAA4B;AAC1B,QAAIA,GAAG,CAACC,MAAJD,CAAW,CAAXA,MAAkB,GAAtB,EAA2B;AACzB,aAAOob,QAAQ,CAACpb,GAAD,CAAf;AACD;;AACD,WAAOuP,QAAQ,CAACvP,GAAD,CAAf;AACD;;AACD,QAAMic,KAAN,CAAY;AACVC,eAAW,CAACH,KAAD,EAAQ;AACjB,UAAIA,KAAK,YAAYE,KAArB,EAA4B;AAC1B,eAAOF,KAAP;AACD;;AACD,YAAMhhB,IAAI,GAAG,OAAOghB,KAApB;AACA,UAAI9c,CAAJ;;AACA,UAAIlE,IAAI,KAAK,QAAb,EAAuB;AACrBkE,SAAC,GAAG6c,UAAU,CAACC,KAAD,CAAd9c;AADF,aAEO,IAAIlE,IAAI,KAAK,QAAb,EAAuB;AAC5BkE,SAAC,GAAGqP,QAAQ,CAACyN,KAAD,CAARzN,IAAmB0M,SAAS,CAACe,KAAD,CAA5BzN,IAAuC0N,aAAa,CAACD,KAAD,CAAxD9c;AACD;;AACD,WAAKkd,IAAL,GAAYld,CAAZ;AACA,WAAKmd,MAAL,GAAc,CAAC,CAACnd,CAAhB;AACD;;AACQ,QAALod,KAAK,GAAG;AACV,aAAO,KAAKD,MAAZ;AACD;;AACM,QAAHrN,GAAG,GAAG;AACR,UAAI9P,CAAC,GAAG2c,KAAK,CAAC,KAAKO,IAAN,CAAb;;AACA,UAAIld,CAAJ,EAAO;AACLA,SAAC,CAACqB,CAAFrB,GAAMmO,GAAG,CAACnO,CAAC,CAACqB,CAAH,CAATrB;AACD;;AACD,aAAOA,CAAP;AACD;;AACM,QAAH8P,GAAG,CAACzP,GAAD,EAAM;AACX,WAAK6c,IAAL,GAAYL,UAAU,CAACxc,GAAD,CAAtB;AACD;;AACD+b,aAAS,GAAG;AACV,aAAO,KAAKe,MAAL,GAAcf,SAAS,CAAC,KAAKc,IAAN,CAAvB,GAAqCtd,SAA5C;AACD;;AACD4P,aAAS,GAAG;AACV,aAAO,KAAK2N,MAAL,GAAc3N,SAAS,CAAC,KAAK0N,IAAN,CAAvB,GAAqCtd,SAA5C;AACD;;AACDgR,aAAS,GAAG;AACV,aAAO,KAAKuM,MAAL,GAAcvM,SAAS,CAAC,KAAKsM,IAAN,CAAvB,GAAqCtd,SAA5C;AACD;;AACDyd,OAAG,CAACC,KAAD,EAAQC,MAAR,EAAgB;AACjB,UAAID,KAAJ,EAAW;AACT,cAAME,EAAE,GAAG,KAAK1N,GAAhB;AACA,cAAM2N,EAAE,GAAGH,KAAK,CAACxN,GAAjB;AACA,YAAI4N,EAAJ;AACA,cAAMlZ,CAAC,GAAG+Y,MAAM,KAAKG,EAAXH,GAAgB,GAAhBA,GAAsBA,MAAhC;AACA,cAAM1N,CAAC,GAAG,IAAIrL,CAAJ,GAAQ,CAAlB;AACA,cAAMnD,CAAC,GAAGmc,EAAE,CAACnc,CAAHmc,GAAOC,EAAE,CAACpc,CAApB;AACA,cAAMsc,EAAE,GAAG,CAAC,CAAC9N,CAAC,GAAGxO,CAAJwO,KAAU,CAAC,CAAXA,GAAeA,CAAfA,GAAmB,CAACA,CAAC,GAAGxO,CAAL,KAAW,IAAIwO,CAAC,GAAGxO,CAAnB,CAApB,IAA6C,CAA9C,IAAmD,GAA9D;AACAqc,UAAE,GAAG,IAAIC,EAATD;AACAF,UAAE,CAACrO,CAAHqO,GAAO,OAAOG,EAAE,GAAGH,EAAE,CAACrO,CAARwO,GAAYD,EAAE,GAAGD,EAAE,CAACtO,CAApBwO,GAAwB,GAAtCH;AACAA,UAAE,CAACpO,CAAHoO,GAAO,OAAOG,EAAE,GAAGH,EAAE,CAACpO,CAARuO,GAAYD,EAAE,GAAGD,EAAE,CAACrO,CAApBuO,GAAwB,GAAtCH;AACAA,UAAE,CAAClc,CAAHkc,GAAO,OAAOG,EAAE,GAAGH,EAAE,CAAClc,CAARqc,GAAYD,EAAE,GAAGD,EAAE,CAACnc,CAApBqc,GAAwB,GAAtCH;AACAA,UAAE,CAACnc,CAAHmc,GAAOhZ,CAAC,GAAGgZ,EAAE,CAACnc,CAAPmD,GAAW,CAAC,IAAIA,CAAL,IAAUiZ,EAAE,CAACpc,CAA/Bmc;AACA,aAAK1N,GAAL,GAAW0N,EAAX;AACD;;AACD,aAAO,IAAP;AACD;;AACDlB,eAAW,CAACgB,KAAD,EAAQ/R,CAAR,EAAW;AACpB,UAAI+R,KAAJ,EAAW;AACT,aAAKJ,IAAL,GAAYZ,WAAW,CAAC,KAAKY,IAAN,EAAYI,KAAK,CAACJ,IAAlB,EAAwB3R,CAAxB,CAAvB;AACD;;AACD,aAAO,IAAP;AACD;;AACDoR,SAAK,GAAG;AACN,aAAO,IAAIK,KAAJ,CAAU,KAAKlN,GAAf,CAAP;AACD;;AACDP,SAAK,CAAClO,CAAD,EAAI;AACP,WAAK6b,IAAL,CAAU7b,CAAV,GAAc6M,GAAG,CAAC7M,CAAD,CAAjB;AACA,aAAO,IAAP;AACD;;AACDuc,WAAO,CAAClB,KAAD,EAAQ;AACb,YAAM5M,GAAG,GAAG,KAAKoN,IAAjB;AACApN,SAAG,CAACzO,CAAJyO,IAAS,IAAI4M,KAAb5M;AACA,aAAO,IAAP;AACD;;AACD+N,aAAS,GAAG;AACV,YAAM/N,GAAG,GAAG,KAAKoN,IAAjB;AACA,YAAMY,GAAG,GAAGnb,KAAK,CAACmN,GAAG,CAACX,CAAJW,GAAQ,GAARA,GAAcA,GAAG,CAACV,CAAJU,GAAQ,IAAtBA,GAA6BA,GAAG,CAACxO,CAAJwO,GAAQ,IAAtC,CAAjB;AACAA,SAAG,CAACX,CAAJW,GAAQA,GAAG,CAACV,CAAJU,GAAQA,GAAG,CAACxO,CAAJwO,GAAQgO,GAAxBhO;AACA,aAAO,IAAP;AACD;;AACDiO,WAAO,CAACrB,KAAD,EAAQ;AACb,YAAM5M,GAAG,GAAG,KAAKoN,IAAjB;AACApN,SAAG,CAACzO,CAAJyO,IAAS,IAAI4M,KAAb5M;AACA,aAAO,IAAP;AACD;;AACDkO,UAAM,GAAG;AACP,YAAMhe,CAAC,GAAG,KAAKkd,IAAf;AACAld,OAAC,CAACmP,CAAFnP,GAAM,MAAMA,CAAC,CAACmP,CAAdnP;AACAA,OAAC,CAACoP,CAAFpP,GAAM,MAAMA,CAAC,CAACoP,CAAdpP;AACAA,OAAC,CAACsB,CAAFtB,GAAM,MAAMA,CAAC,CAACsB,CAAdtB;AACA,aAAO,IAAP;AACD;;AACDie,WAAO,CAACvB,KAAD,EAAQ;AACbD,YAAM,CAAC,KAAKS,IAAN,EAAY,CAAZ,EAAeR,KAAf,CAAND;AACA,aAAO,IAAP;AACD;;AACDyB,UAAM,CAACxB,KAAD,EAAQ;AACZD,YAAM,CAAC,KAAKS,IAAN,EAAY,CAAZ,EAAe,CAACR,KAAhB,CAAND;AACA,aAAO,IAAP;AACD;;AACD0B,YAAQ,CAACzB,KAAD,EAAQ;AACdD,YAAM,CAAC,KAAKS,IAAN,EAAY,CAAZ,EAAeR,KAAf,CAAND;AACA,aAAO,IAAP;AACD;;AACD2B,cAAU,CAAC1B,KAAD,EAAQ;AAChBD,YAAM,CAAC,KAAKS,IAAN,EAAY,CAAZ,EAAe,CAACR,KAAhB,CAAND;AACA,aAAO,IAAP;AACD;;AACD/L,UAAM,CAACC,GAAD,EAAM;AACVD,YAAM,CAAC,KAAKwM,IAAN,EAAYvM,GAAZ,CAAND;AACA,aAAO,IAAP;AACD;;AA9GS;;AAgHZ,WAAS2N,SAAT,CAAmBvB,KAAnB,EAA0B;AACxB,WAAO,IAAIE,KAAJ,CAAUF,KAAV,CAAP;AACD;;AAED,WAASwB,mBAAT,CAA6B3iB,KAA7B,EAAoC;AAClC,QAAIA,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA9B,EAAwC;AACtC,YAAMG,IAAI,GAAGH,KAAK,CAACM,QAANN,EAAb;AACA,aAAOG,IAAI,KAAK,wBAATA,IAAqCA,IAAI,KAAK,yBAArD;AACD;;AACD,WAAO,KAAP;AACD;;AACD,WAASwhB,KAAT,CAAe3hB,KAAf,EAAsB;AACpB,WAAO2iB,mBAAmB,CAAC3iB,KAAD,CAAnB2iB,GAA6B3iB,KAA7B2iB,GAAqCD,SAAS,CAAC1iB,KAAD,CAArD;AACD;;AACD,WAAS4iB,aAAT,CAAuB5iB,KAAvB,EAA8B;AAC5B,WAAO2iB,mBAAmB,CAAC3iB,KAAD,CAAnB2iB,GACH3iB,KADG2iB,GAEHD,SAAS,CAAC1iB,KAAD,CAAT0iB,CAAiBF,QAAjBE,CAA0B,GAA1BA,EAA+BH,MAA/BG,CAAsC,GAAtCA,EAA2C7O,SAA3C6O,EAFJ;AAGD;;AAED,QAAMG,SAAS,GAAGziB,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAlB;AACA,QAAM0iB,WAAW,GAAG1iB,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAApB;;AACA,WAAS2iB,UAAT,CAAoBC,IAApB,EAA0B/f,GAA1B,EAA+B;AAC7B,QAAI,CAACA,GAAL,EAAU;AACR,aAAO+f,IAAP;AACD;;AACD,UAAMjhB,IAAI,GAAGkB,GAAG,CAAC8B,KAAJ9B,CAAU,GAAVA,CAAb;;AACA,SAAK,IAAIpB,CAAC,GAAG,CAAR,EAAWgG,CAAC,GAAG9F,IAAI,CAACC,MAAzB,EAAiCH,CAAC,GAAGgG,CAArC,EAAwC,EAAEhG,CAA1C,EAA6C;AAC3C,YAAMkB,CAAC,GAAGhB,IAAI,CAACF,CAAD,CAAd;AACAmhB,UAAI,GAAGA,IAAI,CAACjgB,CAAD,CAAJigB,KAAYA,IAAI,CAACjgB,CAAD,CAAJigB,GAAU5iB,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAtB4iB,CAAPA;AACD;;AACD,WAAOA,IAAP;AACD;;AACD,WAAS3W,GAAT,CAAa4W,IAAb,EAAmBnf,KAAnB,EAA0BoH,MAA1B,EAAkC;AAChC,QAAI,OAAOpH,KAAP,KAAiB,QAArB,EAA+B;AAC7B,aAAOP,KAAK,CAACwf,UAAU,CAACE,IAAD,EAAOnf,KAAP,CAAX,EAA0BoH,MAA1B,CAAZ;AACD;;AACD,WAAO3H,KAAK,CAACwf,UAAU,CAACE,IAAD,EAAO,EAAP,CAAX,EAAuBnf,KAAvB,CAAZ;AACD;;AACD,QAAMof,QAAN,CAAe;AACb5B,eAAW,CAAC6B,YAAD,EAAe;AACxB,WAAKC,SAAL,GAAiBnf,SAAjB;AACA,WAAKof,eAAL,GAAuB,iBAAvB;AACA,WAAKC,WAAL,GAAmB,iBAAnB;AACA,WAAK3B,KAAL,GAAa,MAAb;AACA,WAAK4B,QAAL,GAAgB,EAAhB;;AACA,WAAKC,gBAAL,GAAyBC,OAAD,IAAaA,OAAO,CAACC,KAARD,CAAcE,QAAdF,CAAuBG,mBAAvBH,EAArC;;AACA,WAAKI,QAAL,GAAgB,EAAhB;AACA,WAAKC,MAAL,GAAc,CACZ,WADY,EAEZ,UAFY,EAGZ,OAHY,EAIZ,YAJY,EAKZ,WALY,CAAd;AAOA,WAAKC,IAAL,GAAY;AACVC,cAAM,EAAE,oDADE;AAEVpe,YAAI,EAAE,EAFI;AAGVqe,aAAK,EAAE,QAHG;AAIVC,kBAAU,EAAE,GAJF;AAKVtC,cAAM,EAAE;AALE,OAAZ;AAOA,WAAKuC,KAAL,GAAa,EAAb;;AACA,WAAKC,oBAAL,GAA4B,CAACC,GAAD,EAAMjhB,OAAN,KAAkBwf,aAAa,CAACxf,OAAO,CAACigB,eAAT,CAA3D;;AACA,WAAKiB,gBAAL,GAAwB,CAACD,GAAD,EAAMjhB,OAAN,KAAkBwf,aAAa,CAACxf,OAAO,CAACkgB,WAAT,CAAvD;;AACA,WAAKiB,UAAL,GAAkB,CAACF,GAAD,EAAMjhB,OAAN,KAAkBwf,aAAa,CAACxf,OAAO,CAACue,KAAT,CAAjD;;AACA,WAAK6C,SAAL,GAAiB,GAAjB;AACA,WAAKC,WAAL,GAAmB;AACjBC,YAAI,EAAE,SADW;AAEjBC,iBAAS,EAAE,IAFM;AAGjBC,wBAAgB,EAAE;AAHD,OAAnB;AAKA,WAAKC,mBAAL,GAA2B,IAA3B;AACA,WAAKC,OAAL,GAAe,IAAf;AACA,WAAKC,OAAL,GAAe,IAAf;AACA,WAAKC,OAAL,GAAe,IAAf;AACA,WAAKC,OAAL,GAAe,EAAf;AACA,WAAKC,UAAL,GAAkB,IAAlB;AACA,WAAKC,KAAL,GAAalhB,SAAb;AACA,WAAKmhB,MAAL,GAAc,EAAd;AACA,WAAKC,QAAL,GAAgB,IAAhB;AACA,WAAKC,uBAAL,GAA+B,IAA/B;AACA,WAAKC,QAAL,CAAcpC,YAAd;AACD;;AACD9W,OAAG,CAACvI,KAAD,EAAQoH,MAAR,EAAgB;AACjB,aAAOmB,GAAG,CAAC,IAAD,EAAOvI,KAAP,EAAcoH,MAAd,CAAV;AACD;;AACDsa,OAAG,CAAC1hB,KAAD,EAAQ;AACT,aAAOif,UAAU,CAAC,IAAD,EAAOjf,KAAP,CAAjB;AACD;;AACDyhB,YAAQ,CAACzhB,KAAD,EAAQoH,MAAR,EAAgB;AACtB,aAAOmB,GAAG,CAACyW,WAAD,EAAchf,KAAd,EAAqBoH,MAArB,CAAV;AACD;;AACDua,YAAQ,CAAC3hB,KAAD,EAAQoH,MAAR,EAAgB;AACtB,aAAOmB,GAAG,CAACwW,SAAD,EAAY/e,KAAZ,EAAmBoH,MAAnB,CAAV;AACD;;AACDwa,SAAK,CAAC5hB,KAAD,EAAQ6hB,IAAR,EAAcC,WAAd,EAA2BC,UAA3B,EAAuC;AAC1C,YAAMC,WAAW,GAAG/C,UAAU,CAAC,IAAD,EAAOjf,KAAP,CAA9B;AACA,YAAMiiB,iBAAiB,GAAGhD,UAAU,CAAC,IAAD,EAAO6C,WAAP,CAApC;AACA,YAAMI,WAAW,GAAG,MAAML,IAA1B;AACAvlB,YAAM,CAAC6lB,gBAAP7lB,CAAwB0lB,WAAxB1lB,EAAqC;AACnC,SAAC4lB,WAAD,GAAe;AACbhmB,eAAK,EAAE8lB,WAAW,CAACH,IAAD,CADL;AAEbO,kBAAQ,EAAE;AAFG,SADoB;AAKnC,SAACP,IAAD,GAAQ;AACNja,oBAAU,EAAE,IADN;;AAEN8Z,aAAG,GAAG;AACJ,kBAAMW,KAAK,GAAG,KAAKH,WAAL,CAAd;AACA,kBAAMpjB,MAAM,GAAGmjB,iBAAiB,CAACF,UAAD,CAAhC;;AACA,gBAAIplB,QAAQ,CAAC0lB,KAAD,CAAZ,EAAqB;AACnB,qBAAO/lB,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkBwC,MAAlBxC,EAA0B+lB,KAA1B/lB,CAAP;AACD;;AACD,mBAAOW,cAAc,CAAColB,KAAD,EAAQvjB,MAAR,CAArB;AARI;;AAUNyJ,aAAG,CAACrM,KAAD,EAAQ;AACT,iBAAKgmB,WAAL,IAAoBhmB,KAApB;AACD;;AAZK;AAL2B,OAArCI;AAoBD;;AAjFY;;AAmFf,MAAIgmB,QAAQ,GAAG,IAAIlD,QAAJ,CAAa;AAC1BmD,eAAW,EAAGV,IAAD,IAAU,CAACA,IAAI,CAACW,UAALX,CAAgB,IAAhBA,CADE;AAE1BY,cAAU,EAAGZ,IAAD,IAAUA,IAAI,KAAK,QAFL;AAG1BxB,SAAK,EAAE;AACLqC,eAAS,EAAE;AADN,KAHmB;AAM1B/B,eAAW,EAAE;AACX4B,iBAAW,EAAE,KADF;AAEXE,gBAAU,EAAE;AAFD;AANa,GAAb,CAAf;;AAYA,WAASE,YAAT,CAAsB1C,IAAtB,EAA4B;AAC1B,QAAI,CAACA,IAAD,IAAShkB,aAAa,CAACgkB,IAAI,CAACne,IAAN,CAAtB,IAAqC7F,aAAa,CAACgkB,IAAI,CAACC,MAAN,CAAtD,EAAqE;AACnE,aAAO,IAAP;AACD;;AACD,WAAO,CAACD,IAAI,CAACE,KAALF,GAAaA,IAAI,CAACE,KAALF,GAAa,GAA1BA,GAAgC,EAAjC,KACJA,IAAI,CAACnC,MAALmC,GAAcA,IAAI,CAACnC,MAALmC,GAAc,GAA5BA,GAAkC,EAD9B,IAELA,IAAI,CAACne,IAFA,GAEO,KAFP,GAGLme,IAAI,CAACC,MAHP;AAID;;AACD,WAAS0C,YAAT,CAAsBrC,GAAtB,EAA2BsC,IAA3B,EAAiCC,EAAjC,EAAqCC,OAArC,EAA8CC,MAA9C,EAAsD;AACpD,QAAIC,SAAS,GAAGJ,IAAI,CAACG,MAAD,CAApB;;AACA,QAAI,CAACC,SAAL,EAAgB;AACdA,eAAS,GAAGJ,IAAI,CAACG,MAAD,CAAJH,GAAetC,GAAG,CAAC2C,WAAJ3C,CAAgByC,MAAhBzC,EAAwB4C,KAAnDF;AACAH,QAAE,CAAC1hB,IAAH0hB,CAAQE,MAARF;AACD;;AACD,QAAIG,SAAS,GAAGF,OAAhB,EAAyB;AACvBA,aAAO,GAAGE,SAAVF;AACD;;AACD,WAAOA,OAAP;AACD;;AACD,WAASK,YAAT,CAAsB7C,GAAtB,EAA2BN,IAA3B,EAAiCoD,aAAjC,EAAgDC,KAAhD,EAAuD;AACrDA,SAAK,GAAGA,KAAK,IAAI,EAAjBA;AACA,QAAIT,IAAI,GAAGS,KAAK,CAACT,IAANS,GAAaA,KAAK,CAACT,IAANS,IAAc,EAAtC;AACA,QAAIR,EAAE,GAAGQ,KAAK,CAACC,cAAND,GAAuBA,KAAK,CAACC,cAAND,IAAwB,EAAxD;;AACA,QAAIA,KAAK,CAACrD,IAANqD,KAAerD,IAAnB,EAAyB;AACvB4C,UAAI,GAAGS,KAAK,CAACT,IAANS,GAAa,EAApBT;AACAC,QAAE,GAAGQ,KAAK,CAACC,cAAND,GAAuB,EAA5BR;AACAQ,WAAK,CAACrD,IAANqD,GAAarD,IAAbqD;AACD;;AACD/C,OAAG,CAACiD,IAAJjD;AACAA,OAAG,CAACN,IAAJM,GAAWN,IAAXM;AACA,QAAIwC,OAAO,GAAG,CAAd;AACA,UAAMzkB,IAAI,GAAG+kB,aAAa,CAACnlB,MAA3B;AACA,QAAIH,CAAJ,EAAOie,CAAP,EAAUyH,IAAV,EAAgBC,KAAhB,EAAuBC,WAAvB;;AACA,SAAK5lB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGO,IAAhB,EAAsBP,CAAC,EAAvB,EAA2B;AACzB2lB,WAAK,GAAGL,aAAa,CAACtlB,CAAD,CAArB2lB;;AACA,UAAIA,KAAK,KAAKvjB,SAAVujB,IAAuBA,KAAK,KAAK,IAAjCA,IAAyCvnB,OAAO,CAACunB,KAAD,CAAPvnB,KAAmB,IAAhE,EAAsE;AACpE4mB,eAAO,GAAGH,YAAY,CAACrC,GAAD,EAAMsC,IAAN,EAAYC,EAAZ,EAAgBC,OAAhB,EAAyBW,KAAzB,CAAtBX;AADF,aAEO,IAAI5mB,OAAO,CAACunB,KAAD,CAAX,EAAoB;AACzB,aAAK1H,CAAC,GAAG,CAAJA,EAAOyH,IAAI,GAAGC,KAAK,CAACxlB,MAAzB,EAAiC8d,CAAC,GAAGyH,IAArC,EAA2CzH,CAAC,EAA5C,EAAgD;AAC9C2H,qBAAW,GAAGD,KAAK,CAAC1H,CAAD,CAAnB2H;;AACA,cAAIA,WAAW,KAAKxjB,SAAhBwjB,IAA6BA,WAAW,KAAK,IAA7CA,IAAqD,CAACxnB,OAAO,CAACwnB,WAAD,CAAjE,EAAgF;AAC9EZ,mBAAO,GAAGH,YAAY,CAACrC,GAAD,EAAMsC,IAAN,EAAYC,EAAZ,EAAgBC,OAAhB,EAAyBY,WAAzB,CAAtBZ;AACD;AACF;AACF;AACF;;AACDxC,OAAG,CAACqD,OAAJrD;AACA,UAAMsD,KAAK,GAAGf,EAAE,CAAC5kB,MAAH4kB,GAAY,CAA1B;;AACA,QAAIe,KAAK,GAAGR,aAAa,CAACnlB,MAA1B,EAAkC;AAChC,WAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8lB,KAAhB,EAAuB9lB,CAAC,EAAxB,EAA4B;AAC1B,eAAO8kB,IAAI,CAACC,EAAE,CAAC/kB,CAAD,CAAH,CAAX;AACD;;AACD+kB,QAAE,CAAC1a,MAAH0a,CAAU,CAAVA,EAAae,KAAbf;AACD;;AACD,WAAOC,OAAP;AACD;;AACD,WAASe,WAAT,CAAqBlE,KAArB,EAA4BmE,KAA5B,EAAmCZ,KAAnC,EAA0C;AACxC,UAAMzD,gBAAgB,GAAGE,KAAK,CAACoE,uBAA/B;AACA,UAAMC,SAAS,GAAGd,KAAK,KAAK,CAAVA,GAAc/gB,IAAI,CAACqC,GAALrC,CAAS+gB,KAAK,GAAG,CAAjB/gB,EAAoB,GAApBA,CAAd+gB,GAAyC,CAA3D;AACA,WAAO/gB,IAAI,CAACc,KAALd,CAAW,CAAC2hB,KAAK,GAAGE,SAAT,IAAsBvE,gBAAjCtd,IAAqDsd,gBAArDtd,GAAwE6hB,SAA/E;AACD;;AACD,WAASC,WAAT,CAAqBC,MAArB,EAA6B5D,GAA7B,EAAkC;AAChCA,OAAG,GAAGA,GAAG,IAAI4D,MAAM,CAACC,UAAPD,CAAkB,IAAlBA,CAAb5D;AACAA,OAAG,CAACiD,IAAJjD;AACAA,OAAG,CAAC8D,cAAJ9D;AACAA,OAAG,CAAC+D,SAAJ/D,CAAc,CAAdA,EAAiB,CAAjBA,EAAoB4D,MAAM,CAAChB,KAA3B5C,EAAkC4D,MAAM,CAACI,MAAzChE;AACAA,OAAG,CAACqD,OAAJrD;AACD;;AACD,WAASiE,SAAT,CAAmBjE,GAAnB,EAAwBjhB,OAAxB,EAAiCkB,CAAjC,EAAoCE,CAApC,EAAuC;AACrC+jB,mBAAe,CAAClE,GAAD,EAAMjhB,OAAN,EAAekB,CAAf,EAAkBE,CAAlB,EAAqB,IAArB,CAAf+jB;AACD;;AACD,WAASA,eAAT,CAAyBlE,GAAzB,EAA8BjhB,OAA9B,EAAuCkB,CAAvC,EAA0CE,CAA1C,EAA6C0P,CAA7C,EAAgD;AAC9C,QAAI/T,IAAJ,EAAUqoB,OAAV,EAAmBC,OAAnB,EAA4B7iB,IAA5B,EAAkC8iB,YAAlC,EAAgDzB,KAAhD;AACA,UAAMhD,KAAK,GAAG7gB,OAAO,CAACulB,UAAtB;AACA,UAAMC,QAAQ,GAAGxlB,OAAO,CAACwlB,QAAzB;AACA,UAAMC,MAAM,GAAGzlB,OAAO,CAACylB,MAAvB;AACA,QAAIC,GAAG,GAAG,CAACF,QAAQ,IAAI,CAAb,IAAkBriB,WAA5B;;AACA,QAAI0d,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA9B,EAAwC;AACtC9jB,UAAI,GAAG8jB,KAAK,CAAC3jB,QAAN2jB,EAAP9jB;;AACA,UAAIA,IAAI,KAAK,2BAATA,IAAwCA,IAAI,KAAK,4BAArD,EAAmF;AACjFkkB,WAAG,CAACiD,IAAJjD;AACAA,WAAG,CAAC0E,SAAJ1E,CAAc/f,CAAd+f,EAAiB7f,CAAjB6f;AACAA,WAAG,CAACtP,MAAJsP,CAAWyE,GAAXzE;AACAA,WAAG,CAAC2E,SAAJ3E,CAAcJ,KAAdI,EAAqB,CAACJ,KAAK,CAACgD,KAAP,GAAe,CAApC5C,EAAuC,CAACJ,KAAK,CAACoE,MAAP,GAAgB,CAAvDhE,EAA0DJ,KAAK,CAACgD,KAAhE5C,EAAuEJ,KAAK,CAACoE,MAA7EhE;AACAA,WAAG,CAACqD,OAAJrD;AACA;AACD;AACF;;AACD,QAAIvc,KAAK,CAAC+gB,MAAD,CAAL/gB,IAAiB+gB,MAAM,IAAI,CAA/B,EAAkC;AAChC;AACD;;AACDxE,OAAG,CAAC4E,SAAJ5E;;AACA,YAAQJ,KAAR;AACA;AACE,YAAI/P,CAAJ,EAAO;AACLmQ,aAAG,CAAC6E,OAAJ7E,CAAY/f,CAAZ+f,EAAe7f,CAAf6f,EAAkBnQ,CAAC,GAAG,CAAtBmQ,EAAyBwE,MAAzBxE,EAAiC,CAAjCA,EAAoC,CAApCA,EAAuCle,GAAvCke;AADF,eAEO;AACLA,aAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAcwE,MAAdxE,EAAsB,CAAtBA,EAAyBle,GAAzBke;AACD;;AACDA,WAAG,CAAC+E,SAAJ/E;AACA;;AACF,WAAK,UAAL;AACEA,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAG4B,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA/BxE,EAAuC7f,CAAC,GAAG0B,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA3DxE;AACAyE,WAAG,IAAIpiB,aAAPoiB;AACAzE,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAG4B,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA/BxE,EAAuC7f,CAAC,GAAG0B,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA3DxE;AACAyE,WAAG,IAAIpiB,aAAPoiB;AACAzE,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAG4B,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA/BxE,EAAuC7f,CAAC,GAAG0B,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA3DxE;AACAA,WAAG,CAAC+E,SAAJ/E;AACA;;AACF,WAAK,aAAL;AACEqE,oBAAY,GAAGG,MAAM,GAAG,KAAxBH;AACA9iB,YAAI,GAAGijB,MAAM,GAAGH,YAAhB9iB;AACA4iB,eAAO,GAAGtiB,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAG,GAAGriB,UAAfP,IAA6BN,IAAvC4iB;AACAC,eAAO,GAAGviB,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAG,GAAGriB,UAAfP,IAA6BN,IAAvC6iB;AACApE,WAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAGkkB,OAAZnE,EAAqB7f,CAAC,GAAGikB,OAAzBpE,EAAkCqE,YAAlCrE,EAAgDyE,GAAG,GAAG7iB,EAAtDoe,EAA0DyE,GAAG,GAAGtiB,OAAhE6d;AACAA,WAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAGmkB,OAAZpE,EAAqB7f,CAAC,GAAGgkB,OAAzBnE,EAAkCqE,YAAlCrE,EAAgDyE,GAAG,GAAGtiB,OAAtD6d,EAA+DyE,GAA/DzE;AACAA,WAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAGkkB,OAAZnE,EAAqB7f,CAAC,GAAGikB,OAAzBpE,EAAkCqE,YAAlCrE,EAAgDyE,GAAhDzE,EAAqDyE,GAAG,GAAGtiB,OAA3D6d;AACAA,WAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAGmkB,OAAZpE,EAAqB7f,CAAC,GAAGgkB,OAAzBnE,EAAkCqE,YAAlCrE,EAAgDyE,GAAG,GAAGtiB,OAAtD6d,EAA+DyE,GAAG,GAAG7iB,EAArEoe;AACAA,WAAG,CAAC+E,SAAJ/E;AACA;;AACF,WAAK,MAAL;AACE,YAAI,CAACuE,QAAL,EAAe;AACbhjB,cAAI,GAAGM,IAAI,CAACqjB,OAALrjB,GAAe2iB,MAAtBjjB;AACAqhB,eAAK,GAAG/S,CAAC,GAAGA,CAAC,GAAG,CAAP,GAAWtO,IAApBqhB;AACA5C,aAAG,CAACmF,IAAJnF,CAAS/f,CAAC,GAAG2iB,KAAb5C,EAAoB7f,CAAC,GAAGoB,IAAxBye,EAA8B,IAAI4C,KAAlC5C,EAAyC,IAAIze,IAA7Cye;AACA;AACD;;AACDyE,WAAG,IAAIriB,UAAPqiB;;AACF,WAAK,SAAL;AACEN,eAAO,GAAGtiB,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BL;AACAC,eAAO,GAAGviB,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BJ;AACApE,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACAA,WAAG,CAAC+E,SAAJ/E;AACA;;AACF,WAAK,UAAL;AACEyE,WAAG,IAAIriB,UAAPqiB;;AACF,WAAK,OAAL;AACEN,eAAO,GAAGtiB,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BL;AACAC,eAAO,GAAGviB,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BJ;AACApE,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACA;;AACF,WAAK,MAAL;AACEmE,eAAO,GAAGtiB,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BL;AACAC,eAAO,GAAGviB,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BJ;AACApE,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACAyE,WAAG,IAAIriB,UAAPqiB;AACAN,eAAO,GAAGtiB,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BL;AACAC,eAAO,GAAGviB,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BJ;AACApE,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGmkB,OAAfpE,EAAwB7f,CAAC,GAAGgkB,OAA5BnE;AACA;;AACF,WAAK,MAAL;AACEmE,eAAO,GAAGtU,CAAC,GAAGA,CAAC,GAAG,CAAP,GAAWhO,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAAtCL;AACAC,eAAO,GAAGviB,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA1BJ;AACApE,WAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGkkB,OAAfnE,EAAwB7f,CAAC,GAAGikB,OAA5BpE;AACA;;AACF,WAAK,MAAL;AACEA,WAAG,CAACgF,MAAJhF,CAAW/f,CAAX+f,EAAc7f,CAAd6f;AACAA,WAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAG4B,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,IAAgB2iB,MAA/BxE,EAAuC7f,CAAC,GAAG0B,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,IAAgB2iB,MAA3DxE;AACA;AA/EF;;AAiFAA,OAAG,CAACoF,IAAJpF;;AACA,QAAIjhB,OAAO,CAACsmB,WAARtmB,GAAsB,CAA1B,EAA6B;AAC3BihB,SAAG,CAACsF,MAAJtF;AACD;AACF;;AACD,WAASuF,cAAT,CAAwBC,KAAxB,EAA+BC,IAA/B,EAAqCC,MAArC,EAA6C;AAC3CA,UAAM,GAAGA,MAAM,IAAI,GAAnBA;AACA,WAAO,CAACD,IAAD,IAAUD,KAAK,IAAIA,KAAK,CAACvlB,CAANulB,GAAUC,IAAI,CAAChc,IAALgc,GAAYC,MAA/BF,IAAyCA,KAAK,CAACvlB,CAANulB,GAAUC,IAAI,CAAC/b,KAAL+b,GAAaC,MAAhEF,IACjBA,KAAK,CAACrlB,CAANqlB,GAAUC,IAAI,CAACE,GAALF,GAAWC,MADJF,IACcA,KAAK,CAACrlB,CAANqlB,GAAUC,IAAI,CAACG,MAALH,GAAcC,MADvD;AAED;;AACD,WAASG,QAAT,CAAkB7F,GAAlB,EAAuByF,IAAvB,EAA6B;AAC3BzF,OAAG,CAACiD,IAAJjD;AACAA,OAAG,CAAC4E,SAAJ5E;AACAA,OAAG,CAACmF,IAAJnF,CAASyF,IAAI,CAAChc,IAAduW,EAAoByF,IAAI,CAACE,GAAzB3F,EAA8ByF,IAAI,CAAC/b,KAAL+b,GAAaA,IAAI,CAAChc,IAAhDuW,EAAsDyF,IAAI,CAACG,MAALH,GAAcA,IAAI,CAACE,GAAzE3F;AACAA,OAAG,CAAC8F,IAAJ9F;AACD;;AACD,WAAS+F,UAAT,CAAoB/F,GAApB,EAAyB;AACvBA,OAAG,CAACqD,OAAJrD;AACD;;AACD,WAASgG,cAAT,CAAwBhG,GAAxB,EAA6BtgB,QAA7B,EAAuCnB,MAAvC,EAA+C0nB,IAA/C,EAAqD5F,IAArD,EAA2D;AACzD,QAAI,CAAC3gB,QAAL,EAAe;AACb,aAAOsgB,GAAG,CAACiF,MAAJjF,CAAWzhB,MAAM,CAAC0B,CAAlB+f,EAAqBzhB,MAAM,CAAC4B,CAA5B6f,CAAP;AACD;;AACD,QAAIK,IAAI,KAAK,QAAb,EAAuB;AACrB,YAAM6F,QAAQ,GAAG,CAACxmB,QAAQ,CAACO,CAATP,GAAanB,MAAM,CAAC0B,CAArB,IAA0B,GAA3C;AACA+f,SAAG,CAACiF,MAAJjF,CAAWkG,QAAXlG,EAAqBtgB,QAAQ,CAACS,CAA9B6f;AACAA,SAAG,CAACiF,MAAJjF,CAAWkG,QAAXlG,EAAqBzhB,MAAM,CAAC4B,CAA5B6f;AAHF,WAIO,IAAIK,IAAI,KAAK,OAATA,KAAqB,CAAC,CAAC4F,IAA3B,EAAiC;AACtCjG,SAAG,CAACiF,MAAJjF,CAAWtgB,QAAQ,CAACO,CAApB+f,EAAuBzhB,MAAM,CAAC4B,CAA9B6f;AADK,WAEA;AACLA,SAAG,CAACiF,MAAJjF,CAAWzhB,MAAM,CAAC0B,CAAlB+f,EAAqBtgB,QAAQ,CAACS,CAA9B6f;AACD;;AACDA,OAAG,CAACiF,MAAJjF,CAAWzhB,MAAM,CAAC0B,CAAlB+f,EAAqBzhB,MAAM,CAAC4B,CAA5B6f;AACD;;AACD,WAASmG,cAAT,CAAwBnG,GAAxB,EAA6BtgB,QAA7B,EAAuCnB,MAAvC,EAA+C0nB,IAA/C,EAAqD;AACnD,QAAI,CAACvmB,QAAL,EAAe;AACb,aAAOsgB,GAAG,CAACiF,MAAJjF,CAAWzhB,MAAM,CAAC0B,CAAlB+f,EAAqBzhB,MAAM,CAAC4B,CAA5B6f,CAAP;AACD;;AACDA,OAAG,CAACoG,aAAJpG,CACEiG,IAAI,GAAGvmB,QAAQ,CAAC2mB,IAAZ,GAAmB3mB,QAAQ,CAAC4mB,IADlCtG,EAEEiG,IAAI,GAAGvmB,QAAQ,CAAC6mB,IAAZ,GAAmB7mB,QAAQ,CAAC8mB,IAFlCxG,EAGEiG,IAAI,GAAG1nB,MAAM,CAAC+nB,IAAV,GAAiB/nB,MAAM,CAAC8nB,IAH9BrG,EAIEiG,IAAI,GAAG1nB,MAAM,CAACioB,IAAV,GAAiBjoB,MAAM,CAACgoB,IAJ9BvG,EAKEzhB,MAAM,CAAC0B,CALT+f,EAMEzhB,MAAM,CAAC4B,CANT6f;AAOD;;AACD,WAASyG,UAAT,CAAoBzG,GAApB,EAAyB0G,IAAzB,EAA+BzmB,CAA/B,EAAkCE,CAAlC,EAAqCuf,IAArC,EAAsD;AAAA,QAAXiH,IAAW,uEAAJ,EAAI;AACpD,UAAMC,KAAK,GAAGhrB,OAAO,CAAC8qB,IAAD,CAAP9qB,GAAgB8qB,IAAhB9qB,GAAuB,CAAC8qB,IAAD,CAArC;AACA,UAAMpB,MAAM,GAAGqB,IAAI,CAACE,WAALF,GAAmB,CAAnBA,IAAwBA,IAAI,CAACG,WAALH,KAAqB,EAA5D;AACA,QAAInpB,CAAJ,EAAOupB,IAAP;AACA/G,OAAG,CAACiD,IAAJjD;AACAA,OAAG,CAACN,IAAJM,GAAWN,IAAI,CAAC+C,MAAhBzC;AACAgH,iBAAa,CAAChH,GAAD,EAAM2G,IAAN,CAAbK;;AACA,SAAKxpB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGopB,KAAK,CAACjpB,MAAtB,EAA8B,EAAEH,CAAhC,EAAmC;AACjCupB,UAAI,GAAGH,KAAK,CAACppB,CAAD,CAAZupB;;AACA,UAAIzB,MAAJ,EAAY;AACV,YAAIqB,IAAI,CAACG,WAAT,EAAsB;AACpB9G,aAAG,CAACiH,WAAJjH,GAAkB2G,IAAI,CAACG,WAAvB9G;AACD;;AACD,YAAI,CAACtkB,aAAa,CAACirB,IAAI,CAACE,WAAN,CAAlB,EAAsC;AACpC7G,aAAG,CAACkH,SAAJlH,GAAgB2G,IAAI,CAACE,WAArB7G;AACD;;AACDA,WAAG,CAACmH,UAAJnH,CAAe+G,IAAf/G,EAAqB/f,CAArB+f,EAAwB7f,CAAxB6f,EAA2B2G,IAAI,CAACS,QAAhCpH;AACD;;AACDA,SAAG,CAACqH,QAAJrH,CAAa+G,IAAb/G,EAAmB/f,CAAnB+f,EAAsB7f,CAAtB6f,EAAyB2G,IAAI,CAACS,QAA9BpH;AACAsH,kBAAY,CAACtH,GAAD,EAAM/f,CAAN,EAASE,CAAT,EAAY4mB,IAAZ,EAAkBJ,IAAlB,CAAZW;AACAnnB,OAAC,IAAIuf,IAAI,CAACG,UAAV1f;AACD;;AACD6f,OAAG,CAACqD,OAAJrD;AACD;;AACD,WAASgH,aAAT,CAAuBhH,GAAvB,EAA4B2G,IAA5B,EAAkC;AAChC,QAAIA,IAAI,CAACY,WAAT,EAAsB;AACpBvH,SAAG,CAAC0E,SAAJ1E,CAAc2G,IAAI,CAACY,WAALZ,CAAiB,CAAjBA,CAAd3G,EAAmC2G,IAAI,CAACY,WAALZ,CAAiB,CAAjBA,CAAnC3G;AACD;;AACD,QAAI,CAACtkB,aAAa,CAACirB,IAAI,CAACpC,QAAN,CAAlB,EAAmC;AACjCvE,SAAG,CAACtP,MAAJsP,CAAW2G,IAAI,CAACpC,QAAhBvE;AACD;;AACD,QAAI2G,IAAI,CAACrJ,KAAT,EAAgB;AACd0C,SAAG,CAACwH,SAAJxH,GAAgB2G,IAAI,CAACrJ,KAArB0C;AACD;;AACD,QAAI2G,IAAI,CAACc,SAAT,EAAoB;AAClBzH,SAAG,CAACyH,SAAJzH,GAAgB2G,IAAI,CAACc,SAArBzH;AACD;;AACD,QAAI2G,IAAI,CAACe,YAAT,EAAuB;AACrB1H,SAAG,CAAC0H,YAAJ1H,GAAmB2G,IAAI,CAACe,YAAxB1H;AACD;AACF;;AACD,WAASsH,YAAT,CAAsBtH,GAAtB,EAA2B/f,CAA3B,EAA8BE,CAA9B,EAAiC4mB,IAAjC,EAAuCJ,IAAvC,EAA6C;AAC3C,QAAIA,IAAI,CAACgB,aAALhB,IAAsBA,IAAI,CAACiB,SAA/B,EAA0C;AACxC,YAAMC,OAAO,GAAG7H,GAAG,CAAC2C,WAAJ3C,CAAgB+G,IAAhB/G,CAAhB;AACA,YAAMvW,IAAI,GAAGxJ,CAAC,GAAG4nB,OAAO,CAACC,qBAAzB;AACA,YAAMpe,KAAK,GAAGzJ,CAAC,GAAG4nB,OAAO,CAACE,sBAA1B;AACA,YAAMpC,GAAG,GAAGxlB,CAAC,GAAG0nB,OAAO,CAACG,uBAAxB;AACA,YAAMpC,MAAM,GAAGzlB,CAAC,GAAG0nB,OAAO,CAACI,wBAA3B;AACA,YAAMC,WAAW,GAAGvB,IAAI,CAACgB,aAALhB,GAAqB,CAAChB,GAAG,GAAGC,MAAP,IAAiB,CAAtCe,GAA0Cf,MAA9D;AACA5F,SAAG,CAACiH,WAAJjH,GAAkBA,GAAG,CAACwH,SAAtBxH;AACAA,SAAG,CAAC4E,SAAJ5E;AACAA,SAAG,CAACkH,SAAJlH,GAAgB2G,IAAI,CAACwB,eAALxB,IAAwB,CAAxC3G;AACAA,SAAG,CAACgF,MAAJhF,CAAWvW,IAAXuW,EAAiBkI,WAAjBlI;AACAA,SAAG,CAACiF,MAAJjF,CAAWtW,KAAXsW,EAAkBkI,WAAlBlI;AACAA,SAAG,CAACsF,MAAJtF;AACD;AACF;;AACD,WAASoI,kBAAT,CAA4BpI,GAA5B,EAAiCmF,IAAjC,EAAuC;AACrC,UAAM;AAACllB,OAAD;AAAIE,OAAJ;AAAO0P,OAAP;AAAU7B,OAAV;AAAawW;AAAb,QAAuBW,IAA7B;AACAnF,OAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAGukB,MAAM,CAAC6D,OAAnBrI,EAA4B7f,CAAC,GAAGqkB,MAAM,CAAC6D,OAAvCrI,EAAgDwE,MAAM,CAAC6D,OAAvDrI,EAAgE,CAAC7d,OAAjE6d,EAA0Epe,EAA1Eoe,EAA8E,IAA9EA;AACAA,OAAG,CAACiF,MAAJjF,CAAW/f,CAAX+f,EAAc7f,CAAC,GAAG6N,CAAJ7N,GAAQqkB,MAAM,CAAC8D,UAA7BtI;AACAA,OAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAGukB,MAAM,CAAC8D,UAAnBtI,EAA+B7f,CAAC,GAAG6N,CAAJ7N,GAAQqkB,MAAM,CAAC8D,UAA9CtI,EAA0DwE,MAAM,CAAC8D,UAAjEtI,EAA6Epe,EAA7Eoe,EAAiF7d,OAAjF6d,EAA0F,IAA1FA;AACAA,OAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAG4P,CAAJ5P,GAAQukB,MAAM,CAAC+D,WAA1BvI,EAAuC7f,CAAC,GAAG6N,CAA3CgS;AACAA,OAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAG4P,CAAJ5P,GAAQukB,MAAM,CAAC+D,WAAvBvI,EAAoC7f,CAAC,GAAG6N,CAAJ7N,GAAQqkB,MAAM,CAAC+D,WAAnDvI,EAAgEwE,MAAM,CAAC+D,WAAvEvI,EAAoF7d,OAApF6d,EAA6F,CAA7FA,EAAgG,IAAhGA;AACAA,OAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAG4P,CAAfmQ,EAAkB7f,CAAC,GAAGqkB,MAAM,CAACgE,QAA7BxI;AACAA,OAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAC,GAAG4P,CAAJ5P,GAAQukB,MAAM,CAACgE,QAAvBxI,EAAiC7f,CAAC,GAAGqkB,MAAM,CAACgE,QAA5CxI,EAAsDwE,MAAM,CAACgE,QAA7DxI,EAAuE,CAAvEA,EAA0E,CAAC7d,OAA3E6d,EAAoF,IAApFA;AACAA,OAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGukB,MAAM,CAAC6D,OAAtBrI,EAA+B7f,CAA/B6f;AACD;;AAED,QAAMyI,WAAW,GAAG,IAAIC,MAAJ,CAAW,sCAAX,CAApB;AACA,QAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW,uEAAX,CAAnB;;AACA,WAASE,YAAT,CAAsBjtB,KAAtB,EAA6B4F,IAA7B,EAAmC;AACjC,UAAMsnB,OAAO,GAAG,CAAC,KAAKltB,KAAN,EAAamtB,KAAb,CAAmBL,WAAnB,CAAhB;;AACA,QAAI,CAACI,OAAD,IAAYA,OAAO,CAAC,CAAD,CAAPA,KAAe,QAA/B,EAAyC;AACvC,aAAOtnB,IAAI,GAAG,GAAd;AACD;;AACD5F,SAAK,GAAG,CAACktB,OAAO,CAAC,CAAD,CAAhBltB;;AACA,YAAQktB,OAAO,CAAC,CAAD,CAAf;AACA,WAAK,IAAL;AACE,eAAOltB,KAAP;;AACF,WAAK,GAAL;AACEA,aAAK,IAAI,GAATA;AACA;AALF;;AAOA,WAAO4F,IAAI,GAAG5F,KAAd;AACD;;AACD,QAAMotB,YAAY,GAAG/oB,CAAC,IAAI,CAACA,CAAD,IAAM,CAAhC;;AACA,WAASgpB,iBAAT,CAA2BrtB,KAA3B,EAAkCstB,KAAlC,EAAyC;AACvC,UAAM3Z,GAAG,GAAG,EAAZ;AACA,UAAM4Z,QAAQ,GAAG9sB,QAAQ,CAAC6sB,KAAD,CAAzB;AACA,UAAMvrB,IAAI,GAAGwrB,QAAQ,GAAGntB,MAAM,CAAC2B,IAAP3B,CAAYktB,KAAZltB,CAAH,GAAwBktB,KAA7C;AACA,UAAME,IAAI,GAAG/sB,QAAQ,CAACT,KAAD,CAARS,GACT8sB,QAAQ,GACNE,IAAI,IAAI1sB,cAAc,CAACf,KAAK,CAACytB,IAAD,CAAN,EAAcztB,KAAK,CAACstB,KAAK,CAACG,IAAD,CAAN,CAAnB,CADhB,GAENA,IAAI,IAAIztB,KAAK,CAACytB,IAAD,CAHNhtB,GAIT,MAAMT,KAJV;;AAKA,SAAK,MAAMytB,IAAX,IAAmB1rB,IAAnB,EAAyB;AACvB4R,SAAG,CAAC8Z,IAAD,CAAH9Z,GAAYyZ,YAAY,CAACI,IAAI,CAACC,IAAD,CAAL,CAAxB9Z;AACD;;AACD,WAAOA,GAAP;AACD;;AACD,WAAS+Z,MAAT,CAAgB1tB,KAAhB,EAAuB;AACrB,WAAOqtB,iBAAiB,CAACrtB,KAAD,EAAQ;AAACgqB,SAAG,EAAE,GAAN;AAAWjc,WAAK,EAAE,GAAlB;AAAuBkc,YAAM,EAAE,GAA/B;AAAoCnc,UAAI,EAAE;AAA1C,KAAR,CAAxB;AACD;;AACD,WAAS6f,aAAT,CAAuB3tB,KAAvB,EAA8B;AAC5B,WAAOqtB,iBAAiB,CAACrtB,KAAD,EAAQ,CAAC,SAAD,EAAY,UAAZ,EAAwB,YAAxB,EAAsC,aAAtC,CAAR,CAAxB;AACD;;AACD,WAAS4tB,SAAT,CAAmB5tB,KAAnB,EAA0B;AACxB,UAAM0E,GAAG,GAAGgpB,MAAM,CAAC1tB,KAAD,CAAlB;AACA0E,OAAG,CAACuiB,KAAJviB,GAAYA,GAAG,CAACoJ,IAAJpJ,GAAWA,GAAG,CAACqJ,KAA3BrJ;AACAA,OAAG,CAAC2jB,MAAJ3jB,GAAaA,GAAG,CAACslB,GAAJtlB,GAAUA,GAAG,CAACulB,MAA3BvlB;AACA,WAAOA,GAAP;AACD;;AACD,WAASmpB,MAAT,CAAgBzqB,OAAhB,EAAyB0qB,QAAzB,EAAmC;AACjC1qB,WAAO,GAAGA,OAAO,IAAI,EAArBA;AACA0qB,YAAQ,GAAGA,QAAQ,IAAI1H,QAAQ,CAACrC,IAAhC+J;AACA,QAAIloB,IAAI,GAAG7E,cAAc,CAACqC,OAAO,CAACwC,IAAT,EAAekoB,QAAQ,CAACloB,IAAxB,CAAzB;;AACA,QAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5BA,UAAI,GAAGsa,QAAQ,CAACta,IAAD,EAAO,EAAP,CAAfA;AACD;;AACD,QAAIqe,KAAK,GAAGljB,cAAc,CAACqC,OAAO,CAAC6gB,KAAT,EAAgB6J,QAAQ,CAAC7J,KAAzB,CAA1B;;AACA,QAAIA,KAAK,IAAI,CAAC,CAAC,KAAKA,KAAN,EAAakJ,KAAb,CAAmBH,UAAnB,CAAd,EAA8C;AAC5C9oB,aAAO,CAACC,IAARD,CAAa,oCAAoC+f,KAApC,GAA4C,GAAzD/f;AACA+f,WAAK,GAAG,EAARA;AACD;;AACD,UAAMF,IAAI,GAAG;AACXC,YAAM,EAAEjjB,cAAc,CAACqC,OAAO,CAAC4gB,MAAT,EAAiB8J,QAAQ,CAAC9J,MAA1B,CADX;AAEXE,gBAAU,EAAE+I,YAAY,CAAClsB,cAAc,CAACqC,OAAO,CAAC8gB,UAAT,EAAqB4J,QAAQ,CAAC5J,UAA9B,CAAf,EAA0Dte,IAA1D,CAFb;AAGXA,UAHW;AAIXqe,WAJW;AAKXrC,YAAM,EAAE7gB,cAAc,CAACqC,OAAO,CAACwe,MAAT,EAAiBkM,QAAQ,CAAClM,MAA1B,CALX;AAMXkF,YAAM,EAAE;AANG,KAAb;AAQA/C,QAAI,CAAC+C,MAAL/C,GAAc0C,YAAY,CAAC1C,IAAD,CAA1BA;AACA,WAAOA,IAAP;AACD;;AACD,WAASgK,OAAT,CAAiBC,MAAjB,EAAyBvK,OAAzB,EAAkCjhB,KAAlC,EAAyCyrB,IAAzC,EAA+C;AAC7C,QAAIC,SAAS,GAAG,IAAhB;AACA,QAAIrsB,CAAJ,EAAOO,IAAP,EAAapC,KAAb;;AACA,SAAK6B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG4rB,MAAM,CAAChsB,MAA1B,EAAkCH,CAAC,GAAGO,IAAtC,EAA4C,EAAEP,CAA9C,EAAiD;AAC/C7B,WAAK,GAAGguB,MAAM,CAACnsB,CAAD,CAAd7B;;AACA,UAAIA,KAAK,KAAKiE,SAAd,EAAyB;AACvB;AACD;;AACD,UAAIwf,OAAO,KAAKxf,SAAZwf,IAAyB,OAAOzjB,KAAP,KAAiB,UAA9C,EAA0D;AACxDA,aAAK,GAAGA,KAAK,CAACyjB,OAAD,CAAbzjB;AACAkuB,iBAAS,GAAG,KAAZA;AACD;;AACD,UAAI1rB,KAAK,KAAKyB,SAAVzB,IAAuBvC,OAAO,CAACD,KAAD,CAAlC,EAA2C;AACzCA,aAAK,GAAGA,KAAK,CAACwC,KAAK,GAAGxC,KAAK,CAACgC,MAAf,CAAbhC;AACAkuB,iBAAS,GAAG,KAAZA;AACD;;AACD,UAAIluB,KAAK,KAAKiE,SAAd,EAAyB;AACvB,YAAIgqB,IAAI,IAAI,CAACC,SAAb,EAAwB;AACtBD,cAAI,CAACC,SAALD,GAAiB,KAAjBA;AACD;;AACD,eAAOjuB,KAAP;AACD;AACF;AACF;;AACD,WAASmuB,SAAT,CAAmBC,MAAnB,EAA2BC,KAA3B,EAAkCC,WAAlC,EAA+C;AAC7C,UAAM;AAAChmB,SAAD;AAAMC;AAAN,QAAa6lB,MAAnB;AACA,UAAMG,MAAM,GAAGntB,WAAW,CAACitB,KAAD,EAAQ,CAAC9lB,GAAG,GAAGD,GAAP,IAAc,CAAtB,CAA1B;;AACA,UAAMkmB,QAAQ,GAAG,CAACxuB,KAAD,EAAQuM,GAAR,KAAgB+hB,WAAW,IAAItuB,KAAK,KAAK,CAAzBsuB,GAA6B,CAA7BA,GAAiCtuB,KAAK,GAAGuM,GAA1E;;AACA,WAAO;AACLjE,SAAG,EAAEkmB,QAAQ,CAAClmB,GAAD,EAAM,CAACpC,IAAI,CAAC8B,GAAL9B,CAASqoB,MAATroB,CAAP,CADR;AAELqC,SAAG,EAAEimB,QAAQ,CAACjmB,GAAD,EAAMgmB,MAAN;AAFR,KAAP;AAID;;AACD,WAASE,aAAT,CAAuBC,aAAvB,EAAsCjL,OAAtC,EAA+C;AAC7C,WAAOrjB,MAAM,CAACsP,MAAPtP,CAAcA,MAAM,CAACyC,MAAPzC,CAAcsuB,aAAdtuB,CAAdA,EAA4CqjB,OAA5CrjB,CAAP;AACD;;AAED,WAASuuB,eAAT,CAAyBC,MAAzB,EAA8G;AAAA,QAA7EC,QAA6E,uEAAlE,CAAC,EAAD,CAAkE;AAAA,QAA5DC,UAA4D,uEAA/CF,MAA+C;AAAA,QAAvCd,QAAuC;AAAA,QAA7BiB,SAA6B,uEAAjB,MAAMH,MAAM,CAAC,CAAD,CAAK;;AAC5G,QAAI,CAACrpB,OAAO,CAACuoB,QAAD,CAAZ,EAAwB;AACtBA,cAAQ,GAAGkB,QAAQ,CAAC,WAAD,EAAcJ,MAAd,CAAnBd;AACD;;AACD,UAAM1G,KAAK,GAAG;AACZ,OAAC6H,MAAM,CAACC,WAAR,GAAsB,QADV;AAEZC,gBAAU,EAAE,IAFA;AAGZC,aAAO,EAAER,MAHG;AAIZS,iBAAW,EAAEP,UAJD;AAKZtI,eAAS,EAAEsH,QALC;AAMZwB,gBAAU,EAAEP,SANA;AAOZtJ,cAAQ,EAAG3hB,KAAD,IAAW6qB,eAAe,CAAC,CAAC7qB,KAAD,EAAQ,GAAG8qB,MAAX,CAAD,EAAqBC,QAArB,EAA+BC,UAA/B,EAA2ChB,QAA3C;AAPxB,KAAd;AASA,WAAO,IAAIyB,KAAJ,CAAUnI,KAAV,EAAiB;AACtBoI,oBAAc,CAAC5sB,MAAD,EAAS6qB,IAAT,EAAe;AAC3B,eAAO7qB,MAAM,CAAC6qB,IAAD,CAAb;AACA,eAAO7qB,MAAM,CAAC6sB,KAAd;AACA,eAAOb,MAAM,CAAC,CAAD,CAANA,CAAUnB,IAAVmB,CAAP;AACA,eAAO,IAAP;AALoB;;AAOtBpJ,SAAG,CAAC5iB,MAAD,EAAS6qB,IAAT,EAAe;AAChB,eAAOiC,OAAO,CAAC9sB,MAAD,EAAS6qB,IAAT,EACZ,MAAMkC,oBAAoB,CAAClC,IAAD,EAAOoB,QAAP,EAAiBD,MAAjB,EAAyBhsB,MAAzB,CADd,CAAd;AARoB;;AAWtBgtB,8BAAwB,CAAChtB,MAAD,EAAS6qB,IAAT,EAAe;AACrC,eAAOoC,OAAO,CAACD,wBAARC,CAAiCjtB,MAAM,CAACwsB,OAAPxsB,CAAe,CAAfA,CAAjCitB,EAAoDpC,IAApDoC,CAAP;AAZoB;;AActBC,oBAAc,GAAG;AACf,eAAOD,OAAO,CAACC,cAARD,CAAuBjB,MAAM,CAAC,CAAD,CAA7BiB,CAAP;AAfoB;;AAiBtB/pB,SAAG,CAAClD,MAAD,EAAS6qB,IAAT,EAAe;AAChB,eAAOsC,oBAAoB,CAACntB,MAAD,CAApBmtB,CAA6BC,QAA7BD,CAAsCtC,IAAtCsC,CAAP;AAlBoB;;AAoBtBE,aAAO,CAACrtB,MAAD,EAAS;AACd,eAAOmtB,oBAAoB,CAACntB,MAAD,CAA3B;AArBoB;;AAuBtByJ,SAAG,CAACzJ,MAAD,EAAS6qB,IAAT,EAAeztB,KAAf,EAAsB;AACvB,cAAMkwB,OAAO,GAAGttB,MAAM,CAACutB,QAAPvtB,KAAoBA,MAAM,CAACutB,QAAPvtB,GAAkBmsB,SAAS,EAA/CnsB,CAAhB;AACAA,cAAM,CAAC6qB,IAAD,CAAN7qB,GAAestB,OAAO,CAACzC,IAAD,CAAPyC,GAAgBlwB,KAA/B4C;AACA,eAAOA,MAAM,CAAC6sB,KAAd;AACA,eAAO,IAAP;AACD;;AA5BqB,KAAjB,CAAP;AA8BD;;AACD,WAASW,cAAT,CAAwBC,KAAxB,EAA+B5M,OAA/B,EAAwC6M,QAAxC,EAAkDC,kBAAlD,EAAsE;AACpE,UAAMnJ,KAAK,GAAG;AACZ+H,gBAAU,EAAE,KADA;AAEZqB,YAAM,EAAEH,KAFI;AAGZI,cAAQ,EAAEhN,OAHE;AAIZiN,eAAS,EAAEJ,QAJC;AAKZK,YAAM,EAAE,IAAIrkB,GAAJ,EALI;AAMZ6W,kBAAY,EAAEA,YAAY,CAACkN,KAAD,EAAQE,kBAAR,CANd;AAOZK,gBAAU,EAAGvM,GAAD,IAAS+L,cAAc,CAACC,KAAD,EAAQhM,GAAR,EAAaiM,QAAb,EAAuBC,kBAAvB,CAPvB;AAQZ9K,cAAQ,EAAG3hB,KAAD,IAAWssB,cAAc,CAACC,KAAK,CAAC5K,QAAN4K,CAAevsB,KAAfusB,CAAD,EAAwB5M,OAAxB,EAAiC6M,QAAjC,EAA2CC,kBAA3C;AARvB,KAAd;AAUA,WAAO,IAAIhB,KAAJ,CAAUnI,KAAV,EAAiB;AACtBoI,oBAAc,CAAC5sB,MAAD,EAAS6qB,IAAT,EAAe;AAC3B,eAAO7qB,MAAM,CAAC6qB,IAAD,CAAb;AACA,eAAO4C,KAAK,CAAC5C,IAAD,CAAZ;AACA,eAAO,IAAP;AAJoB;;AAMtBjI,SAAG,CAAC5iB,MAAD,EAAS6qB,IAAT,EAAeoD,QAAf,EAAyB;AAC1B,eAAOnB,OAAO,CAAC9sB,MAAD,EAAS6qB,IAAT,EACZ,MAAMqD,mBAAmB,CAACluB,MAAD,EAAS6qB,IAAT,EAAeoD,QAAf,CADb,CAAd;AAPoB;;AAUtBjB,8BAAwB,CAAChtB,MAAD,EAAS6qB,IAAT,EAAe;AACrC,eAAO7qB,MAAM,CAACugB,YAAPvgB,CAAoBmuB,OAApBnuB,GACHitB,OAAO,CAAC/pB,GAAR+pB,CAAYQ,KAAZR,EAAmBpC,IAAnBoC,IAA2B;AAACnkB,oBAAU,EAAE,IAAb;AAAmBD,sBAAY,EAAE;AAAjC,SAA3BokB,GAAoE5rB,SADjErB,GAEHitB,OAAO,CAACD,wBAARC,CAAiCQ,KAAjCR,EAAwCpC,IAAxCoC,CAFJ;AAXoB;;AAetBC,oBAAc,GAAG;AACf,eAAOD,OAAO,CAACC,cAARD,CAAuBQ,KAAvBR,CAAP;AAhBoB;;AAkBtB/pB,SAAG,CAAClD,MAAD,EAAS6qB,IAAT,EAAe;AAChB,eAAOoC,OAAO,CAAC/pB,GAAR+pB,CAAYQ,KAAZR,EAAmBpC,IAAnBoC,CAAP;AAnBoB;;AAqBtBI,aAAO,GAAG;AACR,eAAOJ,OAAO,CAACI,OAARJ,CAAgBQ,KAAhBR,CAAP;AAtBoB;;AAwBtBxjB,SAAG,CAACzJ,MAAD,EAAS6qB,IAAT,EAAeztB,KAAf,EAAsB;AACvBqwB,aAAK,CAAC5C,IAAD,CAAL4C,GAAcrwB,KAAdqwB;AACA,eAAOztB,MAAM,CAAC6qB,IAAD,CAAb;AACA,eAAO,IAAP;AACD;;AA5BqB,KAAjB,CAAP;AA8BD;;AACD,WAAStK,YAAT,CAAsBkN,KAAtB,EAA6E;AAAA,QAAhDjK,QAAgD,uEAArC;AAAC4K,gBAAU,EAAE,IAAb;AAAmBC,eAAS,EAAE;AAA9B,KAAqC;AAC3E,UAAM;AAAC5K,iBAAW,GAAGD,QAAQ,CAAC4K,UAAxB;AAAoCzK,gBAAU,GAAGH,QAAQ,CAAC6K,SAA1D;AAAqEC,cAAQ,GAAG9K,QAAQ,CAAC2K;AAAzF,QAAoGV,KAA1G;AACA,WAAO;AACLU,aAAO,EAAEG,QADJ;AAELF,gBAAU,EAAE3K,WAFP;AAGL4K,eAAS,EAAE1K,UAHN;AAIL4K,kBAAY,EAAE3rB,UAAU,CAAC6gB,WAAD,CAAV7gB,GAA0B6gB,WAA1B7gB,GAAwC,MAAM6gB,WAJvD;AAKL+K,iBAAW,EAAE5rB,UAAU,CAAC+gB,UAAD,CAAV/gB,GAAyB+gB,UAAzB/gB,GAAsC,MAAM+gB;AALpD,KAAP;AAOD;;AACD,QAAM8K,OAAO,GAAG,CAACC,MAAD,EAAS3L,IAAT,KAAkB2L,MAAM,GAAGA,MAAM,GAAGnsB,WAAW,CAACwgB,IAAD,CAAvB,GAAgCA,IAAxE;;AACA,QAAM4L,gBAAgB,GAAG,CAAC9D,IAAD,EAAOztB,KAAP,KAAiBS,QAAQ,CAACT,KAAD,CAARS,IAAmBgtB,IAAI,KAAK,UAA5BhtB,KACvCL,MAAM,CAAC0vB,cAAP1vB,CAAsBJ,KAAtBI,MAAiC,IAAjCA,IAAyCJ,KAAK,CAACshB,WAANthB,KAAsBI,MADxBK,CAA1C;;AAEA,WAASivB,OAAT,CAAiB9sB,MAAjB,EAAyB6qB,IAAzB,EAA+BM,OAA/B,EAAwC;AACtC,QAAI3tB,MAAM,CAACC,SAAPD,CAAiBwD,cAAjBxD,CAAgCG,IAAhCH,CAAqCwC,MAArCxC,EAA6CqtB,IAA7CrtB,CAAJ,EAAwD;AACtD,aAAOwC,MAAM,CAAC6qB,IAAD,CAAb;AACD;;AACD,UAAMztB,KAAK,GAAG+tB,OAAO,EAArB;AACAnrB,UAAM,CAAC6qB,IAAD,CAAN7qB,GAAe5C,KAAf4C;AACA,WAAO5C,KAAP;AACD;;AACD,WAAS8wB,mBAAT,CAA6BluB,MAA7B,EAAqC6qB,IAArC,EAA2CoD,QAA3C,EAAqD;AACnD,UAAM;AAACL,YAAD;AAASC,cAAT;AAAmBC,eAAnB;AAA8BvN,kBAAY,EAAEL;AAA5C,QAA2DlgB,MAAjE;AACA,QAAI5C,KAAK,GAAGwwB,MAAM,CAAC/C,IAAD,CAAlB;;AACA,QAAIjoB,UAAU,CAACxF,KAAD,CAAVwF,IAAqBsd,WAAW,CAACqO,YAAZrO,CAAyB2K,IAAzB3K,CAAzB,EAAyD;AACvD9iB,WAAK,GAAGwxB,kBAAkB,CAAC/D,IAAD,EAAOztB,KAAP,EAAc4C,MAAd,EAAsBiuB,QAAtB,CAA1B7wB;AACD;;AACD,QAAIC,OAAO,CAACD,KAAD,CAAPC,IAAkBD,KAAK,CAACgC,MAA5B,EAAoC;AAClChC,WAAK,GAAGyxB,aAAa,CAAChE,IAAD,EAAOztB,KAAP,EAAc4C,MAAd,EAAsBkgB,WAAW,CAACsO,WAAlC,CAArBpxB;AACD;;AACD,QAAIuxB,gBAAgB,CAAC9D,IAAD,EAAOztB,KAAP,CAApB,EAAmC;AACjCA,WAAK,GAAGowB,cAAc,CAACpwB,KAAD,EAAQywB,QAAR,EAAkBC,SAAS,IAAIA,SAAS,CAACjD,IAAD,CAAxC,EAAgD3K,WAAhD,CAAtB9iB;AACD;;AACD,WAAOA,KAAP;AACD;;AACD,WAASwxB,kBAAT,CAA4B/D,IAA5B,EAAkCztB,KAAlC,EAAyC4C,MAAzC,EAAiDiuB,QAAjD,EAA2D;AACzD,UAAM;AAACL,YAAD;AAASC,cAAT;AAAmBC,eAAnB;AAA8BC;AAA9B,QAAwC/tB,MAA9C;;AACA,QAAI+tB,MAAM,CAAC7qB,GAAP6qB,CAAWlD,IAAXkD,CAAJ,EAAsB;AACpB,YAAM,IAAIe,KAAJ,CAAU,yBAAyBxxB,KAAK,CAACsM,IAANtM,CAAWywB,MAAXzwB,EAAmByxB,IAAnBzxB,CAAwB,IAAxBA,CAAzB,GAAyD,IAAzD,GAAgEutB,IAA1E,CAAN;AACD;;AACDkD,UAAM,CAACpkB,GAAPokB,CAAWlD,IAAXkD;;AACA3wB,SAAK,GAAGA,KAAK,CAACywB,QAAD,EAAWC,SAAS,IAAIG,QAAxB,CAAb7wB;;AACA2wB,UAAM,CAACiB,MAAPjB,CAAclD,IAAdkD;;AACA,QAAIY,gBAAgB,CAAC9D,IAAD,EAAOztB,KAAP,CAApB,EAAmC;AACjCA,WAAK,GAAG6xB,iBAAiB,CAACrB,MAAM,CAACpB,OAAR,EAAiBoB,MAAjB,EAAyB/C,IAAzB,EAA+BztB,KAA/B,CAAzBA;AACD;;AACD,WAAOA,KAAP;AACD;;AACD,WAASyxB,aAAT,CAAuBhE,IAAvB,EAA6BztB,KAA7B,EAAoC4C,MAApC,EAA4CwuB,WAA5C,EAAyD;AACvD,UAAM;AAACZ,YAAD;AAASC,cAAT;AAAmBC,eAAnB;AAA8BvN,kBAAY,EAAEL;AAA5C,QAA2DlgB,MAAjE;;AACA,QAAI2C,OAAO,CAACkrB,QAAQ,CAACjuB,KAAV,CAAP+C,IAA2B6rB,WAAW,CAAC3D,IAAD,CAA1C,EAAkD;AAChDztB,WAAK,GAAGA,KAAK,CAACywB,QAAQ,CAACjuB,KAATiuB,GAAiBzwB,KAAK,CAACgC,MAAxB,CAAbhC;AADF,WAEO,IAAIS,QAAQ,CAACT,KAAK,CAAC,CAAD,CAAN,CAAZ,EAAwB;AAC7B,YAAM8xB,GAAG,GAAG9xB,KAAZ;;AACA,YAAM4uB,MAAM,GAAG4B,MAAM,CAACpB,OAAPoB,CAAeuB,MAAfvB,CAAsBxmB,CAAC,IAAIA,CAAC,KAAK8nB,GAAjCtB,CAAf;;AACAxwB,WAAK,GAAG,EAARA;;AACA,WAAK,MAAM6F,IAAX,IAAmBisB,GAAnB,EAAwB;AACtB,cAAMntB,QAAQ,GAAGktB,iBAAiB,CAACjD,MAAD,EAAS4B,MAAT,EAAiB/C,IAAjB,EAAuB5nB,IAAvB,CAAlC;AACA7F,aAAK,CAACkF,IAANlF,CAAWowB,cAAc,CAACzrB,QAAD,EAAW8rB,QAAX,EAAqBC,SAAS,IAAIA,SAAS,CAACjD,IAAD,CAA3C,EAAmD3K,WAAnD,CAAzB9iB;AACD;AACF;;AACD,WAAOA,KAAP;AACD;;AACD,WAASgyB,eAAT,CAAyBlE,QAAzB,EAAmCL,IAAnC,EAAyCztB,KAAzC,EAAgD;AAC9C,WAAOwF,UAAU,CAACsoB,QAAD,CAAVtoB,GAAuBsoB,QAAQ,CAACL,IAAD,EAAOztB,KAAP,CAA/BwF,GAA+CsoB,QAAtD;AACD;;AACD,QAAMmE,QAAQ,GAAG,CAAChvB,GAAD,EAAMivB,MAAN,KAAiBjvB,GAAG,KAAK,IAARA,GAAeivB,MAAfjvB,GAC9B,OAAOA,GAAP,KAAe,QAAf,GAA0BwB,gBAAgB,CAACytB,MAAD,EAASjvB,GAAT,CAA1C,GAA0DgB,SAD9D;;AAEA,WAASkuB,SAAT,CAAmB9lB,GAAnB,EAAwB+lB,YAAxB,EAAsCnvB,GAAtC,EAA2CovB,cAA3C,EAA2DryB,KAA3D,EAAkE;AAChE,SAAK,MAAMkyB,MAAX,IAAqBE,YAArB,EAAmC;AACjC,YAAMtuB,KAAK,GAAGmuB,QAAQ,CAAChvB,GAAD,EAAMivB,MAAN,CAAtB;;AACA,UAAIpuB,KAAJ,EAAW;AACTuI,WAAG,CAACE,GAAJF,CAAQvI,KAARuI;AACA,cAAMyhB,QAAQ,GAAGkE,eAAe,CAACluB,KAAK,CAAC0iB,SAAP,EAAkBvjB,GAAlB,EAAuBjD,KAAvB,CAAhC;;AACA,YAAIuF,OAAO,CAACuoB,QAAD,CAAPvoB,IAAqBuoB,QAAQ,KAAK7qB,GAAlCsC,IAAyCuoB,QAAQ,KAAKuE,cAA1D,EAA0E;AACxE,iBAAOvE,QAAP;AACD;AALH,aAMO,IAAIhqB,KAAK,KAAK,KAAVA,IAAmByB,OAAO,CAAC8sB,cAAD,CAA1BvuB,IAA8Cb,GAAG,KAAKovB,cAA1D,EAA0E;AAC/E,eAAO,IAAP;AACD;AACF;;AACD,WAAO,KAAP;AACD;;AACD,WAASR,iBAAT,CAA2BO,YAA3B,EAAyCztB,QAAzC,EAAmD8oB,IAAnD,EAAyDztB,KAAzD,EAAgE;AAC9D,UAAM8uB,UAAU,GAAGnqB,QAAQ,CAAC0qB,WAA5B;AACA,UAAMvB,QAAQ,GAAGkE,eAAe,CAACrtB,QAAQ,CAAC6hB,SAAV,EAAqBiH,IAArB,EAA2BztB,KAA3B,CAAhC;AACA,UAAMsyB,SAAS,GAAG,CAAC,GAAGF,YAAJ,EAAkB,GAAGtD,UAArB,CAAlB;AACA,UAAMziB,GAAG,GAAG,IAAIC,GAAJ,EAAZ;AACAD,OAAG,CAACE,GAAJF,CAAQrM,KAARqM;AACA,QAAIpJ,GAAG,GAAGsvB,gBAAgB,CAAClmB,GAAD,EAAMimB,SAAN,EAAiB7E,IAAjB,EAAuBK,QAAQ,IAAIL,IAAnC,EAAyCztB,KAAzC,CAA1B;;AACA,QAAIiD,GAAG,KAAK,IAAZ,EAAkB;AAChB,aAAO,KAAP;AACD;;AACD,QAAIsC,OAAO,CAACuoB,QAAD,CAAPvoB,IAAqBuoB,QAAQ,KAAKL,IAAtC,EAA4C;AAC1CxqB,SAAG,GAAGsvB,gBAAgB,CAAClmB,GAAD,EAAMimB,SAAN,EAAiBxE,QAAjB,EAA2B7qB,GAA3B,EAAgCjD,KAAhC,CAAtBiD;;AACA,UAAIA,GAAG,KAAK,IAAZ,EAAkB;AAChB,eAAO,KAAP;AACD;AACF;;AACD,WAAO0rB,eAAe,CAACzuB,KAAK,CAACsM,IAANtM,CAAWmM,GAAXnM,CAAD,EAAkB,CAAC,EAAD,CAAlB,EAAwB4uB,UAAxB,EAAoChB,QAApC,EACpB,MAAM0E,YAAY,CAAC7tB,QAAD,EAAW8oB,IAAX,EAAiBztB,KAAjB,CADE,CAAtB;AAED;;AACD,WAASuyB,gBAAT,CAA0BlmB,GAA1B,EAA+BimB,SAA/B,EAA0CrvB,GAA1C,EAA+C6qB,QAA/C,EAAyDjoB,IAAzD,EAA+D;AAC7D,WAAO5C,GAAP,EAAY;AACVA,SAAG,GAAGkvB,SAAS,CAAC9lB,GAAD,EAAMimB,SAAN,EAAiBrvB,GAAjB,EAAsB6qB,QAAtB,EAAgCjoB,IAAhC,CAAf5C;AACD;;AACD,WAAOA,GAAP;AACD;;AACD,WAASuvB,YAAT,CAAsB7tB,QAAtB,EAAgC8oB,IAAhC,EAAsCztB,KAAtC,EAA6C;AAC3C,UAAMkyB,MAAM,GAAGvtB,QAAQ,CAAC2qB,UAAT3qB,EAAf;;AACA,QAAI,EAAE8oB,IAAI,IAAIyE,MAAV,CAAJ,EAAuB;AACrBA,YAAM,CAACzE,IAAD,CAANyE,GAAe,EAAfA;AACD;;AACD,UAAMtvB,MAAM,GAAGsvB,MAAM,CAACzE,IAAD,CAArB;;AACA,QAAIxtB,OAAO,CAAC2C,MAAD,CAAP3C,IAAmBQ,QAAQ,CAACT,KAAD,CAA/B,EAAwC;AACtC,aAAOA,KAAP;AACD;;AACD,WAAO4C,MAAP;AACD;;AACD,WAAS+sB,oBAAT,CAA8BlC,IAA9B,EAAoCoB,QAApC,EAA8CD,MAA9C,EAAsDyB,KAAtD,EAA6D;AAC3D,QAAIrwB,KAAJ;;AACA,SAAK,MAAMsxB,MAAX,IAAqBzC,QAArB,EAA+B;AAC7B7uB,WAAK,GAAGgvB,QAAQ,CAACqC,OAAO,CAACC,MAAD,EAAS7D,IAAT,CAAR,EAAwBmB,MAAxB,CAAhB5uB;;AACA,UAAIuF,OAAO,CAACvF,KAAD,CAAX,EAAoB;AAClB,eAAOuxB,gBAAgB,CAAC9D,IAAD,EAAOztB,KAAP,CAAhBuxB,GACHM,iBAAiB,CAACjD,MAAD,EAASyB,KAAT,EAAgB5C,IAAhB,EAAsBztB,KAAtB,CADduxB,GAEHvxB,KAFJ;AAGD;AACF;AACF;;AACD,WAASgvB,QAAT,CAAkB/rB,GAAlB,EAAuB2rB,MAAvB,EAA+B;AAC7B,SAAK,MAAM9qB,KAAX,IAAoB8qB,MAApB,EAA4B;AAC1B,UAAI,CAAC9qB,KAAL,EAAY;AACV;AACD;;AACD,YAAM9D,KAAK,GAAG8D,KAAK,CAACb,GAAD,CAAnB;;AACA,UAAIsC,OAAO,CAACvF,KAAD,CAAX,EAAoB;AAClB,eAAOA,KAAP;AACD;AACF;AACF;;AACD,WAAS+vB,oBAAT,CAA8BntB,MAA9B,EAAsC;AACpC,QAAIb,IAAI,GAAGa,MAAM,CAAC6sB,KAAlB;;AACA,QAAI,CAAC1tB,IAAL,EAAW;AACTA,UAAI,GAAGa,MAAM,CAAC6sB,KAAP7sB,GAAe6vB,wBAAwB,CAAC7vB,MAAM,CAACwsB,OAAR,CAA9CrtB;AACD;;AACD,WAAOA,IAAP;AACD;;AACD,WAAS0wB,wBAAT,CAAkC7D,MAAlC,EAA0C;AACxC,UAAMviB,GAAG,GAAG,IAAIC,GAAJ,EAAZ;;AACA,SAAK,MAAMxI,KAAX,IAAoB8qB,MAApB,EAA4B;AAC1B,WAAK,MAAM3rB,GAAX,IAAkB7C,MAAM,CAAC2B,IAAP3B,CAAY0D,KAAZ1D,EAAmB2xB,MAAnB3xB,CAA0B2C,CAAC,IAAI,CAACA,CAAC,CAACujB,UAAFvjB,CAAa,GAAbA,CAAhC3C,CAAlB,EAAsE;AACpEiM,WAAG,CAACE,GAAJF,CAAQpJ,GAARoJ;AACD;AACF;;AACD,WAAOnM,KAAK,CAACsM,IAANtM,CAAWmM,GAAXnM,CAAP;AACD;;AACD,WAASwyB,2BAAT,CAAqCvkB,IAArC,EAA2CwY,IAA3C,EAAiD9c,KAAjD,EAAwD0E,KAAxD,EAA+D;AAC7D,UAAM;AAACE;AAAD,QAAWN,IAAjB;AACA,UAAM;AAAClL,SAAG,GAAG;AAAP,QAAc,KAAK0vB,QAAzB;AACA,UAAMC,MAAM,GAAG,IAAI1yB,KAAJ,CAAUqO,KAAV,CAAf;AACA,QAAI1M,CAAJ,EAAOO,IAAP,EAAaI,KAAb,EAAoBqD,IAApB;;AACA,SAAKhE,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGmM,KAAnB,EAA0B1M,CAAC,GAAGO,IAA9B,EAAoC,EAAEP,CAAtC,EAAyC;AACvCW,WAAK,GAAGX,CAAC,GAAGgI,KAAZrH;AACAqD,UAAI,GAAG8gB,IAAI,CAACnkB,KAAD,CAAXqD;AACA+sB,YAAM,CAAC/wB,CAAD,CAAN+wB,GAAY;AACVpf,SAAC,EAAE/E,MAAM,CAACokB,KAAPpkB,CAAahK,gBAAgB,CAACoB,IAAD,EAAO5C,GAAP,CAA7BwL,EAA0CjM,KAA1CiM;AADO,OAAZmkB;AAGD;;AACD,WAAOA,MAAP;AACD;;AAED,QAAME,OAAO,GAAGnyB,MAAM,CAACmyB,OAAPnyB,IAAkB,KAAlC;;AACA,QAAMoyB,QAAQ,GAAG,CAAC3kB,MAAD,EAASvM,CAAT,KAAeA,CAAC,GAAGuM,MAAM,CAACpM,MAAXH,IAAqB,CAACuM,MAAM,CAACvM,CAAD,CAANuM,CAAU4kB,IAAhCnxB,IAAwCuM,MAAM,CAACvM,CAAD,CAA9E;;AACA,QAAMoxB,YAAY,GAAIzO,SAAD,IAAeA,SAAS,KAAK,GAAdA,GAAoB,GAApBA,GAA0B,GAA9D;;AACA,WAAS0O,WAAT,CAAqBC,UAArB,EAAiCC,WAAjC,EAA8CC,UAA9C,EAA0DzjB,CAA1D,EAA6D;AAC3D,UAAM7L,QAAQ,GAAGovB,UAAU,CAACH,IAAXG,GAAkBC,WAAlBD,GAAgCA,UAAjD;AACA,UAAMnvB,OAAO,GAAGovB,WAAhB;AACA,UAAME,IAAI,GAAGD,UAAU,CAACL,IAAXK,GAAkBD,WAAlBC,GAAgCA,UAA7C;AACA,UAAME,GAAG,GAAGhqB,qBAAqB,CAACvF,OAAD,EAAUD,QAAV,CAAjC;AACA,UAAMyvB,GAAG,GAAGjqB,qBAAqB,CAAC+pB,IAAD,EAAOtvB,OAAP,CAAjC;AACA,QAAIyvB,GAAG,GAAGF,GAAG,IAAIA,GAAG,GAAGC,GAAV,CAAb;AACA,QAAIE,GAAG,GAAGF,GAAG,IAAID,GAAG,GAAGC,GAAV,CAAb;AACAC,OAAG,GAAG3rB,KAAK,CAAC2rB,GAAD,CAAL3rB,GAAa,CAAbA,GAAiB2rB,GAAvBA;AACAC,OAAG,GAAG5rB,KAAK,CAAC4rB,GAAD,CAAL5rB,GAAa,CAAbA,GAAiB4rB,GAAvBA;AACA,UAAMC,EAAE,GAAG/jB,CAAC,GAAG6jB,GAAf;AACA,UAAMG,EAAE,GAAGhkB,CAAC,GAAG8jB,GAAf;AACA,WAAO;AACL3vB,cAAQ,EAAE;AACRO,SAAC,EAAEN,OAAO,CAACM,CAARN,GAAY2vB,EAAE,IAAIL,IAAI,CAAChvB,CAALgvB,GAASvvB,QAAQ,CAACO,CAAtB,CADT;AAERE,SAAC,EAAER,OAAO,CAACQ,CAARR,GAAY2vB,EAAE,IAAIL,IAAI,CAAC9uB,CAAL8uB,GAASvvB,QAAQ,CAACS,CAAtB;AAFT,OADL;AAKL8uB,UAAI,EAAE;AACJhvB,SAAC,EAAEN,OAAO,CAACM,CAARN,GAAY4vB,EAAE,IAAIN,IAAI,CAAChvB,CAALgvB,GAASvvB,QAAQ,CAACO,CAAtB,CADb;AAEJE,SAAC,EAAER,OAAO,CAACQ,CAARR,GAAY4vB,EAAE,IAAIN,IAAI,CAAC9uB,CAAL8uB,GAASvvB,QAAQ,CAACS,CAAtB;AAFb;AALD,KAAP;AAUD;;AACD,WAASqvB,cAAT,CAAwBzlB,MAAxB,EAAgC0lB,MAAhC,EAAwCC,EAAxC,EAA4C;AAC1C,UAAMC,SAAS,GAAG5lB,MAAM,CAACpM,MAAzB;AACA,QAAIiyB,MAAJ,EAAYC,KAAZ,EAAmBC,IAAnB,EAAyBC,gBAAzB,EAA2CC,YAA3C;AACA,QAAIC,UAAU,GAAGvB,QAAQ,CAAC3kB,MAAD,EAAS,CAAT,CAAzB;;AACA,SAAK,IAAIvM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmyB,SAAS,GAAG,CAAhC,EAAmC,EAAEnyB,CAArC,EAAwC;AACtCwyB,kBAAY,GAAGC,UAAfD;AACAC,gBAAU,GAAGvB,QAAQ,CAAC3kB,MAAD,EAASvM,CAAC,GAAG,CAAb,CAArByyB;;AACA,UAAI,CAACD,YAAD,IAAiB,CAACC,UAAtB,EAAkC;AAChC;AACD;;AACD,UAAIrtB,YAAY,CAAC6sB,MAAM,CAACjyB,CAAD,CAAP,EAAY,CAAZ,EAAeixB,OAAf,CAAhB,EAAyC;AACvCiB,UAAE,CAAClyB,CAAD,CAAFkyB,GAAQA,EAAE,CAAClyB,CAAC,GAAG,CAAL,CAAFkyB,GAAY,CAApBA;AACA;AACD;;AACDE,YAAM,GAAGF,EAAE,CAAClyB,CAAD,CAAFkyB,GAAQD,MAAM,CAACjyB,CAAD,CAAvBoyB;AACAC,WAAK,GAAGH,EAAE,CAAClyB,CAAC,GAAG,CAAL,CAAFkyB,GAAYD,MAAM,CAACjyB,CAAD,CAA1BqyB;AACAE,sBAAgB,GAAGluB,IAAI,CAACiB,GAALjB,CAAS+tB,MAAT/tB,EAAiB,CAAjBA,IAAsBA,IAAI,CAACiB,GAALjB,CAASguB,KAAThuB,EAAgB,CAAhBA,CAAzCkuB;;AACA,UAAIA,gBAAgB,IAAI,CAAxB,EAA2B;AACzB;AACD;;AACDD,UAAI,GAAG,IAAIjuB,IAAI,CAACuB,IAALvB,CAAUkuB,gBAAVluB,CAAXiuB;AACAJ,QAAE,CAAClyB,CAAD,CAAFkyB,GAAQE,MAAM,GAAGE,IAATF,GAAgBH,MAAM,CAACjyB,CAAD,CAA9BkyB;AACAA,QAAE,CAAClyB,CAAC,GAAG,CAAL,CAAFkyB,GAAYG,KAAK,GAAGC,IAARD,GAAeJ,MAAM,CAACjyB,CAAD,CAAjCkyB;AACD;AACF;;AACD,WAASQ,eAAT,CAAyBnmB,MAAzB,EAAiC2lB,EAAjC,EAAsD;AAAA,QAAjBvP,SAAiB,uEAAL,GAAK;AACpD,UAAMgQ,SAAS,GAAGvB,YAAY,CAACzO,SAAD,CAA9B;AACA,UAAMwP,SAAS,GAAG5lB,MAAM,CAACpM,MAAzB;AACA,QAAIyyB,KAAJ,EAAWC,WAAX,EAAwBL,YAAxB;AACA,QAAIC,UAAU,GAAGvB,QAAQ,CAAC3kB,MAAD,EAAS,CAAT,CAAzB;;AACA,SAAK,IAAIvM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmyB,SAApB,EAA+B,EAAEnyB,CAAjC,EAAoC;AAClC6yB,iBAAW,GAAGL,YAAdK;AACAL,kBAAY,GAAGC,UAAfD;AACAC,gBAAU,GAAGvB,QAAQ,CAAC3kB,MAAD,EAASvM,CAAC,GAAG,CAAb,CAArByyB;;AACA,UAAI,CAACD,YAAL,EAAmB;AACjB;AACD;;AACD,YAAMM,MAAM,GAAGN,YAAY,CAAC7P,SAAD,CAA3B;AACA,YAAMoQ,MAAM,GAAGP,YAAY,CAACG,SAAD,CAA3B;;AACA,UAAIE,WAAJ,EAAiB;AACfD,aAAK,GAAG,CAACE,MAAM,GAAGD,WAAW,CAAClQ,SAAD,CAArB,IAAoC,CAA5CiQ;AACAJ,oBAAY,cAAO7P,SAAP,EAAZ6P,GAAkCM,MAAM,GAAGF,KAA3CJ;AACAA,oBAAY,cAAOG,SAAP,EAAZH,GAAkCO,MAAM,GAAGH,KAAK,GAAGV,EAAE,CAAClyB,CAAD,CAArDwyB;AACD;;AACD,UAAIC,UAAJ,EAAgB;AACdG,aAAK,GAAG,CAACH,UAAU,CAAC9P,SAAD,CAAV8P,GAAwBK,MAAzB,IAAmC,CAA3CF;AACAJ,oBAAY,cAAO7P,SAAP,EAAZ6P,GAAkCM,MAAM,GAAGF,KAA3CJ;AACAA,oBAAY,cAAOG,SAAP,EAAZH,GAAkCO,MAAM,GAAGH,KAAK,GAAGV,EAAE,CAAClyB,CAAD,CAArDwyB;AACD;AACF;AACF;;AACD,WAASQ,mBAAT,CAA6BzmB,MAA7B,EAAsD;AAAA,QAAjBoW,SAAiB,uEAAL,GAAK;AACpD,UAAMgQ,SAAS,GAAGvB,YAAY,CAACzO,SAAD,CAA9B;AACA,UAAMwP,SAAS,GAAG5lB,MAAM,CAACpM,MAAzB;AACA,UAAM8xB,MAAM,GAAG5zB,KAAK,CAAC8zB,SAAD,CAAL9zB,CAAiBupB,IAAjBvpB,CAAsB,CAAtBA,CAAf;AACA,UAAM6zB,EAAE,GAAG7zB,KAAK,CAAC8zB,SAAD,CAAhB;AACA,QAAInyB,CAAJ,EAAO6yB,WAAP,EAAoBL,YAApB;AACA,QAAIC,UAAU,GAAGvB,QAAQ,CAAC3kB,MAAD,EAAS,CAAT,CAAzB;;AACA,SAAKvM,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGmyB,SAAhB,EAA2B,EAAEnyB,CAA7B,EAAgC;AAC9B6yB,iBAAW,GAAGL,YAAdK;AACAL,kBAAY,GAAGC,UAAfD;AACAC,gBAAU,GAAGvB,QAAQ,CAAC3kB,MAAD,EAASvM,CAAC,GAAG,CAAb,CAArByyB;;AACA,UAAI,CAACD,YAAL,EAAmB;AACjB;AACD;;AACD,UAAIC,UAAJ,EAAgB;AACd,cAAMQ,UAAU,GAAGR,UAAU,CAAC9P,SAAD,CAAV8P,GAAwBD,YAAY,CAAC7P,SAAD,CAAvD;AACAsP,cAAM,CAACjyB,CAAD,CAANiyB,GAAYgB,UAAU,KAAK,CAAfA,GAAmB,CAACR,UAAU,CAACE,SAAD,CAAVF,GAAwBD,YAAY,CAACG,SAAD,CAArC,IAAoDM,UAAvEA,GAAoF,CAAhGhB;AACD;;AACDC,QAAE,CAAClyB,CAAD,CAAFkyB,GAAQ,CAACW,WAAD,GAAeZ,MAAM,CAACjyB,CAAD,CAArB,GACJ,CAACyyB,UAAD,GAAcR,MAAM,CAACjyB,CAAC,GAAG,CAAL,CAApB,GACC+E,IAAI,CAACktB,MAAM,CAACjyB,CAAC,GAAG,CAAL,CAAP,CAAJ+E,KAAwBA,IAAI,CAACktB,MAAM,CAACjyB,CAAD,CAAP,CAA5B+E,GAA2C,CAA3CA,GACD,CAACktB,MAAM,CAACjyB,CAAC,GAAG,CAAL,CAANiyB,GAAgBA,MAAM,CAACjyB,CAAD,CAAvB,IAA8B,CAHlCkyB;AAID;;AACDF,kBAAc,CAACzlB,MAAD,EAAS0lB,MAAT,EAAiBC,EAAjB,CAAdF;AACAU,mBAAe,CAACnmB,MAAD,EAAS2lB,EAAT,EAAavP,SAAb,CAAf+P;AACD;;AACD,WAASQ,eAAT,CAAyBC,EAAzB,EAA6B1sB,GAA7B,EAAkCC,GAAlC,EAAuC;AACrC,WAAOrC,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAACoC,GAALpC,CAAS8uB,EAAT9uB,EAAaqC,GAAbrC,CAATA,EAA4BoC,GAA5BpC,CAAP;AACD;;AACD,WAAS+uB,eAAT,CAAyB7mB,MAAzB,EAAiC0b,IAAjC,EAAuC;AACrC,QAAIjoB,CAAJ,EAAOO,IAAP,EAAaynB,KAAb,EAAoBqL,MAApB,EAA4BC,UAA5B;;AACA,QAAIC,UAAU,GAAGxL,cAAc,CAACxb,MAAM,CAAC,CAAD,CAAP,EAAY0b,IAAZ,CAA/B;;AACA,SAAKjoB,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgM,MAAM,CAACpM,MAA1B,EAAkCH,CAAC,GAAGO,IAAtC,EAA4C,EAAEP,CAA9C,EAAiD;AAC/CszB,gBAAU,GAAGD,MAAbC;AACAD,YAAM,GAAGE,UAATF;AACAE,gBAAU,GAAGvzB,CAAC,GAAGO,IAAI,GAAG,CAAXP,IAAgB+nB,cAAc,CAACxb,MAAM,CAACvM,CAAC,GAAG,CAAL,CAAP,EAAgBioB,IAAhB,CAA3CsL;;AACA,UAAI,CAACF,MAAL,EAAa;AACX;AACD;;AACDrL,WAAK,GAAGzb,MAAM,CAACvM,CAAD,CAAdgoB;;AACA,UAAIsL,UAAJ,EAAgB;AACdtL,aAAK,CAACa,IAANb,GAAakL,eAAe,CAAClL,KAAK,CAACa,IAAP,EAAaZ,IAAI,CAAChc,IAAlB,EAAwBgc,IAAI,CAAC/b,KAA7B,CAA5B8b;AACAA,aAAK,CAACe,IAANf,GAAakL,eAAe,CAAClL,KAAK,CAACe,IAAP,EAAad,IAAI,CAACE,GAAlB,EAAuBF,IAAI,CAACG,MAA5B,CAA5BJ;AACD;;AACD,UAAIuL,UAAJ,EAAgB;AACdvL,aAAK,CAACc,IAANd,GAAakL,eAAe,CAAClL,KAAK,CAACc,IAAP,EAAab,IAAI,CAAChc,IAAlB,EAAwBgc,IAAI,CAAC/b,KAA7B,CAA5B8b;AACAA,aAAK,CAACgB,IAANhB,GAAakL,eAAe,CAAClL,KAAK,CAACgB,IAAP,EAAaf,IAAI,CAACE,GAAlB,EAAuBF,IAAI,CAACG,MAA5B,CAA5BJ;AACD;AACF;AACF;;AACD,WAASwL,0BAAT,CAAoCjnB,MAApC,EAA4ChL,OAA5C,EAAqD0mB,IAArD,EAA2DwL,IAA3D,EAAiE9Q,SAAjE,EAA4E;AAC1E,QAAI3iB,CAAJ,EAAOO,IAAP,EAAaynB,KAAb,EAAoB0L,aAApB;;AACA,QAAInyB,OAAO,CAACoyB,QAAZ,EAAsB;AACpBpnB,YAAM,GAAGA,MAAM,CAAC2jB,MAAP3jB,CAAe4mB,EAAD,IAAQ,CAACA,EAAE,CAAChC,IAA1B5kB,CAATA;AACD;;AACD,QAAIhL,OAAO,CAACqyB,sBAARryB,KAAmC,UAAvC,EAAmD;AACjDyxB,yBAAmB,CAACzmB,MAAD,EAASoW,SAAT,CAAnBqQ;AADF,WAEO;AACL,UAAIa,IAAI,GAAGJ,IAAI,GAAGlnB,MAAM,CAACA,MAAM,CAACpM,MAAPoM,GAAgB,CAAjB,CAAT,GAA+BA,MAAM,CAAC,CAAD,CAApD;;AACA,WAAKvM,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgM,MAAM,CAACpM,MAA1B,EAAkCH,CAAC,GAAGO,IAAtC,EAA4C,EAAEP,CAA9C,EAAiD;AAC/CgoB,aAAK,GAAGzb,MAAM,CAACvM,CAAD,CAAdgoB;AACA0L,qBAAa,GAAGrC,WAAW,CACzBwC,IADyB,EAEzB7L,KAFyB,EAGzBzb,MAAM,CAAClI,IAAI,CAACoC,GAALpC,CAASrE,CAAC,GAAG,CAAbqE,EAAgB9D,IAAI,IAAIkzB,IAAI,GAAG,CAAH,GAAO,CAAf,CAApBpvB,IAAyC9D,IAA1C,CAHmB,EAIzBgB,OAAO,CAACuyB,OAJiB,CAA3BJ;AAMA1L,aAAK,CAACa,IAANb,GAAa0L,aAAa,CAACxxB,QAAdwxB,CAAuBjxB,CAApCulB;AACAA,aAAK,CAACe,IAANf,GAAa0L,aAAa,CAACxxB,QAAdwxB,CAAuB/wB,CAApCqlB;AACAA,aAAK,CAACc,IAANd,GAAa0L,aAAa,CAACjC,IAAdiC,CAAmBjxB,CAAhCulB;AACAA,aAAK,CAACgB,IAANhB,GAAa0L,aAAa,CAACjC,IAAdiC,CAAmB/wB,CAAhCqlB;AACA6L,YAAI,GAAG7L,KAAP6L;AACD;AACF;;AACD,QAAItyB,OAAO,CAAC6xB,eAAZ,EAA6B;AAC3BA,qBAAe,CAAC7mB,MAAD,EAAS0b,IAAT,CAAfmL;AACD;AACF;;AAED,WAASW,eAAT,GAA2B;AACzB,WAAO,OAAO9oB,MAAP,KAAkB,WAAlB,IAAiC,OAAO+oB,QAAP,KAAoB,WAA5D;AACD;;AACD,WAASC,cAAT,CAAwBC,OAAxB,EAAiC;AAC/B,QAAI7D,MAAM,GAAG6D,OAAO,CAACC,UAArB;;AACA,QAAI9D,MAAM,IAAIA,MAAM,CAAC5xB,QAAP4xB,OAAsB,qBAApC,EAA2D;AACzDA,YAAM,GAAGA,MAAM,CAAC+D,IAAhB/D;AACD;;AACD,WAAOA,MAAP;AACD;;AACD,WAASgE,aAAT,CAAuBC,UAAvB,EAAmCnT,IAAnC,EAAyCoT,cAAzC,EAAyD;AACvD,QAAIC,aAAJ;;AACA,QAAI,OAAOF,UAAP,KAAsB,QAA1B,EAAoC;AAClCE,mBAAa,GAAGnW,QAAQ,CAACiW,UAAD,EAAa,EAAb,CAAxBE;;AACA,UAAIF,UAAU,CAACjzB,OAAXizB,CAAmB,GAAnBA,MAA4B,CAAC,CAAjC,EAAoC;AAClCE,qBAAa,GAAGA,aAAa,GAAG,GAAhBA,GAAsBrT,IAAI,CAACgT,UAALhT,CAAgBoT,cAAhBpT,CAAtCqT;AACD;AAJH,WAKO;AACLA,mBAAa,GAAGF,UAAhBE;AACD;;AACD,WAAOA,aAAP;AACD;;AACD,QAAMC,gBAAgB,GAAIC,OAAD,IAAazpB,MAAM,CAACwpB,gBAAPxpB,CAAwBypB,OAAxBzpB,EAAiC,IAAjCA,CAAtC;;AACA,WAAS0pB,QAAT,CAAkBC,EAAlB,EAAsBpuB,QAAtB,EAAgC;AAC9B,WAAOiuB,gBAAgB,CAACG,EAAD,CAAhBH,CAAqBI,gBAArBJ,CAAsCjuB,QAAtCiuB,CAAP;AACD;;AACD,QAAMK,SAAS,GAAG,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,EAA2B,MAA3B,CAAlB;;AACA,WAASC,kBAAT,CAA4BC,MAA5B,EAAoC5S,KAApC,EAA2C6S,MAA3C,EAAmD;AACjD,UAAMtvB,MAAM,GAAG,EAAf;AACAsvB,UAAM,GAAGA,MAAM,GAAG,MAAMA,MAAT,GAAkB,EAAjCA;;AACA,SAAK,IAAIj1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,YAAMk1B,GAAG,GAAGJ,SAAS,CAAC90B,CAAD,CAArB;AACA2F,YAAM,CAACuvB,GAAD,CAANvvB,GAAcrG,UAAU,CAAC01B,MAAM,CAAC5S,KAAK,GAAG,GAARA,GAAc8S,GAAd9S,GAAoB6S,MAArB,CAAP,CAAV31B,IAAkD,CAAhEqG;AACD;;AACDA,UAAM,CAACyf,KAAPzf,GAAeA,MAAM,CAACsG,IAAPtG,GAAcA,MAAM,CAACuG,KAApCvG;AACAA,UAAM,CAAC6gB,MAAP7gB,GAAgBA,MAAM,CAACwiB,GAAPxiB,GAAaA,MAAM,CAACyiB,MAApCziB;AACA,WAAOA,MAAP;AACD;;AACD,QAAMwvB,YAAY,GAAG,CAAC1yB,CAAD,EAAIE,CAAJ,EAAO5B,MAAP,KAAkB,CAAC0B,CAAC,GAAG,CAAJA,IAASE,CAAC,GAAG,CAAd,MAAqB,CAAC5B,MAAD,IAAW,CAACA,MAAM,CAACq0B,UAAxC,CAAvC;;AACA,WAASC,iBAAT,CAA2BlxB,CAA3B,EAA8BiiB,MAA9B,EAAsC;AAAAkP;;AACpC,UAAMC,OAAO,GAAGpxB,CAAC,CAACoxB,OAAlB;AACA,UAAM10B,MAAM,GAAG00B,OAAO,IAAIA,OAAO,CAACp1B,MAAnBo1B,GAA4BA,OAAO,CAAC,CAAD,CAAnCA,GAAyCpxB,CAAxD;AACA,UAAM;AAACqxB,aAAD;AAAUC;AAAV,QAAqB50B,MAA3B;AACA,QAAI60B,GAAG,GAAG,KAAV;AACA,QAAIjzB,CAAJ,EAAOE,CAAP;;AACA,QAAIwyB,YAAY,CAACK,OAAD,EAAUC,OAAV,EAAmBtxB,CAAC,CAACpD,MAArB,CAAhB,EAA8C;AAC5C0B,OAAC,GAAG+yB,OAAJ/yB;AACAE,OAAC,GAAG8yB,OAAJ9yB;AAFF,WAGO;AACL,YAAMglB,IAAI,GAAGvB,MAAM,CAACuP,qBAAPvP,EAAb;AACA3jB,OAAC,GAAG5B,MAAM,CAAC+0B,OAAP/0B,GAAiB8mB,IAAI,CAAC1b,IAA1BxJ;AACAE,OAAC,GAAG9B,MAAM,CAACg1B,OAAPh1B,GAAiB8mB,IAAI,CAACQ,GAA1BxlB;AACA+yB,SAAG,GAAG,IAANA;AACD;;AACD,WAAO;AAACjzB,OAAD;AAAIE,OAAJ;AAAO+yB;AAAP,KAAP;AACD;;KAhBQL,mB;YAMHF;;;AAWN,WAASW,mBAAT,CAA6BC,GAA7B,EAAkClU,KAAlC,EAAyC;AACvC,QAAI,YAAYkU,GAAhB,EAAqB;AACnB,aAAOA,GAAP;AACD;;AACD,UAAM;AAAC3P,YAAD;AAASH;AAAT,QAAoCpE,KAA1C;AACA,UAAMO,KAAK,GAAGqS,gBAAgB,CAACrO,MAAD,CAA9B;AACA,UAAM4P,SAAS,GAAG5T,KAAK,CAAC6T,SAAN7T,KAAoB,YAAtC;AACA,UAAM8T,QAAQ,GAAGnB,kBAAkB,CAAC3S,KAAD,EAAQ,SAAR,CAAnC;AACA,UAAM+T,OAAO,GAAGpB,kBAAkB,CAAC3S,KAAD,EAAQ,QAAR,EAAkB,OAAlB,CAAlC;AACA,UAAM;AAAC3f,OAAD;AAAIE,OAAJ;AAAO+yB;AAAP,QAAcL,iBAAiB,CAACU,GAAD,EAAM3P,MAAN,CAArC;AACA,UAAMO,OAAO,GAAGuP,QAAQ,CAACjqB,IAATiqB,IAAiBR,GAAG,IAAIS,OAAO,CAAClqB,IAAhCiqB,CAAhB;AACA,UAAMtP,OAAO,GAAGsP,QAAQ,CAAC/N,GAAT+N,IAAgBR,GAAG,IAAIS,OAAO,CAAChO,GAA/B+N,CAAhB;AACA,QAAI;AAAC9Q,WAAD;AAAQoB;AAAR,QAAkB3E,KAAtB;;AACA,QAAImU,SAAJ,EAAe;AACb5Q,WAAK,IAAI8Q,QAAQ,CAAC9Q,KAAT8Q,GAAiBC,OAAO,CAAC/Q,KAAlCA;AACAoB,YAAM,IAAI0P,QAAQ,CAAC1P,MAAT0P,GAAkBC,OAAO,CAAC3P,MAApCA;AACD;;AACD,WAAO;AACL/jB,OAAC,EAAE4B,IAAI,CAACc,KAALd,CAAW,CAAC5B,CAAC,GAAGkkB,OAAL,IAAgBvB,KAAhB,GAAwBgB,MAAM,CAAChB,KAA/B,GAAuCa,uBAAlD5hB,CADE;AAEL1B,OAAC,EAAE0B,IAAI,CAACc,KAALd,CAAW,CAAC1B,CAAC,GAAGikB,OAAL,IAAgBJ,MAAhB,GAAyBJ,MAAM,CAACI,MAAhC,GAAyCP,uBAApD5hB;AAFE,KAAP;AAID;;AACD,WAAS+xB,gBAAT,CAA0BhQ,MAA1B,EAAkChB,KAAlC,EAAyCoB,MAAzC,EAAiD;AAC/C,QAAIoD,QAAJ,EAAcyM,SAAd;;AACA,QAAIjR,KAAK,KAAKhjB,SAAVgjB,IAAuBoB,MAAM,KAAKpkB,SAAtC,EAAiD;AAC/C,YAAMk0B,SAAS,GAAGrC,cAAc,CAAC7N,MAAD,CAAhC;;AACA,UAAI,CAACkQ,SAAL,EAAgB;AACdlR,aAAK,GAAGgB,MAAM,CAACmQ,WAAfnR;AACAoB,cAAM,GAAGJ,MAAM,CAACoQ,YAAhBhQ;AAFF,aAGO;AACL,cAAMmB,IAAI,GAAG2O,SAAS,CAACX,qBAAVW,EAAb;AACA,cAAMG,cAAc,GAAGhC,gBAAgB,CAAC6B,SAAD,CAAvC;AACA,cAAMI,eAAe,GAAG3B,kBAAkB,CAAC0B,cAAD,EAAiB,QAAjB,EAA2B,OAA3B,CAA1C;AACA,cAAME,gBAAgB,GAAG5B,kBAAkB,CAAC0B,cAAD,EAAiB,SAAjB,CAA3C;AACArR,aAAK,GAAGuC,IAAI,CAACvC,KAALuC,GAAagP,gBAAgB,CAACvR,KAA9BuC,GAAsC+O,eAAe,CAACtR,KAA9DA;AACAoB,cAAM,GAAGmB,IAAI,CAACnB,MAALmB,GAAcgP,gBAAgB,CAACnQ,MAA/BmB,GAAwC+O,eAAe,CAAClQ,MAAjEA;AACAoD,gBAAQ,GAAGyK,aAAa,CAACoC,cAAc,CAAC7M,QAAhB,EAA0B0M,SAA1B,EAAqC,aAArC,CAAxB1M;AACAyM,iBAAS,GAAGhC,aAAa,CAACoC,cAAc,CAACJ,SAAhB,EAA2BC,SAA3B,EAAsC,cAAtC,CAAzBD;AACD;AACF;;AACD,WAAO;AACLjR,WADK;AAELoB,YAFK;AAGLoD,cAAQ,EAAEA,QAAQ,IAAIplB,QAHjB;AAIL6xB,eAAS,EAAEA,SAAS,IAAI7xB;AAJnB,KAAP;AAMD;;AACD,QAAMoyB,MAAM,GAAGp0B,CAAC,IAAI6B,IAAI,CAACc,KAALd,CAAW7B,CAAC,GAAG,EAAf6B,IAAqB,EAAzC;;AACA,WAASwyB,cAAT,CAAwBzQ,MAAxB,EAAgC0Q,OAAhC,EAAyCC,QAAzC,EAAmDC,WAAnD,EAAgE;AAC9D,UAAM5U,KAAK,GAAGqS,gBAAgB,CAACrO,MAAD,CAA9B;AACA,UAAM6Q,OAAO,GAAGlC,kBAAkB,CAAC3S,KAAD,EAAQ,QAAR,CAAlC;AACA,UAAMwH,QAAQ,GAAGyK,aAAa,CAACjS,KAAK,CAACwH,QAAP,EAAiBxD,MAAjB,EAAyB,aAAzB,CAAbiO,IAAwD7vB,QAAzE;AACA,UAAM6xB,SAAS,GAAGhC,aAAa,CAACjS,KAAK,CAACiU,SAAP,EAAkBjQ,MAAlB,EAA0B,cAA1B,CAAbiO,IAA0D7vB,QAA5E;AACA,UAAM0yB,aAAa,GAAGd,gBAAgB,CAAChQ,MAAD,EAAS0Q,OAAT,EAAkBC,QAAlB,CAAtC;AACA,QAAI;AAAC3R,WAAD;AAAQoB;AAAR,QAAkB0Q,aAAtB;;AACA,QAAI9U,KAAK,CAAC6T,SAAN7T,KAAoB,aAAxB,EAAuC;AACrC,YAAM+T,OAAO,GAAGpB,kBAAkB,CAAC3S,KAAD,EAAQ,QAAR,EAAkB,OAAlB,CAAlC;AACA,YAAM8T,QAAQ,GAAGnB,kBAAkB,CAAC3S,KAAD,EAAQ,SAAR,CAAnC;AACAgD,WAAK,IAAI8Q,QAAQ,CAAC9Q,KAAT8Q,GAAiBC,OAAO,CAAC/Q,KAAlCA;AACAoB,YAAM,IAAI0P,QAAQ,CAAC1P,MAAT0P,GAAkBC,OAAO,CAAC3P,MAApCA;AACD;;AACDpB,SAAK,GAAG/gB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY+gB,KAAK,GAAG6R,OAAO,CAAC7R,KAA5B/gB,CAAR+gB;AACAoB,UAAM,GAAGniB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY2yB,WAAW,GAAG3yB,IAAI,CAACkB,KAALlB,CAAW+gB,KAAK,GAAG4R,WAAnB3yB,CAAH,GAAqCmiB,MAAM,GAAGyQ,OAAO,CAACzQ,MAA7EniB,CAATmiB;AACApB,SAAK,GAAGwR,MAAM,CAACvyB,IAAI,CAACoC,GAALpC,CAAS+gB,KAAT/gB,EAAgBulB,QAAhBvlB,EAA0B6yB,aAAa,CAACtN,QAAxCvlB,CAAD,CAAd+gB;AACAoB,UAAM,GAAGoQ,MAAM,CAACvyB,IAAI,CAACoC,GAALpC,CAASmiB,MAATniB,EAAiBgyB,SAAjBhyB,EAA4B6yB,aAAa,CAACb,SAA1ChyB,CAAD,CAAfmiB;;AACA,QAAIpB,KAAK,IAAI,CAACoB,MAAd,EAAsB;AACpBA,YAAM,GAAGoQ,MAAM,CAACxR,KAAK,GAAG,CAAT,CAAfoB;AACD;;AACD,WAAO;AACLpB,WADK;AAELoB;AAFK,KAAP;AAID;;AACD,WAAS2Q,WAAT,CAAqBtV,KAArB,EAA4BuV,UAA5B,EAAwCC,UAAxC,EAAoD;AAClD,UAAMC,UAAU,GAAGF,UAAU,IAAI,CAAjC;AACA,UAAMG,YAAY,GAAGlzB,IAAI,CAACkB,KAALlB,CAAWwd,KAAK,CAAC2E,MAAN3E,GAAeyV,UAA1BjzB,CAArB;AACA,UAAMmzB,WAAW,GAAGnzB,IAAI,CAACkB,KAALlB,CAAWwd,KAAK,CAACuD,KAANvD,GAAcyV,UAAzBjzB,CAApB;AACAwd,SAAK,CAAC2E,MAAN3E,GAAe0V,YAAY,GAAGD,UAA9BzV;AACAA,SAAK,CAACuD,KAANvD,GAAc2V,WAAW,GAAGF,UAA5BzV;AACA,UAAMuE,MAAM,GAAGvE,KAAK,CAACuE,MAArB;;AACA,QAAIA,MAAM,CAAChE,KAAPgE,KAAiBiR,UAAU,IAAK,CAACjR,MAAM,CAAChE,KAAPgE,CAAaI,MAAd,IAAwB,CAACJ,MAAM,CAAChE,KAAPgE,CAAahB,KAAtEgB,CAAJ,EAAmF;AACjFA,YAAM,CAAChE,KAAPgE,CAAaI,MAAbJ,aAAyBvE,KAAK,CAAC2E,MAA/BJ;AACAA,YAAM,CAAChE,KAAPgE,CAAahB,KAAbgB,aAAwBvE,KAAK,CAACuD,KAA9BgB;AACD;;AACD,QAAIvE,KAAK,CAACoE,uBAANpE,KAAkCyV,UAAlCzV,IACGuE,MAAM,CAACI,MAAPJ,KAAkBmR,YADrB1V,IAEGuE,MAAM,CAAChB,KAAPgB,KAAiBoR,WAFxB,EAEqC;AACnC3V,WAAK,CAACoE,uBAANpE,GAAgCyV,UAAhCzV;AACAuE,YAAM,CAACI,MAAPJ,GAAgBmR,YAAhBnR;AACAA,YAAM,CAAChB,KAAPgB,GAAeoR,WAAfpR;AACAvE,WAAK,CAACW,GAANX,CAAU4V,YAAV5V,CAAuByV,UAAvBzV,EAAmC,CAAnCA,EAAsC,CAAtCA,EAAyCyV,UAAzCzV,EAAqD,CAArDA,EAAwD,CAAxDA;AACA,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AACD,QAAM6V,4BAA4B,GAAI,YAAW;AAC/C,QAAIC,gBAAgB,GAAG,KAAvB;;AACA,QAAI;AACF,YAAMp2B,OAAO,GAAG;AACd,YAAIq2B,OAAJ,GAAc;AACZD,0BAAgB,GAAG,IAAnBA;AACA,iBAAO,KAAP;AACD;;AAJa,OAAhB;AAMA1sB,YAAM,CAAC4sB,gBAAP5sB,CAAwB,MAAxBA,EAAgC,IAAhCA,EAAsC1J,OAAtC0J;AACAA,YAAM,CAAC6sB,mBAAP7sB,CAA2B,MAA3BA,EAAmC,IAAnCA,EAAyC1J,OAAzC0J;AARF,MASE,OAAO9G,CAAP,EAAU,CACX;;AACD,WAAOwzB,gBAAP;AAboC,KAAtC;;AAeA,WAASI,YAAT,CAAsBrD,OAAtB,EAA+BluB,QAA/B,EAAyC;AACvC,UAAMrI,KAAK,GAAGw2B,QAAQ,CAACD,OAAD,EAAUluB,QAAV,CAAtB;AACA,UAAM6kB,OAAO,GAAGltB,KAAK,IAAIA,KAAK,CAACmtB,KAANntB,CAAY,mBAAZA,CAAzB;AACA,WAAOktB,OAAO,GAAG,CAACA,OAAO,CAAC,CAAD,CAAX,GAAiBjpB,SAA/B;AACD;;AAED,WAAS41B,YAAT,CAAsBhlB,EAAtB,EAA0BC,EAA1B,EAA8BlF,CAA9B,EAAiC8U,IAAjC,EAAuC;AACrC,WAAO;AACLpgB,OAAC,EAAEuQ,EAAE,CAACvQ,CAAHuQ,GAAOjF,CAAC,IAAIkF,EAAE,CAACxQ,CAAHwQ,GAAOD,EAAE,CAACvQ,CAAd,CADN;AAELE,OAAC,EAAEqQ,EAAE,CAACrQ,CAAHqQ,GAAOjF,CAAC,IAAIkF,EAAE,CAACtQ,CAAHsQ,GAAOD,EAAE,CAACrQ,CAAd;AAFN,KAAP;AAID;;AACD,WAASs1B,qBAAT,CAA+BjlB,EAA/B,EAAmCC,EAAnC,EAAuClF,CAAvC,EAA0C8U,IAA1C,EAAgD;AAC9C,WAAO;AACLpgB,OAAC,EAAEuQ,EAAE,CAACvQ,CAAHuQ,GAAOjF,CAAC,IAAIkF,EAAE,CAACxQ,CAAHwQ,GAAOD,EAAE,CAACvQ,CAAd,CADN;AAELE,OAAC,EAAEkgB,IAAI,KAAK,QAATA,GAAoB9U,CAAC,GAAG,GAAJA,GAAUiF,EAAE,CAACrQ,CAAboL,GAAiBkF,EAAE,CAACtQ,CAAxCkgB,GACDA,IAAI,KAAK,OAATA,GAAmB9U,CAAC,GAAG,CAAJA,GAAQiF,EAAE,CAACrQ,CAAXoL,GAAekF,EAAE,CAACtQ,CAArCkgB,GACA9U,CAAC,GAAG,CAAJA,GAAQkF,EAAE,CAACtQ,CAAXoL,GAAeiF,EAAE,CAACrQ;AAJf,KAAP;AAMD;;AACD,WAASu1B,oBAAT,CAA8BllB,EAA9B,EAAkCC,EAAlC,EAAsClF,CAAtC,EAAyC8U,IAAzC,EAA+C;AAC7C,UAAMsV,GAAG,GAAG;AAAC11B,OAAC,EAAEuQ,EAAE,CAAC8V,IAAP;AAAanmB,OAAC,EAAEqQ,EAAE,CAACgW;AAAnB,KAAZ;AACA,UAAMoP,GAAG,GAAG;AAAC31B,OAAC,EAAEwQ,EAAE,CAAC4V,IAAP;AAAalmB,OAAC,EAAEsQ,EAAE,CAAC8V;AAAnB,KAAZ;;AACA,UAAMllB,CAAC,GAAGm0B,YAAY,CAAChlB,EAAD,EAAKmlB,GAAL,EAAUpqB,CAAV,CAAtB;;AACA,UAAMjK,CAAC,GAAGk0B,YAAY,CAACG,GAAD,EAAMC,GAAN,EAAWrqB,CAAX,CAAtB;;AACA,UAAMqD,CAAC,GAAG4mB,YAAY,CAACI,GAAD,EAAMnlB,EAAN,EAAUlF,CAAV,CAAtB;;AACA,UAAMqC,CAAC,GAAG4nB,YAAY,CAACn0B,CAAD,EAAIC,CAAJ,EAAOiK,CAAP,CAAtB;;AACA,UAAM5J,CAAC,GAAG6zB,YAAY,CAACl0B,CAAD,EAAIsN,CAAJ,EAAOrD,CAAP,CAAtB;;AACA,WAAOiqB,YAAY,CAAC5nB,CAAD,EAAIjM,CAAJ,EAAO4J,CAAP,CAAnB;AACD;;AAED,QAAMsqB,SAAS,GAAG,IAAIC,GAAJ,EAAlB;;AACA,WAASC,eAAT,CAAyBC,MAAzB,EAAiCj3B,OAAjC,EAA0C;AACxCA,WAAO,GAAGA,OAAO,IAAI,EAArBA;AACA,UAAMk3B,QAAQ,GAAGD,MAAM,GAAGE,IAAI,CAACC,SAALD,CAAen3B,OAAfm3B,CAA1B;AACA,QAAIE,SAAS,GAAGP,SAAS,CAAC1U,GAAV0U,CAAcI,QAAdJ,CAAhB;;AACA,QAAI,CAACO,SAAL,EAAgB;AACdA,eAAS,GAAG,IAAIC,IAAI,CAACC,YAAT,CAAsBN,MAAtB,EAA8Bj3B,OAA9B,CAAZq3B;AACAP,eAAS,CAAC7tB,GAAV6tB,CAAcI,QAAdJ,EAAwBO,SAAxBP;AACD;;AACD,WAAOO,SAAP;AACD;;AACD,WAASG,YAAT,CAAsBC,GAAtB,EAA2BR,MAA3B,EAAmCj3B,OAAnC,EAA4C;AAC1C,WAAOg3B,eAAe,CAACC,MAAD,EAASj3B,OAAT,CAAfg3B,CAAiCU,MAAjCV,CAAwCS,GAAxCT,CAAP;AACD;;AAED,QAAMW,qBAAqB,GAAG,UAASC,KAAT,EAAgB/T,KAAhB,EAAuB;AACnD,WAAO;AACL3iB,OAAC,CAACA,CAAD,EAAI;AACH,eAAO02B,KAAK,GAAGA,KAARA,GAAgB/T,KAAhB+T,GAAwB12B,CAA/B;AAFG;;AAIL22B,cAAQ,CAAC/mB,CAAD,EAAI;AACV+S,aAAK,GAAG/S,CAAR+S;AALG;;AAOL6E,eAAS,CAACne,KAAD,EAAQ;AACf,YAAIA,KAAK,KAAK,QAAd,EAAwB;AACtB,iBAAOA,KAAP;AACD;;AACD,eAAOA,KAAK,KAAK,OAAVA,GAAoB,MAApBA,GAA6B,OAApC;AAXG;;AAaLutB,WAAK,CAAC52B,CAAD,EAAItE,KAAJ,EAAW;AACd,eAAOsE,CAAC,GAAGtE,KAAX;AAdG;;AAgBLm7B,gBAAU,CAAC72B,CAAD,EAAI82B,SAAJ,EAAe;AACvB,eAAO92B,CAAC,GAAG82B,SAAX;AACD;;AAlBI,KAAP;AADF;;AAsBA,QAAMC,qBAAqB,GAAG,YAAW;AACvC,WAAO;AACL/2B,OAAC,CAACA,CAAD,EAAI;AACH,eAAOA,CAAP;AAFG;;AAIL22B,cAAQ,CAAC/mB,CAAD,EAAI,CAJP;;AAML4X,eAAS,CAACne,KAAD,EAAQ;AACf,eAAOA,KAAP;AAPG;;AASLutB,WAAK,CAAC52B,CAAD,EAAItE,KAAJ,EAAW;AACd,eAAOsE,CAAC,GAAGtE,KAAX;AAVG;;AAYLm7B,gBAAU,CAAC72B,CAAD,EAAIg3B,UAAJ,EAAgB;AACxB,eAAOh3B,CAAP;AACD;;AAdI,KAAP;AADF;;AAkBA,WAASi3B,aAAT,CAAuBvtB,GAAvB,EAA4BgtB,KAA5B,EAAmC/T,KAAnC,EAA0C;AACxC,WAAOjZ,GAAG,GAAG+sB,qBAAqB,CAACC,KAAD,EAAQ/T,KAAR,CAAxB,GAAyCoU,qBAAqB,EAAxE;AACD;;AACD,WAASG,qBAAT,CAA+BnX,GAA/B,EAAoCoX,SAApC,EAA+C;AAC7C,QAAIxX,KAAJ,EAAWyX,QAAX;;AACA,QAAID,SAAS,KAAK,KAAdA,IAAuBA,SAAS,KAAK,KAAzC,EAAgD;AAC9CxX,WAAK,GAAGI,GAAG,CAAC4D,MAAJ5D,CAAWJ,KAAnBA;AACAyX,cAAQ,GAAG,CACTzX,KAAK,CAACyS,gBAANzS,CAAuB,WAAvBA,CADS,EAETA,KAAK,CAAC0X,mBAAN1X,CAA0B,WAA1BA,CAFS,CAAXyX;AAIAzX,WAAK,CAAC2X,WAAN3X,CAAkB,WAAlBA,EAA+BwX,SAA/BxX,EAA0C,WAA1CA;AACAI,SAAG,CAACwX,iBAAJxX,GAAwBqX,QAAxBrX;AACD;AACF;;AACD,WAASyX,oBAAT,CAA8BzX,GAA9B,EAAmCqX,QAAnC,EAA6C;AAC3C,QAAIA,QAAQ,KAAKz3B,SAAjB,EAA4B;AAC1B,aAAOogB,GAAG,CAACwX,iBAAX;AACAxX,SAAG,CAAC4D,MAAJ5D,CAAWJ,KAAXI,CAAiBuX,WAAjBvX,CAA6B,WAA7BA,EAA0CqX,QAAQ,CAAC,CAAD,CAAlDrX,EAAuDqX,QAAQ,CAAC,CAAD,CAA/DrX;AACD;AACF;;AAED,WAAS0X,UAAT,CAAoB1zB,QAApB,EAA8B;AAC5B,QAAIA,QAAQ,KAAK,OAAjB,EAA0B;AACxB,aAAO;AACL2zB,eAAO,EAAEpyB,aADJ;AAELqyB,eAAO,EAAEvyB,UAFJ;AAGLwyB,iBAAS,EAAEvyB;AAHN,OAAP;AAKD;;AACD,WAAO;AACLqyB,aAAO,EAAEzxB,UADJ;AAEL0xB,aAAO,EAAE,CAACv2B,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAFlB;AAGLu2B,eAAS,EAAE53B,CAAC,IAAIA;AAHX,KAAP;AAKD;;AACD,WAAS63B,gBAAT,OAA4D;AAAA,QAAlC;AAACtyB,WAAD;AAAQC,SAAR;AAAayE,WAAb;AAAoB+mB,UAApB;AAA0BrR;AAA1B,KAAkC;AAC1D,WAAO;AACLpa,WAAK,EAAEA,KAAK,GAAG0E,KADV;AAELzE,SAAG,EAAEA,GAAG,GAAGyE,KAFN;AAGL+mB,UAAI,EAAEA,IAAI,IAAI,CAACxrB,GAAG,GAAGD,KAANC,GAAc,CAAf,IAAoByE,KAApB,KAA8B,CAHvC;AAIL0V;AAJK,KAAP;AAMD;;AACD,WAASmY,UAAT,CAAoBC,OAApB,EAA6BjuB,MAA7B,EAAqCkuB,MAArC,EAA6C;AAC3C,UAAM;AAACj0B,cAAD;AAAWwB,WAAK,EAAE0yB,UAAlB;AAA8BzyB,SAAG,EAAE0yB;AAAnC,QAA+CF,MAArD;AACA,UAAM;AAACN,aAAD;AAAUE;AAAV,QAAuBH,UAAU,CAAC1zB,QAAD,CAAvC;AACA,UAAMkG,KAAK,GAAGH,MAAM,CAACpM,MAArB;AACA,QAAI;AAAC6H,WAAD;AAAQC,SAAR;AAAawrB;AAAb,QAAqB+G,OAAzB;AACA,QAAIx6B,CAAJ,EAAOO,IAAP;;AACA,QAAIkzB,IAAJ,EAAU;AACRzrB,WAAK,IAAI0E,KAAT1E;AACAC,SAAG,IAAIyE,KAAPzE;;AACA,WAAKjI,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGmM,KAAnB,EAA0B1M,CAAC,GAAGO,IAA9B,EAAoC,EAAEP,CAAtC,EAAyC;AACvC,YAAI,CAACm6B,OAAO,CAACE,SAAS,CAAC9tB,MAAM,CAACvE,KAAK,GAAG0E,KAAT,CAANH,CAAsB/F,QAAtB+F,CAAD,CAAV,EAA6CmuB,UAA7C,EAAyDC,QAAzD,CAAZ,EAAgF;AAC9E;AACD;;AACD3yB,aAAK;AACLC,WAAG;AACJ;;AACDD,WAAK,IAAI0E,KAAT1E;AACAC,SAAG,IAAIyE,KAAPzE;AACD;;AACD,QAAIA,GAAG,GAAGD,KAAV,EAAiB;AACfC,SAAG,IAAIyE,KAAPzE;AACD;;AACD,WAAO;AAACD,WAAD;AAAQC,SAAR;AAAawrB,UAAb;AAAmBrR,WAAK,EAAEoY,OAAO,CAACpY;AAAlC,KAAP;AACD;;AACD,WAASwY,aAAT,CAAuBJ,OAAvB,EAAgCjuB,MAAhC,EAAwCkuB,MAAxC,EAAgD;AAC9C,QAAI,CAACA,MAAL,EAAa;AACX,aAAO,CAACD,OAAD,CAAP;AACD;;AACD,UAAM;AAACh0B,cAAD;AAAWwB,WAAK,EAAE0yB,UAAlB;AAA8BzyB,SAAG,EAAE0yB;AAAnC,QAA+CF,MAArD;AACA,UAAM/tB,KAAK,GAAGH,MAAM,CAACpM,MAArB;AACA,UAAM;AAACi6B,aAAD;AAAUD,aAAV;AAAmBE;AAAnB,QAAgCH,UAAU,CAAC1zB,QAAD,CAAhD;AACA,UAAM;AAACwB,WAAD;AAAQC,SAAR;AAAawrB,UAAb;AAAmBrR;AAAnB,QAA4BmY,UAAU,CAACC,OAAD,EAAUjuB,MAAV,EAAkBkuB,MAAlB,CAA5C;AACA,UAAM90B,MAAM,GAAG,EAAf;AACA,QAAIk1B,MAAM,GAAG,KAAb;AACA,QAAIC,QAAQ,GAAG,IAAf;AACA,QAAI38B,KAAJ,EAAW6pB,KAAX,EAAkB+S,SAAlB;;AACA,UAAMC,aAAa,GAAG,MAAMb,OAAO,CAACO,UAAD,EAAaK,SAAb,EAAwB58B,KAAxB,CAAPg8B,IAAyCC,OAAO,CAACM,UAAD,EAAaK,SAAb,CAAPX,KAAmC,CAAxG;;AACA,UAAMa,WAAW,GAAG,MAAMb,OAAO,CAACO,QAAD,EAAWx8B,KAAX,CAAPi8B,KAA6B,CAA7BA,IAAkCD,OAAO,CAACQ,QAAD,EAAWI,SAAX,EAAsB58B,KAAtB,CAAnE;;AACA,UAAM+8B,WAAW,GAAG,MAAML,MAAM,IAAIG,aAAa,EAAjD;;AACA,UAAMG,UAAU,GAAG,MAAM,CAACN,MAAD,IAAWI,WAAW,EAA/C;;AACA,SAAK,IAAIj7B,CAAC,GAAGgI,KAAR,EAAe6rB,IAAI,GAAG7rB,KAA3B,EAAkChI,CAAC,IAAIiI,GAAvC,EAA4C,EAAEjI,CAA9C,EAAiD;AAC/CgoB,WAAK,GAAGzb,MAAM,CAACvM,CAAC,GAAG0M,KAAL,CAAdsb;;AACA,UAAIA,KAAK,CAACmJ,IAAV,EAAgB;AACd;AACD;;AACDhzB,WAAK,GAAGk8B,SAAS,CAACrS,KAAK,CAACxhB,QAAD,CAAN,CAAjBrI;;AACA,UAAIA,KAAK,KAAK48B,SAAd,EAAyB;AACvB;AACD;;AACDF,YAAM,GAAGV,OAAO,CAACh8B,KAAD,EAAQu8B,UAAR,EAAoBC,QAApB,CAAhBE;;AACA,UAAIC,QAAQ,KAAK,IAAbA,IAAqBI,WAAW,EAApC,EAAwC;AACtCJ,gBAAQ,GAAGV,OAAO,CAACj8B,KAAD,EAAQu8B,UAAR,CAAPN,KAA+B,CAA/BA,GAAmCp6B,CAAnCo6B,GAAuCvG,IAAlDiH;AACD;;AACD,UAAIA,QAAQ,KAAK,IAAbA,IAAqBK,UAAU,EAAnC,EAAuC;AACrCx1B,cAAM,CAACtC,IAAPsC,CAAY20B,gBAAgB,CAAC;AAACtyB,eAAK,EAAE8yB,QAAR;AAAkB7yB,aAAG,EAAEjI,CAAvB;AAA0ByzB,cAA1B;AAAgC/mB,eAAhC;AAAuC0V;AAAvC,SAAD,CAA5Bzc;AACAm1B,gBAAQ,GAAG,IAAXA;AACD;;AACDjH,UAAI,GAAG7zB,CAAP6zB;AACAkH,eAAS,GAAG58B,KAAZ48B;AACD;;AACD,QAAID,QAAQ,KAAK,IAAjB,EAAuB;AACrBn1B,YAAM,CAACtC,IAAPsC,CAAY20B,gBAAgB,CAAC;AAACtyB,aAAK,EAAE8yB,QAAR;AAAkB7yB,WAAlB;AAAuBwrB,YAAvB;AAA6B/mB,aAA7B;AAAoC0V;AAApC,OAAD,CAA5Bzc;AACD;;AACD,WAAOA,MAAP;AACD;;AACD,WAASy1B,cAAT,CAAwB7R,IAAxB,EAA8BkR,MAA9B,EAAsC;AACpC,UAAM90B,MAAM,GAAG,EAAf;AACA,UAAM01B,QAAQ,GAAG9R,IAAI,CAAC8R,QAAtB;;AACA,SAAK,IAAIr7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq7B,QAAQ,CAACl7B,MAA7B,EAAqCH,CAAC,EAAtC,EAA0C;AACxC,YAAMs7B,GAAG,GAAGV,aAAa,CAACS,QAAQ,CAACr7B,CAAD,CAAT,EAAcupB,IAAI,CAAChd,MAAnB,EAA2BkuB,MAA3B,CAAzB;;AACA,UAAIa,GAAG,CAACn7B,MAAR,EAAgB;AACdwF,cAAM,CAACtC,IAAPsC,CAAY,GAAG21B,GAAf31B;AACD;AACF;;AACD,WAAOA,MAAP;AACD;;AACD,WAAS41B,eAAT,CAAyBhvB,MAAzB,EAAiCG,KAAjC,EAAwC+mB,IAAxC,EAA8CE,QAA9C,EAAwD;AACtD,QAAI3rB,KAAK,GAAG,CAAZ;AACA,QAAIC,GAAG,GAAGyE,KAAK,GAAG,CAAlB;;AACA,QAAI+mB,IAAI,IAAI,CAACE,QAAb,EAAuB;AACrB,aAAO3rB,KAAK,GAAG0E,KAAR1E,IAAiB,CAACuE,MAAM,CAACvE,KAAD,CAANuE,CAAc4kB,IAAvC,EAA6C;AAC3CnpB,aAAK;AACN;AACF;;AACD,WAAOA,KAAK,GAAG0E,KAAR1E,IAAiBuE,MAAM,CAACvE,KAAD,CAANuE,CAAc4kB,IAAtC,EAA4C;AAC1CnpB,WAAK;AACN;;AACDA,SAAK,IAAI0E,KAAT1E;;AACA,QAAIyrB,IAAJ,EAAU;AACRxrB,SAAG,IAAID,KAAPC;AACD;;AACD,WAAOA,GAAG,GAAGD,KAANC,IAAesE,MAAM,CAACtE,GAAG,GAAGyE,KAAP,CAANH,CAAoB4kB,IAA1C,EAAgD;AAC9ClpB,SAAG;AACJ;;AACDA,OAAG,IAAIyE,KAAPzE;AACA,WAAO;AAACD,WAAD;AAAQC;AAAR,KAAP;AACD;;AACD,WAASuzB,aAAT,CAAuBjvB,MAAvB,EAA+BvE,KAA/B,EAAsCtB,GAAtC,EAA2C+sB,IAA3C,EAAiD;AAC/C,UAAM/mB,KAAK,GAAGH,MAAM,CAACpM,MAArB;AACA,UAAMwF,MAAM,GAAG,EAAf;AACA,QAAIuD,IAAI,GAAGlB,KAAX;AACA,QAAI6rB,IAAI,GAAGtnB,MAAM,CAACvE,KAAD,CAAjB;AACA,QAAIC,GAAJ;;AACA,SAAKA,GAAG,GAAGD,KAAK,GAAG,CAAnB,EAAsBC,GAAG,IAAIvB,GAA7B,EAAkC,EAAEuB,GAApC,EAAyC;AACvC,YAAMwzB,GAAG,GAAGlvB,MAAM,CAACtE,GAAG,GAAGyE,KAAP,CAAlB;;AACA,UAAI+uB,GAAG,CAACtK,IAAJsK,IAAYA,GAAG,CAACC,IAApB,EAA0B;AACxB,YAAI,CAAC7H,IAAI,CAAC1C,IAAV,EAAgB;AACdsC,cAAI,GAAG,KAAPA;AACA9tB,gBAAM,CAACtC,IAAPsC,CAAY;AAACqC,iBAAK,EAAEA,KAAK,GAAG0E,KAAhB;AAAuBzE,eAAG,EAAE,CAACA,GAAG,GAAG,CAAP,IAAYyE,KAAxC;AAA+C+mB;AAA/C,WAAZ9tB;AACAqC,eAAK,GAAGkB,IAAI,GAAGuyB,GAAG,CAACC,IAAJD,GAAWxzB,GAAXwzB,GAAiB,IAAhCzzB;AACD;AALH,aAMO;AACLkB,YAAI,GAAGjB,GAAPiB;;AACA,YAAI2qB,IAAI,CAAC1C,IAAT,EAAe;AACbnpB,eAAK,GAAGC,GAARD;AACD;AACF;;AACD6rB,UAAI,GAAG4H,GAAP5H;AACD;;AACD,QAAI3qB,IAAI,KAAK,IAAb,EAAmB;AACjBvD,YAAM,CAACtC,IAAPsC,CAAY;AAACqC,aAAK,EAAEA,KAAK,GAAG0E,KAAhB;AAAuBzE,WAAG,EAAEiB,IAAI,GAAGwD,KAAnC;AAA0C+mB;AAA1C,OAAZ9tB;AACD;;AACD,WAAOA,MAAP;AACD;;AACD,WAASg2B,gBAAT,CAA0BpS,IAA1B,EAAgCqS,cAAhC,EAAgD;AAC9C,UAAMrvB,MAAM,GAAGgd,IAAI,CAAChd,MAApB;AACA,UAAMonB,QAAQ,GAAGpK,IAAI,CAAChoB,OAALgoB,CAAaoK,QAA9B;AACA,UAAMjnB,KAAK,GAAGH,MAAM,CAACpM,MAArB;;AACA,QAAI,CAACuM,KAAL,EAAY;AACV,aAAO,EAAP;AACD;;AACD,UAAM+mB,IAAI,GAAG,CAAC,CAAClK,IAAI,CAACsS,KAApB;AACA,UAAM;AAAC7zB,WAAD;AAAQC;AAAR,QAAeszB,eAAe,CAAChvB,MAAD,EAASG,KAAT,EAAgB+mB,IAAhB,EAAsBE,QAAtB,CAApC;;AACA,QAAIA,QAAQ,KAAK,IAAjB,EAAuB;AACrB,aAAOmI,aAAa,CAACvS,IAAD,EAAO,CAAC;AAACvhB,aAAD;AAAQC,WAAR;AAAawrB;AAAb,OAAD,CAAP,EAA6BlnB,MAA7B,EAAqCqvB,cAArC,CAApB;AACD;;AACD,UAAMl1B,GAAG,GAAGuB,GAAG,GAAGD,KAANC,GAAcA,GAAG,GAAGyE,KAApBzE,GAA4BA,GAAxC;AACA,UAAM8zB,YAAY,GAAG,CAAC,CAACxS,IAAI,CAACyS,SAAP,IAAoBh0B,KAAK,KAAK,CAA9B,IAAmCC,GAAG,KAAKyE,KAAK,GAAG,CAAxE;AACA,WAAOovB,aAAa,CAACvS,IAAD,EAAOiS,aAAa,CAACjvB,MAAD,EAASvE,KAAT,EAAgBtB,GAAhB,EAAqBq1B,YAArB,CAApB,EAAwDxvB,MAAxD,EAAgEqvB,cAAhE,CAApB;AACD;;AACD,WAASE,aAAT,CAAuBvS,IAAvB,EAA6B8R,QAA7B,EAAuC9uB,MAAvC,EAA+CqvB,cAA/C,EAA+D;AAC7D,QAAI,CAACA,cAAD,IAAmB,CAACA,cAAc,CAAC7M,UAAnC,IAAiD,CAACxiB,MAAtD,EAA8D;AAC5D,aAAO8uB,QAAP;AACD;;AACD,WAAOY,eAAe,CAAC1S,IAAD,EAAO8R,QAAP,EAAiB9uB,MAAjB,EAAyBqvB,cAAzB,CAAtB;AACD;;AACD,WAASK,eAAT,CAAyB1S,IAAzB,EAA+B8R,QAA/B,EAAyC9uB,MAAzC,EAAiDqvB,cAAjD,EAAiE;AAC/D,UAAMM,YAAY,GAAG3S,IAAI,CAAC4S,MAAL5S,CAAYlD,UAAZkD,EAArB;;AACA,UAAM6S,SAAS,GAAGC,SAAS,CAAC9S,IAAI,CAAChoB,OAAN,CAA3B;AACA,UAAM;AAAC+6B,mBAAa,EAAE57B,YAAhB;AAA8Ba,aAAO,EAAE;AAACoyB;AAAD;AAAvC,QAAqDpK,IAA3D;AACA,UAAM7c,KAAK,GAAGH,MAAM,CAACpM,MAArB;AACA,UAAMwF,MAAM,GAAG,EAAf;AACA,QAAI42B,SAAS,GAAGH,SAAhB;AACA,QAAIp0B,KAAK,GAAGqzB,QAAQ,CAAC,CAAD,CAARA,CAAYrzB,KAAxB;AACA,QAAIhI,CAAC,GAAGgI,KAAR;;AACA,aAASw0B,QAAT,CAAkBr0B,CAAlB,EAAqBhE,CAArB,EAAwBoM,CAAxB,EAA2BksB,EAA3B,EAA+B;AAC7B,YAAMC,GAAG,GAAG/I,QAAQ,GAAG,CAAC,CAAJ,GAAQ,CAA5B;;AACA,UAAIxrB,CAAC,KAAKhE,CAAV,EAAa;AACX;AACD;;AACDgE,OAAC,IAAIuE,KAALvE;;AACA,aAAOoE,MAAM,CAACpE,CAAC,GAAGuE,KAAL,CAANH,CAAkB4kB,IAAzB,EAA+B;AAC7BhpB,SAAC,IAAIu0B,GAALv0B;AACD;;AACD,aAAOoE,MAAM,CAACpI,CAAC,GAAGuI,KAAL,CAANH,CAAkB4kB,IAAzB,EAA+B;AAC7BhtB,SAAC,IAAIu4B,GAALv4B;AACD;;AACD,UAAIgE,CAAC,GAAGuE,KAAJvE,KAAchE,CAAC,GAAGuI,KAAtB,EAA6B;AAC3B/G,cAAM,CAACtC,IAAPsC,CAAY;AAACqC,eAAK,EAAEG,CAAC,GAAGuE,KAAZ;AAAmBzE,aAAG,EAAE9D,CAAC,GAAGuI,KAA5B;AAAmC+mB,cAAI,EAAEljB,CAAzC;AAA4C6R,eAAK,EAAEqa;AAAnD,SAAZ92B;AACA42B,iBAAS,GAAGE,EAAZF;AACAv0B,aAAK,GAAG7D,CAAC,GAAGuI,KAAZ1E;AACD;AACF;;AACD,SAAK,MAAMwyB,OAAX,IAAsBa,QAAtB,EAAgC;AAC9BrzB,WAAK,GAAG2rB,QAAQ,GAAG3rB,KAAH,GAAWwyB,OAAO,CAACxyB,KAAnCA;AACA,UAAI6rB,IAAI,GAAGtnB,MAAM,CAACvE,KAAK,GAAG0E,KAAT,CAAjB;AACA,UAAI0V,KAAJ;;AACA,WAAKpiB,CAAC,GAAGgI,KAAK,GAAG,CAAjB,EAAoBhI,CAAC,IAAIw6B,OAAO,CAACvyB,GAAjC,EAAsCjI,CAAC,EAAvC,EAA2C;AACzC,cAAMmzB,EAAE,GAAG5mB,MAAM,CAACvM,CAAC,GAAG0M,KAAL,CAAjB;AACA0V,aAAK,GAAGia,SAAS,CAACT,cAAc,CAAC7M,UAAf6M,CAA0BhP,aAAa,CAACsP,YAAD,EAAe;AACtE59B,cAAI,EAAE,SADgE;AAEtEq+B,YAAE,EAAE9I,IAFkE;AAGtE7gB,YAAE,EAAEmgB,EAHkE;AAItEyJ,qBAAW,EAAE,CAAC58B,CAAC,GAAG,CAAL,IAAU0M,KAJ+C;AAKtEmwB,qBAAW,EAAE78B,CAAC,GAAG0M,KALqD;AAMtEhM;AANsE,SAAf,CAAvCk7B,CAAD,CAAjBxZ;;AAQA,YAAI0a,YAAY,CAAC1a,KAAD,EAAQma,SAAR,CAAhB,EAAoC;AAClCC,kBAAQ,CAACx0B,KAAD,EAAQhI,CAAC,GAAG,CAAZ,EAAew6B,OAAO,CAAC/G,IAAvB,EAA6B8I,SAA7B,CAARC;AACD;;AACD3I,YAAI,GAAGV,EAAPU;AACA0I,iBAAS,GAAGna,KAAZma;AACD;;AACD,UAAIv0B,KAAK,GAAGhI,CAAC,GAAG,CAAhB,EAAmB;AACjBw8B,gBAAQ,CAACx0B,KAAD,EAAQhI,CAAC,GAAG,CAAZ,EAAew6B,OAAO,CAAC/G,IAAvB,EAA6B8I,SAA7B,CAARC;AACD;AACF;;AACD,WAAO72B,MAAP;AACD;;AACD,WAAS02B,SAAT,CAAmB96B,OAAnB,EAA4B;AAC1B,WAAO;AACLigB,qBAAe,EAAEjgB,OAAO,CAACigB,eADpB;AAELub,oBAAc,EAAEx7B,OAAO,CAACw7B,cAFnB;AAGLC,gBAAU,EAAEz7B,OAAO,CAACy7B,UAHf;AAILC,sBAAgB,EAAE17B,OAAO,CAAC07B,gBAJrB;AAKLC,qBAAe,EAAE37B,OAAO,CAAC27B,eALpB;AAMLrV,iBAAW,EAAEtmB,OAAO,CAACsmB,WANhB;AAOLpG,iBAAW,EAAElgB,OAAO,CAACkgB;AAPhB,KAAP;AASD;;AACD,WAASqb,YAAT,CAAsB1a,KAAtB,EAA6Bma,SAA7B,EAAwC;AACtC,WAAOA,SAAS,IAAI7D,IAAI,CAACC,SAALD,CAAetW,KAAfsW,MAA0BA,IAAI,CAACC,SAALD,CAAe6D,SAAf7D,CAA9C;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxjFD;AACA;AACA;AACA;AACA;AACA;;;AAIA,QAAMyE,QAAN,CAAe;AACb1d,eAAW,GAAG;AACZ,WAAK2d,QAAL,GAAgB,IAAhB;AACA,WAAKC,OAAL,GAAe,IAAI/E,GAAJ,EAAf;AACA,WAAKgF,QAAL,GAAgB,KAAhB;AACA,WAAKC,SAAL,GAAiBn7B,SAAjB;AACD;;AACDo7B,WAAO,CAAC3b,KAAD,EAAQ4b,KAAR,EAAeC,IAAf,EAAqBp/B,IAArB,EAA2B;AAChC,YAAMq/B,SAAS,GAAGF,KAAK,CAAC/zB,SAAN+zB,CAAgBn/B,IAAhBm/B,CAAlB;AACA,YAAMG,QAAQ,GAAGH,KAAK,CAACI,QAAvB;AACAF,eAAS,CAAC7zB,OAAV6zB,CAAkBl+B,EAAE,IAAIA,EAAE,CAAC;AACzBoiB,aADyB;AAEzBic,eAAO,EAAEL,KAAK,CAACK,OAFU;AAGzBF,gBAHyB;AAIzBG,mBAAW,EAAE15B,IAAI,CAACoC,GAALpC,CAASq5B,IAAI,GAAGD,KAAK,CAACz1B,KAAtB3D,EAA6Bu5B,QAA7Bv5B;AAJY,OAAD,CAA1Bs5B;AAMD;;AACDK,YAAQ,GAAG;AACT,UAAI,KAAKZ,QAAT,EAAmB;AACjB;AACD;;AACD,WAAKE,QAAL,GAAgB,IAAhB;AACA,WAAKF,QAAL,GAAgBpyB,gBAAgB,CAACtM,IAAjBsM,CAAsBC,MAAtBD,EAA8B,MAAM;AAClD,aAAKizB,OAAL;;AACA,aAAKb,QAAL,GAAgB,IAAhB;;AACA,YAAI,KAAKE,QAAT,EAAmB;AACjB,eAAKU,QAAL;AACD;AALa,QAAhB;AAOD;;AACDC,WAAO,GAAoB;AAAA,UAAnBP,IAAmB,uEAAZQ,IAAI,CAACC,GAALD,EAAY;AACzB,UAAIE,SAAS,GAAG,CAAhB;;AACA,WAAKf,OAAL,CAAavzB,OAAb,CAAqB,CAAC2zB,KAAD,EAAQ5b,KAAR,KAAkB;AACrC,YAAI,CAAC4b,KAAK,CAACY,OAAP,IAAkB,CAACZ,KAAK,CAAClzB,KAANkzB,CAAYt9B,MAAnC,EAA2C;AACzC;AACD;;AACD,cAAMoK,KAAK,GAAGkzB,KAAK,CAAClzB,KAApB;AACA,YAAIvK,CAAC,GAAGuK,KAAK,CAACpK,MAANoK,GAAe,CAAvB;AACA,YAAI+zB,IAAI,GAAG,KAAX;AACA,YAAIt6B,IAAJ;;AACA,eAAOhE,CAAC,IAAI,CAAZ,EAAe,EAAEA,CAAjB,EAAoB;AAClBgE,cAAI,GAAGuG,KAAK,CAACvK,CAAD,CAAZgE;;AACA,cAAIA,IAAI,CAACu6B,OAAT,EAAkB;AAChB,gBAAIv6B,IAAI,CAACw6B,MAALx6B,GAAcy5B,KAAK,CAACI,QAAxB,EAAkC;AAChCJ,mBAAK,CAACI,QAANJ,GAAiBz5B,IAAI,CAACw6B,MAAtBf;AACD;;AACDz5B,gBAAI,CAACy6B,IAALz6B,CAAU05B,IAAV15B;AACAs6B,gBAAI,GAAG,IAAPA;AALF,iBAMO;AACL/zB,iBAAK,CAACvK,CAAD,CAALuK,GAAWA,KAAK,CAACA,KAAK,CAACpK,MAANoK,GAAe,CAAhB,CAAhBA;AACAA,iBAAK,CAACzE,GAANyE;AACD;AACF;;AACD,YAAI+zB,IAAJ,EAAU;AACRzc,eAAK,CAACyc,IAANzc;;AACA,eAAK2b,OAAL,CAAa3b,KAAb,EAAoB4b,KAApB,EAA2BC,IAA3B,EAAiC,UAAjC;AACD;;AACD,YAAI,CAACnzB,KAAK,CAACpK,MAAX,EAAmB;AACjBs9B,eAAK,CAACY,OAANZ,GAAgB,KAAhBA;;AACA,eAAKD,OAAL,CAAa3b,KAAb,EAAoB4b,KAApB,EAA2BC,IAA3B,EAAiC,UAAjC;;AACAD,eAAK,CAACK,OAANL,GAAgB,KAAhBA;AACD;;AACDW,iBAAS,IAAI7zB,KAAK,CAACpK,MAAnBi+B;AA9BF;;AAgCA,WAAKb,SAAL,GAAiBG,IAAjB;;AACA,UAAIU,SAAS,KAAK,CAAlB,EAAqB;AACnB,aAAKd,QAAL,GAAgB,KAAhB;AACD;AACF;;AACDoB,aAAS,CAAC7c,KAAD,EAAQ;AACf,YAAM8c,MAAM,GAAG,KAAKtB,OAApB;AACA,UAAII,KAAK,GAAGkB,MAAM,CAAChb,GAAPgb,CAAW9c,KAAX8c,CAAZ;;AACA,UAAI,CAAClB,KAAL,EAAY;AACVA,aAAK,GAAG;AACNY,iBAAO,EAAE,KADH;AAENP,iBAAO,EAAE,IAFH;AAGNvzB,eAAK,EAAE,EAHD;AAINb,mBAAS,EAAE;AACTk1B,oBAAQ,EAAE,EADD;AAETC,oBAAQ,EAAE;AAFD;AAJL,SAARpB;AASAkB,cAAM,CAACn0B,GAAPm0B,CAAW9c,KAAX8c,EAAkBlB,KAAlBkB;AACD;;AACD,aAAOlB,KAAP;AACD;;AACDqB,UAAM,CAACjd,KAAD,EAAQkd,KAAR,EAAeC,EAAf,EAAmB;AACvB,WAAKN,SAAL,CAAe7c,KAAf,EAAsBnY,SAAtB,CAAgCq1B,KAAhC,EAAuC17B,IAAvC,CAA4C27B,EAA5C;AACD;;AACDt0B,OAAG,CAACmX,KAAD,EAAQtX,KAAR,EAAe;AAChB,UAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACpK,MAArB,EAA6B;AAC3B;AACD;;AACD,WAAKu+B,SAAL,CAAe7c,KAAf,EAAsBtX,KAAtB,CAA4BlH,IAA5B,CAAiC,GAAGkH,KAApC;AACD;;AACDtG,OAAG,CAAC4d,KAAD,EAAQ;AACT,aAAO,KAAK6c,SAAL,CAAe7c,KAAf,EAAsBtX,KAAtB,CAA4BpK,MAA5B,GAAqC,CAA5C;AACD;;AACD6H,SAAK,CAAC6Z,KAAD,EAAQ;AACX,YAAM4b,KAAK,GAAG,KAAKJ,OAAL,CAAa1Z,GAAb,CAAiB9B,KAAjB,CAAd;;AACA,UAAI,CAAC4b,KAAL,EAAY;AACV;AACD;;AACDA,WAAK,CAACY,OAANZ,GAAgB,IAAhBA;AACAA,WAAK,CAACz1B,KAANy1B,GAAcS,IAAI,CAACC,GAALD,EAAdT;AACAA,WAAK,CAACI,QAANJ,GAAiBA,KAAK,CAAClzB,KAANkzB,CAAYwB,MAAZxB,CAAmB,CAACyB,GAAD,EAAMzD,GAAN,KAAcp3B,IAAI,CAACqC,GAALrC,CAAS66B,GAAT76B,EAAco3B,GAAG,CAAC0D,SAAlB96B,CAAjCo5B,EAA+D,CAA/DA,CAAjBA;;AACA,WAAKO,QAAL;AACD;;AACDK,WAAO,CAACxc,KAAD,EAAQ;AACb,UAAI,CAAC,KAAKyb,QAAV,EAAoB;AAClB,eAAO,KAAP;AACD;;AACD,YAAMG,KAAK,GAAG,KAAKJ,OAAL,CAAa1Z,GAAb,CAAiB9B,KAAjB,CAAd;;AACA,UAAI,CAAC4b,KAAD,IAAU,CAACA,KAAK,CAACY,OAAjB,IAA4B,CAACZ,KAAK,CAAClzB,KAANkzB,CAAYt9B,MAA7C,EAAqD;AACnD,eAAO,KAAP;AACD;;AACD,aAAO,IAAP;AACD;;AACDu7B,QAAI,CAAC7Z,KAAD,EAAQ;AACV,YAAM4b,KAAK,GAAG,KAAKJ,OAAL,CAAa1Z,GAAb,CAAiB9B,KAAjB,CAAd;;AACA,UAAI,CAAC4b,KAAD,IAAU,CAACA,KAAK,CAAClzB,KAANkzB,CAAYt9B,MAA3B,EAAmC;AACjC;AACD;;AACD,YAAMoK,KAAK,GAAGkzB,KAAK,CAAClzB,KAApB;AACA,UAAIvK,CAAC,GAAGuK,KAAK,CAACpK,MAANoK,GAAe,CAAvB;;AACA,aAAOvK,CAAC,IAAI,CAAZ,EAAe,EAAEA,CAAjB,EAAoB;AAClBuK,aAAK,CAACvK,CAAD,CAALuK,CAAS60B,MAAT70B;AACD;;AACDkzB,WAAK,CAAClzB,KAANkzB,GAAc,EAAdA;;AACA,WAAKD,OAAL,CAAa3b,KAAb,EAAoB4b,KAApB,EAA2BS,IAAI,CAACC,GAALD,EAA3B,EAAuC,UAAvC;AACD;;AACDmB,UAAM,CAACxd,KAAD,EAAQ;AACZ,aAAO,KAAKwb,OAAL,CAAatN,MAAb,CAAoBlO,KAApB,CAAP;AACD;;AArIY;;AAuIf,MAAIyd,QAAQ,GAAG,IAAInC,QAAJ,EAAf;AAEA,QAAM3e,WAAW,GAAG,aAApB;AACA,QAAM+gB,aAAa,GAAG;AACpBC,WAAO,CAAC70B,IAAD,EAAOkU,EAAP,EAAW4gB,MAAX,EAAmB;AACxB,aAAOA,MAAM,GAAG,GAATA,GAAe5gB,EAAf4gB,GAAoB90B,IAA3B;AAFkB;;AAIpBmV,SAAK,CAACnV,IAAD,EAAOkU,EAAP,EAAW4gB,MAAX,EAAmB;AACtB,YAAMC,EAAE,GAAG5f,KAAK,CAACnV,IAAI,IAAI6T,WAAT,CAAhB;AACA,YAAMwB,EAAE,GAAG0f,EAAE,CAAC9f,KAAH8f,IAAY5f,KAAK,CAACjB,EAAE,IAAIL,WAAP,CAA5B;AACA,aAAOwB,EAAE,IAAIA,EAAE,CAACJ,KAATI,GACHA,EAAE,CAACH,GAAHG,CAAO0f,EAAP1f,EAAWyf,MAAXzf,EAAmBhO,SAAnBgO,EADGA,GAEHnB,EAFJ;AAPkB;;AAWpB8gB,UAAM,CAACh1B,IAAD,EAAOkU,EAAP,EAAW4gB,MAAX,EAAmB;AACvB,aAAO90B,IAAI,GAAG,CAACkU,EAAE,GAAGlU,IAAN,IAAc80B,MAA5B;AACD;;AAbmB,GAAtB;;AAeA,QAAMG,SAAN,CAAgB;AACdngB,eAAW,CAACogB,GAAD,EAAM9+B,MAAN,EAAc6qB,IAAd,EAAoB/M,EAApB,EAAwB;AACjC,YAAMihB,YAAY,GAAG/+B,MAAM,CAAC6qB,IAAD,CAA3B;AACA/M,QAAE,GAAGqN,OAAO,CAAC,CAAC2T,GAAG,CAAChhB,EAAL,EAASA,EAAT,EAAaihB,YAAb,EAA2BD,GAAG,CAACl1B,IAA/B,CAAD,CAAZkU;AACA,YAAMlU,IAAI,GAAGuhB,OAAO,CAAC,CAAC2T,GAAG,CAACl1B,IAAL,EAAWm1B,YAAX,EAAyBjhB,EAAzB,CAAD,CAApB;AACA,WAAK0f,OAAL,GAAe,IAAf;AACA,WAAKwB,GAAL,GAAWF,GAAG,CAACpgC,EAAJogC,IAAUN,aAAa,CAACM,GAAG,CAACvhC,IAAJuhC,IAAY,OAAOl1B,IAApB,CAAlC;AACA,WAAKq1B,OAAL,GAAe7xB,OAAO,CAAC0xB,GAAG,CAACI,MAAL,CAAP9xB,IAAuBA,OAAO,CAACC,MAA9C;AACA,WAAK8xB,MAAL,GAAc77B,IAAI,CAACkB,KAALlB,CAAW65B,IAAI,CAACC,GAALD,MAAc2B,GAAG,CAACp0B,KAAJo0B,IAAa,CAA3B3B,CAAX75B,CAAd;AACA,WAAK86B,SAAL,GAAiB,KAAKX,MAAL,GAAcn6B,IAAI,CAACkB,KAALlB,CAAWw7B,GAAG,CAAChC,QAAfx5B,CAA/B;AACA,WAAKw3B,KAAL,GAAa,CAAC,CAACgE,GAAG,CAACpM,IAAnB;AACA,WAAK0M,OAAL,GAAep/B,MAAf;AACA,WAAKq/B,KAAL,GAAaxU,IAAb;AACA,WAAKyU,KAAL,GAAa11B,IAAb;AACA,WAAK21B,GAAL,GAAWzhB,EAAX;AACA,WAAK0hB,SAAL,GAAiBn+B,SAAjB;AACD;;AACDo+B,UAAM,GAAG;AACP,aAAO,KAAKjC,OAAZ;AACD;;AACDkC,UAAM,CAACZ,GAAD,EAAMhhB,EAAN,EAAU6e,IAAV,EAAgB;AACpB,UAAI,KAAKa,OAAT,EAAkB;AAChB,aAAKf,OAAL,CAAa,KAAb;;AACA,cAAMsC,YAAY,GAAG,KAAKK,OAAL,CAAa,KAAKC,KAAlB,CAArB;AACA,cAAMM,OAAO,GAAGhD,IAAI,GAAG,KAAKwC,MAA5B;AACA,cAAMS,MAAM,GAAG,KAAKxB,SAAL,GAAiBuB,OAAhC;AACA,aAAKR,MAAL,GAAcxC,IAAd;AACA,aAAKyB,SAAL,GAAiB96B,IAAI,CAACkB,KAALlB,CAAWA,IAAI,CAACqC,GAALrC,CAASs8B,MAATt8B,EAAiBw7B,GAAG,CAAChC,QAArBx5B,CAAXA,CAAjB;AACA,aAAKm6B,MAAL,IAAekC,OAAf;AACA,aAAK7E,KAAL,GAAa,CAAC,CAACgE,GAAG,CAACpM,IAAnB;AACA,aAAK6M,GAAL,GAAWpU,OAAO,CAAC,CAAC2T,GAAG,CAAChhB,EAAL,EAASA,EAAT,EAAaihB,YAAb,EAA2BD,GAAG,CAACl1B,IAA/B,CAAD,CAAlB;AACA,aAAK01B,KAAL,GAAanU,OAAO,CAAC,CAAC2T,GAAG,CAACl1B,IAAL,EAAWm1B,YAAX,EAAyBjhB,EAAzB,CAAD,CAApB;AACD;AACF;;AACDugB,UAAM,GAAG;AACP,UAAI,KAAKb,OAAT,EAAkB;AAChB,aAAKE,IAAL,CAAUP,IAAI,CAACC,GAALD,EAAV;AACA,aAAKK,OAAL,GAAe,KAAf;;AACA,aAAKf,OAAL,CAAa,KAAb;AACD;AACF;;AACDiB,QAAI,CAACf,IAAD,EAAO;AACT,YAAMgD,OAAO,GAAGhD,IAAI,GAAG,KAAKwC,MAA5B;AACA,YAAMrC,QAAQ,GAAG,KAAKsB,SAAtB;AACA,YAAMvT,IAAI,GAAG,KAAKwU,KAAlB;AACA,YAAMz1B,IAAI,GAAG,KAAK01B,KAAlB;AACA,YAAM5M,IAAI,GAAG,KAAKoI,KAAlB;AACA,YAAMhd,EAAE,GAAG,KAAKyhB,GAAhB;AACA,UAAIb,MAAJ;AACA,WAAKlB,OAAL,GAAe5zB,IAAI,KAAKkU,EAATlU,KAAgB8oB,IAAI,IAAKiN,OAAO,GAAG7C,QAAnClzB,CAAf;;AACA,UAAI,CAAC,KAAK4zB,OAAV,EAAmB;AACjB,aAAK4B,OAAL,CAAavU,IAAb,IAAqB/M,EAArB;;AACA,aAAK2e,OAAL,CAAa,IAAb;;AACA;AACD;;AACD,UAAIkD,OAAO,GAAG,CAAd,EAAiB;AACf,aAAKP,OAAL,CAAavU,IAAb,IAAqBjhB,IAArB;AACA;AACD;;AACD80B,YAAM,GAAIiB,OAAO,GAAG7C,QAAV6C,GAAsB,CAAhCjB;AACAA,YAAM,GAAGhM,IAAI,IAAIgM,MAAM,GAAG,CAAjBhM,GAAqB,IAAIgM,MAAzBhM,GAAkCgM,MAA3CA;AACAA,YAAM,GAAG,KAAKO,OAAL,CAAa37B,IAAI,CAACoC,GAALpC,CAAS,CAATA,EAAYA,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYo7B,MAAZp7B,CAAZA,CAAb,CAATo7B;AACA,WAAKU,OAAL,CAAavU,IAAb,IAAqB,KAAKmU,GAAL,CAASp1B,IAAT,EAAekU,EAAf,EAAmB4gB,MAAnB,CAArB;AACD;;AACDmB,QAAI,GAAG;AACL,YAAMC,QAAQ,GAAG,KAAKN,SAAL,KAAmB,KAAKA,SAAL,GAAiB,EAApC,CAAjB;AACA,aAAO,IAAIO,OAAJ,CAAY,CAAC72B,GAAD,EAAM82B,GAAN,KAAc;AAC/BF,gBAAQ,CAACx9B,IAATw9B,CAAc;AAAC52B,aAAD;AAAM82B;AAAN,SAAdF;AADK,QAAP;AAGD;;AACDrD,WAAO,CAACwD,QAAD,EAAW;AAChB,YAAMj3B,MAAM,GAAGi3B,QAAQ,GAAG,KAAH,GAAW,KAAlC;AACA,YAAMH,QAAQ,GAAG,KAAKN,SAAL,IAAkB,EAAnC;;AACA,WAAK,IAAIvgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6gC,QAAQ,CAAC1gC,MAA7B,EAAqCH,CAAC,EAAtC,EAA0C;AACxC6gC,gBAAQ,CAAC7gC,CAAD,CAAR6gC,CAAY92B,MAAZ82B;AACD;AACF;;AA5Ea;;AA+EhB,QAAMI,OAAO,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,aAAX,EAA0B,QAA1B,EAAoC,SAApC,CAAhB;AACA,QAAMC,MAAM,GAAG,CAAC,OAAD,EAAU,aAAV,EAAyB,iBAAzB,CAAf;AACA3c,UAAQ,CAAC/Z,GAAT+Z,CAAa,WAAbA,EAA0B;AACxB9Y,SAAK,EAAErJ,SADiB;AAExBy7B,YAAQ,EAAE,IAFc;AAGxBoC,UAAM,EAAE,cAHgB;AAIxBxgC,MAAE,EAAE2C,SAJoB;AAKxBuI,QAAI,EAAEvI,SALkB;AAMxBqxB,QAAI,EAAErxB,SANkB;AAOxByc,MAAE,EAAEzc,SAPoB;AAQxB9D,QAAI,EAAE8D;AARkB,GAA1BmiB;AAUA,QAAM4c,gBAAgB,GAAG5iC,MAAM,CAAC2B,IAAP3B,CAAYgmB,QAAQ,CAAChD,SAArBhjB,CAAzB;AACAgmB,UAAQ,CAACb,QAATa,CAAkB,WAAlBA,EAA+B;AAC7BI,aAAS,EAAE,KADkB;AAE7BD,cAAU,EAAE,KAFiB;AAG7BF,eAAW,EAAGV,IAAD,IAAUA,IAAI,KAAK,YAATA,IAAyBA,IAAI,KAAK,YAAlCA,IAAkDA,IAAI,KAAK;AAHrD,GAA/BS;AAKAA,UAAQ,CAAC/Z,GAAT+Z,CAAa,YAAbA,EAA2B;AACzB2c,UAAM,EAAE;AACN5iC,UAAI,EAAE,OADA;AAEN8iC,gBAAU,EAAEF;AAFN,KADiB;AAKzBD,WAAO,EAAE;AACP3iC,UAAI,EAAE,QADC;AAEP8iC,gBAAU,EAAEH;AAFL;AALgB,GAA3B1c;AAUAA,UAAQ,CAACb,QAATa,CAAkB,YAAlBA,EAAgC;AAC9BI,aAAS,EAAE;AADmB,GAAhCJ;AAGAA,UAAQ,CAAC/Z,GAAT+Z,CAAa,aAAbA,EAA4B;AAC1Bic,UAAM,EAAE;AACNjf,eAAS,EAAE;AACTsc,gBAAQ,EAAE;AADD;AADL,KADkB;AAM1BwD,UAAM,EAAE;AACN9f,eAAS,EAAE;AACTsc,gBAAQ,EAAE;AADD;AADL,KANkB;AAW1ByD,QAAI,EAAE;AACJC,gBAAU,EAAE;AACVL,cAAM,EAAE;AACNv2B,cAAI,EAAE;AADA,SADE;AAIV62B,eAAO,EAAE;AACPljC,cAAI,EAAE,SADC;AAEPu/B,kBAAQ,EAAE;AAFH;AAJC;AADR,KAXoB;AAsB1B4D,QAAI,EAAE;AACJF,gBAAU,EAAE;AACVL,cAAM,EAAE;AACNriB,YAAE,EAAE;AADE,SADE;AAIV2iB,eAAO,EAAE;AACPljC,cAAI,EAAE,SADC;AAEP2hC,gBAAM,EAAE,QAFD;AAGPxgC,YAAE,EAAE+C,CAAC,IAAIA,CAAC,GAAG;AAHN;AAJC;AADR;AAtBoB,GAA5B+hB;;AAmCA,QAAMmd,UAAN,CAAiB;AACfjiB,eAAW,CAACoC,KAAD,EAAQ8f,MAAR,EAAgB;AACzB,WAAKxF,MAAL,GAActa,KAAd;AACA,WAAK+f,WAAL,GAAmB,IAAItJ,GAAJ,EAAnB;AACA,WAAKuJ,SAAL,CAAeF,MAAf;AACD;;AACDE,aAAS,CAACF,MAAD,EAAS;AAChB,UAAI,CAAC/iC,QAAQ,CAAC+iC,MAAD,CAAb,EAAuB;AACrB;AACD;;AACD,YAAMG,aAAa,GAAG,KAAKF,WAA3B;AACArjC,YAAM,CAACwjC,mBAAPxjC,CAA2BojC,MAA3BpjC,EAAmCuL,OAAnCvL,CAA2C6C,GAAG,IAAI;AAChD,cAAMy+B,GAAG,GAAG8B,MAAM,CAACvgC,GAAD,CAAlB;;AACA,YAAI,CAACxC,QAAQ,CAACihC,GAAD,CAAb,EAAoB;AAClB;AACD;;AACD,cAAMmB,QAAQ,GAAG,EAAjB;;AACA,aAAK,MAAMgB,MAAX,IAAqBb,gBAArB,EAAuC;AACrCH,kBAAQ,CAACgB,MAAD,CAARhB,GAAmBnB,GAAG,CAACmC,MAAD,CAAtBhB;AACD;;AACD,SAAC5iC,OAAO,CAACyhC,GAAG,CAACuB,UAAL,CAAPhjC,IAA2ByhC,GAAG,CAACuB,UAA/BhjC,IAA6C,CAACgD,GAAD,CAA9C,EAAqD0I,OAArD,CAA8D8hB,IAAD,IAAU;AACrE,cAAIA,IAAI,KAAKxqB,GAATwqB,IAAgB,CAACkW,aAAa,CAAC79B,GAAd69B,CAAkBlW,IAAlBkW,CAArB,EAA8C;AAC5CA,yBAAa,CAACt3B,GAAds3B,CAAkBlW,IAAlBkW,EAAwBd,QAAxBc;AACD;AAHH;AATF;AAeD;;AACDG,mBAAe,CAAClhC,MAAD,EAASsI,MAAT,EAAiB;AAC9B,YAAM64B,UAAU,GAAG74B,MAAM,CAAC9H,OAA1B;AACA,YAAMA,OAAO,GAAG4gC,oBAAoB,CAACphC,MAAD,EAASmhC,UAAT,CAApC;;AACA,UAAI,CAAC3gC,OAAL,EAAc;AACZ,eAAO,EAAP;AACD;;AACD,YAAMggC,UAAU,GAAG,KAAKa,iBAAL,CAAuB7gC,OAAvB,EAAgC2gC,UAAhC,CAAnB;;AACA,UAAIA,UAAU,CAACG,OAAf,EAAwB;AACtBC,gBAAQ,CAACvhC,MAAM,CAACQ,OAAPR,CAAewhC,WAAhB,EAA6BL,UAA7B,CAARI,CAAiDE,IAAjDF,CAAsD,MAAM;AAC1DvhC,gBAAM,CAACQ,OAAPR,GAAiBmhC,UAAjBnhC;AADF,WAEG,MAAM,CAFT;AAID;;AACD,aAAOwgC,UAAP;AACD;;AACDa,qBAAiB,CAACrhC,MAAD,EAASsI,MAAT,EAAiB;AAChC,YAAMy4B,aAAa,GAAG,KAAKF,WAA3B;AACA,YAAML,UAAU,GAAG,EAAnB;AACA,YAAMlD,OAAO,GAAGt9B,MAAM,CAACwhC,WAAPxhC,KAAuBA,MAAM,CAACwhC,WAAPxhC,GAAqB,EAA5CA,CAAhB;AACA,YAAM0qB,KAAK,GAAGltB,MAAM,CAAC2B,IAAP3B,CAAY8K,MAAZ9K,CAAd;AACA,YAAMm/B,IAAI,GAAGQ,IAAI,CAACC,GAALD,EAAb;AACA,UAAIl+B,CAAJ;;AACA,WAAKA,CAAC,GAAGyrB,KAAK,CAACtrB,MAANsrB,GAAe,CAAxB,EAA2BzrB,CAAC,IAAI,CAAhC,EAAmC,EAAEA,CAArC,EAAwC;AACtC,cAAM4rB,IAAI,GAAGH,KAAK,CAACzrB,CAAD,CAAlB;;AACA,YAAI4rB,IAAI,CAACpoB,MAALooB,CAAY,CAAZA,MAAmB,GAAvB,EAA4B;AAC1B;AACD;;AACD,YAAIA,IAAI,KAAK,SAAb,EAAwB;AACtB2V,oBAAU,CAACl+B,IAAXk+B,CAAgB,GAAG,KAAKU,eAAL,CAAqBlhC,MAArB,EAA6BsI,MAA7B,CAAnBk4B;AACA;AACD;;AACD,cAAMpjC,KAAK,GAAGkL,MAAM,CAACuiB,IAAD,CAApB;AACA,YAAIrK,SAAS,GAAG8c,OAAO,CAACzS,IAAD,CAAvB;AACA,cAAMiU,GAAG,GAAGiC,aAAa,CAACne,GAAdme,CAAkBlW,IAAlBkW,CAAZ;;AACA,YAAIvgB,SAAJ,EAAe;AACb,cAAIse,GAAG,IAAIte,SAAS,CAACif,MAAVjf,EAAX,EAA+B;AAC7BA,qBAAS,CAACkf,MAAVlf,CAAiBse,GAAjBte,EAAsBpjB,KAAtBojB,EAA6Bmc,IAA7Bnc;AACA;AAFF,iBAGO;AACLA,qBAAS,CAAC6d,MAAV7d;AACD;AACF;;AACD,YAAI,CAACse,GAAD,IAAQ,CAACA,GAAG,CAAChC,QAAjB,EAA2B;AACzB98B,gBAAM,CAAC6qB,IAAD,CAAN7qB,GAAe5C,KAAf4C;AACA;AACD;;AACDs9B,eAAO,CAACzS,IAAD,CAAPyS,GAAgB9c,SAAS,GAAG,IAAIqe,SAAJ,CAAcC,GAAd,EAAmB9+B,MAAnB,EAA2B6qB,IAA3B,EAAiCztB,KAAjC,CAA5BkgC;AACAkD,kBAAU,CAACl+B,IAAXk+B,CAAgBhgB,SAAhBggB;AACD;;AACD,aAAOA,UAAP;AACD;;AACDd,UAAM,CAAC1/B,MAAD,EAASsI,MAAT,EAAiB;AACrB,UAAI,KAAKu4B,WAAL,CAAiB79B,IAAjB,KAA0B,CAA9B,EAAiC;AAC/BxF,cAAM,CAACsP,MAAPtP,CAAcwC,MAAdxC,EAAsB8K,MAAtB9K;AACA;AACD;;AACD,YAAMgjC,UAAU,GAAG,KAAKa,iBAAL,CAAuBrhC,MAAvB,EAA+BsI,MAA/B,CAAnB;;AACA,UAAIk4B,UAAU,CAACphC,MAAf,EAAuB;AACrBm/B,gBAAQ,CAAC50B,GAAT40B,CAAa,KAAKnD,MAAlBmD,EAA0BiC,UAA1BjC;AACA,eAAO,IAAP;AACD;AACF;;AAxFc;;AA0FjB,WAASgD,QAAT,CAAkBf,UAAlB,EAA8BH,UAA9B,EAA0C;AACxC,UAAM/C,OAAO,GAAG,EAAhB;AACA,UAAMn+B,IAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAY6iC,UAAZ7iC,CAAb;;AACA,SAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,IAAI,CAACC,MAAzB,EAAiCH,CAAC,EAAlC,EAAsC;AACpC,YAAMyiC,IAAI,GAAGlB,UAAU,CAACrhC,IAAI,CAACF,CAAD,CAAL,CAAvB;;AACA,UAAIyiC,IAAI,IAAIA,IAAI,CAACjC,MAALiC,EAAZ,EAA2B;AACzBpE,eAAO,CAACh7B,IAARg7B,CAAaoE,IAAI,CAAC7B,IAAL6B,EAAbpE;AACD;AACF;;AACD,WAAOyC,OAAO,CAAC4B,GAAR5B,CAAYzC,OAAZyC,CAAP;AACD;;AACD,WAASqB,oBAAT,CAA8BphC,MAA9B,EAAsCmhC,UAAtC,EAAkD;AAChD,QAAI,CAACA,UAAL,EAAiB;AACf;AACD;;AACD,QAAI3gC,OAAO,GAAGR,MAAM,CAACQ,OAArB;;AACA,QAAI,CAACA,OAAL,EAAc;AACZR,YAAM,CAACQ,OAAPR,GAAiBmhC,UAAjBnhC;AACA;AACD;;AACD,QAAIQ,OAAO,CAAC8gC,OAAZ,EAAqB;AACnBthC,YAAM,CAACQ,OAAPR,GAAiBQ,OAAO,GAAGhD,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkBgD,OAAlBhD,EAA2B;AAAC8jC,eAAO,EAAE,KAAV;AAAiBE,mBAAW,EAAE;AAA9B,OAA3BhkC,CAA3BwC;AACD;;AACD,WAAOQ,OAAP;AACD;;AAED,WAASohC,SAAT,CAAmBrf,KAAnB,EAA0Bsf,eAA1B,EAA2C;AACzC,UAAMzZ,IAAI,GAAG7F,KAAK,IAAIA,KAAK,CAAC/hB,OAAf+hB,IAA0B,EAAvC;AACA,UAAMvjB,OAAO,GAAGopB,IAAI,CAACppB,OAArB;AACA,UAAM0G,GAAG,GAAG0iB,IAAI,CAAC1iB,GAAL0iB,KAAa/mB,SAAb+mB,GAAyByZ,eAAzBzZ,GAA2C,CAAvD;AACA,UAAMziB,GAAG,GAAGyiB,IAAI,CAACziB,GAALyiB,KAAa/mB,SAAb+mB,GAAyByZ,eAAzBzZ,GAA2C,CAAvD;AACA,WAAO;AACLnhB,WAAK,EAAEjI,OAAO,GAAG2G,GAAH,GAASD,GADlB;AAELwB,SAAG,EAAElI,OAAO,GAAG0G,GAAH,GAASC;AAFhB,KAAP;AAID;;AACD,WAASm8B,WAAT,CAAqBz1B,MAArB,EAA6BC,MAA7B,EAAqCu1B,eAArC,EAAsD;AACpD,QAAIA,eAAe,KAAK,KAAxB,EAA+B;AAC7B,aAAO,KAAP;AACD;;AACD,UAAMngC,CAAC,GAAGkgC,SAAS,CAACv1B,MAAD,EAASw1B,eAAT,CAAnB;AACA,UAAMjgC,CAAC,GAAGggC,SAAS,CAACt1B,MAAD,EAASu1B,eAAT,CAAnB;AACA,WAAO;AACLza,SAAG,EAAExlB,CAAC,CAACsF,GADF;AAELiE,WAAK,EAAEzJ,CAAC,CAACwF,GAFJ;AAGLmgB,YAAM,EAAEzlB,CAAC,CAACqF,KAHL;AAILiE,UAAI,EAAExJ,CAAC,CAACuF;AAJH,KAAP;AAMD;;AACD,WAAS86B,MAAT,CAAgB3kC,KAAhB,EAAuB;AACrB,QAAI4P,CAAJ,EAAO4D,CAAP,EAAU7N,CAAV,EAAayM,CAAb;;AACA,QAAI3R,QAAQ,CAACT,KAAD,CAAZ,EAAqB;AACnB4P,OAAC,GAAG5P,KAAK,CAACgqB,GAAVpa;AACA4D,OAAC,GAAGxT,KAAK,CAAC+N,KAAVyF;AACA7N,OAAC,GAAG3F,KAAK,CAACiqB,MAAVtkB;AACAyM,OAAC,GAAGpS,KAAK,CAAC8N,IAAVsE;AAJF,WAKO;AACLxC,OAAC,GAAG4D,CAAC,GAAG7N,CAAC,GAAGyM,CAAC,GAAGpS,KAAhB4P;AACD;;AACD,WAAO;AACLoa,SAAG,EAAEpa,CADA;AAEL7B,WAAK,EAAEyF,CAFF;AAGLyW,YAAM,EAAEtkB,CAHH;AAILmI,UAAI,EAAEsE,CAJD;AAKLwyB,cAAQ,EAAE5kC,KAAK,KAAK;AALf,KAAP;AAOD;;AACD,WAAS6kC,uBAAT,CAAiCnhB,KAAjC,EAAwCohB,aAAxC,EAAuD;AACrD,UAAM/iC,IAAI,GAAG,EAAb;;AACA,UAAMgjC,QAAQ,GAAGrhB,KAAK,CAACshB,sBAANthB,CAA6BohB,aAA7BphB,CAAjB;;AACA,QAAI7hB,CAAJ,EAAOO,IAAP;;AACA,SAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG2iC,QAAQ,CAAC/iC,MAA5B,EAAoCH,CAAC,GAAGO,IAAxC,EAA8C,EAAEP,CAAhD,EAAmD;AACjDE,UAAI,CAACmD,IAALnD,CAAUgjC,QAAQ,CAACljC,CAAD,CAARkjC,CAAYviC,KAAtBT;AACD;;AACD,WAAOA,IAAP;AACD;;AACD,WAASkjC,UAAT,CAAoBC,KAApB,EAA2BllC,KAA3B,EAAkCmlC,OAAlC,EAAyD;AAAA,QAAd/hC,OAAc,uEAAJ,EAAI;AACvD,UAAMrB,IAAI,GAAGmjC,KAAK,CAACnjC,IAAnB;AACA,UAAMqjC,UAAU,GAAGhiC,OAAO,CAACshB,IAARthB,KAAiB,QAApC;AACA,QAAIvB,CAAJ,EAAOO,IAAP,EAAaG,YAAb,EAA2B8iC,UAA3B;;AACA,QAAIrlC,KAAK,KAAK,IAAd,EAAoB;AAClB;AACD;;AACD,SAAK6B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGL,IAAI,CAACC,MAAxB,EAAgCH,CAAC,GAAGO,IAApC,EAA0C,EAAEP,CAA5C,EAA+C;AAC7CU,kBAAY,GAAG,CAACR,IAAI,CAACF,CAAD,CAApBU;;AACA,UAAIA,YAAY,KAAK4iC,OAArB,EAA8B;AAC5B,YAAI/hC,OAAO,CAACmhC,GAAZ,EAAiB;AACf;AACD;;AACD;AACD;;AACDc,gBAAU,GAAGH,KAAK,CAACh6B,MAANg6B,CAAa3iC,YAAb2iC,CAAbG;;AACA,UAAI3kC,cAAc,CAAC2kC,UAAD,CAAd3kC,KAA+B0kC,UAAU,IAAKplC,KAAK,KAAK,CAAzBolC,IAA8Bx+B,IAAI,CAAC5G,KAAD,CAAJ4G,KAAgBA,IAAI,CAACy+B,UAAD,CAAjF3kC,CAAJ,EAAqG;AACnGV,aAAK,IAAIqlC,UAATrlC;AACD;AACF;;AACD,WAAOA,KAAP;AACD;;AACD,WAASslC,wBAAT,CAAkC3e,IAAlC,EAAwC;AACtC,UAAM5kB,IAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAYumB,IAAZvmB,CAAb;AACA,UAAMmlC,KAAK,GAAG,IAAIrlC,KAAJ,CAAU6B,IAAI,CAACC,MAAf,CAAd;AACA,QAAIH,CAAJ,EAAOO,IAAP,EAAaa,GAAb;;AACA,SAAKpB,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGL,IAAI,CAACC,MAAxB,EAAgCH,CAAC,GAAGO,IAApC,EAA0C,EAAEP,CAA5C,EAA+C;AAC7CoB,SAAG,GAAGlB,IAAI,CAACF,CAAD,CAAVoB;AACAsiC,WAAK,CAAC1jC,CAAD,CAAL0jC,GAAW;AACTjhC,SAAC,EAAErB,GADM;AAETuB,SAAC,EAAEmiB,IAAI,CAAC1jB,GAAD;AAFE,OAAXsiC;AAID;;AACD,WAAOA,KAAP;AACD;;AACD,WAASC,SAAT,CAAmBrgB,KAAnB,EAA0BhX,IAA1B,EAAgC;AAC9B,UAAMs3B,OAAO,GAAGtgB,KAAK,IAAIA,KAAK,CAAC/hB,OAAN+hB,CAAcsgB,OAAvC;AACA,WAAOA,OAAO,IAAKA,OAAO,KAAKxhC,SAAZwhC,IAAyBt3B,IAAI,CAAC+2B,KAAL/2B,KAAelK,SAA3D;AACD;;AACD,WAASyhC,WAAT,CAAqBC,UAArB,EAAiCC,UAAjC,EAA6Cz3B,IAA7C,EAAmD;AACjD,qBAAUw3B,UAAU,CAAC7lC,EAArB,cAA2B8lC,UAAU,CAAC9lC,EAAtC,cAA4CqO,IAAI,CAAC+2B,KAAL/2B,IAAcA,IAAI,CAAChO,IAA/D;AACD;;AACD,WAAS2O,aAAT,CAAuBqW,KAAvB,EAA8B;AAC5B,UAAM;AAAC7c,SAAD;AAAMC,SAAN;AAAWqG,gBAAX;AAAuBC;AAAvB,QAAqCsW,KAAK,CAACrW,aAANqW,EAA3C;AACA,WAAO;AACL7c,SAAG,EAAEsG,UAAU,GAAGtG,GAAH,GAAS3H,MAAM,CAACklC,iBAD1B;AAELt9B,SAAG,EAAEsG,UAAU,GAAGtG,GAAH,GAAS5H,MAAM,CAAC2F;AAF1B,KAAP;AAID;;AACD,WAASw/B,gBAAT,CAA0BC,MAA1B,EAAkCC,QAAlC,EAA4CC,UAA5C,EAAwD;AACtD,UAAMC,QAAQ,GAAGH,MAAM,CAACC,QAAD,CAAND,KAAqBA,MAAM,CAACC,QAAD,CAAND,GAAmB,EAAxCA,CAAjB;AACA,WAAOG,QAAQ,CAACD,UAAD,CAARC,KAAyBA,QAAQ,CAACD,UAAD,CAARC,GAAuB,EAAhDA,CAAP;AACD;;AACD,WAASC,mBAAT,CAA6BjB,KAA7B,EAAoCkB,MAApC,EAA4CC,QAA5C,EAAsDlmC,IAAtD,EAA4D;AAC1D,SAAK,MAAMgO,IAAX,IAAmBi4B,MAAM,CAACE,uBAAPF,CAA+BjmC,IAA/BimC,EAAqCxkC,OAArCwkC,EAAnB,EAAmE;AACjE,YAAMpmC,KAAK,GAAGklC,KAAK,CAAC/2B,IAAI,CAAC3L,KAAN,CAAnB;;AACA,UAAK6jC,QAAQ,IAAIrmC,KAAK,GAAG,CAApBqmC,IAA2B,CAACA,QAAD,IAAarmC,KAAK,GAAG,CAArD,EAAyD;AACvD,eAAOmO,IAAI,CAAC3L,KAAZ;AACD;AACF;;AACD,WAAO,IAAP;AACD;;AACD,WAAS+jC,YAAT,CAAsBC,UAAtB,EAAkC5T,MAAlC,EAA0C;AACxC,UAAM;AAAClP,WAAD;AAAQ+iB,iBAAW,EAAEt4B;AAArB,QAA6Bq4B,UAAnC;AACA,UAAMT,MAAM,GAAGriB,KAAK,CAACgjB,OAANhjB,KAAkBA,KAAK,CAACgjB,OAANhjB,GAAgB,EAAlCA,CAAf;AACA,UAAM;AAACjV,YAAD;AAAS23B,YAAT;AAAiB5jC,WAAK,EAAED;AAAxB,QAAwC4L,IAA9C;AACA,UAAMw4B,KAAK,GAAGl4B,MAAM,CAACE,IAArB;AACA,UAAMi4B,KAAK,GAAGR,MAAM,CAACz3B,IAArB;AACA,UAAM1L,GAAG,GAAGyiC,WAAW,CAACj3B,MAAD,EAAS23B,MAAT,EAAiBj4B,IAAjB,CAAvB;AACA,UAAM/L,IAAI,GAAGwwB,MAAM,CAAC5wB,MAApB;AACA,QAAIkjC,KAAJ;;AACA,SAAK,IAAIrjC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGO,IAApB,EAA0B,EAAEP,CAA5B,EAA+B;AAC7B,YAAMgE,IAAI,GAAG+sB,MAAM,CAAC/wB,CAAD,CAAnB;AACA,YAAM;AAAC,SAAC8kC,KAAD,GAASnkC,KAAV;AAAiB,SAACokC,KAAD,GAAS5mC;AAA1B,UAAmC6F,IAAzC;AACA,YAAMghC,UAAU,GAAGhhC,IAAI,CAAC6gC,OAAL7gC,KAAiBA,IAAI,CAAC6gC,OAAL7gC,GAAe,EAAhCA,CAAnB;AACAq/B,WAAK,GAAG2B,UAAU,CAACD,KAAD,CAAVC,GAAoBf,gBAAgB,CAACC,MAAD,EAAS9iC,GAAT,EAAcT,KAAd,CAA5C0iC;AACAA,WAAK,CAAC3iC,YAAD,CAAL2iC,GAAsBllC,KAAtBklC;AACAA,WAAK,CAAC4B,IAAN5B,GAAaiB,mBAAmB,CAACjB,KAAD,EAAQkB,MAAR,EAAgB,IAAhB,EAAsBj4B,IAAI,CAAChO,IAA3B,CAAhC+kC;AACAA,WAAK,CAAC6B,OAAN7B,GAAgBiB,mBAAmB,CAACjB,KAAD,EAAQkB,MAAR,EAAgB,KAAhB,EAAuBj4B,IAAI,CAAChO,IAA5B,CAAnC+kC;AACD;AACF;;AACD,WAAS8B,eAAT,CAAyBtjB,KAAzB,EAAgC/U,IAAhC,EAAsC;AACpC,UAAMyW,MAAM,GAAG1B,KAAK,CAAC0B,MAArB;AACA,WAAOhlB,MAAM,CAAC2B,IAAP3B,CAAYglB,MAAZhlB,EAAoB2xB,MAApB3xB,CAA2B6C,GAAG,IAAImiB,MAAM,CAACniB,GAAD,CAANmiB,CAAYzW,IAAZyW,KAAqBzW,IAAvDvO,EAA6D6mC,KAA7D7mC,EAAP;AACD;;AACD,WAAS8mC,oBAAT,CAA8BhV,MAA9B,EAAsC1vB,KAAtC,EAA6C;AAC3C,WAAOisB,aAAa,CAACyD,MAAD,EAClB;AACEmQ,YAAM,EAAE,KADV;AAEE8E,aAAO,EAAEljC,SAFX;AAGE1B,kBAAY,EAAEC,KAHhB;AAIEA,WAJF;AAKEkiB,UAAI,EAAE,SALR;AAMEvkB,UAAI,EAAE;AANR,KADkB,CAApB;AAUD;;AACD,WAASinC,iBAAT,CAA2BlV,MAA3B,EAAmC1vB,KAAnC,EAA0C+zB,OAA1C,EAAmD;AACjD,WAAO9H,aAAa,CAACyD,MAAD,EAAS;AAC3BmQ,YAAM,EAAE,KADmB;AAE3BgF,eAAS,EAAE7kC,KAFgB;AAG3BowB,YAAM,EAAE3uB,SAHmB;AAI3BqjC,SAAG,EAAErjC,SAJsB;AAK3BsyB,aAL2B;AAM3B/zB,WAN2B;AAO3BkiB,UAAI,EAAE,SAPqB;AAQ3BvkB,UAAI,EAAE;AARqB,KAAT,CAApB;AAUD;;AACD,WAASonC,WAAT,CAAqBp5B,IAArB,EAA2B/B,KAA3B,EAAkC;AAChC,UAAM7J,YAAY,GAAG4L,IAAI,CAACq4B,UAALr4B,CAAgB3L,KAArC;AACA,UAAMmM,IAAI,GAAGR,IAAI,CAACi4B,MAALj4B,IAAeA,IAAI,CAACi4B,MAALj4B,CAAYQ,IAAxC;;AACA,QAAI,CAACA,IAAL,EAAW;AACT;AACD;;AACDvC,SAAK,GAAGA,KAAK,IAAI+B,IAAI,CAACO,OAAtBtC;;AACA,SAAK,MAAMwmB,MAAX,IAAqBxmB,KAArB,EAA4B;AAC1B,YAAM25B,MAAM,GAAGnT,MAAM,CAAC8T,OAAtB;;AACA,UAAI,CAACX,MAAD,IAAWA,MAAM,CAACp3B,IAAD,CAANo3B,KAAiB9hC,SAA5B,IAAyC8hC,MAAM,CAACp3B,IAAD,CAANo3B,CAAaxjC,YAAbwjC,MAA+B9hC,SAA5E,EAAuF;AACrF;AACD;;AACD,aAAO8hC,MAAM,CAACp3B,IAAD,CAANo3B,CAAaxjC,YAAbwjC,CAAP;AACD;AACF;;AACD,QAAMyB,kBAAkB,GAAI9iB,IAAD,IAAUA,IAAI,KAAK,OAATA,IAAoBA,IAAI,KAAK,MAAlE;;AACA,QAAM+iB,gBAAgB,GAAG,CAACC,MAAD,EAASC,MAAT,KAAoBA,MAAM,GAAGD,MAAH,GAAYtnC,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkBsnC,MAAlBtnC,CAA/D;;AACA,QAAMwnC,WAAW,GAAG,CAACC,QAAD,EAAW15B,IAAX,EAAiBuV,KAAjB,KAA2BmkB,QAAQ,IAAI,CAAC15B,IAAI,CAAC25B,MAAlBD,IAA4B15B,IAAI,CAAC45B,QAAjCF,IAC1C;AAAC9lC,QAAI,EAAE8iC,uBAAuB,CAACnhB,KAAD,EAAQ,IAAR,CAA9B;AAA6CxY,UAAM,EAAE;AAArD,GADL;;AAEA,QAAM88B,iBAAN,CAAwB;AACtB1mB,eAAW,CAACoC,KAAD,EAAQnhB,YAAR,EAAsB;AAC/B,WAAKmhB,KAAL,GAAaA,KAAb;AACA,WAAKukB,IAAL,GAAYvkB,KAAK,CAACW,GAAlB;AACA,WAAK7hB,KAAL,GAAaD,YAAb;AACA,WAAK2lC,eAAL,GAAuB,EAAvB;AACA,WAAKzB,WAAL,GAAmB,KAAK0B,OAAL,EAAnB;AACA,WAAKC,KAAL,GAAa,KAAK3B,WAAL,CAAiBtmC,IAA9B;AACA,WAAKiD,OAAL,GAAea,SAAf;AACA,WAAK0uB,QAAL,GAAgB,KAAhB;AACA,WAAK0V,KAAL,GAAapkC,SAAb;AACA,WAAKqkC,WAAL,GAAmBrkC,SAAnB;AACA,WAAKskC,cAAL,GAAsBtkC,SAAtB;AACA,WAAKukC,UAAL,GAAkBvkC,SAAlB;AACA,WAAKwkC,UAAL,GAAkBxkC,SAAlB;AACA,WAAKykC,mBAAL,GAA2B,KAA3B;AACA,WAAKC,kBAAL,GAA0B,KAA1B;AACA,WAAKC,QAAL,GAAgB3kC,SAAhB;AACA,WAAK4kC,SAAL,GAAiB,EAAjB;AACA,WAAKC,UAAL;AACD;;AACDA,cAAU,GAAG;AACX,YAAM36B,IAAI,GAAG,KAAKs4B,WAAlB;AACA,WAAK/C,SAAL;AACA,WAAKqF,UAAL;AACA56B,UAAI,CAAC45B,QAAL55B,GAAgBq3B,SAAS,CAACr3B,IAAI,CAACi4B,MAAN,EAAcj4B,IAAd,CAAzBA;AACA,WAAK66B,WAAL;AACD;;AACDC,eAAW,CAAC1mC,YAAD,EAAe;AACxB,UAAI,KAAKC,KAAL,KAAeD,YAAnB,EAAiC;AAC/BglC,mBAAW,CAAC,KAAKd,WAAN,CAAXc;AACD;;AACD,WAAK/kC,KAAL,GAAaD,YAAb;AACD;;AACDwmC,cAAU,GAAG;AACX,YAAMrlB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMvV,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMU,OAAO,GAAG,KAAK+B,UAAL,EAAhB;;AACA,YAAMC,QAAQ,GAAG,CAACx6B,IAAD,EAAOrK,CAAP,EAAUE,CAAV,EAAagP,CAAb,KAAmB7E,IAAI,KAAK,GAATA,GAAerK,CAAfqK,GAAmBA,IAAI,KAAK,GAATA,GAAe6E,CAAf7E,GAAmBnK,CAA1E;;AACA,YAAM4kC,GAAG,GAAGj7B,IAAI,CAACk7B,OAALl7B,GAAepN,cAAc,CAAComC,OAAO,CAACkC,OAAT,EAAkBrC,eAAe,CAACtjB,KAAD,EAAQ,GAAR,CAAjC,CAAzC;AACA,YAAM4lB,GAAG,GAAGn7B,IAAI,CAACo7B,OAALp7B,GAAepN,cAAc,CAAComC,OAAO,CAACoC,OAAT,EAAkBvC,eAAe,CAACtjB,KAAD,EAAQ,GAAR,CAAjC,CAAzC;AACA,YAAM8lB,GAAG,GAAGr7B,IAAI,CAACs7B,OAALt7B,GAAepN,cAAc,CAAComC,OAAO,CAACsC,OAAT,EAAkBzC,eAAe,CAACtjB,KAAD,EAAQ,GAAR,CAAjC,CAAzC;AACA,YAAMc,SAAS,GAAGrW,IAAI,CAACqW,SAAvB;AACA,YAAMklB,GAAG,GAAGv7B,IAAI,CAACw7B,OAALx7B,GAAeg7B,QAAQ,CAAC3kB,SAAD,EAAY4kB,GAAZ,EAAiBE,GAAjB,EAAsBE,GAAtB,CAAnC;AACA,YAAMI,GAAG,GAAGz7B,IAAI,CAAC07B,OAAL17B,GAAeg7B,QAAQ,CAAC3kB,SAAD,EAAY8kB,GAAZ,EAAiBF,GAAjB,EAAsBI,GAAtB,CAAnC;AACAr7B,UAAI,CAACc,MAALd,GAAc,KAAK27B,aAAL,CAAmBV,GAAnB,CAAdj7B;AACAA,UAAI,CAACe,MAALf,GAAc,KAAK27B,aAAL,CAAmBR,GAAnB,CAAdn7B;AACAA,UAAI,CAAC47B,MAAL57B,GAAc,KAAK27B,aAAL,CAAmBN,GAAnB,CAAdr7B;AACAA,UAAI,CAACM,MAALN,GAAc,KAAK27B,aAAL,CAAmBJ,GAAnB,CAAdv7B;AACAA,UAAI,CAACi4B,MAALj4B,GAAc,KAAK27B,aAAL,CAAmBF,GAAnB,CAAdz7B;AACD;;AACD+6B,cAAU,GAAG;AACX,aAAO,KAAKxlB,KAAL,CAAWiD,IAAX,CAAgBpD,QAAhB,CAAyB,KAAK/gB,KAA9B,CAAP;AACD;;AACD2lC,WAAO,GAAG;AACR,aAAO,KAAKzkB,KAAL,CAAWsmB,cAAX,CAA0B,KAAKxnC,KAA/B,CAAP;AACD;;AACDsnC,iBAAa,CAACG,OAAD,EAAU;AACrB,aAAO,KAAKvmB,KAAL,CAAW0B,MAAX,CAAkB6kB,OAAlB,CAAP;AACD;;AACDC,kBAAc,CAAC/kB,KAAD,EAAQ;AACpB,YAAMhX,IAAI,GAAG,KAAKs4B,WAAlB;AACA,aAAOthB,KAAK,KAAKhX,IAAI,CAACM,MAAf0W,GACHhX,IAAI,CAACi4B,MADFjhB,GAEHhX,IAAI,CAACM,MAFT;AAGD;;AACD07B,SAAK,GAAG;AACN,WAAKrK,OAAL,CAAa,OAAb;AACD;;AACDsK,YAAQ,GAAG;AACT,YAAMj8B,IAAI,GAAG,KAAKs4B,WAAlB;;AACA,UAAI,KAAK4B,KAAT,EAAgB;AACdr8B,2BAAmB,CAAC,KAAKq8B,KAAN,EAAa,IAAb,CAAnBr8B;AACD;;AACD,UAAImC,IAAI,CAAC45B,QAAT,EAAmB;AACjBR,mBAAW,CAACp5B,IAAD,CAAXo5B;AACD;AACF;;AACD8C,cAAU,GAAG;AACX,YAAMlD,OAAO,GAAG,KAAK+B,UAAL,EAAhB;AACA,YAAMviB,IAAI,GAAGwgB,OAAO,CAACxgB,IAARwgB,KAAiBA,OAAO,CAACxgB,IAARwgB,GAAe,EAAhCA,CAAb;AACA,YAAMkB,KAAK,GAAG,KAAKA,KAAnB;;AACA,UAAI5nC,QAAQ,CAACkmB,IAAD,CAAZ,EAAoB;AAClB,aAAK0hB,KAAL,GAAa/C,wBAAwB,CAAC3e,IAAD,CAArC;AADF,aAEO,IAAI0hB,KAAK,KAAK1hB,IAAd,EAAoB;AACzB,YAAI0hB,KAAJ,EAAW;AACTr8B,6BAAmB,CAACq8B,KAAD,EAAQ,IAAR,CAAnBr8B;AACA,gBAAMmC,IAAI,GAAG,KAAKs4B,WAAlB;AACAc,qBAAW,CAACp5B,IAAD,CAAXo5B;AACAp5B,cAAI,CAACO,OAALP,GAAe,EAAfA;AACD;;AACD,YAAIwY,IAAI,IAAIvmB,MAAM,CAACkqC,YAAPlqC,CAAoBumB,IAApBvmB,CAAZ,EAAuC;AACrCgL,2BAAiB,CAACub,IAAD,EAAO,IAAP,CAAjBvb;AACD;;AACD,aAAKy9B,SAAL,GAAiB,EAAjB;AACA,aAAKR,KAAL,GAAa1hB,IAAb;AACD;AACF;;AACDqiB,eAAW,GAAG;AACZ,YAAM76B,IAAI,GAAG,KAAKs4B,WAAlB;;AACA,WAAK4D,UAAL;;AACA,UAAI,KAAKE,kBAAT,EAA6B;AAC3Bp8B,YAAI,CAACg5B,OAALh5B,GAAe,IAAI,KAAKo8B,kBAAT,EAAfp8B;AACD;AACF;;AACDq8B,yBAAqB,CAACC,gBAAD,EAAmB;AACtC,YAAMt8B,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMU,OAAO,GAAG,KAAK+B,UAAL,EAAhB;AACA,UAAIwB,YAAY,GAAG,KAAnB;;AACA,WAAKL,UAAL;;AACA,YAAMM,UAAU,GAAGx8B,IAAI,CAAC45B,QAAxB;AACA55B,UAAI,CAAC45B,QAAL55B,GAAgBq3B,SAAS,CAACr3B,IAAI,CAACi4B,MAAN,EAAcj4B,IAAd,CAAzBA;;AACA,UAAIA,IAAI,CAAC+2B,KAAL/2B,KAAeg5B,OAAO,CAACjC,KAA3B,EAAkC;AAChCwF,oBAAY,GAAG,IAAfA;AACAnD,mBAAW,CAACp5B,IAAD,CAAXo5B;AACAp5B,YAAI,CAAC+2B,KAAL/2B,GAAag5B,OAAO,CAACjC,KAArB/2B;AACD;;AACD,WAAKy8B,eAAL,CAAqBH,gBAArB;;AACA,UAAIC,YAAY,IAAIC,UAAU,KAAKx8B,IAAI,CAAC45B,QAAxC,EAAkD;AAChDxB,oBAAY,CAAC,IAAD,EAAOp4B,IAAI,CAACO,OAAZ,CAAZ63B;AACD;AACF;;AACD7C,aAAS,GAAG;AACV,YAAMF,MAAM,GAAG,KAAK9f,KAAL,CAAW8f,MAA1B;AACA,YAAMqH,SAAS,GAAGrH,MAAM,CAACsH,gBAAPtH,CAAwB,KAAK4E,KAA7B5E,CAAlB;AACA,YAAM5U,MAAM,GAAG4U,MAAM,CAACuH,eAAPvH,CAAuB,KAAK0F,UAAL,EAAvB1F,EAA0CqH,SAA1CrH,EAAqD,IAArDA,CAAf;AACA,WAAKpgC,OAAL,GAAeogC,MAAM,CAACwH,cAAPxH,CAAsB5U,MAAtB4U,EAA8B,KAAKtb,UAAL,EAA9Bsb,CAAf;AACA,WAAK7Q,QAAL,GAAgB,KAAKvvB,OAAL,CAAa4hB,OAA7B;AACA,WAAKkjB,eAAL,GAAuB,EAAvB;AACD;;AACDrV,SAAK,CAAChpB,KAAD,EAAQ0E,KAAR,EAAe;AAClB,YAAM;AAACk4B,mBAAW,EAAEt4B,IAAd;AAAoBk6B,aAAK,EAAE1hB;AAA3B,UAAmC,IAAzC;AACA,YAAM;AAAClY,cAAD;AAASs5B;AAAT,UAAqB55B,IAA3B;AACA,YAAMw4B,KAAK,GAAGl4B,MAAM,CAACE,IAArB;AACA,UAAIs8B,MAAM,GAAGphC,KAAK,KAAK,CAAVA,IAAe0E,KAAK,KAAKoY,IAAI,CAAC3kB,MAA9B6H,GAAuC,IAAvCA,GAA8CsE,IAAI,CAACK,OAAhE;AACA,UAAIknB,IAAI,GAAG7rB,KAAK,GAAG,CAARA,IAAasE,IAAI,CAACO,OAALP,CAAatE,KAAK,GAAG,CAArBsE,CAAxB;AACA,UAAItM,CAAJ,EAAOy7B,GAAP,EAAY1K,MAAZ;;AACA,UAAI,KAAKD,QAAL,KAAkB,KAAtB,EAA6B;AAC3BxkB,YAAI,CAACO,OAALP,GAAewY,IAAfxY;AACAA,YAAI,CAACK,OAALL,GAAe,IAAfA;AACAykB,cAAM,GAAGjM,IAATiM;AAHF,aAIO;AACL,YAAI3yB,OAAO,CAAC0mB,IAAI,CAAC9c,KAAD,CAAL,CAAX,EAA0B;AACxB+oB,gBAAM,GAAG,KAAKsY,cAAL,CAAoB/8B,IAApB,EAA0BwY,IAA1B,EAAgC9c,KAAhC,EAAuC0E,KAAvC,CAATqkB;AADF,eAEO,IAAInyB,QAAQ,CAACkmB,IAAI,CAAC9c,KAAD,CAAL,CAAZ,EAA2B;AAChC+oB,gBAAM,GAAG,KAAKuY,eAAL,CAAqBh9B,IAArB,EAA2BwY,IAA3B,EAAiC9c,KAAjC,EAAwC0E,KAAxC,CAATqkB;AADK,eAEA;AACLA,gBAAM,GAAG,KAAKwY,kBAAL,CAAwBj9B,IAAxB,EAA8BwY,IAA9B,EAAoC9c,KAApC,EAA2C0E,KAA3C,CAATqkB;AACD;;AACD,cAAMyY,0BAA0B,GAAG,MAAM/N,GAAG,CAACqJ,KAAD,CAAHrJ,KAAe,IAAfA,IAAwB5H,IAAI,IAAI4H,GAAG,CAACqJ,KAAD,CAAHrJ,GAAa5H,IAAI,CAACiR,KAAD,CAA1F;;AACA,aAAK9kC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0M,KAAhB,EAAuB,EAAE1M,CAAzB,EAA4B;AAC1BsM,cAAI,CAACO,OAALP,CAAatM,CAAC,GAAGgI,KAAjBsE,IAA0BmvB,GAAG,GAAG1K,MAAM,CAAC/wB,CAAD,CAAtCsM;;AACA,cAAI88B,MAAJ,EAAY;AACV,gBAAII,0BAA0B,EAA9B,EAAkC;AAChCJ,oBAAM,GAAG,KAATA;AACD;;AACDvV,gBAAI,GAAG4H,GAAP5H;AACD;AACF;;AACDvnB,YAAI,CAACK,OAALL,GAAe88B,MAAf98B;AACD;;AACD,UAAI45B,QAAJ,EAAc;AACZxB,oBAAY,CAAC,IAAD,EAAO3T,MAAP,CAAZ2T;AACD;AACF;;AACD6E,sBAAkB,CAACj9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AAC3C,YAAM;AAACE,cAAD;AAAS23B;AAAT,UAAmBj4B,IAAzB;AACA,YAAMw4B,KAAK,GAAGl4B,MAAM,CAACE,IAArB;AACA,YAAMi4B,KAAK,GAAGR,MAAM,CAACz3B,IAArB;AACA,YAAM28B,MAAM,GAAG78B,MAAM,CAAC88B,SAAP98B,EAAf;AACA,YAAM+8B,WAAW,GAAG/8B,MAAM,KAAK23B,MAA/B;AACA,YAAMxT,MAAM,GAAG,IAAI1yB,KAAJ,CAAUqO,KAAV,CAAf;AACA,UAAI1M,CAAJ,EAAOO,IAAP,EAAaI,KAAb;;AACA,WAAKX,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGmM,KAAnB,EAA0B1M,CAAC,GAAGO,IAA9B,EAAoC,EAAEP,CAAtC,EAAyC;AACvCW,aAAK,GAAGX,CAAC,GAAGgI,KAAZrH;AACAowB,cAAM,CAAC/wB,CAAD,CAAN+wB,GAAY;AACV,WAAC+T,KAAD,GAAS6E,WAAW,IAAI/8B,MAAM,CAACokB,KAAPpkB,CAAa68B,MAAM,CAAC9oC,KAAD,CAAnBiM,EAA4BjM,KAA5BiM,CADd;AAEV,WAACm4B,KAAD,GAASR,MAAM,CAACvT,KAAPuT,CAAazf,IAAI,CAACnkB,KAAD,CAAjB4jC,EAA0B5jC,KAA1B4jC;AAFC,SAAZxT;AAID;;AACD,aAAOA,MAAP;AACD;;AACDsY,kBAAc,CAAC/8B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACvC,YAAM;AAACU,cAAD;AAASC;AAAT,UAAmBf,IAAzB;AACA,YAAMykB,MAAM,GAAG,IAAI1yB,KAAJ,CAAUqO,KAAV,CAAf;AACA,UAAI1M,CAAJ,EAAOO,IAAP,EAAaI,KAAb,EAAoBqD,IAApB;;AACA,WAAKhE,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGmM,KAAnB,EAA0B1M,CAAC,GAAGO,IAA9B,EAAoC,EAAEP,CAAtC,EAAyC;AACvCW,aAAK,GAAGX,CAAC,GAAGgI,KAAZrH;AACAqD,YAAI,GAAG8gB,IAAI,CAACnkB,KAAD,CAAXqD;AACA+sB,cAAM,CAAC/wB,CAAD,CAAN+wB,GAAY;AACVtuB,WAAC,EAAE2K,MAAM,CAAC4jB,KAAP5jB,CAAapJ,IAAI,CAAC,CAAD,CAAjBoJ,EAAsBzM,KAAtByM,CADO;AAEVzK,WAAC,EAAE0K,MAAM,CAAC2jB,KAAP3jB,CAAarJ,IAAI,CAAC,CAAD,CAAjBqJ,EAAsB1M,KAAtB0M;AAFO,SAAZ0jB;AAID;;AACD,aAAOA,MAAP;AACD;;AACDuY,mBAAe,CAACh9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACxC,YAAM;AAACU,cAAD;AAASC;AAAT,UAAmBf,IAAzB;AACA,YAAM;AAACs9B,gBAAQ,GAAG,GAAZ;AAAiBC,gBAAQ,GAAG;AAA5B,UAAmC,KAAK/Y,QAA9C;AACA,YAAMC,MAAM,GAAG,IAAI1yB,KAAJ,CAAUqO,KAAV,CAAf;AACA,UAAI1M,CAAJ,EAAOO,IAAP,EAAaI,KAAb,EAAoBqD,IAApB;;AACA,WAAKhE,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGmM,KAAnB,EAA0B1M,CAAC,GAAGO,IAA9B,EAAoC,EAAEP,CAAtC,EAAyC;AACvCW,aAAK,GAAGX,CAAC,GAAGgI,KAAZrH;AACAqD,YAAI,GAAG8gB,IAAI,CAACnkB,KAAD,CAAXqD;AACA+sB,cAAM,CAAC/wB,CAAD,CAAN+wB,GAAY;AACVtuB,WAAC,EAAE2K,MAAM,CAAC4jB,KAAP5jB,CAAaxK,gBAAgB,CAACoB,IAAD,EAAO4lC,QAAP,CAA7Bx8B,EAA+CzM,KAA/CyM,CADO;AAEVzK,WAAC,EAAE0K,MAAM,CAAC2jB,KAAP3jB,CAAazK,gBAAgB,CAACoB,IAAD,EAAO6lC,QAAP,CAA7Bx8B,EAA+C1M,KAA/C0M;AAFO,SAAZ0jB;AAID;;AACD,aAAOA,MAAP;AACD;;AACD+Y,aAAS,CAACnpC,KAAD,EAAQ;AACf,aAAO,KAAKikC,WAAL,CAAiB/3B,OAAjB,CAAyBlM,KAAzB,CAAP;AACD;;AACDopC,kBAAc,CAACppC,KAAD,EAAQ;AACpB,aAAO,KAAKikC,WAAL,CAAiB9f,IAAjB,CAAsBnkB,KAAtB,CAAP;AACD;;AACDyiC,cAAU,CAAC9f,KAAD,EAAQyN,MAAR,EAAgBlO,IAAhB,EAAsB;AAC9B,YAAMhB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMvV,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMzmC,KAAK,GAAG4yB,MAAM,CAACzN,KAAK,CAACxW,IAAP,CAApB;AACA,YAAMu2B,KAAK,GAAG;AACZnjC,YAAI,EAAE8iC,uBAAuB,CAACnhB,KAAD,EAAQ,IAAR,CADjB;AAEZxY,cAAM,EAAE0nB,MAAM,CAAC8T,OAAP9T,CAAezN,KAAK,CAACxW,IAArBikB;AAFI,OAAd;AAIA,aAAOqS,UAAU,CAACC,KAAD,EAAQllC,KAAR,EAAemO,IAAI,CAAC3L,KAApB,EAA2B;AAACkiB;AAAD,OAA3B,CAAjB;AACD;;AACDmnB,yBAAqB,CAAC/kC,KAAD,EAAQqe,KAAR,EAAeyN,MAAf,EAAuBsS,KAAvB,EAA8B;AACjD,YAAM4G,WAAW,GAAGlZ,MAAM,CAACzN,KAAK,CAACxW,IAAP,CAA1B;AACA,UAAI3O,KAAK,GAAG8rC,WAAW,KAAK,IAAhBA,GAAuBC,GAAvBD,GAA6BA,WAAzC;AACA,YAAM5gC,MAAM,GAAGg6B,KAAK,IAAItS,MAAM,CAAC8T,OAAP9T,CAAezN,KAAK,CAACxW,IAArBikB,CAAxB;;AACA,UAAIsS,KAAK,IAAIh6B,MAAb,EAAqB;AACnBg6B,aAAK,CAACh6B,MAANg6B,GAAeh6B,MAAfg6B;AACAllC,aAAK,GAAGilC,UAAU,CAACC,KAAD,EAAQ4G,WAAR,EAAqB,KAAKrF,WAAL,CAAiBjkC,KAAtC,CAAlBxC;AACD;;AACD8G,WAAK,CAACwB,GAANxB,GAAYZ,IAAI,CAACoC,GAALpC,CAASY,KAAK,CAACwB,GAAfpC,EAAoBlG,KAApBkG,CAAZY;AACAA,WAAK,CAACyB,GAANzB,GAAYZ,IAAI,CAACqC,GAALrC,CAASY,KAAK,CAACyB,GAAfrC,EAAoBlG,KAApBkG,CAAZY;AACD;;AACDklC,aAAS,CAAC7mB,KAAD,EAAQ0iB,QAAR,EAAkB;AACzB,YAAM15B,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM/3B,OAAO,GAAGP,IAAI,CAACO,OAArB;AACA,YAAMu8B,MAAM,GAAG98B,IAAI,CAACK,OAALL,IAAgBgX,KAAK,KAAKhX,IAAI,CAACM,MAA9C;AACA,YAAMrM,IAAI,GAAGsM,OAAO,CAAC1M,MAArB;;AACA,YAAMiqC,UAAU,GAAG,KAAK/B,cAAL,CAAoB/kB,KAApB,CAAnB;;AACA,YAAM+f,KAAK,GAAG0C,WAAW,CAACC,QAAD,EAAW15B,IAAX,EAAiB,KAAKuV,KAAtB,CAAzB;AACA,YAAM5c,KAAK,GAAG;AAACwB,WAAG,EAAE3H,MAAM,CAAC2F,iBAAb;AAAgCiC,WAAG,EAAE5H,MAAM,CAACklC;AAA5C,OAAd;AACA,YAAM;AAACv9B,WAAG,EAAE4jC,QAAN;AAAgB3jC,WAAG,EAAE4jC;AAArB,UAAiCr9B,aAAa,CAACm9B,UAAD,CAApD;AACA,UAAIpqC,CAAJ,EAAO+wB,MAAP;;AACA,eAASwZ,KAAT,GAAiB;AACfxZ,cAAM,GAAGlkB,OAAO,CAAC7M,CAAD,CAAhB+wB;AACA,cAAMyS,UAAU,GAAGzS,MAAM,CAACqZ,UAAU,CAACt9B,IAAZ,CAAzB;AACA,eAAO,CAACjO,cAAc,CAACkyB,MAAM,CAACzN,KAAK,CAACxW,IAAP,CAAP,CAAf,IAAuCu9B,QAAQ,GAAG7G,UAAlD,IAAgE8G,QAAQ,GAAG9G,UAAlF;AACD;;AACD,WAAKxjC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGO,IAAhB,EAAsB,EAAEP,CAAxB,EAA2B;AACzB,YAAIuqC,KAAK,EAAT,EAAa;AACX;AACD;;AACD,aAAKP,qBAAL,CAA2B/kC,KAA3B,EAAkCqe,KAAlC,EAAyCyN,MAAzC,EAAiDsS,KAAjD;;AACA,YAAI+F,MAAJ,EAAY;AACV;AACD;AACF;;AACD,UAAIA,MAAJ,EAAY;AACV,aAAKppC,CAAC,GAAGO,IAAI,GAAG,CAAhB,EAAmBP,CAAC,IAAI,CAAxB,EAA2B,EAAEA,CAA7B,EAAgC;AAC9B,cAAIuqC,KAAK,EAAT,EAAa;AACX;AACD;;AACD,eAAKP,qBAAL,CAA2B/kC,KAA3B,EAAkCqe,KAAlC,EAAyCyN,MAAzC,EAAiDsS,KAAjD;AACA;AACD;AACF;;AACD,aAAOp+B,KAAP;AACD;;AACDulC,sBAAkB,CAAClnB,KAAD,EAAQ;AACxB,YAAMyN,MAAM,GAAG,KAAK6T,WAAL,CAAiB/3B,OAAhC;AACA,YAAMxD,MAAM,GAAG,EAAf;AACA,UAAIrJ,CAAJ,EAAOO,IAAP,EAAapC,KAAb;;AACA,WAAK6B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGwwB,MAAM,CAAC5wB,MAA1B,EAAkCH,CAAC,GAAGO,IAAtC,EAA4C,EAAEP,CAA9C,EAAiD;AAC/C7B,aAAK,GAAG4yB,MAAM,CAAC/wB,CAAD,CAAN+wB,CAAUzN,KAAK,CAACxW,IAAhBikB,CAAR5yB;;AACA,YAAIU,cAAc,CAACV,KAAD,CAAlB,EAA2B;AACzBkL,gBAAM,CAAChG,IAAPgG,CAAYlL,KAAZkL;AACD;AACF;;AACD,aAAOA,MAAP;AACD;;AACDohC,kBAAc,GAAG;AACf,aAAO,KAAP;AACD;;AACDC,oBAAgB,CAAC/pC,KAAD,EAAQ;AACtB,YAAM2L,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMh4B,MAAM,GAAGN,IAAI,CAACM,MAApB;AACA,YAAM23B,MAAM,GAAGj4B,IAAI,CAACi4B,MAApB;AACA,YAAMxT,MAAM,GAAG,KAAK+Y,SAAL,CAAenpC,KAAf,CAAf;AACA,aAAO;AACLgqC,aAAK,EAAE/9B,MAAM,GAAG,KAAKA,MAAM,CAACg+B,gBAAPh+B,CAAwBmkB,MAAM,CAACnkB,MAAM,CAACE,IAAR,CAA9BF,CAAR,GAAuD,EAD/D;AAELzO,aAAK,EAAEomC,MAAM,GAAG,KAAKA,MAAM,CAACqG,gBAAPrG,CAAwBxT,MAAM,CAACwT,MAAM,CAACz3B,IAAR,CAA9By3B,CAAR,GAAuD;AAF/D,OAAP;AAID;;AACDtG,WAAO,CAACpb,IAAD,EAAO;AACZ,YAAMvW,IAAI,GAAG,KAAKs4B,WAAlB;AACA,WAAKnE,MAAL,CAAY5d,IAAI,IAAI,SAApB;AACAvW,UAAI,CAACu+B,KAALv+B,GAAaw2B,MAAM,CAAC5jC,cAAc,CAAC,KAAKqC,OAAL,CAAa+mB,IAAd,EAAoBua,WAAW,CAACv2B,IAAI,CAACc,MAAN,EAAcd,IAAI,CAACe,MAAnB,EAA2B,KAAKo9B,cAAL,EAA3B,CAA/B,CAAf,CAAnBn+B;AACD;;AACDm0B,UAAM,CAAC5d,IAAD,EAAO,CAAE;;AACfyb,QAAI,GAAG;AACL,YAAM9b,GAAG,GAAG,KAAK4jB,IAAjB;AACA,YAAMvkB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMvV,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM5iB,QAAQ,GAAG1V,IAAI,CAACwY,IAALxY,IAAa,EAA9B;AACA,YAAM2b,IAAI,GAAGpG,KAAK,CAACipB,SAAnB;AACA,YAAMtK,MAAM,GAAG,EAAf;AACA,YAAMx4B,KAAK,GAAG,KAAK2+B,UAAL,IAAmB,CAAjC;AACA,YAAMj6B,KAAK,GAAG,KAAKk6B,UAAL,IAAoB5kB,QAAQ,CAAC7hB,MAAT6hB,GAAkBha,KAApD;AACA,YAAMyb,uBAAuB,GAAG,KAAKliB,OAAL,CAAakiB,uBAA7C;AACA,UAAIzjB,CAAJ;;AACA,UAAIsM,IAAI,CAACg5B,OAAT,EAAkB;AAChBh5B,YAAI,CAACg5B,OAALh5B,CAAagyB,IAAbhyB,CAAkBkW,GAAlBlW,EAAuB2b,IAAvB3b,EAA6BtE,KAA7BsE,EAAoCI,KAApCJ;AACD;;AACD,WAAKtM,CAAC,GAAGgI,KAAT,EAAgBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAA5B,EAAmC,EAAE1M,CAArC,EAAwC;AACtC,cAAM00B,OAAO,GAAG1S,QAAQ,CAAChiB,CAAD,CAAxB;;AACA,YAAI00B,OAAO,CAACuR,MAAZ,EAAoB;AAClB;AACD;;AACD,YAAIvR,OAAO,CAAC8L,MAAR9L,IAAkBjR,uBAAtB,EAA+C;AAC7C+c,gBAAM,CAACn9B,IAAPm9B,CAAY9L,OAAZ8L;AADF,eAEO;AACL9L,iBAAO,CAAC4J,IAAR5J,CAAalS,GAAbkS,EAAkBzM,IAAlByM;AACD;AACF;;AACD,WAAK10B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGwgC,MAAM,CAACrgC,MAAvB,EAA+B,EAAEH,CAAjC,EAAoC;AAClCwgC,cAAM,CAACxgC,CAAD,CAANwgC,CAAUlC,IAAVkC,CAAehe,GAAfge,EAAoBvY,IAApBuY;AACD;AACF;;AACD7L,YAAQ,CAACh0B,KAAD,EAAQ6/B,MAAR,EAAgB;AACtB,YAAM3d,IAAI,GAAG2d,MAAM,GAAG,QAAH,GAAc,SAAjC;AACA,aAAO7/B,KAAK,KAAKyB,SAAVzB,IAAuB,KAAKikC,WAAL,CAAiBU,OAAxC3kC,GACH,KAAKoqC,4BAAL,CAAkCloB,IAAlC,CADGliB,GAEH,KAAKqqC,yBAAL,CAA+BrqC,KAAK,IAAI,CAAxC,EAA2CkiB,IAA3C,CAFJ;AAGD;;AACDwD,cAAU,CAAC1lB,KAAD,EAAQ6/B,MAAR,EAAgB3d,IAAhB,EAAsB;AAC9B,YAAMyiB,OAAO,GAAG,KAAK+B,UAAL,EAAhB;AACA,UAAIzlB,OAAJ;;AACA,UAAIjhB,KAAK,IAAI,CAATA,IAAcA,KAAK,GAAG,KAAKikC,WAAL,CAAiB9f,IAAjB,CAAsB3kB,MAAhD,EAAwD;AACtD,cAAMu0B,OAAO,GAAG,KAAKkQ,WAAL,CAAiB9f,IAAjB,CAAsBnkB,KAAtB,CAAhB;AACAihB,eAAO,GAAG8S,OAAO,CAACqS,QAARrS,KACPA,OAAO,CAACqS,QAARrS,GAAmB6Q,iBAAiB,CAAC,KAAKlf,UAAL,EAAD,EAAoB1lB,KAApB,EAA2B+zB,OAA3B,CAD7BA,CAAV9S;AAEAA,eAAO,CAACmP,MAARnP,GAAiB,KAAKkoB,SAAL,CAAenpC,KAAf,CAAjBihB;AACAA,eAAO,CAAC6jB,GAAR7jB,GAAc0jB,OAAO,CAACxgB,IAARwgB,CAAa3kC,KAAb2kC,CAAd1jB;AACAA,eAAO,CAACjhB,KAARihB,GAAgBA,OAAO,CAAC4jB,SAAR5jB,GAAoBjhB,KAApCihB;AANF,aAOO;AACLA,eAAO,GAAG,KAAKmlB,QAAL,KACP,KAAKA,QAAL,GAAgB1B,oBAAoB,CAAC,KAAKxjB,KAAL,CAAWwE,UAAX,EAAD,EAA0B,KAAK1lB,KAA/B,CAD7B,CAAVihB;AAEAA,eAAO,CAAC0jB,OAAR1jB,GAAkB0jB,OAAlB1jB;AACAA,eAAO,CAACjhB,KAARihB,GAAgBA,OAAO,CAAClhB,YAARkhB,GAAuB,KAAKjhB,KAA5CihB;AACD;;AACDA,aAAO,CAAC4e,MAAR5e,GAAiB,CAAC,CAAC4e,MAAnB5e;AACAA,aAAO,CAACiB,IAARjB,GAAeiB,IAAfjB;AACA,aAAOA,OAAP;AACD;;AACDmpB,gCAA4B,CAACloB,IAAD,EAAO;AACjC,aAAO,KAAKooB,sBAAL,CAA4B,KAAKvC,kBAAL,CAAwBzqC,EAApD,EAAwD4kB,IAAxD,CAAP;AACD;;AACDmoB,6BAAyB,CAACrqC,KAAD,EAAQkiB,IAAR,EAAc;AACrC,aAAO,KAAKooB,sBAAL,CAA4B,KAAKC,eAAL,CAAqBjtC,EAAjD,EAAqD4kB,IAArD,EAA2DliB,KAA3D,CAAP;AACD;;AACDsqC,0BAAsB,CAACE,WAAD,EAAuC;AAAA,UAAzBtoB,IAAyB,uEAAlB,SAAkB;AAAA,UAAPliB,KAAO;AAC3D,YAAM6/B,MAAM,GAAG3d,IAAI,KAAK,QAAxB;AACA,YAAM0C,KAAK,GAAG,KAAK8gB,eAAnB;AACA,YAAM5N,QAAQ,GAAG0S,WAAW,GAAG,GAAdA,GAAoBtoB,IAArC;AACA,YAAMgjB,MAAM,GAAGtgB,KAAK,CAACkT,QAAD,CAApB;AACA,YAAM2S,OAAO,GAAG,KAAKvE,mBAAL,IAA4BnjC,OAAO,CAAC/C,KAAD,CAAnD;;AACA,UAAIklC,MAAJ,EAAY;AACV,eAAOD,gBAAgB,CAACC,MAAD,EAASuF,OAAT,CAAvB;AACD;;AACD,YAAMzJ,MAAM,GAAG,KAAK9f,KAAL,CAAW8f,MAA1B;AACA,YAAMqH,SAAS,GAAGrH,MAAM,CAAC0J,uBAAP1J,CAA+B,KAAK4E,KAApC5E,EAA2CwJ,WAA3CxJ,CAAlB;AACA,YAAM3U,QAAQ,GAAGwT,MAAM,GAAG,WAAI2K,WAAJ,YAAwB,OAAxB,EAAiCA,WAAjC,EAA8C,EAA9C,CAAH,GAAuD,CAACA,WAAD,EAAc,EAAd,CAA9E;AACA,YAAMpe,MAAM,GAAG4U,MAAM,CAACuH,eAAPvH,CAAuB,KAAK0F,UAAL,EAAvB1F,EAA0CqH,SAA1CrH,CAAf;AACA,YAAMrjB,KAAK,GAAG/f,MAAM,CAAC2B,IAAP3B,CAAYgmB,QAAQ,CAACvC,QAATuC,CAAkB4mB,WAAlB5mB,CAAZhmB,CAAd;;AACA,YAAMqjB,OAAO,GAAG,MAAM,KAAKyE,UAAL,CAAgB1lB,KAAhB,EAAuB6/B,MAAvB,CAAtB;;AACA,YAAMn3B,MAAM,GAAGs4B,MAAM,CAAC2J,mBAAP3J,CAA2B5U,MAA3B4U,EAAmCrjB,KAAnCqjB,EAA0C/f,OAA1C+f,EAAmD3U,QAAnD2U,CAAf;;AACA,UAAIt4B,MAAM,CAACg5B,OAAX,EAAoB;AAClBh5B,cAAM,CAACg5B,OAAPh5B,GAAiB+hC,OAAjB/hC;AACAkc,aAAK,CAACkT,QAAD,CAALlT,GAAkBhnB,MAAM,CAACgtC,MAAPhtC,CAAcqnC,gBAAgB,CAACv8B,MAAD,EAAS+hC,OAAT,CAA9B7sC,CAAlBgnB;AACD;;AACD,aAAOlc,MAAP;AACD;;AACDmiC,sBAAkB,CAAC7qC,KAAD,EAAQ8qC,UAAR,EAAoBjL,MAApB,EAA4B;AAC5C,YAAM3e,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM0D,KAAK,GAAG,KAAK8gB,eAAnB;AACA,YAAM5N,QAAQ,uBAAgBgT,UAAhB,CAAd;AACA,YAAM5F,MAAM,GAAGtgB,KAAK,CAACkT,QAAD,CAApB;;AACA,UAAIoN,MAAJ,EAAY;AACV,eAAOA,MAAP;AACD;;AACD,UAAItkC,OAAJ;;AACA,UAAIsgB,KAAK,CAACtgB,OAANsgB,CAAcN,SAAdM,KAA4B,KAAhC,EAAuC;AACrC,cAAM8f,MAAM,GAAG,KAAK9f,KAAL,CAAW8f,MAA1B;AACA,cAAMqH,SAAS,GAAGrH,MAAM,CAAC+J,yBAAP/J,CAAiC,KAAK4E,KAAtC5E,EAA6C8J,UAA7C9J,CAAlB;AACA,cAAM5U,MAAM,GAAG4U,MAAM,CAACuH,eAAPvH,CAAuB,KAAK0F,UAAL,EAAvB1F,EAA0CqH,SAA1CrH,CAAf;AACApgC,eAAO,GAAGogC,MAAM,CAACwH,cAAPxH,CAAsB5U,MAAtB4U,EAA8B,KAAKtb,UAAL,CAAgB1lB,KAAhB,EAAuB6/B,MAAvB,EAA+BiL,UAA/B,CAA9B9J,CAAVpgC;AACD;;AACD,YAAMggC,UAAU,GAAG,IAAIG,UAAJ,CAAe7f,KAAf,EAAsBtgB,OAAO,IAAIA,OAAO,CAACggC,UAAzC,CAAnB;;AACA,UAAIhgC,OAAO,IAAIA,OAAO,CAAC+rB,UAAvB,EAAmC;AACjC/H,aAAK,CAACkT,QAAD,CAALlT,GAAkBhnB,MAAM,CAACgtC,MAAPhtC,CAAcgjC,UAAdhjC,CAAlBgnB;AACD;;AACD,aAAOgc,UAAP;AACD;;AACDoK,oBAAgB,CAACpqC,OAAD,EAAU;AACxB,UAAI,CAACA,OAAO,CAAC8gC,OAAb,EAAsB;AACpB;AACD;;AACD,aAAO,KAAKqE,cAAL,KAAwB,KAAKA,cAAL,GAAsBnoC,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkBgD,OAAlBhD,CAA9C,CAAP;AACD;;AACDqtC,kBAAc,CAAC/oB,IAAD,EAAOgpB,aAAP,EAAsB;AAClC,aAAO,CAACA,aAAD,IAAkBlG,kBAAkB,CAAC9iB,IAAD,CAApC,IAA8C,KAAKhB,KAAL,CAAWiqB,mBAAhE;AACD;;AACDC,qBAAiB,CAAC/jC,KAAD,EAAQ6a,IAAR,EAAc;AAC7B,YAAMmpB,SAAS,GAAG,KAAKhB,yBAAL,CAA+BhjC,KAA/B,EAAsC6a,IAAtC,CAAlB;AACA,YAAMopB,uBAAuB,GAAG,KAAKvF,cAArC;AACA,YAAMmF,aAAa,GAAG,KAAKF,gBAAL,CAAsBK,SAAtB,CAAtB;AACA,YAAMJ,cAAc,GAAG,KAAKA,cAAL,CAAoB/oB,IAApB,EAA0BgpB,aAA1B,KAA6CA,aAAa,KAAKI,uBAAtF;AACA,WAAKC,mBAAL,CAAyBL,aAAzB,EAAwChpB,IAAxC,EAA8CmpB,SAA9C;AACA,aAAO;AAACH,qBAAD;AAAgBD;AAAhB,OAAP;AACD;;AACDO,iBAAa,CAACzX,OAAD,EAAU/zB,KAAV,EAAiBygC,UAAjB,EAA6Bve,IAA7B,EAAmC;AAC9C,UAAI8iB,kBAAkB,CAAC9iB,IAAD,CAAtB,EAA8B;AAC5BtkB,cAAM,CAACsP,MAAPtP,CAAcm2B,OAAdn2B,EAAuB6iC,UAAvB7iC;AADF,aAEO;AACL,aAAKitC,kBAAL,CAAwB7qC,KAAxB,EAA+BkiB,IAA/B,EAAqC4d,MAArC,CAA4C/L,OAA5C,EAAqD0M,UAArD;AACD;AACF;;AACD8K,uBAAmB,CAACL,aAAD,EAAgBhpB,IAAhB,EAAsBqf,UAAtB,EAAkC;AACnD,UAAI2J,aAAa,IAAI,CAAClG,kBAAkB,CAAC9iB,IAAD,CAAxC,EAAgD;AAC9C,aAAK2oB,kBAAL,CAAwBppC,SAAxB,EAAmCygB,IAAnC,EAAyC4d,MAAzC,CAAgDoL,aAAhD,EAA+D3J,UAA/D;AACD;AACF;;AACDkK,aAAS,CAAC1X,OAAD,EAAU/zB,KAAV,EAAiBkiB,IAAjB,EAAuB2d,MAAvB,EAA+B;AACtC9L,aAAO,CAAC8L,MAAR9L,GAAiB8L,MAAjB9L;AACA,YAAMnzB,OAAO,GAAG,KAAKozB,QAAL,CAAch0B,KAAd,EAAqB6/B,MAArB,CAAhB;;AACA,WAAKgL,kBAAL,CAAwB7qC,KAAxB,EAA+BkiB,IAA/B,EAAqC2d,MAArC,EAA6CC,MAA7C,CAAoD/L,OAApD,EAA6D;AAC3DnzB,eAAO,EAAG,CAACi/B,MAAD,IAAW,KAAKmL,gBAAL,CAAsBpqC,OAAtB,CAAX,IAA8CA;AADG,OAA7D;AAGD;;AACD8qC,oBAAgB,CAAC3X,OAAD,EAAUh0B,YAAV,EAAwBC,KAAxB,EAA+B;AAC7C,WAAKyrC,SAAL,CAAe1X,OAAf,EAAwB/zB,KAAxB,EAA+B,QAA/B,EAAyC,KAAzC;AACD;;AACD2rC,iBAAa,CAAC5X,OAAD,EAAUh0B,YAAV,EAAwBC,KAAxB,EAA+B;AAC1C,WAAKyrC,SAAL,CAAe1X,OAAf,EAAwB/zB,KAAxB,EAA+B,QAA/B,EAAyC,IAAzC;AACD;;AACD4rC,4BAAwB,GAAG;AACzB,YAAM7X,OAAO,GAAG,KAAKkQ,WAAL,CAAiBU,OAAjC;;AACA,UAAI5Q,OAAJ,EAAa;AACX,aAAK0X,SAAL,CAAe1X,OAAf,EAAwBtyB,SAAxB,EAAmC,QAAnC,EAA6C,KAA7C;AACD;AACF;;AACDoqC,yBAAqB,GAAG;AACtB,YAAM9X,OAAO,GAAG,KAAKkQ,WAAL,CAAiBU,OAAjC;;AACA,UAAI5Q,OAAJ,EAAa;AACX,aAAK0X,SAAL,CAAe1X,OAAf,EAAwBtyB,SAAxB,EAAmC,QAAnC,EAA6C,IAA7C;AACD;AACF;;AACD2mC,mBAAe,CAACH,gBAAD,EAAmB;AAChC,YAAM9jB,IAAI,GAAG,KAAK0hB,KAAlB;AACA,YAAMxkB,QAAQ,GAAG,KAAK4iB,WAAL,CAAiB9f,IAAlC;;AACA,WAAK,MAAM,CAAC/a,MAAD,EAAS0iC,IAAT,EAAeC,IAAf,CAAX,IAAmC,KAAK1F,SAAxC,EAAmD;AACjD,aAAKj9B,MAAL,EAAa0iC,IAAb,EAAmBC,IAAnB;AACD;;AACD,WAAK1F,SAAL,GAAiB,EAAjB;AACA,YAAM2F,OAAO,GAAG3qB,QAAQ,CAAC7hB,MAAzB;AACA,YAAMysC,OAAO,GAAG9nB,IAAI,CAAC3kB,MAArB;AACA,YAAMuM,KAAK,GAAGrI,IAAI,CAACoC,GAALpC,CAASuoC,OAATvoC,EAAkBsoC,OAAlBtoC,CAAd;;AACA,UAAIqI,KAAJ,EAAW;AACT,aAAKskB,KAAL,CAAW,CAAX,EAActkB,KAAd;AACD;;AACD,UAAIkgC,OAAO,GAAGD,OAAd,EAAuB;AACrB,aAAKE,eAAL,CAAqBF,OAArB,EAA8BC,OAAO,GAAGD,OAAxC,EAAiD/D,gBAAjD;AADF,aAEO,IAAIgE,OAAO,GAAGD,OAAd,EAAuB;AAC5B,aAAKG,eAAL,CAAqBF,OAArB,EAA8BD,OAAO,GAAGC,OAAxC;AACD;AACF;;AACDC,mBAAe,CAAC7kC,KAAD,EAAQ0E,KAAR,EAAwC;AAAA,UAAzBk8B,gBAAyB,uEAAN,IAAM;AACrD,YAAMt8B,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM9f,IAAI,GAAGxY,IAAI,CAACwY,IAAlB;AACA,YAAM7c,GAAG,GAAGD,KAAK,GAAG0E,KAApB;AACA,UAAI1M,CAAJ;;AACA,YAAM+sC,IAAI,GAAI9c,GAAD,IAAS;AACpBA,WAAG,CAAC9vB,MAAJ8vB,IAAcvjB,KAAdujB;;AACA,aAAKjwB,CAAC,GAAGiwB,GAAG,CAAC9vB,MAAJ8vB,GAAa,CAAtB,EAAyBjwB,CAAC,IAAIiI,GAA9B,EAAmCjI,CAAC,EAApC,EAAwC;AACtCiwB,aAAG,CAACjwB,CAAD,CAAHiwB,GAASA,GAAG,CAACjwB,CAAC,GAAG0M,KAAL,CAAZujB;AACD;AAJH;;AAMA8c,UAAI,CAACjoB,IAAD,CAAJioB;;AACA,WAAK/sC,CAAC,GAAGgI,KAAT,EAAgBhI,CAAC,GAAGiI,GAApB,EAAyB,EAAEjI,CAA3B,EAA8B;AAC5B8kB,YAAI,CAAC9kB,CAAD,CAAJ8kB,GAAU,IAAI,KAAKomB,eAAT,EAAVpmB;AACD;;AACD,UAAI,KAAKgM,QAAT,EAAmB;AACjBic,YAAI,CAACzgC,IAAI,CAACO,OAAN,CAAJkgC;AACD;;AACD,WAAK/b,KAAL,CAAWhpB,KAAX,EAAkB0E,KAAlB;;AACA,UAAIk8B,gBAAJ,EAAsB;AACpB,aAAKoE,cAAL,CAAoBloB,IAApB,EAA0B9c,KAA1B,EAAiC0E,KAAjC,EAAwC,OAAxC;AACD;AACF;;AACDsgC,kBAAc,CAACtY,OAAD,EAAU1sB,KAAV,EAAiB0E,KAAjB,EAAwBmW,IAAxB,EAA8B,CAAE;;AAC9CiqB,mBAAe,CAAC9kC,KAAD,EAAQ0E,KAAR,EAAe;AAC5B,YAAMJ,IAAI,GAAG,KAAKs4B,WAAlB;;AACA,UAAI,KAAK9T,QAAT,EAAmB;AACjB,cAAMmc,OAAO,GAAG3gC,IAAI,CAACO,OAALP,CAAajC,MAAbiC,CAAoBtE,KAApBsE,EAA2BI,KAA3BJ,CAAhB;;AACA,YAAIA,IAAI,CAAC45B,QAAT,EAAmB;AACjBR,qBAAW,CAACp5B,IAAD,EAAO2gC,OAAP,CAAXvH;AACD;AACF;;AACDp5B,UAAI,CAACwY,IAALxY,CAAUjC,MAAViC,CAAiBtE,KAAjBsE,EAAwBI,KAAxBJ;AACD;;AACD4gC,SAAK,CAACxtC,IAAD,EAAO;AACV,UAAI,KAAKoxB,QAAT,EAAmB;AACjB,aAAKkW,SAAL,CAAe3jC,IAAf,CAAoB3D,IAApB;AADF,aAEO;AACL,cAAM,CAACqK,MAAD,EAAS0iC,IAAT,EAAeC,IAAf,IAAuBhtC,IAA7B;AACA,aAAKqK,MAAL,EAAa0iC,IAAb,EAAmBC,IAAnB;AACD;;AACD,WAAK7qB,KAAL,CAAWsrB,YAAX,CAAwB9pC,IAAxB,CAA6B,CAAC,KAAK1C,KAAN,EAAa,GAAGjB,IAAhB,CAA7B;AACD;;AACD0tC,eAAW,GAAG;AACZ,YAAM1gC,KAAK,GAAG2gC,SAAS,CAACltC,MAAxB;;AACA,WAAK+sC,KAAL,CAAW,CAAC,iBAAD,EAAoB,KAAK7F,UAAL,GAAkBviB,IAAlB,CAAuB3kB,MAAvB,GAAgCuM,KAApD,EAA2DA,KAA3D,CAAX;AACD;;AACD4gC,cAAU,GAAG;AACX,WAAKJ,KAAL,CAAW,CAAC,iBAAD,EAAoB,KAAKtI,WAAL,CAAiB9f,IAAjB,CAAsB3kB,MAAtB,GAA+B,CAAnD,EAAsD,CAAtD,CAAX;AACD;;AACDotC,gBAAY,GAAG;AACb,WAAKL,KAAL,CAAW,CAAC,iBAAD,EAAoB,CAApB,EAAuB,CAAvB,CAAX;AACD;;AACDM,iBAAa,CAACxlC,KAAD,EAAQ0E,KAAR,EAAe;AAC1B,UAAIA,KAAJ,EAAW;AACT,aAAKwgC,KAAL,CAAW,CAAC,iBAAD,EAAoBllC,KAApB,EAA2B0E,KAA3B,CAAX;AACD;;AACD,YAAM+gC,QAAQ,GAAGJ,SAAS,CAACltC,MAAVktC,GAAmB,CAApC;;AACA,UAAII,QAAJ,EAAc;AACZ,aAAKP,KAAL,CAAW,CAAC,iBAAD,EAAoBllC,KAApB,EAA2BylC,QAA3B,CAAX;AACD;AACF;;AACDC,kBAAc,GAAG;AACf,WAAKR,KAAL,CAAW,CAAC,iBAAD,EAAoB,CAApB,EAAuBG,SAAS,CAACltC,MAAjC,CAAX;AACD;;AAjiBqB;;AAmiBxBgmC,mBAAiB,CAAC5hB,QAAlB4hB,GAA6B,EAA7BA;AACAA,mBAAiB,CAAC3nC,SAAlB2nC,CAA4BuC,kBAA5BvC,GAAiD,IAAjDA;AACAA,mBAAiB,CAAC3nC,SAAlB2nC,CAA4B+E,eAA5B/E,GAA8C,IAA9CA;;AAEA,WAASwH,iBAAT,CAA2BrqB,KAA3B,EAAkChlB,IAAlC,EAAwC;AACtC,QAAI,CAACglB,KAAK,CAACsqB,MAANtqB,CAAauqB,IAAlB,EAAwB;AACtB,YAAMC,YAAY,GAAGxqB,KAAK,CAACmhB,uBAANnhB,CAA8BhlB,IAA9BglB,CAArB;AACA,UAAIja,MAAM,GAAG,EAAb;;AACA,WAAK,IAAIrJ,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAGutC,YAAY,CAAC3tC,MAApC,EAA4CH,CAAC,GAAGO,IAAhD,EAAsDP,CAAC,EAAvD,EAA2D;AACzDqJ,cAAM,GAAGA,MAAM,CAAC0kC,MAAP1kC,CAAcykC,YAAY,CAAC9tC,CAAD,CAAZ8tC,CAAgBnJ,UAAhBmJ,CAA2BtD,kBAA3BsD,CAA8CxqB,KAA9CwqB,CAAdzkC,CAATA;AACD;;AACDia,WAAK,CAACsqB,MAANtqB,CAAauqB,IAAbvqB,GAAoBhZ,YAAY,CAACjB,MAAM,CAACxD,IAAPwD,CAAY,CAACxF,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA1BuF,CAAD,CAAhCia;AACD;;AACD,WAAOA,KAAK,CAACsqB,MAANtqB,CAAauqB,IAApB;AACD;;AACD,WAASG,oBAAT,CAA8B1hC,IAA9B,EAAoC;AAClC,UAAMgX,KAAK,GAAGhX,IAAI,CAACM,MAAnB;AACA,UAAMvD,MAAM,GAAGskC,iBAAiB,CAACrqB,KAAD,EAAQhX,IAAI,CAAChO,IAAb,CAAhC;AACA,QAAImI,GAAG,GAAG6c,KAAK,CAAC2qB,OAAhB;AACA,QAAIjuC,CAAJ,EAAOO,IAAP,EAAa2tC,IAAb,EAAmBra,IAAnB;;AACA,UAAMsa,gBAAgB,GAAG,MAAM;AAC7B,UAAID,IAAI,KAAK,KAATA,IAAkBA,IAAI,KAAK,CAAC,KAAhC,EAAuC;AACrC;AACD;;AACD,UAAIxqC,OAAO,CAACmwB,IAAD,CAAX,EAAmB;AACjBptB,WAAG,GAAGpC,IAAI,CAACoC,GAALpC,CAASoC,GAATpC,EAAcA,IAAI,CAAC8B,GAAL9B,CAAS6pC,IAAI,GAAGra,IAAhBxvB,KAAyBoC,GAAvCpC,CAANoC;AACD;;AACDotB,UAAI,GAAGqa,IAAPra;AAPF;;AASA,SAAK7zB,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG8I,MAAM,CAAClJ,MAA1B,EAAkCH,CAAC,GAAGO,IAAtC,EAA4C,EAAEP,CAA9C,EAAiD;AAC/CkuC,UAAI,GAAG5qB,KAAK,CAACpW,gBAANoW,CAAuBja,MAAM,CAACrJ,CAAD,CAA7BsjB,CAAP4qB;AACAC,sBAAgB;AACjB;;AACDta,QAAI,GAAGzxB,SAAPyxB;;AACA,SAAK7zB,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG+iB,KAAK,CAAC8qB,KAAN9qB,CAAYnjB,MAA/B,EAAuCH,CAAC,GAAGO,IAA3C,EAAiD,EAAEP,CAAnD,EAAsD;AACpDkuC,UAAI,GAAG5qB,KAAK,CAAC+qB,eAAN/qB,CAAsBtjB,CAAtBsjB,CAAP4qB;AACAC,sBAAgB;AACjB;;AACD,WAAO1nC,GAAP;AACD;;AACD,WAAS6nC,wBAAT,CAAkC3tC,KAAlC,EAAyC4tC,KAAzC,EAAgDhtC,OAAhD,EAAyDitC,UAAzD,EAAqE;AACnE,UAAMC,SAAS,GAAGltC,OAAO,CAACmtC,YAA1B;AACA,QAAI3qC,IAAJ,EAAUmb,KAAV;;AACA,QAAIhhB,aAAa,CAACuwC,SAAD,CAAjB,EAA8B;AAC5B1qC,UAAI,GAAGwqC,KAAK,CAAC9nC,GAAN8nC,GAAYhtC,OAAO,CAACotC,kBAA3B5qC;AACAmb,WAAK,GAAG3d,OAAO,CAACqtC,aAAhB1vB;AAFF,WAGO;AACLnb,UAAI,GAAG0qC,SAAS,GAAGD,UAAnBzqC;AACAmb,WAAK,GAAG,CAARA;AACD;;AACD,WAAO;AACL2vB,WAAK,EAAE9qC,IAAI,GAAGyqC,UADT;AAELtvB,WAFK;AAGLlX,WAAK,EAAEumC,KAAK,CAACO,MAANP,CAAa5tC,KAAb4tC,IAAuBxqC,IAAI,GAAG;AAHhC,KAAP;AAKD;;AACD,WAASgrC,yBAAT,CAAmCpuC,KAAnC,EAA0C4tC,KAA1C,EAAiDhtC,OAAjD,EAA0DitC,UAA1D,EAAsE;AACpE,UAAMM,MAAM,GAAGP,KAAK,CAACO,MAArB;AACA,UAAMZ,IAAI,GAAGY,MAAM,CAACnuC,KAAD,CAAnB;AACA,QAAIkzB,IAAI,GAAGlzB,KAAK,GAAG,CAARA,GAAYmuC,MAAM,CAACnuC,KAAK,GAAG,CAAT,CAAlBA,GAAgC,IAA3C;AACA,QAAI8wB,IAAI,GAAG9wB,KAAK,GAAGmuC,MAAM,CAAC3uC,MAAP2uC,GAAgB,CAAxBnuC,GAA4BmuC,MAAM,CAACnuC,KAAK,GAAG,CAAT,CAAlCA,GAAgD,IAA3D;AACA,UAAMquC,OAAO,GAAGztC,OAAO,CAACotC,kBAAxB;;AACA,QAAI9a,IAAI,KAAK,IAAb,EAAmB;AACjBA,UAAI,GAAGqa,IAAI,IAAIzc,IAAI,KAAK,IAATA,GAAgB8c,KAAK,CAACtmC,GAANsmC,GAAYA,KAAK,CAACvmC,KAAlCypB,GAA0CA,IAAI,GAAGyc,IAArD,CAAXra;AACD;;AACD,QAAIpC,IAAI,KAAK,IAAb,EAAmB;AACjBA,UAAI,GAAGyc,IAAI,GAAGA,IAAPA,GAAcra,IAArBpC;AACD;;AACD,UAAMzpB,KAAK,GAAGkmC,IAAI,GAAG,CAACA,IAAI,GAAG7pC,IAAI,CAACoC,GAALpC,CAASwvB,IAATxvB,EAAeotB,IAAfptB,CAAR,IAAgC,CAAhC,GAAoC2qC,OAAzD;AACA,UAAMjrC,IAAI,GAAGM,IAAI,CAAC8B,GAAL9B,CAASotB,IAAI,GAAGoC,IAAhBxvB,IAAwB,CAAxBA,GAA4B2qC,OAAzC;AACA,WAAO;AACLH,WAAK,EAAE9qC,IAAI,GAAGyqC,UADT;AAELtvB,WAAK,EAAE3d,OAAO,CAACqtC,aAFV;AAGL5mC;AAHK,KAAP;AAKD;;AACD,WAASinC,aAAT,CAAuBC,KAAvB,EAA8BlrC,IAA9B,EAAoCugC,MAApC,EAA4CvkC,CAA5C,EAA+C;AAC7C,UAAMmvC,UAAU,GAAG5K,MAAM,CAACvT,KAAPuT,CAAa2K,KAAK,CAAC,CAAD,CAAlB3K,EAAuBvkC,CAAvBukC,CAAnB;AACA,UAAM6K,QAAQ,GAAG7K,MAAM,CAACvT,KAAPuT,CAAa2K,KAAK,CAAC,CAAD,CAAlB3K,EAAuBvkC,CAAvBukC,CAAjB;AACA,UAAM99B,GAAG,GAAGpC,IAAI,CAACoC,GAALpC,CAAS8qC,UAAT9qC,EAAqB+qC,QAArB/qC,CAAZ;AACA,UAAMqC,GAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAAS8qC,UAAT9qC,EAAqB+qC,QAArB/qC,CAAZ;AACA,QAAIgrC,QAAQ,GAAG5oC,GAAf;AACA,QAAI6oC,MAAM,GAAG5oC,GAAb;;AACA,QAAIrC,IAAI,CAAC8B,GAAL9B,CAASoC,GAATpC,IAAgBA,IAAI,CAAC8B,GAAL9B,CAASqC,GAATrC,CAApB,EAAmC;AACjCgrC,cAAQ,GAAG3oC,GAAX2oC;AACAC,YAAM,GAAG7oC,GAAT6oC;AACD;;AACDtrC,QAAI,CAACugC,MAAM,CAACz3B,IAAR,CAAJ9I,GAAoBsrC,MAApBtrC;AACAA,QAAI,CAACurC,OAALvrC,GAAe;AACbqrC,cADa;AAEbC,YAFa;AAGbtnC,WAAK,EAAEmnC,UAHM;AAIblnC,SAAG,EAAEmnC,QAJQ;AAKb3oC,SALa;AAMbC;AANa,KAAf1C;AAQD;;AACD,WAASwrC,UAAT,CAAoBN,KAApB,EAA2BlrC,IAA3B,EAAiCugC,MAAjC,EAAyCvkC,CAAzC,EAA4C;AAC1C,QAAI5B,OAAO,CAAC8wC,KAAD,CAAX,EAAoB;AAClBD,mBAAa,CAACC,KAAD,EAAQlrC,IAAR,EAAcugC,MAAd,EAAsBvkC,CAAtB,CAAbivC;AADF,WAEO;AACLjrC,UAAI,CAACugC,MAAM,CAACz3B,IAAR,CAAJ9I,GAAoBugC,MAAM,CAACvT,KAAPuT,CAAa2K,KAAb3K,EAAoBvkC,CAApBukC,CAApBvgC;AACD;;AACD,WAAOA,IAAP;AACD;;AACD,WAASyrC,qBAAT,CAA+BnjC,IAA/B,EAAqCwY,IAArC,EAA2C9c,KAA3C,EAAkD0E,KAAlD,EAAyD;AACvD,UAAME,MAAM,GAAGN,IAAI,CAACM,MAApB;AACA,UAAM23B,MAAM,GAAGj4B,IAAI,CAACi4B,MAApB;AACA,UAAMkF,MAAM,GAAG78B,MAAM,CAAC88B,SAAP98B,EAAf;AACA,UAAM+8B,WAAW,GAAG/8B,MAAM,KAAK23B,MAA/B;AACA,UAAMxT,MAAM,GAAG,EAAf;AACA,QAAI/wB,CAAJ,EAAOO,IAAP,EAAayD,IAAb,EAAmBkrC,KAAnB;;AACA,SAAKlvC,CAAC,GAAGgI,KAAJhI,EAAWO,IAAI,GAAGyH,KAAK,GAAG0E,KAA/B,EAAsC1M,CAAC,GAAGO,IAA1C,EAAgD,EAAEP,CAAlD,EAAqD;AACnDkvC,WAAK,GAAGpqB,IAAI,CAAC9kB,CAAD,CAAZkvC;AACAlrC,UAAI,GAAG,EAAPA;AACAA,UAAI,CAAC4I,MAAM,CAACE,IAAR,CAAJ9I,GAAoB2lC,WAAW,IAAI/8B,MAAM,CAACokB,KAAPpkB,CAAa68B,MAAM,CAACzpC,CAAD,CAAnB4M,EAAwB5M,CAAxB4M,CAAnC5I;AACA+sB,YAAM,CAAC1tB,IAAP0tB,CAAYye,UAAU,CAACN,KAAD,EAAQlrC,IAAR,EAAcugC,MAAd,EAAsBvkC,CAAtB,CAAtB+wB;AACD;;AACD,WAAOA,MAAP;AACD;;AACD,WAAS2e,UAAT,CAAoBC,MAApB,EAA4B;AAC1B,WAAOA,MAAM,IAAIA,MAAM,CAACN,QAAPM,KAAoBvtC,SAA9ButC,IAA2CA,MAAM,CAACL,MAAPK,KAAkBvtC,SAApE;AACD;;AACD,WAASwtC,OAAT,CAAiB7rC,IAAjB,EAAuBwgC,MAAvB,EAA+BsL,UAA/B,EAA2C;AACzC,QAAI9rC,IAAI,KAAK,CAAb,EAAgB;AACd,aAAOgB,IAAI,CAAChB,IAAD,CAAX;AACD;;AACD,WAAO,CAACwgC,MAAM,CAACuL,YAAPvL,KAAwB,CAAxBA,GAA4B,CAAC,CAA9B,KAAoCA,MAAM,CAAC99B,GAAP89B,IAAcsL,UAAdtL,GAA2B,CAA3BA,GAA+B,CAAC,CAApE,CAAP;AACD;;AACD,WAASwL,WAAT,CAAqB3O,UAArB,EAAiC;AAC/B,QAAIrhC,OAAJ,EAAaiI,KAAb,EAAoBC,GAApB,EAAyBkgB,GAAzB,EAA8BC,MAA9B;;AACA,QAAIgZ,UAAU,CAAC4O,UAAf,EAA2B;AACzBjwC,aAAO,GAAGqhC,UAAU,CAACp3B,IAAXo3B,GAAkBA,UAAU,CAAC3+B,CAAvC1C;AACAiI,WAAK,GAAG,MAARA;AACAC,SAAG,GAAG,OAANA;AAHF,WAIO;AACLlI,aAAO,GAAGqhC,UAAU,CAACp3B,IAAXo3B,GAAkBA,UAAU,CAACz+B,CAAvC5C;AACAiI,WAAK,GAAG,QAARA;AACAC,SAAG,GAAG,KAANA;AACD;;AACD,QAAIlI,OAAJ,EAAa;AACXooB,SAAG,GAAG,KAANA;AACAC,YAAM,GAAG,OAATA;AAFF,WAGO;AACLD,SAAG,GAAG,OAANA;AACAC,YAAM,GAAG,KAATA;AACD;;AACD,WAAO;AAACpgB,WAAD;AAAQC,SAAR;AAAalI,aAAb;AAAsBooB,SAAtB;AAA2BC;AAA3B,KAAP;AACD;;AACD,WAAS6nB,gBAAT,CAA0B7O,UAA1B,EAAsC7/B,OAAtC,EAA+C8hC,KAA/C,EAAsD1iC,KAAtD,EAA6D;AAC3D,QAAIuvC,IAAI,GAAG3uC,OAAO,CAAC4uC,aAAnB;AACA,UAAMlmC,GAAG,GAAG,EAAZ;;AACA,QAAI,CAACimC,IAAL,EAAW;AACT9O,gBAAU,CAAC+O,aAAX/O,GAA2Bn3B,GAA3Bm3B;AACA;AACD;;AACD,QAAI8O,IAAI,KAAK,IAAb,EAAmB;AACjB9O,gBAAU,CAAC+O,aAAX/O,GAA2B;AAACjZ,WAAG,EAAE,IAAN;AAAYjc,aAAK,EAAE,IAAnB;AAAyBkc,cAAM,EAAE,IAAjC;AAAuCnc,YAAI,EAAE;AAA7C,OAA3Bm1B;AACA;AACD;;AACD,UAAM;AAACp5B,WAAD;AAAQC,SAAR;AAAalI,aAAb;AAAsBooB,SAAtB;AAA2BC;AAA3B,QAAqC2nB,WAAW,CAAC3O,UAAD,CAAtD;;AACA,QAAI8O,IAAI,KAAK,QAATA,IAAqB7M,KAAzB,EAAgC;AAC9BjC,gBAAU,CAACgP,kBAAXhP,GAAgC,IAAhCA;;AACA,UAAI,CAACiC,KAAK,CAAC4B,IAAN5B,IAAc,CAAf,MAAsB1iC,KAA1B,EAAiC;AAC/BuvC,YAAI,GAAG/nB,GAAP+nB;AADF,aAEO,IAAI,CAAC7M,KAAK,CAAC6B,OAAN7B,IAAiB,CAAlB,MAAyB1iC,KAA7B,EAAoC;AACzCuvC,YAAI,GAAG9nB,MAAP8nB;AADK,aAEA;AACLjmC,WAAG,CAAComC,SAAS,CAACjoB,MAAD,EAASpgB,KAAT,EAAgBC,GAAhB,EAAqBlI,OAArB,CAAV,CAAHkK,GAA8C,IAA9CA;AACAimC,YAAI,GAAG/nB,GAAP+nB;AACD;AACF;;AACDjmC,OAAG,CAAComC,SAAS,CAACH,IAAD,EAAOloC,KAAP,EAAcC,GAAd,EAAmBlI,OAAnB,CAAV,CAAHkK,GAA4C,IAA5CA;AACAm3B,cAAU,CAAC+O,aAAX/O,GAA2Bn3B,GAA3Bm3B;AACD;;AACD,WAASiP,SAAT,CAAmBH,IAAnB,EAAyBrsC,CAAzB,EAA4BC,CAA5B,EAA+B/D,OAA/B,EAAwC;AACtC,QAAIA,OAAJ,EAAa;AACXmwC,UAAI,GAAGI,IAAI,CAACJ,IAAD,EAAOrsC,CAAP,EAAUC,CAAV,CAAXosC;AACAA,UAAI,GAAGK,QAAQ,CAACL,IAAD,EAAOpsC,CAAP,EAAUD,CAAV,CAAfqsC;AAFF,WAGO;AACLA,UAAI,GAAGK,QAAQ,CAACL,IAAD,EAAOrsC,CAAP,EAAUC,CAAV,CAAfosC;AACD;;AACD,WAAOA,IAAP;AACD;;AACD,WAASI,IAAT,CAAcE,IAAd,EAAoB/vC,EAApB,EAAwBgwC,EAAxB,EAA4B;AAC1B,WAAOD,IAAI,KAAK/vC,EAAT+vC,GAAcC,EAAdD,GAAmBA,IAAI,KAAKC,EAATD,GAAc/vC,EAAd+vC,GAAmBA,IAA7C;AACD;;AACD,WAASD,QAAT,CAAkB/tC,CAAlB,EAAqBwF,KAArB,EAA4BC,GAA5B,EAAiC;AAC/B,WAAOzF,CAAC,KAAK,OAANA,GAAgBwF,KAAhBxF,GAAwBA,CAAC,KAAK,KAANA,GAAcyF,GAAdzF,GAAoBA,CAAnD;AACD;;AACD,WAASkuC,gBAAT,CAA0BtP,UAA1B,QAAuDliB,KAAvD,EAA8D;AAAA,QAAxB;AAACyxB;AAAD,KAAwB;AAC5DvP,cAAU,CAACuP,aAAXvP,GAA2BuP,aAAa,KAAK,MAAlBA,GACvBzxB,KAAK,KAAK,CAAVA,GAAc,IAAdA,GAAqB,CADEyxB,GAEvBA,aAFJvP;AAGD;;AACD,QAAMwP,aAAN,SAA4BzK,iBAA5B,CAA8C;AAC5CoD,sBAAkB,CAACj9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AAC3C,aAAO+iC,qBAAqB,CAACnjC,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,CAA5B;AACD;;AACD28B,kBAAc,CAAC/8B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACvC,aAAO+iC,qBAAqB,CAACnjC,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,CAA5B;AACD;;AACD48B,mBAAe,CAACh9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACxC,YAAM;AAACE,cAAD;AAAS23B;AAAT,UAAmBj4B,IAAzB;AACA,YAAM;AAACs9B,gBAAQ,GAAG,GAAZ;AAAiBC,gBAAQ,GAAG;AAA5B,UAAmC,KAAK/Y,QAA9C;AACA,YAAM+f,QAAQ,GAAGjkC,MAAM,CAACE,IAAPF,KAAgB,GAAhBA,GAAsBg9B,QAAtBh9B,GAAiCi9B,QAAlD;AACA,YAAMiH,QAAQ,GAAGvM,MAAM,CAACz3B,IAAPy3B,KAAgB,GAAhBA,GAAsBqF,QAAtBrF,GAAiCsF,QAAlD;AACA,YAAM9Y,MAAM,GAAG,EAAf;AACA,UAAI/wB,CAAJ,EAAOO,IAAP,EAAayD,IAAb,EAAmBnB,GAAnB;;AACA,WAAK7C,CAAC,GAAGgI,KAAJhI,EAAWO,IAAI,GAAGyH,KAAK,GAAG0E,KAA/B,EAAsC1M,CAAC,GAAGO,IAA1C,EAAgD,EAAEP,CAAlD,EAAqD;AACnD6C,WAAG,GAAGiiB,IAAI,CAAC9kB,CAAD,CAAV6C;AACAmB,YAAI,GAAG,EAAPA;AACAA,YAAI,CAAC4I,MAAM,CAACE,IAAR,CAAJ9I,GAAoB4I,MAAM,CAACokB,KAAPpkB,CAAahK,gBAAgB,CAACC,GAAD,EAAMguC,QAAN,CAA7BjkC,EAA8C5M,CAA9C4M,CAApB5I;AACA+sB,cAAM,CAAC1tB,IAAP0tB,CAAYye,UAAU,CAAC5sC,gBAAgB,CAACC,GAAD,EAAMiuC,QAAN,CAAjB,EAAkC9sC,IAAlC,EAAwCugC,MAAxC,EAAgDvkC,CAAhD,CAAtB+wB;AACD;;AACD,aAAOA,MAAP;AACD;;AACDiZ,yBAAqB,CAAC/kC,KAAD,EAAQqe,KAAR,EAAeyN,MAAf,EAAuBsS,KAAvB,EAA8B;AACjD,YAAM2G,qBAAN,CAA4B/kC,KAA5B,EAAmCqe,KAAnC,EAA0CyN,MAA1C,EAAkDsS,KAAlD;AACA,YAAMsM,MAAM,GAAG5e,MAAM,CAACwe,OAAtB;;AACA,UAAII,MAAM,IAAIrsB,KAAK,KAAK,KAAKshB,WAAL,CAAiBL,MAAzC,EAAiD;AAC/Ct/B,aAAK,CAACwB,GAANxB,GAAYZ,IAAI,CAACoC,GAALpC,CAASY,KAAK,CAACwB,GAAfpC,EAAoBsrC,MAAM,CAAClpC,GAA3BpC,CAAZY;AACAA,aAAK,CAACyB,GAANzB,GAAYZ,IAAI,CAACqC,GAALrC,CAASY,KAAK,CAACyB,GAAfrC,EAAoBsrC,MAAM,CAACjpC,GAA3BrC,CAAZY;AACD;AACF;;AACDwlC,kBAAc,GAAG;AACf,aAAO,CAAP;AACD;;AACDC,oBAAgB,CAAC/pC,KAAD,EAAQ;AACtB,YAAM2L,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM;AAACh4B,cAAD;AAAS23B;AAAT,UAAmBj4B,IAAzB;AACA,YAAMykB,MAAM,GAAG,KAAK+Y,SAAL,CAAenpC,KAAf,CAAf;AACA,YAAMgvC,MAAM,GAAG5e,MAAM,CAACwe,OAAtB;AACA,YAAMpxC,KAAK,GAAGuxC,UAAU,CAACC,MAAD,CAAVD,GACV,MAAMC,MAAM,CAAC3nC,KAAb,GAAqB,IAArB,GAA4B2nC,MAAM,CAAC1nC,GAAnC,GAAyC,GAD/BynC,GAEV,KAAKnL,MAAM,CAACqG,gBAAPrG,CAAwBxT,MAAM,CAACwT,MAAM,CAACz3B,IAAR,CAA9By3B,CAFT;AAGA,aAAO;AACLoG,aAAK,EAAE,KAAK/9B,MAAM,CAACg+B,gBAAPh+B,CAAwBmkB,MAAM,CAACnkB,MAAM,CAACE,IAAR,CAA9BF,CADP;AAELzO;AAFK,OAAP;AAID;;AACD8oC,cAAU,GAAG;AACX,WAAKJ,mBAAL,GAA2B,IAA3B;AACA,YAAMI,UAAN;AACA,YAAM36B,IAAI,GAAG,KAAKs4B,WAAlB;AACAt4B,UAAI,CAAC+2B,KAAL/2B,GAAa,KAAK+6B,UAAL,GAAkBhE,KAA/B/2B;AACD;;AACDm0B,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAMvW,IAAI,GAAG,KAAKs4B,WAAlB;AACA,WAAKoI,cAAL,CAAoB1gC,IAAI,CAACwY,IAAzB,EAA+B,CAA/B,EAAkCxY,IAAI,CAACwY,IAALxY,CAAUnM,MAA5C,EAAoD0iB,IAApD;AACD;;AACDmqB,kBAAc,CAAC+D,IAAD,EAAO/oC,KAAP,EAAc0E,KAAd,EAAqBmW,IAArB,EAA2B;AACvC,YAAMylB,KAAK,GAAGzlB,IAAI,KAAK,OAAvB;AACA,YAAM;AAACliB,aAAD;AAAQikC,mBAAW,EAAE;AAACL;AAAD;AAArB,UAAiC,IAAvC;AACA,YAAMv6B,IAAI,GAAGu6B,MAAM,CAACyM,YAAPzM,EAAb;AACA,YAAMyL,UAAU,GAAGzL,MAAM,CAACuL,YAAPvL,EAAnB;;AACA,YAAMgK,KAAK,GAAG,KAAK0C,SAAL,EAAd;;AACA,YAAM;AAACpF,qBAAD;AAAgBD;AAAhB,UAAkC,KAAKG,iBAAL,CAAuB/jC,KAAvB,EAA8B6a,IAA9B,CAAxC;;AACA,WAAK,IAAI7iB,CAAC,GAAGgI,KAAb,EAAoBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAAhC,EAAuC1M,CAAC,EAAxC,EAA4C;AAC1C,cAAM+wB,MAAM,GAAG,KAAK+Y,SAAL,CAAe9pC,CAAf,CAAf;AACA,cAAMkxC,OAAO,GAAG5I,KAAK,IAAIpqC,aAAa,CAAC6yB,MAAM,CAACwT,MAAM,CAACz3B,IAAR,CAAP,CAAtBw7B,GAA8C;AAACt+B,cAAD;AAAOmnC,cAAI,EAAEnnC;AAAb,SAA9Cs+B,GAAmE,KAAK8I,wBAAL,CAA8BpxC,CAA9B,CAAnF;;AACA,cAAMqxC,OAAO,GAAG,KAAKC,wBAAL,CAA8BtxC,CAA9B,EAAiCuuC,KAAjC,CAAhB;;AACA,cAAMlL,KAAK,GAAG,CAACtS,MAAM,CAAC8T,OAAP9T,IAAkB,EAAnB,EAAuBwT,MAAM,CAACz3B,IAA9B,CAAd;AACA,cAAMs0B,UAAU,GAAG;AACjB4O,oBADiB;AAEjBhmC,cAAI,EAAEknC,OAAO,CAAClnC,IAFG;AAGjBomC,4BAAkB,EAAE,CAAC/M,KAAD,IAAUqM,UAAU,CAAC3e,MAAM,CAACwe,OAAR,CAApB,IAAyC5uC,KAAK,KAAK0iC,KAAK,CAAC4B,IAAzD,IAAiEtkC,KAAK,KAAK0iC,KAAK,CAAC6B,OAHpF;AAIjBziC,WAAC,EAAEutC,UAAU,GAAGkB,OAAO,CAACC,IAAX,GAAkBE,OAAO,CAACE,MAJtB;AAKjB5uC,WAAC,EAAEqtC,UAAU,GAAGqB,OAAO,CAACE,MAAX,GAAoBL,OAAO,CAACC,IALxB;AAMjB3qB,gBAAM,EAAEwpB,UAAU,GAAGqB,OAAO,CAACttC,IAAX,GAAkBM,IAAI,CAAC8B,GAAL9B,CAAS6sC,OAAO,CAACntC,IAAjBM,CANnB;AAOjB+gB,eAAK,EAAE4qB,UAAU,GAAG3rC,IAAI,CAAC8B,GAAL9B,CAAS6sC,OAAO,CAACntC,IAAjBM,CAAH,GAA4BgtC,OAAO,CAACttC;AAPpC,SAAnB;;AASA,YAAI6nC,cAAJ,EAAoB;AAClBxK,oBAAU,CAAC7/B,OAAX6/B,GAAqByK,aAAa,IAAI,KAAKb,yBAAL,CAA+BhrC,CAA/B,EAAkC+wC,IAAI,CAAC/wC,CAAD,CAAJ+wC,CAAQvQ,MAARuQ,GAAiB,QAAjBA,GAA4BluB,IAA9D,CAAtCue;AACD;;AACD,cAAM7/B,OAAO,GAAG6/B,UAAU,CAAC7/B,OAAX6/B,IAAsB2P,IAAI,CAAC/wC,CAAD,CAAJ+wC,CAAQxvC,OAA9C;AACA0uC,wBAAgB,CAAC7O,UAAD,EAAa7/B,OAAb,EAAsB8hC,KAAtB,EAA6B1iC,KAA7B,CAAhBsvC;AACAS,wBAAgB,CAACtP,UAAD,EAAa7/B,OAAb,EAAsBgtC,KAAK,CAACrvB,KAA5B,CAAhBwxB;AACA,aAAKvE,aAAL,CAAmB4E,IAAI,CAAC/wC,CAAD,CAAvB,EAA4BA,CAA5B,EAA+BohC,UAA/B,EAA2Cve,IAA3C;AACD;AACF;;AACD2uB,cAAU,CAACtoC,IAAD,EAAOs8B,SAAP,EAAkB;AAC1B,YAAM;AAAC54B;AAAD,UAAW,KAAKg4B,WAAtB;AACA,YAAM1B,QAAQ,GAAGt2B,MAAM,CAAC63B,uBAAP73B,CAA+B,KAAK25B,KAApC35B,EACdsjB,MADctjB,CACPN,IAAI,IAAIA,IAAI,CAACq4B,UAALr4B,CAAgB/K,OAAhB+K,CAAwBmlC,OADzB7kC,CAAjB;AAEA,YAAMg3B,OAAO,GAAGh3B,MAAM,CAACrL,OAAPqL,CAAeg3B,OAA/B;AACA,YAAMM,MAAM,GAAG,EAAf;;AACA,YAAMwN,QAAQ,GAAIplC,IAAD,IAAU;AACzB,cAAMykB,MAAM,GAAGzkB,IAAI,CAACq4B,UAALr4B,CAAgBw9B,SAAhBx9B,CAA0Bk5B,SAA1Bl5B,CAAf;AACA,cAAMgU,GAAG,GAAGyQ,MAAM,IAAIA,MAAM,CAACzkB,IAAI,CAACi4B,MAALj4B,CAAYQ,IAAb,CAA5B;;AACA,YAAI5O,aAAa,CAACoiB,GAAD,CAAbpiB,IAAsB+H,KAAK,CAACqa,GAAD,CAA/B,EAAsC;AACpC,iBAAO,IAAP;AACD;AALH;;AAOA,WAAK,MAAMhU,IAAX,IAAmB42B,QAAnB,EAA6B;AAC3B,YAAIsC,SAAS,KAAKpjC,SAAdojC,IAA2BkM,QAAQ,CAACplC,IAAD,CAAvC,EAA+C;AAC7C;AACD;;AACD,YAAIs3B,OAAO,KAAK,KAAZA,IAAqBM,MAAM,CAAC7iC,OAAP6iC,CAAe53B,IAAI,CAAC+2B,KAApBa,MAA+B,CAAC,CAArDN,IACLA,OAAO,KAAKxhC,SAAZwhC,IAAyBt3B,IAAI,CAAC+2B,KAAL/2B,KAAelK,SADvC,EACmD;AACjD8hC,gBAAM,CAAC7gC,IAAP6gC,CAAY53B,IAAI,CAAC+2B,KAAjBa;AACD;;AACD,YAAI53B,IAAI,CAAC3L,KAAL2L,KAAepD,IAAnB,EAAyB;AACvB;AACD;AACF;;AACD,UAAI,CAACg7B,MAAM,CAAC/jC,MAAZ,EAAoB;AAClB+jC,cAAM,CAAC7gC,IAAP6gC,CAAY9hC,SAAZ8hC;AACD;;AACD,aAAOA,MAAP;AACD;;AACDyN,kBAAc,CAAChxC,KAAD,EAAQ;AACpB,aAAO,KAAK6wC,UAAL,CAAgBpvC,SAAhB,EAA2BzB,KAA3B,EAAkCR,MAAzC;AACD;;AACDyxC,kBAAc,CAAClxC,YAAD,EAAeojB,IAAf,EAAqB0hB,SAArB,EAAgC;AAC5C,YAAMtB,MAAM,GAAG,KAAKsN,UAAL,CAAgB9wC,YAAhB,EAA8B8kC,SAA9B,CAAf;;AACA,YAAM7kC,KAAK,GAAImjB,IAAI,KAAK1hB,SAAT0hB,GACXogB,MAAM,CAAC7iC,OAAP6iC,CAAepgB,IAAfogB,CADWpgB,GAEX,CAAC,CAFL;AAGA,aAAQnjB,KAAK,KAAK,CAAC,CAAXA,GACJujC,MAAM,CAAC/jC,MAAP+jC,GAAgB,CADZvjC,GAEJA,KAFJ;AAGD;;AACDswC,aAAS,GAAG;AACV,YAAM9nB,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM+K,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMh4B,MAAM,GAAGN,IAAI,CAACM,MAApB;AACA,YAAMkiC,MAAM,GAAG,EAAf;AACA,UAAI9uC,CAAJ,EAAOO,IAAP;;AACA,WAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG+L,IAAI,CAACwY,IAALxY,CAAUnM,MAA7B,EAAqCH,CAAC,GAAGO,IAAzC,EAA+C,EAAEP,CAAjD,EAAoD;AAClD8uC,cAAM,CAACzrC,IAAPyrC,CAAYliC,MAAM,CAACM,gBAAPN,CAAwB,KAAKk9B,SAAL,CAAe9pC,CAAf,EAAkB4M,MAAM,CAACE,IAAzB,CAAxBF,EAAwD5M,CAAxD4M,CAAZkiC;AACD;;AACD,YAAMJ,YAAY,GAAGvlB,IAAI,CAACulB,YAA1B;AACA,YAAMjoC,GAAG,GAAGioC,YAAY,IAAIV,oBAAoB,CAAC1hC,IAAD,CAAhD;AACA,aAAO;AACL7F,WADK;AAELqoC,cAFK;AAGL9mC,aAAK,EAAE4E,MAAM,CAACilC,WAHT;AAIL5pC,WAAG,EAAE2E,MAAM,CAACklC,SAJP;AAKLtD,kBAAU,EAAE,KAAKmD,cAAL,EALP;AAMLruB,aAAK,EAAE1W,MANF;AAOL6kC,eAAO,EAAEtoB,IAAI,CAACsoB,OAPT;AAQLvyB,aAAK,EAAEwvB,YAAY,GAAG,CAAH,GAAOvlB,IAAI,CAACwlB,kBAALxlB,GAA0BA,IAAI,CAACylB;AARpD,OAAP;AAUD;;AACDwC,4BAAwB,CAACzwC,KAAD,EAAQ;AAC9B,YAAM;AAACikC,mBAAW,EAAE;AAACL,gBAAD;AAAS2B;AAAT,SAAd;AAAkC3kC,eAAO,EAAE;AAACyI,cAAI,EAAE+nC,SAAP;AAAkBC;AAAlB;AAA3C,UAA8E,IAApF;AACA,YAAMnC,UAAU,GAAGkC,SAAS,IAAI,CAAhC;AACA,YAAMhhB,MAAM,GAAG,KAAK+Y,SAAL,CAAenpC,KAAf,CAAf;AACA,YAAMgvC,MAAM,GAAG5e,MAAM,CAACwe,OAAtB;AACA,YAAM0C,QAAQ,GAAGvC,UAAU,CAACC,MAAD,CAA3B;AACA,UAAIxxC,KAAK,GAAG4yB,MAAM,CAACwT,MAAM,CAACz3B,IAAR,CAAlB;AACA,UAAI9E,KAAK,GAAG,CAAZ;AACA,UAAI7H,MAAM,GAAG+lC,QAAQ,GAAG,KAAK9C,UAAL,CAAgBmB,MAAhB,EAAwBxT,MAAxB,EAAgCmV,QAAhC,CAAH,GAA+C/nC,KAApE;AACA,UAAIgzC,IAAJ,EAAUptC,IAAV;;AACA,UAAI5D,MAAM,KAAKhC,KAAf,EAAsB;AACpB6J,aAAK,GAAG7H,MAAM,GAAGhC,KAAjB6J;AACA7H,cAAM,GAAGhC,KAATgC;AACD;;AACD,UAAI8xC,QAAJ,EAAc;AACZ9zC,aAAK,GAAGwxC,MAAM,CAACN,QAAflxC;AACAgC,cAAM,GAAGwvC,MAAM,CAACL,MAAPK,GAAgBA,MAAM,CAACN,QAAhClvC;;AACA,YAAIhC,KAAK,KAAK,CAAVA,IAAe4G,IAAI,CAAC5G,KAAD,CAAJ4G,KAAgBA,IAAI,CAAC4qC,MAAM,CAACL,MAAR,CAAvC,EAAwD;AACtDtnC,eAAK,GAAG,CAARA;AACD;;AACDA,aAAK,IAAI7J,KAAT6J;AACD;;AACD,YAAMmnC,UAAU,GAAG,CAACjxC,aAAa,CAAC6zC,SAAD,CAAd,IAA6B,CAACE,QAA9B,GAAyCF,SAAzC,GAAqD/pC,KAAxE;AACA,UAAIgC,IAAI,GAAGu6B,MAAM,CAACr3B,gBAAPq3B,CAAwB4K,UAAxB5K,CAAX;;AACA,UAAI,KAAK1iB,KAAL,CAAWqwB,iBAAX,CAA6BvxC,KAA7B,CAAJ,EAAyC;AACvCwwC,YAAI,GAAG5M,MAAM,CAACr3B,gBAAPq3B,CAAwBv8B,KAAK,GAAG7H,MAAhCokC,CAAP4M;AADF,aAEO;AACLA,YAAI,GAAGnnC,IAAPmnC;AACD;;AACDptC,UAAI,GAAGotC,IAAI,GAAGnnC,IAAdjG;;AACA,UAAIM,IAAI,CAAC8B,GAAL9B,CAASN,IAATM,IAAiB2tC,YAArB,EAAmC;AACjCjuC,YAAI,GAAG6rC,OAAO,CAAC7rC,IAAD,EAAOwgC,MAAP,EAAesL,UAAf,CAAPD,GAAoCoC,YAA3CjuC;;AACA,YAAI5F,KAAK,KAAK0xC,UAAd,EAA0B;AACxB7lC,cAAI,IAAIjG,IAAI,GAAG,CAAfiG;AACD;;AACD,cAAMmoC,UAAU,GAAG5N,MAAM,CAAC6N,kBAAP7N,CAA0B,CAA1BA,CAAnB;AACA,cAAM8N,QAAQ,GAAG9N,MAAM,CAAC6N,kBAAP7N,CAA0B,CAA1BA,CAAjB;AACA,cAAM99B,GAAG,GAAGpC,IAAI,CAACoC,GAALpC,CAAS8tC,UAAT9tC,EAAqBguC,QAArBhuC,CAAZ;AACA,cAAMqC,GAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAAS8tC,UAAT9tC,EAAqBguC,QAArBhuC,CAAZ;AACA2F,YAAI,GAAG3F,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAACoC,GAALpC,CAAS2F,IAAT3F,EAAeqC,GAAfrC,CAATA,EAA8BoC,GAA9BpC,CAAP2F;AACAmnC,YAAI,GAAGnnC,IAAI,GAAGjG,IAAdotC;AACD;;AACD,UAAInnC,IAAI,KAAKu6B,MAAM,CAACr3B,gBAAPq3B,CAAwBsL,UAAxBtL,CAAb,EAAkD;AAChD,cAAM+N,QAAQ,GAAGvtC,IAAI,CAAChB,IAAD,CAAJgB,GAAaw/B,MAAM,CAACgO,oBAAPhO,CAA4BsL,UAA5BtL,CAAbx/B,GAAuD,CAAxE;AACAiF,YAAI,IAAIsoC,QAARtoC;AACAjG,YAAI,IAAIuuC,QAARvuC;AACD;;AACD,aAAO;AACLA,YADK;AAELiG,YAFK;AAGLmnC,YAHK;AAILI,cAAM,EAAEJ,IAAI,GAAGptC,IAAI,GAAG;AAJjB,OAAP;AAMD;;AACDutC,4BAAwB,CAAC3wC,KAAD,EAAQ4tC,KAAR,EAAe;AACrC,YAAMjrB,KAAK,GAAGirB,KAAK,CAACjrB,KAApB;AACA,YAAM/hB,OAAO,GAAG,KAAKA,OAArB;AACA,YAAMmwC,QAAQ,GAAGnwC,OAAO,CAACmwC,QAAzB;AACA,YAAMc,eAAe,GAAGtzC,cAAc,CAACqC,OAAO,CAACixC,eAAT,EAA0BC,QAA1B,CAAtC;AACA,UAAIlB,MAAJ,EAAYxtC,IAAZ;;AACA,UAAIwqC,KAAK,CAACkD,OAAV,EAAmB;AACjB,cAAMjD,UAAU,GAAGkD,QAAQ,GAAG,KAAKC,cAAL,CAAoBhxC,KAApB,CAAH,GAAgC4tC,KAAK,CAACC,UAAjE;AACA,cAAMvpC,KAAK,GAAG1D,OAAO,CAACmtC,YAARntC,KAAyB,MAAzBA,GACVwtC,yBAAyB,CAACpuC,KAAD,EAAQ4tC,KAAR,EAAehtC,OAAf,EAAwBitC,UAAxB,CADfjtC,GAEV+sC,wBAAwB,CAAC3tC,KAAD,EAAQ4tC,KAAR,EAAehtC,OAAf,EAAwBitC,UAAxB,CAF5B;;AAGA,cAAMkE,UAAU,GAAG,KAAKd,cAAL,CAAoB,KAAKjxC,KAAzB,EAAgC,KAAKikC,WAAL,CAAiBvB,KAAjD,EAAwDqO,QAAQ,GAAG/wC,KAAH,GAAWyB,SAA3E,CAAnB;;AACAmvC,cAAM,GAAGtsC,KAAK,CAAC+C,KAAN/C,GAAeA,KAAK,CAAC4pC,KAAN5pC,GAAcytC,UAA7BztC,GAA4CA,KAAK,CAAC4pC,KAAN5pC,GAAc,CAAnEssC;AACAxtC,YAAI,GAAGM,IAAI,CAACoC,GAALpC,CAASmuC,eAATnuC,EAA0BY,KAAK,CAAC4pC,KAAN5pC,GAAcA,KAAK,CAACia,KAA9C7a,CAAPN;AAPF,aAQO;AACLwtC,cAAM,GAAGjuB,KAAK,CAACpW,gBAANoW,CAAuB,KAAKwmB,SAAL,CAAenpC,KAAf,EAAsB2iB,KAAK,CAACxW,IAA5B,CAAvBwW,EAA0D3iB,KAA1D2iB,CAATiuB;AACAxtC,YAAI,GAAGM,IAAI,CAACoC,GAALpC,CAASmuC,eAATnuC,EAA0BkqC,KAAK,CAAC9nC,GAAN8nC,GAAYA,KAAK,CAACrvB,KAA5C7a,CAAPN;AACD;;AACD,aAAO;AACLiG,YAAI,EAAEunC,MAAM,GAAGxtC,IAAI,GAAG,CADjB;AAELotC,YAAI,EAAEI,MAAM,GAAGxtC,IAAI,GAAG,CAFjB;AAGLwtC,cAHK;AAILxtC;AAJK,OAAP;AAMD;;AACDu6B,QAAI,GAAG;AACL,YAAMhyB,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAML,MAAM,GAAGj4B,IAAI,CAACi4B,MAApB;AACA,YAAMoO,KAAK,GAAGrmC,IAAI,CAACwY,IAAnB;AACA,YAAMvkB,IAAI,GAAGoyC,KAAK,CAACxyC,MAAnB;AACA,UAAIH,CAAC,GAAG,CAAR;;AACA,aAAOA,CAAC,GAAGO,IAAX,EAAiB,EAAEP,CAAnB,EAAsB;AACpB,YAAI,KAAK8pC,SAAL,CAAe9pC,CAAf,EAAkBukC,MAAM,CAACz3B,IAAzB,MAAmC,IAAvC,EAA6C;AAC3C6lC,eAAK,CAAC3yC,CAAD,CAAL2yC,CAASrU,IAATqU,CAAc,KAAKvM,IAAnBuM;AACD;AACF;AACF;;AAhP2C;;AAkP9C/B,eAAa,CAAC3yC,EAAd2yC,GAAmB,KAAnBA;AACAA,eAAa,CAACrsB,QAAdqsB,GAAyB;AACvBlI,sBAAkB,EAAE,KADG;AAEvBwC,mBAAe,EAAE,KAFM;AAGvByD,sBAAkB,EAAE,GAHG;AAIvBC,iBAAa,EAAE,GAJQ;AAKvB6C,WAAO,EAAE,IALc;AAMvBlQ,cAAU,EAAE;AACVN,aAAO,EAAE;AACP3iC,YAAI,EAAE,QADC;AAEP8iC,kBAAU,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,MAAX,EAAmB,OAAnB,EAA4B,QAA5B;AAFL;AADC;AANW,GAAzBwP;AAaAA,eAAa,CAAC5vB,SAAd4vB,GAA0B;AACxBrtB,UAAM,EAAE;AACNqvB,aAAO,EAAE;AACPt0C,YAAI,EAAE,UADC;AAEPu0C,cAAM,EAAE,IAFD;AAGPC,YAAI,EAAE;AACJD,gBAAM,EAAE;AADJ;AAHC,OADH;AAQNE,aAAO,EAAE;AACPz0C,YAAI,EAAE,QADC;AAEPmuB,mBAAW,EAAE;AAFN;AARH;AADgB,GAA1BmkB;;AAgBA,QAAMoC,gBAAN,SAA+B7M,iBAA/B,CAAiD;AAC/Cc,cAAU,GAAG;AACX,WAAKJ,mBAAL,GAA2B,IAA3B;AACA,YAAMI,UAAN;AACD;;AACDsC,sBAAkB,CAACj9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AAC3C,YAAMqkB,MAAM,GAAG,MAAMwY,kBAAN,CAAyBj9B,IAAzB,EAA+BwY,IAA/B,EAAqC9c,KAArC,EAA4C0E,KAA5C,CAAf;;AACA,WAAK,IAAI1M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+wB,MAAM,CAAC5wB,MAA3B,EAAmCH,CAAC,EAApC,EAAwC;AACtC+wB,cAAM,CAAC/wB,CAAD,CAAN+wB,CAAUwe,OAAVxe,GAAoB,KAAKia,yBAAL,CAA+BhrC,CAAC,GAAGgI,KAAnC,EAA0Cgf,MAA9D+J;AACD;;AACD,aAAOA,MAAP;AACD;;AACDsY,kBAAc,CAAC/8B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACvC,YAAMqkB,MAAM,GAAG,MAAMsY,cAAN,CAAqB/8B,IAArB,EAA2BwY,IAA3B,EAAiC9c,KAAjC,EAAwC0E,KAAxC,CAAf;;AACA,WAAK,IAAI1M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+wB,MAAM,CAAC5wB,MAA3B,EAAmCH,CAAC,EAApC,EAAwC;AACtC,cAAMgE,IAAI,GAAG8gB,IAAI,CAAC9c,KAAK,GAAGhI,CAAT,CAAjB;AACA+wB,cAAM,CAAC/wB,CAAD,CAAN+wB,CAAUwe,OAAVxe,GAAoB7xB,cAAc,CAAC8E,IAAI,CAAC,CAAD,CAAL,EAAU,KAAKgnC,yBAAL,CAA+BhrC,CAAC,GAAGgI,KAAnC,EAA0Cgf,MAApD,CAAlC+J;AACD;;AACD,aAAOA,MAAP;AACD;;AACDuY,mBAAe,CAACh9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACxC,YAAMqkB,MAAM,GAAG,MAAMuY,eAAN,CAAsBh9B,IAAtB,EAA4BwY,IAA5B,EAAkC9c,KAAlC,EAAyC0E,KAAzC,CAAf;;AACA,WAAK,IAAI1M,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+wB,MAAM,CAAC5wB,MAA3B,EAAmCH,CAAC,EAApC,EAAwC;AACtC,cAAMgE,IAAI,GAAG8gB,IAAI,CAAC9c,KAAK,GAAGhI,CAAT,CAAjB;AACA+wB,cAAM,CAAC/wB,CAAD,CAAN+wB,CAAUwe,OAAVxe,GAAoB7xB,cAAc,CAAC8E,IAAI,IAAIA,IAAI,CAAC2N,CAAb3N,IAAkB,CAACA,IAAI,CAAC2N,CAAzB,EAA4B,KAAKq5B,yBAAL,CAA+BhrC,CAAC,GAAGgI,KAAnC,EAA0Cgf,MAAtE,CAAlC+J;AACD;;AACD,aAAOA,MAAP;AACD;;AACD0Z,kBAAc,GAAG;AACf,YAAM3lB,IAAI,GAAG,KAAK8f,WAAL,CAAiB9f,IAA9B;AACA,UAAIpe,GAAG,GAAG,CAAV;;AACA,WAAK,IAAI1G,CAAC,GAAG8kB,IAAI,CAAC3kB,MAAL2kB,GAAc,CAA3B,EAA8B9kB,CAAC,IAAI,CAAnC,EAAsC,EAAEA,CAAxC,EAA2C;AACzC0G,WAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASqC,GAATrC,EAAcygB,IAAI,CAAC9kB,CAAD,CAAJ8kB,CAAQ/gB,IAAR+gB,CAAa,KAAKkmB,yBAAL,CAA+BhrC,CAA/B,CAAb8kB,IAAkD,CAAhEzgB,CAANqC;AACD;;AACD,aAAOA,GAAG,GAAG,CAANA,IAAWA,GAAlB;AACD;;AACDgkC,oBAAgB,CAAC/pC,KAAD,EAAQ;AACtB,YAAM2L,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM;AAACx3B,cAAD;AAASC;AAAT,UAAmBf,IAAzB;AACA,YAAMykB,MAAM,GAAG,KAAK+Y,SAAL,CAAenpC,KAAf,CAAf;AACA,YAAM8B,CAAC,GAAG2K,MAAM,CAACw9B,gBAAPx9B,CAAwB2jB,MAAM,CAACtuB,CAA/B2K,CAAV;AACA,YAAMzK,CAAC,GAAG0K,MAAM,CAACu9B,gBAAPv9B,CAAwB0jB,MAAM,CAACpuB,CAA/B0K,CAAV;AACA,YAAMsE,CAAC,GAAGof,MAAM,CAACwe,OAAjB;AACA,aAAO;AACL5E,aAAK,EAAEr+B,IAAI,CAACq+B,KADP;AAELxsC,aAAK,EAAE,MAAMsE,CAAN,GAAU,IAAV,GAAiBE,CAAjB,IAAsBgP,CAAC,GAAG,OAAOA,CAAV,GAAc,EAArC,IAA2C;AAF7C,OAAP;AAID;;AACD8uB,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAMtW,MAAM,GAAG,KAAKq4B,WAAL,CAAiB9f,IAAhC;AACA,WAAKkoB,cAAL,CAAoBzgC,MAApB,EAA4B,CAA5B,EAA+BA,MAAM,CAACpM,MAAtC,EAA8C0iB,IAA9C;AACD;;AACDmqB,kBAAc,CAACzgC,MAAD,EAASvE,KAAT,EAAgB0E,KAAhB,EAAuBmW,IAAvB,EAA6B;AACzC,YAAMylB,KAAK,GAAGzlB,IAAI,KAAK,OAAvB;AACA,YAAM;AAACjW,cAAD;AAAS23B;AAAT,UAAmB,KAAKK,WAA9B;;AACA,YAAM;AAACiH,qBAAD;AAAgBD;AAAhB,UAAkC,KAAKG,iBAAL,CAAuB/jC,KAAvB,EAA8B6a,IAA9B,CAAxC;;AACA,YAAMiiB,KAAK,GAAGl4B,MAAM,CAACE,IAArB;AACA,YAAMi4B,KAAK,GAAGR,MAAM,CAACz3B,IAArB;;AACA,WAAK,IAAI9M,CAAC,GAAGgI,KAAb,EAAoBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAAhC,EAAuC1M,CAAC,EAAxC,EAA4C;AAC1C,cAAMgoB,KAAK,GAAGzb,MAAM,CAACvM,CAAD,CAApB;AACA,cAAM+wB,MAAM,GAAG,CAACuX,KAAD,IAAU,KAAKwB,SAAL,CAAe9pC,CAAf,CAAzB;AACA,cAAMohC,UAAU,GAAG,EAAnB;AACA,cAAMtO,MAAM,GAAGsO,UAAU,CAAC0D,KAAD,CAAV1D,GAAoBkH,KAAK,GAAG17B,MAAM,CAACwlC,kBAAPxlC,CAA0B,GAA1BA,CAAH,GAAoCA,MAAM,CAACM,gBAAPN,CAAwBmkB,MAAM,CAAC+T,KAAD,CAA9Bl4B,CAA5E;AACA,cAAMmmB,MAAM,GAAGqO,UAAU,CAAC2D,KAAD,CAAV3D,GAAoBkH,KAAK,GAAG/D,MAAM,CAACyM,YAAPzM,EAAH,GAA2BA,MAAM,CAACr3B,gBAAPq3B,CAAwBxT,MAAM,CAACgU,KAAD,CAA9BR,CAAnE;AACAnD,kBAAU,CAACjQ,IAAXiQ,GAAkBn7B,KAAK,CAAC6sB,MAAD,CAAL7sB,IAAiBA,KAAK,CAAC8sB,MAAD,CAAxCqO;;AACA,YAAIwK,cAAJ,EAAoB;AAClBxK,oBAAU,CAAC7/B,OAAX6/B,GAAqByK,aAAa,IAAI,KAAKb,yBAAL,CAA+BhrC,CAA/B,EAAkCgoB,KAAK,CAACwY,MAANxY,GAAe,QAAfA,GAA0BnF,IAA5D,CAAtCue;;AACA,cAAIkH,KAAJ,EAAW;AACTlH,sBAAU,CAAC7/B,OAAX6/B,CAAmBpa,MAAnBoa,GAA4B,CAA5BA;AACD;AACF;;AACD,aAAK+K,aAAL,CAAmBnkB,KAAnB,EAA0BhoB,CAA1B,EAA6BohC,UAA7B,EAAyCve,IAAzC;AACD;AACF;;AACDmoB,6BAAyB,CAACrqC,KAAD,EAAQkiB,IAAR,EAAc;AACrC,YAAMkO,MAAM,GAAG,KAAK+Y,SAAL,CAAenpC,KAAf,CAAf;AACA,UAAI0I,MAAM,GAAG,MAAM2hC,yBAAN,CAAgCrqC,KAAhC,EAAuCkiB,IAAvC,CAAb;;AACA,UAAIxZ,MAAM,CAACg5B,OAAX,EAAoB;AAClBh5B,cAAM,GAAG9K,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkB8K,MAAlB9K,EAA0B;AAAC8jC,iBAAO,EAAE;AAAV,SAA1B9jC,CAAT8K;AACD;;AACD,YAAM2d,MAAM,GAAG3d,MAAM,CAAC2d,MAAtB;;AACA,UAAInE,IAAI,KAAK,QAAb,EAAuB;AACrBxZ,cAAM,CAAC2d,MAAP3d,GAAgB,CAAhBA;AACD;;AACDA,YAAM,CAAC2d,MAAP3d,IAAiBnK,cAAc,CAAC6xB,MAAM,IAAIA,MAAM,CAACwe,OAAlB,EAA2BvoB,MAA3B,CAA/B3d;AACA,aAAOA,MAAP;AACD;;AAtF8C;;AAwFjD2pC,kBAAgB,CAAC/0C,EAAjB+0C,GAAsB,QAAtBA;AACAA,kBAAgB,CAACzuB,QAAjByuB,GAA4B;AAC1BtK,sBAAkB,EAAE,KADM;AAE1BwC,mBAAe,EAAE,OAFS;AAG1B3J,cAAU,EAAE;AACVN,aAAO,EAAE;AACP3iC,YAAI,EAAE,QADC;AAEP8iC,kBAAU,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,aAAX,EAA0B,QAA1B;AAFL;AADC;AAHc,GAA5B4R;AAUAA,kBAAgB,CAAChyB,SAAjBgyB,GAA6B;AAC3BzvB,UAAM,EAAE;AACN9gB,OAAC,EAAE;AACDnE,YAAI,EAAE;AADL,OADG;AAINqE,OAAC,EAAE;AACDrE,YAAI,EAAE;AADL;AAJG,KADmB;AAS3B8kB,WAAO,EAAE;AACP6vB,aAAO,EAAE;AACPtV,iBAAS,EAAE;AACTuV,eAAK,GAAG;AACN,mBAAO,EAAP;AACD;;AAHQ;AADJ;AADF;AATkB,GAA7BF;;AAoBA,WAASG,iBAAT,CAA2BpsB,QAA3B,EAAqCqsB,aAArC,EAAoDC,MAApD,EAA4D;AAC1D,QAAIC,MAAM,GAAG,CAAb;AACA,QAAIC,MAAM,GAAG,CAAb;AACA,QAAI/d,OAAO,GAAG,CAAd;AACA,QAAIC,OAAO,GAAG,CAAd;;AACA,QAAI2d,aAAa,GAAG9uC,GAApB,EAAyB;AACvB,YAAMkvC,UAAU,GAAGzsB,QAAnB;AACA,YAAM0sB,QAAQ,GAAGD,UAAU,GAAGJ,aAA9B;AACA,YAAMM,MAAM,GAAGrvC,IAAI,CAAC6K,GAAL7K,CAASmvC,UAATnvC,CAAf;AACA,YAAMsvC,MAAM,GAAGtvC,IAAI,CAAC4J,GAAL5J,CAASmvC,UAATnvC,CAAf;AACA,YAAMuvC,IAAI,GAAGvvC,IAAI,CAAC6K,GAAL7K,CAASovC,QAATpvC,CAAb;AACA,YAAMwvC,IAAI,GAAGxvC,IAAI,CAAC4J,GAAL5J,CAASovC,QAATpvC,CAAb;;AACA,YAAMyvC,OAAO,GAAG,CAACvsC,KAAD,EAAQ1D,CAAR,EAAWC,CAAX,KAAiBiE,aAAa,CAACR,KAAD,EAAQisC,UAAR,EAAoBC,QAApB,EAA8B,IAA9B,CAAb1rC,GAAmD,CAAnDA,GAAuD1D,IAAI,CAACqC,GAALrC,CAASR,CAATQ,EAAYR,CAAC,GAAGwvC,MAAhBhvC,EAAwBP,CAAxBO,EAA2BP,CAAC,GAAGuvC,MAA/BhvC,CAAxF;;AACA,YAAM0vC,OAAO,GAAG,CAACxsC,KAAD,EAAQ1D,CAAR,EAAWC,CAAX,KAAiBiE,aAAa,CAACR,KAAD,EAAQisC,UAAR,EAAoBC,QAApB,EAA8B,IAA9B,CAAb1rC,GAAmD,CAAC,CAApDA,GAAwD1D,IAAI,CAACoC,GAALpC,CAASR,CAATQ,EAAYR,CAAC,GAAGwvC,MAAhBhvC,EAAwBP,CAAxBO,EAA2BP,CAAC,GAAGuvC,MAA/BhvC,CAAzF;;AACA,YAAM2vC,IAAI,GAAGF,OAAO,CAAC,CAAD,EAAIJ,MAAJ,EAAYE,IAAZ,CAApB;AACA,YAAMK,IAAI,GAAGH,OAAO,CAACnvC,OAAD,EAAUgvC,MAAV,EAAkBE,IAAlB,CAApB;AACA,YAAMK,IAAI,GAAGH,OAAO,CAAC3vC,EAAD,EAAKsvC,MAAL,EAAaE,IAAb,CAApB;AACA,YAAMO,IAAI,GAAGJ,OAAO,CAAC3vC,EAAE,GAAGO,OAAN,EAAegvC,MAAf,EAAuBE,IAAvB,CAApB;AACAP,YAAM,GAAG,CAACU,IAAI,GAAGE,IAAR,IAAgB,CAAzBZ;AACAC,YAAM,GAAG,CAACU,IAAI,GAAGE,IAAR,IAAgB,CAAzBZ;AACA/d,aAAO,GAAG,EAAEwe,IAAI,GAAGE,IAAT,IAAiB,CAA3B1e;AACAC,aAAO,GAAG,EAAEwe,IAAI,GAAGE,IAAT,IAAiB,CAA3B1e;AACD;;AACD,WAAO;AAAC6d,YAAD;AAASC,YAAT;AAAiB/d,aAAjB;AAA0BC;AAA1B,KAAP;AACD;;AACD,QAAM2e,kBAAN,SAAiCjO,iBAAjC,CAAmD;AACjD1mB,eAAW,CAACoC,KAAD,EAAQnhB,YAAR,EAAsB;AAC/B,YAAMmhB,KAAN,EAAanhB,YAAb;AACA,WAAKmmC,mBAAL,GAA2B,IAA3B;AACA,WAAKwN,WAAL,GAAmBjyC,SAAnB;AACA,WAAKkyC,WAAL,GAAmBlyC,SAAnB;AACA,WAAKozB,OAAL,GAAepzB,SAAf;AACA,WAAKqzB,OAAL,GAAerzB,SAAf;AACD;;AACD8kC,cAAU,GAAG,CAAE;;AACflW,SAAK,CAAChpB,KAAD,EAAQ0E,KAAR,EAAe;AAClB,YAAMoY,IAAI,GAAG,KAAKuiB,UAAL,GAAkBviB,IAA/B;AACA,YAAMxY,IAAI,GAAG,KAAKs4B,WAAlB;;AACA,UAAI,KAAK9T,QAAL,KAAkB,KAAtB,EAA6B;AAC3BxkB,YAAI,CAACO,OAALP,GAAewY,IAAfxY;AADF,aAEO;AACL,YAAIioC,MAAM,GAAIv0C,CAAD,IAAO,CAAC8kB,IAAI,CAAC9kB,CAAD,CAAzB;;AACA,YAAIpB,QAAQ,CAACkmB,IAAI,CAAC9c,KAAD,CAAL,CAAZ,EAA2B;AACzB,gBAAM;AAAC5G,eAAG,GAAG;AAAP,cAAkB,KAAK0vB,QAA7B;;AACAyjB,gBAAM,GAAIv0C,CAAD,IAAO,CAAC4C,gBAAgB,CAACkiB,IAAI,CAAC9kB,CAAD,CAAL,EAAUoB,GAAV,CAAjCmzC;AACD;;AACD,YAAIv0C,CAAJ,EAAOO,IAAP;;AACA,aAAKP,CAAC,GAAGgI,KAAJhI,EAAWO,IAAI,GAAGyH,KAAK,GAAG0E,KAA/B,EAAsC1M,CAAC,GAAGO,IAA1C,EAAgD,EAAEP,CAAlD,EAAqD;AACnDsM,cAAI,CAACO,OAALP,CAAatM,CAAbsM,IAAkBioC,MAAM,CAACv0C,CAAD,CAAxBsM;AACD;AACF;AACF;;AACDkoC,gBAAY,GAAG;AACb,aAAO7tC,SAAS,CAAC,KAAKpF,OAAL,CAAawlB,QAAb,GAAwB,EAAzB,CAAhB;AACD;;AACD0tB,qBAAiB,GAAG;AAClB,aAAO9tC,SAAS,CAAC,KAAKpF,OAAL,CAAa6xC,aAAd,CAAhB;AACD;;AACDsB,uBAAmB,GAAG;AACpB,UAAIjuC,GAAG,GAAGnC,GAAV;AACA,UAAIoC,GAAG,GAAG,CAACpC,GAAX;;AACA,WAAK,IAAItE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK6hB,KAAL,CAAWiD,IAAX,CAAgBpD,QAAhB,CAAyBvhB,MAA7C,EAAqD,EAAEH,CAAvD,EAA0D;AACxD,YAAI,KAAK6hB,KAAL,CAAW8yB,gBAAX,CAA4B30C,CAA5B,CAAJ,EAAoC;AAClC,gBAAM2kC,UAAU,GAAG,KAAK9iB,KAAL,CAAWsmB,cAAX,CAA0BnoC,CAA1B,EAA6B2kC,UAAhD;;AACA,gBAAM5d,QAAQ,GAAG4d,UAAU,CAAC6P,YAAX7P,EAAjB;;AACA,gBAAMyO,aAAa,GAAGzO,UAAU,CAAC8P,iBAAX9P,EAAtB;;AACAl+B,aAAG,GAAGpC,IAAI,CAACoC,GAALpC,CAASoC,GAATpC,EAAc0iB,QAAd1iB,CAANoC;AACAC,aAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASqC,GAATrC,EAAc0iB,QAAQ,GAAGqsB,aAAzB/uC,CAANqC;AACD;AACF;;AACD,aAAO;AACLqgB,gBAAQ,EAAEtgB,GADL;AAEL2sC,qBAAa,EAAE1sC,GAAG,GAAGD;AAFhB,OAAP;AAID;;AACDg6B,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAMhB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM;AAACipB;AAAD,UAAcjpB,KAApB;AACA,YAAMvV,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMgQ,IAAI,GAAGtoC,IAAI,CAACwY,IAAlB;AACA,YAAM+vB,OAAO,GAAG,KAAKC,iBAAL,KAA2B,KAAKC,YAAL,CAAkBH,IAAlB,CAA3B,GAAqD,KAAKrzC,OAAL,CAAaszC,OAAlF;AACA,YAAMG,OAAO,GAAG3wC,IAAI,CAACqC,GAALrC,CAAS,CAACA,IAAI,CAACoC,GAALpC,CAASymC,SAAS,CAAC1lB,KAAnB/gB,EAA0BymC,SAAS,CAACtkB,MAApCniB,IAA8CwwC,OAA/C,IAA0D,CAAnExwC,EAAsE,CAAtEA,CAAhB;AACA,YAAMgvC,MAAM,GAAGhvC,IAAI,CAACoC,GAALpC,CAASlF,YAAY,CAAC,KAAKoC,OAAL,CAAa8xC,MAAd,EAAsB2B,OAAtB,CAArB3wC,EAAqD,CAArDA,CAAf;;AACA,YAAM4wC,WAAW,GAAG,KAAKC,cAAL,CAAoB,KAAKv0C,KAAzB,CAApB;;AACA,YAAM;AAACyyC,qBAAD;AAAgBrsB;AAAhB,UAA4B,KAAK2tB,mBAAL,EAAlC;;AACA,YAAM;AAACpB,cAAD;AAASC,cAAT;AAAiB/d,eAAjB;AAA0BC;AAA1B,UAAqC0d,iBAAiB,CAACpsB,QAAD,EAAWqsB,aAAX,EAA0BC,MAA1B,CAA5D;AACA,YAAMzpB,QAAQ,GAAG,CAACkhB,SAAS,CAAC1lB,KAAV0lB,GAAkB+J,OAAnB,IAA8BvB,MAA/C;AACA,YAAMjd,SAAS,GAAG,CAACyU,SAAS,CAACtkB,MAAVskB,GAAmB+J,OAApB,IAA+BtB,MAAjD;AACA,YAAM4B,SAAS,GAAG9wC,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAACoC,GAALpC,CAASulB,QAATvlB,EAAmBgyB,SAAnBhyB,IAAgC,CAAzCA,EAA4C,CAA5CA,CAAlB;AACA,YAAMiwC,WAAW,GAAG/0C,WAAW,CAAC,KAAKgC,OAAL,CAAaylB,MAAd,EAAsBmuB,SAAtB,CAA/B;AACA,YAAMd,WAAW,GAAGhwC,IAAI,CAACqC,GAALrC,CAASiwC,WAAW,GAAGjB,MAAvBhvC,EAA+B,CAA/BA,CAApB;;AACA,YAAM+wC,YAAY,GAAG,CAACd,WAAW,GAAGD,WAAf,IAA8B,KAAKgB,6BAAL,EAAnD;;AACA,WAAK7f,OAAL,GAAeA,OAAO,GAAG8e,WAAzB;AACA,WAAK7e,OAAL,GAAeA,OAAO,GAAG6e,WAAzB;AACAhoC,UAAI,CAACgpC,KAALhpC,GAAa,KAAKipC,cAAL,EAAbjpC;AACA,WAAKgoC,WAAL,GAAmBA,WAAW,GAAGc,YAAY,GAAG,KAAKI,oBAAL,CAA0B,KAAK70C,KAA/B,CAAhD;AACA,WAAK0zC,WAAL,GAAmBhwC,IAAI,CAACqC,GAALrC,CAAS,KAAKiwC,WAAL,GAAmBc,YAAY,GAAGH,WAA3C5wC,EAAwD,CAAxDA,CAAnB;AACA,WAAK2oC,cAAL,CAAoB4H,IAApB,EAA0B,CAA1B,EAA6BA,IAAI,CAACz0C,MAAlC,EAA0C0iB,IAA1C;AACD;;AACD4yB,kBAAc,CAACz1C,CAAD,EAAIsoC,KAAJ,EAAW;AACvB,YAAMnf,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM+K,IAAI,GAAG,KAAKs4B,WAAlB;;AACA,YAAMwO,aAAa,GAAG,KAAKqB,iBAAL,EAAtB;;AACA,UAAKnM,KAAK,IAAInf,IAAI,CAAC5H,SAAL4H,CAAeusB,aAAxBpN,IAA0C,CAAC,KAAKzmB,KAAL,CAAWqwB,iBAAX,CAA6BlyC,CAA7B,CAA3CsoC,IAA8Eh8B,IAAI,CAACO,OAALP,CAAatM,CAAbsM,MAAoB,IAAlGg8B,IAA0Gh8B,IAAI,CAACwY,IAALxY,CAAUtM,CAAVsM,EAAa25B,MAA5H,EAAoI;AAClI,eAAO,CAAP;AACD;;AACD,aAAO,KAAK0P,sBAAL,CAA4BrpC,IAAI,CAACO,OAALP,CAAatM,CAAbsM,IAAkB8mC,aAAlB9mC,GAAkChI,GAA9D,CAAP;AACD;;AACD0oC,kBAAc,CAAC4H,IAAD,EAAO5sC,KAAP,EAAc0E,KAAd,EAAqBmW,IAArB,EAA2B;AACvC,YAAMylB,KAAK,GAAGzlB,IAAI,KAAK,OAAvB;AACA,YAAMhB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMipB,SAAS,GAAGjpB,KAAK,CAACipB,SAAxB;AACA,YAAM3hB,IAAI,GAAGtH,KAAK,CAACtgB,OAAnB;AACA,YAAMq0C,aAAa,GAAGzsB,IAAI,CAAC5H,SAA3B;AACA,YAAMs0B,OAAO,GAAG,CAAC/K,SAAS,CAAC7+B,IAAV6+B,GAAiBA,SAAS,CAAC5+B,KAA5B,IAAqC,CAArD;AACA,YAAM4pC,OAAO,GAAG,CAAChL,SAAS,CAAC3iB,GAAV2iB,GAAgBA,SAAS,CAAC1iB,MAA3B,IAAqC,CAArD;AACA,YAAM2tB,YAAY,GAAGzN,KAAK,IAAIsN,aAAa,CAACG,YAA5C;AACA,YAAM1B,WAAW,GAAG0B,YAAY,GAAG,CAAH,GAAO,KAAK1B,WAA5C;AACA,YAAMC,WAAW,GAAGyB,YAAY,GAAG,CAAH,GAAO,KAAKzB,WAA5C;;AACA,YAAM;AAACzI,qBAAD;AAAgBD;AAAhB,UAAkC,KAAKG,iBAAL,CAAuB/jC,KAAvB,EAA8B6a,IAA9B,CAAxC;;AACA,UAAI2wB,UAAU,GAAG,KAAKgB,YAAL,EAAjB;;AACA,UAAIx0C,CAAJ;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgI,KAAhB,EAAuB,EAAEhI,CAAzB,EAA4B;AAC1BwzC,kBAAU,IAAI,KAAKiC,cAAL,CAAoBz1C,CAApB,EAAuBsoC,KAAvB,CAAdkL;AACD;;AACD,WAAKxzC,CAAC,GAAGgI,KAAT,EAAgBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAA5B,EAAmC,EAAE1M,CAArC,EAAwC;AACtC,cAAMozC,aAAa,GAAG,KAAKqC,cAAL,CAAoBz1C,CAApB,EAAuBsoC,KAAvB,CAAtB;;AACA,cAAMhhB,GAAG,GAAGstB,IAAI,CAAC50C,CAAD,CAAhB;AACA,cAAMohC,UAAU,GAAG;AACjB3+B,WAAC,EAAEozC,OAAO,GAAG,KAAKrgB,OADD;AAEjB7yB,WAAC,EAAEmzC,OAAO,GAAG,KAAKrgB,OAFD;AAGjB+d,oBAHiB;AAIjBC,kBAAQ,EAAED,UAAU,GAAGJ,aAJN;AAKjBA,uBALiB;AAMjBkB,qBANiB;AAOjBD;AAPiB,SAAnB;;AASA,YAAIzI,cAAJ,EAAoB;AAClBxK,oBAAU,CAAC7/B,OAAX6/B,GAAqByK,aAAa,IAAI,KAAKb,yBAAL,CAA+BhrC,CAA/B,EAAkCsnB,GAAG,CAACkZ,MAAJlZ,GAAa,QAAbA,GAAwBzE,IAA1D,CAAtCue;AACD;;AACDoS,kBAAU,IAAIJ,aAAdI;AACA,aAAKrH,aAAL,CAAmB7kB,GAAnB,EAAwBtnB,CAAxB,EAA2BohC,UAA3B,EAAuCve,IAAvC;AACD;AACF;;AACD0yB,kBAAc,GAAG;AACf,YAAMjpC,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMoR,QAAQ,GAAG1pC,IAAI,CAACwY,IAAtB;AACA,UAAIwwB,KAAK,GAAG,CAAZ;AACA,UAAIt1C,CAAJ;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGg2C,QAAQ,CAAC71C,MAAzB,EAAiCH,CAAC,EAAlC,EAAsC;AACpC,cAAM7B,KAAK,GAAGmO,IAAI,CAACO,OAALP,CAAatM,CAAbsM,CAAd;;AACA,YAAInO,KAAK,KAAK,IAAVA,IAAkB,CAAC8H,KAAK,CAAC9H,KAAD,CAAxBA,IAAmC,KAAK0jB,KAAL,CAAWqwB,iBAAX,CAA6BlyC,CAA7B,CAAnC7B,IAAsE,CAAC63C,QAAQ,CAACh2C,CAAD,CAARg2C,CAAY/P,MAAvF,EAA+F;AAC7FqP,eAAK,IAAIjxC,IAAI,CAAC8B,GAAL9B,CAASlG,KAATkG,CAATixC;AACD;AACF;;AACD,aAAOA,KAAP;AACD;;AACDK,0BAAsB,CAACx3C,KAAD,EAAQ;AAC5B,YAAMm3C,KAAK,GAAG,KAAK1Q,WAAL,CAAiB0Q,KAA/B;;AACA,UAAIA,KAAK,GAAG,CAARA,IAAa,CAACrvC,KAAK,CAAC9H,KAAD,CAAvB,EAAgC;AAC9B,eAAOmG,GAAG,IAAID,IAAI,CAAC8B,GAAL9B,CAASlG,KAATkG,IAAkBixC,KAAtB,CAAV;AACD;;AACD,aAAO,CAAP;AACD;;AACD5K,oBAAgB,CAAC/pC,KAAD,EAAQ;AACtB,YAAM2L,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM/iB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM4nB,MAAM,GAAG5nB,KAAK,CAACiD,IAANjD,CAAW4nB,MAAX5nB,IAAqB,EAApC;AACA,YAAM1jB,KAAK,GAAG46B,YAAY,CAACzsB,IAAI,CAACO,OAALP,CAAa3L,KAAb2L,CAAD,EAAsBuV,KAAK,CAACtgB,OAANsgB,CAAc2W,MAApC,CAA1B;AACA,aAAO;AACLmS,aAAK,EAAElB,MAAM,CAAC9oC,KAAD,CAAN8oC,IAAiB,EADnB;AAELtrC;AAFK,OAAP;AAID;;AACD22C,qBAAiB,CAACF,IAAD,EAAO;AACtB,UAAIluC,GAAG,GAAG,CAAV;AACA,YAAMmb,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAI7hB,CAAJ,EAAOO,IAAP,EAAa+L,IAAb,EAAmBq4B,UAAnB,EAA+BpjC,OAA/B;;AACA,UAAI,CAACqzC,IAAL,EAAW;AACT,aAAK50C,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGshB,KAAK,CAACiD,IAANjD,CAAWH,QAAXG,CAAoB1hB,MAAvC,EAA+CH,CAAC,GAAGO,IAAnD,EAAyD,EAAEP,CAA3D,EAA8D;AAC5D,cAAI6hB,KAAK,CAAC8yB,gBAAN9yB,CAAuB7hB,CAAvB6hB,CAAJ,EAA+B;AAC7BvV,gBAAI,GAAGuV,KAAK,CAACsmB,cAANtmB,CAAqB7hB,CAArB6hB,CAAPvV;AACAsoC,gBAAI,GAAGtoC,IAAI,CAACwY,IAAZ8vB;AACAjQ,sBAAU,GAAGr4B,IAAI,CAACq4B,UAAlBA;AACA;AACD;AACF;AACF;;AACD,UAAI,CAACiQ,IAAL,EAAW;AACT,eAAO,CAAP;AACD;;AACD,WAAK50C,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGq0C,IAAI,CAACz0C,MAAxB,EAAgCH,CAAC,GAAGO,IAApC,EAA0C,EAAEP,CAA5C,EAA+C;AAC7CuB,eAAO,GAAGojC,UAAU,CAACqG,yBAAXrG,CAAqC3kC,CAArC2kC,CAAVpjC;;AACA,YAAIA,OAAO,CAAC00C,WAAR10C,KAAwB,OAA5B,EAAqC;AACnCmF,aAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASqC,GAATrC,EAAc9C,OAAO,CAACsmB,WAARtmB,IAAuB,CAArC8C,EAAwC9C,OAAO,CAAC20C,gBAAR30C,IAA4B,CAApE8C,CAANqC;AACD;AACF;;AACD,aAAOA,GAAP;AACD;;AACDquC,gBAAY,CAACH,IAAD,EAAO;AACjB,UAAIluC,GAAG,GAAG,CAAV;;AACA,WAAK,IAAI1G,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAGq0C,IAAI,CAACz0C,MAA5B,EAAoCH,CAAC,GAAGO,IAAxC,EAA8C,EAAEP,CAAhD,EAAmD;AACjD,cAAMuB,OAAO,GAAG,KAAKypC,yBAAL,CAA+BhrC,CAA/B,CAAhB;AACA0G,WAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASqC,GAATrC,EAAc9C,OAAO,CAACsxC,MAARtxC,IAAkB,CAAhC8C,EAAmC9C,OAAO,CAAC40C,WAAR50C,IAAuB,CAA1D8C,CAANqC;AACD;;AACD,aAAOA,GAAP;AACD;;AACD8uC,wBAAoB,CAAC90C,YAAD,EAAe;AACjC,UAAI01C,gBAAgB,GAAG,CAAvB;;AACA,WAAK,IAAIp2C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGU,YAApB,EAAkC,EAAEV,CAApC,EAAuC;AACrC,YAAI,KAAK6hB,KAAL,CAAW8yB,gBAAX,CAA4B30C,CAA5B,CAAJ,EAAoC;AAClCo2C,0BAAgB,IAAI,KAAKlB,cAAL,CAAoBl1C,CAApB,CAApBo2C;AACD;AACF;;AACD,aAAOA,gBAAP;AACD;;AACDlB,kBAAc,CAACx0C,YAAD,EAAe;AAC3B,aAAO2D,IAAI,CAACqC,GAALrC,CAASnF,cAAc,CAAC,KAAK2iB,KAAL,CAAWiD,IAAX,CAAgBpD,QAAhB,CAAyBhhB,YAAzB,EAAuCqf,MAAxC,EAAgD,CAAhD,CAAvB1b,EAA2E,CAA3EA,CAAP;AACD;;AACDgxC,iCAA6B,GAAG;AAC9B,aAAO,KAAKG,oBAAL,CAA0B,KAAK3zB,KAAL,CAAWiD,IAAX,CAAgBpD,QAAhB,CAAyBvhB,MAAnD,KAA8D,CAArE;AACD;;AApMgD;;AAsMnDi0C,oBAAkB,CAACn2C,EAAnBm2C,GAAwB,UAAxBA;AACAA,oBAAkB,CAAC7vB,QAAnB6vB,GAA8B;AAC5B1L,sBAAkB,EAAE,KADQ;AAE5BwC,mBAAe,EAAE,KAFW;AAG5B3pB,aAAS,EAAE;AACTm0B,mBAAa,EAAE,IADN;AAETK,kBAAY,EAAE;AAFL,KAHiB;AAO5BxU,cAAU,EAAE;AACVN,aAAO,EAAE;AACP3iC,YAAI,EAAE,QADC;AAEP8iC,kBAAU,EAAE,CAAC,eAAD,EAAkB,UAAlB,EAA8B,aAA9B,EAA6C,aAA7C,EAA4D,YAA5D,EAA0E,GAA1E,EAA+E,GAA/E,EAAoF,QAApF,EAA8F,aAA9F,EAA6G,SAA7G;AAFL;AADC,KAPgB;AAa5BiS,UAAM,EAAE,KAboB;AAc5BtsB,YAAQ,EAAE,CAdkB;AAe5BqsB,iBAAa,EAAE,GAfa;AAgB5BpsB,UAAM,EAAE,MAhBoB;AAiB5B6tB,WAAO,EAAE,CAjBmB;AAkB5BlyB,aAAS,EAAE;AAlBiB,GAA9ByxB;AAoBAA,oBAAkB,CAACnzB,WAAnBmzB,GAAiC;AAC/B5vB,eAAW,EAAGV,IAAD,IAAUA,IAAI,KAAK,SADD;AAE/BY,cAAU,EAAGZ,IAAD,IAAUA,IAAI,KAAK;AAFA,GAAjCswB;AAIAA,oBAAkB,CAACpzB,SAAnBozB,GAA+B;AAC7Bpd,eAAW,EAAE,CADgB;AAE7B5T,WAAO,EAAE;AACPizB,YAAM,EAAE;AACN5M,cAAM,EAAE;AACN6M,wBAAc,CAACz0B,KAAD,EAAQ;AACpB,kBAAMiD,IAAI,GAAGjD,KAAK,CAACiD,IAAnB;;AACA,gBAAIA,IAAI,CAAC2kB,MAAL3kB,CAAY3kB,MAAZ2kB,IAAsBA,IAAI,CAACpD,QAALoD,CAAc3kB,MAAxC,EAAgD;AAC9C,oBAAM;AAACspC,sBAAM,EAAE;AAAC3iB;AAAD;AAAT,kBAAyBjF,KAAK,CAACw0B,MAANx0B,CAAatgB,OAA5C;AACA,qBAAOujB,IAAI,CAAC2kB,MAAL3kB,CAAYhkB,GAAZgkB,CAAgB,CAAC6lB,KAAD,EAAQ3qC,CAAR,KAAc;AACnC,sBAAMsM,IAAI,GAAGuV,KAAK,CAACsmB,cAANtmB,CAAqB,CAArBA,CAAb;AACA,sBAAMO,KAAK,GAAG9V,IAAI,CAACq4B,UAALr4B,CAAgBqoB,QAAhBroB,CAAyBtM,CAAzBsM,CAAd;AACA,uBAAO;AACL4c,sBAAI,EAAEyhB,KADD;AAEL3gB,2BAAS,EAAE5H,KAAK,CAACZ,eAFZ;AAGLiI,6BAAW,EAAErH,KAAK,CAACX,WAHd;AAILiI,2BAAS,EAAEtH,KAAK,CAACyF,WAJZ;AAKLf,4BAAU,EAAEA,UALP;AAMLmf,wBAAM,EAAE,CAACpkB,KAAK,CAACqwB,iBAANrwB,CAAwB7hB,CAAxB6hB,CANJ;AAOLlhB,uBAAK,EAAEX;AAPF,iBAAP;AAHK,gBAAP;AAaD;;AACD,mBAAO,EAAP;AACD;;AApBK,SADF;;AAuBNkjB,eAAO,CAAC/e,CAAD,EAAIoyC,UAAJ,EAAgBF,MAAhB,EAAwB;AAC7BA,gBAAM,CAACx0B,KAAPw0B,CAAaG,oBAAbH,CAAkCE,UAAU,CAAC51C,KAA7C01C;AACAA,gBAAM,CAACx0B,KAAPw0B,CAAa5V,MAAb4V;AACD;;AA1BK,OADD;AA6BPpD,aAAO,EAAE;AACPtV,iBAAS,EAAE;AACTuV,eAAK,GAAG;AACN,mBAAO,EAAP;AAFO;;AAITvI,eAAK,CAAC8L,WAAD,EAAc;AACjB,gBAAIC,SAAS,GAAGD,WAAW,CAAC9L,KAA5B;AACA,kBAAMxsC,KAAK,GAAG,OAAOs4C,WAAW,CAACE,cAAjC;;AACA,gBAAIv4C,OAAO,CAACs4C,SAAD,CAAX,EAAwB;AACtBA,uBAAS,GAAGA,SAAS,CAAC/3C,KAAV+3C,EAAZA;AACAA,uBAAS,CAAC,CAAD,CAATA,IAAgBv4C,KAAhBu4C;AAFF,mBAGO;AACLA,uBAAS,IAAIv4C,KAAbu4C;AACD;;AACD,mBAAOA,SAAP;AACD;;AAdQ;AADJ;AA7BF;AAFoB,GAA/BtC;;AAoDA,QAAMwC,cAAN,SAA6BzQ,iBAA7B,CAA+C;AAC7Cc,cAAU,GAAG;AACX,WAAKJ,mBAAL,GAA2B,IAA3B;AACA,WAAKC,kBAAL,GAA0B,IAA1B;AACA,YAAMG,UAAN;AACD;;AACDxG,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAMvW,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM;AAACU,eAAO,EAAE/b,IAAV;AAAgBzE,YAAI,EAAEvY,MAAM,GAAG,EAA/B;AAAmCsqC;AAAnC,UAA+CvqC,IAArD;AACA,YAAME,kBAAkB,GAAG,KAAKqV,KAAL,CAAWiqB,mBAAtC;;AACA,UAAI;AAAC9jC,aAAD;AAAQ0E;AAAR,UAAiBL,gCAAgC,CAACC,IAAD,EAAOC,MAAP,EAAeC,kBAAf,CAArD;;AACA,WAAKm6B,UAAL,GAAkB3+B,KAAlB;AACA,WAAK4+B,UAAL,GAAkBl6B,KAAlB;;AACA,UAAIS,mBAAmB,CAACb,IAAD,CAAvB,EAA+B;AAC7BtE,aAAK,GAAG,CAARA;AACA0E,aAAK,GAAGH,MAAM,CAACpM,MAAfuM;AACD;;AACD6c,UAAI,CAAC4S,MAAL5S,GAAc,KAAK1H,KAAnB0H;AACAA,UAAI,CAAC+S,aAAL/S,GAAqB,KAAK5oB,KAA1B4oB;AACAA,UAAI,CAACutB,UAALvtB,GAAkB,CAAC,CAACstB,QAAQ,CAACC,UAA7BvtB;AACAA,UAAI,CAAChd,MAALgd,GAAchd,MAAdgd;AACA,YAAMhoB,OAAO,GAAG,KAAKwpC,4BAAL,CAAkCloB,IAAlC,CAAhB;;AACA,UAAI,CAAC,KAAKthB,OAAL,CAAaiiB,QAAlB,EAA4B;AAC1BjiB,eAAO,CAACsmB,WAARtmB,GAAsB,CAAtBA;AACD;;AACDA,aAAO,CAACi5B,OAARj5B,GAAkB,KAAKA,OAAL,CAAai5B,OAA/Bj5B;AACA,WAAK4qC,aAAL,CAAmB5iB,IAAnB,EAAyBnnB,SAAzB,EAAoC;AAClC20C,gBAAQ,EAAE,CAACvqC,kBADuB;AAElCjL;AAFkC,OAApC,EAGGshB,IAHH;AAIA,WAAKmqB,cAAL,CAAoBzgC,MAApB,EAA4BvE,KAA5B,EAAmC0E,KAAnC,EAA0CmW,IAA1C;AACD;;AACDmqB,kBAAc,CAACzgC,MAAD,EAASvE,KAAT,EAAgB0E,KAAhB,EAAuBmW,IAAvB,EAA6B;AACzC,YAAMylB,KAAK,GAAGzlB,IAAI,KAAK,OAAvB;AACA,YAAM;AAACjW,cAAD;AAAS23B,cAAT;AAAiB2B,gBAAjB;AAA2B2Q;AAA3B,UAAuC,KAAKjS,WAAlD;;AACA,YAAM;AAACiH,qBAAD;AAAgBD;AAAhB,UAAkC,KAAKG,iBAAL,CAAuB/jC,KAAvB,EAA8B6a,IAA9B,CAAxC;;AACA,YAAMiiB,KAAK,GAAGl4B,MAAM,CAACE,IAArB;AACA,YAAMi4B,KAAK,GAAGR,MAAM,CAACz3B,IAArB;AACA,YAAM;AAAC6mB,gBAAD;AAAW6G;AAAX,UAAsB,KAAKj5B,OAAjC;AACA,YAAMy1C,YAAY,GAAGjxC,QAAQ,CAAC4tB,QAAD,CAAR5tB,GAAqB4tB,QAArB5tB,GAAgCjH,MAAM,CAAC2F,iBAA5D;AACA,YAAMwyC,YAAY,GAAG,KAAKp1B,KAAL,CAAWiqB,mBAAX,IAAkCxD,KAAlC,IAA2CzlB,IAAI,KAAK,MAAzE;AACA,UAAIq0B,UAAU,GAAGlvC,KAAK,GAAG,CAARA,IAAa,KAAK8hC,SAAL,CAAe9hC,KAAK,GAAG,CAAvB,CAA9B;;AACA,WAAK,IAAIhI,CAAC,GAAGgI,KAAb,EAAoBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAAhC,EAAuC,EAAE1M,CAAzC,EAA4C;AAC1C,cAAMgoB,KAAK,GAAGzb,MAAM,CAACvM,CAAD,CAApB;AACA,cAAM+wB,MAAM,GAAG,KAAK+Y,SAAL,CAAe9pC,CAAf,CAAf;AACA,cAAMohC,UAAU,GAAG6V,YAAY,GAAGjvB,KAAH,GAAW,EAA1C;AACA,cAAMmvB,QAAQ,GAAGj5C,aAAa,CAAC6yB,MAAM,CAACgU,KAAD,CAAP,CAA9B;AACA,cAAMjS,MAAM,GAAGsO,UAAU,CAAC0D,KAAD,CAAV1D,GAAoBx0B,MAAM,CAACM,gBAAPN,CAAwBmkB,MAAM,CAAC+T,KAAD,CAA9Bl4B,EAAuC5M,CAAvC4M,CAAnC;AACA,cAAMmmB,MAAM,GAAGqO,UAAU,CAAC2D,KAAD,CAAV3D,GAAoBkH,KAAK,IAAI6O,QAAT7O,GAAoB/D,MAAM,CAACyM,YAAPzM,EAApB+D,GAA4C/D,MAAM,CAACr3B,gBAAPq3B,CAAwB2B,QAAQ,GAAG,KAAK9C,UAAL,CAAgBmB,MAAhB,EAAwBxT,MAAxB,EAAgCmV,QAAhC,CAAH,GAA+CnV,MAAM,CAACgU,KAAD,CAArFR,EAA8FvkC,CAA9FukC,CAA/E;AACAnD,kBAAU,CAACjQ,IAAXiQ,GAAkBn7B,KAAK,CAAC6sB,MAAD,CAAL7sB,IAAiBA,KAAK,CAAC8sB,MAAD,CAAtB9sB,IAAkCkxC,QAApD/V;AACAA,kBAAU,CAAC1F,IAAX0F,GAAkBphC,CAAC,GAAG,CAAJA,IAAUqE,IAAI,CAAC8B,GAAL9B,CAAS0sB,MAAM,CAAC+T,KAAD,CAAN/T,GAAgBmmB,UAAU,CAACpS,KAAD,CAAnCzgC,IAA+C2yC,YAA3E5V;;AACA,YAAI5G,OAAJ,EAAa;AACX4G,oBAAU,CAACrQ,MAAXqQ,GAAoBrQ,MAApBqQ;AACAA,oBAAU,CAACqE,GAAXrE,GAAiByV,QAAQ,CAAC/xB,IAAT+xB,CAAc72C,CAAd62C,CAAjBzV;AACD;;AACD,YAAIwK,cAAJ,EAAoB;AAClBxK,oBAAU,CAAC7/B,OAAX6/B,GAAqByK,aAAa,IAAI,KAAKb,yBAAL,CAA+BhrC,CAA/B,EAAkCgoB,KAAK,CAACwY,MAANxY,GAAe,QAAfA,GAA0BnF,IAA5D,CAAtCue;AACD;;AACD,YAAI,CAAC6V,YAAL,EAAmB;AACjB,eAAK9K,aAAL,CAAmBnkB,KAAnB,EAA0BhoB,CAA1B,EAA6BohC,UAA7B,EAAyCve,IAAzC;AACD;;AACDq0B,kBAAU,GAAGnmB,MAAbmmB;AACD;AACF;;AACDzM,kBAAc,GAAG;AACf,YAAMn+B,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMU,OAAO,GAAGh5B,IAAI,CAACg5B,OAArB;AACA,YAAM8R,MAAM,GAAG9R,OAAO,CAAC/jC,OAAR+jC,IAAmBA,OAAO,CAAC/jC,OAAR+jC,CAAgBzd,WAAnCyd,IAAkD,CAAjE;AACA,YAAMxgB,IAAI,GAAGxY,IAAI,CAACwY,IAALxY,IAAa,EAA1B;;AACA,UAAI,CAACwY,IAAI,CAAC3kB,MAAV,EAAkB;AAChB,eAAOi3C,MAAP;AACD;;AACD,YAAM9lB,UAAU,GAAGxM,IAAI,CAAC,CAAD,CAAJA,CAAQ/gB,IAAR+gB,CAAa,KAAKkmB,yBAAL,CAA+B,CAA/B,CAAblmB,CAAnB;AACA,YAAMuyB,SAAS,GAAGvyB,IAAI,CAACA,IAAI,CAAC3kB,MAAL2kB,GAAc,CAAf,CAAJA,CAAsB/gB,IAAtB+gB,CAA2B,KAAKkmB,yBAAL,CAA+BlmB,IAAI,CAAC3kB,MAAL2kB,GAAc,CAA7C,CAA3BA,CAAlB;AACA,aAAOzgB,IAAI,CAACqC,GAALrC,CAAS+yC,MAAT/yC,EAAiBitB,UAAjBjtB,EAA6BgzC,SAA7BhzC,IAA0C,CAAjD;AACD;;AACDi6B,QAAI,GAAG;AACL,YAAMhyB,IAAI,GAAG,KAAKs4B,WAAlB;AACAt4B,UAAI,CAACg5B,OAALh5B,CAAagrC,mBAAbhrC,CAAiC,KAAKuV,KAAL,CAAWipB,SAA5Cx+B,EAAuDA,IAAI,CAACM,MAALN,CAAYQ,IAAnER;AACA,YAAMgyB,IAAN;AACD;;AAhF4C;;AAkF/CsY,gBAAc,CAAC34C,EAAf24C,GAAoB,MAApBA;AACAA,gBAAc,CAACryB,QAAfqyB,GAA0B;AACxBlO,sBAAkB,EAAE,MADI;AAExBwC,mBAAe,EAAE,OAFO;AAGxB1nB,YAAQ,EAAE,IAHc;AAIxBmQ,YAAQ,EAAE;AAJc,GAA1BijB;AAMAA,gBAAc,CAAC51B,SAAf41B,GAA2B;AACzBrzB,UAAM,EAAE;AACNqvB,aAAO,EAAE;AACPt0C,YAAI,EAAE;AADC,OADH;AAINy0C,aAAO,EAAE;AACPz0C,YAAI,EAAE;AADC;AAJH;AADiB,GAA3Bs4C;;AAWA,QAAMW,mBAAN,SAAkCpR,iBAAlC,CAAoD;AAClD1mB,eAAW,CAACoC,KAAD,EAAQnhB,YAAR,EAAsB;AAC/B,YAAMmhB,KAAN,EAAanhB,YAAb;AACA,WAAK2zC,WAAL,GAAmBjyC,SAAnB;AACA,WAAKkyC,WAAL,GAAmBlyC,SAAnB;AACD;;AACDsoC,oBAAgB,CAAC/pC,KAAD,EAAQ;AACtB,YAAM2L,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM/iB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM4nB,MAAM,GAAG5nB,KAAK,CAACiD,IAANjD,CAAW4nB,MAAX5nB,IAAqB,EAApC;AACA,YAAM1jB,KAAK,GAAG46B,YAAY,CAACzsB,IAAI,CAACO,OAALP,CAAa3L,KAAb2L,EAAoBqF,CAArB,EAAwBkQ,KAAK,CAACtgB,OAANsgB,CAAc2W,MAAtC,CAA1B;AACA,aAAO;AACLmS,aAAK,EAAElB,MAAM,CAAC9oC,KAAD,CAAN8oC,IAAiB,EADnB;AAELtrC;AAFK,OAAP;AAID;;AACDmrC,mBAAe,CAACh9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACxC,aAAOmkB,2BAA2B,CAAC2mB,IAA5B3mB,CAAiC,IAAjCA,EAAuCvkB,IAAvCukB,EAA6C/L,IAA7C+L,EAAmD7oB,KAAnD6oB,EAA0DnkB,KAA1DmkB,CAAP;AACD;;AACD4P,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAM+xB,IAAI,GAAG,KAAKhQ,WAAL,CAAiB9f,IAA9B;;AACA,WAAK2yB,aAAL;;AACA,WAAKzK,cAAL,CAAoB4H,IAApB,EAA0B,CAA1B,EAA6BA,IAAI,CAACz0C,MAAlC,EAA0C0iB,IAA1C;AACD;;AACDsnB,aAAS,GAAG;AACV,YAAM79B,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM3/B,KAAK,GAAG;AAACwB,WAAG,EAAE3H,MAAM,CAAC2F,iBAAb;AAAgCiC,WAAG,EAAE5H,MAAM,CAACklC;AAA5C,OAAd;AACA13B,UAAI,CAACwY,IAALxY,CAAUxC,OAAVwC,CAAkB,CAACooB,OAAD,EAAU/zB,KAAV,KAAoB;AACpC,cAAMowB,MAAM,GAAG,KAAK+Y,SAAL,CAAenpC,KAAf,EAAsBgR,CAArC;;AACA,YAAI,CAAC1L,KAAK,CAAC8qB,MAAD,CAAN,IAAkB,KAAKlP,KAAL,CAAWqwB,iBAAX,CAA6BvxC,KAA7B,CAAtB,EAA2D;AACzD,cAAIowB,MAAM,GAAG9rB,KAAK,CAACwB,GAAnB,EAAwB;AACtBxB,iBAAK,CAACwB,GAANxB,GAAY8rB,MAAZ9rB;AACD;;AACD,cAAI8rB,MAAM,GAAG9rB,KAAK,CAACyB,GAAnB,EAAwB;AACtBzB,iBAAK,CAACyB,GAANzB,GAAY8rB,MAAZ9rB;AACD;AACF;AATH;AAWA,aAAOA,KAAP;AACD;;AACDwyC,iBAAa,GAAG;AACd,YAAM51B,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMipB,SAAS,GAAGjpB,KAAK,CAACipB,SAAxB;AACA,YAAM3hB,IAAI,GAAGtH,KAAK,CAACtgB,OAAnB;AACA,YAAMm2C,OAAO,GAAGrzC,IAAI,CAACoC,GAALpC,CAASymC,SAAS,CAAC5+B,KAAV4+B,GAAkBA,SAAS,CAAC7+B,IAArC5H,EAA2CymC,SAAS,CAAC1iB,MAAV0iB,GAAmBA,SAAS,CAAC3iB,GAAxE9jB,CAAhB;AACA,YAAMiwC,WAAW,GAAGjwC,IAAI,CAACqC,GAALrC,CAASqzC,OAAO,GAAG,CAAnBrzC,EAAsB,CAAtBA,CAApB;AACA,YAAMgwC,WAAW,GAAGhwC,IAAI,CAACqC,GAALrC,CAAS8kB,IAAI,CAACwuB,gBAALxuB,GAAyBmrB,WAAW,GAAG,GAAdA,GAAsBnrB,IAAI,CAACwuB,gBAApDxuB,GAAwE,CAAjF9kB,EAAoF,CAApFA,CAApB;AACA,YAAM+wC,YAAY,GAAG,CAACd,WAAW,GAAGD,WAAf,IAA8BxyB,KAAK,CAAC+1B,sBAAN/1B,EAAnD;AACA,WAAKyyB,WAAL,GAAmBA,WAAW,GAAIc,YAAY,GAAG,KAAKz0C,KAAtD;AACA,WAAK0zC,WAAL,GAAmB,KAAKC,WAAL,GAAmBc,YAAtC;AACD;;AACDpI,kBAAc,CAAC4H,IAAD,EAAO5sC,KAAP,EAAc0E,KAAd,EAAqBmW,IAArB,EAA2B;AACvC,YAAMylB,KAAK,GAAGzlB,IAAI,KAAK,OAAvB;AACA,YAAMhB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMsH,IAAI,GAAGtH,KAAK,CAACtgB,OAAnB;AACA,YAAMq0C,aAAa,GAAGzsB,IAAI,CAAC5H,SAA3B;AACA,YAAM+B,KAAK,GAAG,KAAKshB,WAAL,CAAiBsD,MAA/B;AACA,YAAM2N,OAAO,GAAGvyB,KAAK,CAACu0B,OAAtB;AACA,YAAM/B,OAAO,GAAGxyB,KAAK,CAACw0B,OAAtB;AACA,YAAMC,iBAAiB,GAAGz0B,KAAK,CAAC00B,aAAN10B,CAAoB,CAApBA,IAAyB,MAAMlf,EAAzD;AACA,UAAImD,KAAK,GAAGwwC,iBAAZ;AACA,UAAI/3C,CAAJ;AACA,YAAMi4C,YAAY,GAAG,MAAM,KAAKC,oBAAL,EAA3B;;AACA,WAAKl4C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgI,KAAhB,EAAuB,EAAEhI,CAAzB,EAA4B;AAC1BuH,aAAK,IAAI,KAAK4wC,aAAL,CAAmBn4C,CAAnB,EAAsB6iB,IAAtB,EAA4Bo1B,YAA5B,CAAT1wC;AACD;;AACD,WAAKvH,CAAC,GAAGgI,KAAT,EAAgBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAA5B,EAAmC1M,CAAC,EAApC,EAAwC;AACtC,cAAMsnB,GAAG,GAAGstB,IAAI,CAAC50C,CAAD,CAAhB;AACA,YAAIwzC,UAAU,GAAGjsC,KAAjB;;AACA,YAAIksC,QAAQ,GAAGlsC,KAAK,GAAG,KAAK4wC,aAAL,CAAmBn4C,CAAnB,EAAsB6iB,IAAtB,EAA4Bo1B,YAA5B,CAAvB;;AACA,YAAI3D,WAAW,GAAGzyB,KAAK,CAACqwB,iBAANrwB,CAAwB7hB,CAAxB6hB,IAA6ByB,KAAK,CAAC80B,6BAAN90B,CAAoC,KAAKwmB,SAAL,CAAe9pC,CAAf,EAAkB2R,CAAtD2R,CAA7BzB,GAAwF,CAA1G;AACAta,aAAK,GAAGksC,QAARlsC;;AACA,YAAI+gC,KAAJ,EAAW;AACT,cAAIsN,aAAa,CAACG,YAAlB,EAAgC;AAC9BzB,uBAAW,GAAG,CAAdA;AACD;;AACD,cAAIsB,aAAa,CAACF,aAAlB,EAAiC;AAC/BlC,sBAAU,GAAGC,QAAQ,GAAGsE,iBAAxBvE;AACD;AACF;;AACD,cAAMpS,UAAU,GAAG;AACjB3+B,WAAC,EAAEozC,OADc;AAEjBlzC,WAAC,EAAEmzC,OAFc;AAGjBzB,qBAAW,EAAE,CAHI;AAIjBC,qBAJiB;AAKjBd,oBALiB;AAMjBC,kBANiB;AAOjBlyC,iBAAO,EAAE,KAAKypC,yBAAL,CAA+BhrC,CAA/B,EAAkCsnB,GAAG,CAACkZ,MAAJlZ,GAAa,QAAbA,GAAwBzE,IAA1D;AAPQ,SAAnB;AASA,aAAKspB,aAAL,CAAmB7kB,GAAnB,EAAwBtnB,CAAxB,EAA2BohC,UAA3B,EAAuCve,IAAvC;AACD;AACF;;AACDq1B,wBAAoB,GAAG;AACrB,YAAM5rC,IAAI,GAAG,KAAKs4B,WAAlB;AACA,UAAIl4B,KAAK,GAAG,CAAZ;AACAJ,UAAI,CAACwY,IAALxY,CAAUxC,OAAVwC,CAAkB,CAACooB,OAAD,EAAU/zB,KAAV,KAAoB;AACpC,YAAI,CAACsF,KAAK,CAAC,KAAK6jC,SAAL,CAAenpC,KAAf,EAAsBgR,CAAvB,CAAN,IAAmC,KAAKkQ,KAAL,CAAWqwB,iBAAX,CAA6BvxC,KAA7B,CAAvC,EAA4E;AAC1E+L,eAAK;AACN;AAHH;AAKA,aAAOA,KAAP;AACD;;AACDyrC,iBAAa,CAACx3C,KAAD,EAAQkiB,IAAR,EAAco1B,YAAd,EAA4B;AACvC,aAAO,KAAKp2B,KAAL,CAAWqwB,iBAAX,CAA6BvxC,KAA7B,IACHgG,SAAS,CAAC,KAAKqkC,yBAAL,CAA+BrqC,KAA/B,EAAsCkiB,IAAtC,EAA4Ctb,KAA5C,IAAqD0wC,YAAtD,CADN,GAEH,CAFJ;AAGD;;AA1GiD;;AA4GpDV,qBAAmB,CAACt5C,EAApBs5C,GAAyB,WAAzBA;AACAA,qBAAmB,CAAChzB,QAApBgzB,GAA+B;AAC7BrM,mBAAe,EAAE,KADY;AAE7B3pB,aAAS,EAAE;AACTm0B,mBAAa,EAAE,IADN;AAETK,kBAAY,EAAE;AAFL,KAFkB;AAM7BxU,cAAU,EAAE;AACVN,aAAO,EAAE;AACP3iC,YAAI,EAAE,QADC;AAEP8iC,kBAAU,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,YAAX,EAAyB,UAAzB,EAAqC,aAArC,EAAoD,aAApD;AAFL;AADC,KANiB;AAY7Bze,aAAS,EAAE,GAZkB;AAa7B6wB,cAAU,EAAE;AAbiB,GAA/B+D;AAeAA,qBAAmB,CAACv2B,SAApBu2B,GAAgC;AAC9BvgB,eAAW,EAAE,CADiB;AAE9B5T,WAAO,EAAE;AACPizB,YAAM,EAAE;AACN5M,cAAM,EAAE;AACN6M,wBAAc,CAACz0B,KAAD,EAAQ;AACpB,kBAAMiD,IAAI,GAAGjD,KAAK,CAACiD,IAAnB;;AACA,gBAAIA,IAAI,CAAC2kB,MAAL3kB,CAAY3kB,MAAZ2kB,IAAsBA,IAAI,CAACpD,QAALoD,CAAc3kB,MAAxC,EAAgD;AAC9C,oBAAM;AAACspC,sBAAM,EAAE;AAAC3iB;AAAD;AAAT,kBAAyBjF,KAAK,CAACw0B,MAANx0B,CAAatgB,OAA5C;AACA,qBAAOujB,IAAI,CAAC2kB,MAAL3kB,CAAYhkB,GAAZgkB,CAAgB,CAAC6lB,KAAD,EAAQ3qC,CAAR,KAAc;AACnC,sBAAMsM,IAAI,GAAGuV,KAAK,CAACsmB,cAANtmB,CAAqB,CAArBA,CAAb;AACA,sBAAMO,KAAK,GAAG9V,IAAI,CAACq4B,UAALr4B,CAAgBqoB,QAAhBroB,CAAyBtM,CAAzBsM,CAAd;AACA,uBAAO;AACL4c,sBAAI,EAAEyhB,KADD;AAEL3gB,2BAAS,EAAE5H,KAAK,CAACZ,eAFZ;AAGLiI,6BAAW,EAAErH,KAAK,CAACX,WAHd;AAILiI,2BAAS,EAAEtH,KAAK,CAACyF,WAJZ;AAKLf,4BAAU,EAAEA,UALP;AAMLmf,wBAAM,EAAE,CAACpkB,KAAK,CAACqwB,iBAANrwB,CAAwB7hB,CAAxB6hB,CANJ;AAOLlhB,uBAAK,EAAEX;AAPF,iBAAP;AAHK,gBAAP;AAaD;;AACD,mBAAO,EAAP;AACD;;AApBK,SADF;;AAuBNkjB,eAAO,CAAC/e,CAAD,EAAIoyC,UAAJ,EAAgBF,MAAhB,EAAwB;AAC7BA,gBAAM,CAACx0B,KAAPw0B,CAAaG,oBAAbH,CAAkCE,UAAU,CAAC51C,KAA7C01C;AACAA,gBAAM,CAACx0B,KAAPw0B,CAAa5V,MAAb4V;AACD;;AA1BK,OADD;AA6BPpD,aAAO,EAAE;AACPtV,iBAAS,EAAE;AACTuV,eAAK,GAAG;AACN,mBAAO,EAAP;AAFO;;AAITvI,eAAK,CAAC/oB,OAAD,EAAU;AACb,mBAAOA,OAAO,CAACC,KAARD,CAAckD,IAAdlD,CAAmB6nB,MAAnB7nB,CAA0BA,OAAO,CAAC4jB,SAAlC5jB,IAA+C,IAA/CA,GAAsDA,OAAO,CAAC+0B,cAArE;AACD;;AANQ;AADJ;AA7BF,KAFqB;AA0C9BpzB,UAAM,EAAE;AACN5R,OAAC,EAAE;AACDrT,YAAI,EAAE,cADL;AAED+5C,kBAAU,EAAE;AACVC,iBAAO,EAAE;AADC,SAFX;AAKD7rB,mBAAW,EAAE,IALZ;AAMDqmB,YAAI,EAAE;AACJyF,kBAAQ,EAAE;AADN,SANL;AASDC,mBAAW,EAAE;AACXF,iBAAO,EAAE;AADE,SATZ;AAYD9E,kBAAU,EAAE;AAZX;AADG;AA1CsB,GAAhC+D;;AA4DA,QAAMkB,aAAN,SAA4BrE,kBAA5B,CAA+C;;AAE/CqE,eAAa,CAACx6C,EAAdw6C,GAAmB,KAAnBA;AACAA,eAAa,CAACl0B,QAAdk0B,GAAyB;AACvBpF,UAAM,EAAE,CADe;AAEvBtsB,YAAQ,EAAE,CAFa;AAGvBqsB,iBAAa,EAAE,GAHQ;AAIvBpsB,UAAM,EAAE;AAJe,GAAzByxB;;AAOA,QAAMC,eAAN,SAA8BvS,iBAA9B,CAAgD;AAC9CuE,oBAAgB,CAAC/pC,KAAD,EAAQ;AACtB,YAAM4jC,MAAM,GAAG,KAAKK,WAAL,CAAiBL,MAAhC;AACA,YAAMxT,MAAM,GAAG,KAAK+Y,SAAL,CAAenpC,KAAf,CAAf;AACA,aAAO;AACLgqC,aAAK,EAAEpG,MAAM,CAACmF,SAAPnF,GAAmB5jC,KAAnB4jC,CADF;AAELpmC,aAAK,EAAE,KAAKomC,MAAM,CAACqG,gBAAPrG,CAAwBxT,MAAM,CAACwT,MAAM,CAACz3B,IAAR,CAA9By3B;AAFP,OAAP;AAID;;AACD+E,mBAAe,CAACh9B,IAAD,EAAOwY,IAAP,EAAa9c,KAAb,EAAoB0E,KAApB,EAA2B;AACxC,aAAOmkB,2BAA2B,CAAC2mB,IAA5B3mB,CAAiC,IAAjCA,EAAuCvkB,IAAvCukB,EAA6C/L,IAA7C+L,EAAmD7oB,KAAnD6oB,EAA0DnkB,KAA1DmkB,CAAP;AACD;;AACD4P,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAMvW,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAMrb,IAAI,GAAGjd,IAAI,CAACg5B,OAAlB;AACA,YAAM/4B,MAAM,GAAGD,IAAI,CAACwY,IAALxY,IAAa,EAA5B;AACA,YAAMm9B,MAAM,GAAGn9B,IAAI,CAACM,MAALN,CAAYo9B,SAAZp9B,EAAf;AACAid,UAAI,CAAChd,MAALgd,GAAchd,MAAdgd;;AACA,UAAI1G,IAAI,KAAK,QAAb,EAAuB;AACrB,cAAMthB,OAAO,GAAG,KAAKwpC,4BAAL,CAAkCloB,IAAlC,CAAhB;;AACA,YAAI,CAAC,KAAKthB,OAAL,CAAaiiB,QAAlB,EAA4B;AAC1BjiB,iBAAO,CAACsmB,WAARtmB,GAAsB,CAAtBA;AACD;;AACD,cAAM6/B,UAAU,GAAG;AACjBvF,eAAK,EAAE,IADU;AAEjBG,mBAAS,EAAEyN,MAAM,CAACtpC,MAAPspC,KAAkBl9B,MAAM,CAACpM,MAFnB;AAGjBoB;AAHiB,SAAnB;AAKA,aAAK4qC,aAAL,CAAmB5iB,IAAnB,EAAyBnnB,SAAzB,EAAoCg/B,UAApC,EAAgDve,IAAhD;AACD;;AACD,WAAKmqB,cAAL,CAAoBzgC,MAApB,EAA4B,CAA5B,EAA+BA,MAAM,CAACpM,MAAtC,EAA8C0iB,IAA9C;AACD;;AACDmqB,kBAAc,CAACzgC,MAAD,EAASvE,KAAT,EAAgB0E,KAAhB,EAAuBmW,IAAvB,EAA6B;AACzC,YAAMS,KAAK,GAAG,KAAKshB,WAAL,CAAiBsD,MAA/B;AACA,YAAMI,KAAK,GAAGzlB,IAAI,KAAK,OAAvB;;AACA,WAAK,IAAI7iB,CAAC,GAAGgI,KAAb,EAAoBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAAhC,EAAuC1M,CAAC,EAAxC,EAA4C;AAC1C,cAAMgoB,KAAK,GAAGzb,MAAM,CAACvM,CAAD,CAApB;AACA,cAAMuB,OAAO,GAAG,KAAKypC,yBAAL,CAA+BhrC,CAA/B,EAAkCgoB,KAAK,CAACwY,MAANxY,GAAe,QAAfA,GAA0BnF,IAA5D,CAAhB;AACA,cAAM81B,aAAa,GAAGr1B,KAAK,CAACs1B,wBAANt1B,CAA+BtjB,CAA/BsjB,EAAkC,KAAKwmB,SAAL,CAAe9pC,CAAf,EAAkB2R,CAApD2R,CAAtB;AACA,cAAM7gB,CAAC,GAAG6lC,KAAK,GAAGhlB,KAAK,CAACu0B,OAAT,GAAmBc,aAAa,CAACl2C,CAAhD;AACA,cAAME,CAAC,GAAG2lC,KAAK,GAAGhlB,KAAK,CAACw0B,OAAT,GAAmBa,aAAa,CAACh2C,CAAhD;AACA,cAAMy+B,UAAU,GAAG;AACjB3+B,WADiB;AAEjBE,WAFiB;AAGjB4E,eAAK,EAAEoxC,aAAa,CAACpxC,KAHJ;AAIjB4pB,cAAI,EAAElrB,KAAK,CAACxD,CAAD,CAALwD,IAAYA,KAAK,CAACtD,CAAD,CAJN;AAKjBpB;AALiB,SAAnB;AAOA,aAAK4qC,aAAL,CAAmBnkB,KAAnB,EAA0BhoB,CAA1B,EAA6BohC,UAA7B,EAAyCve,IAAzC;AACD;AACF;;AAlD6C;;AAoDhD61B,iBAAe,CAACz6C,EAAhBy6C,GAAqB,OAArBA;AACAA,iBAAe,CAACn0B,QAAhBm0B,GAA2B;AACzBhQ,sBAAkB,EAAE,MADK;AAEzBwC,mBAAe,EAAE,OAFQ;AAGzBvoB,aAAS,EAAE,GAHc;AAIzBa,YAAQ,EAAE,IAJe;AAKzBxB,YAAQ,EAAE;AACRuH,UAAI,EAAE;AACJ3B,YAAI,EAAE;AADF;AADE;AALe,GAA3B8wB;AAWAA,iBAAe,CAAC13B,SAAhB03B,GAA4B;AAC1B1hB,eAAW,EAAE,CADa;AAE1BzT,UAAM,EAAE;AACN5R,OAAC,EAAE;AACDrT,YAAI,EAAE;AADL;AADG;AAFkB,GAA5Bo6C;;AASA,QAAMG,OAAN,CAAc;AACZp5B,eAAW,GAAG;AACZ,WAAKhd,CAAL,GAASL,SAAT;AACA,WAAKO,CAAL,GAASP,SAAT;AACA,WAAKo+B,MAAL,GAAc,KAAd;AACA,WAAKj/B,OAAL,GAAea,SAAf;AACA,WAAKmgC,WAAL,GAAmBngC,SAAnB;AACD;;AACD02C,mBAAe,CAACC,gBAAD,EAAmB;AAChC,YAAM;AAACt2C,SAAD;AAAIE;AAAJ,UAAS,KAAKq2C,QAAL,CAAc,CAAC,GAAD,EAAM,GAAN,CAAd,EAA0BD,gBAA1B,CAAf;AACA,aAAO;AAACt2C,SAAD;AAAIE;AAAJ,OAAP;AACD;;AACDs2C,YAAQ,GAAG;AACT,aAAOlzC,QAAQ,CAAC,KAAKtD,CAAN,CAARsD,IAAoBA,QAAQ,CAAC,KAAKpD,CAAN,CAAnC;AACD;;AACDq2C,YAAQ,CAACvtB,KAAD,EAAQytB,KAAR,EAAe;AACrB,YAAMzb,KAAK,GAAG,KAAK8E,WAAnB;;AACA,UAAI,CAAC2W,KAAD,IAAU,CAACzb,KAAf,EAAsB;AACpB,eAAO,IAAP;AACD;;AACD,YAAM3rB,GAAG,GAAG,EAAZ;AACA2Z,WAAK,CAAC3hB,OAAN2hB,CAAcG,IAAI,IAAI;AACpB9Z,WAAG,CAAC8Z,IAAD,CAAH9Z,GAAY2rB,KAAK,CAAC7R,IAAD,CAAL6R,IAAeA,KAAK,CAAC7R,IAAD,CAAL6R,CAAY+C,MAAZ/C,EAAfA,GAAsCA,KAAK,CAAC7R,IAAD,CAAL6R,CAAY6C,GAAlD7C,GAAwD,KAAK7R,IAAL,CAApE9Z;AADF;AAGA,aAAOA,GAAP;AACD;;AAzBW;;AA2Bd+mC,SAAO,CAACt0B,QAARs0B,GAAmB,EAAnBA;AACAA,SAAO,CAACM,aAARN,GAAwBz2C,SAAxBy2C;AAEA,QAAMO,UAAU,GAAG;AACjB/vC,UAAM,CAAClL,KAAD,EAAQ;AACZ,aAAOC,OAAO,CAACD,KAAD,CAAPC,GAAiBD,KAAjBC,GAAyB,KAAKD,KAArC;AAFe;;AAIjBk7C,WAAO,CAACC,SAAD,EAAY34C,KAAZ,EAAmBytC,KAAnB,EAA0B;AAC/B,UAAIkL,SAAS,KAAK,CAAlB,EAAqB;AACnB,eAAO,GAAP;AACD;;AACD,YAAM9gB,MAAM,GAAG,KAAK3W,KAAL,CAAWtgB,OAAX,CAAmBi3B,MAAlC;AACA,UAAI+gB,QAAJ;AACA,UAAI3mB,KAAK,GAAG0mB,SAAZ;;AACA,UAAIlL,KAAK,CAACjuC,MAANiuC,GAAe,CAAnB,EAAsB;AACpB,cAAMoL,OAAO,GAAGn1C,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAAC8B,GAAL9B,CAAS+pC,KAAK,CAAC,CAAD,CAALA,CAASjwC,KAAlBkG,CAATA,EAAmCA,IAAI,CAAC8B,GAAL9B,CAAS+pC,KAAK,CAACA,KAAK,CAACjuC,MAANiuC,GAAe,CAAhB,CAALA,CAAwBjwC,KAAjCkG,CAAnCA,CAAhB;;AACA,YAAIm1C,OAAO,GAAG,IAAVA,IAAkBA,OAAO,GAAG,KAAhC,EAAuC;AACrCD,kBAAQ,GAAG,YAAXA;AACD;;AACD3mB,aAAK,GAAG6mB,cAAc,CAACH,SAAD,EAAYlL,KAAZ,CAAtBxb;AACD;;AACD,YAAM8mB,QAAQ,GAAG50C,KAAK,CAACT,IAAI,CAAC8B,GAAL9B,CAASuuB,KAATvuB,CAAD,CAAtB;AACA,YAAMs1C,UAAU,GAAGt1C,IAAI,CAACqC,GAALrC,CAASA,IAAI,CAACoC,GAALpC,CAAS,CAAC,CAAD,GAAKA,IAAI,CAACkB,KAALlB,CAAWq1C,QAAXr1C,CAAdA,EAAoC,EAApCA,CAATA,EAAkD,CAAlDA,CAAnB;AACA,YAAM9C,OAAO,GAAG;AAACg4C,gBAAD;AAAWK,6BAAqB,EAAED,UAAlC;AAA8CE,6BAAqB,EAAEF;AAArE,OAAhB;AACAp7C,YAAM,CAACsP,MAAPtP,CAAcgD,OAAdhD,EAAuB,KAAKgD,OAAL,CAAa6sC,KAAb,CAAmBnV,MAA1C16B;AACA,aAAOw6B,YAAY,CAACugB,SAAD,EAAY9gB,MAAZ,EAAoBj3B,OAApB,CAAnB;AAtBe;;AAwBjBu4C,eAAW,CAACR,SAAD,EAAY34C,KAAZ,EAAmBytC,KAAnB,EAA0B;AACnC,UAAIkL,SAAS,KAAK,CAAlB,EAAqB;AACnB,eAAO,GAAP;AACD;;AACD,YAAM3Y,MAAM,GAAG2Y,SAAS,GAAIj1C,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAaA,IAAI,CAACkB,KAALlB,CAAWS,KAAK,CAACw0C,SAAD,CAAhBj1C,CAAbA,CAA5B;;AACA,UAAIs8B,MAAM,KAAK,CAAXA,IAAgBA,MAAM,KAAK,CAA3BA,IAAgCA,MAAM,KAAK,CAA/C,EAAkD;AAChD,eAAOyY,UAAU,CAACC,OAAXD,CAAmB16C,IAAnB06C,CAAwB,IAAxBA,EAA8BE,SAA9BF,EAAyCz4C,KAAzCy4C,EAAgDhL,KAAhDgL,CAAP;AACD;;AACD,aAAO,EAAP;AACD;;AAjCgB,GAAnB;;AAmCA,WAASK,cAAT,CAAwBH,SAAxB,EAAmClL,KAAnC,EAA0C;AACxC,QAAIxb,KAAK,GAAGwb,KAAK,CAACjuC,MAANiuC,GAAe,CAAfA,GAAmBA,KAAK,CAAC,CAAD,CAALA,CAASjwC,KAATiwC,GAAiBA,KAAK,CAAC,CAAD,CAALA,CAASjwC,KAA7CiwC,GAAqDA,KAAK,CAAC,CAAD,CAALA,CAASjwC,KAATiwC,GAAiBA,KAAK,CAAC,CAAD,CAALA,CAASjwC,KAA3F;;AACA,QAAIkG,IAAI,CAAC8B,GAAL9B,CAASuuB,KAATvuB,KAAmB,CAAnBA,IAAwBi1C,SAAS,KAAKj1C,IAAI,CAACkB,KAALlB,CAAWi1C,SAAXj1C,CAA1C,EAAiE;AAC/DuuB,WAAK,GAAG0mB,SAAS,GAAGj1C,IAAI,CAACkB,KAALlB,CAAWi1C,SAAXj1C,CAApBuuB;AACD;;AACD,WAAOA,KAAP;AACD;;AACD,MAAImnB,KAAK,GAAG;AAACX;AAAD,GAAZ;AAEA70B,UAAQ,CAAC/Z,GAAT+Z,CAAa,OAAbA,EAAsB;AACpB+zB,WAAO,EAAE,IADW;AAEpBzF,UAAM,EAAE,KAFY;AAGpB9yC,WAAO,EAAE,KAHW;AAIpB0sB,eAAW,EAAE,KAJO;AAKpBgO,UAAM,EAAE,OALY;AAMpBjO,SAAK,EAAE,CANa;AAOpBsmB,QAAI,EAAE;AACJwF,aAAO,EAAE,IADL;AAEJ5uB,eAAS,EAAE,CAFP;AAGJswB,gBAAU,EAAE,IAHR;AAIJC,qBAAe,EAAE,IAJb;AAKJC,eAAS,EAAE,IALP;AAMJC,gBAAU,EAAE,CANR;AAOJC,eAAS,EAAE,CAAChU,IAAD,EAAO7kC,OAAP,KAAmBA,OAAO,CAACmoB,SAPlC;AAQJ2wB,eAAS,EAAE,CAACjU,IAAD,EAAO7kC,OAAP,KAAmBA,OAAO,CAACue,KARlC;AASJ+yB,YAAM,EAAE,KATJ;AAUJ7V,gBAAU,EAAE,EAVR;AAWJC,sBAAgB,EAAE,GAXd;AAYJpV,iBAAW,EAAE;AAZT,KAPc;AAqBpBqrB,SAAK,EAAE;AACLoF,aAAO,EAAE,KADJ;AAELpvB,UAAI,EAAE,EAFD;AAGLoxB,aAAO,EAAE;AACPnyB,WAAG,EAAE,CADE;AAEPC,cAAM,EAAE;AAFD;AAHJ,KArBa;AA6BpBgmB,SAAK,EAAE;AACLmM,iBAAW,EAAE,CADR;AAELC,iBAAW,EAAE,EAFR;AAGLC,YAAM,EAAE,KAHH;AAILC,qBAAe,EAAE,CAJZ;AAKLC,qBAAe,EAAE,EALZ;AAMLL,aAAO,EAAE,CANJ;AAOLhC,aAAO,EAAE,IAPJ;AAQLsC,cAAQ,EAAE,IARL;AASLC,qBAAe,EAAE,CATZ;AAULC,iBAAW,EAAE,CAVR;AAWLt7C,cAAQ,EAAEu6C,KAAK,CAACX,UAANW,CAAiB1wC,MAXtB;AAYL0xC,WAAK,EAAE,EAZF;AAaLC,WAAK,EAAE,EAbF;AAcLlvC,WAAK,EAAE,QAdF;AAeLmvC,gBAAU,EAAE,MAfP;AAgBLC,uBAAiB,EAAE,KAhBd;AAiBLC,mBAAa,EAAE,2BAjBV;AAkBLC,qBAAe,EAAE;AAlBZ;AA7Ba,GAAtB72B;AAkDAA,UAAQ,CAACV,KAATU,CAAe,aAAfA,EAA8B,OAA9BA,EAAuC,EAAvCA,EAA2C,OAA3CA;AACAA,UAAQ,CAACV,KAATU,CAAe,YAAfA,EAA6B,OAA7BA,EAAsC,EAAtCA,EAA0C,aAA1CA;AACAA,UAAQ,CAACV,KAATU,CAAe,YAAfA,EAA6B,aAA7BA,EAA4C,EAA5CA,EAAgD,aAAhDA;AACAA,UAAQ,CAACV,KAATU,CAAe,aAAfA,EAA8B,OAA9BA,EAAuC,EAAvCA,EAA2C,OAA3CA;AACAA,UAAQ,CAACb,QAATa,CAAkB,OAAlBA,EAA2B;AACzBI,aAAS,EAAE,KADc;AAEzBH,eAAW,EAAGV,IAAD,IAAU,CAACA,IAAI,CAACW,UAALX,CAAgB,QAAhBA,CAAD,IAA8B,CAACA,IAAI,CAACW,UAALX,CAAgB,OAAhBA,CAA/B,IAA2DA,IAAI,KAAK,UAApE,IAAkFA,IAAI,KAAK,QAFzF;AAGzBY,cAAU,EAAGZ,IAAD,IAAUA,IAAI,KAAK,YAATA,IAAyBA,IAAI,KAAK;AAH/B,GAA3BS;AAKAA,UAAQ,CAACb,QAATa,CAAkB,QAAlBA,EAA4B;AAC1BI,aAAS,EAAE;AADe,GAA5BJ;AAGAA,UAAQ,CAACb,QAATa,CAAkB,aAAlBA,EAAiC;AAC/BC,eAAW,EAAGV,IAAD,IAAUA,IAAI,KAAK,iBAATA,IAA8BA,IAAI,KAAK,UAD/B;AAE/BY,cAAU,EAAGZ,IAAD,IAAUA,IAAI,KAAK;AAFA,GAAjCS;;AAKA,WAASq2B,QAAT,CAAkBt3B,KAAlB,EAAyB8qB,KAAzB,EAAgC;AAC9B,UAAMiN,QAAQ,GAAG/3B,KAAK,CAAC/hB,OAAN+hB,CAAc8qB,KAA/B;AACA,UAAMkN,UAAU,GAAGD,QAAQ,CAACE,aAATF,IAA0BG,iBAAiB,CAACl4B,KAAD,CAA9D;AACA,UAAMm4B,YAAY,GAAGJ,QAAQ,CAACL,KAATK,CAAeK,OAAfL,GAAyBM,eAAe,CAACvN,KAAD,CAAxCiN,GAAkD,EAAvE;AACA,UAAMO,eAAe,GAAGH,YAAY,CAACt7C,MAArC;AACA,UAAM07C,KAAK,GAAGJ,YAAY,CAAC,CAAD,CAA1B;AACA,UAAMvyC,IAAI,GAAGuyC,YAAY,CAACG,eAAe,GAAG,CAAnB,CAAzB;AACA,UAAME,QAAQ,GAAG,EAAjB;;AACA,QAAIF,eAAe,GAAGN,UAAtB,EAAkC;AAChCS,gBAAU,CAAC3N,KAAD,EAAQ0N,QAAR,EAAkBL,YAAlB,EAAgCG,eAAe,GAAGN,UAAlD,CAAVS;AACA,aAAOD,QAAP;AACD;;AACD,UAAMjH,OAAO,GAAGmH,gBAAgB,CAACP,YAAD,EAAerN,KAAf,EAAsBkN,UAAtB,CAAhC;;AACA,QAAIM,eAAe,GAAG,CAAtB,EAAyB;AACvB,UAAI57C,CAAJ,EAAOO,IAAP;AACA,YAAM07C,eAAe,GAAGL,eAAe,GAAG,CAAlBA,GAAsBv3C,IAAI,CAACc,KAALd,CAAW,CAAC6E,IAAI,GAAG2yC,KAAR,KAAkBD,eAAe,GAAG,CAApC,CAAXv3C,CAAtBu3C,GAA2E,IAAnG;AACAzqB,UAAI,CAACid,KAAD,EAAQ0N,QAAR,EAAkBjH,OAAlB,EAA2B32C,aAAa,CAAC+9C,eAAD,CAAb/9C,GAAiC,CAAjCA,GAAqC29C,KAAK,GAAGI,eAAxE,EAAyFJ,KAAzF,CAAJ1qB;;AACA,WAAKnxB,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGq7C,eAAe,GAAG,CAArC,EAAwC57C,CAAC,GAAGO,IAA5C,EAAkDP,CAAC,EAAnD,EAAuD;AACrDmxB,YAAI,CAACid,KAAD,EAAQ0N,QAAR,EAAkBjH,OAAlB,EAA2B4G,YAAY,CAACz7C,CAAD,CAAvC,EAA4Cy7C,YAAY,CAACz7C,CAAC,GAAG,CAAL,CAAxD,CAAJmxB;AACD;;AACDA,UAAI,CAACid,KAAD,EAAQ0N,QAAR,EAAkBjH,OAAlB,EAA2B3rC,IAA3B,EAAiChL,aAAa,CAAC+9C,eAAD,CAAb/9C,GAAiCkwC,KAAK,CAACjuC,MAAvCjC,GAAgDgL,IAAI,GAAG+yC,eAAxF,CAAJ9qB;AACA,aAAO2qB,QAAP;AACD;;AACD3qB,QAAI,CAACid,KAAD,EAAQ0N,QAAR,EAAkBjH,OAAlB,CAAJ1jB;AACA,WAAO2qB,QAAP;AACD;;AACD,WAASN,iBAAT,CAA2Bl4B,KAA3B,EAAkC;AAChC,UAAMuvB,MAAM,GAAGvvB,KAAK,CAAC/hB,OAAN+hB,CAAcuvB,MAA7B;;AACA,UAAMsH,UAAU,GAAG72B,KAAK,CAAC44B,SAAN54B,EAAnB;;AACA,UAAM64B,QAAQ,GAAG74B,KAAK,CAAC2qB,OAAN3qB,GAAgB62B,UAAhB72B,IAA8BuvB,MAAM,GAAG,CAAH,GAAO,CAA3CvvB,CAAjB;AACA,UAAM84B,QAAQ,GAAG94B,KAAK,CAAC+4B,UAAN/4B,GAAmB62B,UAApC;AACA,WAAO91C,IAAI,CAACkB,KAALlB,CAAWA,IAAI,CAACoC,GAALpC,CAAS83C,QAAT93C,EAAmB+3C,QAAnB/3C,CAAXA,CAAP;AACD;;AACD,WAAS23C,gBAAT,CAA0BP,YAA1B,EAAwCrN,KAAxC,EAA+CkN,UAA/C,EAA2D;AACzD,UAAMgB,gBAAgB,GAAGC,cAAc,CAACd,YAAD,CAAvC;AACA,UAAM5G,OAAO,GAAGzG,KAAK,CAACjuC,MAANiuC,GAAekN,UAA/B;;AACA,QAAI,CAACgB,gBAAL,EAAuB;AACrB,aAAOj4C,IAAI,CAACqC,GAALrC,CAASwwC,OAATxwC,EAAkB,CAAlBA,CAAP;AACD;;AACD,UAAMm4C,OAAO,GAAG92C,UAAU,CAAC42C,gBAAD,CAA1B;;AACA,SAAK,IAAIt8C,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAGi8C,OAAO,CAACr8C,MAARq8C,GAAiB,CAAxC,EAA2Cx8C,CAAC,GAAGO,IAA/C,EAAqDP,CAAC,EAAtD,EAA0D;AACxD,YAAMy/B,MAAM,GAAG+c,OAAO,CAACx8C,CAAD,CAAtB;;AACA,UAAIy/B,MAAM,GAAGoV,OAAb,EAAsB;AACpB,eAAOpV,MAAP;AACD;AACF;;AACD,WAAOp7B,IAAI,CAACqC,GAALrC,CAASwwC,OAATxwC,EAAkB,CAAlBA,CAAP;AACD;;AACD,WAASs3C,eAAT,CAAyBvN,KAAzB,EAAgC;AAC9B,UAAMzoC,MAAM,GAAG,EAAf;AACA,QAAI3F,CAAJ,EAAOO,IAAP;;AACA,SAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG6tC,KAAK,CAACjuC,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2CP,CAAC,EAA5C,EAAgD;AAC9C,UAAIouC,KAAK,CAACpuC,CAAD,CAALouC,CAAS4M,KAAb,EAAoB;AAClBr1C,cAAM,CAACtC,IAAPsC,CAAY3F,CAAZ2F;AACD;AACF;;AACD,WAAOA,MAAP;AACD;;AACD,WAASo2C,UAAT,CAAoB3N,KAApB,EAA2B0N,QAA3B,EAAqCL,YAArC,EAAmD5G,OAAnD,EAA4D;AAC1D,QAAInoC,KAAK,GAAG,CAAZ;AACA,QAAI+kB,IAAI,GAAGgqB,YAAY,CAAC,CAAD,CAAvB;AACA,QAAIz7C,CAAJ;AACA60C,WAAO,GAAGxwC,IAAI,CAACo4C,IAALp4C,CAAUwwC,OAAVxwC,CAAVwwC;;AACA,SAAK70C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGouC,KAAK,CAACjuC,MAAtB,EAA8BH,CAAC,EAA/B,EAAmC;AACjC,UAAIA,CAAC,KAAKyxB,IAAV,EAAgB;AACdqqB,gBAAQ,CAACz4C,IAATy4C,CAAc1N,KAAK,CAACpuC,CAAD,CAAnB87C;AACApvC,aAAK;AACL+kB,YAAI,GAAGgqB,YAAY,CAAC/uC,KAAK,GAAGmoC,OAAT,CAAnBpjB;AACD;AACF;AACF;;AACD,WAASN,IAAT,CAAcid,KAAd,EAAqB0N,QAArB,EAA+BjH,OAA/B,EAAwC6H,UAAxC,EAAoDC,QAApD,EAA8D;AAC5D,UAAM30C,KAAK,GAAG9I,cAAc,CAACw9C,UAAD,EAAa,CAAb,CAA5B;AACA,UAAMz0C,GAAG,GAAG5D,IAAI,CAACoC,GAALpC,CAASnF,cAAc,CAACy9C,QAAD,EAAWvO,KAAK,CAACjuC,MAAjB,CAAvBkE,EAAiD+pC,KAAK,CAACjuC,MAAvDkE,CAAZ;AACA,QAAIqI,KAAK,GAAG,CAAZ;AACA,QAAIvM,MAAJ,EAAYH,CAAZ,EAAeyxB,IAAf;AACAojB,WAAO,GAAGxwC,IAAI,CAACo4C,IAALp4C,CAAUwwC,OAAVxwC,CAAVwwC;;AACA,QAAI8H,QAAJ,EAAc;AACZx8C,YAAM,GAAGw8C,QAAQ,GAAGD,UAApBv8C;AACA00C,aAAO,GAAG10C,MAAM,GAAGkE,IAAI,CAACkB,KAALlB,CAAWlE,MAAM,GAAG00C,OAApBxwC,CAAnBwwC;AACD;;AACDpjB,QAAI,GAAGzpB,KAAPypB;;AACA,WAAOA,IAAI,GAAG,CAAd,EAAiB;AACf/kB,WAAK;AACL+kB,UAAI,GAAGptB,IAAI,CAACc,KAALd,CAAW2D,KAAK,GAAG0E,KAAK,GAAGmoC,OAA3BxwC,CAAPotB;AACD;;AACD,SAAKzxB,CAAC,GAAGqE,IAAI,CAACqC,GAALrC,CAAS2D,KAAT3D,EAAgB,CAAhBA,CAAT,EAA6BrE,CAAC,GAAGiI,GAAjC,EAAsCjI,CAAC,EAAvC,EAA2C;AACzC,UAAIA,CAAC,KAAKyxB,IAAV,EAAgB;AACdqqB,gBAAQ,CAACz4C,IAATy4C,CAAc1N,KAAK,CAACpuC,CAAD,CAAnB87C;AACApvC,aAAK;AACL+kB,YAAI,GAAGptB,IAAI,CAACc,KAALd,CAAW2D,KAAK,GAAG0E,KAAK,GAAGmoC,OAA3BxwC,CAAPotB;AACD;AACF;AACF;;AACD,WAAS8qB,cAAT,CAAwBtsB,GAAxB,EAA6B;AAC3B,UAAMhwB,GAAG,GAAGgwB,GAAG,CAAC9vB,MAAhB;AACA,QAAIH,CAAJ,EAAO48C,IAAP;;AACA,QAAI38C,GAAG,GAAG,CAAV,EAAa;AACX,aAAO,KAAP;AACD;;AACD,SAAK28C,IAAI,GAAG3sB,GAAG,CAAC,CAAD,CAAV2sB,EAAe58C,CAAC,GAAG,CAAxB,EAA2BA,CAAC,GAAGC,GAA/B,EAAoC,EAAED,CAAtC,EAAyC;AACvC,UAAIiwB,GAAG,CAACjwB,CAAD,CAAHiwB,GAASA,GAAG,CAACjwB,CAAC,GAAG,CAAL,CAAZiwB,KAAwB2sB,IAA5B,EAAkC;AAChC,eAAO,KAAP;AACD;AACF;;AACD,WAAOA,IAAP;AACD;;AAED,QAAMC,YAAY,GAAI/wC,KAAD,IAAWA,KAAK,KAAK,MAAVA,GAAmB,OAAnBA,GAA6BA,KAAK,KAAK,OAAVA,GAAoB,MAApBA,GAA6BA,KAA1F;;AACA,QAAMgxC,cAAc,GAAG,CAACx5B,KAAD,EAAQ4sB,IAAR,EAAc2C,MAAd,KAAyB3C,IAAI,KAAK,KAATA,IAAkBA,IAAI,KAAK,MAA3BA,GAAoC5sB,KAAK,CAAC4sB,IAAD,CAAL5sB,GAAcuvB,MAAlD3C,GAA2D5sB,KAAK,CAAC4sB,IAAD,CAAL5sB,GAAcuvB,MAAzH;;AACA,WAASkK,MAAT,CAAgB9sB,GAAhB,EAAqB+sB,QAArB,EAA+B;AAC7B,UAAMr3C,MAAM,GAAG,EAAf;AACA,UAAMs3C,SAAS,GAAGhtB,GAAG,CAAC9vB,MAAJ8vB,GAAa+sB,QAA/B;AACA,UAAM/8C,GAAG,GAAGgwB,GAAG,CAAC9vB,MAAhB;AACA,QAAIH,CAAC,GAAG,CAAR;;AACA,WAAOA,CAAC,GAAGC,GAAX,EAAgBD,CAAC,IAAIi9C,SAArB,EAAgC;AAC9Bt3C,YAAM,CAACtC,IAAPsC,CAAYsqB,GAAG,CAAC5rB,IAAI,CAACkB,KAALlB,CAAWrE,CAAXqE,CAAD,CAAfsB;AACD;;AACD,WAAOA,MAAP;AACD;;AACD,WAASu3C,mBAAT,CAA6B55B,KAA7B,EAAoC3iB,KAApC,EAA2Cw8C,eAA3C,EAA4D;AAC1D,UAAMh9C,MAAM,GAAGmjB,KAAK,CAAC8qB,KAAN9qB,CAAYnjB,MAA3B;AACA,UAAMi9C,UAAU,GAAG/4C,IAAI,CAACoC,GAALpC,CAAS1D,KAAT0D,EAAgBlE,MAAM,GAAG,CAAzBkE,CAAnB;AACA,UAAM2D,KAAK,GAAGsb,KAAK,CAACuuB,WAApB;AACA,UAAM5pC,GAAG,GAAGqb,KAAK,CAACwuB,SAAlB;AACA,UAAM5rC,OAAO,GAAG,IAAhB;AACA,QAAIm3C,SAAS,GAAG/5B,KAAK,CAAC+qB,eAAN/qB,CAAsB85B,UAAtB95B,CAAhB;AACA,QAAIuvB,MAAJ;;AACA,QAAIsK,eAAJ,EAAqB;AACnB,UAAIh9C,MAAM,KAAK,CAAf,EAAkB;AAChB0yC,cAAM,GAAGxuC,IAAI,CAACqC,GAALrC,CAASg5C,SAAS,GAAGr1C,KAArB3D,EAA4B4D,GAAG,GAAGo1C,SAAlCh5C,CAATwuC;AADF,aAEO,IAAIlyC,KAAK,KAAK,CAAd,EAAiB;AACtBkyC,cAAM,GAAG,CAACvvB,KAAK,CAAC+qB,eAAN/qB,CAAsB,CAAtBA,IAA2B+5B,SAA5B,IAAyC,CAAlDxK;AADK,aAEA;AACLA,cAAM,GAAG,CAACwK,SAAS,GAAG/5B,KAAK,CAAC+qB,eAAN/qB,CAAsB85B,UAAU,GAAG,CAAnC95B,CAAb,IAAsD,CAA/DuvB;AACD;;AACDwK,eAAS,IAAID,UAAU,GAAGz8C,KAAby8C,GAAqBvK,MAArBuK,GAA8B,CAACvK,MAA5CwK;;AACA,UAAIA,SAAS,GAAGr1C,KAAK,GAAG9B,OAApBm3C,IAA+BA,SAAS,GAAGp1C,GAAG,GAAG/B,OAArD,EAA8D;AAC5D;AACD;AACF;;AACD,WAAOm3C,SAAP;AACD;;AACD,WAAS73B,cAAT,CAAwB83B,MAAxB,EAAgCn9C,MAAhC,EAAwC;AACtCN,QAAI,CAACy9C,MAAD,EAAU/3B,KAAD,IAAW;AACtB,YAAMR,EAAE,GAAGQ,KAAK,CAACR,EAAjB;AACA,YAAMe,KAAK,GAAGf,EAAE,CAAC5kB,MAAH4kB,GAAY,CAA1B;AACA,UAAI/kB,CAAJ;;AACA,UAAI8lB,KAAK,GAAG3lB,MAAZ,EAAoB;AAClB,aAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8lB,KAAhB,EAAuB,EAAE9lB,CAAzB,EAA4B;AAC1B,iBAAOulB,KAAK,CAACT,IAANS,CAAWR,EAAE,CAAC/kB,CAAD,CAAbulB,CAAP;AACD;;AACDR,UAAE,CAAC1a,MAAH0a,CAAU,CAAVA,EAAae,KAAbf;AACD;AATC,MAAJllB;AAWD;;AACD,WAAS09C,iBAAT,CAA2Bh8C,OAA3B,EAAoC;AAClC,WAAOA,OAAO,CAAC24C,SAAR34C,GAAoBA,OAAO,CAAC44C,UAA5B54C,GAAyC,CAAhD;AACD;;AACD,WAASi8C,cAAT,CAAwBj8C,OAAxB,EAAiC0qB,QAAjC,EAA2C;AACzC,QAAI,CAAC1qB,OAAO,CAAC+2C,OAAb,EAAsB;AACpB,aAAO,CAAP;AACD;;AACD,UAAMp2B,IAAI,GAAG8J,MAAM,CAACzqB,OAAO,CAAC2gB,IAAT,EAAe+J,QAAf,CAAnB;AACA,UAAMquB,OAAO,GAAGvuB,SAAS,CAACxqB,OAAO,CAAC+4C,OAAT,CAAzB;AACA,UAAMlxB,KAAK,GAAGhrB,OAAO,CAACmD,OAAO,CAAC2nB,IAAT,CAAP9qB,GAAwBmD,OAAO,CAAC2nB,IAAR3nB,CAAapB,MAArC/B,GAA8C,CAA5D;AACA,WAAQgrB,KAAK,GAAGlH,IAAI,CAACG,UAAb+G,GAA2BkxB,OAAO,CAAC9zB,MAA3C;AACD;;AACD,WAASi3B,kBAAT,CAA4BptB,MAA5B,EAAoC/M,KAApC,EAA2C;AACzC,WAAOsJ,aAAa,CAACyD,MAAD,EAAS;AAC3B/M,WAD2B;AAE3BhlB,UAAI,EAAE;AAFqB,KAAT,CAApB;AAID;;AACD,WAASo/C,iBAAT,CAA2BrtB,MAA3B,EAAmC1vB,KAAnC,EAA0C89B,IAA1C,EAAgD;AAC9C,WAAO7R,aAAa,CAACyD,MAAD,EAAS;AAC3BoO,UAD2B;AAE3B99B,WAF2B;AAG3BrC,UAAI,EAAE;AAHqB,KAAT,CAApB;AAKD;;AACD,WAASq/C,UAAT,CAAoB7xC,KAApB,EAA2B8xC,QAA3B,EAAqC79C,OAArC,EAA8C;AAC5C,QAAI+R,GAAG,GAAGjG,kBAAkB,CAACC,KAAD,CAA5B;;AACA,QAAK/L,OAAO,IAAI69C,QAAQ,KAAK,OAAxB79C,IAAqC,CAACA,OAAD,IAAY69C,QAAQ,KAAK,OAAnE,EAA6E;AAC3E9rC,SAAG,GAAG+qC,YAAY,CAAC/qC,GAAD,CAAlBA;AACD;;AACD,WAAOA,GAAP;AACD;;AACD,WAAS+rC,SAAT,CAAmBv6B,KAAnB,EAA0BuvB,MAA1B,EAAkC+K,QAAlC,EAA4C9xC,KAA5C,EAAmD;AACjD,UAAM;AAACqc,SAAD;AAAMlc,UAAN;AAAYmc,YAAZ;AAAoBlc,WAApB;AAA2B2V;AAA3B,QAAoCyB,KAA1C;AACA,UAAM;AAACwnB,eAAD;AAAYvnB;AAAZ,QAAsB1B,KAA5B;AACA,QAAIkF,QAAQ,GAAG,CAAf;AACA,QAAI6C,QAAJ,EAAck0B,MAAd,EAAsBC,MAAtB;AACA,UAAMv3B,MAAM,GAAG4B,MAAM,GAAGD,GAAxB;AACA,UAAM/C,KAAK,GAAGlZ,KAAK,GAAGD,IAAtB;;AACA,QAAIqX,KAAK,CAACwsB,YAANxsB,EAAJ,EAA0B;AACxBw6B,YAAM,GAAG/xC,cAAc,CAACD,KAAD,EAAQG,IAAR,EAAcC,KAAd,CAAvB4xC;;AACA,UAAIl/C,QAAQ,CAACg/C,QAAD,CAAZ,EAAwB;AACtB,cAAMI,cAAc,GAAGz/C,MAAM,CAAC2B,IAAP3B,CAAYq/C,QAAZr/C,EAAsB,CAAtBA,CAAvB;AACA,cAAMJ,KAAK,GAAGy/C,QAAQ,CAACI,cAAD,CAAtB;AACAD,cAAM,GAAGx6B,MAAM,CAACy6B,cAAD,CAANz6B,CAAuBrW,gBAAvBqW,CAAwCplB,KAAxColB,IAAiDiD,MAAjDjD,GAA0DsvB,MAAnEkL;AAHF,aAIO,IAAIH,QAAQ,KAAK,QAAjB,EAA2B;AAChCG,cAAM,GAAG,CAACjT,SAAS,CAAC1iB,MAAV0iB,GAAmBA,SAAS,CAAC3iB,GAA9B,IAAqC,CAArC,GAAyC3B,MAAzC,GAAkDqsB,MAA3DkL;AADK,aAEA;AACLA,cAAM,GAAGjB,cAAc,CAACx5B,KAAD,EAAQs6B,QAAR,EAAkB/K,MAAlB,CAAvBkL;AACD;;AACDn0B,cAAQ,GAAG1d,KAAK,GAAGD,IAAnB2d;AAXF,WAYO;AACL,UAAIhrB,QAAQ,CAACg/C,QAAD,CAAZ,EAAwB;AACtB,cAAMI,cAAc,GAAGz/C,MAAM,CAAC2B,IAAP3B,CAAYq/C,QAAZr/C,EAAsB,CAAtBA,CAAvB;AACA,cAAMJ,KAAK,GAAGy/C,QAAQ,CAACI,cAAD,CAAtB;AACAF,cAAM,GAAGv6B,MAAM,CAACy6B,cAAD,CAANz6B,CAAuBrW,gBAAvBqW,CAAwCplB,KAAxColB,IAAiD6B,KAAjD7B,GAAyDsvB,MAAlEiL;AAHF,aAIO,IAAIF,QAAQ,KAAK,QAAjB,EAA2B;AAChCE,cAAM,GAAG,CAAChT,SAAS,CAAC7+B,IAAV6+B,GAAiBA,SAAS,CAAC5+B,KAA5B,IAAqC,CAArC,GAAyCkZ,KAAzC,GAAiDytB,MAA1DiL;AADK,aAEA;AACLA,cAAM,GAAGhB,cAAc,CAACx5B,KAAD,EAAQs6B,QAAR,EAAkB/K,MAAlB,CAAvBiL;AACD;;AACDC,YAAM,GAAGhyC,cAAc,CAACD,KAAD,EAAQsc,MAAR,EAAgBD,GAAhB,CAAvB41B;AACAh3B,cAAQ,GAAG62B,QAAQ,KAAK,MAAbA,GAAsB,CAACj5C,OAAvBi5C,GAAiCj5C,OAA5CoiB;AACD;;AACD,WAAO;AAAC+2B,YAAD;AAASC,YAAT;AAAiBn0B,cAAjB;AAA2B7C;AAA3B,KAAP;AACD;;AACD,QAAMk3B,KAAN,SAAoBpF,OAApB,CAA4B;AAC1Bp5B,eAAW,CAACogB,GAAD,EAAM;AACf;AACA,WAAK5hC,EAAL,GAAU4hC,GAAG,CAAC5hC,EAAd;AACA,WAAKK,IAAL,GAAYuhC,GAAG,CAACvhC,IAAhB;AACA,WAAKiD,OAAL,GAAea,SAAf;AACA,WAAKogB,GAAL,GAAWqd,GAAG,CAACrd,GAAf;AACA,WAAKX,KAAL,GAAage,GAAG,CAAChe,KAAjB;AACA,WAAKsG,GAAL,GAAW/lB,SAAX;AACA,WAAKgmB,MAAL,GAAchmB,SAAd;AACA,WAAK6J,IAAL,GAAY7J,SAAZ;AACA,WAAK8J,KAAL,GAAa9J,SAAb;AACA,WAAKgjB,KAAL,GAAahjB,SAAb;AACA,WAAKokB,MAAL,GAAcpkB,SAAd;AACA,WAAK87C,QAAL,GAAgB;AACdjyC,YAAI,EAAE,CADQ;AAEdC,aAAK,EAAE,CAFO;AAGdic,WAAG,EAAE,CAHS;AAIdC,cAAM,EAAE;AAJM,OAAhB;AAMA,WAAKwB,QAAL,GAAgBxnB,SAAhB;AACA,WAAKi0B,SAAL,GAAiBj0B,SAAjB;AACA,WAAK+7C,UAAL,GAAkB/7C,SAAlB;AACA,WAAKg8C,aAAL,GAAqBh8C,SAArB;AACA,WAAKi8C,WAAL,GAAmBj8C,SAAnB;AACA,WAAKk8C,YAAL,GAAoBl8C,SAApB;AACA,WAAK0K,IAAL,GAAY1K,SAAZ;AACA,WAAKm8C,aAAL,GAAqBn8C,SAArB;AACA,WAAKqE,GAAL,GAAWrE,SAAX;AACA,WAAKsE,GAAL,GAAWtE,SAAX;AACA,WAAKo8C,MAAL,GAAcp8C,SAAd;AACA,WAAKgsC,KAAL,GAAa,EAAb;AACA,WAAKqQ,cAAL,GAAsB,IAAtB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACA,WAAK1Q,OAAL,GAAe,CAAf;AACA,WAAKoO,UAAL,GAAkB,CAAlB;AACA,WAAKuC,iBAAL,GAAyB,EAAzB;AACA,WAAK/M,WAAL,GAAmBzvC,SAAnB;AACA,WAAK0vC,SAAL,GAAiB1vC,SAAjB;AACA,WAAKy8C,cAAL,GAAsB,KAAtB;AACA,WAAKC,QAAL,GAAgB18C,SAAhB;AACA,WAAK28C,QAAL,GAAgB38C,SAAhB;AACA,WAAK48C,aAAL,GAAqB58C,SAArB;AACA,WAAK68C,aAAL,GAAqB78C,SAArB;AACA,WAAK88C,YAAL,GAAoB,CAApB;AACA,WAAKC,YAAL,GAAoB,CAApB;AACA,WAAKvR,MAAL,GAAc,EAAd;AACA,WAAKwR,iBAAL,GAAyB,KAAzB;AACA,WAAKrY,QAAL,GAAgB3kC,SAAhB;AACD;;AACDi9C,QAAI,CAAC99C,OAAD,EAAU;AACZ,WAAKA,OAAL,GAAeA,OAAO,CAACwtB,UAARxtB,CAAmB,KAAK8kB,UAAL,EAAnB9kB,CAAf;AACA,WAAKuL,IAAL,GAAYvL,OAAO,CAACuL,IAApB;AACA,WAAKiyC,QAAL,GAAgB,KAAK/tB,KAAL,CAAWzvB,OAAO,CAACkF,GAAnB,CAAhB;AACA,WAAKq4C,QAAL,GAAgB,KAAK9tB,KAAL,CAAWzvB,OAAO,CAACmF,GAAnB,CAAhB;AACA,WAAKu4C,aAAL,GAAqB,KAAKjuB,KAAL,CAAWzvB,OAAO,CAAC+9C,YAAnB,CAArB;AACA,WAAKN,aAAL,GAAqB,KAAKhuB,KAAL,CAAWzvB,OAAO,CAACg+C,YAAnB,CAArB;AACD;;AACDvuB,SAAK,CAACyU,GAAD,EAAM9kC,KAAN,EAAa;AAChB,aAAO8kC,GAAP;AACD;;AACDx4B,iBAAa,GAAG;AACd,UAAI;AAAC8xC,gBAAD;AAAWD,gBAAX;AAAqBG,qBAArB;AAAoCD;AAApC,UAAqD,IAAzD;AACAD,cAAQ,GAAG//C,eAAe,CAAC+/C,QAAD,EAAWjgD,MAAM,CAAC2F,iBAAlB,CAA1Bs6C;AACAD,cAAQ,GAAG9/C,eAAe,CAAC8/C,QAAD,EAAWhgD,MAAM,CAACklC,iBAAlB,CAA1B8a;AACAG,mBAAa,GAAGjgD,eAAe,CAACigD,aAAD,EAAgBngD,MAAM,CAAC2F,iBAAvB,CAA/Bw6C;AACAD,mBAAa,GAAGhgD,eAAe,CAACggD,aAAD,EAAgBlgD,MAAM,CAACklC,iBAAvB,CAA/Bgb;AACA,aAAO;AACLv4C,WAAG,EAAEzH,eAAe,CAAC+/C,QAAD,EAAWE,aAAX,CADf;AAELv4C,WAAG,EAAE1H,eAAe,CAAC8/C,QAAD,EAAWE,aAAX,CAFf;AAGLjyC,kBAAU,EAAElO,cAAc,CAACkgD,QAAD,CAHrB;AAIL/xC,kBAAU,EAAEnO,cAAc,CAACigD,QAAD;AAJrB,OAAP;AAMD;;AACD3U,aAAS,CAACnE,QAAD,EAAW;AAClB,UAAI;AAACv/B,WAAD;AAAMC,WAAN;AAAWqG,kBAAX;AAAuBC;AAAvB,UAAqC,KAAKC,aAAL,EAAzC;AACA,UAAIhI,KAAJ;;AACA,UAAI8H,UAAU,IAAIC,UAAlB,EAA8B;AAC5B,eAAO;AAACvG,aAAD;AAAMC;AAAN,SAAP;AACD;;AACD,YAAM84C,KAAK,GAAG,KAAK/a,uBAAL,EAAd;;AACA,WAAK,IAAIzkC,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAGi/C,KAAK,CAACr/C,MAA7B,EAAqCH,CAAC,GAAGO,IAAzC,EAA+C,EAAEP,CAAjD,EAAoD;AAClDiF,aAAK,GAAGu6C,KAAK,CAACx/C,CAAD,CAALw/C,CAAS7a,UAAT6a,CAAoBrV,SAApBqV,CAA8B,IAA9BA,EAAoCxZ,QAApCwZ,CAARv6C;;AACA,YAAI,CAAC8H,UAAL,EAAiB;AACftG,aAAG,GAAGpC,IAAI,CAACoC,GAALpC,CAASoC,GAATpC,EAAcY,KAAK,CAACwB,GAApBpC,CAANoC;AACD;;AACD,YAAI,CAACuG,UAAL,EAAiB;AACftG,aAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASqC,GAATrC,EAAcY,KAAK,CAACyB,GAApBrC,CAANqC;AACD;AACF;;AACDD,SAAG,GAAGuG,UAAU,IAAIvG,GAAG,GAAGC,GAApBsG,GAA0BtG,GAA1BsG,GAAgCvG,GAAtCA;AACAC,SAAG,GAAGqG,UAAU,IAAItG,GAAG,GAAGC,GAApBqG,GAA0BtG,GAA1BsG,GAAgCrG,GAAtCA;AACA,aAAO;AACLD,WAAG,EAAEzH,eAAe,CAACyH,GAAD,EAAMzH,eAAe,CAAC0H,GAAD,EAAMD,GAAN,CAArB,CADf;AAELC,WAAG,EAAE1H,eAAe,CAAC0H,GAAD,EAAM1H,eAAe,CAACyH,GAAD,EAAMC,GAAN,CAArB;AAFf,OAAP;AAID;;AACD+4C,cAAU,GAAG;AACX,aAAO;AACLxzC,YAAI,EAAE,KAAKoyC,WAAL,IAAoB,CADrB;AAELl2B,WAAG,EAAE,KAAKg2B,UAAL,IAAmB,CAFnB;AAGLjyC,aAAK,EAAE,KAAKoyC,YAAL,IAAqB,CAHvB;AAILl2B,cAAM,EAAE,KAAKg2B,aAAL,IAAsB;AAJzB,OAAP;AAMD;;AACDsB,YAAQ,GAAG;AACT,aAAO,KAAKtR,KAAZ;AACD;;AACD1E,aAAS,GAAG;AACV,YAAM5kB,IAAI,GAAG,KAAKjD,KAAL,CAAWiD,IAAxB;AACA,aAAO,KAAKvjB,OAAL,CAAakoC,MAAb,KAAwB,KAAKqG,YAAL,KAAsBhrB,IAAI,CAAC66B,OAA3B,GAAqC76B,IAAI,CAAC86B,OAAlE,KAA8E96B,IAAI,CAAC2kB,MAAnF,IAA6F,EAApG;AACD;;AACDoW,gBAAY,GAAG;AACb,WAAKjS,MAAL,GAAc,EAAd;AACA,WAAKwR,iBAAL,GAAyB,KAAzB;AACD;;AACDU,gBAAY,GAAG;AACbtgD,cAAQ,CAAC,KAAK+B,OAAL,CAAau+C,YAAd,EAA4B,CAAC,IAAD,CAA5B,CAARtgD;AACD;;AACDihC,UAAM,CAAC7W,QAAD,EAAWyM,SAAX,EAAsBY,OAAtB,EAA+B;AACnC,YAAM;AAACxK,mBAAD;AAAcD,aAAd;AAAqB4hB,aAAK,EAAEiN;AAA5B,UAAwC,KAAK95C,OAAnD;AACA,YAAMw+C,UAAU,GAAG1E,QAAQ,CAAC0E,UAA5B;AACA,WAAKD,YAAL;AACA,WAAKl2B,QAAL,GAAgBA,QAAhB;AACA,WAAKyM,SAAL,GAAiBA,SAAjB;AACA,WAAK6nB,QAAL,GAAgBjnB,OAAO,GAAG14B,MAAM,CAACsP,MAAPtP,CAAc;AACtC0N,YAAI,EAAE,CADgC;AAEtCC,aAAK,EAAE,CAF+B;AAGtCic,WAAG,EAAE,CAHiC;AAItCC,cAAM,EAAE;AAJ8B,OAAd7pB,EAKvB04B,OALuB14B,CAA1B;AAMA,WAAK6vC,KAAL,GAAa,IAAb;AACA,WAAKuQ,WAAL,GAAmB,IAAnB;AACA,WAAKF,cAAL,GAAsB,IAAtB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACA,WAAKsB,mBAAL;AACA,WAAKC,aAAL;AACA,WAAKC,kBAAL;AACA,WAAK7D,UAAL,GAAkB,KAAKvM,YAAL,KACd,KAAK1qB,KAAL,GAAa6R,OAAO,CAAChrB,IAArB,GAA4BgrB,OAAO,CAAC/qB,KADtB,GAEd,KAAKsa,MAAL,GAAcyQ,OAAO,CAAC9O,GAAtB,GAA4B8O,OAAO,CAAC7O,MAFxC;;AAGA,UAAI,CAAC,KAAKg3B,iBAAV,EAA6B;AAC3B,aAAKe,gBAAL;AACA,aAAKC,mBAAL;AACA,aAAKC,eAAL;AACA,aAAK7B,MAAL,GAAclyB,SAAS,CAAC,IAAD,EAAOE,KAAP,EAAcC,WAAd,CAAvB;AACA,aAAK2yB,iBAAL,GAAyB,IAAzB;AACD;;AACD,WAAKkB,gBAAL;AACA,WAAKlS,KAAL,GAAa,KAAKmS,UAAL,MAAqB,EAAlC;AACA,WAAKC,eAAL;AACA,YAAMC,eAAe,GAAGV,UAAU,GAAG,KAAK3R,KAAL,CAAWjuC,MAAhD;;AACA,WAAKugD,qBAAL,CAA2BD,eAAe,GAAG1D,MAAM,CAAC,KAAK3O,KAAN,EAAa2R,UAAb,CAAT,GAAoC,KAAK3R,KAAnF;;AACA,WAAKvM,SAAL;AACA,WAAK8e,4BAAL;AACA,WAAKC,sBAAL;AACA,WAAKC,2BAAL;;AACA,UAAIxF,QAAQ,CAAC/C,OAAT+C,KAAqBA,QAAQ,CAACT,QAATS,IAAqBA,QAAQ,CAACx6C,MAATw6C,KAAoB,MAA9DA,CAAJ,EAA2E;AACzE,aAAKjN,KAAL,GAAawM,QAAQ,CAAC,IAAD,EAAO,KAAKxM,KAAZ,CAArB;AACA,aAAKuQ,WAAL,GAAmB,IAAnB;AACA,aAAKmC,aAAL;AACD;;AACD,UAAIL,eAAJ,EAAqB;AACnB,aAAKC,qBAAL,CAA2B,KAAKtS,KAAhC;AACD;;AACD,WAAK2S,SAAL;AACA,WAAKC,GAAL;AACA,WAAKC,QAAL;AACA,WAAKC,WAAL;AACD;;AACDrf,aAAS,GAAG;AACV,UAAIsf,aAAa,GAAG,KAAK5/C,OAAL,CAAaxB,OAAjC;AACA,UAAIoyC,UAAJ,EAAgBE,QAAhB;;AACA,UAAI,KAAKvC,YAAL,EAAJ,EAAyB;AACvBqC,kBAAU,GAAG,KAAKlmC,IAAlBkmC;AACAE,gBAAQ,GAAG,KAAKnmC,KAAhBmmC;AAFF,aAGO;AACLF,kBAAU,GAAG,KAAKhqB,GAAlBgqB;AACAE,gBAAQ,GAAG,KAAKjqB,MAAhBiqB;AACA8O,qBAAa,GAAG,CAACA,aAAjBA;AACD;;AACD,WAAKtP,WAAL,GAAmBM,UAAnB;AACA,WAAKL,SAAL,GAAiBO,QAAjB;AACA,WAAKwM,cAAL,GAAsBsC,aAAtB;AACA,WAAKlT,OAAL,GAAeoE,QAAQ,GAAGF,UAA1B;AACA,WAAKiP,cAAL,GAAsB,KAAK7/C,OAAL,CAAa8/C,aAAnC;AACD;;AACDH,eAAW,GAAG;AACZ1hD,cAAQ,CAAC,KAAK+B,OAAL,CAAa2/C,WAAd,EAA2B,CAAC,IAAD,CAA3B,CAAR1hD;AACD;;AACDwgD,uBAAmB,GAAG;AACpBxgD,cAAQ,CAAC,KAAK+B,OAAL,CAAay+C,mBAAd,EAAmC,CAAC,IAAD,CAAnC,CAARxgD;AACD;;AACDygD,iBAAa,GAAG;AACd,UAAI,KAAKnQ,YAAL,EAAJ,EAAyB;AACvB,aAAK1qB,KAAL,GAAa,KAAKwE,QAAlB;AACA,aAAK3d,IAAL,GAAY,CAAZ;AACA,aAAKC,KAAL,GAAa,KAAKkZ,KAAlB;AAHF,aAIO;AACL,aAAKoB,MAAL,GAAc,KAAK6P,SAAnB;AACA,aAAKlO,GAAL,GAAW,CAAX;AACA,aAAKC,MAAL,GAAc,KAAK5B,MAAnB;AACD;;AACD,WAAK63B,WAAL,GAAmB,CAAnB;AACA,WAAKF,UAAL,GAAkB,CAAlB;AACA,WAAKG,YAAL,GAAoB,CAApB;AACA,WAAKF,aAAL,GAAqB,CAArB;AACD;;AACD8B,sBAAkB,GAAG;AACnB1gD,cAAQ,CAAC,KAAK+B,OAAL,CAAa2+C,kBAAd,EAAkC,CAAC,IAAD,CAAlC,CAAR1gD;AACD;;AACD8hD,cAAU,CAACx9B,IAAD,EAAO;AACf,WAAKjC,KAAL,CAAW0/B,aAAX,CAAyBz9B,IAAzB,EAA+B,KAAKuC,UAAL,EAA/B;AACA7mB,cAAQ,CAAC,KAAK+B,OAAL,CAAauiB,IAAb,CAAD,EAAqB,CAAC,IAAD,CAArB,CAARtkB;AACD;;AACD2gD,oBAAgB,GAAG;AACjB,WAAKmB,UAAL,CAAgB,kBAAhB;AACD;;AACDlB,uBAAmB,GAAG,CAAE;;AACxBC,mBAAe,GAAG;AAChB,WAAKiB,UAAL,CAAgB,iBAAhB;AACD;;AACDhB,oBAAgB,GAAG;AACjB,WAAKgB,UAAL,CAAgB,kBAAhB;AACD;;AACDf,cAAU,GAAG;AACX,aAAO,EAAP;AACD;;AACDC,mBAAe,GAAG;AAChB,WAAKc,UAAL,CAAgB,iBAAhB;AACD;;AACDE,+BAA2B,GAAG;AAC5BhiD,cAAQ,CAAC,KAAK+B,OAAL,CAAaigD,2BAAd,EAA2C,CAAC,IAAD,CAA3C,CAARhiD;AACD;;AACDiiD,sBAAkB,CAACrT,KAAD,EAAQ;AACxB,YAAMiN,QAAQ,GAAG,KAAK95C,OAAL,CAAa6sC,KAA9B;AACA,UAAIpuC,CAAJ,EAAOO,IAAP,EAAak+B,IAAb;;AACA,WAAKz+B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG6tC,KAAK,CAACjuC,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2CP,CAAC,EAA5C,EAAgD;AAC9Cy+B,YAAI,GAAG2P,KAAK,CAACpuC,CAAD,CAAZy+B;AACAA,YAAI,CAACkM,KAALlM,GAAaj/B,QAAQ,CAAC67C,QAAQ,CAAC77C,QAAV,EAAoB,CAACi/B,IAAI,CAACtgC,KAAN,EAAa6B,CAAb,EAAgBouC,KAAhB,CAApB,EAA4C,IAA5C,CAArB3P;AACD;AACF;;AACDijB,8BAA0B,GAAG;AAC3BliD,cAAQ,CAAC,KAAK+B,OAAL,CAAamgD,0BAAd,EAA0C,CAAC,IAAD,CAA1C,CAARliD;AACD;;AACDmhD,gCAA4B,GAAG;AAC7BnhD,cAAQ,CAAC,KAAK+B,OAAL,CAAao/C,4BAAd,EAA4C,CAAC,IAAD,CAA5C,CAARnhD;AACD;;AACDohD,0BAAsB,GAAG;AACvB,YAAMr/C,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM85C,QAAQ,GAAG95C,OAAO,CAAC6sC,KAAzB;AACA,YAAMuT,QAAQ,GAAG,KAAKvT,KAAL,CAAWjuC,MAA5B;AACA,YAAMo6C,WAAW,GAAGc,QAAQ,CAACd,WAATc,IAAwB,CAA5C;AACA,YAAMb,WAAW,GAAGa,QAAQ,CAACb,WAA7B;AACA,UAAI+D,aAAa,GAAGhE,WAApB;AACA,UAAIH,SAAJ,EAAe/jB,SAAf,EAA0BurB,gBAA1B;;AACA,UAAI,CAAC,KAAKC,UAAL,EAAD,IAAsB,CAACxG,QAAQ,CAAC/C,OAAhC,IAA2CiC,WAAW,IAAIC,WAA1D,IAAyEmH,QAAQ,IAAI,CAArF,IAA0F,CAAC,KAAK7R,YAAL,EAA/F,EAAoH;AAClH,aAAKyO,aAAL,GAAqBhE,WAArB;AACA;AACD;;AACD,YAAMuH,UAAU,GAAG,KAAKC,cAAL,EAAnB;;AACA,YAAMC,aAAa,GAAGF,UAAU,CAACG,MAAXH,CAAkB18B,KAAxC;AACA,YAAM88B,cAAc,GAAGJ,UAAU,CAACK,OAAXL,CAAmBt7B,MAA1C;;AACA,YAAMoD,QAAQ,GAAGphB,WAAW,CAAC,KAAKqZ,KAAL,CAAWuD,KAAX,GAAmB48B,aAApB,EAAmC,CAAnC,EAAsC,KAAKp4B,QAA3C,CAA5B;;AACAwwB,eAAS,GAAG74C,OAAO,CAACsxC,MAARtxC,GAAiB,KAAKqoB,QAAL,GAAgB+3B,QAAjCpgD,GAA4CqoB,QAAQ,IAAI+3B,QAAQ,GAAG,CAAf,CAAhEvH;;AACA,UAAI4H,aAAa,GAAG,CAAhBA,GAAoB5H,SAAxB,EAAmC;AACjCA,iBAAS,GAAGxwB,QAAQ,IAAI+3B,QAAQ,IAAIpgD,OAAO,CAACsxC,MAARtxC,GAAiB,GAAjBA,GAAuB,CAA3B,CAAZ,CAApB64C;AACA/jB,iBAAS,GAAG,KAAKA,SAAL,GAAiBknB,iBAAiB,CAACh8C,OAAO,CAACuxC,IAAT,CAAlC,GACZuI,QAAQ,CAACf,OADG,GACOkD,cAAc,CAACj8C,OAAO,CAAC2xC,KAAT,EAAgB,KAAKrxB,KAAL,CAAWtgB,OAAX,CAAmB2gB,IAAnC,CADjCmU;AAEAurB,wBAAgB,GAAGv9C,IAAI,CAACuB,IAALvB,CAAU29C,aAAa,GAAGA,aAAhBA,GAAgCE,cAAc,GAAGA,cAA3D79C,CAAnBu9C;AACArD,qBAAa,GAAG13C,SAAS,CAACxC,IAAI,CAACoC,GAALpC,CACxBA,IAAI,CAAC+9C,IAAL/9C,CAAUmE,WAAW,CAAC,CAACs5C,UAAU,CAACK,OAAXL,CAAmBt7B,MAAnBs7B,GAA4B,CAA7B,IAAkC1H,SAAnC,EAA8C,CAAC,CAA/C,EAAkD,CAAlD,CAArB/1C,CADwBA,EAExBA,IAAI,CAAC+9C,IAAL/9C,CAAUmE,WAAW,CAAC6tB,SAAS,GAAGurB,gBAAb,EAA+B,CAAC,CAAhC,EAAmC,CAAnC,CAArBv9C,IAA8DA,IAAI,CAAC+9C,IAAL/9C,CAAUmE,WAAW,CAAC05C,cAAc,GAAGN,gBAAlB,EAAoC,CAAC,CAArC,EAAwC,CAAxC,CAArBv9C,CAFtCA,CAAD,CAAzBk6C;AAIAA,qBAAa,GAAGl6C,IAAI,CAACqC,GAALrC,CAASk2C,WAATl2C,EAAsBA,IAAI,CAACoC,GAALpC,CAASm2C,WAATn2C,EAAsBk6C,aAAtBl6C,CAAtBA,CAAhBk6C;AACD;;AACD,WAAKA,aAAL,GAAqBA,aAArB;AACD;;AACDsC,+BAA2B,GAAG;AAC5BrhD,cAAQ,CAAC,KAAK+B,OAAL,CAAas/C,2BAAd,EAA2C,CAAC,IAAD,CAA3C,CAARrhD;AACD;;AACDshD,iBAAa,GAAG,CAAE;;AAClBC,aAAS,GAAG;AACVvhD,cAAQ,CAAC,KAAK+B,OAAL,CAAaw/C,SAAd,EAAyB,CAAC,IAAD,CAAzB,CAARvhD;AACD;;AACDwhD,OAAG,GAAG;AACJ,YAAMtJ,OAAO,GAAG;AACdtyB,aAAK,EAAE,CADO;AAEdoB,cAAM,EAAE;AAFM,OAAhB;AAIA,YAAM;AAAC3E,aAAD;AAAQtgB,eAAO,EAAE;AAAC6sC,eAAK,EAAEiN,QAAR;AAAkBnI,eAAK,EAAEmP,SAAzB;AAAoCvP,cAAI,EAAEwP;AAA1C;AAAjB,UAAwE,IAA9E;;AACA,YAAMhK,OAAO,GAAG,KAAKuJ,UAAL,EAAhB;;AACA,YAAM/R,YAAY,GAAG,KAAKA,YAAL,EAArB;;AACA,UAAIwI,OAAJ,EAAa;AACX,cAAMiK,WAAW,GAAG/E,cAAc,CAAC6E,SAAD,EAAYxgC,KAAK,CAACtgB,OAANsgB,CAAcK,IAA1B,CAAlC;;AACA,YAAI4tB,YAAJ,EAAkB;AAChB4H,iBAAO,CAACtyB,KAARsyB,GAAgB,KAAK9tB,QAArB8tB;AACAA,iBAAO,CAAClxB,MAARkxB,GAAiB6F,iBAAiB,CAAC+E,QAAD,CAAjB/E,GAA8BgF,WAA/C7K;AAFF,eAGO;AACLA,iBAAO,CAAClxB,MAARkxB,GAAiB,KAAKrhB,SAAtBqhB;AACAA,iBAAO,CAACtyB,KAARsyB,GAAgB6F,iBAAiB,CAAC+E,QAAD,CAAjB/E,GAA8BgF,WAA9C7K;AACD;;AACD,YAAI2D,QAAQ,CAAC/C,OAAT+C,IAAoB,KAAKjN,KAAL,CAAWjuC,MAAnC,EAA2C;AACzC,gBAAM;AAAC07C,iBAAD;AAAQ3yC,gBAAR;AAAc+4C,kBAAd;AAAsBE;AAAtB,cAAiC,KAAKJ,cAAL,EAAvC;;AACA,gBAAMS,WAAW,GAAGnH,QAAQ,CAACf,OAATe,GAAmB,CAAvC;AACA,gBAAMoH,YAAY,GAAG97C,SAAS,CAAC,KAAK43C,aAAN,CAA9B;AACA,gBAAMrvC,GAAG,GAAG7K,IAAI,CAAC6K,GAAL7K,CAASo+C,YAATp+C,CAAZ;AACA,gBAAM4J,GAAG,GAAG5J,IAAI,CAAC4J,GAAL5J,CAASo+C,YAATp+C,CAAZ;;AACA,cAAIyrC,YAAJ,EAAkB;AAChB,kBAAM4S,WAAW,GAAGrH,QAAQ,CAACZ,MAATY,GAAkB,CAAlBA,GAAsBptC,GAAG,GAAGg0C,MAAM,CAAC78B,KAAbnX,GAAqBiB,GAAG,GAAGizC,OAAO,CAAC37B,MAA7E;AACAkxB,mBAAO,CAAClxB,MAARkxB,GAAiBrzC,IAAI,CAACoC,GAALpC,CAAS,KAAKgyB,SAAdhyB,EAAyBqzC,OAAO,CAAClxB,MAARkxB,GAAiBgL,WAAjBhL,GAA+B8K,WAAxDn+C,CAAjBqzC;AAFF,iBAGO;AACL,kBAAMiL,UAAU,GAAGtH,QAAQ,CAACZ,MAATY,GAAkB,CAAlBA,GAAsBnsC,GAAG,GAAG+yC,MAAM,CAAC78B,KAAblW,GAAqBjB,GAAG,GAAGk0C,OAAO,CAAC37B,MAA5E;AACAkxB,mBAAO,CAACtyB,KAARsyB,GAAgBrzC,IAAI,CAACoC,GAALpC,CAAS,KAAKulB,QAAdvlB,EAAwBqzC,OAAO,CAACtyB,KAARsyB,GAAgBiL,UAAhBjL,GAA6B8K,WAArDn+C,CAAhBqzC;AACD;;AACD,eAAKkL,iBAAL,CAAuB/G,KAAvB,EAA8B3yC,IAA9B,EAAoC+E,GAApC,EAAyCiB,GAAzC;AACD;AACF;;AACD,WAAK2zC,cAAL;;AACA,UAAI/S,YAAJ,EAAkB;AAChB,aAAK1qB,KAAL,GAAa,KAAK6oB,OAAL,GAAepsB,KAAK,CAACuD,KAANvD,GAAc,KAAKq8B,QAAL,CAAcjyC,IAA5B4V,GAAmC,KAAKq8B,QAAL,CAAchyC,KAA7E;AACA,aAAKsa,MAAL,GAAckxB,OAAO,CAAClxB,MAAtB;AAFF,aAGO;AACL,aAAKpB,KAAL,GAAasyB,OAAO,CAACtyB,KAArB;AACA,aAAKoB,MAAL,GAAc,KAAKynB,OAAL,GAAepsB,KAAK,CAAC2E,MAAN3E,GAAe,KAAKq8B,QAAL,CAAc/1B,GAA7BtG,GAAmC,KAAKq8B,QAAL,CAAc91B,MAA9E;AACD;AACF;;AACDw6B,qBAAiB,CAAC/G,KAAD,EAAQ3yC,IAAR,EAAc+E,GAAd,EAAmBiB,GAAnB,EAAwB;AACvC,YAAM;AAACk/B,aAAK,EAAE;AAACtiC,eAAD;AAAQwuC;AAAR,SAAR;AAA0BsD;AAA1B,UAAsC,KAAKr8C,OAAjD;AACA,YAAMuhD,SAAS,GAAG,KAAKvE,aAAL,KAAuB,CAAzC;AACA,YAAMwE,gBAAgB,GAAGnF,QAAQ,KAAK,KAAbA,IAAsB,KAAK9wC,IAAL,KAAc,GAA7D;;AACA,UAAI,KAAKgjC,YAAL,EAAJ,EAAyB;AACvB,cAAMkT,UAAU,GAAG,KAAK3U,eAAL,CAAqB,CAArB,IAA0B,KAAKpiC,IAAlD;AACA,cAAMg3C,WAAW,GAAG,KAAK/2C,KAAL,GAAa,KAAKmiC,eAAL,CAAqB,KAAKD,KAAL,CAAWjuC,MAAX,GAAoB,CAAzC,CAAjC;AACA,YAAIk+C,WAAW,GAAG,CAAlB;AACA,YAAIC,YAAY,GAAG,CAAnB;;AACA,YAAIwE,SAAJ,EAAe;AACb,cAAIC,gBAAJ,EAAsB;AACpB1E,uBAAW,GAAGnvC,GAAG,GAAG2sC,KAAK,CAACz2B,KAA1Bi5B;AACAC,wBAAY,GAAGrwC,GAAG,GAAG/E,IAAI,CAACsd,MAA1B83B;AAFF,iBAGO;AACLD,uBAAW,GAAGpwC,GAAG,GAAG4tC,KAAK,CAACr1B,MAA1B63B;AACAC,wBAAY,GAAGpvC,GAAG,GAAGhG,IAAI,CAACkc,KAA1Bk5B;AACD;AAPH,eAQO,IAAIxyC,KAAK,KAAK,OAAd,EAAuB;AAC5BwyC,sBAAY,GAAGp1C,IAAI,CAACkc,KAApBk5B;AADK,eAEA,IAAIxyC,KAAK,KAAK,KAAd,EAAqB;AAC1BuyC,qBAAW,GAAGxC,KAAK,CAACz2B,KAApBi5B;AADK,eAEA,IAAIvyC,KAAK,KAAK,OAAd,EAAuB;AAC5BuyC,qBAAW,GAAGxC,KAAK,CAACz2B,KAANy2B,GAAc,CAA5BwC;AACAC,sBAAY,GAAGp1C,IAAI,CAACkc,KAALlc,GAAa,CAA5Bo1C;AACD;;AACD,aAAKD,WAAL,GAAmBh6C,IAAI,CAACqC,GAALrC,CAAS,CAACg6C,WAAW,GAAG2E,UAAd3E,GAA2B/D,OAA5B,IAAuC,KAAKl1B,KAA5C,IAAqD,KAAKA,KAAL,GAAa49B,UAAlE,CAAT3+C,EAAwF,CAAxFA,CAAnB;AACA,aAAKi6C,YAAL,GAAoBj6C,IAAI,CAACqC,GAALrC,CAAS,CAACi6C,YAAY,GAAG2E,WAAf3E,GAA6BhE,OAA9B,IAAyC,KAAKl1B,KAA9C,IAAuD,KAAKA,KAAL,GAAa69B,WAApE,CAAT5+C,EAA2F,CAA3FA,CAApB;AAtBF,aAuBO;AACL,YAAI85C,UAAU,GAAGj1C,IAAI,CAACsd,MAALtd,GAAc,CAA/B;AACA,YAAIk1C,aAAa,GAAGvC,KAAK,CAACr1B,MAANq1B,GAAe,CAAnC;;AACA,YAAI/vC,KAAK,KAAK,OAAd,EAAuB;AACrBqyC,oBAAU,GAAG,CAAbA;AACAC,uBAAa,GAAGvC,KAAK,CAACr1B,MAAtB43B;AAFF,eAGO,IAAItyC,KAAK,KAAK,KAAd,EAAqB;AAC1BqyC,oBAAU,GAAGj1C,IAAI,CAACsd,MAAlB23B;AACAC,uBAAa,GAAG,CAAhBA;AACD;;AACD,aAAKD,UAAL,GAAkBA,UAAU,GAAG7D,OAA/B;AACA,aAAK8D,aAAL,GAAqBA,aAAa,GAAG9D,OAArC;AACD;AACF;;AACDuI,kBAAc,GAAG;AACf,UAAI,KAAK3E,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAcjyC,IAAd,GAAqB5H,IAAI,CAACqC,GAALrC,CAAS,KAAKg6C,WAAdh6C,EAA2B,KAAK65C,QAAL,CAAcjyC,IAAzC5H,CAArB;AACA,aAAK65C,QAAL,CAAc/1B,GAAd,GAAoB9jB,IAAI,CAACqC,GAALrC,CAAS,KAAK85C,UAAd95C,EAA0B,KAAK65C,QAAL,CAAc/1B,GAAxC9jB,CAApB;AACA,aAAK65C,QAAL,CAAchyC,KAAd,GAAsB7H,IAAI,CAACqC,GAALrC,CAAS,KAAKi6C,YAAdj6C,EAA4B,KAAK65C,QAAL,CAAchyC,KAA1C7H,CAAtB;AACA,aAAK65C,QAAL,CAAc91B,MAAd,GAAuB/jB,IAAI,CAACqC,GAALrC,CAAS,KAAK+5C,aAAd/5C,EAA6B,KAAK65C,QAAL,CAAc91B,MAA3C/jB,CAAvB;AACD;AACF;;AACD48C,YAAQ,GAAG;AACTzhD,cAAQ,CAAC,KAAK+B,OAAL,CAAa0/C,QAAd,EAAwB,CAAC,IAAD,CAAxB,CAARzhD;AACD;;AACDswC,gBAAY,GAAG;AACb,YAAM;AAAChjC,YAAD;AAAO8wC;AAAP,UAAmB,KAAKr8C,OAA9B;AACA,aAAOq8C,QAAQ,KAAK,KAAbA,IAAsBA,QAAQ,KAAK,QAAnCA,IAA+C9wC,IAAI,KAAK,GAA/D;AACD;;AACDo2C,cAAU,GAAG;AACX,aAAO,KAAK3hD,OAAL,CAAa4hD,QAApB;AACD;;AACDzC,yBAAqB,CAACtS,KAAD,EAAQ;AAC3B,WAAKoT,2BAAL;AACA,WAAKC,kBAAL,CAAwBrT,KAAxB;AACA,UAAIpuC,CAAJ,EAAOO,IAAP;;AACA,WAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG6tC,KAAK,CAACjuC,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2CP,CAAC,EAA5C,EAAgD;AAC9C,YAAI9B,aAAa,CAACkwC,KAAK,CAACpuC,CAAD,CAALouC,CAASzD,KAAV,CAAjB,EAAmC;AACjCyD,eAAK,CAAC/jC,MAAN+jC,CAAapuC,CAAbouC,EAAgB,CAAhBA;AACA7tC,cAAI;AACJP,WAAC;AACF;AACF;;AACD,WAAK0hD,0BAAL;AACD;;AACDK,kBAAc,GAAG;AACf,UAAID,UAAU,GAAG,KAAKnD,WAAtB;;AACA,UAAI,CAACmD,UAAL,EAAiB;AACf,cAAM/B,UAAU,GAAG,KAAKx+C,OAAL,CAAa6sC,KAAb,CAAmB2R,UAAtC;AACA,YAAI3R,KAAK,GAAG,KAAKA,KAAjB;;AACA,YAAI2R,UAAU,GAAG3R,KAAK,CAACjuC,MAAvB,EAA+B;AAC7BiuC,eAAK,GAAG2O,MAAM,CAAC3O,KAAD,EAAQ2R,UAAR,CAAd3R;AACD;;AACD,aAAKuQ,WAAL,GAAmBmD,UAAU,GAAG,KAAKsB,kBAAL,CAAwBhV,KAAxB,EAA+BA,KAAK,CAACjuC,MAArC,CAAhC;AACD;;AACD,aAAO2hD,UAAP;AACD;;AACDsB,sBAAkB,CAAChV,KAAD,EAAQjuC,MAAR,EAAgB;AAChC,YAAM;AAACqiB,WAAD;AAAMo8B,yBAAiB,EAAEtB;AAAzB,UAAmC,IAAzC;AACA,YAAM+F,MAAM,GAAG,EAAf;AACA,YAAMC,OAAO,GAAG,EAAhB;AACA,UAAIC,eAAe,GAAG,CAAtB;AACA,UAAIC,gBAAgB,GAAG,CAAvB;AACA,UAAIxjD,CAAJ,EAAOie,CAAP,EAAUyH,IAAV,EAAgBilB,KAAhB,EAAuB8Y,QAAvB,EAAiC74C,UAAjC,EAA6C2a,KAA7C,EAAoDlD,UAApD,EAAgE+C,KAAhE,EAAuEoB,MAAvE,EAA+Ek9B,WAA/E;;AACA,WAAK1jD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGG,MAAhB,EAAwB,EAAEH,CAA1B,EAA6B;AAC3B2qC,aAAK,GAAGyD,KAAK,CAACpuC,CAAD,CAALouC,CAASzD,KAAjBA;AACA8Y,gBAAQ,GAAG,KAAKE,uBAAL,CAA6B3jD,CAA7B,CAAXyjD;AACAjhC,WAAG,CAACN,IAAJM,GAAW5X,UAAU,GAAG64C,QAAQ,CAACx+B,MAAjCzC;AACA+C,aAAK,GAAG+3B,MAAM,CAAC1yC,UAAD,CAAN0yC,GAAqBA,MAAM,CAAC1yC,UAAD,CAAN0yC,IAAsB;AAACx4B,cAAI,EAAE,EAAP;AAAWC,YAAE,EAAE;AAAf,SAAnDQ;AACAlD,kBAAU,GAAGohC,QAAQ,CAACphC,UAAtBA;AACA+C,aAAK,GAAGoB,MAAM,GAAG,CAAjBpB;;AACA,YAAI,CAAClnB,aAAa,CAACysC,KAAD,CAAd,IAAyB,CAACvsC,OAAO,CAACusC,KAAD,CAArC,EAA8C;AAC5CvlB,eAAK,GAAGP,YAAY,CAACrC,GAAD,EAAM+C,KAAK,CAACT,IAAZ,EAAkBS,KAAK,CAACR,EAAxB,EAA4BK,KAA5B,EAAmCulB,KAAnC,CAApBvlB;AACAoB,gBAAM,GAAGnE,UAATmE;AAFF,eAGO,IAAIpoB,OAAO,CAACusC,KAAD,CAAX,EAAoB;AACzB,eAAK1sB,CAAC,GAAG,CAAJA,EAAOyH,IAAI,GAAGilB,KAAK,CAACxqC,MAAzB,EAAiC8d,CAAC,GAAGyH,IAArC,EAA2C,EAAEzH,CAA7C,EAAgD;AAC9CylC,uBAAW,GAAG/Y,KAAK,CAAC1sB,CAAD,CAAnBylC;;AACA,gBAAI,CAACxlD,aAAa,CAACwlD,WAAD,CAAd,IAA+B,CAACtlD,OAAO,CAACslD,WAAD,CAA3C,EAA0D;AACxDt+B,mBAAK,GAAGP,YAAY,CAACrC,GAAD,EAAM+C,KAAK,CAACT,IAAZ,EAAkBS,KAAK,CAACR,EAAxB,EAA4BK,KAA5B,EAAmCs+B,WAAnC,CAApBt+B;AACAoB,oBAAM,IAAInE,UAAVmE;AACD;AACF;AACF;;AACD68B,cAAM,CAAChgD,IAAPggD,CAAYj+B,KAAZi+B;AACAC,eAAO,CAACjgD,IAARigD,CAAa98B,MAAb88B;AACAC,uBAAe,GAAGl/C,IAAI,CAACqC,GAALrC,CAAS+gB,KAAT/gB,EAAgBk/C,eAAhBl/C,CAAlBk/C;AACAC,wBAAgB,GAAGn/C,IAAI,CAACqC,GAALrC,CAASmiB,MAATniB,EAAiBm/C,gBAAjBn/C,CAAnBm/C;AACD;;AACDh+B,oBAAc,CAAC83B,MAAD,EAASn9C,MAAT,CAAdqlB;AACA,YAAMy8B,MAAM,GAAGoB,MAAM,CAAChiD,OAAPgiD,CAAeE,eAAfF,CAAf;AACA,YAAMlB,OAAO,GAAGmB,OAAO,CAACjiD,OAARiiD,CAAgBE,gBAAhBF,CAAhB;;AACA,YAAMM,OAAO,GAAIC,GAAD,KAAU;AAACz+B,aAAK,EAAEi+B,MAAM,CAACQ,GAAD,CAANR,IAAe,CAAvB;AAA0B78B,cAAM,EAAE88B,OAAO,CAACO,GAAD,CAAPP,IAAgB;AAAlD,OAAV,CAAhB;;AACA,aAAO;AACLzH,aAAK,EAAE+H,OAAO,CAAC,CAAD,CADT;AAEL16C,YAAI,EAAE06C,OAAO,CAACzjD,MAAM,GAAG,CAAV,CAFR;AAGL8hD,cAAM,EAAE2B,OAAO,CAAC3B,MAAD,CAHV;AAILE,eAAO,EAAEyB,OAAO,CAACzB,OAAD,CAJX;AAKLkB,cALK;AAMLC;AANK,OAAP;AAQD;;AACD1Y,oBAAgB,CAACzsC,KAAD,EAAQ;AACtB,aAAOA,KAAP;AACD;;AACD+O,oBAAgB,CAAC/O,KAAD,EAAQwC,KAAR,EAAe;AAC7B,aAAOupC,GAAP;AACD;;AACD4Z,oBAAgB,CAAC99B,KAAD,EAAQ,CAAE;;AAC1BqoB,mBAAe,CAAC1tC,KAAD,EAAQ;AACrB,YAAMytC,KAAK,GAAG,KAAKA,KAAnB;;AACA,UAAIztC,KAAK,GAAG,CAARA,IAAaA,KAAK,GAAGytC,KAAK,CAACjuC,MAANiuC,GAAe,CAAxC,EAA2C;AACzC,eAAO,IAAP;AACD;;AACD,aAAO,KAAKlhC,gBAAL,CAAsBkhC,KAAK,CAACztC,KAAD,CAALytC,CAAajwC,KAAnC,CAAP;AACD;;AACDi0C,sBAAkB,CAAC2R,OAAD,EAAU;AAC1B,UAAI,KAAKlF,cAAT,EAAyB;AACvBkF,eAAO,GAAG,IAAIA,OAAdA;AACD;;AACD,YAAM/9B,KAAK,GAAG,KAAK6rB,WAAL,GAAmBkS,OAAO,GAAG,KAAK9V,OAAhD;AACA,aAAOxlC,WAAW,CAAC,KAAK24C,cAAL,GAAsBr7B,WAAW,CAAC,KAAKlE,KAAN,EAAamE,KAAb,EAAoB,CAApB,CAAjC,GAA0DA,KAA3D,CAAlB;AACD;;AACDg+B,sBAAkB,CAACh+B,KAAD,EAAQ;AACxB,YAAM+9B,OAAO,GAAG,CAAC/9B,KAAK,GAAG,KAAK6rB,WAAd,IAA6B,KAAK5D,OAAlD;AACA,aAAO,KAAK4Q,cAAL,GAAsB,IAAIkF,OAA1B,GAAoCA,OAA3C;AACD;;AACD/S,gBAAY,GAAG;AACb,aAAO,KAAK9jC,gBAAL,CAAsB,KAAK+2C,YAAL,EAAtB,CAAP;AACD;;AACDA,gBAAY,GAAG;AACb,YAAM;AAACx9C,WAAD;AAAMC;AAAN,UAAa,IAAnB;AACA,aAAOD,GAAG,GAAG,CAANA,IAAWC,GAAG,GAAG,CAAjBD,GAAqBC,GAArBD,GACLA,GAAG,GAAG,CAANA,IAAWC,GAAG,GAAG,CAAjBD,GAAqBA,GAArBA,GACA,CAFF;AAGD;;AACD4f,cAAU,CAAC1lB,KAAD,EAAQ;AAChB,YAAMytC,KAAK,GAAG,KAAKA,KAAL,IAAc,EAA5B;;AACA,UAAIztC,KAAK,IAAI,CAATA,IAAcA,KAAK,GAAGytC,KAAK,CAACjuC,MAAhC,EAAwC;AACtC,cAAMs+B,IAAI,GAAG2P,KAAK,CAACztC,KAAD,CAAlB;AACA,eAAO89B,IAAI,CAACsI,QAALtI,KACRA,IAAI,CAACsI,QAALtI,GAAgBif,iBAAiB,CAAC,KAAKr3B,UAAL,EAAD,EAAoB1lB,KAApB,EAA2B89B,IAA3B,CADzBA,CAAP;AAED;;AACD,aAAO,KAAKsI,QAAL,KACP,KAAKA,QAAL,GAAgB0W,kBAAkB,CAAC,KAAK57B,KAAL,CAAWwE,UAAX,EAAD,EAA0B,IAA1B,CAD3B,CAAP;AAED;;AACD61B,aAAS,GAAG;AACV,YAAMgI,WAAW,GAAG,KAAK3iD,OAAL,CAAa6sC,KAAjC;AACA,YAAM+V,GAAG,GAAGx9C,SAAS,CAAC,KAAK43C,aAAN,CAArB;AACA,YAAMrvC,GAAG,GAAG7K,IAAI,CAAC8B,GAAL9B,CAASA,IAAI,CAAC6K,GAAL7K,CAAS8/C,GAAT9/C,CAATA,CAAZ;AACA,YAAM4J,GAAG,GAAG5J,IAAI,CAAC8B,GAAL9B,CAASA,IAAI,CAAC4J,GAAL5J,CAAS8/C,GAAT9/C,CAATA,CAAZ;;AACA,YAAMy9C,UAAU,GAAG,KAAKC,cAAL,EAAnB;;AACA,YAAMzH,OAAO,GAAG4J,WAAW,CAACrJ,eAAZqJ,IAA+B,CAA/C;AACA,YAAM7xC,CAAC,GAAGyvC,UAAU,GAAGA,UAAU,CAACG,MAAXH,CAAkB18B,KAAlB08B,GAA0BxH,OAA7B,GAAuC,CAA3D;AACA,YAAM9pC,CAAC,GAAGsxC,UAAU,GAAGA,UAAU,CAACK,OAAXL,CAAmBt7B,MAAnBs7B,GAA4BxH,OAA/B,GAAyC,CAA7D;AACA,aAAO,KAAKxK,YAAL,KACHt/B,CAAC,GAAGtB,GAAJsB,GAAU6B,CAAC,GAAGpE,GAAduC,GAAoB6B,CAAC,GAAGnD,GAAxBsB,GAA8BA,CAAC,GAAGvC,GAD/B,GAEHuC,CAAC,GAAGvC,GAAJuC,GAAU6B,CAAC,GAAGnD,GAAdsB,GAAoBA,CAAC,GAAGtB,GAAxBsB,GAA8B6B,CAAC,GAAGpE,GAFtC;AAGD;;AACD4zC,cAAU,GAAG;AACX,YAAMvJ,OAAO,GAAG,KAAK/2C,OAAL,CAAa+2C,OAA7B;;AACA,UAAIA,OAAO,KAAK,MAAhB,EAAwB;AACtB,eAAO,CAAC,CAACA,OAAT;AACD;;AACD,aAAO,KAAK7T,uBAAL,GAA+BtkC,MAA/B,GAAwC,CAA/C;AACD;;AACDikD,yBAAqB,CAACtZ,SAAD,EAAY;AAC/B,YAAMh+B,IAAI,GAAG,KAAKA,IAAlB;AACA,YAAM+U,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMtgB,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM;AAACuxC,YAAD;AAAO8K;AAAP,UAAmBr8C,OAAzB;AACA,YAAMsxC,MAAM,GAAGC,IAAI,CAACD,MAApB;AACA,YAAM/C,YAAY,GAAG,KAAKA,YAAL,EAArB;AACA,YAAM1B,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMiW,WAAW,GAAGjW,KAAK,CAACjuC,MAANiuC,IAAgByE,MAAM,GAAG,CAAH,GAAO,CAA7BzE,CAApB;AACA,YAAMkW,EAAE,GAAG/G,iBAAiB,CAACzK,IAAD,CAA5B;AACA,YAAMvoC,KAAK,GAAG,EAAd;AACA,YAAMg6C,UAAU,GAAGzR,IAAI,CAAC/jB,UAAL+jB,CAAgB,KAAKzsB,UAAL,EAAhBysB,CAAnB;AACA,YAAM0R,SAAS,GAAGD,UAAU,CAACvK,UAAXuK,GAAwBA,UAAU,CAAC18B,WAAnC08B,GAAiD,CAAnE;AACA,YAAME,aAAa,GAAGD,SAAS,GAAG,CAAlC;;AACA,YAAME,gBAAgB,GAAG,UAAS1+B,KAAT,EAAgB;AACvC,eAAOD,WAAW,CAAClE,KAAD,EAAQmE,KAAR,EAAew+B,SAAf,CAAlB;AADF;;AAGA,UAAIG,WAAJ,EAAiB3kD,CAAjB,EAAoBq9C,SAApB,EAA+BuH,gBAA/B;AACA,UAAIC,GAAJ,EAASC,GAAT,EAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoCC,EAApC;;AACA,UAAIxH,QAAQ,KAAK,KAAjB,EAAwB;AACtB+G,mBAAW,GAAGD,gBAAgB,CAAC,KAAKt8B,MAAN,CAA9Bu8B;AACAG,WAAG,GAAG,KAAK18B,MAAL,GAAck8B,EAApBQ;AACAE,WAAG,GAAGL,WAAW,GAAGF,aAApBO;AACAE,UAAE,GAAGR,gBAAgB,CAAC5Z,SAAS,CAAC3iB,GAAX,CAAhBu8B,GAAkCD,aAAvCS;AACAE,UAAE,GAAGta,SAAS,CAAC1iB,MAAfg9B;AALF,aAMO,IAAIxH,QAAQ,KAAK,QAAjB,EAA2B;AAChC+G,mBAAW,GAAGD,gBAAgB,CAAC,KAAKv8B,GAAN,CAA9Bw8B;AACAO,UAAE,GAAGpa,SAAS,CAAC3iB,GAAf+8B;AACAE,UAAE,GAAGV,gBAAgB,CAAC5Z,SAAS,CAAC1iB,MAAX,CAAhBs8B,GAAqCD,aAA1CW;AACAN,WAAG,GAAGH,WAAW,GAAGF,aAApBK;AACAE,WAAG,GAAG,KAAK78B,GAAL,GAAWm8B,EAAjBU;AALK,aAMA,IAAIpH,QAAQ,KAAK,MAAjB,EAAyB;AAC9B+G,mBAAW,GAAGD,gBAAgB,CAAC,KAAKx4C,KAAN,CAA9By4C;AACAE,WAAG,GAAG,KAAK34C,KAAL,GAAao4C,EAAnBO;AACAE,WAAG,GAAGJ,WAAW,GAAGF,aAApBM;AACAE,UAAE,GAAGP,gBAAgB,CAAC5Z,SAAS,CAAC7+B,IAAX,CAAhBy4C,GAAmCD,aAAxCQ;AACAE,UAAE,GAAGra,SAAS,CAAC5+B,KAAfi5C;AALK,aAMA,IAAIvH,QAAQ,KAAK,OAAjB,EAA0B;AAC/B+G,mBAAW,GAAGD,gBAAgB,CAAC,KAAKz4C,IAAN,CAA9B04C;AACAM,UAAE,GAAGna,SAAS,CAAC7+B,IAAfg5C;AACAE,UAAE,GAAGT,gBAAgB,CAAC5Z,SAAS,CAAC5+B,KAAX,CAAhBw4C,GAAoCD,aAAzCU;AACAN,WAAG,GAAGF,WAAW,GAAGF,aAApBI;AACAE,WAAG,GAAG,KAAK94C,IAAL,GAAYq4C,EAAlBS;AALK,aAMA,IAAIj4C,IAAI,KAAK,GAAb,EAAkB;AACvB,YAAI8wC,QAAQ,KAAK,QAAjB,EAA2B;AACzB+G,qBAAW,GAAGD,gBAAgB,CAAC,CAAC5Z,SAAS,CAAC3iB,GAAV2iB,GAAgBA,SAAS,CAAC1iB,MAA3B,IAAqC,CAArC,GAAyC,GAA1C,CAA9Bu8B;AADF,eAEO,IAAI/lD,QAAQ,CAACg/C,QAAD,CAAZ,EAAwB;AAC7B,gBAAMI,cAAc,GAAGz/C,MAAM,CAAC2B,IAAP3B,CAAYq/C,QAAZr/C,EAAsB,CAAtBA,CAAvB;AACA,gBAAMJ,KAAK,GAAGy/C,QAAQ,CAACI,cAAD,CAAtB;AACA2G,qBAAW,GAAGD,gBAAgB,CAAC,KAAK7iC,KAAL,CAAW0B,MAAX,CAAkBy6B,cAAlB,EAAkC9wC,gBAAlC,CAAmD/O,KAAnD,CAAD,CAA9BwmD;AACD;;AACDO,UAAE,GAAGpa,SAAS,CAAC3iB,GAAf+8B;AACAE,UAAE,GAAGta,SAAS,CAAC1iB,MAAfg9B;AACAN,WAAG,GAAGH,WAAW,GAAGF,aAApBK;AACAE,WAAG,GAAGF,GAAG,GAAGR,EAAZU;AAXK,aAYA,IAAIl4C,IAAI,KAAK,GAAb,EAAkB;AACvB,YAAI8wC,QAAQ,KAAK,QAAjB,EAA2B;AACzB+G,qBAAW,GAAGD,gBAAgB,CAAC,CAAC5Z,SAAS,CAAC7+B,IAAV6+B,GAAiBA,SAAS,CAAC5+B,KAA5B,IAAqC,CAAtC,CAA9By4C;AADF,eAEO,IAAI/lD,QAAQ,CAACg/C,QAAD,CAAZ,EAAwB;AAC7B,gBAAMI,cAAc,GAAGz/C,MAAM,CAAC2B,IAAP3B,CAAYq/C,QAAZr/C,EAAsB,CAAtBA,CAAvB;AACA,gBAAMJ,KAAK,GAAGy/C,QAAQ,CAACI,cAAD,CAAtB;AACA2G,qBAAW,GAAGD,gBAAgB,CAAC,KAAK7iC,KAAL,CAAW0B,MAAX,CAAkBy6B,cAAlB,EAAkC9wC,gBAAlC,CAAmD/O,KAAnD,CAAD,CAA9BwmD;AACD;;AACDE,WAAG,GAAGF,WAAW,GAAGF,aAApBI;AACAE,WAAG,GAAGF,GAAG,GAAGP,EAAZS;AACAE,UAAE,GAAGna,SAAS,CAAC7+B,IAAfg5C;AACAE,UAAE,GAAGra,SAAS,CAAC5+B,KAAfi5C;AACD;;AACD,YAAME,KAAK,GAAGnmD,cAAc,CAACqC,OAAO,CAAC6sC,KAAR7sC,CAAcg6C,aAAf,EAA8B8I,WAA9B,CAA5B;AACA,YAAMiB,IAAI,GAAGjhD,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYA,IAAI,CAACo4C,IAALp4C,CAAUggD,WAAW,GAAGgB,KAAxBhhD,CAAZA,CAAb;;AACA,WAAKrE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGqkD,WAAhB,EAA6BrkD,CAAC,IAAIslD,IAAlC,EAAwC;AACtC,cAAMC,WAAW,GAAGzS,IAAI,CAAC/jB,UAAL+jB,CAAgB,KAAKzsB,UAAL,CAAgBrmB,CAAhB,CAAhB8yC,CAApB;AACA,cAAMppB,SAAS,GAAG67B,WAAW,CAAC77B,SAA9B;AACA,cAAM87B,SAAS,GAAGD,WAAW,CAACzlC,KAA9B;AACA,cAAMkd,UAAU,GAAGuoB,WAAW,CAACvoB,UAAZuoB,IAA0B,EAA7C;AACA,cAAMtoB,gBAAgB,GAAGsoB,WAAW,CAACtoB,gBAArC;AACA,cAAMmd,SAAS,GAAGmL,WAAW,CAACnL,SAA9B;AACA,cAAMC,SAAS,GAAGkL,WAAW,CAAClL,SAA9B;AACA,cAAMoL,cAAc,GAAGF,WAAW,CAACE,cAAZF,IAA8B,EAArD;AACA,cAAMG,oBAAoB,GAAGH,WAAW,CAACG,oBAAzC;AACArI,iBAAS,GAAGH,mBAAmB,CAAC,IAAD,EAAOl9C,CAAP,EAAU6yC,MAAV,CAA/BwK;;AACA,YAAIA,SAAS,KAAKj7C,SAAlB,EAA6B;AAC3B;AACD;;AACDwiD,wBAAgB,GAAG7+B,WAAW,CAAClE,KAAD,EAAQw7B,SAAR,EAAmB3zB,SAAnB,CAA9Bk7B;;AACA,YAAI9U,YAAJ,EAAkB;AAChB+U,aAAG,GAAGE,GAAG,GAAGE,EAAE,GAAGE,EAAE,GAAGP,gBAAtBC;AADF,eAEO;AACLC,aAAG,GAAGE,GAAG,GAAGE,EAAE,GAAGE,EAAE,GAAGR,gBAAtBE;AACD;;AACDv6C,aAAK,CAAClH,IAANkH,CAAW;AACTs6C,aADS;AAETC,aAFS;AAGTC,aAHS;AAITC,aAJS;AAKTC,YALS;AAMTC,YANS;AAOTC,YAPS;AAQTC,YARS;AASThgC,eAAK,EAAEsE,SATE;AAUT5J,eAAK,EAAE0lC,SAVE;AAWTxoB,oBAXS;AAYTC,0BAZS;AAaTmd,mBAbS;AAcTC,mBAdS;AAeToL,wBAfS;AAgBTC;AAhBS,SAAXn7C;AAkBD;;AACD,WAAK20C,YAAL,GAAoBmF,WAApB;AACA,WAAKlF,YAAL,GAAoBwF,WAApB;AACA,aAAOp6C,KAAP;AACD;;AACDo7C,sBAAkB,CAAC7a,SAAD,EAAY;AAC5B,YAAMh+B,IAAI,GAAG,KAAKA,IAAlB;AACA,YAAMvL,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM;AAACq8C,gBAAD;AAAWxP,aAAK,EAAE8V;AAAlB,UAAiC3iD,OAAvC;AACA,YAAMuuC,YAAY,GAAG,KAAKA,YAAL,EAArB;AACA,YAAM1B,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM;AAACtiC,aAAD;AAAQmvC,kBAAR;AAAoBX,eAApB;AAA6BG;AAA7B,UAAuCyJ,WAA7C;AACA,YAAMI,EAAE,GAAG/G,iBAAiB,CAACh8C,OAAO,CAACuxC,IAAT,CAA5B;AACA,YAAM8S,cAAc,GAAGtB,EAAE,GAAGhK,OAA5B;AACA,YAAMuL,eAAe,GAAGpL,MAAM,GAAG,CAACH,OAAJ,GAAcsL,cAA5C;AACA,YAAM7+B,QAAQ,GAAG,CAACpgB,SAAS,CAAC,KAAK43C,aAAN,CAA3B;AACA,YAAMh0C,KAAK,GAAG,EAAd;AACA,UAAIvK,CAAJ,EAAOO,IAAP,EAAak+B,IAAb,EAAmBkM,KAAnB,EAA0BloC,CAA1B,EAA6BE,CAA7B,EAAgCsnB,SAAhC,EAA2CjE,KAA3C,EAAkD9D,IAAlD,EAAwDG,UAAxD,EAAoEyjC,SAApE,EAA+EC,UAA/E;AACA,UAAI77B,YAAY,GAAG,QAAnB;;AACA,UAAI0zB,QAAQ,KAAK,KAAjB,EAAwB;AACtBj7C,SAAC,GAAG,KAAKylB,MAAL,GAAcy9B,eAAlBljD;AACAsnB,iBAAS,GAAG,KAAK+7B,uBAAL,EAAZ/7B;AAFF,aAGO,IAAI2zB,QAAQ,KAAK,QAAjB,EAA2B;AAChCj7C,SAAC,GAAG,KAAKwlB,GAAL,GAAW09B,eAAfljD;AACAsnB,iBAAS,GAAG,KAAK+7B,uBAAL,EAAZ/7B;AAFK,aAGA,IAAI2zB,QAAQ,KAAK,MAAjB,EAAyB;AAC9B,cAAM9rC,GAAG,GAAG,KAAKm0C,uBAAL,CAA6B3B,EAA7B,CAAZ;;AACAr6B,iBAAS,GAAGnY,GAAG,CAACmY,SAAhBA;AACAxnB,SAAC,GAAGqP,GAAG,CAACrP,CAARA;AAHK,aAIA,IAAIm7C,QAAQ,KAAK,OAAjB,EAA0B;AAC/B,cAAM9rC,GAAG,GAAG,KAAKm0C,uBAAL,CAA6B3B,EAA7B,CAAZ;;AACAr6B,iBAAS,GAAGnY,GAAG,CAACmY,SAAhBA;AACAxnB,SAAC,GAAGqP,GAAG,CAACrP,CAARA;AAHK,aAIA,IAAIqK,IAAI,KAAK,GAAb,EAAkB;AACvB,YAAI8wC,QAAQ,KAAK,QAAjB,EAA2B;AACzBj7C,WAAC,GAAI,CAACmoC,SAAS,CAAC3iB,GAAV2iB,GAAgBA,SAAS,CAAC1iB,MAA3B,IAAqC,CAArC,GAA0Cw9B,cAA/CjjD;AADF,eAEO,IAAI/D,QAAQ,CAACg/C,QAAD,CAAZ,EAAwB;AAC7B,gBAAMI,cAAc,GAAGz/C,MAAM,CAAC2B,IAAP3B,CAAYq/C,QAAZr/C,EAAsB,CAAtBA,CAAvB;AACA,gBAAMJ,KAAK,GAAGy/C,QAAQ,CAACI,cAAD,CAAtB;AACAr7C,WAAC,GAAG,KAAKkf,KAAL,CAAW0B,MAAX,CAAkBy6B,cAAlB,EAAkC9wC,gBAAlC,CAAmD/O,KAAnD,IAA4DynD,cAAhEjjD;AACD;;AACDsnB,iBAAS,GAAG,KAAK+7B,uBAAL,EAAZ/7B;AARK,aASA,IAAInd,IAAI,KAAK,GAAb,EAAkB;AACvB,YAAI8wC,QAAQ,KAAK,QAAjB,EAA2B;AACzBn7C,WAAC,GAAI,CAACqoC,SAAS,CAAC7+B,IAAV6+B,GAAiBA,SAAS,CAAC5+B,KAA5B,IAAqC,CAArC,GAA0C05C,cAA/CnjD;AADF,eAEO,IAAI7D,QAAQ,CAACg/C,QAAD,CAAZ,EAAwB;AAC7B,gBAAMI,cAAc,GAAGz/C,MAAM,CAAC2B,IAAP3B,CAAYq/C,QAAZr/C,EAAsB,CAAtBA,CAAvB;AACA,gBAAMJ,KAAK,GAAGy/C,QAAQ,CAACI,cAAD,CAAtB;AACAv7C,WAAC,GAAG,KAAKof,KAAL,CAAW0B,MAAX,CAAkBy6B,cAAlB,EAAkC9wC,gBAAlC,CAAmD/O,KAAnD,CAAJsE;AACD;;AACDwnB,iBAAS,GAAG,KAAKg8B,uBAAL,CAA6B3B,EAA7B,EAAiCr6B,SAA7CA;AACD;;AACD,UAAInd,IAAI,KAAK,GAAb,EAAkB;AAChB,YAAIhB,KAAK,KAAK,OAAd,EAAuB;AACrBoe,sBAAY,GAAG,KAAfA;AADF,eAEO,IAAIpe,KAAK,KAAK,KAAd,EAAqB;AAC1Boe,sBAAY,GAAG,QAAfA;AACD;AACF;;AACD,YAAM43B,UAAU,GAAG,KAAKC,cAAL,EAAnB;;AACA,WAAK/hD,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG6tC,KAAK,CAACjuC,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9Cy+B,YAAI,GAAG2P,KAAK,CAACpuC,CAAD,CAAZy+B;AACAkM,aAAK,GAAGlM,IAAI,CAACkM,KAAbA;AACA,cAAM4a,WAAW,GAAGrB,WAAW,CAACn1B,UAAZm1B,CAAuB,KAAK79B,UAAL,CAAgBrmB,CAAhB,CAAvBkkD,CAApB;AACAl+B,aAAK,GAAG,KAAKqoB,eAAL,CAAqBruC,CAArB,IAA0BkkD,WAAW,CAACpJ,WAA9C90B;AACA9D,YAAI,GAAG,KAAKyhC,uBAAL,CAA6B3jD,CAA7B,CAAPkiB;AACAG,kBAAU,GAAGH,IAAI,CAACG,UAAlBA;AACAyjC,iBAAS,GAAG1nD,OAAO,CAACusC,KAAD,CAAPvsC,GAAiBusC,KAAK,CAACxqC,MAAvB/B,GAAgC,CAA5C0nD;AACA,cAAMI,SAAS,GAAGJ,SAAS,GAAG,CAA9B;AACA,cAAMhmC,KAAK,GAAGylC,WAAW,CAACzlC,KAA1B;AACA,cAAMwJ,WAAW,GAAGi8B,WAAW,CAAC5K,eAAhC;AACA,cAAMtxB,WAAW,GAAGk8B,WAAW,CAAC7K,eAAhC;AACA,YAAIyL,aAAa,GAAGl8B,SAApB;;AACA,YAAI6lB,YAAJ,EAAkB;AAChBrtC,WAAC,GAAGujB,KAAJvjB;;AACA,cAAIwnB,SAAS,KAAK,OAAlB,EAA2B;AACzB,gBAAIjqB,CAAC,KAAKO,IAAI,GAAG,CAAjB,EAAoB;AAClB4lD,2BAAa,GAAG,CAAC,KAAK5kD,OAAL,CAAaxB,OAAd,GAAwB,OAAxB,GAAkC,MAAlDomD;AADF,mBAEO,IAAInmD,CAAC,KAAK,CAAV,EAAa;AAClBmmD,2BAAa,GAAG,CAAC,KAAK5kD,OAAL,CAAaxB,OAAd,GAAwB,MAAxB,GAAiC,OAAjDomD;AADK,mBAEA;AACLA,2BAAa,GAAG,QAAhBA;AACD;AACF;;AACD,cAAIvI,QAAQ,KAAK,KAAjB,EAAwB;AACtB,gBAAI3C,UAAU,KAAK,MAAfA,IAAyBl0B,QAAQ,KAAK,CAA1C,EAA6C;AAC3Cg/B,wBAAU,GAAG,CAACD,SAAD,GAAazjC,UAAb,GAA0BA,UAAU,GAAG,CAApD0jC;AADF,mBAEO,IAAI9K,UAAU,KAAK,QAAnB,EAA6B;AAClC8K,wBAAU,GAAG,CAACjE,UAAU,CAACK,OAAXL,CAAmBt7B,MAApB,GAA6B,CAA7B,GAAiC0/B,SAAS,GAAG7jC,UAA7C,GAA0DA,UAAvE0jC;AADK,mBAEA;AACLA,wBAAU,GAAG,CAACjE,UAAU,CAACK,OAAXL,CAAmBt7B,MAApB,GAA6BnE,UAAU,GAAG,CAAvD0jC;AACD;AAPH,iBAQO;AACL,gBAAI9K,UAAU,KAAK,MAAfA,IAAyBl0B,QAAQ,KAAK,CAA1C,EAA6C;AAC3Cg/B,wBAAU,GAAG1jC,UAAU,GAAG,CAA1B0jC;AADF,mBAEO,IAAI9K,UAAU,KAAK,QAAnB,EAA6B;AAClC8K,wBAAU,GAAGjE,UAAU,CAACK,OAAXL,CAAmBt7B,MAAnBs7B,GAA4B,CAA5BA,GAAgCoE,SAAS,GAAG7jC,UAAzD0jC;AADK,mBAEA;AACLA,wBAAU,GAAGjE,UAAU,CAACK,OAAXL,CAAmBt7B,MAAnBs7B,GAA4BgE,SAAS,GAAGzjC,UAArD0jC;AACD;AACF;;AACD,cAAItL,MAAJ,EAAY;AACVsL,sBAAU,IAAI,CAAC,CAAfA;AACD;AA9BH,eA+BO;AACLpjD,WAAC,GAAGqjB,KAAJrjB;AACAojD,oBAAU,GAAG,CAAC,IAAID,SAAL,IAAkBzjC,UAAlB,GAA+B,CAA5C0jC;AACD;;AACD,YAAIK,QAAJ;;AACA,YAAIb,WAAW,CAACrK,iBAAhB,EAAmC;AACjC,gBAAMmL,YAAY,GAAGt6B,SAAS,CAACw5B,WAAW,CAACnK,eAAb,CAA9B;AACA,gBAAM50B,MAAM,GAAGs7B,UAAU,CAACwB,OAAXxB,CAAmB9hD,CAAnB8hD,CAAf;AACA,gBAAM18B,KAAK,GAAG08B,UAAU,CAACuB,MAAXvB,CAAkB9hD,CAAlB8hD,CAAd;AACA,cAAI35B,GAAG,GAAGxlB,CAAC,GAAGojD,UAAJpjD,GAAiB0jD,YAAY,CAACl+B,GAAxC;AACA,cAAIlc,IAAI,GAAGxJ,CAAC,GAAG4jD,YAAY,CAACp6C,IAA5B;;AACA,kBAAQie,YAAR;AACA,iBAAK,QAAL;AACE/B,iBAAG,IAAI3B,MAAM,GAAG,CAAhB2B;AACA;;AACF,iBAAK,QAAL;AACEA,iBAAG,IAAI3B,MAAP2B;AACA;AANF;;AAQA,kBAAQ8B,SAAR;AACA,iBAAK,QAAL;AACEhe,kBAAI,IAAImZ,KAAK,GAAG,CAAhBnZ;AACA;;AACF,iBAAK,OAAL;AACEA,kBAAI,IAAImZ,KAARnZ;AACA;AANF;;AAQAm6C,kBAAQ,GAAG;AACTn6C,gBADS;AAETkc,eAFS;AAGT/C,iBAAK,EAAEA,KAAK,GAAGihC,YAAY,CAACjhC,KAHnB;AAIToB,kBAAM,EAAEA,MAAM,GAAG6/B,YAAY,CAAC7/B,MAJrB;AAKT1G,iBAAK,EAAEylC,WAAW,CAACpK;AALV,WAAXiL;AAOD;;AACD77C,aAAK,CAAClH,IAANkH,CAAW;AACTwc,kBADS;AAET4jB,eAFS;AAGTzoB,cAHS;AAITpC,eAJS;AAKTwJ,qBALS;AAMTD,qBANS;AAOT08B,oBAPS;AAQT97B,mBAAS,EAAEk8B,aARF;AASTj8B,sBATS;AAUTH,qBAAW,EAAE,CAACtnB,CAAD,EAAIE,CAAJ,CAVJ;AAWTyjD;AAXS,SAAX77C;AAaD;;AACD,aAAOA,KAAP;AACD;;AACDy7C,2BAAuB,GAAG;AACxB,YAAM;AAACpI,gBAAD;AAAWxP;AAAX,UAAoB,KAAK7sC,OAA/B;AACA,YAAMwlB,QAAQ,GAAG,CAACpgB,SAAS,CAAC,KAAK43C,aAAN,CAA3B;;AACA,UAAIx3B,QAAJ,EAAc;AACZ,eAAO62B,QAAQ,KAAK,KAAbA,GAAqB,MAArBA,GAA8B,OAArC;AACD;;AACD,UAAI9xC,KAAK,GAAG,QAAZ;;AACA,UAAIsiC,KAAK,CAACtiC,KAANsiC,KAAgB,OAApB,EAA6B;AAC3BtiC,aAAK,GAAG,MAARA;AADF,aAEO,IAAIsiC,KAAK,CAACtiC,KAANsiC,KAAgB,KAApB,EAA2B;AAChCtiC,aAAK,GAAG,OAARA;AADK,aAEA,IAAIsiC,KAAK,CAACtiC,KAANsiC,KAAgB,OAApB,EAA6B;AAClCtiC,aAAK,GAAG,OAARA;AACD;;AACD,aAAOA,KAAP;AACD;;AACDm6C,2BAAuB,CAAC3B,EAAD,EAAK;AAC1B,YAAM;AAAC1G,gBAAD;AAAWxP,aAAK,EAAE;AAAC6M,oBAAD;AAAaR,gBAAb;AAAqBH;AAArB;AAAlB,UAAmD,KAAK/4C,OAA9D;;AACA,YAAMugD,UAAU,GAAG,KAAKC,cAAL,EAAnB;;AACA,YAAM6D,cAAc,GAAGtB,EAAE,GAAGhK,OAA5B;AACA,YAAM2H,MAAM,GAAGH,UAAU,CAACG,MAAXH,CAAkB18B,KAAjC;AACA,UAAI6E,SAAJ;AACA,UAAIxnB,CAAJ;;AACA,UAAIm7C,QAAQ,KAAK,MAAjB,EAAyB;AACvB,YAAInD,MAAJ,EAAY;AACVh4C,WAAC,GAAG,KAAKyJ,KAAL,GAAaouC,OAAjB73C;;AACA,cAAIw4C,UAAU,KAAK,MAAnB,EAA2B;AACzBhxB,qBAAS,GAAG,MAAZA;AADF,iBAEO,IAAIgxB,UAAU,KAAK,QAAnB,EAA6B;AAClChxB,qBAAS,GAAG,QAAZA;AACAxnB,aAAC,IAAKw/C,MAAM,GAAG,CAAfx/C;AAFK,iBAGA;AACLwnB,qBAAS,GAAG,OAAZA;AACAxnB,aAAC,IAAIw/C,MAALx/C;AACD;AAVH,eAWO;AACLA,WAAC,GAAG,KAAKyJ,KAAL,GAAa05C,cAAjBnjD;;AACA,cAAIw4C,UAAU,KAAK,MAAnB,EAA2B;AACzBhxB,qBAAS,GAAG,OAAZA;AADF,iBAEO,IAAIgxB,UAAU,KAAK,QAAnB,EAA6B;AAClChxB,qBAAS,GAAG,QAAZA;AACAxnB,aAAC,IAAKw/C,MAAM,GAAG,CAAfx/C;AAFK,iBAGA;AACLwnB,qBAAS,GAAG,MAAZA;AACAxnB,aAAC,GAAG,KAAKwJ,IAATxJ;AACD;AACF;AAvBH,aAwBO,IAAIm7C,QAAQ,KAAK,OAAjB,EAA0B;AAC/B,YAAInD,MAAJ,EAAY;AACVh4C,WAAC,GAAG,KAAKwJ,IAAL,GAAYquC,OAAhB73C;;AACA,cAAIw4C,UAAU,KAAK,MAAnB,EAA2B;AACzBhxB,qBAAS,GAAG,OAAZA;AADF,iBAEO,IAAIgxB,UAAU,KAAK,QAAnB,EAA6B;AAClChxB,qBAAS,GAAG,QAAZA;AACAxnB,aAAC,IAAKw/C,MAAM,GAAG,CAAfx/C;AAFK,iBAGA;AACLwnB,qBAAS,GAAG,MAAZA;AACAxnB,aAAC,IAAIw/C,MAALx/C;AACD;AAVH,eAWO;AACLA,WAAC,GAAG,KAAKwJ,IAAL,GAAY25C,cAAhBnjD;;AACA,cAAIw4C,UAAU,KAAK,MAAnB,EAA2B;AACzBhxB,qBAAS,GAAG,MAAZA;AADF,iBAEO,IAAIgxB,UAAU,KAAK,QAAnB,EAA6B;AAClChxB,qBAAS,GAAG,QAAZA;AACAxnB,aAAC,IAAIw/C,MAAM,GAAG,CAAdx/C;AAFK,iBAGA;AACLwnB,qBAAS,GAAG,OAAZA;AACAxnB,aAAC,GAAG,KAAKyJ,KAATzJ;AACD;AACF;AAvBI,aAwBA;AACLwnB,iBAAS,GAAG,OAAZA;AACD;;AACD,aAAO;AAACA,iBAAD;AAAYxnB;AAAZ,OAAP;AACD;;AACD6jD,qBAAiB,GAAG;AAClB,UAAI,KAAK/kD,OAAL,CAAa6sC,KAAb,CAAmBqM,MAAvB,EAA+B;AAC7B;AACD;;AACD,YAAM54B,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM+7B,QAAQ,GAAG,KAAKr8C,OAAL,CAAaq8C,QAA9B;;AACA,UAAIA,QAAQ,KAAK,MAAbA,IAAuBA,QAAQ,KAAK,OAAxC,EAAiD;AAC/C,eAAO;AAACz1B,aAAG,EAAE,CAAN;AAASlc,cAAI,EAAE,KAAKA,IAApB;AAA0Bmc,gBAAM,EAAEvG,KAAK,CAAC2E,MAAxC;AAAgDta,eAAK,EAAE,KAAKA;AAA5D,SAAP;AACD;;AAAC,UAAI0xC,QAAQ,KAAK,KAAbA,IAAsBA,QAAQ,KAAK,QAAvC,EAAiD;AACjD,eAAO;AAACz1B,aAAG,EAAE,KAAKA,GAAX;AAAgBlc,cAAI,EAAE,CAAtB;AAAyBmc,gBAAM,EAAE,KAAKA,MAAtC;AAA8Clc,eAAK,EAAE2V,KAAK,CAACuD;AAA3D,SAAP;AACD;AACF;;AACDmhC,kBAAc,GAAG;AACf,YAAM;AAAC/jC,WAAD;AAAMjhB,eAAO,EAAE;AAACigB;AAAD,SAAf;AAAkCvV,YAAlC;AAAwCkc,WAAxC;AAA6C/C,aAA7C;AAAoDoB;AAApD,UAA8D,IAApE;;AACA,UAAIhF,eAAJ,EAAqB;AACnBgB,WAAG,CAACiD,IAAJjD;AACAA,WAAG,CAACwH,SAAJxH,GAAgBhB,eAAhBgB;AACAA,WAAG,CAACgkC,QAAJhkC,CAAavW,IAAbuW,EAAmB2F,GAAnB3F,EAAwB4C,KAAxB5C,EAA+BgE,MAA/BhE;AACAA,WAAG,CAACqD,OAAJrD;AACD;AACF;;AACD+vB,wBAAoB,CAACp0C,KAAD,EAAQ;AAC1B,YAAM20C,IAAI,GAAG,KAAKvxC,OAAL,CAAauxC,IAA1B;;AACA,UAAI,CAAC,KAAK+O,UAAL,EAAD,IAAsB,CAAC/O,IAAI,CAACwF,OAAhC,EAAyC;AACvC,eAAO,CAAP;AACD;;AACD,YAAMlK,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMztC,KAAK,GAAGytC,KAAK,CAACqY,SAANrY,CAAgBrgC,CAAC,IAAIA,CAAC,CAAC5P,KAAF4P,KAAY5P,KAAjCiwC,CAAd;;AACA,UAAIztC,KAAK,IAAI,CAAb,EAAgB;AACd,cAAMwoB,IAAI,GAAG2pB,IAAI,CAAC/jB,UAAL+jB,CAAgB,KAAKzsB,UAAL,CAAgB1lB,KAAhB,CAAhBmyC,CAAb;AACA,eAAO3pB,IAAI,CAACO,SAAZ;AACD;;AACD,aAAO,CAAP;AACD;;AACDg9B,YAAQ,CAAC5b,SAAD,EAAY;AAClB,YAAMgI,IAAI,GAAG,KAAKvxC,OAAL,CAAauxC,IAA1B;AACA,YAAMtwB,GAAG,GAAG,KAAKA,GAAjB;;AACA,YAAMjY,KAAK,GAAG,KAAKk0C,cAAL,KAAwB,KAAKA,cAAL,GAAsB,KAAK2F,qBAAL,CAA2BtZ,SAA3B,CAA9C,CAAd;;AACA,UAAI9qC,CAAJ,EAAOO,IAAP;;AACA,YAAMomD,QAAQ,GAAG,CAAC3zC,EAAD,EAAKC,EAAL,EAASmP,KAAT,KAAmB;AAClC,YAAI,CAACA,KAAK,CAACgD,KAAP,IAAgB,CAAChD,KAAK,CAACtC,KAA3B,EAAkC;AAChC;AACD;;AACD0C,WAAG,CAACiD,IAAJjD;AACAA,WAAG,CAACkH,SAAJlH,GAAgBJ,KAAK,CAACgD,KAAtB5C;AACAA,WAAG,CAACiH,WAAJjH,GAAkBJ,KAAK,CAACtC,KAAxB0C;AACAA,WAAG,CAACokC,WAAJpkC,CAAgBJ,KAAK,CAAC4a,UAAN5a,IAAoB,EAApCI;AACAA,WAAG,CAACqkC,cAAJrkC,GAAqBJ,KAAK,CAAC6a,gBAA3Bza;AACAA,WAAG,CAAC4E,SAAJ5E;AACAA,WAAG,CAACgF,MAAJhF,CAAWxP,EAAE,CAACvQ,CAAd+f,EAAiBxP,EAAE,CAACrQ,CAApB6f;AACAA,WAAG,CAACiF,MAAJjF,CAAWvP,EAAE,CAACxQ,CAAd+f,EAAiBvP,EAAE,CAACtQ,CAApB6f;AACAA,WAAG,CAACsF,MAAJtF;AACAA,WAAG,CAACqD,OAAJrD;AAbF;;AAeA,UAAIswB,IAAI,CAACwF,OAAT,EAAkB;AAChB,aAAKt4C,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgK,KAAK,CAACpK,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9C,gBAAMgE,IAAI,GAAGuG,KAAK,CAACvK,CAAD,CAAlB;;AACA,cAAI8yC,IAAI,CAACmH,eAAT,EAA0B;AACxB0M,oBAAQ,CACN;AAAClkD,eAAC,EAAEuB,IAAI,CAACihD,EAAT;AAAatiD,eAAC,EAAEqB,IAAI,CAACkhD;AAArB,aADM,EAEN;AAACziD,eAAC,EAAEuB,IAAI,CAACmhD,EAAT;AAAaxiD,eAAC,EAAEqB,IAAI,CAACohD;AAArB,aAFM,EAGNphD,IAHM,CAAR2iD;AAKD;;AACD,cAAI7T,IAAI,CAACoH,SAAT,EAAoB;AAClByM,oBAAQ,CACN;AAAClkD,eAAC,EAAEuB,IAAI,CAAC6gD,GAAT;AAAcliD,eAAC,EAAEqB,IAAI,CAAC8gD;AAAtB,aADM,EAEN;AAACriD,eAAC,EAAEuB,IAAI,CAAC+gD,GAAT;AAAcpiD,eAAC,EAAEqB,IAAI,CAACghD;AAAtB,aAFM,EAGN;AACEllC,mBAAK,EAAE9b,IAAI,CAACq2C,SADd;AAEEj1B,mBAAK,EAAEphB,IAAI,CAACo2C,SAFd;AAGEpd,wBAAU,EAAEh5B,IAAI,CAACyhD,cAHnB;AAIExoB,8BAAgB,EAAEj5B,IAAI,CAAC0hD;AAJzB,aAHM,CAARiB;AAUD;AACF;AACF;AACF;;AACD3M,cAAU,GAAG;AACX,YAAM;AAACn4B,aAAD;AAAQW,WAAR;AAAajhB,eAAO,EAAE;AAACuxC;AAAD;AAAtB,UAAgC,IAAtC;AACA,YAAMyR,UAAU,GAAGzR,IAAI,CAAC/jB,UAAL+jB,CAAgB,KAAKzsB,UAAL,EAAhBysB,CAAnB;AACA,YAAM0R,SAAS,GAAG1R,IAAI,CAACkH,UAALlH,GAAkByR,UAAU,CAAC18B,WAA7BirB,GAA2C,CAA7D;;AACA,UAAI,CAAC0R,SAAL,EAAgB;AACd;AACD;;AACD,YAAMsC,aAAa,GAAGhU,IAAI,CAAC/jB,UAAL+jB,CAAgB,KAAKzsB,UAAL,CAAgB,CAAhB,CAAhBysB,EAAoCppB,SAA1D;AACA,YAAMi7B,WAAW,GAAG,KAAKxF,YAAzB;AACA,UAAI8F,EAAJ,EAAQE,EAAR,EAAYD,EAAZ,EAAgBE,EAAhB;;AACA,UAAI,KAAKtV,YAAL,EAAJ,EAAyB;AACvBmV,UAAE,GAAGl/B,WAAW,CAAClE,KAAD,EAAQ,KAAK5V,IAAb,EAAmBu4C,SAAnB,CAAXz+B,GAA2Cy+B,SAAS,GAAG,CAA5DS;AACAE,UAAE,GAAGp/B,WAAW,CAAClE,KAAD,EAAQ,KAAK3V,KAAb,EAAoB46C,aAApB,CAAX/gC,GAAgD+gC,aAAa,GAAG,CAArE3B;AACAD,UAAE,GAAGE,EAAE,GAAGT,WAAVO;AAHF,aAIO;AACLA,UAAE,GAAGn/B,WAAW,CAAClE,KAAD,EAAQ,KAAKsG,GAAb,EAAkBq8B,SAAlB,CAAXz+B,GAA0Cy+B,SAAS,GAAG,CAA3DU;AACAE,UAAE,GAAGr/B,WAAW,CAAClE,KAAD,EAAQ,KAAKuG,MAAb,EAAqB0+B,aAArB,CAAX/gC,GAAiD+gC,aAAa,GAAG,CAAtE1B;AACAH,UAAE,GAAGE,EAAE,GAAGR,WAAVM;AACD;;AACDziC,SAAG,CAACiD,IAAJjD;AACAA,SAAG,CAACkH,SAAJlH,GAAgB+hC,UAAU,CAAC18B,WAA3BrF;AACAA,SAAG,CAACiH,WAAJjH,GAAkB+hC,UAAU,CAAC9iC,WAA7Be;AACAA,SAAG,CAAC4E,SAAJ5E;AACAA,SAAG,CAACgF,MAAJhF,CAAWyiC,EAAXziC,EAAe0iC,EAAf1iC;AACAA,SAAG,CAACiF,MAAJjF,CAAW2iC,EAAX3iC,EAAe4iC,EAAf5iC;AACAA,SAAG,CAACsF,MAAJtF;AACAA,SAAG,CAACqD,OAAJrD;AACD;;AACDukC,cAAU,CAACjc,SAAD,EAAY;AACpB,YAAMoZ,WAAW,GAAG,KAAK3iD,OAAL,CAAa6sC,KAAjC;;AACA,UAAI,CAAC8V,WAAW,CAAC5L,OAAjB,EAA0B;AACxB;AACD;;AACD,YAAM91B,GAAG,GAAG,KAAKA,GAAjB;;AACA,YAAMyF,IAAI,GAAG,KAAKq+B,iBAAL,EAAb;;AACA,UAAIr+B,IAAJ,EAAU;AACRI,gBAAQ,CAAC7F,GAAD,EAAMyF,IAAN,CAARI;AACD;;AACD,YAAM9d,KAAK,GAAG,KAAKm0C,WAAL,KAAqB,KAAKA,WAAL,GAAmB,KAAKiH,kBAAL,CAAwB7a,SAAxB,CAAxC,CAAd;;AACA,UAAI9qC,CAAJ,EAAOO,IAAP;;AACA,WAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgK,KAAK,CAACpK,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9C,cAAMgE,IAAI,GAAGuG,KAAK,CAACvK,CAAD,CAAlB;AACA,cAAMyjD,QAAQ,GAAGz/C,IAAI,CAACke,IAAtB;AACA,cAAMyoB,KAAK,GAAG3mC,IAAI,CAAC2mC,KAAnB;;AACA,YAAI3mC,IAAI,CAACoiD,QAAT,EAAmB;AACjB5jC,aAAG,CAACwH,SAAJxH,GAAgBxe,IAAI,CAACoiD,QAALpiD,CAAc8b,KAA9B0C;AACAA,aAAG,CAACgkC,QAAJhkC,CAAaxe,IAAI,CAACoiD,QAALpiD,CAAciI,IAA3BuW,EAAiCxe,IAAI,CAACoiD,QAALpiD,CAAcmkB,GAA/C3F,EAAoDxe,IAAI,CAACoiD,QAALpiD,CAAcohB,KAAlE5C,EAAyExe,IAAI,CAACoiD,QAALpiD,CAAcwiB,MAAvFhE;AACD;;AACD,YAAI7f,CAAC,GAAGqB,IAAI,CAAC+hD,UAAb;AACA98B,kBAAU,CAACzG,GAAD,EAAMmoB,KAAN,EAAa,CAAb,EAAgBhoC,CAAhB,EAAmB8gD,QAAnB,EAA6Bz/C,IAA7B,CAAVilB;AACD;;AACD,UAAIhB,IAAJ,EAAU;AACRM,kBAAU,CAAC/F,GAAD,CAAV+F;AACD;AACF;;AACDy+B,aAAS,GAAG;AACV,YAAM;AAACxkC,WAAD;AAAMjhB,eAAO,EAAE;AAACq8C,kBAAD;AAAW1K,eAAX;AAAkBnzC;AAAlB;AAAf,UAA6C,IAAnD;;AACA,UAAI,CAACmzC,KAAK,CAACoF,OAAX,EAAoB;AAClB;AACD;;AACD,YAAMp2B,IAAI,GAAG8J,MAAM,CAACknB,KAAK,CAAChxB,IAAP,CAAnB;AACA,YAAMo4B,OAAO,GAAGvuB,SAAS,CAACmnB,KAAK,CAACoH,OAAP,CAAzB;AACA,YAAMxuC,KAAK,GAAGonC,KAAK,CAACpnC,KAApB;AACA,UAAI+mC,MAAM,GAAG3wB,IAAI,CAACG,UAALH,GAAkB,CAA/B;;AACA,UAAI07B,QAAQ,KAAK,QAAbA,IAAyBA,QAAQ,KAAK,QAAtCA,IAAkDh/C,QAAQ,CAACg/C,QAAD,CAA9D,EAA0E;AACxE/K,cAAM,IAAIyH,OAAO,CAAClyB,MAAlByqB;;AACA,YAAIz0C,OAAO,CAAC80C,KAAK,CAAChqB,IAAP,CAAX,EAAyB;AACvB2pB,gBAAM,IAAI3wB,IAAI,CAACG,UAALH,IAAmBgxB,KAAK,CAAChqB,IAANgqB,CAAW/yC,MAAX+yC,GAAoB,CAAvChxB,CAAV2wB;AACD;AAJH,aAKO;AACLA,cAAM,IAAIyH,OAAO,CAACnyB,GAAlB0qB;AACD;;AACD,YAAM;AAACiL,cAAD;AAASC,cAAT;AAAiBn0B,gBAAjB;AAA2B7C;AAA3B,UAAuC82B,SAAS,CAAC,IAAD,EAAOhL,MAAP,EAAe+K,QAAf,EAAyB9xC,KAAzB,CAAtD;AACAmd,gBAAU,CAACzG,GAAD,EAAM0wB,KAAK,CAAChqB,IAAZ,EAAkB,CAAlB,EAAqB,CAArB,EAAwBhH,IAAxB,EAA8B;AACtCpC,aAAK,EAAEozB,KAAK,CAACpzB,KADyB;AAEtC8J,gBAFsC;AAGtC7C,gBAHsC;AAItCkD,iBAAS,EAAE0zB,UAAU,CAAC7xC,KAAD,EAAQ8xC,QAAR,EAAkB79C,OAAlB,CAJiB;AAKtCmqB,oBAAY,EAAE,QALwB;AAMtCH,mBAAW,EAAE,CAAC+zB,MAAD,EAASC,MAAT;AANyB,OAA9B,CAAV90B;AAQD;;AACDqV,QAAI,CAACwM,SAAD,EAAY;AACd,UAAI,CAAC,KAAK+W,UAAL,EAAL,EAAwB;AACtB;AACD;;AACD,WAAK0E,cAAL;AACA,WAAKG,QAAL,CAAc5b,SAAd;AACA,WAAKkP,UAAL;AACA,WAAKgN,SAAL;AACA,WAAKD,UAAL,CAAgBjc,SAAhB;AACD;;AACDmc,WAAO,GAAG;AACR,YAAM99B,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM2lD,EAAE,GAAG/9B,IAAI,CAACilB,KAALjlB,IAAcA,IAAI,CAACilB,KAALjlB,CAAWg+B,CAAzBh+B,IAA8B,CAAzC;AACA,YAAMi+B,EAAE,GAAGloD,cAAc,CAACiqB,IAAI,CAAC2pB,IAAL3pB,IAAaA,IAAI,CAAC2pB,IAAL3pB,CAAUg+B,CAAxB,EAA2B,CAAC,CAA5B,CAAzB;;AACA,UAAI,CAAC,KAAKtF,UAAL,EAAD,IAAsB,KAAKvjB,IAAL,KAAc2f,KAAK,CAACz/C,SAANy/C,CAAgB3f,IAAxD,EAA8D;AAC5D,eAAO,CAAC;AACN6oB,WAAC,EAAED,EADG;AAEN5oB,cAAI,EAAGwM,SAAD,IAAe;AACnB,iBAAKxM,IAAL,CAAUwM,SAAV;AACD;AAJK,SAAD,CAAP;AAMD;;AACD,aAAO,CAAC;AACNqc,SAAC,EAAEC,EADG;AAEN9oB,YAAI,EAAGwM,SAAD,IAAe;AACnB,eAAKyb,cAAL;AACA,eAAKG,QAAL,CAAc5b,SAAd;AACA,eAAKkc,SAAL;AACD;AANK,OAAD,EAOJ;AACDG,SAAC,EAAEC,EAAE,GAAG,CADP;AAED9oB,YAAI,EAAE,MAAM;AACV,eAAK0b,UAAL;AACD;AAJA,OAPI,EAYJ;AACDmN,SAAC,EAAED,EADF;AAED5oB,YAAI,EAAGwM,SAAD,IAAe;AACnB,eAAKic,UAAL,CAAgBjc,SAAhB;AACD;AAJA,OAZI,CAAP;AAkBD;;AACDrG,2BAAuB,CAACnmC,IAAD,EAAO;AAC5B,YAAMkhD,KAAK,GAAG,KAAK39B,KAAL,CAAWwlC,4BAAX,EAAd;AACA,YAAMC,MAAM,GAAG,KAAKx6C,IAAL,GAAY,QAA3B;AACA,YAAMnH,MAAM,GAAG,EAAf;AACA,UAAI3F,CAAJ,EAAOO,IAAP;;AACA,WAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGi/C,KAAK,CAACr/C,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9C,cAAMsM,IAAI,GAAGkzC,KAAK,CAACx/C,CAAD,CAAlB;;AACA,YAAIsM,IAAI,CAACg7C,MAAD,CAAJh7C,KAAiB,KAAKrO,EAAtBqO,KAA6B,CAAChO,IAAD,IAASgO,IAAI,CAAChO,IAALgO,KAAchO,IAApDgO,CAAJ,EAA+D;AAC7D3G,gBAAM,CAACtC,IAAPsC,CAAY2G,IAAZ3G;AACD;AACF;;AACD,aAAOA,MAAP;AACD;;AACDg+C,2BAAuB,CAAChjD,KAAD,EAAQ;AAC7B,YAAMwoB,IAAI,GAAG,KAAK5nB,OAAL,CAAa6sC,KAAb,CAAmBrf,UAAnB,CAA8B,KAAK1I,UAAL,CAAgB1lB,KAAhB,CAA9B,CAAb;AACA,aAAOqrB,MAAM,CAAC7C,IAAI,CAACjH,IAAN,CAAb;AACD;;AACDqlC,cAAU,GAAG;AACX,YAAMC,QAAQ,GAAG,KAAK7D,uBAAL,CAA6B,CAA7B,EAAgCthC,UAAjD;;AACA,aAAO,CAAC,KAAKytB,YAAL,KAAsB,KAAK1qB,KAA3B,GAAmC,KAAKoB,MAAzC,IAAmDghC,QAA1D;AACD;;AAzjCyB;;AA4jC5B,QAAMC,aAAN,CAAoB;AAClBhoC,eAAW,CAACnhB,IAAD,EAAO2D,KAAP,EAAc2hB,QAAd,EAAwB;AACjC,WAAKtlB,IAAL,GAAYA,IAAZ;AACA,WAAK2D,KAAL,GAAaA,KAAb;AACA,WAAK2hB,QAAL,GAAgBA,QAAhB;AACA,WAAKrZ,KAAL,GAAahM,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAb;AACD;;AACDmpD,aAAS,CAACppD,IAAD,EAAO;AACd,aAAOC,MAAM,CAACC,SAAPD,CAAiBopD,aAAjBppD,CAA+BG,IAA/BH,CAAoC,KAAKD,IAAL,CAAUE,SAA9CD,EAAyDD,IAAI,CAACE,SAA9DD,CAAP;AACD;;AACDqpD,YAAQ,CAAC5jD,IAAD,EAAO;AACb,YAAMob,KAAK,GAAG7gB,MAAM,CAAC0vB,cAAP1vB,CAAsByF,IAAtBzF,CAAd;AACA,UAAIspD,WAAJ;;AACA,UAAIC,iBAAiB,CAAC1oC,KAAD,CAArB,EAA8B;AAC5ByoC,mBAAW,GAAG,KAAKD,QAAL,CAAcxoC,KAAd,CAAdyoC;AACD;;AACD,YAAMt9C,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMtM,EAAE,GAAG+F,IAAI,CAAC/F,EAAhB;AACA,YAAMgE,KAAK,GAAG,KAAKA,KAAL,GAAa,GAAb,GAAmBhE,EAAjC;;AACA,UAAI,CAACA,EAAL,EAAS;AACP,cAAM,IAAI4xB,KAAJ,CAAU,6BAA6B7rB,IAAvC,CAAN;AACD;;AACD,UAAI/F,EAAE,IAAIsM,KAAV,EAAiB;AACf,eAAOtI,KAAP;AACD;;AACDsI,WAAK,CAACtM,EAAD,CAALsM,GAAYvG,IAAZuG;AACAw9C,sBAAgB,CAAC/jD,IAAD,EAAO/B,KAAP,EAAc4lD,WAAd,CAAhBE;;AACA,UAAI,KAAKnkC,QAAT,EAAmB;AACjBW,gBAAQ,CAACX,QAATW,CAAkBvgB,IAAI,CAAC/F,EAAvBsmB,EAA2BvgB,IAAI,CAACgd,SAAhCuD;AACD;;AACD,aAAOtiB,KAAP;AACD;;AACD0hB,OAAG,CAAC1lB,EAAD,EAAK;AACN,aAAO,KAAKsM,KAAL,CAAWtM,EAAX,CAAP;AACD;;AACD+pD,cAAU,CAAChkD,IAAD,EAAO;AACf,YAAMuG,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMtM,EAAE,GAAG+F,IAAI,CAAC/F,EAAhB;AACA,YAAMgE,KAAK,GAAG,KAAKA,KAAnB;;AACA,UAAIhE,EAAE,IAAIsM,KAAV,EAAiB;AACf,eAAOA,KAAK,CAACtM,EAAD,CAAZ;AACD;;AACD,UAAIgE,KAAK,IAAIhE,EAAE,IAAIsmB,QAAQ,CAACtiB,KAAD,CAA3B,EAAoC;AAClC,eAAOsiB,QAAQ,CAACtiB,KAAD,CAARsiB,CAAgBtmB,EAAhBsmB,CAAP;;AACA,YAAI,KAAKX,QAAT,EAAmB;AACjB,iBAAO5C,SAAS,CAAC/iB,EAAD,CAAhB;AACD;AACF;AACF;;AAhDiB;;AAkDpB,WAAS8pD,gBAAT,CAA0B/jD,IAA1B,EAAgC/B,KAAhC,EAAuC4lD,WAAvC,EAAoD;AAClD,UAAMI,YAAY,GAAGvmD,KAAK,CAACnD,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAD,EAAsB,CAC9CspD,WAAW,GAAGtjC,QAAQ,CAACZ,GAATY,CAAasjC,WAAbtjC,CAAH,GAA+B,EADI,EAE9CA,QAAQ,CAACZ,GAATY,CAAatiB,KAAbsiB,CAF8C,EAG9CvgB,IAAI,CAACugB,QAHyC,CAAtB,CAA1B;AAKAA,YAAQ,CAAC/Z,GAAT+Z,CAAatiB,KAAbsiB,EAAoB0jC,YAApB1jC;;AACA,QAAIvgB,IAAI,CAACm1C,aAAT,EAAwB;AACtB+O,mBAAa,CAACjmD,KAAD,EAAQ+B,IAAI,CAACm1C,aAAb,CAAb+O;AACD;;AACD,QAAIlkD,IAAI,CAACid,WAAT,EAAsB;AACpBsD,cAAQ,CAACb,QAATa,CAAkBtiB,KAAlBsiB,EAAyBvgB,IAAI,CAACid,WAA9BsD;AACD;AACF;;AACD,WAAS2jC,aAAT,CAAuBjmD,KAAvB,EAA8BkmD,MAA9B,EAAsC;AACpC5pD,UAAM,CAAC2B,IAAP3B,CAAY4pD,MAAZ5pD,EAAoBuL,OAApBvL,CAA4BiI,QAAQ,IAAI;AACtC,YAAM4hD,aAAa,GAAG5hD,QAAQ,CAACtD,KAATsD,CAAe,GAAfA,CAAtB;AACA,YAAM6hD,UAAU,GAAGD,aAAa,CAACtiD,GAAdsiD,EAAnB;AACA,YAAME,WAAW,GAAG,CAACrmD,KAAD,EAAQ8rC,MAAR,CAAeqa,aAAf,EAA8Bt4B,IAA9B,CAAmC,GAAnC,CAApB;AACA,YAAM7sB,KAAK,GAAGklD,MAAM,CAAC3hD,QAAD,CAAN2hD,CAAiBjlD,KAAjBilD,CAAuB,GAAvBA,CAAd;AACA,YAAMnkC,UAAU,GAAG/gB,KAAK,CAAC6C,GAAN7C,EAAnB;AACA,YAAM8gB,WAAW,GAAG9gB,KAAK,CAAC6sB,IAAN7sB,CAAW,GAAXA,CAApB;AACAshB,cAAQ,CAACV,KAATU,CAAe+jC,WAAf/jC,EAA4B8jC,UAA5B9jC,EAAwCR,WAAxCQ,EAAqDP,UAArDO;AAPF;AASD;;AACD,WAASujC,iBAAT,CAA2B1oC,KAA3B,EAAkC;AAChC,WAAO,QAAQA,KAAR,IAAiB,cAAcA,KAAtC;AACD;;AAED,QAAMmpC,QAAN,CAAe;AACb9oC,eAAW,GAAG;AACZ,WAAK+oC,WAAL,GAAmB,IAAIf,aAAJ,CAAkBthB,iBAAlB,EAAqC,UAArC,EAAiD,IAAjD,CAAnB;AACA,WAAKnkB,QAAL,GAAgB,IAAIylC,aAAJ,CAAkB5O,OAAlB,EAA2B,UAA3B,CAAhB;AACA,WAAKz1B,OAAL,GAAe,IAAIqkC,aAAJ,CAAkBlpD,MAAlB,EAA0B,SAA1B,CAAf;AACA,WAAKglB,MAAL,GAAc,IAAIkkC,aAAJ,CAAkBxJ,KAAlB,EAAyB,QAAzB,CAAd;AACA,WAAKwK,gBAAL,GAAwB,CAAC,KAAKD,WAAN,EAAmB,KAAKjlC,MAAxB,EAAgC,KAAKvB,QAArC,CAAxB;AACD;;AACDtX,OAAG,GAAU;AAAA,wCAANhL,IAAM;AAANA,YAAM;AAAA;;AACX,WAAKgpD,KAAL,CAAW,UAAX,EAAuBhpD,IAAvB;AACD;;AACD2/B,UAAM,GAAU;AAAA,yCAAN3/B,IAAM;AAANA,YAAM;AAAA;;AACd,WAAKgpD,KAAL,CAAW,YAAX,EAAyBhpD,IAAzB;AACD;;AACDipD,kBAAc,GAAU;AAAA,yCAANjpD,IAAM;AAANA,YAAM;AAAA;;AACtB,WAAKgpD,KAAL,CAAW,UAAX,EAAuBhpD,IAAvB,EAA6B,KAAK8oD,WAAlC;AACD;;AACDrhB,eAAW,GAAU;AAAA,yCAANznC,IAAM;AAANA,YAAM;AAAA;;AACnB,WAAKgpD,KAAL,CAAW,UAAX,EAAuBhpD,IAAvB,EAA6B,KAAKsiB,QAAlC;AACD;;AACD4mC,cAAU,GAAU;AAAA,yCAANlpD,IAAM;AAANA,YAAM;AAAA;;AAClB,WAAKgpD,KAAL,CAAW,UAAX,EAAuBhpD,IAAvB,EAA6B,KAAK0jB,OAAlC;AACD;;AACDylC,aAAS,GAAU;AAAA,yCAANnpD,IAAM;AAANA,YAAM;AAAA;;AACjB,WAAKgpD,KAAL,CAAW,UAAX,EAAuBhpD,IAAvB,EAA6B,KAAK6jB,MAAlC;AACD;;AACDulC,iBAAa,CAAC7qD,EAAD,EAAK;AAChB,aAAO,KAAK8qD,IAAL,CAAU9qD,EAAV,EAAc,KAAKuqD,WAAnB,EAAgC,YAAhC,CAAP;AACD;;AACDQ,cAAU,CAAC/qD,EAAD,EAAK;AACb,aAAO,KAAK8qD,IAAL,CAAU9qD,EAAV,EAAc,KAAK+jB,QAAnB,EAA6B,SAA7B,CAAP;AACD;;AACDinC,aAAS,CAAChrD,EAAD,EAAK;AACZ,aAAO,KAAK8qD,IAAL,CAAU9qD,EAAV,EAAc,KAAKmlB,OAAnB,EAA4B,QAA5B,CAAP;AACD;;AACD8lC,YAAQ,CAACjrD,EAAD,EAAK;AACX,aAAO,KAAK8qD,IAAL,CAAU9qD,EAAV,EAAc,KAAKslB,MAAnB,EAA2B,OAA3B,CAAP;AACD;;AACD4lC,qBAAiB,GAAU;AAAA,yCAANzpD,IAAM;AAANA,YAAM;AAAA;;AACzB,WAAKgpD,KAAL,CAAW,YAAX,EAAyBhpD,IAAzB,EAA+B,KAAK8oD,WAApC;AACD;;AACDY,kBAAc,GAAU;AAAA,yCAAN1pD,IAAM;AAANA,YAAM;AAAA;;AACtB,WAAKgpD,KAAL,CAAW,YAAX,EAAyBhpD,IAAzB,EAA+B,KAAKsiB,QAApC;AACD;;AACDqnC,iBAAa,GAAU;AAAA,yCAAN3pD,IAAM;AAANA,YAAM;AAAA;;AACrB,WAAKgpD,KAAL,CAAW,YAAX,EAAyBhpD,IAAzB,EAA+B,KAAK0jB,OAApC;AACD;;AACDkmC,gBAAY,GAAU;AAAA,0CAAN5pD,IAAM;AAANA,YAAM;AAAA;;AACpB,WAAKgpD,KAAL,CAAW,YAAX,EAAyBhpD,IAAzB,EAA+B,KAAK6jB,MAApC;AACD;;AACDmlC,SAAK,CAAC3+C,MAAD,EAASrK,IAAT,EAAe6pD,aAAf,EAA8B;AACjC,OAAC,GAAG7pD,IAAJ,EAAUoK,OAAV,CAAkB0/C,GAAG,IAAI;AACvB,cAAMC,GAAG,GAAGF,aAAa,IAAI,KAAKG,mBAAL,CAAyBF,GAAzB,CAA7B;;AACA,YAAID,aAAa,IAAIE,GAAG,CAAC/B,SAAJ+B,CAAcD,GAAdC,CAAjBF,IAAwCE,GAAG,KAAK,KAAKrmC,OAAbqmC,IAAwBD,GAAG,CAACvrD,EAAxE,EAA6E;AAC3E,eAAK0rD,KAAL,CAAW5/C,MAAX,EAAmB0/C,GAAnB,EAAwBD,GAAxB;AADF,eAEO;AACL3pD,cAAI,CAAC2pD,GAAD,EAAMxlD,IAAI,IAAI;AAChB,kBAAM4lD,OAAO,GAAGL,aAAa,IAAI,KAAKG,mBAAL,CAAyB1lD,IAAzB,CAAjC;;AACA,iBAAK2lD,KAAL,CAAW5/C,MAAX,EAAmB6/C,OAAnB,EAA4B5lD,IAA5B;AAFE,YAAJnE;AAID;AATH;AAWD;;AACD8pD,SAAK,CAAC5/C,MAAD,EAAS8/C,QAAT,EAAmBC,SAAnB,EAA8B;AACjC,YAAMC,WAAW,GAAGzmD,WAAW,CAACyG,MAAD,CAA/B;;AACAvK,cAAQ,CAACsqD,SAAS,CAAC,WAAWC,WAAZ,CAAV,EAAoC,EAApC,EAAwCD,SAAxC,CAARtqD;AACAqqD,cAAQ,CAAC9/C,MAAD,CAAR8/C,CAAiBC,SAAjBD;AACArqD,cAAQ,CAACsqD,SAAS,CAAC,UAAUC,WAAX,CAAV,EAAmC,EAAnC,EAAuCD,SAAvC,CAARtqD;AACD;;AACDkqD,uBAAmB,CAACprD,IAAD,EAAO;AACxB,WAAK,IAAI0B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKyoD,gBAAL,CAAsBtoD,MAA1C,EAAkDH,CAAC,EAAnD,EAAuD;AACrD,cAAMypD,GAAG,GAAG,KAAKhB,gBAAL,CAAsBzoD,CAAtB,CAAZ;;AACA,YAAIypD,GAAG,CAAC/B,SAAJ+B,CAAcnrD,IAAdmrD,CAAJ,EAAyB;AACvB,iBAAOA,GAAP;AACD;AACF;;AACD,aAAO,KAAKrmC,OAAZ;AACD;;AACD2lC,QAAI,CAAC9qD,EAAD,EAAKsrD,aAAL,EAAoBjrD,IAApB,EAA0B;AAC5B,YAAM0F,IAAI,GAAGulD,aAAa,CAAC5lC,GAAd4lC,CAAkBtrD,EAAlBsrD,CAAb;;AACA,UAAIvlD,IAAI,KAAK5B,SAAb,EAAwB;AACtB,cAAM,IAAIytB,KAAJ,CAAU,MAAM5xB,EAAN,GAAW,wBAAX,GAAsCK,IAAtC,GAA6C,GAAvD,CAAN;AACD;;AACD,aAAO0F,IAAP;AACD;;AApFY;;AAsFf,MAAI6lD,QAAQ,GAAG,IAAItB,QAAJ,EAAf;;AAEA,QAAMyB,iBAAN,SAAgC7jB,iBAAhC,CAAkD;AAChD1F,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAMvW,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM;AAAC9f,YAAI,EAAEvY,MAAM,GAAG;AAAhB,UAAsBD,IAA5B;AACA,YAAME,kBAAkB,GAAG,KAAKqV,KAAL,CAAWiqB,mBAAtC;;AACA,UAAI;AAAC9jC,aAAD;AAAQ0E;AAAR,UAAiBL,gCAAgC,CAACC,IAAD,EAAOC,MAAP,EAAeC,kBAAf,CAArD;;AACA,WAAKm6B,UAAL,GAAkB3+B,KAAlB;AACA,WAAK4+B,UAAL,GAAkBl6B,KAAlB;;AACA,UAAIS,mBAAmB,CAACb,IAAD,CAAvB,EAA+B;AAC7BtE,aAAK,GAAG,CAARA;AACA0E,aAAK,GAAGH,MAAM,CAACpM,MAAfuM;AACD;;AACD,UAAI,KAAKnL,OAAL,CAAaiiB,QAAjB,EAA2B;AACzB,cAAM;AAAC8hB,iBAAO,EAAE/b,IAAV;AAAgBstB;AAAhB,YAA4BvqC,IAAlC;AACAid,YAAI,CAAC4S,MAAL5S,GAAc,KAAK1H,KAAnB0H;AACAA,YAAI,CAAC+S,aAAL/S,GAAqB,KAAK5oB,KAA1B4oB;AACAA,YAAI,CAACutB,UAALvtB,GAAkB,CAAC,CAACstB,QAAQ,CAACC,UAA7BvtB;AACAA,YAAI,CAAChd,MAALgd,GAAchd,MAAdgd;AACA,cAAMhoB,OAAO,GAAG,KAAKwpC,4BAAL,CAAkCloB,IAAlC,CAAhB;AACAthB,eAAO,CAACi5B,OAARj5B,GAAkB,KAAKA,OAAL,CAAai5B,OAA/Bj5B;AACA,aAAK4qC,aAAL,CAAmB5iB,IAAnB,EAAyBnnB,SAAzB,EAAoC;AAClC20C,kBAAQ,EAAE,CAACvqC,kBADuB;AAElCjL;AAFkC,SAApC,EAGGshB,IAHH;AAID;;AACD,WAAKmqB,cAAL,CAAoBzgC,MAApB,EAA4BvE,KAA5B,EAAmC0E,KAAnC,EAA0CmW,IAA1C;AACD;;AACDskB,eAAW,GAAG;AACZ,YAAM;AAAC3jB;AAAD,UAAa,KAAKjiB,OAAxB;;AACA,UAAI,CAAC,KAAKmnC,kBAAN,IAA4BllB,QAAhC,EAA0C;AACxC,aAAKklB,kBAAL,GAA0BmhB,QAAQ,CAACb,UAATa,CAAoB,MAApBA,CAA1B;AACD;;AACD,YAAM1iB,WAAN;AACD;;AACD6F,kBAAc,CAACzgC,MAAD,EAASvE,KAAT,EAAgB0E,KAAhB,EAAuBmW,IAAvB,EAA6B;AACzC,YAAMylB,KAAK,GAAGzlB,IAAI,KAAK,OAAvB;AACA,YAAM;AAACjW,cAAD;AAAS23B,cAAT;AAAiB2B,gBAAjB;AAA2B2Q;AAA3B,UAAuC,KAAKjS,WAAlD;AACA,YAAMoH,SAAS,GAAG,KAAKhB,yBAAL,CAA+BhjC,KAA/B,EAAsC6a,IAAtC,CAAlB;AACA,YAAMgpB,aAAa,GAAG,KAAKF,gBAAL,CAAsBK,SAAtB,CAAtB;AACA,YAAMJ,cAAc,GAAG,KAAKA,cAAL,CAAoB/oB,IAApB,EAA0BgpB,aAA1B,CAAvB;AACA,YAAM/G,KAAK,GAAGl4B,MAAM,CAACE,IAArB;AACA,YAAMi4B,KAAK,GAAGR,MAAM,CAACz3B,IAArB;AACA,YAAM;AAAC6mB,gBAAD;AAAW6G;AAAX,UAAsB,KAAKj5B,OAAjC;AACA,YAAMy1C,YAAY,GAAGjxC,QAAQ,CAAC4tB,QAAD,CAAR5tB,GAAqB4tB,QAArB5tB,GAAgCjH,MAAM,CAAC2F,iBAA5D;AACA,YAAMwyC,YAAY,GAAG,KAAKp1B,KAAL,CAAWiqB,mBAAX,IAAkCxD,KAAlC,IAA2CzlB,IAAI,KAAK,MAAzE;AACA,UAAIq0B,UAAU,GAAGlvC,KAAK,GAAG,CAARA,IAAa,KAAK8hC,SAAL,CAAe9hC,KAAK,GAAG,CAAvB,CAA9B;;AACA,WAAK,IAAIhI,CAAC,GAAGgI,KAAb,EAAoBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAAhC,EAAuC,EAAE1M,CAAzC,EAA4C;AAC1C,cAAMgoB,KAAK,GAAGzb,MAAM,CAACvM,CAAD,CAApB;AACA,cAAM+wB,MAAM,GAAG,KAAK+Y,SAAL,CAAe9pC,CAAf,CAAf;AACA,cAAMohC,UAAU,GAAG6V,YAAY,GAAGjvB,KAAH,GAAW,EAA1C;AACA,cAAMmvB,QAAQ,GAAGj5C,aAAa,CAAC6yB,MAAM,CAACgU,KAAD,CAAP,CAA9B;AACA,cAAMjS,MAAM,GAAGsO,UAAU,CAAC0D,KAAD,CAAV1D,GAAoBx0B,MAAM,CAACM,gBAAPN,CAAwBmkB,MAAM,CAAC+T,KAAD,CAA9Bl4B,EAAuC5M,CAAvC4M,CAAnC;AACA,cAAMmmB,MAAM,GAAGqO,UAAU,CAAC2D,KAAD,CAAV3D,GAAoBkH,KAAK,IAAI6O,QAAT7O,GAAoB/D,MAAM,CAACyM,YAAPzM,EAApB+D,GAA4C/D,MAAM,CAACr3B,gBAAPq3B,CAAwB2B,QAAQ,GAAG,KAAK9C,UAAL,CAAgBmB,MAAhB,EAAwBxT,MAAxB,EAAgCmV,QAAhC,CAAH,GAA+CnV,MAAM,CAACgU,KAAD,CAArFR,EAA8FvkC,CAA9FukC,CAA/E;AACAnD,kBAAU,CAACjQ,IAAXiQ,GAAkBn7B,KAAK,CAAC6sB,MAAD,CAAL7sB,IAAiBA,KAAK,CAAC8sB,MAAD,CAAtB9sB,IAAkCkxC,QAApD/V;AACAA,kBAAU,CAAC1F,IAAX0F,GAAkBphC,CAAC,GAAG,CAAJA,IAAUqE,IAAI,CAAC8B,GAAL9B,CAAS0sB,MAAM,CAAC+T,KAAD,CAAN/T,GAAgBmmB,UAAU,CAACpS,KAAD,CAAnCzgC,IAA+C2yC,YAA3E5V;;AACA,YAAI5G,OAAJ,EAAa;AACX4G,oBAAU,CAACrQ,MAAXqQ,GAAoBrQ,MAApBqQ;AACAA,oBAAU,CAACqE,GAAXrE,GAAiByV,QAAQ,CAAC/xB,IAAT+xB,CAAc72C,CAAd62C,CAAjBzV;AACD;;AACD,YAAIwK,cAAJ,EAAoB;AAClBxK,oBAAU,CAAC7/B,OAAX6/B,GAAqByK,aAAa,IAAI,KAAKb,yBAAL,CAA+BhrC,CAA/B,EAAkCgoB,KAAK,CAACwY,MAANxY,GAAe,QAAfA,GAA0BnF,IAA5D,CAAtCue;AACD;;AACD,YAAI,CAAC6V,YAAL,EAAmB;AACjB,eAAK9K,aAAL,CAAmBnkB,KAAnB,EAA0BhoB,CAA1B,EAA6BohC,UAA7B,EAAyCve,IAAzC;AACD;;AACDq0B,kBAAU,GAAGnmB,MAAbmmB;AACD;;AACD,WAAKhL,mBAAL,CAAyBL,aAAzB,EAAwChpB,IAAxC,EAA8CmpB,SAA9C;AACD;;AACDvB,kBAAc,GAAG;AACf,YAAMn+B,IAAI,GAAG,KAAKs4B,WAAlB;AACA,YAAM9f,IAAI,GAAGxY,IAAI,CAACwY,IAALxY,IAAa,EAA1B;;AACA,UAAI,CAAC,KAAK/K,OAAL,CAAaiiB,QAAlB,EAA4B;AAC1B,YAAI9c,GAAG,GAAG,CAAV;;AACA,aAAK,IAAI1G,CAAC,GAAG8kB,IAAI,CAAC3kB,MAAL2kB,GAAc,CAA3B,EAA8B9kB,CAAC,IAAI,CAAnC,EAAsC,EAAEA,CAAxC,EAA2C;AACzC0G,aAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASqC,GAATrC,EAAcygB,IAAI,CAAC9kB,CAAD,CAAJ8kB,CAAQ/gB,IAAR+gB,CAAa,KAAKkmB,yBAAL,CAA+BhrC,CAA/B,CAAb8kB,IAAkD,CAAhEzgB,CAANqC;AACD;;AACD,eAAOA,GAAG,GAAG,CAANA,IAAWA,GAAlB;AACD;;AACD,YAAM4+B,OAAO,GAAGh5B,IAAI,CAACg5B,OAArB;AACA,YAAM8R,MAAM,GAAG9R,OAAO,CAAC/jC,OAAR+jC,IAAmBA,OAAO,CAAC/jC,OAAR+jC,CAAgBzd,WAAnCyd,IAAkD,CAAjE;;AACA,UAAI,CAACxgB,IAAI,CAAC3kB,MAAV,EAAkB;AAChB,eAAOi3C,MAAP;AACD;;AACD,YAAM9lB,UAAU,GAAGxM,IAAI,CAAC,CAAD,CAAJA,CAAQ/gB,IAAR+gB,CAAa,KAAKkmB,yBAAL,CAA+B,CAA/B,CAAblmB,CAAnB;AACA,YAAMuyB,SAAS,GAAGvyB,IAAI,CAACA,IAAI,CAAC3kB,MAAL2kB,GAAc,CAAf,CAAJA,CAAsB/gB,IAAtB+gB,CAA2B,KAAKkmB,yBAAL,CAA+BlmB,IAAI,CAAC3kB,MAAL2kB,GAAc,CAA7C,CAA3BA,CAAlB;AACA,aAAOzgB,IAAI,CAACqC,GAALrC,CAAS+yC,MAAT/yC,EAAiBitB,UAAjBjtB,EAA6BgzC,SAA7BhzC,IAA0C,CAAjD;AACD;;AAvF+C;;AAyFlD2lD,mBAAiB,CAAC/rD,EAAlB+rD,GAAuB,SAAvBA;AACAA,mBAAiB,CAACzlC,QAAlBylC,GAA6B;AAC3BthB,sBAAkB,EAAE,KADO;AAE3BwC,mBAAe,EAAE,OAFU;AAG3B1nB,YAAQ,EAAE,KAHiB;AAI3BoE,QAAI,EAAE;AAJqB,GAA7BoiC;AAMAA,mBAAiB,CAAChpC,SAAlBgpC,GAA8B;AAC5BpnC,eAAW,EAAE;AACXC,UAAI,EAAE;AADK,KADe;AAI5BO,WAAO,EAAE;AACP6vB,aAAO,EAAE;AACPtV,iBAAS,EAAE;AACTuV,eAAK,GAAG;AACN,mBAAO,EAAP;AAFO;;AAITvI,eAAK,CAAC3mC,IAAD,EAAO;AACV,mBAAO,MAAMA,IAAI,CAAC2mC,KAAX,GAAmB,IAAnB,GAA0B3mC,IAAI,CAAC2yC,cAA/B,GAAgD,GAAvD;AACD;;AANQ;AADJ;AADF,KAJmB;AAgB5BpzB,UAAM,EAAE;AACN9gB,OAAC,EAAE;AACDnE,YAAI,EAAE;AADL,OADG;AAINqE,OAAC,EAAE;AACDrE,YAAI,EAAE;AADL;AAJG;AAhBoB,GAA9B0rD;AA0BA,MAAIxB,WAAW,GAAG,aAAajqD,MAAM,CAACgtC,MAAPhtC,CAAc;AAC7C0rD,aAAS,EAAE,IADkC;AAE7CrZ,iBAAa,EAAEA,aAF8B;AAG7CoC,oBAAgB,EAAEA,gBAH2B;AAI7CoB,sBAAkB,EAAEA,kBAJyB;AAK7CwC,kBAAc,EAAEA,cAL6B;AAM7CW,uBAAmB,EAAEA,mBANwB;AAO7CkB,iBAAa,EAAEA,aAP8B;AAQ7CC,mBAAe,EAAEA,eAR4B;AAS7CsR,qBAAiB,EAAEA;AAT0B,GAAdzrD,CAA/B;;AAYA,WAAS2rD,QAAT,GAAoB;AAClB,UAAM,IAAIr6B,KAAJ,CAAU,iFAAV,CAAN;AACD;;AACD,QAAMs6B,WAAN,CAAkB;AAChB1qC,eAAW,CAACle,OAAD,EAAU;AACnB,WAAKA,OAAL,GAAeA,OAAO,IAAI,EAA1B;AACD;;AACD89C,QAAI,CAAC+K,YAAD,EAAe,CAAE;;AACrBC,WAAO,GAAG;AACR,aAAOH,QAAQ,EAAf;AACD;;AACDl5B,SAAK,CAAC7yB,KAAD,EAAQ86B,MAAR,EAAgB;AACnB,aAAOixB,QAAQ,EAAf;AACD;;AACDjxB,UAAM,CAACqxB,SAAD,EAAYrxB,MAAZ,EAAoB;AACxB,aAAOixB,QAAQ,EAAf;AACD;;AACDx/C,OAAG,CAAC4/C,SAAD,EAAYC,MAAZ,EAAoBC,IAApB,EAA0B;AAC3B,aAAON,QAAQ,EAAf;AACD;;AACDtN,QAAI,CAAC/4C,CAAD,EAAIC,CAAJ,EAAO0mD,IAAP,EAAa;AACf,aAAON,QAAQ,EAAf;AACD;;AACDO,WAAO,CAACH,SAAD,EAAYE,IAAZ,EAAkBE,OAAlB,EAA2B;AAChC,aAAOR,QAAQ,EAAf;AACD;;AACDS,SAAK,CAACL,SAAD,EAAYE,IAAZ,EAAkB;AACrB,aAAON,QAAQ,EAAf;AACD;;AAzBe;;AA2BlBC,aAAW,CAACvmC,QAAZumC,GAAuB,UAASS,OAAT,EAAkB;AACvCrsD,UAAM,CAACsP,MAAPtP,CAAc4rD,WAAW,CAAC3rD,SAA1BD,EAAqCqsD,OAArCrsD;AADF;;AAGA,MAAIssD,QAAQ,GAAG;AACbC,SAAK,EAAEX;AADM,GAAf;;AAIA,WAASY,YAAT,CAAsBC,OAAtB,EAA+Bl+C,IAA/B,EAAqC3O,KAArC,EAA4C2kB,SAA5C,EAAuD;AACrD,UAAM;AAAC6hB,gBAAD;AAAa7f,UAAb;AAAmBnY;AAAnB,QAA8Bq+C,OAApC;AACA,UAAMp+C,MAAM,GAAG+3B,UAAU,CAACC,WAAXD,CAAuB/3B,MAAtC;;AACA,QAAIA,MAAM,IAAIE,IAAI,KAAKF,MAAM,CAACE,IAA1BF,IAAkCE,IAAI,KAAK,GAA3CF,IAAkDD,OAAlDC,IAA6DkY,IAAI,CAAC3kB,MAAtE,EAA8E;AAC5E,YAAM8qD,YAAY,GAAGr+C,MAAM,CAACiyC,cAAPjyC,GAAwBzD,aAAxByD,GAAwC3D,YAA7D;;AACA,UAAI,CAAC6Z,SAAL,EAAgB;AACd,eAAOmoC,YAAY,CAACnmC,IAAD,EAAOhY,IAAP,EAAa3O,KAAb,CAAnB;AADF,aAEO,IAAIwmC,UAAU,CAAC+B,cAAf,EAA+B;AACpC,cAAM9R,EAAE,GAAG9P,IAAI,CAAC,CAAD,CAAf;AACA,cAAM7f,KAAK,GAAG,OAAO2vB,EAAE,CAACs2B,QAAV,KAAuB,UAAvB,IAAqCt2B,EAAE,CAACs2B,QAAHt2B,CAAY9nB,IAAZ8nB,CAAnD;;AACA,YAAI3vB,KAAJ,EAAW;AACT,gBAAM+C,KAAK,GAAGijD,YAAY,CAACnmC,IAAD,EAAOhY,IAAP,EAAa3O,KAAK,GAAG8G,KAArB,CAA1B;AACA,gBAAMgD,GAAG,GAAGgjD,YAAY,CAACnmC,IAAD,EAAOhY,IAAP,EAAa3O,KAAK,GAAG8G,KAArB,CAAxB;AACA,iBAAO;AAAC8D,cAAE,EAAEf,KAAK,CAACe,EAAX;AAAeD,cAAE,EAAEb,GAAG,CAACa;AAAvB,WAAP;AACD;AACF;AACF;;AACD,WAAO;AAACC,QAAE,EAAE,CAAL;AAAQD,QAAE,EAAEgc,IAAI,CAAC3kB,MAAL2kB,GAAc;AAA1B,KAAP;AACD;;AACD,WAASqmC,wBAAT,CAAkCtpC,KAAlC,EAAyC/U,IAAzC,EAA+C8wC,QAA/C,EAAyDwN,OAAzD,EAAkEtoC,SAAlE,EAA6E;AAC3E,UAAMogB,QAAQ,GAAGrhB,KAAK,CAACwlC,4BAANxlC,EAAjB;AACA,UAAM1jB,KAAK,GAAGy/C,QAAQ,CAAC9wC,IAAD,CAAtB;;AACA,SAAK,IAAI9M,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAG2iC,QAAQ,CAAC/iC,MAAhC,EAAwCH,CAAC,GAAGO,IAA5C,EAAkD,EAAEP,CAApD,EAAuD;AACrD,YAAM;AAACW,aAAD;AAAQmkB;AAAR,UAAgBoe,QAAQ,CAACljC,CAAD,CAA9B;AACA,YAAM;AAAC+I,UAAD;AAAKD;AAAL,UAAWiiD,YAAY,CAAC7nB,QAAQ,CAACljC,CAAD,CAAT,EAAc8M,IAAd,EAAoB3O,KAApB,EAA2B2kB,SAA3B,CAA7B;;AACA,WAAK,IAAI7E,CAAC,GAAGlV,EAAb,EAAiBkV,CAAC,IAAInV,EAAtB,EAA0B,EAAEmV,CAA5B,EAA+B;AAC7B,cAAMyW,OAAO,GAAG5P,IAAI,CAAC7G,CAAD,CAApB;;AACA,YAAI,CAACyW,OAAO,CAACvD,IAAb,EAAmB;AACjBi6B,iBAAO,CAAC12B,OAAD,EAAU/zB,KAAV,EAAiBsd,CAAjB,CAAPmtC;AACD;AACF;AACF;AACF;;AACD,WAASC,wBAAT,CAAkCv+C,IAAlC,EAAwC;AACtC,UAAMw+C,IAAI,GAAGx+C,IAAI,CAACzL,OAALyL,CAAa,GAAbA,MAAsB,CAAC,CAApC;AACA,UAAMy+C,IAAI,GAAGz+C,IAAI,CAACzL,OAALyL,CAAa,GAAbA,MAAsB,CAAC,CAApC;AACA,WAAO,UAASnF,GAAT,EAAcC,GAAd,EAAmB;AACxB,YAAM4jD,MAAM,GAAGF,IAAI,GAAGjnD,IAAI,CAAC8B,GAAL9B,CAASsD,GAAG,CAAClF,CAAJkF,GAAQC,GAAG,CAACnF,CAArB4B,CAAH,GAA6B,CAAhD;AACA,YAAMonD,MAAM,GAAGF,IAAI,GAAGlnD,IAAI,CAAC8B,GAAL9B,CAASsD,GAAG,CAAChF,CAAJgF,GAAQC,GAAG,CAACjF,CAArB0B,CAAH,GAA6B,CAAhD;AACA,aAAOA,IAAI,CAACuB,IAALvB,CAAUA,IAAI,CAACiB,GAALjB,CAASmnD,MAATnnD,EAAiB,CAAjBA,IAAsBA,IAAI,CAACiB,GAALjB,CAASonD,MAATpnD,EAAiB,CAAjBA,CAAhCA,CAAP;AAHF;AAKD;;AACD,WAASqnD,iBAAT,CAA2B7pC,KAA3B,EAAkC+7B,QAAlC,EAA4C9wC,IAA5C,EAAkDisC,gBAAlD,EAAoEh2B,gBAApE,EAAsF;AACpF,UAAMxY,KAAK,GAAG,EAAd;;AACA,QAAI,CAACwY,gBAAD,IAAqB,CAAClB,KAAK,CAAC8pC,aAAN9pC,CAAoB+7B,QAApB/7B,CAA1B,EAAyD;AACvD,aAAOtX,KAAP;AACD;;AACD,UAAMqhD,cAAc,GAAG,UAASl3B,OAAT,EAAkBh0B,YAAlB,EAAgCC,KAAhC,EAAuC;AAC5D,UAAI,CAACoiB,gBAAD,IAAqB,CAACgF,cAAc,CAAC2M,OAAD,EAAU7S,KAAK,CAACipB,SAAhB,EAA2B,CAA3B,CAAxC,EAAuE;AACrE;AACD;;AACD,UAAIpW,OAAO,CAACm3B,OAARn3B,CAAgBkpB,QAAQ,CAACn7C,CAAzBiyB,EAA4BkpB,QAAQ,CAACj7C,CAArC+xB,EAAwCqkB,gBAAxCrkB,CAAJ,EAA+D;AAC7DnqB,aAAK,CAAClH,IAANkH,CAAW;AAACmqB,iBAAD;AAAUh0B,sBAAV;AAAwBC;AAAxB,SAAX4J;AACD;AANH;;AAQA4gD,4BAAwB,CAACtpC,KAAD,EAAQ/U,IAAR,EAAc8wC,QAAd,EAAwBgO,cAAxB,EAAwC,IAAxC,CAAxBT;AACA,WAAO5gD,KAAP;AACD;;AACD,WAASuhD,qBAAT,CAA+BjqC,KAA/B,EAAsC+7B,QAAtC,EAAgD9wC,IAAhD,EAAsDisC,gBAAtD,EAAwE;AACtE,QAAIxuC,KAAK,GAAG,EAAZ;;AACA,aAASqhD,cAAT,CAAwBl3B,OAAxB,EAAiCh0B,YAAjC,EAA+CC,KAA/C,EAAsD;AACpD,YAAM;AAAC6yC,kBAAD;AAAaC;AAAb,UAAyB/e,OAAO,CAACskB,QAARtkB,CAAiB,CAAC,YAAD,EAAe,UAAf,CAAjBA,EAA6CqkB,gBAA7CrkB,CAA/B;AACA,YAAM;AAACntB;AAAD,UAAUN,iBAAiB,CAACytB,OAAD,EAAU;AAACjyB,SAAC,EAAEm7C,QAAQ,CAACn7C,CAAb;AAAgBE,SAAC,EAAEi7C,QAAQ,CAACj7C;AAA5B,OAAV,CAAjC;;AACA,UAAIoF,aAAa,CAACR,KAAD,EAAQisC,UAAR,EAAoBC,QAApB,CAAjB,EAAgD;AAC9ClpC,aAAK,CAAClH,IAANkH,CAAW;AAACmqB,iBAAD;AAAUh0B,sBAAV;AAAwBC;AAAxB,SAAX4J;AACD;AACF;;AACD4gD,4BAAwB,CAACtpC,KAAD,EAAQ/U,IAAR,EAAc8wC,QAAd,EAAwBgO,cAAxB,CAAxBT;AACA,WAAO5gD,KAAP;AACD;;AACD,WAASwhD,wBAAT,CAAkClqC,KAAlC,EAAyC+7B,QAAzC,EAAmD9wC,IAAnD,EAAyDgW,SAAzD,EAAoEi2B,gBAApE,EAAsFh2B,gBAAtF,EAAwG;AACtG,QAAIxY,KAAK,GAAG,EAAZ;AACA,UAAMyhD,cAAc,GAAGX,wBAAwB,CAACv+C,IAAD,CAA/C;AACA,QAAIm/C,WAAW,GAAGntD,MAAM,CAAC2F,iBAAzB;;AACA,aAASmnD,cAAT,CAAwBl3B,OAAxB,EAAiCh0B,YAAjC,EAA+CC,KAA/C,EAAsD;AACpD,YAAMkrD,OAAO,GAAGn3B,OAAO,CAACm3B,OAARn3B,CAAgBkpB,QAAQ,CAACn7C,CAAzBiyB,EAA4BkpB,QAAQ,CAACj7C,CAArC+xB,EAAwCqkB,gBAAxCrkB,CAAhB;;AACA,UAAI5R,SAAS,IAAI,CAAC+oC,OAAlB,EAA2B;AACzB;AACD;;AACD,YAAMta,MAAM,GAAG7c,OAAO,CAACw3B,cAARx3B,CAAuBqkB,gBAAvBrkB,CAAf;AACA,YAAMy3B,WAAW,GAAG,CAAC,CAACppC,gBAAF,IAAsBlB,KAAK,CAAC8pC,aAAN9pC,CAAoB0vB,MAApB1vB,CAA1C;;AACA,UAAI,CAACsqC,WAAD,IAAgB,CAACN,OAArB,EAA8B;AAC5B;AACD;;AACD,YAAMpkD,QAAQ,GAAGukD,cAAc,CAACpO,QAAD,EAAWrM,MAAX,CAA/B;;AACA,UAAI9pC,QAAQ,GAAGwkD,WAAf,EAA4B;AAC1B1hD,aAAK,GAAG,CAAC;AAACmqB,iBAAD;AAAUh0B,sBAAV;AAAwBC;AAAxB,SAAD,CAAR4J;AACA0hD,mBAAW,GAAGxkD,QAAdwkD;AAFF,aAGO,IAAIxkD,QAAQ,KAAKwkD,WAAjB,EAA8B;AACnC1hD,aAAK,CAAClH,IAANkH,CAAW;AAACmqB,iBAAD;AAAUh0B,sBAAV;AAAwBC;AAAxB,SAAX4J;AACD;AACF;;AACD4gD,4BAAwB,CAACtpC,KAAD,EAAQ/U,IAAR,EAAc8wC,QAAd,EAAwBgO,cAAxB,CAAxBT;AACA,WAAO5gD,KAAP;AACD;;AACD,WAAS6hD,eAAT,CAAyBvqC,KAAzB,EAAgC+7B,QAAhC,EAA0C9wC,IAA1C,EAAgDgW,SAAhD,EAA2Di2B,gBAA3D,EAA6Eh2B,gBAA7E,EAA+F;AAC7F,QAAI,CAACA,gBAAD,IAAqB,CAAClB,KAAK,CAAC8pC,aAAN9pC,CAAoB+7B,QAApB/7B,CAA1B,EAAyD;AACvD,aAAO,EAAP;AACD;;AACD,WAAO/U,IAAI,KAAK,GAATA,IAAgB,CAACgW,SAAjBhW,GACHg/C,qBAAqB,CAACjqC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwBisC,gBAAxB,CADlBjsC,GAEHi/C,wBAAwB,CAAClqC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwBgW,SAAxB,EAAmCi2B,gBAAnC,EAAqDh2B,gBAArD,CAF5B;AAGD;;AACD,WAASspC,YAAT,CAAsBxqC,KAAtB,EAA6B+7B,QAA7B,EAAuC9wC,IAAvC,EAA6CgW,SAA7C,EAAwDi2B,gBAAxD,EAA0E;AACxE,UAAMxuC,KAAK,GAAG,EAAd;AACA,UAAM+hD,WAAW,GAAGx/C,IAAI,KAAK,GAATA,GAAe,UAAfA,GAA4B,UAAhD;AACA,QAAIy/C,cAAc,GAAG,KAArB;AACApB,4BAAwB,CAACtpC,KAAD,EAAQ/U,IAAR,EAAc8wC,QAAd,EAAwB,CAAClpB,OAAD,EAAUh0B,YAAV,EAAwBC,KAAxB,KAAkC;AAChF,UAAI+zB,OAAO,CAAC43B,WAAD,CAAP53B,CAAqBkpB,QAAQ,CAAC9wC,IAAD,CAA7B4nB,EAAqCqkB,gBAArCrkB,CAAJ,EAA4D;AAC1DnqB,aAAK,CAAClH,IAANkH,CAAW;AAACmqB,iBAAD;AAAUh0B,sBAAV;AAAwBC;AAAxB,SAAX4J;AACAgiD,sBAAc,GAAGA,cAAc,IAAI73B,OAAO,CAACm3B,OAARn3B,CAAgBkpB,QAAQ,CAACn7C,CAAzBiyB,EAA4BkpB,QAAQ,CAACj7C,CAArC+xB,EAAwCqkB,gBAAxCrkB,CAAnC63B;AACD;AAJqB,MAAxBpB;;AAMA,QAAIroC,SAAS,IAAI,CAACypC,cAAlB,EAAkC;AAChC,aAAO,EAAP;AACD;;AACD,WAAOhiD,KAAP;AACD;;AACD,MAAIiiD,WAAW,GAAG;AAChBrB,4BADgB;AAEhBsB,SAAK,EAAE;AACL9rD,WAAK,CAACkhB,KAAD,EAAQ1d,CAAR,EAAW5C,OAAX,EAAoBw3C,gBAApB,EAAsC;AACzC,cAAM6E,QAAQ,GAAG9nB,mBAAmB,CAAC3xB,CAAD,EAAI0d,KAAJ,CAApC;AACA,cAAM/U,IAAI,GAAGvL,OAAO,CAACuL,IAARvL,IAAgB,GAA7B;AACA,cAAMwhB,gBAAgB,GAAGxhB,OAAO,CAACwhB,gBAARxhB,IAA4B,KAArD;AACA,cAAMgJ,KAAK,GAAGhJ,OAAO,CAACuhB,SAARvhB,GACVmqD,iBAAiB,CAAC7pC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwBisC,gBAAxB,EAA0Ch2B,gBAA1C,CADPxhB,GAEV6qD,eAAe,CAACvqC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwB,KAAxB,EAA+BisC,gBAA/B,EAAiDh2B,gBAAjD,CAFnB;AAGA,cAAMf,QAAQ,GAAG,EAAjB;;AACA,YAAI,CAACzX,KAAK,CAACpK,MAAX,EAAmB;AACjB,iBAAO,EAAP;AACD;;AACD0hB,aAAK,CAACwlC,4BAANxlC,GAAqC/X,OAArC+X,CAA8CvV,IAAD,IAAU;AACrD,gBAAM3L,KAAK,GAAG4J,KAAK,CAAC,CAAD,CAALA,CAAS5J,KAAvB;AACA,gBAAM+zB,OAAO,GAAGpoB,IAAI,CAACwY,IAALxY,CAAU3L,KAAV2L,CAAhB;;AACA,cAAIooB,OAAO,IAAI,CAACA,OAAO,CAACvD,IAAxB,EAA8B;AAC5BnP,oBAAQ,CAAC3e,IAAT2e,CAAc;AAAC0S,qBAAD;AAAUh0B,0BAAY,EAAE4L,IAAI,CAAC3L,KAA7B;AAAoCA;AAApC,aAAdqhB;AACD;AALH;AAOA,eAAOA,QAAP;AAnBG;;AAqBLsjB,aAAO,CAACzjB,KAAD,EAAQ1d,CAAR,EAAW5C,OAAX,EAAoBw3C,gBAApB,EAAsC;AAC3C,cAAM6E,QAAQ,GAAG9nB,mBAAmB,CAAC3xB,CAAD,EAAI0d,KAAJ,CAApC;AACA,cAAM/U,IAAI,GAAGvL,OAAO,CAACuL,IAARvL,IAAgB,IAA7B;AACA,cAAMwhB,gBAAgB,GAAGxhB,OAAO,CAACwhB,gBAARxhB,IAA4B,KAArD;AACA,YAAIgJ,KAAK,GAAGhJ,OAAO,CAACuhB,SAARvhB,GACRmqD,iBAAiB,CAAC7pC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwBisC,gBAAxB,EAA0Ch2B,gBAA1C,CADTxhB,GAEV6qD,eAAe,CAACvqC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwB,KAAxB,EAA+BisC,gBAA/B,EAAiDh2B,gBAAjD,CAFjB;;AAGA,YAAIxY,KAAK,CAACpK,MAANoK,GAAe,CAAnB,EAAsB;AACpB,gBAAM7J,YAAY,GAAG6J,KAAK,CAAC,CAAD,CAALA,CAAS7J,YAA9B;AACA,gBAAMokB,IAAI,GAAGjD,KAAK,CAACsmB,cAANtmB,CAAqBnhB,YAArBmhB,EAAmCiD,IAAhD;AACAva,eAAK,GAAG,EAARA;;AACA,eAAK,IAAIvK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8kB,IAAI,CAAC3kB,MAAzB,EAAiC,EAAEH,CAAnC,EAAsC;AACpCuK,iBAAK,CAAClH,IAANkH,CAAW;AAACmqB,qBAAO,EAAE5P,IAAI,CAAC9kB,CAAD,CAAd;AAAmBU,0BAAnB;AAAiCC,mBAAK,EAAEX;AAAxC,aAAXuK;AACD;AACF;;AACD,eAAOA,KAAP;AApCG;;AAsCLyd,WAAK,CAACnG,KAAD,EAAQ1d,CAAR,EAAW5C,OAAX,EAAoBw3C,gBAApB,EAAsC;AACzC,cAAM6E,QAAQ,GAAG9nB,mBAAmB,CAAC3xB,CAAD,EAAI0d,KAAJ,CAApC;AACA,cAAM/U,IAAI,GAAGvL,OAAO,CAACuL,IAARvL,IAAgB,IAA7B;AACA,cAAMwhB,gBAAgB,GAAGxhB,OAAO,CAACwhB,gBAARxhB,IAA4B,KAArD;AACA,eAAOmqD,iBAAiB,CAAC7pC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwBisC,gBAAxB,EAA0Ch2B,gBAA1C,CAAxB;AA1CG;;AA4CL2pC,aAAO,CAAC7qC,KAAD,EAAQ1d,CAAR,EAAW5C,OAAX,EAAoBw3C,gBAApB,EAAsC;AAC3C,cAAM6E,QAAQ,GAAG9nB,mBAAmB,CAAC3xB,CAAD,EAAI0d,KAAJ,CAApC;AACA,cAAM/U,IAAI,GAAGvL,OAAO,CAACuL,IAARvL,IAAgB,IAA7B;AACA,cAAMwhB,gBAAgB,GAAGxhB,OAAO,CAACwhB,gBAARxhB,IAA4B,KAArD;AACA,eAAO6qD,eAAe,CAACvqC,KAAD,EAAQ+7B,QAAR,EAAkB9wC,IAAlB,EAAwBvL,OAAO,CAACuhB,SAAhC,EAA2Ci2B,gBAA3C,EAA6Dh2B,gBAA7D,CAAtB;AAhDG;;AAkDLtgB,OAAC,CAACof,KAAD,EAAQ1d,CAAR,EAAW5C,OAAX,EAAoBw3C,gBAApB,EAAsC;AACrC,cAAM6E,QAAQ,GAAG9nB,mBAAmB,CAAC3xB,CAAD,EAAI0d,KAAJ,CAApC;AACA,eAAOwqC,YAAY,CAACxqC,KAAD,EAAQ+7B,QAAR,EAAkB,GAAlB,EAAuBr8C,OAAO,CAACuhB,SAA/B,EAA0Ci2B,gBAA1C,CAAnB;AApDG;;AAsDLp2C,OAAC,CAACkf,KAAD,EAAQ1d,CAAR,EAAW5C,OAAX,EAAoBw3C,gBAApB,EAAsC;AACrC,cAAM6E,QAAQ,GAAG9nB,mBAAmB,CAAC3xB,CAAD,EAAI0d,KAAJ,CAApC;AACA,eAAOwqC,YAAY,CAACxqC,KAAD,EAAQ+7B,QAAR,EAAkB,GAAlB,EAAuBr8C,OAAO,CAACuhB,SAA/B,EAA0Ci2B,gBAA1C,CAAnB;AACD;;AAzDI;AAFS,GAAlB;AA+DA,QAAM4T,gBAAgB,GAAG,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,EAAyB,QAAzB,CAAzB;;AACA,WAASC,gBAAT,CAA0BrmD,KAA1B,EAAiCq3C,QAAjC,EAA2C;AACzC,WAAOr3C,KAAK,CAAC2pB,MAAN3pB,CAAa/D,CAAC,IAAIA,CAAC,CAAC0yB,GAAF1yB,KAAUo7C,QAA5Br3C,CAAP;AACD;;AACD,WAASsmD,2BAAT,CAAqCtmD,KAArC,EAA4CuG,IAA5C,EAAkD;AAChD,WAAOvG,KAAK,CAAC2pB,MAAN3pB,CAAa/D,CAAC,IAAImqD,gBAAgB,CAACtrD,OAAjBsrD,CAAyBnqD,CAAC,CAAC0yB,GAA3By3B,MAAoC,CAAC,CAArCA,IAA0CnqD,CAAC,CAACkzB,GAAFlzB,CAAMsK,IAANtK,KAAesK,IAA3EvG,CAAP;AACD;;AACD,WAASumD,YAAT,CAAsBvmD,KAAtB,EAA6BxG,OAA7B,EAAsC;AACpC,WAAOwG,KAAK,CAACV,IAANU,CAAW,CAAC1C,CAAD,EAAIC,CAAJ,KAAU;AAC1B,YAAMtD,EAAE,GAAGT,OAAO,GAAG+D,CAAH,GAAOD,CAAzB;AACA,YAAMpD,EAAE,GAAGV,OAAO,GAAG8D,CAAH,GAAOC,CAAzB;AACA,aAAOtD,EAAE,CAACuf,MAAHvf,KAAcC,EAAE,CAACsf,MAAjBvf,GACLA,EAAE,CAACG,KAAHH,GAAWC,EAAE,CAACE,KADTH,GAELA,EAAE,CAACuf,MAAHvf,GAAYC,EAAE,CAACsf,MAFjB;AAHK,MAAP;AAOD;;AACD,WAASgtC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,UAAMC,WAAW,GAAG,EAApB;AACA,QAAIjtD,CAAJ,EAAOO,IAAP,EAAam1B,GAAb,EAAkBR,GAAlB,EAAuBmO,KAAvB,EAA8B6pB,WAA9B;;AACA,SAAKltD,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG,CAACysD,KAAK,IAAI,EAAV,EAAc7sD,MAAjC,EAAyCH,CAAC,GAAGO,IAA7C,EAAmD,EAAEP,CAArD,EAAwD;AACtD01B,SAAG,GAAGs3B,KAAK,CAAChtD,CAAD,CAAX01B;AACA,OAAC;AAACkoB,gBAAQ,EAAE1oB,GAAX;AAAgB3zB,eAAO,EAAE;AAAC8hC,eAAD;AAAQ6pB,qBAAW,GAAG;AAAtB;AAAzB,UAAqDx3B,GAAtD;AACAu3B,iBAAW,CAAC5pD,IAAZ4pD,CAAiB;AACftsD,aAAK,EAAEX,CADQ;AAEf01B,WAFe;AAGfR,WAHe;AAIf8a,kBAAU,EAAEta,GAAG,CAACoa,YAAJpa,EAJG;AAKf3V,cAAM,EAAE2V,GAAG,CAAC3V,MALG;AAMfsjB,aAAK,EAAEA,KAAK,IAAKnO,GAAG,GAAGmO,KANR;AAOf6pB;AAPe,OAAjBD;AASD;;AACD,WAAOA,WAAP;AACD;;AACD,WAASE,WAAT,CAAqBC,OAArB,EAA8B;AAC5B,UAAMlpB,MAAM,GAAG,EAAf;;AACA,SAAK,MAAMmpB,IAAX,IAAmBD,OAAnB,EAA4B;AAC1B,YAAM;AAAC/pB,aAAD;AAAQnO,WAAR;AAAag4B;AAAb,UAA4BG,IAAlC;;AACA,UAAI,CAAChqB,KAAD,IAAU,CAACspB,gBAAgB,CAACx+B,QAAjBw+B,CAA0Bz3B,GAA1By3B,CAAf,EAA+C;AAC7C;AACD;;AACD,YAAM79B,MAAM,GAAGoV,MAAM,CAACb,KAAD,CAANa,KAAkBA,MAAM,CAACb,KAAD,CAANa,GAAgB;AAACx3B,aAAK,EAAE,CAAR;AAAW4gD,cAAM,EAAE,CAAnB;AAAsBvtC,cAAM,EAAE,CAA9B;AAAiChc,YAAI,EAAE;AAAvC,OAAlCmgC,CAAf;;AACApV,YAAM,CAACpiB,KAAPoiB;AACAA,YAAM,CAAC/O,MAAP+O,IAAiBo+B,WAAjBp+B;AACD;;AACD,WAAOoV,MAAP;AACD;;AACD,WAASqpB,aAAT,CAAuBH,OAAvB,EAAgCI,MAAhC,EAAwC;AACtC,UAAMtpB,MAAM,GAAGipB,WAAW,CAACC,OAAD,CAA1B;AACA,UAAM;AAACK,kBAAD;AAAeC;AAAf,QAAgCF,MAAtC;AACA,QAAIxtD,CAAJ,EAAOO,IAAP,EAAaotD,MAAb;;AACA,SAAK3tD,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG6sD,OAAO,CAACjtD,MAA3B,EAAmCH,CAAC,GAAGO,IAAvC,EAA6C,EAAEP,CAA/C,EAAkD;AAChD2tD,YAAM,GAAGP,OAAO,CAACptD,CAAD,CAAhB2tD;AACA,YAAM;AAACxK;AAAD,UAAawK,MAAM,CAACj4B,GAA1B;AACA,YAAM2N,KAAK,GAAGa,MAAM,CAACypB,MAAM,CAACtqB,KAAR,CAApB;AACA,YAAM5D,MAAM,GAAG4D,KAAK,IAAIsqB,MAAM,CAACT,WAAPS,GAAqBtqB,KAAK,CAACtjB,MAAnD;;AACA,UAAI4tC,MAAM,CAAC3d,UAAX,EAAuB;AACrB2d,cAAM,CAACvoC,KAAPuoC,GAAeluB,MAAM,GAAGA,MAAM,GAAGguB,YAAZ,GAA2BtK,QAAQ,IAAIqK,MAAM,CAACI,cAAnED;AACAA,cAAM,CAACnnC,MAAPmnC,GAAgBD,aAAhBC;AAFF,aAGO;AACLA,cAAM,CAACvoC,KAAPuoC,GAAeF,YAAfE;AACAA,cAAM,CAACnnC,MAAPmnC,GAAgBluB,MAAM,GAAGA,MAAM,GAAGiuB,aAAZ,GAA4BvK,QAAQ,IAAIqK,MAAM,CAACK,eAArEF;AACD;AACF;;AACD,WAAOzpB,MAAP;AACD;;AACD,WAAS4pB,gBAAT,CAA0Bd,KAA1B,EAAiC;AAC/B,UAAMC,WAAW,GAAGF,SAAS,CAACC,KAAD,CAA7B;AACA,UAAM7J,QAAQ,GAAG2J,YAAY,CAACG,WAAW,CAAC/8B,MAAZ+8B,CAAmBI,IAAI,IAAIA,IAAI,CAAC33B,GAAL23B,CAASlK,QAApC8J,CAAD,EAAgD,IAAhD,CAA7B;AACA,UAAMhhD,IAAI,GAAG6gD,YAAY,CAACF,gBAAgB,CAACK,WAAD,EAAc,MAAd,CAAjB,EAAwC,IAAxC,CAAzB;AACA,UAAM/gD,KAAK,GAAG4gD,YAAY,CAACF,gBAAgB,CAACK,WAAD,EAAc,OAAd,CAAjB,CAA1B;AACA,UAAM9kC,GAAG,GAAG2kC,YAAY,CAACF,gBAAgB,CAACK,WAAD,EAAc,KAAd,CAAjB,EAAuC,IAAvC,CAAxB;AACA,UAAM7kC,MAAM,GAAG0kC,YAAY,CAACF,gBAAgB,CAACK,WAAD,EAAc,QAAd,CAAjB,CAA3B;AACA,UAAMc,gBAAgB,GAAGlB,2BAA2B,CAACI,WAAD,EAAc,GAAd,CAApD;AACA,UAAMe,cAAc,GAAGnB,2BAA2B,CAACI,WAAD,EAAc,GAAd,CAAlD;AACA,WAAO;AACL9J,cADK;AAEL8K,gBAAU,EAAEhiD,IAAI,CAAC8hC,MAAL9hC,CAAYkc,GAAZlc,CAFP;AAGLiiD,oBAAc,EAAEhiD,KAAK,CAAC6hC,MAAN7hC,CAAa8hD,cAAb9hD,EAA6B6hC,MAA7B7hC,CAAoCkc,MAApClc,EAA4C6hC,MAA5C7hC,CAAmD6hD,gBAAnD7hD,CAHX;AAIL4+B,eAAS,EAAE8hB,gBAAgB,CAACK,WAAD,EAAc,WAAd,CAJtB;AAKLkB,cAAQ,EAAEliD,IAAI,CAAC8hC,MAAL9hC,CAAYC,KAAZD,EAAmB8hC,MAAnB9hC,CAA0B+hD,cAA1B/hD,CALL;AAML+jC,gBAAU,EAAE7nB,GAAG,CAAC4lB,MAAJ5lB,CAAWC,MAAXD,EAAmB4lB,MAAnB5lB,CAA0B4lC,gBAA1B5lC;AANP,KAAP;AAQD;;AACD,WAASimC,cAAT,CAAwBC,UAAxB,EAAoCvjB,SAApC,EAA+CjnC,CAA/C,EAAkDC,CAAlD,EAAqD;AACnD,WAAOO,IAAI,CAACqC,GAALrC,CAASgqD,UAAU,CAACxqD,CAAD,CAAnBQ,EAAwBymC,SAAS,CAACjnC,CAAD,CAAjCQ,IAAwCA,IAAI,CAACqC,GAALrC,CAASgqD,UAAU,CAACvqD,CAAD,CAAnBO,EAAwBymC,SAAS,CAAChnC,CAAD,CAAjCO,CAA/C;AACD;;AACD,WAASiqD,gBAAT,CAA0BD,UAA1B,EAAsCE,UAAtC,EAAkD;AAChDF,cAAU,CAAClmC,GAAXkmC,GAAiBhqD,IAAI,CAACqC,GAALrC,CAASgqD,UAAU,CAAClmC,GAApB9jB,EAAyBkqD,UAAU,CAACpmC,GAApC9jB,CAAjBgqD;AACAA,cAAU,CAACpiD,IAAXoiD,GAAkBhqD,IAAI,CAACqC,GAALrC,CAASgqD,UAAU,CAACpiD,IAApB5H,EAA0BkqD,UAAU,CAACtiD,IAArC5H,CAAlBgqD;AACAA,cAAU,CAACjmC,MAAXimC,GAAoBhqD,IAAI,CAACqC,GAALrC,CAASgqD,UAAU,CAACjmC,MAApB/jB,EAA4BkqD,UAAU,CAACnmC,MAAvC/jB,CAApBgqD;AACAA,cAAU,CAACniD,KAAXmiD,GAAmBhqD,IAAI,CAACqC,GAALrC,CAASgqD,UAAU,CAACniD,KAApB7H,EAA2BkqD,UAAU,CAACriD,KAAtC7H,CAAnBgqD;AACD;;AACD,WAASG,UAAT,CAAoB1jB,SAApB,EAA+B0iB,MAA/B,EAAuCG,MAAvC,EAA+CzpB,MAA/C,EAAuD;AACrD,UAAM;AAAChP,SAAD;AAAMQ;AAAN,QAAai4B,MAAnB;AACA,UAAMU,UAAU,GAAGvjB,SAAS,CAACujB,UAA7B;;AACA,QAAI,CAACzvD,QAAQ,CAACs2B,GAAD,CAAb,EAAoB;AAClB,UAAIy4B,MAAM,CAAC5pD,IAAX,EAAiB;AACf+mC,iBAAS,CAAC5V,GAAD,CAAT4V,IAAkB6iB,MAAM,CAAC5pD,IAAzB+mC;AACD;;AACD,YAAMzH,KAAK,GAAGa,MAAM,CAACypB,MAAM,CAACtqB,KAAR,CAANa,IAAwB;AAACngC,YAAI,EAAE,CAAP;AAAU2I,aAAK,EAAE;AAAjB,OAAtC;AACA22B,WAAK,CAACt/B,IAANs/B,GAAah/B,IAAI,CAACqC,GAALrC,CAASg/B,KAAK,CAACt/B,IAAfM,EAAqBspD,MAAM,CAAC3d,UAAP2d,GAAoBj4B,GAAG,CAAClP,MAAxBmnC,GAAiCj4B,GAAG,CAACtQ,KAA1D/gB,CAAbg/B;AACAsqB,YAAM,CAAC5pD,IAAP4pD,GAActqB,KAAK,CAACt/B,IAANs/B,GAAaA,KAAK,CAAC32B,KAAjCihD;AACA7iB,eAAS,CAAC5V,GAAD,CAAT4V,IAAkB6iB,MAAM,CAAC5pD,IAAzB+mC;AACD;;AACD,QAAIpV,GAAG,CAAC+pB,UAAR,EAAoB;AAClB6O,sBAAgB,CAACD,UAAD,EAAa34B,GAAG,CAAC+pB,UAAJ/pB,EAAb,CAAhB44B;AACD;;AACD,UAAMG,QAAQ,GAAGpqD,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYmpD,MAAM,CAACkB,UAAPlB,GAAoBY,cAAc,CAACC,UAAD,EAAavjB,SAAb,EAAwB,MAAxB,EAAgC,OAAhC,CAA9CzmC,CAAjB;AACA,UAAMsqD,SAAS,GAAGtqD,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYmpD,MAAM,CAACoB,WAAPpB,GAAqBY,cAAc,CAACC,UAAD,EAAavjB,SAAb,EAAwB,KAAxB,EAA+B,QAA/B,CAA/CzmC,CAAlB;AACA,UAAMwqD,YAAY,GAAGJ,QAAQ,KAAK3jB,SAAS,CAACz4B,CAA5C;AACA,UAAMy8C,aAAa,GAAGH,SAAS,KAAK7jB,SAAS,CAACt6B,CAA9C;AACAs6B,aAAS,CAACz4B,CAAVy4B,GAAc2jB,QAAd3jB;AACAA,aAAS,CAACt6B,CAAVs6B,GAAc6jB,SAAd7jB;AACA,WAAO6iB,MAAM,CAAC3d,UAAP2d,GACH;AAACoB,UAAI,EAAEF,YAAP;AAAqBG,WAAK,EAAEF;AAA5B,KADGnB,GAEH;AAACoB,UAAI,EAAED,aAAP;AAAsBE,WAAK,EAAEH;AAA7B,KAFJ;AAGD;;AACD,WAASI,gBAAT,CAA0BnkB,SAA1B,EAAqC;AACnC,UAAMujB,UAAU,GAAGvjB,SAAS,CAACujB,UAA7B;;AACA,aAASa,SAAT,CAAmBh6B,GAAnB,EAAwB;AACtB,YAAMxI,MAAM,GAAGroB,IAAI,CAACqC,GAALrC,CAASgqD,UAAU,CAACn5B,GAAD,CAAVm5B,GAAkBvjB,SAAS,CAAC5V,GAAD,CAApC7wB,EAA2C,CAA3CA,CAAf;AACAymC,eAAS,CAAC5V,GAAD,CAAT4V,IAAkBpe,MAAlBoe;AACA,aAAOpe,MAAP;AACD;;AACDoe,aAAS,CAACnoC,CAAVmoC,IAAeokB,SAAS,CAAC,KAAD,CAAxBpkB;AACAA,aAAS,CAACroC,CAAVqoC,IAAeokB,SAAS,CAAC,MAAD,CAAxBpkB;AACAokB,aAAS,CAAC,OAAD,CAATA;AACAA,aAAS,CAAC,QAAD,CAATA;AACD;;AACD,WAASC,UAAT,CAAoBnf,UAApB,EAAgClF,SAAhC,EAA2C;AACzC,UAAMujB,UAAU,GAAGvjB,SAAS,CAACujB,UAA7B;;AACA,aAASe,kBAAT,CAA4Bt6B,SAA5B,EAAuC;AACrC,YAAM5M,MAAM,GAAG;AAACjc,YAAI,EAAE,CAAP;AAAUkc,WAAG,EAAE,CAAf;AAAkBjc,aAAK,EAAE,CAAzB;AAA4Bkc,cAAM,EAAE;AAApC,OAAf;AACA0M,eAAS,CAAChrB,OAAVgrB,CAAmBI,GAAD,IAAS;AACzBhN,cAAM,CAACgN,GAAD,CAANhN,GAAc7jB,IAAI,CAACqC,GAALrC,CAASymC,SAAS,CAAC5V,GAAD,CAAlB7wB,EAAyBgqD,UAAU,CAACn5B,GAAD,CAAnC7wB,CAAd6jB;AADF;AAGA,aAAOA,MAAP;AACD;;AACD,WAAO8nB,UAAU,GACbof,kBAAkB,CAAC,CAAC,MAAD,EAAS,OAAT,CAAD,CADL,GAEbA,kBAAkB,CAAC,CAAC,KAAD,EAAQ,QAAR,CAAD,CAFtB;AAGD;;AACD,WAASC,QAAT,CAAkBrC,KAAlB,EAAyBliB,SAAzB,EAAoC0iB,MAApC,EAA4CtpB,MAA5C,EAAoD;AAClD,UAAMorB,UAAU,GAAG,EAAnB;AACA,QAAItvD,CAAJ,EAAOO,IAAP,EAAaotD,MAAb,EAAqBj4B,GAArB,EAA0B65B,KAA1B,EAAiC3hD,OAAjC;;AACA,SAAK5N,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGysD,KAAK,CAAC7sD,MAApBH,EAA4BuvD,KAAK,GAAG,CAAzC,EAA4CvvD,CAAC,GAAGO,IAAhD,EAAsD,EAAEP,CAAxD,EAA2D;AACzD2tD,YAAM,GAAGX,KAAK,CAAChtD,CAAD,CAAd2tD;AACAj4B,SAAG,GAAGi4B,MAAM,CAACj4B,GAAbA;AACAA,SAAG,CAAC+K,MAAJ/K,CACEi4B,MAAM,CAACvoC,KAAPuoC,IAAgB7iB,SAAS,CAACz4B,CAD5BqjB,EAEEi4B,MAAM,CAACnnC,MAAPmnC,IAAiB7iB,SAAS,CAACt6B,CAF7BklB,EAGEy5B,UAAU,CAACxB,MAAM,CAAC3d,UAAR,EAAoBlF,SAApB,CAHZpV;AAKA,YAAM;AAACq5B,YAAD;AAAOC;AAAP,UAAgBR,UAAU,CAAC1jB,SAAD,EAAY0iB,MAAZ,EAAoBG,MAApB,EAA4BzpB,MAA5B,CAAhC;AACAqrB,WAAK,IAAIR,IAAI,IAAIO,UAAU,CAACnvD,MAA5BovD;AACA3hD,aAAO,GAAGA,OAAO,IAAIohD,KAArBphD;;AACA,UAAI,CAAC8nB,GAAG,CAACytB,QAAT,EAAmB;AACjBmM,kBAAU,CAACjsD,IAAXisD,CAAgB3B,MAAhB2B;AACD;AACF;;AACD,WAAOC,KAAK,IAAIF,QAAQ,CAACC,UAAD,EAAaxkB,SAAb,EAAwB0iB,MAAxB,EAAgCtpB,MAAhC,CAAjBqrB,IAA4D3hD,OAAnE;AACD;;AACD,WAAS4hD,UAAT,CAAoB95B,GAApB,EAAyBzpB,IAAzB,EAA+Bkc,GAA/B,EAAoC/C,KAApC,EAA2CoB,MAA3C,EAAmD;AACjDkP,OAAG,CAACvN,GAAJuN,GAAUvN,GAAVuN;AACAA,OAAG,CAACzpB,IAAJypB,GAAWzpB,IAAXypB;AACAA,OAAG,CAACxpB,KAAJwpB,GAAYzpB,IAAI,GAAGmZ,KAAnBsQ;AACAA,OAAG,CAACtN,MAAJsN,GAAavN,GAAG,GAAG3B,MAAnBkP;AACAA,OAAG,CAACtQ,KAAJsQ,GAAYtQ,KAAZsQ;AACAA,OAAG,CAAClP,MAAJkP,GAAalP,MAAbkP;AACD;;AACD,WAAS+5B,UAAT,CAAoBzC,KAApB,EAA2BliB,SAA3B,EAAsC0iB,MAAtC,EAA8CtpB,MAA9C,EAAsD;AACpD,UAAMwrB,WAAW,GAAGlC,MAAM,CAAClT,OAA3B;AACA,QAAI;AAAC73C,OAAD;AAAIE;AAAJ,QAASmoC,SAAb;;AACA,SAAK,MAAM6iB,MAAX,IAAqBX,KAArB,EAA4B;AAC1B,YAAMt3B,GAAG,GAAGi4B,MAAM,CAACj4B,GAAnB;AACA,YAAM2N,KAAK,GAAGa,MAAM,CAACypB,MAAM,CAACtqB,KAAR,CAANa,IAAwB;AAACx3B,aAAK,EAAE,CAAR;AAAW4gD,cAAM,EAAE,CAAnB;AAAsBvtC,cAAM,EAAE;AAA9B,OAAtC;AACA,YAAMA,MAAM,GAAI4tC,MAAM,CAACT,WAAPS,GAAqBtqB,KAAK,CAACtjB,MAA3B4tC,IAAsC,CAAtD;;AACA,UAAIA,MAAM,CAAC3d,UAAX,EAAuB;AACrB,cAAM5qB,KAAK,GAAG0lB,SAAS,CAACz4B,CAAVy4B,GAAc/qB,MAA5B;AACA,cAAMyG,MAAM,GAAG6c,KAAK,CAACt/B,IAANs/B,IAAc3N,GAAG,CAAClP,MAAjC;;AACA,YAAI9iB,OAAO,CAAC2/B,KAAK,CAACr7B,KAAP,CAAX,EAA0B;AACxBrF,WAAC,GAAG0gC,KAAK,CAACr7B,KAAVrF;AACD;;AACD,YAAI+yB,GAAG,CAACytB,QAAR,EAAkB;AAChBqM,oBAAU,CAAC95B,GAAD,EAAMg6B,WAAW,CAACzjD,IAAlB,EAAwBtJ,CAAxB,EAA2B6qD,MAAM,CAACkB,UAAPlB,GAAoBkC,WAAW,CAACxjD,KAAhCshD,GAAwCkC,WAAW,CAACzjD,IAA/E,EAAqFua,MAArF,CAAVgpC;AADF,eAEO;AACLA,oBAAU,CAAC95B,GAAD,EAAMoV,SAAS,CAAC7+B,IAAV6+B,GAAiBzH,KAAK,CAACiqB,MAA7B,EAAqC3qD,CAArC,EAAwCyiB,KAAxC,EAA+CoB,MAA/C,CAAVgpC;AACD;;AACDnsB,aAAK,CAACr7B,KAANq7B,GAAc1gC,CAAd0gC;AACAA,aAAK,CAACiqB,MAANjqB,IAAgBje,KAAhBie;AACA1gC,SAAC,GAAG+yB,GAAG,CAACtN,MAARzlB;AAbF,aAcO;AACL,cAAM6jB,MAAM,GAAGskB,SAAS,CAACt6B,CAAVs6B,GAAc/qB,MAA7B;AACA,cAAMqF,KAAK,GAAGie,KAAK,CAACt/B,IAANs/B,IAAc3N,GAAG,CAACtQ,KAAhC;;AACA,YAAI1hB,OAAO,CAAC2/B,KAAK,CAACr7B,KAAP,CAAX,EAA0B;AACxBvF,WAAC,GAAG4gC,KAAK,CAACr7B,KAAVvF;AACD;;AACD,YAAIizB,GAAG,CAACytB,QAAR,EAAkB;AAChBqM,oBAAU,CAAC95B,GAAD,EAAMjzB,CAAN,EAASitD,WAAW,CAACvnC,GAArB,EAA0B/C,KAA1B,EAAiCooC,MAAM,CAACoB,WAAPpB,GAAqBkC,WAAW,CAACtnC,MAAjColC,GAA0CkC,WAAW,CAACvnC,GAAvF,CAAVqnC;AADF,eAEO;AACLA,oBAAU,CAAC95B,GAAD,EAAMjzB,CAAN,EAASqoC,SAAS,CAAC3iB,GAAV2iB,GAAgBzH,KAAK,CAACiqB,MAA/B,EAAuCloC,KAAvC,EAA8CoB,MAA9C,CAAVgpC;AACD;;AACDnsB,aAAK,CAACr7B,KAANq7B,GAAc5gC,CAAd4gC;AACAA,aAAK,CAACiqB,MAANjqB,IAAgB7c,MAAhB6c;AACA5gC,SAAC,GAAGizB,GAAG,CAACxpB,KAARzJ;AACD;AACF;;AACDqoC,aAAS,CAACroC,CAAVqoC,GAAcroC,CAAdqoC;AACAA,aAAS,CAACnoC,CAAVmoC,GAAcnoC,CAAdmoC;AACD;;AACDvmB,UAAQ,CAAC/Z,GAAT+Z,CAAa,QAAbA,EAAuB;AACrBorC,eAAW,EAAE,IADQ;AAErBrV,WAAO,EAAE;AACPnyB,SAAG,EAAE,CADE;AAEPjc,WAAK,EAAE,CAFA;AAGPkc,YAAM,EAAE,CAHD;AAIPnc,UAAI,EAAE;AAJC;AAFY,GAAvBsY;AASA,MAAI6oC,OAAO,GAAG;AACZwC,UAAM,CAAC/tC,KAAD,EAAQ7d,IAAR,EAAc;AAClB,UAAI,CAAC6d,KAAK,CAACmrC,KAAX,EAAkB;AAChBnrC,aAAK,CAACmrC,KAANnrC,GAAc,EAAdA;AACD;;AACD7d,UAAI,CAACm/C,QAALn/C,GAAgBA,IAAI,CAACm/C,QAALn/C,IAAiB,KAAjCA;AACAA,UAAI,CAAC45C,QAAL55C,GAAgBA,IAAI,CAAC45C,QAAL55C,IAAiB,KAAjCA;AACAA,UAAI,CAAC+b,MAAL/b,GAAcA,IAAI,CAAC+b,MAAL/b,IAAe,CAA7BA;;AACAA,UAAI,CAACijD,OAALjjD,GAAeA,IAAI,CAACijD,OAALjjD,IAAgB,YAAW;AACxC,eAAO,CAAC;AACNmjD,WAAC,EAAE,CADG;;AAEN7oB,cAAI,CAACwM,SAAD,EAAY;AACd9mC,gBAAI,CAACs6B,IAALt6B,CAAU8mC,SAAV9mC;AACD;;AAJK,SAAD,CAAP;AADF;;AAQA6d,WAAK,CAACmrC,KAANnrC,CAAYxe,IAAZwe,CAAiB7d,IAAjB6d;AAhBU;;AAkBZguC,aAAS,CAAChuC,KAAD,EAAQiuC,UAAR,EAAoB;AAC3B,YAAMnvD,KAAK,GAAGkhB,KAAK,CAACmrC,KAANnrC,GAAcA,KAAK,CAACmrC,KAANnrC,CAAYxgB,OAAZwgB,CAAoBiuC,UAApBjuC,CAAdA,GAAgD,CAAC,CAA/D;;AACA,UAAIlhB,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBkhB,aAAK,CAACmrC,KAANnrC,CAAYxX,MAAZwX,CAAmBlhB,KAAnBkhB,EAA0B,CAA1BA;AACD;AAtBS;;AAwBZggB,aAAS,CAAChgB,KAAD,EAAQ7d,IAAR,EAAczC,OAAd,EAAuB;AAC9ByC,UAAI,CAACm/C,QAALn/C,GAAgBzC,OAAO,CAAC4hD,QAAxBn/C;AACAA,UAAI,CAAC45C,QAAL55C,GAAgBzC,OAAO,CAACq8C,QAAxB55C;AACAA,UAAI,CAAC+b,MAAL/b,GAAczC,OAAO,CAACwe,MAAtB/b;AA3BU;;AA6BZy8B,UAAM,CAAC5e,KAAD,EAAQuD,KAAR,EAAeoB,MAAf,EAAuBupC,UAAvB,EAAmC;AACvC,UAAI,CAACluC,KAAL,EAAY;AACV;AACD;;AACD,YAAMy4B,OAAO,GAAGvuB,SAAS,CAAClK,KAAK,CAACtgB,OAANsgB,CAAc8rC,MAAd9rC,CAAqBy4B,OAAtB,CAAzB;AACA,YAAMsT,cAAc,GAAGvpD,IAAI,CAACqC,GAALrC,CAAS+gB,KAAK,GAAGk1B,OAAO,CAACl1B,KAAzB/gB,EAAgC,CAAhCA,CAAvB;AACA,YAAMwpD,eAAe,GAAGxpD,IAAI,CAACqC,GAALrC,CAASmiB,MAAM,GAAG8zB,OAAO,CAAC9zB,MAA1BniB,EAAkC,CAAlCA,CAAxB;AACA,YAAM2oD,KAAK,GAAGc,gBAAgB,CAACjsC,KAAK,CAACmrC,KAAP,CAA9B;AACA,YAAMgD,aAAa,GAAGhD,KAAK,CAACmB,QAA5B;AACA,YAAM8B,eAAe,GAAGjD,KAAK,CAAChd,UAA9B;AACAnwC,UAAI,CAACgiB,KAAK,CAACmrC,KAAP,EAAct3B,GAAG,IAAI;AACvB,YAAI,OAAOA,GAAG,CAACmqB,YAAX,KAA4B,UAAhC,EAA4C;AAC1CnqB,aAAG,CAACmqB,YAAJnqB;AACD;AAHC,QAAJ71B;AAKA,YAAMqwD,uBAAuB,GAAGF,aAAa,CAAC/wB,MAAd+wB,CAAqB,CAAC1a,KAAD,EAAQ+X,IAAR,KACnDA,IAAI,CAAC33B,GAAL23B,CAAS9rD,OAAT8rD,IAAoBA,IAAI,CAAC33B,GAAL23B,CAAS9rD,OAAT8rD,CAAiB/U,OAAjB+U,KAA6B,KAAjDA,GAAyD/X,KAAzD+X,GAAiE/X,KAAK,GAAG,CAD3C0a,EAC8C,CAD9CA,KACoD,CADpF;AAEA,YAAMxC,MAAM,GAAGjvD,MAAM,CAACgtC,MAAPhtC,CAAc;AAC3BmwD,kBAAU,EAAEtpC,KADe;AAE3BwpC,mBAAW,EAAEpoC,MAFc;AAG3B8zB,eAH2B;AAI3BsT,sBAJ2B;AAK3BC,uBAL2B;AAM3BJ,oBAAY,EAAEG,cAAc,GAAG,CAAjBA,GAAqBsC,uBANR;AAO3BxC,qBAAa,EAAEG,eAAe,GAAG;AAPN,OAAdtvD,CAAf;AASA,YAAM8vD,UAAU,GAAG9vD,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkB+7C,OAAlB/7C,CAAnB;AACA+vD,sBAAgB,CAACD,UAAD,EAAatiC,SAAS,CAACgkC,UAAD,CAAtB,CAAhBzB;AACA,YAAMxjB,SAAS,GAAGvsC,MAAM,CAACsP,MAAPtP,CAAc;AAC9B8vD,kBAD8B;AAE9Bh8C,SAAC,EAAEu7C,cAF2B;AAG9Bp9C,SAAC,EAAEq9C,eAH2B;AAI9BprD,SAAC,EAAE63C,OAAO,CAACruC,IAJmB;AAK9BtJ,SAAC,EAAE23C,OAAO,CAACnyB;AALmB,OAAd5pB,EAMf+7C,OANe/7C,CAAlB;AAOA,YAAM2lC,MAAM,GAAGqpB,aAAa,CAACyC,aAAa,CAACjiB,MAAdiiB,CAAqBC,eAArBD,CAAD,EAAwCxC,MAAxC,CAA5B;AACA6B,cAAQ,CAACrC,KAAK,CAAC7J,QAAP,EAAiBrY,SAAjB,EAA4B0iB,MAA5B,EAAoCtpB,MAApC,CAARmrB;AACAA,cAAQ,CAACW,aAAD,EAAgBllB,SAAhB,EAA2B0iB,MAA3B,EAAmCtpB,MAAnC,CAARmrB;;AACA,UAAIA,QAAQ,CAACY,eAAD,EAAkBnlB,SAAlB,EAA6B0iB,MAA7B,EAAqCtpB,MAArC,CAAZ,EAA0D;AACxDmrB,gBAAQ,CAACW,aAAD,EAAgBllB,SAAhB,EAA2B0iB,MAA3B,EAAmCtpB,MAAnC,CAARmrB;AACD;;AACDJ,sBAAgB,CAACnkB,SAAD,CAAhBmkB;AACAQ,gBAAU,CAACzC,KAAK,CAACiB,UAAP,EAAmBnjB,SAAnB,EAA8B0iB,MAA9B,EAAsCtpB,MAAtC,CAAVurB;AACA3kB,eAAS,CAACroC,CAAVqoC,IAAeA,SAAS,CAACz4B,CAAzBy4B;AACAA,eAAS,CAACnoC,CAAVmoC,IAAeA,SAAS,CAACt6B,CAAzBs6B;AACA2kB,gBAAU,CAACzC,KAAK,CAACkB,cAAP,EAAuBpjB,SAAvB,EAAkC0iB,MAAlC,EAA0CtpB,MAA1C,CAAVurB;AACA5tC,WAAK,CAACipB,SAANjpB,GAAkB;AAChB5V,YAAI,EAAE6+B,SAAS,CAAC7+B,IADA;AAEhBkc,WAAG,EAAE2iB,SAAS,CAAC3iB,GAFC;AAGhBjc,aAAK,EAAE4+B,SAAS,CAAC7+B,IAAV6+B,GAAiBA,SAAS,CAACz4B,CAHlB;AAIhB+V,cAAM,EAAE0iB,SAAS,CAAC3iB,GAAV2iB,GAAgBA,SAAS,CAACt6B,CAJlB;AAKhBgW,cAAM,EAAEskB,SAAS,CAACt6B,CALF;AAMhB4U,aAAK,EAAE0lB,SAAS,CAACz4B;AAND,OAAlBwP;AAQAhiB,UAAI,CAACmtD,KAAK,CAACliB,SAAP,EAAmB6iB,MAAD,IAAY;AAChC,cAAMj4B,GAAG,GAAGi4B,MAAM,CAACj4B,GAAnB;AACAn3B,cAAM,CAACsP,MAAPtP,CAAcm3B,GAAdn3B,EAAmBsjB,KAAK,CAACipB,SAAzBvsC;AACAm3B,WAAG,CAAC+K,MAAJ/K,CAAWoV,SAAS,CAACz4B,CAArBqjB,EAAwBoV,SAAS,CAACt6B,CAAlCklB,EAAqC;AAACzpB,cAAI,EAAE,CAAP;AAAUkc,aAAG,EAAE,CAAf;AAAkBjc,eAAK,EAAE,CAAzB;AAA4Bkc,gBAAM,EAAE;AAApC,SAArCsN;AAHE,QAAJ71B;AAKD;;AAxFW,GAAd;;AA2FA,QAAMswD,YAAN,CAAmB;AACjBC,kBAAc,CAAChqC,MAAD,EAAS4Q,WAAT,EAAsB,CAAE;;AACtCq5B,kBAAc,CAACzuC,OAAD,EAAU;AACtB,aAAO,KAAP;AACD;;AACDiW,oBAAgB,CAAChW,KAAD,EAAQvjB,IAAR,EAAckL,QAAd,EAAwB,CAAE;;AAC1CsuB,uBAAmB,CAACjW,KAAD,EAAQvjB,IAAR,EAAckL,QAAd,EAAwB,CAAE;;AAC7CuY,uBAAmB,GAAG;AACpB,aAAO,CAAP;AACD;;AACD8U,kBAAc,CAACnC,OAAD,EAAUtP,KAAV,EAAiBoB,MAAjB,EAAyBwQ,WAAzB,EAAsC;AAClD5R,WAAK,GAAG/gB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY+gB,KAAK,IAAIsP,OAAO,CAACtP,KAA7B/gB,CAAR+gB;AACAoB,YAAM,GAAGA,MAAM,IAAIkO,OAAO,CAAClO,MAA3BA;AACA,aAAO;AACLpB,aADK;AAELoB,cAAM,EAAEniB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY2yB,WAAW,GAAG3yB,IAAI,CAACkB,KAALlB,CAAW+gB,KAAK,GAAG4R,WAAnB3yB,CAAH,GAAqCmiB,MAA5DniB;AAFH,OAAP;AAID;;AACDisD,cAAU,CAAClqC,MAAD,EAAS;AACjB,aAAO,IAAP;AACD;;AACDmqC,gBAAY,CAAC5uB,MAAD,EAAS,CACpB;;AAtBgB;;AAyBnB,QAAM6uB,aAAN,SAA4BL,YAA5B,CAAyC;AACvCC,kBAAc,CAACpsD,IAAD,EAAO;AACnB,aAAOA,IAAI,IAAIA,IAAI,CAACqiB,UAAbriB,IAA2BA,IAAI,CAACqiB,UAALriB,CAAgB,IAAhBA,CAA3BA,IAAoD,IAA3D;AACD;;AACDusD,gBAAY,CAAC5uB,MAAD,EAAS;AACnBA,YAAM,CAACpgC,OAAPogC,CAAepgB,SAAfogB,GAA2B,KAA3BA;AACD;;AANsC;;AASzC,QAAM8uB,WAAW,GAAG,UAApB;AACA,QAAMC,WAAW,GAAG;AAClBC,cAAU,EAAE,WADM;AAElBC,aAAS,EAAE,WAFO;AAGlBC,YAAQ,EAAE,SAHQ;AAIlBC,gBAAY,EAAE,YAJI;AAKlBC,eAAW,EAAE,WALK;AAMlBC,eAAW,EAAE,WANK;AAOlBC,aAAS,EAAE,SAPO;AAQlBC,gBAAY,EAAE,UARI;AASlBC,cAAU,EAAE;AATM,GAApB;;AAWA,QAAMC,aAAa,GAAGjzD,KAAK,IAAIA,KAAK,KAAK,IAAVA,IAAkBA,KAAK,KAAK,EAA3D;;AACA,WAASkzD,UAAT,CAAoBjrC,MAApB,EAA4B4Q,WAA5B,EAAyC;AACvC,UAAM5U,KAAK,GAAGgE,MAAM,CAAChE,KAArB;AACA,UAAMkvC,YAAY,GAAGlrC,MAAM,CAACmrC,YAAPnrC,CAAoB,QAApBA,CAArB;AACA,UAAMorC,WAAW,GAAGprC,MAAM,CAACmrC,YAAPnrC,CAAoB,OAApBA,CAApB;AACAA,UAAM,CAACqqC,WAAD,CAANrqC,GAAsB;AACpB0X,aAAO,EAAE;AACPtX,cAAM,EAAE8qC,YADD;AAEPlsC,aAAK,EAAEosC,WAFA;AAGPpvC,aAAK,EAAE;AACLk2B,iBAAO,EAAEl2B,KAAK,CAACk2B,OADV;AAEL9xB,gBAAM,EAAEpE,KAAK,CAACoE,MAFT;AAGLpB,eAAK,EAAEhD,KAAK,CAACgD;AAHR;AAHA;AADW,KAAtBgB;AAWAhE,SAAK,CAACk2B,OAANl2B,GAAgBA,KAAK,CAACk2B,OAANl2B,IAAiB,OAAjCA;AACAA,SAAK,CAAC6T,SAAN7T,GAAkBA,KAAK,CAAC6T,SAAN7T,IAAmB,YAArCA;;AACA,QAAIgvC,aAAa,CAACI,WAAD,CAAjB,EAAgC;AAC9B,YAAMC,YAAY,GAAG15B,YAAY,CAAC3R,MAAD,EAAS,OAAT,CAAjC;;AACA,UAAIqrC,YAAY,KAAKrvD,SAArB,EAAgC;AAC9BgkB,cAAM,CAAChB,KAAPgB,GAAeqrC,YAAfrrC;AACD;AACF;;AACD,QAAIgrC,aAAa,CAACE,YAAD,CAAjB,EAAiC;AAC/B,UAAIlrC,MAAM,CAAChE,KAAPgE,CAAaI,MAAbJ,KAAwB,EAA5B,EAAgC;AAC9BA,cAAM,CAACI,MAAPJ,GAAgBA,MAAM,CAAChB,KAAPgB,IAAgB4Q,WAAW,IAAI,CAA/B5Q,CAAhBA;AADF,aAEO;AACL,cAAMsrC,aAAa,GAAG35B,YAAY,CAAC3R,MAAD,EAAS,QAAT,CAAlC;;AACA,YAAIsrC,aAAa,KAAKtvD,SAAtB,EAAiC;AAC/BgkB,gBAAM,CAACI,MAAPJ,GAAgBsrC,aAAhBtrC;AACD;AACF;AACF;;AACD,WAAOA,MAAP;AACD;;AACD,QAAMurC,oBAAoB,GAAGj6B,4BAA4B,GAAG;AAACE,WAAO,EAAE;AAAV,GAAH,GAAqB,KAA9E;;AACA,WAASg6B,WAAT,CAAqBzwC,IAArB,EAA2B7iB,IAA3B,EAAiCkL,QAAjC,EAA2C;AACzC2X,QAAI,CAAC0W,gBAAL1W,CAAsB7iB,IAAtB6iB,EAA4B3X,QAA5B2X,EAAsCwwC,oBAAtCxwC;AACD;;AACD,WAAS0wC,cAAT,CAAwBhwC,KAAxB,EAA+BvjB,IAA/B,EAAqCkL,QAArC,EAA+C;AAC7CqY,SAAK,CAACuE,MAANvE,CAAaiW,mBAAbjW,CAAiCvjB,IAAjCujB,EAAuCrY,QAAvCqY,EAAiD8vC,oBAAjD9vC;AACD;;AACD,WAASiwC,eAAT,CAAyB/yB,KAAzB,EAAgCld,KAAhC,EAAuC;AACrC,UAAMvjB,IAAI,GAAGoyD,WAAW,CAAC3xB,KAAK,CAACzgC,IAAP,CAAXoyD,IAA2B3xB,KAAK,CAACzgC,IAA9C;AACA,UAAM;AAACmE,OAAD;AAAIE;AAAJ,QAASmzB,mBAAmB,CAACiJ,KAAD,EAAQld,KAAR,CAAlC;AACA,WAAO;AACLvjB,UADK;AAELujB,WAFK;AAGLkwC,YAAM,EAAEhzB,KAHH;AAILt8B,OAAC,EAAEA,CAAC,KAAKL,SAANK,GAAkBA,CAAlBA,GAAsB,IAJpB;AAKLE,OAAC,EAAEA,CAAC,KAAKP,SAANO,GAAkBA,CAAlBA,GAAsB;AALpB,KAAP;AAOD;;AACD,WAASqvD,gBAAT,CAA0BC,QAA1B,EAAoC7rC,MAApC,EAA4C;AAC1C,SAAK,MAAMjF,IAAX,IAAmB8wC,QAAnB,EAA6B;AAC3B,UAAI9wC,IAAI,KAAKiF,MAATjF,IAAmBA,IAAI,CAAC+wC,QAAL/wC,CAAciF,MAAdjF,CAAvB,EAA8C;AAC5C,eAAO,IAAP;AACD;AACF;AACF;;AACD,WAASgxC,oBAAT,CAA8BtwC,KAA9B,EAAqCvjB,IAArC,EAA2CkL,QAA3C,EAAqD;AACnD,UAAM4c,MAAM,GAAGvE,KAAK,CAACuE,MAArB;AACA,UAAMgsC,QAAQ,GAAG,IAAIC,gBAAJ,CAAqBC,OAAO,IAAI;AAC/C,UAAIC,OAAO,GAAG,KAAd;;AACA,WAAK,MAAMrjB,KAAX,IAAoBojB,OAApB,EAA6B;AAC3BC,eAAO,GAAGA,OAAO,IAAIP,gBAAgB,CAAC9iB,KAAK,CAACsjB,UAAP,EAAmBpsC,MAAnB,CAArCmsC;AACAA,eAAO,GAAGA,OAAO,IAAI,CAACP,gBAAgB,CAAC9iB,KAAK,CAACujB,YAAP,EAAqBrsC,MAArB,CAAtCmsC;AACD;;AACD,UAAIA,OAAJ,EAAa;AACX/oD,gBAAQ;AACT;AARc,MAAjB;AAUA4oD,YAAQ,CAACM,OAATN,CAAiBp+B,QAAjBo+B,EAA2B;AAACO,eAAS,EAAE,IAAZ;AAAkBC,aAAO,EAAE;AAA3B,KAA3BR;AACA,WAAOA,QAAP;AACD;;AACD,WAASS,oBAAT,CAA8BhxC,KAA9B,EAAqCvjB,IAArC,EAA2CkL,QAA3C,EAAqD;AACnD,UAAM4c,MAAM,GAAGvE,KAAK,CAACuE,MAArB;AACA,UAAMgsC,QAAQ,GAAG,IAAIC,gBAAJ,CAAqBC,OAAO,IAAI;AAC/C,UAAIC,OAAO,GAAG,KAAd;;AACA,WAAK,MAAMrjB,KAAX,IAAoBojB,OAApB,EAA6B;AAC3BC,eAAO,GAAGA,OAAO,IAAIP,gBAAgB,CAAC9iB,KAAK,CAACujB,YAAP,EAAqBrsC,MAArB,CAArCmsC;AACAA,eAAO,GAAGA,OAAO,IAAI,CAACP,gBAAgB,CAAC9iB,KAAK,CAACsjB,UAAP,EAAmBpsC,MAAnB,CAAtCmsC;AACD;;AACD,UAAIA,OAAJ,EAAa;AACX/oD,gBAAQ;AACT;AARc,MAAjB;AAUA4oD,YAAQ,CAACM,OAATN,CAAiBp+B,QAAjBo+B,EAA2B;AAACO,eAAS,EAAE,IAAZ;AAAkBC,aAAO,EAAE;AAA3B,KAA3BR;AACA,WAAOA,QAAP;AACD;;AACD,QAAMU,kBAAkB,GAAG,IAAIx6B,GAAJ,EAA3B;AACA,MAAIy6B,mBAAmB,GAAG,CAA1B;;AACA,WAASC,cAAT,GAA0B;AACxB,UAAMC,GAAG,GAAGhoD,MAAM,CAAC0W,gBAAnB;;AACA,QAAIsxC,GAAG,KAAKF,mBAAZ,EAAiC;AAC/B;AACD;;AACDA,uBAAmB,GAAGE,GAAtBF;AACAD,sBAAkB,CAAChpD,OAAnBgpD,CAA2B,CAACzxB,MAAD,EAASxf,KAAT,KAAmB;AAC5C,UAAIA,KAAK,CAACoE,uBAANpE,KAAkCoxC,GAAtC,EAA2C;AACzC5xB,cAAM;AACP;AAHH;AAKD;;AACD,WAAS6xB,6BAAT,CAAuCrxC,KAAvC,EAA8Cwf,MAA9C,EAAsD;AACpD,QAAI,CAACyxB,kBAAkB,CAAC/uD,IAAxB,EAA8B;AAC5BkH,YAAM,CAAC4sB,gBAAP5sB,CAAwB,QAAxBA,EAAkC+nD,cAAlC/nD;AACD;;AACD6nD,sBAAkB,CAACtoD,GAAnBsoD,CAAuBjxC,KAAvBixC,EAA8BzxB,MAA9ByxB;AACD;;AACD,WAASK,+BAAT,CAAyCtxC,KAAzC,EAAgD;AAC9CixC,sBAAkB,CAAC/iC,MAAnB+iC,CAA0BjxC,KAA1BixC;;AACA,QAAI,CAACA,kBAAkB,CAAC/uD,IAAxB,EAA8B;AAC5BkH,YAAM,CAAC6sB,mBAAP7sB,CAA2B,QAA3BA,EAAqC+nD,cAArC/nD;AACD;AACF;;AACD,WAASmoD,oBAAT,CAA8BvxC,KAA9B,EAAqCvjB,IAArC,EAA2CkL,QAA3C,EAAqD;AACnD,UAAM4c,MAAM,GAAGvE,KAAK,CAACuE,MAArB;;AACA,UAAMkQ,SAAS,GAAGlQ,MAAM,IAAI6N,cAAc,CAAC7N,MAAD,CAA1C;;AACA,QAAI,CAACkQ,SAAL,EAAgB;AACd;AACD;;AACD,UAAM+K,MAAM,GAAGl2B,SAAS,CAAC,CAACia,KAAD,EAAQoB,MAAR,KAAmB;AAC1C,YAAMnU,CAAC,GAAGikB,SAAS,CAACC,WAApB;AACA/sB,cAAQ,CAAC4b,KAAD,EAAQoB,MAAR,CAARhd;;AACA,UAAI6I,CAAC,GAAGikB,SAAS,CAACC,WAAlB,EAA+B;AAC7B/sB,gBAAQ;AACT;AALqB,OAMrByB,MANqB,CAAxB;AAOA,UAAMmnD,QAAQ,GAAG,IAAIiB,cAAJ,CAAmBf,OAAO,IAAI;AAC7C,YAAMpjB,KAAK,GAAGojB,OAAO,CAAC,CAAD,CAArB;AACA,YAAMltC,KAAK,GAAG8pB,KAAK,CAACokB,WAANpkB,CAAkB9pB,KAAhC;AACA,YAAMoB,MAAM,GAAG0oB,KAAK,CAACokB,WAANpkB,CAAkB1oB,MAAjC;;AACA,UAAIpB,KAAK,KAAK,CAAVA,IAAeoB,MAAM,KAAK,CAA9B,EAAiC;AAC/B;AACD;;AACD6a,YAAM,CAACjc,KAAD,EAAQoB,MAAR,CAAN6a;AAPe,MAAjB;AASA+wB,YAAQ,CAACM,OAATN,CAAiB97B,SAAjB87B;AACAc,iCAA6B,CAACrxC,KAAD,EAAQwf,MAAR,CAA7B6xB;AACA,WAAOd,QAAP;AACD;;AACD,WAASmB,eAAT,CAAyB1xC,KAAzB,EAAgCvjB,IAAhC,EAAsC8zD,QAAtC,EAAgD;AAC9C,QAAIA,QAAJ,EAAc;AACZA,cAAQ,CAACoB,UAATpB;AACD;;AACD,QAAI9zD,IAAI,KAAK,QAAb,EAAuB;AACrB60D,qCAA+B,CAACtxC,KAAD,CAA/BsxC;AACD;AACF;;AACD,WAASM,oBAAT,CAA8B5xC,KAA9B,EAAqCvjB,IAArC,EAA2CkL,QAA3C,EAAqD;AACnD,UAAM4c,MAAM,GAAGvE,KAAK,CAACuE,MAArB;AACA,UAAMoI,KAAK,GAAGrjB,SAAS,CAAE4zB,KAAD,IAAW;AACjC,UAAIld,KAAK,CAACW,GAANX,KAAc,IAAlB,EAAwB;AACtBrY,gBAAQ,CAACsoD,eAAe,CAAC/yB,KAAD,EAAQld,KAAR,CAAhB,CAARrY;AACD;AAHoB,OAIpBqY,KAJoB,EAIZniB,IAAD,IAAU;AAClB,YAAMq/B,KAAK,GAAGr/B,IAAI,CAAC,CAAD,CAAlB;AACA,aAAO,CAACq/B,KAAD,EAAQA,KAAK,CAACvJ,OAAd,EAAuBuJ,KAAK,CAACtJ,OAA7B,CAAP;AANqB,MAAvB;AAQAm8B,eAAW,CAACxrC,MAAD,EAAS9nB,IAAT,EAAekwB,KAAf,CAAXojC;AACA,WAAOpjC,KAAP;AACD;;AACD,QAAMklC,WAAN,SAA0BvD,YAA1B,CAAuC;AACrCC,kBAAc,CAAChqC,MAAD,EAAS4Q,WAAT,EAAsB;AAClC,YAAMpV,OAAO,GAAGwE,MAAM,IAAIA,MAAM,CAACC,UAAjBD,IAA+BA,MAAM,CAACC,UAAPD,CAAkB,IAAlBA,CAA/C;;AACA,UAAIxE,OAAO,IAAIA,OAAO,CAACwE,MAARxE,KAAmBwE,MAAlC,EAA0C;AACxCirC,kBAAU,CAACjrC,MAAD,EAAS4Q,WAAT,CAAVq6B;AACA,eAAOzvC,OAAP;AACD;;AACD,aAAO,IAAP;AACD;;AACDyuC,kBAAc,CAACzuC,OAAD,EAAU;AACtB,YAAMwE,MAAM,GAAGxE,OAAO,CAACwE,MAAvB;;AACA,UAAI,CAACA,MAAM,CAACqqC,WAAD,CAAX,EAA0B;AACxB,eAAO,KAAP;AACD;;AACD,YAAM3yB,OAAO,GAAG1X,MAAM,CAACqqC,WAAD,CAANrqC,CAAoB0X,OAApC;AACA,OAAC,QAAD,EAAW,OAAX,EAAoBh0B,OAApB,CAA6B8hB,IAAD,IAAU;AACpC,cAAMztB,KAAK,GAAG2/B,OAAO,CAAClS,IAAD,CAArB;;AACA,YAAI1tB,aAAa,CAACC,KAAD,CAAjB,EAA0B;AACxBioB,gBAAM,CAACutC,eAAPvtC,CAAuBwF,IAAvBxF;AADF,eAEO;AACLA,gBAAM,CAACwtC,YAAPxtC,CAAoBwF,IAApBxF,EAA0BjoB,KAA1BioB;AACD;AANH;AAQA,YAAMhE,KAAK,GAAG0b,OAAO,CAAC1b,KAAR0b,IAAiB,EAA/B;AACAv/B,YAAM,CAAC2B,IAAP3B,CAAY6jB,KAAZ7jB,EAAmBuL,OAAnBvL,CAA4B6C,GAAD,IAAS;AAClCglB,cAAM,CAAChE,KAAPgE,CAAahlB,GAAbglB,IAAoBhE,KAAK,CAAChhB,GAAD,CAAzBglB;AADF;AAGAA,YAAM,CAAChB,KAAPgB,GAAeA,MAAM,CAAChB,KAAtBgB;AACA,aAAOA,MAAM,CAACqqC,WAAD,CAAb;AACA,aAAO,IAAP;AACD;;AACD54B,oBAAgB,CAAChW,KAAD,EAAQvjB,IAAR,EAAckL,QAAd,EAAwB;AACtC,WAAKsuB,mBAAL,CAAyBjW,KAAzB,EAAgCvjB,IAAhC;AACA,YAAMu1D,OAAO,GAAGhyC,KAAK,CAACiyC,QAANjyC,KAAmBA,KAAK,CAACiyC,QAANjyC,GAAiB,EAApCA,CAAhB;AACA,YAAMkyC,QAAQ,GAAG;AACfC,cAAM,EAAE7B,oBADO;AAEf8B,cAAM,EAAEpB,oBAFO;AAGfxxB,cAAM,EAAE+xB;AAHO,OAAjB;AAKA,YAAMhI,OAAO,GAAG2I,QAAQ,CAACz1D,IAAD,CAARy1D,IAAkBN,oBAAlC;AACAI,aAAO,CAACv1D,IAAD,CAAPu1D,GAAgBzI,OAAO,CAACvpC,KAAD,EAAQvjB,IAAR,EAAckL,QAAd,CAAvBqqD;AACD;;AACD/7B,uBAAmB,CAACjW,KAAD,EAAQvjB,IAAR,EAAc;AAC/B,YAAMu1D,OAAO,GAAGhyC,KAAK,CAACiyC,QAANjyC,KAAmBA,KAAK,CAACiyC,QAANjyC,GAAiB,EAApCA,CAAhB;AACA,YAAM2M,KAAK,GAAGqlC,OAAO,CAACv1D,IAAD,CAArB;;AACA,UAAI,CAACkwB,KAAL,EAAY;AACV;AACD;;AACD,YAAMulC,QAAQ,GAAG;AACfC,cAAM,EAAET,eADO;AAEfU,cAAM,EAAEV,eAFO;AAGflyB,cAAM,EAAEkyB;AAHO,OAAjB;AAKA,YAAMnI,OAAO,GAAG2I,QAAQ,CAACz1D,IAAD,CAARy1D,IAAkBlC,cAAlC;AACAzG,aAAO,CAACvpC,KAAD,EAAQvjB,IAAR,EAAckwB,KAAd,CAAP48B;AACAyI,aAAO,CAACv1D,IAAD,CAAPu1D,GAAgBzxD,SAAhByxD;AACD;;AACD9xC,uBAAmB,GAAG;AACpB,aAAO9W,MAAM,CAAC0W,gBAAd;AACD;;AACDkV,kBAAc,CAACzQ,MAAD,EAAShB,KAAT,EAAgBoB,MAAhB,EAAwBwQ,WAAxB,EAAqC;AACjD,aAAOH,cAAc,CAACzQ,MAAD,EAAShB,KAAT,EAAgBoB,MAAhB,EAAwBwQ,WAAxB,CAArB;AACD;;AACDs5B,cAAU,CAAClqC,MAAD,EAAS;AACjB,YAAMkQ,SAAS,GAAGrC,cAAc,CAAC7N,MAAD,CAAhC;;AACA,aAAO,CAAC,EAAEkQ,SAAS,IAAIA,SAAS,CAAC49B,WAAzB,CAAR;AACD;;AAlEoC;;AAqEvC,WAASC,eAAT,CAAyB/tC,MAAzB,EAAiC;AAC/B,QAAI,CAAC2N,eAAe,EAAhB,IAAuB,OAAOqgC,eAAP,KAA2B,WAA3B,IAA0ChuC,MAAM,YAAYguC,eAAvF,EAAyG;AACvG,aAAO5D,aAAP;AACD;;AACD,WAAOkD,WAAP;AACD;;AAED,QAAMW,aAAN,CAAoB;AAClB50C,eAAW,GAAG;AACZ,WAAK60C,KAAL,GAAa,EAAb;AACD;;AACDC,UAAM,CAAC1yC,KAAD,EAAQ2yC,IAAR,EAAc90D,IAAd,EAAoBwwB,MAApB,EAA4B;AAChC,UAAIskC,IAAI,KAAK,YAAb,EAA2B;AACzB,aAAKF,KAAL,GAAa,KAAKG,kBAAL,CAAwB5yC,KAAxB,EAA+B,IAA/B,CAAb;;AACA,aAAK2b,OAAL,CAAa,KAAK82B,KAAlB,EAAyBzyC,KAAzB,EAAgC,SAAhC;AACD;;AACD,YAAMZ,WAAW,GAAGiP,MAAM,GAAG,KAAK5O,YAAL,CAAkBO,KAAlB,EAAyBqO,MAAzB,CAAgCA,MAAhC,CAAH,GAA6C,KAAK5O,YAAL,CAAkBO,KAAlB,CAAvE;;AACA,YAAMlc,MAAM,GAAG,KAAK63B,OAAL,CAAavc,WAAb,EAA0BY,KAA1B,EAAiC2yC,IAAjC,EAAuC90D,IAAvC,CAAf;;AACA,UAAI80D,IAAI,KAAK,cAAb,EAA6B;AAC3B,aAAKh3B,OAAL,CAAavc,WAAb,EAA0BY,KAA1B,EAAiC,MAAjC;;AACA,aAAK2b,OAAL,CAAa,KAAK82B,KAAlB,EAAyBzyC,KAAzB,EAAgC,WAAhC;AACD;;AACD,aAAOlc,MAAP;AACD;;AACD63B,WAAO,CAACvc,WAAD,EAAcY,KAAd,EAAqB2yC,IAArB,EAA2B90D,IAA3B,EAAiC;AACtCA,UAAI,GAAGA,IAAI,IAAI,EAAfA;;AACA,WAAK,MAAMg1D,UAAX,IAAyBzzC,WAAzB,EAAsC;AACpC,cAAM0zC,MAAM,GAAGD,UAAU,CAACC,MAA1B;AACA,cAAM5qD,MAAM,GAAG4qD,MAAM,CAACH,IAAD,CAArB;AACA,cAAMhH,MAAM,GAAG,CAAC3rC,KAAD,EAAQniB,IAAR,EAAcg1D,UAAU,CAACnzD,OAAzB,CAAf;;AACA,YAAI/B,QAAQ,CAACuK,MAAD,EAASyjD,MAAT,EAAiBmH,MAAjB,CAARn1D,KAAqC,KAArCA,IAA8CE,IAAI,CAACk1D,UAAvD,EAAmE;AACjE,iBAAO,KAAP;AACD;AACF;;AACD,aAAO,IAAP;AACD;;AACDC,cAAU,GAAG;AACX,UAAI,CAAC32D,aAAa,CAAC,KAAK0vC,MAAN,CAAlB,EAAiC;AAC/B,aAAKknB,SAAL,GAAiB,KAAKlnB,MAAtB;AACA,aAAKA,MAAL,GAAcxrC,SAAd;AACD;AACF;;AACDkf,gBAAY,CAACO,KAAD,EAAQ;AAClB,UAAI,KAAK+rB,MAAT,EAAiB;AACf,eAAO,KAAKA,MAAZ;AACD;;AACD,YAAM3sB,WAAW,GAAG,KAAK2sB,MAAL,GAAc,KAAK6mB,kBAAL,CAAwB5yC,KAAxB,CAAlC;;AACA,WAAKkzC,mBAAL,CAAyBlzC,KAAzB;;AACA,aAAOZ,WAAP;AACD;;AACDwzC,sBAAkB,CAAC5yC,KAAD,EAAQ6gB,GAAR,EAAa;AAC7B,YAAMf,MAAM,GAAG9f,KAAK,IAAIA,KAAK,CAAC8f,MAA9B;AACA,YAAMpgC,OAAO,GAAGrC,cAAc,CAACyiC,MAAM,CAACpgC,OAAPogC,IAAkBA,MAAM,CAACpgC,OAAPogC,CAAeve,OAAlC,EAA2C,EAA3C,CAA9B;AACA,YAAMA,OAAO,GAAG4xC,UAAU,CAACrzB,MAAD,CAA1B;AACA,aAAOpgC,OAAO,KAAK,KAAZA,IAAqB,CAACmhC,GAAtBnhC,GAA4B,EAA5BA,GAAiC0zD,iBAAiB,CAACpzC,KAAD,EAAQuB,OAAR,EAAiB7hB,OAAjB,EAA0BmhC,GAA1B,CAAzD;AACD;;AACDqyB,uBAAmB,CAAClzC,KAAD,EAAQ;AACzB,YAAMqzC,mBAAmB,GAAG,KAAKJ,SAAL,IAAkB,EAA9C;AACA,YAAM7zC,WAAW,GAAG,KAAK2sB,MAAzB;;AACA,YAAMgP,IAAI,GAAG,CAAC/4C,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACqsB,MAAFrsB,CAASpB,CAAC,IAAI,CAACqB,CAAC,CAACqxD,IAAFrxD,CAAOnB,CAAC,IAAIF,CAAC,CAACkyD,MAAFlyD,CAASxE,EAATwE,KAAgBE,CAAC,CAACgyD,MAAFhyD,CAAS1E,EAArC6F,CAAfD,CAAvB;;AACA,WAAK25B,OAAL,CAAaof,IAAI,CAACsY,mBAAD,EAAsBj0C,WAAtB,CAAjB,EAAqDY,KAArD,EAA4D,MAA5D;;AACA,WAAK2b,OAAL,CAAaof,IAAI,CAAC37B,WAAD,EAAci0C,mBAAd,CAAjB,EAAqDrzC,KAArD,EAA4D,OAA5D;AACD;;AAvDiB;;AAyDpB,WAASmzC,UAAT,CAAoBrzB,MAApB,EAA4B;AAC1B,UAAMyzB,QAAQ,GAAG,EAAjB;AACA,UAAMhyC,OAAO,GAAG,EAAhB;AACA,UAAMljB,IAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAYsrD,QAAQ,CAACzmC,OAATymC,CAAiBt/C,KAA7BhM,CAAb;;AACA,SAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,IAAI,CAACC,MAAzB,EAAiCH,CAAC,EAAlC,EAAsC;AACpCojB,aAAO,CAAC/f,IAAR+f,CAAaymC,QAAQ,CAACZ,SAATY,CAAmB3pD,IAAI,CAACF,CAAD,CAAvB6pD,CAAbzmC;AACD;;AACD,UAAMkB,KAAK,GAAGqd,MAAM,CAACve,OAAPue,IAAkB,EAAhC;;AACA,SAAK,IAAI3hC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGskB,KAAK,CAACnkB,MAA1B,EAAkCH,CAAC,EAAnC,EAAuC;AACrC,YAAM20D,MAAM,GAAGrwC,KAAK,CAACtkB,CAAD,CAApB;;AACA,UAAIojB,OAAO,CAAC/hB,OAAR+hB,CAAgBuxC,MAAhBvxC,MAA4B,CAAC,CAAjC,EAAoC;AAClCA,eAAO,CAAC/f,IAAR+f,CAAauxC,MAAbvxC;AACAgyC,gBAAQ,CAACT,MAAM,CAAC12D,EAAR,CAARm3D,GAAsB,IAAtBA;AACD;AACF;;AACD,WAAO;AAAChyC,aAAD;AAAUgyC;AAAV,KAAP;AACD;;AACD,WAASC,OAAT,CAAiB9zD,OAAjB,EAA0BmhC,GAA1B,EAA+B;AAC7B,QAAI,CAACA,GAAD,IAAQnhC,OAAO,KAAK,KAAxB,EAA+B;AAC7B,aAAO,IAAP;AACD;;AACD,QAAIA,OAAO,KAAK,IAAhB,EAAsB;AACpB,aAAO,EAAP;AACD;;AACD,WAAOA,OAAP;AACD;;AACD,WAAS0zD,iBAAT,CAA2BpzC,KAA3B,SAAuDtgB,OAAvD,EAAgEmhC,GAAhE,EAAqE;AAAA,QAAnC;AAACtf,aAAD;AAAUgyC;AAAV,KAAmC;AACnE,UAAMzvD,MAAM,GAAG,EAAf;AACA,UAAMic,OAAO,GAAGC,KAAK,CAACwE,UAANxE,EAAhB;;AACA,SAAK,MAAM8yC,MAAX,IAAqBvxC,OAArB,EAA8B;AAC5B,YAAMnlB,EAAE,GAAG02D,MAAM,CAAC12D,EAAlB;AACA,YAAMkrB,IAAI,GAAGksC,OAAO,CAAC9zD,OAAO,CAACtD,EAAD,CAAR,EAAcykC,GAAd,CAApB;;AACA,UAAIvZ,IAAI,KAAK,IAAb,EAAmB;AACjB;AACD;;AACDxjB,YAAM,CAACtC,IAAPsC,CAAY;AACVgvD,cADU;AAEVpzD,eAAO,EAAE+zD,UAAU,CAACzzC,KAAK,CAAC8f,MAAP,EAAe;AAACgzB,gBAAD;AAASrwC,eAAK,EAAE8wC,QAAQ,CAACn3D,EAAD;AAAxB,SAAf,EAA8CkrB,IAA9C,EAAoDvH,OAApD;AAFT,OAAZjc;AAID;;AACD,WAAOA,MAAP;AACD;;AACD,WAAS2vD,UAAT,CAAoB3zB,MAApB,SAA6CxY,IAA7C,EAAmDvH,OAAnD,EAA4D;AAAA,QAAhC;AAAC+yC,YAAD;AAASrwC;AAAT,KAAgC;AAC1D,UAAMpkB,IAAI,GAAGyhC,MAAM,CAAC4zB,eAAP5zB,CAAuBgzB,MAAvBhzB,CAAb;AACA,UAAM5U,MAAM,GAAG4U,MAAM,CAACuH,eAAPvH,CAAuBxY,IAAvBwY,EAA6BzhC,IAA7ByhC,CAAf;;AACA,QAAIrd,KAAK,IAAIqwC,MAAM,CAACpwC,QAApB,EAA8B;AAC5BwI,YAAM,CAAC1pB,IAAP0pB,CAAY4nC,MAAM,CAACpwC,QAAnBwI;AACD;;AACD,WAAO4U,MAAM,CAACwH,cAAPxH,CAAsB5U,MAAtB4U,EAA8B/f,OAA9B+f,EAAuC,CAAC,EAAD,CAAvCA,EAA6C;AAClDxS,gBAAU,EAAE,KADsC;AAElDC,eAAS,EAAE,KAFuC;AAGlDF,aAAO,EAAE;AAHyC,KAA7CyS,CAAP;AAKD;;AAED,WAAS6zB,YAAT,CAAsBl3D,IAAtB,EAA4BiD,OAA5B,EAAqC;AACnC,UAAMk0D,eAAe,GAAGlxC,QAAQ,CAAC7C,QAAT6C,CAAkBjmB,IAAlBimB,KAA2B,EAAnD;AACA,UAAMmxC,cAAc,GAAG,CAACn0D,OAAO,CAACmgB,QAARngB,IAAoB,EAArB,EAAyBjD,IAAzB,KAAkC,EAAzD;AACA,WAAOo3D,cAAc,CAAC/yC,SAAf+yC,IAA4Bn0D,OAAO,CAACohB,SAApC+yC,IAAiDD,eAAe,CAAC9yC,SAAjE+yC,IAA8E,GAArF;AACD;;AACD,WAASC,yBAAT,CAAmC13D,EAAnC,EAAuC0kB,SAAvC,EAAkD;AAChD,QAAI7V,IAAI,GAAG7O,EAAX;;AACA,QAAIA,EAAE,KAAK,SAAX,EAAsB;AACpB6O,UAAI,GAAG6V,SAAP7V;AADF,WAEO,IAAI7O,EAAE,KAAK,SAAX,EAAsB;AAC3B6O,UAAI,GAAG6V,SAAS,KAAK,GAAdA,GAAoB,GAApBA,GAA0B,GAAjC7V;AACD;;AACD,WAAOA,IAAP;AACD;;AACD,WAAS8oD,yBAAT,CAAmC9oD,IAAnC,EAAyC6V,SAAzC,EAAoD;AAClD,WAAO7V,IAAI,KAAK6V,SAAT7V,GAAqB,SAArBA,GAAiC,SAAxC;AACD;;AACD,WAAS+oD,gBAAT,CAA0BjY,QAA1B,EAAoC;AAClC,QAAIA,QAAQ,KAAK,KAAbA,IAAsBA,QAAQ,KAAK,QAAvC,EAAiD;AAC/C,aAAO,GAAP;AACD;;AACD,QAAIA,QAAQ,KAAK,MAAbA,IAAuBA,QAAQ,KAAK,OAAxC,EAAiD;AAC/C,aAAO,GAAP;AACD;AACF;;AACD,WAASkY,aAAT,CAAuB73D,EAAvB,EAA2B83D,YAA3B,EAAyC;AACvC,QAAI93D,EAAE,KAAK,GAAPA,IAAcA,EAAE,KAAK,GAAzB,EAA8B;AAC5B,aAAOA,EAAP;AACD;;AACD,WAAO83D,YAAY,CAACjpD,IAAbipD,IAAqBF,gBAAgB,CAACE,YAAY,CAACnY,QAAd,CAArCmY,IAAgE93D,EAAE,CAACuF,MAAHvF,CAAU,CAAVA,EAAawgB,WAAbxgB,EAAvE;AACD;;AACD,WAAS+3D,gBAAT,CAA0Br0B,MAA1B,EAAkCpgC,OAAlC,EAA2C;AACzC,UAAM00D,aAAa,GAAGj1C,SAAS,CAAC2gB,MAAM,CAACrjC,IAAR,CAAT0iB,IAA0B;AAACuC,YAAM,EAAE;AAAT,KAAhD;AACA,UAAM2yC,YAAY,GAAG30D,OAAO,CAACgiB,MAARhiB,IAAkB,EAAvC;AACA,UAAM40D,cAAc,GAAGX,YAAY,CAAC7zB,MAAM,CAACrjC,IAAR,EAAciD,OAAd,CAAnC;AACA,UAAM60D,QAAQ,GAAG73D,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAjB;AACA,UAAMglB,MAAM,GAAGhlB,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAf;AACAA,UAAM,CAAC2B,IAAP3B,CAAY23D,YAAZ33D,EAA0BuL,OAA1BvL,CAAkCN,EAAE,IAAI;AACtC,YAAMo4D,SAAS,GAAGH,YAAY,CAACj4D,EAAD,CAA9B;;AACA,UAAI,CAACW,QAAQ,CAACy3D,SAAD,CAAb,EAA0B;AACxB,eAAOh0D,OAAO,CAACi0D,KAARj0D,kDAAwDpE,EAAxDoE,EAAP;AACD;;AACD,UAAIg0D,SAAS,CAAC1nC,MAAd,EAAsB;AACpB,eAAOtsB,OAAO,CAACC,IAARD,0DAA+DpE,EAA/DoE,EAAP;AACD;;AACD,YAAMyK,IAAI,GAAGgpD,aAAa,CAAC73D,EAAD,EAAKo4D,SAAL,CAA1B;AACA,YAAME,SAAS,GAAGX,yBAAyB,CAAC9oD,IAAD,EAAOqpD,cAAP,CAA3C;AACA,YAAMK,mBAAmB,GAAGP,aAAa,CAAC1yC,MAAd0yC,IAAwB,EAApD;AACAG,cAAQ,CAACtpD,IAAD,CAARspD,GAAiBA,QAAQ,CAACtpD,IAAD,CAARspD,IAAkBn4D,EAAnCm4D;AACA7yC,YAAM,CAACtlB,EAAD,CAANslB,GAAa1hB,OAAO,CAACtD,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAD,EAAsB,CAAC;AAACuO;AAAD,OAAD,EAASupD,SAAT,EAAoBG,mBAAmB,CAAC1pD,IAAD,CAAvC,EAA+C0pD,mBAAmB,CAACD,SAAD,CAAlE,CAAtB,CAApBhzC;AAZF;AAcAoe,UAAM,CAAC7c,IAAP6c,CAAYjgB,QAAZigB,CAAqB73B,OAArB63B,CAA6B2D,OAAO,IAAI;AACtC,YAAMhnC,IAAI,GAAGgnC,OAAO,CAAChnC,IAARgnC,IAAgB3D,MAAM,CAACrjC,IAApC;AACA,YAAMqkB,SAAS,GAAG2iB,OAAO,CAAC3iB,SAAR2iB,IAAqBkwB,YAAY,CAACl3D,IAAD,EAAOiD,OAAP,CAAnD;AACA,YAAMk0D,eAAe,GAAGz0C,SAAS,CAAC1iB,IAAD,CAAT0iB,IAAmB,EAA3C;AACA,YAAMw1C,mBAAmB,GAAGf,eAAe,CAAClyC,MAAhBkyC,IAA0B,EAAtD;AACAl3D,YAAM,CAAC2B,IAAP3B,CAAYi4D,mBAAZj4D,EAAiCuL,OAAjCvL,CAAyCk4D,SAAS,IAAI;AACpD,cAAM3pD,IAAI,GAAG6oD,yBAAyB,CAACc,SAAD,EAAY9zC,SAAZ,CAAtC;AACA,cAAM1kB,EAAE,GAAGqnC,OAAO,CAACx4B,IAAI,GAAG,QAAR,CAAPw4B,IAA4B8wB,QAAQ,CAACtpD,IAAD,CAApCw4B,IAA8Cx4B,IAAzD;AACAyW,cAAM,CAACtlB,EAAD,CAANslB,GAAaA,MAAM,CAACtlB,EAAD,CAANslB,IAAchlB,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAA3BglB;AACA1hB,eAAO,CAAC0hB,MAAM,CAACtlB,EAAD,CAAP,EAAa,CAAC;AAAC6O;AAAD,SAAD,EAASopD,YAAY,CAACj4D,EAAD,CAArB,EAA2Bu4D,mBAAmB,CAACC,SAAD,CAA9C,CAAb,CAAP50D;AAJF;AALF;AAYAtD,UAAM,CAAC2B,IAAP3B,CAAYglB,MAAZhlB,EAAoBuL,OAApBvL,CAA4B6C,GAAG,IAAI;AACjC,YAAMkiB,KAAK,GAAGC,MAAM,CAACniB,GAAD,CAApB;AACAS,aAAO,CAACyhB,KAAD,EAAQ,CAACiB,QAAQ,CAAChB,MAATgB,CAAgBjB,KAAK,CAAChlB,IAAtBimB,CAAD,EAA8BA,QAAQ,CAACjB,KAAvC,CAAR,CAAPzhB;AAFF;AAIA,WAAO0hB,MAAP;AACD;;AACD,WAASmzC,WAAT,CAAqB/0B,MAArB,EAA6B;AAC3B,UAAMpgC,OAAO,GAAGogC,MAAM,CAACpgC,OAAPogC,KAAmBA,MAAM,CAACpgC,OAAPogC,GAAiB,EAApCA,CAAhB;AACApgC,WAAO,CAAC6hB,OAAR7hB,GAAkBrC,cAAc,CAACqC,OAAO,CAAC6hB,OAAT,EAAkB,EAAlB,CAAhC7hB;AACAA,WAAO,CAACgiB,MAARhiB,GAAiBy0D,gBAAgB,CAACr0B,MAAD,EAASpgC,OAAT,CAAjCA;AACD;;AACD,WAASo1D,QAAT,CAAkB7xC,IAAlB,EAAwB;AACtBA,QAAI,GAAGA,IAAI,IAAI,EAAfA;AACAA,QAAI,CAACpD,QAALoD,GAAgBA,IAAI,CAACpD,QAALoD,IAAiB,EAAjCA;AACAA,QAAI,CAAC2kB,MAAL3kB,GAAcA,IAAI,CAAC2kB,MAAL3kB,IAAe,EAA7BA;AACA,WAAOA,IAAP;AACD;;AACD,WAAS8xC,UAAT,CAAoBj1B,MAApB,EAA4B;AAC1BA,UAAM,GAAGA,MAAM,IAAI,EAAnBA;AACAA,UAAM,CAAC7c,IAAP6c,GAAcg1B,QAAQ,CAACh1B,MAAM,CAAC7c,IAAR,CAAtB6c;AACA+0B,eAAW,CAAC/0B,MAAD,CAAX+0B;AACA,WAAO/0B,MAAP;AACD;;AACD,QAAMk1B,QAAQ,GAAG,IAAIv+B,GAAJ,EAAjB;AACA,QAAMw+B,UAAU,GAAG,IAAIrsD,GAAJ,EAAnB;;AACA,WAASssD,UAAT,CAAoBt+B,QAApB,EAA8Bu+B,QAA9B,EAAwC;AACtC,QAAI92D,IAAI,GAAG22D,QAAQ,CAAClzC,GAATkzC,CAAap+B,QAAbo+B,CAAX;;AACA,QAAI,CAAC32D,IAAL,EAAW;AACTA,UAAI,GAAG82D,QAAQ,EAAf92D;AACA22D,cAAQ,CAACrsD,GAATqsD,CAAap+B,QAAbo+B,EAAuB32D,IAAvB22D;AACAC,gBAAU,CAACpsD,GAAXosD,CAAe52D,IAAf42D;AACD;;AACD,WAAO52D,IAAP;AACD;;AACD,QAAM+2D,UAAU,GAAG,CAACzsD,GAAD,EAAM3H,GAAN,EAAWzB,GAAX,KAAmB;AACpC,UAAM+nB,IAAI,GAAGvmB,gBAAgB,CAACC,GAAD,EAAMzB,GAAN,CAA7B;;AACA,QAAI+nB,IAAI,KAAK/mB,SAAb,EAAwB;AACtBoI,SAAG,CAACE,GAAJF,CAAQ2e,IAAR3e;AACD;AAJH;;AAMA,QAAM0sD,MAAN,CAAa;AACXz3C,eAAW,CAACkiB,MAAD,EAAS;AAClB,WAAKw1B,OAAL,GAAeP,UAAU,CAACj1B,MAAD,CAAzB;AACA,WAAKy1B,WAAL,GAAmB,IAAI9+B,GAAJ,EAAnB;AACA,WAAK++B,cAAL,GAAsB,IAAI/+B,GAAJ,EAAtB;AACD;;AACW,QAARxW,QAAQ,GAAG;AACb,aAAO,KAAKq1C,OAAL,CAAar1C,QAApB;AACD;;AACO,QAAJxjB,IAAI,GAAG;AACT,aAAO,KAAK64D,OAAL,CAAa74D,IAApB;AACD;;AACO,QAAJA,IAAI,CAACA,IAAD,EAAO;AACb,WAAK64D,OAAL,CAAa74D,IAAb,GAAoBA,IAApB;AACD;;AACO,QAAJwmB,IAAI,GAAG;AACT,aAAO,KAAKqyC,OAAL,CAAaryC,IAApB;AACD;;AACO,QAAJA,IAAI,CAACA,IAAD,EAAO;AACb,WAAKqyC,OAAL,CAAaryC,IAAb,GAAoB6xC,QAAQ,CAAC7xC,IAAD,CAA5B;AACD;;AACU,QAAPvjB,OAAO,GAAG;AACZ,aAAO,KAAK41D,OAAL,CAAa51D,OAApB;AACD;;AACU,QAAPA,OAAO,CAACA,OAAD,EAAU;AACnB,WAAK41D,OAAL,CAAa51D,OAAb,GAAuBA,OAAvB;AACD;;AACU,QAAP6hB,OAAO,GAAG;AACZ,aAAO,KAAK+zC,OAAL,CAAa/zC,OAApB;AACD;;AACDqd,UAAM,GAAG;AACP,YAAMkB,MAAM,GAAG,KAAKw1B,OAApB;AACA,WAAKG,UAAL;AACAZ,iBAAW,CAAC/0B,MAAD,CAAX+0B;AACD;;AACDY,cAAU,GAAG;AACX,WAAKF,WAAL,CAAiBG,KAAjB;;AACA,WAAKF,cAAL,CAAoBE,KAApB;AACD;;AACDtuB,oBAAgB,CAACuuB,WAAD,EAAc;AAC5B,aAAOT,UAAU,CAACS,WAAD,EACf,MAAM,CAAC,oBACOA,WADP,GAEL,EAFK,CAAD,CADS,CAAjB;AAKD;;AACD9rB,6BAAyB,CAAC8rB,WAAD,EAAc/rB,UAAd,EAA0B;AACjD,aAAOsrB,UAAU,WAAIS,WAAJ,yBAA8B/rB,UAA9B,GACf,MAAM,CACJ,oBACc+rB,WADd,0BACyC/rB,UADzC,yBAEiBA,UAFjB,EADI,EAKJ,oBACc+rB,WADd,GAEE,EAFF,CALI,CADS,CAAjB;AAWD;;AACDnsB,2BAAuB,CAACmsB,WAAD,EAAcrsB,WAAd,EAA2B;AAChD,aAAO4rB,UAAU,WAAIS,WAAJ,cAAmBrsB,WAAnB,GACf,MAAM,CAAC,oBACOqsB,WADP,uBAC+BrsB,WAD/B,sBAEOqsB,WAFP,sBAGOrsB,WAHP,GAIL,EAJK,CAAD,CADS,CAAjB;AAOD;;AACDoqB,mBAAe,CAACZ,MAAD,EAAS;AACtB,YAAM12D,EAAE,GAAG02D,MAAM,CAAC12D,EAAlB;AACA,YAAMK,IAAI,GAAG,KAAKA,IAAlB;AACA,aAAOy4D,UAAU,WAAIz4D,IAAJ,qBAAmBL,EAAnB,GACf,MAAM,CAAC,mBACMA,EADN,GAEL,IAAG02D,MAAM,CAAC8C,sBAAP9C,IAAiC,EAApC,CAFK,CAAD,CADS,CAAjB;AAKD;;AACD+C,iBAAa,CAACC,SAAD,EAAYC,UAAZ,EAAwB;AACnC,YAAMR,WAAW,GAAG,KAAKA,WAAzB;;AACA,UAAI7xC,KAAK,GAAG6xC,WAAW,CAACzzC,GAAZyzC,CAAgBO,SAAhBP,CAAZ;;AACA,UAAI,CAAC7xC,KAAD,IAAUqyC,UAAd,EAA0B;AACxBryC,aAAK,GAAG,IAAI+S,GAAJ,EAAR/S;;AACA6xC,mBAAW,CAAC5sD,GAAZ4sD,CAAgBO,SAAhBP,EAA2B7xC,KAA3B6xC;AACD;;AACD,aAAO7xC,KAAP;AACD;;AACD2jB,mBAAe,CAACyuB,SAAD,EAAYE,QAAZ,EAAsBD,UAAtB,EAAkC;AAC/C,YAAM;AAACr2D,eAAD;AAAUjD;AAAV,UAAkB,IAAxB;;AACA,YAAMinB,KAAK,GAAG,KAAKmyC,aAAL,CAAmBC,SAAnB,EAA8BC,UAA9B,CAAd;;AACA,YAAM/xB,MAAM,GAAGtgB,KAAK,CAAC5B,GAAN4B,CAAUsyC,QAAVtyC,CAAf;;AACA,UAAIsgB,MAAJ,EAAY;AACV,eAAOA,MAAP;AACD;;AACD,YAAM9Y,MAAM,GAAG,IAAItiB,GAAJ,EAAf;AACAotD,cAAQ,CAAC/tD,OAAT+tD,CAAiB33D,IAAI,IAAI;AACvB,YAAIy3D,SAAJ,EAAe;AACb5qC,gBAAM,CAACriB,GAAPqiB,CAAW4qC,SAAX5qC;AACA7sB,cAAI,CAAC4J,OAAL5J,CAAakB,GAAG,IAAI61D,UAAU,CAAClqC,MAAD,EAAS4qC,SAAT,EAAoBv2D,GAApB,CAA9BlB;AACD;;AACDA,YAAI,CAAC4J,OAAL5J,CAAakB,GAAG,IAAI61D,UAAU,CAAClqC,MAAD,EAASxrB,OAAT,EAAkBH,GAAlB,CAA9BlB;AACAA,YAAI,CAAC4J,OAAL5J,CAAakB,GAAG,IAAI61D,UAAU,CAAClqC,MAAD,EAAS/L,SAAS,CAAC1iB,IAAD,CAAT0iB,IAAmB,EAA5B,EAAgC5f,GAAhC,CAA9BlB;AACAA,YAAI,CAAC4J,OAAL5J,CAAakB,GAAG,IAAI61D,UAAU,CAAClqC,MAAD,EAASxI,QAAT,EAAmBnjB,GAAnB,CAA9BlB;AACAA,YAAI,CAAC4J,OAAL5J,CAAakB,GAAG,IAAI61D,UAAU,CAAClqC,MAAD,EAAS9L,WAAT,EAAsB7f,GAAtB,CAA9BlB;AARF;AAUA,YAAMqG,KAAK,GAAGlI,KAAK,CAACsM,IAANtM,CAAW0uB,MAAX1uB,CAAd;;AACA,UAAIkI,KAAK,CAACpG,MAANoG,KAAiB,CAArB,EAAwB;AACtBA,aAAK,CAAClD,IAANkD,CAAWhI,MAAM,CAACyC,MAAPzC,CAAc,IAAdA,CAAXgI;AACD;;AACD,UAAIuwD,UAAU,CAAC7yD,GAAX6yD,CAAee,QAAff,CAAJ,EAA8B;AAC5BvxC,aAAK,CAAC/a,GAAN+a,CAAUsyC,QAAVtyC,EAAoBhf,KAApBgf;AACD;;AACD,aAAOhf,KAAP;AACD;;AACDuxD,qBAAiB,GAAG;AAClB,YAAM;AAACv2D,eAAD;AAAUjD;AAAV,UAAkB,IAAxB;AACA,aAAO,CACLiD,OADK,EAELyf,SAAS,CAAC1iB,IAAD,CAAT0iB,IAAmB,EAFd,EAGLuD,QAAQ,CAAC7C,QAAT6C,CAAkBjmB,IAAlBimB,KAA2B,EAHtB,EAIL;AAACjmB;AAAD,OAJK,EAKLimB,QALK,EAMLtD,WANK,CAAP;AAQD;;AACDqqB,uBAAmB,CAACve,MAAD,EAASzO,KAAT,EAAgBsD,OAAhB,EAA0C;AAAA,UAAjBoL,QAAiB,uEAAN,CAAC,EAAD,CAAM;AAC3D,YAAMrnB,MAAM,GAAG;AAAC08B,eAAO,EAAE;AAAV,OAAf;AACA,YAAM;AAACv/B,gBAAD;AAAWi1D;AAAX,UAA0BC,WAAW,CAAC,KAAKX,cAAN,EAAsBtqC,MAAtB,EAA8BC,QAA9B,CAA3C;AACA,UAAIzrB,OAAO,GAAGuB,QAAd;;AACA,UAAIm1D,WAAW,CAACn1D,QAAD,EAAWwb,KAAX,CAAf,EAAkC;AAChC3Y,cAAM,CAAC08B,OAAP18B,GAAiB,KAAjBA;AACAic,eAAO,GAAGje,UAAU,CAACie,OAAD,CAAVje,GAAsBie,OAAO,EAA7Bje,GAAkCie,OAA5CA;AACA,cAAMs2C,WAAW,GAAG,KAAK/uB,cAAL,CAAoBpc,MAApB,EAA4BnL,OAA5B,EAAqCm2C,WAArC,CAApB;AACAx2D,eAAO,GAAGgtB,cAAc,CAACzrB,QAAD,EAAW8e,OAAX,EAAoBs2C,WAApB,CAAxB32D;AACD;;AACD,WAAK,MAAMqqB,IAAX,IAAmBtN,KAAnB,EAA0B;AACxB3Y,cAAM,CAACimB,IAAD,CAANjmB,GAAepE,OAAO,CAACqqB,IAAD,CAAtBjmB;AACD;;AACD,aAAOA,MAAP;AACD;;AACDwjC,kBAAc,CAACpc,MAAD,EAASnL,OAAT,EAAuD;AAAA,UAArCoL,QAAqC,uEAA1B,CAAC,EAAD,CAA0B;AAAA,UAApB0B,kBAAoB;AACnE,YAAM;AAAC5rB;AAAD,UAAak1D,WAAW,CAAC,KAAKX,cAAN,EAAsBtqC,MAAtB,EAA8BC,QAA9B,CAA9B;AACA,aAAOpuB,QAAQ,CAACgjB,OAAD,CAARhjB,GACH2vB,cAAc,CAACzrB,QAAD,EAAW8e,OAAX,EAAoBxf,SAApB,EAA+BssB,kBAA/B,CADX9vB,GAEHkE,QAFJ;AAGD;;AAhJU;;AAkJb,WAASk1D,WAAT,CAAqBG,aAArB,EAAoCprC,MAApC,EAA4CC,QAA5C,EAAsD;AACpD,QAAIzH,KAAK,GAAG4yC,aAAa,CAACx0C,GAAdw0C,CAAkBprC,MAAlBorC,CAAZ;;AACA,QAAI,CAAC5yC,KAAL,EAAY;AACVA,WAAK,GAAG,IAAI+S,GAAJ,EAAR/S;AACA4yC,mBAAa,CAAC3tD,GAAd2tD,CAAkBprC,MAAlBorC,EAA0B5yC,KAA1B4yC;AACD;;AACD,UAAM1/B,QAAQ,GAAGzL,QAAQ,CAAC8C,IAAT9C,EAAjB;AACA,QAAI6Y,MAAM,GAAGtgB,KAAK,CAAC5B,GAAN4B,CAAUkT,QAAVlT,CAAb;;AACA,QAAI,CAACsgB,MAAL,EAAa;AACX,YAAM/iC,QAAQ,GAAGgqB,eAAe,CAACC,MAAD,EAASC,QAAT,CAAhC;;AACA6Y,YAAM,GAAG;AACP/iC,gBADO;AAEPi1D,mBAAW,EAAE/qC,QAAQ,CAACkD,MAATlD,CAAgBhmB,CAAC,IAAI,CAACA,CAAC,CAACyX,WAAFzX,GAAgBmnB,QAAhBnnB,CAAyB,OAAzBA,CAAtBgmB;AAFN,OAAT6Y;AAIAtgB,WAAK,CAAC/a,GAAN+a,CAAUkT,QAAVlT,EAAoBsgB,MAApBtgB;AACD;;AACD,WAAOsgB,MAAP;AACD;;AACD,QAAMuyB,WAAW,GAAGj6D,KAAK,IAAIS,QAAQ,CAACT,KAAD,CAARS,IACxBL,MAAM,CAACwjC,mBAAPxjC,CAA2BJ,KAA3BI,EAAkC0gC,MAAlC1gC,CAAyC,CAAC2gC,GAAD,EAAM99B,GAAN,KAAc89B,GAAG,IAAIv7B,UAAU,CAACxF,KAAK,CAACiD,GAAD,CAAN,CAAxE7C,EAAsF,KAAtFA,CADL;;AAEA,WAAS05D,WAAT,CAAqBzpC,KAArB,EAA4BlQ,KAA5B,EAAmC;AACjC,UAAM;AAACgR,kBAAD;AAAeC;AAAf,QAA8BjO,YAAY,CAACkN,KAAD,CAAhD;;AACA,SAAK,MAAM5C,IAAX,IAAmBtN,KAAnB,EAA0B;AACxB,YAAM6Q,UAAU,GAAGG,YAAY,CAAC1D,IAAD,CAA/B;AACA,YAAMwD,SAAS,GAAGG,WAAW,CAAC3D,IAAD,CAA7B;AACA,YAAMztB,KAAK,GAAG,CAACixB,SAAS,IAAID,UAAd,KAA6BX,KAAK,CAAC5C,IAAD,CAAhD;;AACA,UAAKuD,UAAU,KAAKxrB,UAAU,CAACxF,KAAD,CAAVwF,IAAqBy0D,WAAW,CAACj6D,KAAD,CAArC,CAAVgxB,IACCC,SAAS,IAAIhxB,OAAO,CAACD,KAAD,CAD1B,EACoC;AAClC,eAAO,IAAP;AACD;AACF;;AACD,WAAO,KAAP;AACD;;AAED,MAAIk6D,OAAO,GAAG,OAAd;AAEA,QAAMC,eAAe,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,MAAlB,EAA0B,OAA1B,EAAmC,WAAnC,CAAxB;;AACA,WAASC,oBAAT,CAA8B3a,QAA9B,EAAwC9wC,IAAxC,EAA8C;AAC5C,WAAO8wC,QAAQ,KAAK,KAAbA,IAAsBA,QAAQ,KAAK,QAAnCA,IAAgD0a,eAAe,CAACj3D,OAAhBi3D,CAAwB1a,QAAxB0a,MAAsC,CAAC,CAAvCA,IAA4CxrD,IAAI,KAAK,GAA5G;AACD;;AACD,WAAS0rD,aAAT,CAAuBC,EAAvB,EAA2BC,EAA3B,EAA+B;AAC7B,WAAO,UAAS70D,CAAT,EAAYC,CAAZ,EAAe;AACpB,aAAOD,CAAC,CAAC40D,EAAD,CAAD50D,KAAUC,CAAC,CAAC20D,EAAD,CAAX50D,GACHA,CAAC,CAAC60D,EAAD,CAAD70D,GAAQC,CAAC,CAAC40D,EAAD,CADN70D,GAEHA,CAAC,CAAC40D,EAAD,CAAD50D,GAAQC,CAAC,CAAC20D,EAAD,CAFb;AADF;AAKD;;AACD,WAASE,oBAAT,CAA8B/2C,OAA9B,EAAuC;AACrC,UAAMC,KAAK,GAAGD,OAAO,CAACC,KAAtB;AACA,UAAMsf,gBAAgB,GAAGtf,KAAK,CAACtgB,OAANsgB,CAAcN,SAAvC;AACAM,SAAK,CAAC0/B,aAAN1/B,CAAoB,aAApBA;AACAriB,YAAQ,CAAC2hC,gBAAgB,IAAIA,gBAAgB,CAACy3B,UAAtC,EAAkD,CAACh3C,OAAD,CAAlD,EAA6DC,KAA7D,CAARriB;AACD;;AACD,WAASq5D,mBAAT,CAA6Bj3C,OAA7B,EAAsC;AACpC,UAAMC,KAAK,GAAGD,OAAO,CAACC,KAAtB;AACA,UAAMsf,gBAAgB,GAAGtf,KAAK,CAACtgB,OAANsgB,CAAcN,SAAvC;AACA/hB,YAAQ,CAAC2hC,gBAAgB,IAAIA,gBAAgB,CAAC23B,UAAtC,EAAkD,CAACl3C,OAAD,CAAlD,EAA6DC,KAA7D,CAARriB;AACD;;AACD,WAASu5D,SAAT,CAAmB/0D,IAAnB,EAAyB;AACvB,QAAI+vB,eAAe,MAAM,OAAO/vB,IAAP,KAAgB,QAAzC,EAAmD;AACjDA,UAAI,GAAGgwB,QAAQ,CAACglC,cAAThlC,CAAwBhwB,IAAxBgwB,CAAPhwB;AADF,WAEO,IAAIA,IAAI,IAAIA,IAAI,CAAC7D,MAAjB,EAAyB;AAC9B6D,UAAI,GAAGA,IAAI,CAAC,CAAD,CAAXA;AACD;;AACD,QAAIA,IAAI,IAAIA,IAAI,CAACoiB,MAAjB,EAAyB;AACvBpiB,UAAI,GAAGA,IAAI,CAACoiB,MAAZpiB;AACD;;AACD,WAAOA,IAAP;AACD;;AACD,QAAMi1D,SAAS,GAAG,EAAlB;;AACA,QAAMC,QAAQ,GAAI93D,GAAD,IAAS;AACxB,UAAMglB,MAAM,GAAG2yC,SAAS,CAAC33D,GAAD,CAAxB;AACA,WAAO7C,MAAM,CAAC8K,MAAP9K,CAAc06D,SAAd16D,EAAyB2xB,MAAzB3xB,CAAiC6S,CAAD,IAAOA,CAAC,CAACgV,MAAFhV,KAAagV,MAApD7nB,EAA4DuH,GAA5DvH,EAAP;AAFF;;AAIA,WAAS46D,eAAT,CAAyBt2D,GAAzB,EAA8BmF,KAA9B,EAAqC+kC,IAArC,EAA2C;AACzC,UAAM7sC,IAAI,GAAG3B,MAAM,CAAC2B,IAAP3B,CAAYsE,GAAZtE,CAAb;;AACA,SAAK,MAAM6C,GAAX,IAAkBlB,IAAlB,EAAwB;AACtB,YAAMk5D,MAAM,GAAG,CAACh4D,GAAhB;;AACA,UAAIg4D,MAAM,IAAIpxD,KAAd,EAAqB;AACnB,cAAM7J,KAAK,GAAG0E,GAAG,CAACzB,GAAD,CAAjB;AACA,eAAOyB,GAAG,CAACzB,GAAD,CAAV;;AACA,YAAI2rC,IAAI,GAAG,CAAPA,IAAYqsB,MAAM,GAAGpxD,KAAzB,EAAgC;AAC9BnF,aAAG,CAACu2D,MAAM,GAAGrsB,IAAV,CAAHlqC,GAAqB1E,KAArB0E;AACD;AACF;AACF;AACF;;AACD,WAASw2D,kBAAT,CAA4Bl1D,CAA5B,EAA+Bm1D,SAA/B,EAA0CC,WAA1C,EAAuDC,OAAvD,EAAgE;AAC9D,QAAI,CAACD,WAAD,IAAgBp1D,CAAC,CAAC7F,IAAF6F,KAAW,UAA/B,EAA2C;AACzC,aAAO,IAAP;AACD;;AACD,QAAIq1D,OAAJ,EAAa;AACX,aAAOF,SAAP;AACD;;AACD,WAAOn1D,CAAP;AACD;;AACD,QAAMs1D,KAAN,CAAY;AACVh6C,eAAW,CAACzb,IAAD,EAAO01D,UAAP,EAAmB;AAC5B,YAAM/3B,MAAM,GAAG,KAAKA,MAAL,GAAc,IAAIu1B,MAAJ,CAAWwC,UAAX,CAA7B;AACA,YAAMC,aAAa,GAAGZ,SAAS,CAAC/0D,IAAD,CAA/B;AACA,YAAM41D,aAAa,GAAGV,QAAQ,CAACS,aAAD,CAA9B;;AACA,UAAIC,aAAJ,EAAmB;AACjB,cAAM,IAAI/pC,KAAJ,CACJ,+CAA+C+pC,aAAa,CAAC37D,EAA7D,GAAkE,IAAlE,GACJ,iDADI,GACgD27D,aAAa,CAACxzC,MAAdwzC,CAAqB37D,EADrE,GAC0E,mBAFtE,CAAN;AAID;;AACD,YAAMsD,OAAO,GAAGogC,MAAM,CAACwH,cAAPxH,CAAsBA,MAAM,CAACm2B,iBAAPn2B,EAAtBA,EAAkD,KAAKtb,UAAL,EAAlDsb,CAAhB;AACA,WAAK7f,QAAL,GAAgB,KAAK6f,MAAM,CAAC7f,QAAP6f,IAAmBwyB,eAAe,CAACwF,aAAD,CAAvC,GAAhB;AACA,WAAK73C,QAAL,CAAcyuC,YAAd,CAA2B5uB,MAA3B;AACA,YAAM/f,OAAO,GAAG,KAAKE,QAAL,CAAcsuC,cAAd,CAA6BuJ,aAA7B,EAA4Cp4D,OAAO,CAACy1B,WAApD,CAAhB;AACA,YAAM5Q,MAAM,GAAGxE,OAAO,IAAIA,OAAO,CAACwE,MAAlC;AACA,YAAMI,MAAM,GAAGJ,MAAM,IAAIA,MAAM,CAACI,MAAhC;AACA,YAAMpB,KAAK,GAAGgB,MAAM,IAAIA,MAAM,CAAChB,KAA/B;AACA,WAAKnnB,EAAL,GAAUD,GAAG,EAAb;AACA,WAAKwkB,GAAL,GAAWZ,OAAX;AACA,WAAKwE,MAAL,GAAcA,MAAd;AACA,WAAKhB,KAAL,GAAaA,KAAb;AACA,WAAKoB,MAAL,GAAcA,MAAd;AACA,WAAKqzC,QAAL,GAAgBt4D,OAAhB;AACA,WAAKu4D,YAAL,GAAoB,KAAK9iC,WAAzB;AACA,WAAKiwB,OAAL,GAAe,EAAf;AACA,WAAK8S,SAAL,GAAiB,EAAjB;AACA,WAAKl1B,OAAL,GAAeziC,SAAf;AACA,WAAK4qD,KAAL,GAAa,EAAb;AACA,WAAK/mC,uBAAL,GAA+B7jB,SAA/B;AACA,WAAK0oC,SAAL,GAAiB1oC,SAAjB;AACA,WAAKm8B,OAAL,GAAe,EAAf;AACA,WAAKy7B,UAAL,GAAkB53D,SAAlB;AACA,WAAK63D,UAAL,GAAkB,EAAlB;AACA,WAAKC,oBAAL,GAA4B93D,SAA5B;AACA,WAAK+3D,eAAL,GAAuB,EAAvB;AACA,WAAK52C,MAAL,GAAc,EAAd;AACA,WAAK62C,QAAL,GAAgB,IAAI/F,aAAJ,EAAhB;AACA,WAAKP,QAAL,GAAgB,EAAhB;AACA,WAAKuG,cAAL,GAAsB,EAAtB;AACA,WAAKC,QAAL,GAAgB,KAAhB;AACA,WAAKxuB,mBAAL,GAA2B1pC,SAA3B;AACA,WAAK2kC,QAAL,GAAgB3kC,SAAhB;AACA,WAAKm4D,SAAL,GAAiB/uD,QAAQ,CAACqX,IAAI,IAAI,KAAK4d,MAAL,CAAY5d,IAAZ,CAAT,EAA4BthB,OAAO,CAACi5D,WAARj5D,IAAuB,CAAnD,CAAzB;AACA,WAAK4rC,YAAL,GAAoB,EAApB;AACA8rB,eAAS,CAAC,KAAKh7D,EAAN,CAATg7D,GAAqB,IAArBA;;AACA,UAAI,CAACr3C,OAAD,IAAY,CAACwE,MAAjB,EAAyB;AACvB/jB,eAAO,CAACi0D,KAARj0D,CAAc,mEAAdA;AACA;AACD;;AACDi9B,cAAQ,CAACR,MAATQ,CAAgB,IAAhBA,EAAsB,UAAtBA,EAAkCq5B,oBAAlCr5B;AACAA,cAAQ,CAACR,MAATQ,CAAgB,IAAhBA,EAAsB,UAAtBA,EAAkCu5B,mBAAlCv5B;;AACA,WAAKm7B,WAAL;;AACA,UAAI,KAAKH,QAAT,EAAmB;AACjB,aAAK75B,MAAL;AACD;AACF;;AACc,QAAXzJ,WAAW,GAAG;AAChB,YAAM;AAACz1B,eAAO,EAAE;AAACy1B,qBAAD;AAAchU;AAAd,SAAV;AAA8CoC,aAA9C;AAAqDoB,cAArD;AAA6DszC;AAA7D,UAA6E,IAAnF;;AACA,UAAI,CAAC57D,aAAa,CAAC84B,WAAD,CAAlB,EAAiC;AAC/B,eAAOA,WAAP;AACD;;AACD,UAAIhU,mBAAmB,IAAI82C,YAA3B,EAAyC;AACvC,eAAOA,YAAP;AACD;;AACD,aAAOtzC,MAAM,GAAGpB,KAAK,GAAGoB,MAAX,GAAoB,IAAjC;AACD;;AACO,QAAJ1B,IAAI,GAAG;AACT,aAAO,KAAK6c,MAAL,CAAY7c,IAAnB;AACD;;AACO,QAAJA,IAAI,CAACA,IAAD,EAAO;AACb,WAAK6c,MAAL,CAAY7c,IAAZ,GAAmBA,IAAnB;AACD;;AACU,QAAPvjB,OAAO,GAAG;AACZ,aAAO,KAAKs4D,QAAZ;AACD;;AACU,QAAPt4D,OAAO,CAACA,OAAD,EAAU;AACnB,WAAKogC,MAAL,CAAYpgC,OAAZ,GAAsBA,OAAtB;AACD;;AACDk5D,eAAW,GAAG;AACZ,WAAKlZ,aAAL,CAAmB,YAAnB;;AACA,UAAI,KAAKhgD,OAAL,CAAa8hB,UAAjB,EAA6B;AAC3B,aAAKge,MAAL;AADF,aAEO;AACLlK,mBAAW,CAAC,IAAD,EAAO,KAAK51B,OAAL,CAAaogB,gBAApB,CAAXwV;AACD;;AACD,WAAKujC,UAAL;AACA,WAAKnZ,aAAL,CAAmB,WAAnB;AACA,aAAO,IAAP;AACD;;AACDgW,SAAK,GAAG;AACNpxC,iBAAW,CAAC,KAAKC,MAAN,EAAc,KAAK5D,GAAnB,CAAX2D;AACA,aAAO,IAAP;AACD;;AACDuV,QAAI,GAAG;AACL4D,cAAQ,CAAC5D,IAAT4D,CAAc,IAAdA;AACA,aAAO,IAAP;AACD;;AACD+B,UAAM,CAACjc,KAAD,EAAQoB,MAAR,EAAgB;AACpB,UAAI,CAAC8Y,QAAQ,CAACjB,OAATiB,CAAiB,IAAjBA,CAAL,EAA6B;AAC3B,aAAKq7B,OAAL,CAAav1C,KAAb,EAAoBoB,MAApB;AADF,aAEO;AACL,aAAKo0C,iBAAL,GAAyB;AAACx1C,eAAD;AAAQoB;AAAR,SAAzB;AACD;AACF;;AACDm0C,WAAO,CAACv1C,KAAD,EAAQoB,MAAR,EAAgB;AACrB,YAAMjlB,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM6kB,MAAM,GAAG,KAAKA,MAApB;AACA,YAAM4Q,WAAW,GAAGz1B,OAAO,CAACyhB,mBAARzhB,IAA+B,KAAKy1B,WAAxD;AACA,YAAM6jC,OAAO,GAAG,KAAK/4C,QAAL,CAAc+U,cAAd,CAA6BzQ,MAA7B,EAAqChB,KAArC,EAA4CoB,MAA5C,EAAoDwQ,WAApD,CAAhB;AACA,YAAM8jC,QAAQ,GAAGv5D,OAAO,CAACogB,gBAARpgB,IAA4B,KAAKugB,QAAL,CAAcC,mBAAd,EAA7C;AACA,YAAMc,IAAI,GAAG,KAAKuC,KAAL,GAAa,QAAb,GAAwB,QAArC;AACA,WAAKA,KAAL,GAAay1C,OAAO,CAACz1C,KAArB;AACA,WAAKoB,MAAL,GAAcq0C,OAAO,CAACr0C,MAAtB;AACA,WAAKszC,YAAL,GAAoB,KAAK9iC,WAAzB;;AACA,UAAI,CAACG,WAAW,CAAC,IAAD,EAAO2jC,QAAP,EAAiB,IAAjB,CAAhB,EAAwC;AACtC;AACD;;AACD,WAAKvZ,aAAL,CAAmB,QAAnB,EAA6B;AAACx9C,YAAI,EAAE82D;AAAP,OAA7B;AACAr7D,cAAQ,CAAC+B,OAAO,CAACw5D,QAAT,EAAmB,CAAC,IAAD,EAAOF,OAAP,CAAnB,EAAoC,IAApC,CAARr7D;;AACA,UAAI,KAAK86D,QAAT,EAAmB;AACjB,YAAI,KAAKC,SAAL,CAAe13C,IAAf,CAAJ,EAA0B;AACxB,eAAKm4C,MAAL;AACD;AACF;AACF;;AACDC,uBAAmB,GAAG;AACpB,YAAM15D,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM25D,aAAa,GAAG35D,OAAO,CAACgiB,MAARhiB,IAAkB,EAAxC;AACA1B,UAAI,CAACq7D,aAAD,EAAgB,CAACC,WAAD,EAAc7T,MAAd,KAAyB;AAC3C6T,mBAAW,CAACl9D,EAAZk9D,GAAiB7T,MAAjB6T;AADE,QAAJt7D;AAGD;;AACDu7D,uBAAmB,GAAG;AACpB,YAAM75D,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM85D,SAAS,GAAG95D,OAAO,CAACgiB,MAA1B;AACA,YAAMA,MAAM,GAAG,KAAKA,MAApB;AACA,YAAM+3C,OAAO,GAAG/8D,MAAM,CAAC2B,IAAP3B,CAAYglB,MAAZhlB,EAAoB0gC,MAApB1gC,CAA2B,CAACsE,GAAD,EAAM5E,EAAN,KAAa;AACtD4E,WAAG,CAAC5E,EAAD,CAAH4E,GAAU,KAAVA;AACA,eAAOA,GAAP;AAFc,SAGb,EAHatE,CAAhB;AAIA,UAAIgM,KAAK,GAAG,EAAZ;;AACA,UAAI8wD,SAAJ,EAAe;AACb9wD,aAAK,GAAGA,KAAK,CAACwjC,MAANxjC,CACNhM,MAAM,CAAC2B,IAAP3B,CAAY88D,SAAZ98D,EAAuBuC,GAAvBvC,CAA4BN,EAAD,IAAQ;AACjC,gBAAM83D,YAAY,GAAGsF,SAAS,CAACp9D,EAAD,CAA9B;AACA,gBAAM6O,IAAI,GAAGgpD,aAAa,CAAC73D,EAAD,EAAK83D,YAAL,CAA1B;AACA,gBAAMwF,QAAQ,GAAGzuD,IAAI,KAAK,GAA1B;AACA,gBAAMgjC,YAAY,GAAGhjC,IAAI,KAAK,GAA9B;AACA,iBAAO;AACLvL,mBAAO,EAAEw0D,YADJ;AAELyF,qBAAS,EAAED,QAAQ,GAAG,WAAH,GAAiBzrB,YAAY,GAAG,QAAH,GAAc,MAFzD;AAGL2rB,iBAAK,EAAEF,QAAQ,GAAG,cAAH,GAAoBzrB,YAAY,GAAG,UAAH,GAAgB;AAH1D,WAAP;AALF,UADMvlC,CAARA;AAaD;;AACD1K,UAAI,CAAC0K,KAAD,EAASvG,IAAD,IAAU;AACpB,cAAM+xD,YAAY,GAAG/xD,IAAI,CAACzC,OAA1B;AACA,cAAMtD,EAAE,GAAG83D,YAAY,CAAC93D,EAAxB;AACA,cAAM6O,IAAI,GAAGgpD,aAAa,CAAC73D,EAAD,EAAK83D,YAAL,CAA1B;AACA,cAAM2F,SAAS,GAAGx8D,cAAc,CAAC62D,YAAY,CAACz3D,IAAd,EAAoB0F,IAAI,CAACy3D,KAAzB,CAAhC;;AACA,YAAI1F,YAAY,CAACnY,QAAbmY,KAA0B3zD,SAA1B2zD,IAAuCwC,oBAAoB,CAACxC,YAAY,CAACnY,QAAd,EAAwB9wC,IAAxB,CAApByrD,KAAsDA,oBAAoB,CAACv0D,IAAI,CAACw3D,SAAN,CAArH,EAAuI;AACrIzF,sBAAY,CAACnY,QAAbmY,GAAwB/xD,IAAI,CAACw3D,SAA7BzF;AACD;;AACDuF,eAAO,CAACr9D,EAAD,CAAPq9D,GAAc,IAAdA;AACA,YAAIh4C,KAAK,GAAG,IAAZ;;AACA,YAAIrlB,EAAE,IAAIslB,MAANtlB,IAAgBslB,MAAM,CAACtlB,EAAD,CAANslB,CAAWjlB,IAAXilB,KAAoBm4C,SAAxC,EAAmD;AACjDp4C,eAAK,GAAGC,MAAM,CAACtlB,EAAD,CAAdqlB;AADF,eAEO;AACL,gBAAMq4C,UAAU,GAAG9R,QAAQ,CAACX,QAATW,CAAkB6R,SAAlB7R,CAAnB;AACAvmC,eAAK,GAAG,IAAIq4C,UAAJ,CAAe;AACrB19D,cADqB;AAErBK,gBAAI,EAAEo9D,SAFe;AAGrBl5C,eAAG,EAAE,KAAKA,GAHW;AAIrBX,iBAAK,EAAE;AAJc,WAAf,CAARyB;AAMAC,gBAAM,CAACD,KAAK,CAACrlB,EAAP,CAANslB,GAAmBD,KAAnBC;AACD;;AACDD,aAAK,CAAC+7B,IAAN/7B,CAAWyyC,YAAXzyC,EAAyB/hB,OAAzB+hB;AAtBE,QAAJzjB;AAwBAA,UAAI,CAACy7D,OAAD,EAAU,CAACM,UAAD,EAAa39D,EAAb,KAAoB;AAChC,YAAI,CAAC29D,UAAL,EAAiB;AACf,iBAAOr4C,MAAM,CAACtlB,EAAD,CAAb;AACD;AAHC,QAAJ4B;AAKAA,UAAI,CAAC0jB,MAAD,EAAUD,KAAD,IAAW;AACtB8pC,eAAO,CAACvrB,SAARurB,CAAkB,IAAlBA,EAAwB9pC,KAAxB8pC,EAA+B9pC,KAAK,CAAC/hB,OAArC6rD;AACAA,eAAO,CAACwC,MAARxC,CAAe,IAAfA,EAAqB9pC,KAArB8pC;AAFE,QAAJvtD;AAID;;AACDg8D,mBAAe,GAAG;AAChB,YAAM34B,QAAQ,GAAG,KAAK62B,SAAtB;AACA,YAAMntB,OAAO,GAAG,KAAK9nB,IAAL,CAAUpD,QAAV,CAAmBvhB,MAAnC;AACA,YAAMwsC,OAAO,GAAGzJ,QAAQ,CAAC/iC,MAAzB;AACA+iC,cAAQ,CAACr9B,IAATq9B,CAAc,CAACr/B,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAAClD,KAAFkD,GAAUC,CAAC,CAACnD,KAApCuiC;;AACA,UAAIyJ,OAAO,GAAGC,OAAd,EAAuB;AACrB,aAAK,IAAI5sC,CAAC,GAAG4sC,OAAb,EAAsB5sC,CAAC,GAAG2sC,OAA1B,EAAmC,EAAE3sC,CAArC,EAAwC;AACtC,eAAK87D,mBAAL,CAAyB97D,CAAzB;AACD;;AACDkjC,gBAAQ,CAAC74B,MAAT64B,CAAgB0J,OAAhB1J,EAAyByJ,OAAO,GAAGC,OAAnC1J;AACD;;AACD,WAAKi3B,eAAL,GAAuBj3B,QAAQ,CAACvkC,KAATukC,CAAe,CAAfA,EAAkBr9B,IAAlBq9B,CAAuBs1B,aAAa,CAAC,OAAD,EAAU,OAAV,CAApCt1B,CAAvB;AACD;;AACD64B,+BAA2B,GAAG;AAC5B,YAAM;AAAChC,iBAAS,EAAE72B,QAAZ;AAAsBpe,YAAI,EAAE;AAACpD;AAAD;AAA5B,UAA0C,IAAhD;;AACA,UAAIwhB,QAAQ,CAAC/iC,MAAT+iC,GAAkBxhB,QAAQ,CAACvhB,MAA/B,EAAuC;AACrC,eAAO,KAAK0kC,OAAZ;AACD;;AACD3B,cAAQ,CAACp5B,OAATo5B,CAAiB,CAAC52B,IAAD,EAAO3L,KAAP,KAAiB;AAChC,YAAI+gB,QAAQ,CAACwO,MAATxO,CAAgBjf,CAAC,IAAIA,CAAC,KAAK6J,IAAI,CAACuqC,QAAhCn1B,EAA0CvhB,MAA1CuhB,KAAqD,CAAzD,EAA4D;AAC1D,eAAKo6C,mBAAL,CAAyBn7D,KAAzB;AACD;AAHH;AAKD;;AACDq7D,4BAAwB,GAAG;AACzB,YAAMC,cAAc,GAAG,EAAvB;AACA,YAAMv6C,QAAQ,GAAG,KAAKoD,IAAL,CAAUpD,QAA3B;AACA,UAAI1hB,CAAJ,EAAOO,IAAP;;AACA,WAAKw7D,2BAAL;;AACA,WAAK/7D,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGmhB,QAAQ,CAACvhB,MAA5B,EAAoCH,CAAC,GAAGO,IAAxC,EAA8CP,CAAC,EAA/C,EAAmD;AACjD,cAAMslC,OAAO,GAAG5jB,QAAQ,CAAC1hB,CAAD,CAAxB;AACA,YAAIsM,IAAI,GAAG,KAAK67B,cAAL,CAAoBnoC,CAApB,CAAX;AACA,cAAM1B,IAAI,GAAGgnC,OAAO,CAAChnC,IAARgnC,IAAgB,KAAK3D,MAAL,CAAYrjC,IAAzC;;AACA,YAAIgO,IAAI,CAAChO,IAALgO,IAAaA,IAAI,CAAChO,IAALgO,KAAchO,IAA/B,EAAqC;AACnC,eAAKw9D,mBAAL,CAAyB97D,CAAzB;;AACAsM,cAAI,GAAG,KAAK67B,cAAL,CAAoBnoC,CAApB,CAAPsM;AACD;;AACDA,YAAI,CAAChO,IAALgO,GAAYhO,IAAZgO;AACAA,YAAI,CAACqW,SAALrW,GAAiBg5B,OAAO,CAAC3iB,SAAR2iB,IAAqBkwB,YAAY,CAACl3D,IAAD,EAAO,KAAKiD,OAAZ,CAAlD+K;AACAA,YAAI,CAAC4vD,KAAL5vD,GAAag5B,OAAO,CAAC42B,KAAR52B,IAAiB,CAA9Bh5B;AACAA,YAAI,CAAC3L,KAAL2L,GAAatM,CAAbsM;AACAA,YAAI,CAACq+B,KAALr+B,GAAa,KAAKg5B,OAAO,CAACqF,KAA1Br+B;AACAA,YAAI,CAACk1B,OAALl1B,GAAe,KAAKqoC,gBAAL,CAAsB30C,CAAtB,CAAfsM;;AACA,YAAIA,IAAI,CAACq4B,UAAT,EAAqB;AACnBr4B,cAAI,CAACq4B,UAALr4B,CAAgB86B,WAAhB96B,CAA4BtM,CAA5BsM;AACAA,cAAI,CAACq4B,UAALr4B,CAAgB46B,UAAhB56B;AAFF,eAGO;AACL,gBAAM6vD,eAAe,GAAGtS,QAAQ,CAACf,aAATe,CAAuBvrD,IAAvBurD,CAAxB;AACA,gBAAM;AAACnhB,8BAAD;AAAqBwC;AAArB,cAAwC3mB,QAAQ,CAAC7C,QAAT6C,CAAkBjmB,IAAlBimB,CAA9C;AACAhmB,gBAAM,CAACsP,MAAPtP,CAAc49D,eAAe,CAAC39D,SAA9BD,EAAyC;AACvC2sC,2BAAe,EAAE2e,QAAQ,CAACb,UAATa,CAAoB3e,eAApB2e,CADsB;AAEvCnhB,8BAAkB,EAAEA,kBAAkB,IAAImhB,QAAQ,CAACb,UAATa,CAAoBnhB,kBAApBmhB;AAFH,WAAzCtrD;AAIA+N,cAAI,CAACq4B,UAALr4B,GAAkB,IAAI6vD,eAAJ,CAAoB,IAApB,EAA0Bn8D,CAA1B,CAAlBsM;AACA2vD,wBAAc,CAAC54D,IAAf44D,CAAoB3vD,IAAI,CAACq4B,UAAzBs3B;AACD;AACF;;AACD,WAAKJ,eAAL;;AACA,aAAOI,cAAP;AACD;;AACDG,kBAAc,GAAG;AACfv8D,UAAI,CAAC,KAAKilB,IAAL,CAAUpD,QAAX,EAAqB,CAAC4jB,OAAD,EAAU5kC,YAAV,KAA2B;AAClD,aAAKynC,cAAL,CAAoBznC,YAApB,EAAkCikC,UAAlC,CAA6C2D,KAA7C;AADE,SAED,IAFC,CAAJzoC;AAGD;;AACDyoC,SAAK,GAAG;AACN,WAAK8zB,cAAL;;AACA,WAAK7a,aAAL,CAAmB,OAAnB;AACD;;AACD9gB,UAAM,CAAC5d,IAAD,EAAO;AACX,YAAM8e,MAAM,GAAG,KAAKA,MAApB;AACAA,YAAM,CAAClB,MAAPkB;AACA,YAAMpgC,OAAO,GAAG,KAAKs4D,QAAL,GAAgBl4B,MAAM,CAACwH,cAAPxH,CAAsBA,MAAM,CAACm2B,iBAAPn2B,EAAtBA,EAAkD,KAAKtb,UAAL,EAAlDsb,CAAhC;AACA,YAAM06B,aAAa,GAAG,KAAKvwB,mBAAL,GAA2B,CAACvqC,OAAO,CAACggB,SAA1D;;AACA,WAAK+6C,aAAL;;AACA,WAAKC,mBAAL;;AACA,WAAKC,oBAAL;;AACA,WAAKpC,QAAL,CAAcvF,UAAd;;AACA,UAAI,KAAKtT,aAAL,CAAmB,cAAnB,EAAmC;AAAC1+B,YAAD;AAAO+xC,kBAAU,EAAE;AAAnB,OAAnC,MAAiE,KAArE,EAA4E;AAC1E;AACD;;AACD,YAAMqH,cAAc,GAAG,KAAKD,wBAAL,EAAvB;AACA,WAAKza,aAAL,CAAmB,sBAAnB;AACA,UAAIwO,UAAU,GAAG,CAAjB;;AACA,WAAK,IAAI/vD,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAG,KAAKukB,IAAL,CAAUpD,QAAV,CAAmBvhB,MAA1C,EAAkDH,CAAC,GAAGO,IAAtD,EAA4DP,CAAC,EAA7D,EAAiE;AAC/D,cAAM;AAAC2kC;AAAD,YAAe,KAAKwD,cAAL,CAAoBnoC,CAApB,CAArB;AACA,cAAMsoC,KAAK,GAAG,CAAC+zB,aAAD,IAAkBJ,cAAc,CAAC56D,OAAf46D,CAAuBt3B,UAAvBs3B,MAAuC,CAAC,CAAxE;AACAt3B,kBAAU,CAACgE,qBAAXhE,CAAiC2D,KAAjC3D;AACAorB,kBAAU,GAAG1rD,IAAI,CAACqC,GAALrC,CAAS,CAACsgC,UAAU,CAAC8F,cAAX9F,EAAVtgC,EAAuC0rD,UAAvC1rD,CAAb0rD;AACD;;AACDA,gBAAU,GAAG,KAAK0M,WAAL,GAAmBl7D,OAAO,CAACosD,MAARpsD,CAAeouD,WAAfpuD,GAA6BwuD,UAA7BxuD,GAA0C,CAA1EwuD;;AACA,WAAK2M,aAAL,CAAmB3M,UAAnB;;AACA,UAAI,CAACsM,aAAL,EAAoB;AAClBx8D,YAAI,CAACo8D,cAAD,EAAkBt3B,UAAD,IAAgB;AACnCA,oBAAU,CAAC2D,KAAX3D;AADE,UAAJ9kC;AAGD;;AACD,WAAK88D,eAAL,CAAqB95C,IAArB;;AACA,WAAK0+B,aAAL,CAAmB,aAAnB,EAAkC;AAAC1+B;AAAD,OAAlC;;AACA,WAAKokC,OAAL,CAAaphD,IAAb,CAAkB2yD,aAAa,CAAC,GAAD,EAAM,MAAN,CAA/B;;AACA,YAAM;AAACj6B,eAAD;AAAUy7B;AAAV,UAAwB,IAA9B;;AACA,UAAIA,UAAJ,EAAgB;AACd,aAAK4C,aAAL,CAAmB5C,UAAnB,EAA+B,IAA/B;AADF,aAEO,IAAIz7B,OAAO,CAACp+B,MAAZ,EAAoB;AACzB,aAAK08D,kBAAL,CAAwBt+B,OAAxB,EAAiCA,OAAjC,EAA0C,IAA1C;AACD;;AACD,WAAKy8B,MAAL;AACD;;AACDsB,iBAAa,GAAG;AACdz8D,UAAI,CAAC,KAAK0jB,MAAN,EAAeD,KAAD,IAAW;AAC3B8pC,eAAO,CAACyC,SAARzC,CAAkB,IAAlBA,EAAwB9pC,KAAxB8pC;AADE,QAAJvtD;AAGA,WAAKo7D,mBAAL;AACA,WAAKG,mBAAL;AACD;;AACDmB,uBAAmB,GAAG;AACpB,YAAMh7D,OAAO,GAAG,KAAKA,OAArB;AACA,YAAMu7D,cAAc,GAAG,IAAIryD,GAAJ,CAAQlM,MAAM,CAAC2B,IAAP3B,CAAY,KAAK07D,UAAjB17D,CAAR,CAAvB;AACA,YAAMw+D,SAAS,GAAG,IAAItyD,GAAJ,CAAQlJ,OAAO,CAAC0gB,MAAhB,CAAlB;;AACA,UAAI,CAACre,SAAS,CAACk5D,cAAD,EAAiBC,SAAjB,CAAV,IAAyC,CAAC,CAAC,KAAK7C,oBAAP,KAAgC34D,OAAO,CAAC8hB,UAArF,EAAiG;AAC/F,aAAK25C,YAAL;AACA,aAAKtC,UAAL;AACD;AACF;;AACD8B,wBAAoB,GAAG;AACrB,YAAM;AAACnC;AAAD,UAAmB,IAAzB;AACA,YAAM4C,OAAO,GAAG,KAAKC,sBAAL,MAAiC,EAAjD;;AACA,WAAK,MAAM;AAACnzD,cAAD;AAAS/B,aAAT;AAAgB0E;AAAhB,OAAX,IAAqCuwD,OAArC,EAA8C;AAC5C,cAAMlwB,IAAI,GAAGhjC,MAAM,KAAK,iBAAXA,GAA+B,CAAC2C,KAAhC3C,GAAwC2C,KAArD;AACAysD,uBAAe,CAACkB,cAAD,EAAiBryD,KAAjB,EAAwB+kC,IAAxB,CAAfosB;AACD;AACF;;AACD+D,0BAAsB,GAAG;AACvB,YAAM/vB,YAAY,GAAG,KAAKA,YAA1B;;AACA,UAAI,CAACA,YAAD,IAAiB,CAACA,YAAY,CAAChtC,MAAnC,EAA2C;AACzC;AACD;;AACD,WAAKgtC,YAAL,GAAoB,EAApB;AACA,YAAMgwB,YAAY,GAAG,KAAKr4C,IAAL,CAAUpD,QAAV,CAAmBvhB,MAAxC;;AACA,YAAMi9D,OAAO,GAAIvZ,GAAD,IAAS,IAAIp5C,GAAJ,CACvB0iC,YAAY,CACTjd,MADHid,CACU/7B,CAAC,IAAIA,CAAC,CAAC,CAAD,CAADA,KAASyyC,GADxB1W,EAEGrsC,GAFHqsC,CAEO,CAAC/7B,CAAD,EAAIpR,CAAJ,KAAUA,CAAC,GAAG,GAAJA,GAAUoR,CAAC,CAAC/G,MAAF+G,CAAS,CAATA,EAAY0e,IAAZ1e,CAAiB,GAAjBA,CAF3B+7B,CADuB,CAAzB;;AAKA,YAAMkwB,SAAS,GAAGD,OAAO,CAAC,CAAD,CAAzB;;AACA,WAAK,IAAIp9D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm9D,YAApB,EAAkCn9D,CAAC,EAAnC,EAAuC;AACrC,YAAI,CAAC4D,SAAS,CAACy5D,SAAD,EAAYD,OAAO,CAACp9D,CAAD,CAAnB,CAAd,EAAuC;AACrC;AACD;AACF;;AACD,aAAO3B,KAAK,CAACsM,IAANtM,CAAWg/D,SAAXh/D,EACJyC,GADIzC,CACA+S,CAAC,IAAIA,CAAC,CAAClO,KAAFkO,CAAQ,GAARA,CADL/S,EAEJyC,GAFIzC,CAEAwF,CAAC,KAAK;AAACkG,cAAM,EAAElG,CAAC,CAAC,CAAD,CAAV;AAAemE,aAAK,EAAE,CAACnE,CAAC,CAAC,CAAD,CAAxB;AAA6B6I,aAAK,EAAE,CAAC7I,CAAC,CAAC,CAAD;AAAtC,OAAL,CAFDxF,CAAP;AAGD;;AACDq+D,iBAAa,CAAC3M,UAAD,EAAa;AACxB,UAAI,KAAKxO,aAAL,CAAmB,cAAnB,EAAmC;AAACqT,kBAAU,EAAE;AAAb,OAAnC,MAA2D,KAA/D,EAAsE;AACpE;AACD;;AACDxH,aAAO,CAAC3sB,MAAR2sB,CAAe,IAAfA,EAAqB,KAAKhoC,KAA1BgoC,EAAiC,KAAK5mC,MAAtC4mC,EAA8C2C,UAA9C3C;AACA,YAAMnlC,IAAI,GAAG,KAAK6iB,SAAlB;AACA,YAAMwyB,MAAM,GAAGr1C,IAAI,CAAC7C,KAAL6C,IAAc,CAAdA,IAAmBA,IAAI,CAACzB,MAALyB,IAAe,CAAjD;AACA,WAAKg/B,OAAL,GAAe,EAAf;AACApnD,UAAI,CAAC,KAAKmtD,KAAN,EAAct3B,GAAD,IAAS;AACxB,YAAI4nC,MAAM,IAAI5nC,GAAG,CAACkoB,QAAJloB,KAAiB,WAA/B,EAA4C;AAC1C;AACD;;AACD,YAAIA,GAAG,CAACmM,SAAR,EAAmB;AACjBnM,aAAG,CAACmM,SAAJnM;AACD;;AACD,aAAKuxB,OAAL,CAAa5jD,IAAb,CAAkB,GAAGqyB,GAAG,CAACuxB,OAAJvxB,EAArB;AAPE,SAQD,IARC,CAAJ71B;;AASA,WAAKonD,OAAL,CAAan9C,OAAb,CAAqB,CAAC9F,IAAD,EAAOrD,KAAP,KAAiB;AACpCqD,YAAI,CAACu5D,IAALv5D,GAAYrD,KAAZqD;AADF;;AAGA,WAAKu9C,aAAL,CAAmB,aAAnB;AACD;;AACDob,mBAAe,CAAC95C,IAAD,EAAO;AACpB,UAAI,KAAK0+B,aAAL,CAAmB,sBAAnB,EAA2C;AAAC1+B,YAAD;AAAO+xC,kBAAU,EAAE;AAAnB,OAA3C,MAAyE,KAA7E,EAAoF;AAClF;AACD;;AACD,WAAK,IAAI50D,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAG,KAAKukB,IAAL,CAAUpD,QAAV,CAAmBvhB,MAA1C,EAAkDH,CAAC,GAAGO,IAAtD,EAA4D,EAAEP,CAA9D,EAAiE;AAC/D,aAAKmoC,cAAL,CAAoBnoC,CAApB,EAAuB2kC,UAAvB,CAAkC9C,SAAlC;AACD;;AACD,WAAK,IAAI7hC,CAAC,GAAG,CAAR,EAAWO,IAAI,GAAG,KAAKukB,IAAL,CAAUpD,QAAV,CAAmBvhB,MAA1C,EAAkDH,CAAC,GAAGO,IAAtD,EAA4D,EAAEP,CAA9D,EAAiE;AAC/D,aAAKw9D,cAAL,CAAoBx9D,CAApB,EAAuB2D,UAAU,CAACkf,IAAD,CAAVlf,GAAmBkf,IAAI,CAAC;AAACniB,sBAAY,EAAEV;AAAf,SAAD,CAAvB2D,GAA6Ckf,IAApE;AACD;;AACD,WAAK0+B,aAAL,CAAmB,qBAAnB,EAA0C;AAAC1+B;AAAD,OAA1C;AACD;;AACD26C,kBAAc,CAAC78D,KAAD,EAAQkiB,IAAR,EAAc;AAC1B,YAAMvW,IAAI,GAAG,KAAK67B,cAAL,CAAoBxnC,KAApB,CAAb;AACA,YAAMjB,IAAI,GAAG;AAAC4M,YAAD;AAAO3L,aAAP;AAAckiB,YAAd;AAAoB+xC,kBAAU,EAAE;AAAhC,OAAb;;AACA,UAAI,KAAKrT,aAAL,CAAmB,qBAAnB,EAA0C7hD,IAA1C,MAAoD,KAAxD,EAA+D;AAC7D;AACD;;AACD4M,UAAI,CAACq4B,UAALr4B,CAAgB2xB,OAAhB3xB,CAAwBuW,IAAxBvW;;AACA5M,UAAI,CAACk1D,UAALl1D,GAAkB,KAAlBA;AACA,WAAK6hD,aAAL,CAAmB,oBAAnB,EAAyC7hD,IAAzC;AACD;;AACDs7D,UAAM,GAAG;AACP,UAAI,KAAKzZ,aAAL,CAAmB,cAAnB,EAAmC;AAACqT,kBAAU,EAAE;AAAb,OAAnC,MAA2D,KAA/D,EAAsE;AACpE;AACD;;AACD,UAAIt1B,QAAQ,CAACr7B,GAATq7B,CAAa,IAAbA,CAAJ,EAAwB;AACtB,YAAI,KAAKg7B,QAAL,IAAiB,CAACh7B,QAAQ,CAACjB,OAATiB,CAAiB,IAAjBA,CAAtB,EAA8C;AAC5CA,kBAAQ,CAACt3B,KAATs3B,CAAe,IAAfA;AACD;AAHH,aAIO;AACL,aAAKhB,IAAL;AACAq6B,4BAAoB,CAAC;AAAC92C,eAAK,EAAE;AAAR,SAAD,CAApB82C;AACD;AACF;;AACDr6B,QAAI,GAAG;AACL,UAAIt+B,CAAJ;;AACA,UAAI,KAAK46D,iBAAT,EAA4B;AAC1B,cAAM;AAACx1C,eAAD;AAAQoB;AAAR,YAAkB,KAAKo0C,iBAA7B;;AACA,aAAKD,OAAL,CAAav1C,KAAb,EAAoBoB,MAApB;;AACA,aAAKo0C,iBAAL,GAAyB,IAAzB;AACD;;AACD,WAAKrD,KAAL;;AACA,UAAI,KAAKnyC,KAAL,IAAc,CAAd,IAAmB,KAAKoB,MAAL,IAAe,CAAtC,EAAyC;AACvC;AACD;;AACD,UAAI,KAAK+6B,aAAL,CAAmB,YAAnB,EAAiC;AAACqT,kBAAU,EAAE;AAAb,OAAjC,MAAyD,KAA7D,EAAoE;AAClE;AACD;;AACD,YAAM6I,MAAM,GAAG,KAAKxW,OAApB;;AACA,WAAKjnD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGy9D,MAAM,CAACt9D,MAAXH,IAAqBy9D,MAAM,CAACz9D,CAAD,CAANy9D,CAAUtW,CAAVsW,IAAe,CAAhD,EAAmD,EAAEz9D,CAArD,EAAwD;AACtDy9D,cAAM,CAACz9D,CAAD,CAANy9D,CAAUn/B,IAAVm/B,CAAe,KAAK3yB,SAApB2yB;AACD;;AACD,WAAKC,aAAL;;AACA,aAAO19D,CAAC,GAAGy9D,MAAM,CAACt9D,MAAlB,EAA0B,EAAEH,CAA5B,EAA+B;AAC7By9D,cAAM,CAACz9D,CAAD,CAANy9D,CAAUn/B,IAAVm/B,CAAe,KAAK3yB,SAApB2yB;AACD;;AACD,WAAKlc,aAAL,CAAmB,WAAnB;AACD;;AACDpe,0BAAsB,CAACF,aAAD,EAAgB;AACpC,YAAMC,QAAQ,GAAG,KAAKi3B,eAAtB;AACA,YAAMx0D,MAAM,GAAG,EAAf;AACA,UAAI3F,CAAJ,EAAOO,IAAP;;AACA,WAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG2iC,QAAQ,CAAC/iC,MAA5B,EAAoCH,CAAC,GAAGO,IAAxC,EAA8C,EAAEP,CAAhD,EAAmD;AACjD,cAAMsM,IAAI,GAAG42B,QAAQ,CAACljC,CAAD,CAArB;;AACA,YAAI,CAACijC,aAAD,IAAkB32B,IAAI,CAACk1B,OAA3B,EAAoC;AAClC77B,gBAAM,CAACtC,IAAPsC,CAAY2G,IAAZ3G;AACD;AACF;;AACD,aAAOA,MAAP;AACD;;AACD0hD,gCAA4B,GAAG;AAC7B,aAAO,KAAKlkB,sBAAL,CAA4B,IAA5B,CAAP;AACD;;AACDu6B,iBAAa,GAAG;AACd,UAAI,KAAKnc,aAAL,CAAmB,oBAAnB,EAAyC;AAACqT,kBAAU,EAAE;AAAb,OAAzC,MAAiE,KAArE,EAA4E;AAC1E;AACD;;AACD,YAAM1xB,QAAQ,GAAG,KAAKmkB,4BAAL,EAAjB;;AACA,WAAK,IAAIrnD,CAAC,GAAGkjC,QAAQ,CAAC/iC,MAAT+iC,GAAkB,CAA/B,EAAkCljC,CAAC,IAAI,CAAvC,EAA0C,EAAEA,CAA5C,EAA+C;AAC7C,aAAK29D,YAAL,CAAkBz6B,QAAQ,CAACljC,CAAD,CAA1B;AACD;;AACD,WAAKuhD,aAAL,CAAmB,mBAAnB;AACD;;AACDoc,gBAAY,CAACrxD,IAAD,EAAO;AACjB,YAAMkW,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAM8F,IAAI,GAAGhc,IAAI,CAACu+B,KAAlB;AACA,YAAM+yB,OAAO,GAAG,CAACt1C,IAAI,CAACya,QAAtB;AACA,YAAM9a,IAAI,GAAG,KAAK6iB,SAAlB;AACA,YAAMprC,IAAI,GAAG;AACX4M,YADW;AAEX3L,aAAK,EAAE2L,IAAI,CAAC3L,KAFD;AAGXi0D,kBAAU,EAAE;AAHD,OAAb;;AAKA,UAAI,KAAKrT,aAAL,CAAmB,mBAAnB,EAAwC7hD,IAAxC,MAAkD,KAAtD,EAA6D;AAC3D;AACD;;AACD,UAAIk+D,OAAJ,EAAa;AACXv1C,gBAAQ,CAAC7F,GAAD,EAAM;AACZvW,cAAI,EAAEqc,IAAI,CAACrc,IAALqc,KAAc,KAAdA,GAAsB,CAAtBA,GAA0BL,IAAI,CAAChc,IAALgc,GAAYK,IAAI,CAACrc,IADrC;AAEZC,eAAK,EAAEoc,IAAI,CAACpc,KAALoc,KAAe,KAAfA,GAAuB,KAAKlD,KAA5BkD,GAAoCL,IAAI,CAAC/b,KAAL+b,GAAaK,IAAI,CAACpc,KAFjD;AAGZic,aAAG,EAAEG,IAAI,CAACH,GAALG,KAAa,KAAbA,GAAqB,CAArBA,GAAyBL,IAAI,CAACE,GAALF,GAAWK,IAAI,CAACH,GAHlC;AAIZC,gBAAM,EAAEE,IAAI,CAACF,MAALE,KAAgB,KAAhBA,GAAwB,KAAK9B,MAA7B8B,GAAsCL,IAAI,CAACG,MAALH,GAAcK,IAAI,CAACF;AAJrD,SAAN,CAARC;AAMD;;AACD/b,UAAI,CAACq4B,UAALr4B,CAAgBgyB,IAAhBhyB;;AACA,UAAIsxD,OAAJ,EAAa;AACXr1C,kBAAU,CAAC/F,GAAD,CAAV+F;AACD;;AACD7oB,UAAI,CAACk1D,UAALl1D,GAAkB,KAAlBA;AACA,WAAK6hD,aAAL,CAAmB,kBAAnB,EAAuC7hD,IAAvC;AACD;;AACDisD,iBAAa,CAAC3jC,KAAD,EAAQ;AACnB,aAAOD,cAAc,CAACC,KAAD,EAAQ,KAAK8iB,SAAb,EAAwB,KAAK2xB,WAA7B,CAArB;AACD;;AACDoB,6BAAyB,CAAC15D,CAAD,EAAI0e,IAAJ,EAAUthB,OAAV,EAAmBw3C,gBAAnB,EAAqC;AAC5D,YAAMhvC,MAAM,GAAGyiD,WAAW,CAACC,KAAZD,CAAkB3pC,IAAlB2pC,CAAf;;AACA,UAAI,OAAOziD,MAAP,KAAkB,UAAtB,EAAkC;AAChC,eAAOA,MAAM,CAAC,IAAD,EAAO5F,CAAP,EAAU5C,OAAV,EAAmBw3C,gBAAnB,CAAb;AACD;;AACD,aAAO,EAAP;AACD;;AACD5Q,kBAAc,CAACznC,YAAD,EAAe;AAC3B,YAAM4kC,OAAO,GAAG,KAAKxgB,IAAL,CAAUpD,QAAV,CAAmBhhB,YAAnB,CAAhB;AACA,YAAMwiC,QAAQ,GAAG,KAAK62B,SAAtB;AACA,UAAIztD,IAAI,GAAG42B,QAAQ,CAAChT,MAATgT,CAAgBzgC,CAAC,IAAIA,CAAC,IAAIA,CAAC,CAACo0C,QAAFp0C,KAAe6iC,OAAzCpC,EAAkDp9B,GAAlDo9B,EAAX;;AACA,UAAI,CAAC52B,IAAL,EAAW;AACTA,YAAI,GAAG;AACLhO,cAAI,EAAE,IADD;AAELwmB,cAAI,EAAE,EAFD;AAGLwgB,iBAAO,EAAE,IAHJ;AAILX,oBAAU,EAAE,IAJP;AAKLsB,gBAAM,EAAE,IALH;AAMLuB,iBAAO,EAAE,IANJ;AAOLE,iBAAO,EAAE,IAPJ;AAQLw0B,eAAK,EAAE52B,OAAO,IAAIA,OAAO,CAAC42B,KAAnB52B,IAA4B,CAR9B;AASL3kC,eAAK,EAAED,YATF;AAULm2C,kBAAQ,EAAEvR,OAVL;AAWLz4B,iBAAO,EAAE,EAXJ;AAYLF,iBAAO,EAAE;AAZJ,SAAPL;AAcA42B,gBAAQ,CAAC7/B,IAAT6/B,CAAc52B,IAAd42B;AACD;;AACD,aAAO52B,IAAP;AACD;;AACD+Z,cAAU,GAAG;AACX,aAAO,KAAK0gB,QAAL,KAAkB,KAAKA,QAAL,GAAgBna,aAAa,CAAC,IAAD,EAAO;AAAC/K,aAAK,EAAE,IAAR;AAAcvjB,YAAI,EAAE;AAApB,OAAP,CAA/C,CAAP;AACD;;AACDs5C,0BAAsB,GAAG;AACvB,aAAO,KAAKyP,4BAAL,GAAoClnD,MAA3C;AACD;;AACDw0C,oBAAgB,CAACj0C,YAAD,EAAe;AAC7B,YAAM4kC,OAAO,GAAG,KAAKxgB,IAAL,CAAUpD,QAAV,CAAmBhhB,YAAnB,CAAhB;;AACA,UAAI,CAAC4kC,OAAL,EAAc;AACZ,eAAO,KAAP;AACD;;AACD,YAAMh5B,IAAI,GAAG,KAAK67B,cAAL,CAAoBznC,YAApB,CAAb;AACA,aAAO,OAAO4L,IAAI,CAAC25B,MAAZ,KAAuB,SAAvB,GAAmC,CAAC35B,IAAI,CAAC25B,MAAzC,GAAkD,CAACX,OAAO,CAACW,MAAlE;AACD;;AACD63B,wBAAoB,CAACp9D,YAAD,EAAe8gC,OAAf,EAAwB;AAC1C,YAAMl1B,IAAI,GAAG,KAAK67B,cAAL,CAAoBznC,YAApB,CAAb;AACA4L,UAAI,CAAC25B,MAAL35B,GAAc,CAACk1B,OAAfl1B;AACD;;AACDkqC,wBAAoB,CAAC71C,KAAD,EAAQ;AAC1B,WAAK05D,cAAL,CAAoB15D,KAApB,IAA6B,CAAC,KAAK05D,cAAL,CAAoB15D,KAApB,CAA9B;AACD;;AACDuxC,qBAAiB,CAACvxC,KAAD,EAAQ;AACvB,aAAO,CAAC,KAAK05D,cAAL,CAAoB15D,KAApB,CAAR;AACD;;AACDo9D,qBAAiB,CAACr9D,YAAD,EAAe8kC,SAAf,EAA0BhE,OAA1B,EAAmC;AAClD,YAAM3e,IAAI,GAAG2e,OAAO,GAAG,MAAH,GAAY,MAAhC;AACA,YAAMl1B,IAAI,GAAG,KAAK67B,cAAL,CAAoBznC,YAApB,CAAb;;AACA,YAAM+8B,KAAK,GAAGnxB,IAAI,CAACq4B,UAALr4B,CAAgBk/B,kBAAhBl/B,CAAmClK,SAAnCkK,EAA8CuW,IAA9CvW,CAAd;;AACA,UAAI5I,OAAO,CAAC8hC,SAAD,CAAX,EAAwB;AACtBl5B,YAAI,CAACwY,IAALxY,CAAUk5B,SAAVl5B,EAAqB25B,MAArB35B,GAA8B,CAACk1B,OAA/Bl1B;AACA,aAAKm0B,MAAL;AAFF,aAGO;AACL,aAAKq9B,oBAAL,CAA0Bp9D,YAA1B,EAAwC8gC,OAAxC;AACA/D,aAAK,CAACgD,MAANhD,CAAanxB,IAAbmxB,EAAmB;AAAC+D;AAAD,SAAnB/D;AACA,aAAKgD,MAAL,CAAaje,GAAD,IAASA,GAAG,CAAC9hB,YAAJ8hB,KAAqB9hB,YAArB8hB,GAAoCK,IAApCL,GAA2CpgB,SAAhE;AACD;AACF;;AACDq/B,QAAI,CAAC/gC,YAAD,EAAe8kC,SAAf,EAA0B;AAC5B,WAAKu4B,iBAAL,CAAuBr9D,YAAvB,EAAqC8kC,SAArC,EAAgD,KAAhD;AACD;;AACDlE,QAAI,CAAC5gC,YAAD,EAAe8kC,SAAf,EAA0B;AAC5B,WAAKu4B,iBAAL,CAAuBr9D,YAAvB,EAAqC8kC,SAArC,EAAgD,IAAhD;AACD;;AACDs2B,uBAAmB,CAACp7D,YAAD,EAAe;AAChC,YAAM4L,IAAI,GAAG,KAAKytD,SAAL,CAAer5D,YAAf,CAAb;;AACA,UAAI4L,IAAI,IAAIA,IAAI,CAACq4B,UAAjB,EAA6B;AAC3Br4B,YAAI,CAACq4B,UAALr4B,CAAgBi8B,QAAhBj8B;AACD;;AACD,aAAO,KAAKytD,SAAL,CAAer5D,YAAf,CAAP;AACD;;AACDs9D,SAAK,GAAG;AACN,UAAIh+D,CAAJ,EAAOO,IAAP;AACA,WAAKm7B,IAAL;AACA4D,cAAQ,CAACD,MAATC,CAAgB,IAAhBA;;AACA,WAAKt/B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG,KAAKukB,IAAL,CAAUpD,QAAV,CAAmBvhB,MAAtC,EAA8CH,CAAC,GAAGO,IAAlD,EAAwD,EAAEP,CAA1D,EAA6D;AAC3D,aAAK87D,mBAAL,CAAyB97D,CAAzB;AACD;AACF;;AACDi+D,WAAO,GAAG;AACR,WAAK1c,aAAL,CAAmB,eAAnB;AACA,YAAM;AAACn7B,cAAD;AAAS5D;AAAT,UAAgB,IAAtB;;AACA,WAAKw7C,KAAL;;AACA,WAAKr8B,MAAL,CAAY21B,UAAZ;;AACA,UAAIlxC,MAAJ,EAAY;AACV,aAAK42C,YAAL;AACA72C,mBAAW,CAACC,MAAD,EAAS5D,GAAT,CAAX2D;AACA,aAAKrE,QAAL,CAAcuuC,cAAd,CAA6B7tC,GAA7B;AACA,aAAK4D,MAAL,GAAc,IAAd;AACA,aAAK5D,GAAL,GAAW,IAAX;AACD;;AACD,WAAK++B,aAAL,CAAmB,SAAnB;AACA,aAAO0X,SAAS,CAAC,KAAKh7D,EAAN,CAAhB;AACA,WAAKsjD,aAAL,CAAmB,cAAnB;AACD;;AACD2c,iBAAa,GAAU;AACrB,aAAO,KAAK93C,MAAL,CAAY+3C,SAAZ,CAAsB,YAAtB,CAAP;AACD;;AACDzD,cAAU,GAAG;AACX,WAAK0D,cAAL;;AACA,UAAI,KAAK78D,OAAL,CAAa8hB,UAAjB,EAA6B;AAC3B,aAAKg7C,oBAAL;AADF,aAEO;AACL,aAAK/D,QAAL,GAAgB,IAAhB;AACD;AACF;;AACD8D,kBAAc,GAAG;AACf,YAAM10D,SAAS,GAAG,KAAKuwD,UAAvB;AACA,YAAMn4C,QAAQ,GAAG,KAAKA,QAAtB;;AACA,YAAMw8C,IAAI,GAAG,CAAChgE,IAAD,EAAOkL,QAAP,KAAoB;AAC/BsY,gBAAQ,CAAC+V,gBAAT/V,CAA0B,IAA1BA,EAAgCxjB,IAAhCwjB,EAAsCtY,QAAtCsY;AACApY,iBAAS,CAACpL,IAAD,CAAToL,GAAkBF,QAAlBE;AAFF;;AAIA,YAAMF,QAAQ,GAAG,CAACrF,CAAD,EAAI1B,CAAJ,EAAOE,CAAP,KAAa;AAC5BwB,SAAC,CAACqxB,OAAFrxB,GAAY1B,CAAZ0B;AACAA,SAAC,CAACsxB,OAAFtxB,GAAYxB,CAAZwB;;AACA,aAAKy4D,aAAL,CAAmBz4D,CAAnB;AAHF;;AAKAtE,UAAI,CAAC,KAAK0B,OAAL,CAAa0gB,MAAd,EAAuB3jB,IAAD,IAAUggE,IAAI,CAAChgE,IAAD,EAAOkL,QAAP,CAApC,CAAJ3J;AACD;;AACDw+D,wBAAoB,GAAG;AACrB,UAAI,CAAC,KAAKnE,oBAAV,EAAgC;AAC9B,aAAKA,oBAAL,GAA4B,EAA5B;AACD;;AACD,YAAMxwD,SAAS,GAAG,KAAKwwD,oBAAvB;AACA,YAAMp4C,QAAQ,GAAG,KAAKA,QAAtB;;AACA,YAAMw8C,IAAI,GAAG,CAAChgE,IAAD,EAAOkL,QAAP,KAAoB;AAC/BsY,gBAAQ,CAAC+V,gBAAT/V,CAA0B,IAA1BA,EAAgCxjB,IAAhCwjB,EAAsCtY,QAAtCsY;AACApY,iBAAS,CAACpL,IAAD,CAAToL,GAAkBF,QAAlBE;AAFF;;AAIA,YAAM60D,OAAO,GAAG,CAACjgE,IAAD,EAAOkL,QAAP,KAAoB;AAClC,YAAIE,SAAS,CAACpL,IAAD,CAAb,EAAqB;AACnBwjB,kBAAQ,CAACgW,mBAAThW,CAA6B,IAA7BA,EAAmCxjB,IAAnCwjB,EAAyCtY,QAAzCsY;AACA,iBAAOpY,SAAS,CAACpL,IAAD,CAAhB;AACD;AAJH;;AAMA,YAAMkL,QAAQ,GAAG,CAAC4b,KAAD,EAAQoB,MAAR,KAAmB;AAClC,YAAI,KAAKJ,MAAT,EAAiB;AACf,eAAKib,MAAL,CAAYjc,KAAZ,EAAmBoB,MAAnB;AACD;AAHH;;AAKA,UAAIg4C,QAAJ;;AACA,YAAMlE,QAAQ,GAAG,MAAM;AACrBiE,eAAO,CAAC,QAAD,EAAWjE,QAAX,CAAPiE;;AACA,aAAKjE,QAAL,GAAgB,IAAhB;AACA,aAAKj5B,MAAL;;AACAi9B,YAAI,CAAC,QAAD,EAAW90D,QAAX,CAAJ80D;;AACAA,YAAI,CAAC,QAAD,EAAWE,QAAX,CAAJF;AALF;;AAOAE,cAAQ,GAAG,MAAM;AACf,aAAKlE,QAAL,GAAgB,KAAhB;;AACAiE,eAAO,CAAC,QAAD,EAAW/0D,QAAX,CAAP+0D;;AACA,aAAKP,KAAL;;AACA,aAAKrD,OAAL,CAAa,CAAb,EAAgB,CAAhB;;AACA2D,YAAI,CAAC,QAAD,EAAWhE,QAAX,CAAJgE;AALF;;AAOA,UAAIx8C,QAAQ,CAACwuC,UAATxuC,CAAoB,KAAKsE,MAAzBtE,CAAJ,EAAsC;AACpCw4C,gBAAQ;AADV,aAEO;AACLkE,gBAAQ;AACT;AACF;;AACDxB,gBAAY,GAAG;AACbn9D,UAAI,CAAC,KAAKo6D,UAAN,EAAkB,CAACzwD,QAAD,EAAWlL,IAAX,KAAoB;AACxC,aAAKwjB,QAAL,CAAcgW,mBAAd,CAAkC,IAAlC,EAAwCx5B,IAAxC,EAA8CkL,QAA9C;AADE,QAAJ3J;AAGA,WAAKo6D,UAAL,GAAkB,EAAlB;AACAp6D,UAAI,CAAC,KAAKq6D,oBAAN,EAA4B,CAAC1wD,QAAD,EAAWlL,IAAX,KAAoB;AAClD,aAAKwjB,QAAL,CAAcgW,mBAAd,CAAkC,IAAlC,EAAwCx5B,IAAxC,EAA8CkL,QAA9C;AADE,QAAJ3J;AAGA,WAAKq6D,oBAAL,GAA4B93D,SAA5B;AACD;;AACDq8D,oBAAgB,CAACl0D,KAAD,EAAQsY,IAAR,EAAc64B,OAAd,EAAuB;AACrC,YAAMjsB,MAAM,GAAGisB,OAAO,GAAG,KAAH,GAAW,QAAjC;AACA,UAAIpvC,IAAJ,EAAUtI,IAAV,EAAgBhE,CAAhB,EAAmBO,IAAnB;;AACA,UAAIsiB,IAAI,KAAK,SAAb,EAAwB;AACtBvW,YAAI,GAAG,KAAK67B,cAAL,CAAoB59B,KAAK,CAAC,CAAD,CAALA,CAAS7J,YAA7B,CAAP4L;AACAA,YAAI,CAACq4B,UAALr4B,CAAgB,MAAMmjB,MAAN,GAAe,mBAA/BnjB;AACD;;AACD,WAAKtM,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgK,KAAK,CAACpK,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9CgE,YAAI,GAAGuG,KAAK,CAACvK,CAAD,CAAZgE;AACA,cAAM2gC,UAAU,GAAG3gC,IAAI,IAAI,KAAKmkC,cAAL,CAAoBnkC,IAAI,CAACtD,YAAzB,EAAuCikC,UAAlE;;AACA,YAAIA,UAAJ,EAAgB;AACdA,oBAAU,CAAClV,MAAM,GAAG,YAAV,CAAVkV,CAAkC3gC,IAAI,CAAC0wB,OAAvCiQ,EAAgD3gC,IAAI,CAACtD,YAArDikC,EAAmE3gC,IAAI,CAACrD,KAAxEgkC;AACD;AACF;AACF;;AACD+5B,qBAAiB,GAAG;AAClB,aAAO,KAAKngC,OAAL,IAAgB,EAAvB;AACD;;AACDogC,qBAAiB,CAACC,cAAD,EAAiB;AAChC,YAAMC,UAAU,GAAG,KAAKtgC,OAAL,IAAgB,EAAnC;AACA,YAAMiC,MAAM,GAAGo+B,cAAc,CAAC99D,GAAf89D,CAAmB,SAA2B;AAAA,YAA1B;AAACl+D,sBAAD;AAAeC;AAAf,SAA0B;AAC3D,cAAM2L,IAAI,GAAG,KAAK67B,cAAL,CAAoBznC,YAApB,CAAb;;AACA,YAAI,CAAC4L,IAAL,EAAW;AACT,gBAAM,IAAIujB,KAAJ,CAAU,+BAA+BnvB,YAAzC,CAAN;AACD;;AACD,eAAO;AACLA,sBADK;AAELg0B,iBAAO,EAAEpoB,IAAI,CAACwY,IAALxY,CAAU3L,KAAV2L,CAFJ;AAGL3L;AAHK,SAAP;AALa,QAAf;AAWA,YAAMiN,OAAO,GAAG,CAACxN,cAAc,CAACogC,MAAD,EAASq+B,UAAT,CAA/B;;AACA,UAAIjxD,OAAJ,EAAa;AACX,aAAK2wB,OAAL,GAAeiC,MAAf;AACA,aAAKw5B,UAAL,GAAkB,IAAlB;;AACA,aAAK6C,kBAAL,CAAwBr8B,MAAxB,EAAgCq+B,UAAhC;AACD;AACF;;AACDtd,iBAAa,CAACiT,IAAD,EAAO90D,IAAP,EAAawwB,MAAb,EAAqB;AAChC,aAAO,KAAKkqC,QAAL,CAAc7F,MAAd,CAAqB,IAArB,EAA2BC,IAA3B,EAAiC90D,IAAjC,EAAuCwwB,MAAvC,CAAP;AACD;;AACD2sC,sBAAkB,CAACr8B,MAAD,EAASq+B,UAAT,EAAqBC,MAArB,EAA6B;AAC7C,YAAMC,YAAY,GAAG,KAAKx9D,OAAL,CAAa+gB,KAAlC;;AACA,YAAMs6B,IAAI,GAAG,CAAC/4C,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACqsB,MAAFrsB,CAASpB,CAAC,IAAI,CAACqB,CAAC,CAACqxD,IAAFrxD,CAAOnB,CAAC,IAAIF,CAAC,CAAC/B,YAAF+B,KAAmBE,CAAC,CAACjC,YAArB+B,IAAqCA,CAAC,CAAC9B,KAAF8B,KAAYE,CAAC,CAAChC,KAA/DmD,CAAfD,CAAvB;;AACA,YAAMm7D,WAAW,GAAGpiB,IAAI,CAACiiB,UAAD,EAAar+B,MAAb,CAAxB;AACA,YAAMy+B,SAAS,GAAGH,MAAM,GAAGt+B,MAAH,GAAYoc,IAAI,CAACpc,MAAD,EAASq+B,UAAT,CAAxC;;AACA,UAAIG,WAAW,CAAC7+D,MAAhB,EAAwB;AACtB,aAAKs+D,gBAAL,CAAsBO,WAAtB,EAAmCD,YAAY,CAACl8C,IAAhD,EAAsD,KAAtD;AACD;;AACD,UAAIo8C,SAAS,CAAC9+D,MAAV8+D,IAAoBF,YAAY,CAACl8C,IAArC,EAA2C;AACzC,aAAK47C,gBAAL,CAAsBQ,SAAtB,EAAiCF,YAAY,CAACl8C,IAA9C,EAAoD,IAApD;AACD;AACF;;AACD+5C,iBAAa,CAACz4D,CAAD,EAAI26D,MAAJ,EAAY;AACvB,YAAMp/D,IAAI,GAAG;AACXq/B,aAAK,EAAE56B,CADI;AAEX26D,cAFW;AAGXlK,kBAAU,EAAE,IAHD;AAIX2E,mBAAW,EAAE,KAAK5N,aAAL,CAAmBxnD,CAAnB;AAJF,OAAb;;AAMA,YAAM+6D,WAAW,GAAIvK,MAAD,IAAY,CAACA,MAAM,CAACpzD,OAAPozD,CAAe1yC,MAAf0yC,IAAyB,KAAKpzD,OAAL,CAAa0gB,MAAvC,EAA+CkM,QAA/C,CAAwDhqB,CAAC,CAAC4tD,MAAF5tD,CAAS7F,IAAjE,CAAhC;;AACA,UAAI,KAAKijD,aAAL,CAAmB,aAAnB,EAAkC7hD,IAAlC,EAAwCw/D,WAAxC,MAAyD,KAA7D,EAAoE;AAClE;AACD;;AACD,YAAMtxD,OAAO,GAAG,KAAKuxD,YAAL,CAAkBh7D,CAAlB,EAAqB26D,MAArB,EAA6Bp/D,IAAI,CAAC65D,WAAlC,CAAhB;;AACA75D,UAAI,CAACk1D,UAALl1D,GAAkB,KAAlBA;AACA,WAAK6hD,aAAL,CAAmB,YAAnB,EAAiC7hD,IAAjC,EAAuCw/D,WAAvC;;AACA,UAAItxD,OAAO,IAAIlO,IAAI,CAACkO,OAApB,EAA6B;AAC3B,aAAKotD,MAAL;AACD;;AACD,aAAO,IAAP;AACD;;AACDmE,gBAAY,CAACh7D,CAAD,EAAI26D,MAAJ,EAAYvF,WAAZ,EAAyB;AACnC,YAAM;AAACh7B,eAAO,EAAEsgC,UAAU,GAAG,EAAvB;AAA2Bt9D;AAA3B,UAAsC,IAA5C;AACA,YAAMw3C,gBAAgB,GAAG+lB,MAAzB;;AACA,YAAMt+B,MAAM,GAAG,KAAK4+B,kBAAL,CAAwBj7D,CAAxB,EAA2B06D,UAA3B,EAAuCtF,WAAvC,EAAoDxgB,gBAApD,CAAf;;AACA,YAAMygB,OAAO,GAAGt1D,aAAa,CAACC,CAAD,CAA7B;;AACA,YAAMm1D,SAAS,GAAGD,kBAAkB,CAACl1D,CAAD,EAAI,KAAK61D,UAAT,EAAqBT,WAArB,EAAkCC,OAAlC,CAApC;;AACA,UAAID,WAAJ,EAAiB;AACf,aAAKS,UAAL,GAAkB,IAAlB;AACAx6D,gBAAQ,CAAC+B,OAAO,CAAC0hB,OAAT,EAAkB,CAAC9e,CAAD,EAAIq8B,MAAJ,EAAY,IAAZ,CAAlB,EAAqC,IAArC,CAARhhC;;AACA,YAAIg6D,OAAJ,EAAa;AACXh6D,kBAAQ,CAAC+B,OAAO,CAAC2hB,OAAT,EAAkB,CAAC/e,CAAD,EAAIq8B,MAAJ,EAAY,IAAZ,CAAlB,EAAqC,IAArC,CAARhhC;AACD;AACF;;AACD,YAAMoO,OAAO,GAAG,CAACxN,cAAc,CAACogC,MAAD,EAASq+B,UAAT,CAA/B;;AACA,UAAIjxD,OAAO,IAAIkxD,MAAf,EAAuB;AACrB,aAAKvgC,OAAL,GAAeiC,MAAf;;AACA,aAAKq8B,kBAAL,CAAwBr8B,MAAxB,EAAgCq+B,UAAhC,EAA4CC,MAA5C;AACD;;AACD,WAAK9E,UAAL,GAAkBV,SAAlB;AACA,aAAO1rD,OAAP;AACD;;AACDwxD,sBAAkB,CAACj7D,CAAD,EAAI06D,UAAJ,EAAgBtF,WAAhB,EAA6BxgB,gBAA7B,EAA+C;AAC/D,UAAI50C,CAAC,CAAC7F,IAAF6F,KAAW,UAAf,EAA2B;AACzB,eAAO,EAAP;AACD;;AACD,UAAI,CAACo1D,WAAL,EAAkB;AAChB,eAAOsF,UAAP;AACD;;AACD,YAAME,YAAY,GAAG,KAAKx9D,OAAL,CAAa+gB,KAAlC;AACA,aAAO,KAAKu7C,yBAAL,CAA+B15D,CAA/B,EAAkC46D,YAAY,CAACl8C,IAA/C,EAAqDk8C,YAArD,EAAmEhmB,gBAAnE,CAAP;AACD;;AA7vBS;;AA+vBZ,QAAMsmB,iBAAiB,GAAG,MAAMx/D,IAAI,CAAC45D,KAAK,CAACR,SAAP,EAAmBp3C,KAAD,IAAWA,KAAK,CAACu4C,QAANv4C,CAAegzC,UAAfhzC,EAA7B,CAApC;;AACA,QAAMhY,UAAU,GAAG,IAAnB;AACAtL,QAAM,CAAC6lB,gBAAP7lB,CAAwBk7D,KAAxBl7D,EAA+B;AAC7BgmB,YAAQ,EAAE;AACR1a,gBADQ;AAER1L,WAAK,EAAEomB;AAFC,KADmB;AAK7B00C,aAAS,EAAE;AACTpvD,gBADS;AAET1L,WAAK,EAAE86D;AAFE,KALkB;AAS7Bj4C,aAAS,EAAE;AACTnX,gBADS;AAET1L,WAAK,EAAE6iB;AAFE,KATkB;AAa7B6oC,YAAQ,EAAE;AACRhgD,gBADQ;AAER1L,WAAK,EAAE0rD;AAFC,KAbmB;AAiB7BwO,WAAO,EAAE;AACPxuD,gBADO;AAEP1L,WAAK,EAAEk6D;AAFA,KAjBoB;AAqB7Ba,YAAQ,EAAE;AACRrvD,gBADQ;AAER1L,WAAK,EAAE+6D;AAFC,KArBmB;AAyB7BtR,YAAQ,EAAE;AACR/9C,gBADQ;AAER1L,WAAK,EAAE,YAAc;AACnB0rD,gBAAQ,CAACn/C,GAATm/C,CAAa,YAAbA;AACAwV,yBAAiB;AAClB;AALO,KAzBmB;AAgC7BrX,cAAU,EAAE;AACVn+C,gBADU;AAEV1L,WAAK,EAAE,YAAc;AACnB0rD,gBAAQ,CAACxqB,MAATwqB,CAAgB,YAAhBA;AACAwV,yBAAiB;AAClB;AALS;AAhCiB,GAA/B9gE;;AAyCA,WAAS+gE,OAAT,CAAiB98C,GAAjB,EAAsBkS,OAAtB,EAA+B+e,QAA/B,EAAyC;AACvC,UAAM;AAACD,gBAAD;AAAa+rB,iBAAb;AAA0B98D,OAA1B;AAA6BE,OAA7B;AAAgC2xC,iBAAhC;AAA6CD;AAA7C,QAA4D3f,OAAlE;AACA,QAAI8qC,WAAW,GAAGD,WAAW,GAAGjrB,WAAhC;AACA9xB,OAAG,CAAC4E,SAAJ5E;AACAA,OAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAc8xB,WAAd9xB,EAA2BgxB,UAAU,GAAGgsB,WAAxCh9C,EAAqDixB,QAAQ,GAAG+rB,WAAhEh9C;;AACA,QAAI6xB,WAAW,GAAGkrB,WAAlB,EAA+B;AAC7BC,iBAAW,GAAGD,WAAW,GAAGlrB,WAA5BmrB;AACAh9C,SAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAc6xB,WAAd7xB,EAA2BixB,QAAQ,GAAG+rB,WAAtCh9C,EAAmDgxB,UAAU,GAAGgsB,WAAhEh9C,EAA6E,IAA7EA;AAFF,WAGO;AACLA,SAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAc+8C,WAAd/8C,EAA2BixB,QAAQ,GAAG9uC,OAAtC6d,EAA+CgxB,UAAU,GAAG7uC,OAA5D6d;AACD;;AACDA,OAAG,CAAC+E,SAAJ/E;AACAA,OAAG,CAAC8F,IAAJ9F;AACD;;AACD,WAASi9C,eAAT,CAAyBthE,KAAzB,EAAgC;AAC9B,WAAOqtB,iBAAiB,CAACrtB,KAAD,EAAQ,CAAC,YAAD,EAAe,UAAf,EAA2B,YAA3B,EAAyC,UAAzC,CAAR,CAAxB;AACD;;AACD,WAASuhE,mBAAT,CAA6Bp4C,GAA7B,EAAkC+sB,WAAlC,EAA+CC,WAA/C,EAA4DqrB,UAA5D,EAAwE;AACtE,UAAMj9D,CAAC,GAAG+8D,eAAe,CAACn4C,GAAG,CAAC/lB,OAAJ+lB,CAAYs4C,YAAb,CAAzB;AACA,UAAMC,aAAa,GAAG,CAACvrB,WAAW,GAAGD,WAAf,IAA8B,CAApD;AACA,UAAMyrB,UAAU,GAAGz7D,IAAI,CAACoC,GAALpC,CAASw7D,aAATx7D,EAAwBs7D,UAAU,GAAGtrB,WAAbsrB,GAA2B,CAAnDt7D,CAAnB;;AACA,UAAM07D,iBAAiB,GAAIz/C,GAAD,IAAS;AACjC,YAAM0/C,aAAa,GAAG,CAAC1rB,WAAW,GAAGjwC,IAAI,CAACoC,GAALpC,CAASw7D,aAATx7D,EAAwBic,GAAxBjc,CAAf,IAA+Cs7D,UAA/C,GAA4D,CAAlF;AACA,aAAOn3D,WAAW,CAAC8X,GAAD,EAAM,CAAN,EAASjc,IAAI,CAACoC,GAALpC,CAASw7D,aAATx7D,EAAwB27D,aAAxB37D,CAAT,CAAlB;AAFF;;AAIA,WAAO;AACL47D,gBAAU,EAAEF,iBAAiB,CAACr9D,CAAC,CAACu9D,UAAH,CADxB;AAELC,cAAQ,EAAEH,iBAAiB,CAACr9D,CAAC,CAACw9D,QAAH,CAFtB;AAGLC,gBAAU,EAAE33D,WAAW,CAAC9F,CAAC,CAACy9D,UAAH,EAAe,CAAf,EAAkBL,UAAlB,CAHlB;AAILM,cAAQ,EAAE53D,WAAW,CAAC9F,CAAC,CAAC09D,QAAH,EAAa,CAAb,EAAgBN,UAAhB;AAJhB,KAAP;AAMD;;AACD,WAASO,UAAT,CAAoB1uD,CAApB,EAAuB2uD,KAAvB,EAA8B79D,CAA9B,EAAiCE,CAAjC,EAAoC;AAClC,WAAO;AACLF,OAAC,EAAEA,CAAC,GAAGkP,CAAC,GAAGtN,IAAI,CAAC6K,GAAL7K,CAASi8D,KAATj8D,CADN;AAEL1B,OAAC,EAAEA,CAAC,GAAGgP,CAAC,GAAGtN,IAAI,CAAC4J,GAAL5J,CAASi8D,KAATj8D;AAFN,KAAP;AAID;;AACD,WAASk8D,OAAT,CAAiB/9C,GAAjB,EAAsBkS,OAAtB,EAA+Bme,MAA/B,EAAuCgC,OAAvC,EAAgD5sC,GAAhD,EAAqDswC,QAArD,EAA+D;AAC7D,UAAM;AAAC91C,OAAD;AAAIE,OAAJ;AAAO6wC,gBAAU,EAAExrC,KAAnB;AAA0Bu3D,iBAA1B;AAAuClrB,iBAAW,EAAEmsB;AAApD,QAA8D9rC,OAApE;AACA,UAAM4f,WAAW,GAAGjwC,IAAI,CAACqC,GAALrC,CAASqwB,OAAO,CAAC4f,WAAR5f,GAAsBmgB,OAAtBngB,GAAgCme,MAAhCne,GAAyC6qC,WAAlDl7D,EAA+D,CAA/DA,CAApB;AACA,UAAMgwC,WAAW,GAAGmsB,MAAM,GAAG,CAATA,GAAaA,MAAM,GAAG3rB,OAAT2rB,GAAmB3tB,MAAnB2tB,GAA4BjB,WAAzCiB,GAAuD,CAA3E;AACA,QAAIC,aAAa,GAAG,CAApB;AACA,UAAM1uD,KAAK,GAAG9J,GAAG,GAAGD,KAApB;;AACA,QAAI6sC,OAAJ,EAAa;AACX,YAAM6rB,oBAAoB,GAAGF,MAAM,GAAG,CAATA,GAAaA,MAAM,GAAG3rB,OAAtB2rB,GAAgC,CAA7D;AACA,YAAMG,oBAAoB,GAAGrsB,WAAW,GAAG,CAAdA,GAAkBA,WAAW,GAAGO,OAAhCP,GAA0C,CAAvE;AACA,YAAMssB,kBAAkB,GAAG,CAACF,oBAAoB,GAAGC,oBAAxB,IAAgD,CAA3E;AACA,YAAME,aAAa,GAAGD,kBAAkB,KAAK,CAAvBA,GAA4B7uD,KAAK,GAAG6uD,kBAAR7uD,IAA+B6uD,kBAAkB,GAAG/rB,OAApD9iC,CAA5B6uD,GAA2F7uD,KAAjH;AACA0uD,mBAAa,GAAG,CAAC1uD,KAAK,GAAG8uD,aAAT,IAA0B,CAA1CJ;AACD;;AACD,UAAMK,IAAI,GAAGz8D,IAAI,CAACqC,GAALrC,CAAS,KAATA,EAAgB0N,KAAK,GAAGuiC,WAARviC,GAAsB8gC,MAAM,GAAGzuC,EAA/CC,IAAqDiwC,WAAlE;AACA,UAAMysB,WAAW,GAAG,CAAChvD,KAAK,GAAG+uD,IAAT,IAAiB,CAArC;AACA,UAAMttB,UAAU,GAAGxrC,KAAK,GAAG+4D,WAAR/4D,GAAsBy4D,aAAzC;AACA,UAAMhtB,QAAQ,GAAGxrC,GAAG,GAAG84D,WAAN94D,GAAoBw4D,aAArC;AACA,UAAM;AAACR,gBAAD;AAAaC,cAAb;AAAuBC,gBAAvB;AAAmCC;AAAnC,QAA+CV,mBAAmB,CAAChrC,OAAD,EAAU2f,WAAV,EAAuBC,WAAvB,EAAoCb,QAAQ,GAAGD,UAA/C,CAAxE;AACA,UAAMwtB,wBAAwB,GAAG1sB,WAAW,GAAG2rB,UAA/C;AACA,UAAMgB,sBAAsB,GAAG3sB,WAAW,GAAG4rB,QAA7C;AACA,UAAMgB,uBAAuB,GAAG1tB,UAAU,GAAGysB,UAAU,GAAGe,wBAA1D;AACA,UAAMG,qBAAqB,GAAG1tB,QAAQ,GAAGysB,QAAQ,GAAGe,sBAApD;AACA,UAAMG,wBAAwB,GAAG/sB,WAAW,GAAG8rB,UAA/C;AACA,UAAMkB,sBAAsB,GAAGhtB,WAAW,GAAG+rB,QAA7C;AACA,UAAMkB,uBAAuB,GAAG9tB,UAAU,GAAG2sB,UAAU,GAAGiB,wBAA1D;AACA,UAAMG,qBAAqB,GAAG9tB,QAAQ,GAAG2sB,QAAQ,GAAGiB,sBAApD;AACA7+C,OAAG,CAAC4E,SAAJ5E;;AACA,QAAI+1B,QAAJ,EAAc;AACZ/1B,SAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAc8xB,WAAd9xB,EAA2B0+C,uBAA3B1+C,EAAoD2+C,qBAApD3+C;;AACA,UAAI09C,QAAQ,GAAG,CAAf,EAAkB;AAChB,cAAMsB,OAAO,GAAGnB,UAAU,CAACY,sBAAD,EAAyBE,qBAAzB,EAAgD1+D,CAAhD,EAAmDE,CAAnD,CAA1B;AACA6f,WAAG,CAAC8E,GAAJ9E,CAAQg/C,OAAO,CAAC/+D,CAAhB+f,EAAmBg/C,OAAO,CAAC7+D,CAA3B6f,EAA8B09C,QAA9B19C,EAAwC2+C,qBAAxC3+C,EAA+DixB,QAAQ,GAAG9uC,OAA1E6d;AACD;;AACD,YAAMi/C,EAAE,GAAGpB,UAAU,CAACgB,sBAAD,EAAyB5tB,QAAzB,EAAmChxC,CAAnC,EAAsCE,CAAtC,CAArB;AACA6f,SAAG,CAACiF,MAAJjF,CAAWi/C,EAAE,CAACh/D,CAAd+f,EAAiBi/C,EAAE,CAAC9+D,CAApB6f;;AACA,UAAI49C,QAAQ,GAAG,CAAf,EAAkB;AAChB,cAAMoB,OAAO,GAAGnB,UAAU,CAACgB,sBAAD,EAAyBE,qBAAzB,EAAgD9+D,CAAhD,EAAmDE,CAAnD,CAA1B;AACA6f,WAAG,CAAC8E,GAAJ9E,CAAQg/C,OAAO,CAAC/+D,CAAhB+f,EAAmBg/C,OAAO,CAAC7+D,CAA3B6f,EAA8B49C,QAA9B59C,EAAwCixB,QAAQ,GAAG9uC,OAAnD6d,EAA4D++C,qBAAqB,GAAGl9D,IAAI,CAACD,EAAzFoe;AACD;;AACDA,SAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAc6xB,WAAd7xB,EAA2BixB,QAAQ,GAAI2sB,QAAQ,GAAG/rB,WAAlD7xB,EAAgEgxB,UAAU,GAAI2sB,UAAU,GAAG9rB,WAA3F7xB,EAAyG,IAAzGA;;AACA,UAAI29C,UAAU,GAAG,CAAjB,EAAoB;AAClB,cAAMqB,OAAO,GAAGnB,UAAU,CAACe,wBAAD,EAA2BE,uBAA3B,EAAoD7+D,CAApD,EAAuDE,CAAvD,CAA1B;AACA6f,WAAG,CAAC8E,GAAJ9E,CAAQg/C,OAAO,CAAC/+D,CAAhB+f,EAAmBg/C,OAAO,CAAC7+D,CAA3B6f,EAA8B29C,UAA9B39C,EAA0C8+C,uBAAuB,GAAGj9D,IAAI,CAACD,EAAzEoe,EAA6EgxB,UAAU,GAAG7uC,OAA1F6d;AACD;;AACD,YAAMk/C,EAAE,GAAGrB,UAAU,CAACW,wBAAD,EAA2BxtB,UAA3B,EAAuC/wC,CAAvC,EAA0CE,CAA1C,CAArB;AACA6f,SAAG,CAACiF,MAAJjF,CAAWk/C,EAAE,CAACj/D,CAAd+f,EAAiBk/C,EAAE,CAAC/+D,CAApB6f;;AACA,UAAIy9C,UAAU,GAAG,CAAjB,EAAoB;AAClB,cAAMuB,OAAO,GAAGnB,UAAU,CAACW,wBAAD,EAA2BE,uBAA3B,EAAoDz+D,CAApD,EAAuDE,CAAvD,CAA1B;AACA6f,WAAG,CAAC8E,GAAJ9E,CAAQg/C,OAAO,CAAC/+D,CAAhB+f,EAAmBg/C,OAAO,CAAC7+D,CAA3B6f,EAA8By9C,UAA9Bz9C,EAA0CgxB,UAAU,GAAG7uC,OAAvD6d,EAAgE0+C,uBAAhE1+C;AACD;AAtBH,WAuBO;AACLA,SAAG,CAACgF,MAAJhF,CAAW/f,CAAX+f,EAAc7f,CAAd6f;AACA,YAAMm/C,WAAW,GAAGt9D,IAAI,CAAC6K,GAAL7K,CAAS68D,uBAAT78D,IAAoCiwC,WAApCjwC,GAAkD5B,CAAtE;AACA,YAAMm/D,WAAW,GAAGv9D,IAAI,CAAC4J,GAAL5J,CAAS68D,uBAAT78D,IAAoCiwC,WAApCjwC,GAAkD1B,CAAtE;AACA6f,SAAG,CAACiF,MAAJjF,CAAWm/C,WAAXn/C,EAAwBo/C,WAAxBp/C;AACA,YAAMq/C,SAAS,GAAGx9D,IAAI,CAAC6K,GAAL7K,CAAS88D,qBAAT98D,IAAkCiwC,WAAlCjwC,GAAgD5B,CAAlE;AACA,YAAMq/D,SAAS,GAAGz9D,IAAI,CAAC4J,GAAL5J,CAAS88D,qBAAT98D,IAAkCiwC,WAAlCjwC,GAAgD1B,CAAlE;AACA6f,SAAG,CAACiF,MAAJjF,CAAWq/C,SAAXr/C,EAAsBs/C,SAAtBt/C;AACD;;AACDA,OAAG,CAAC+E,SAAJ/E;AACD;;AACD,WAASu/C,OAAT,CAAiBv/C,GAAjB,EAAsBkS,OAAtB,EAA+Bme,MAA/B,EAAuCgC,OAAvC,EAAgD0D,QAAhD,EAA0D;AACxD,UAAM;AAACypB,iBAAD;AAAcxuB,gBAAd;AAA0BJ;AAA1B,QAA2C1e,OAAjD;AACA,QAAI+e,QAAQ,GAAG/e,OAAO,CAAC+e,QAAvB;;AACA,QAAIuuB,WAAJ,EAAiB;AACfzB,aAAO,CAAC/9C,GAAD,EAAMkS,OAAN,EAAeme,MAAf,EAAuBgC,OAAvB,EAAgCrB,UAAU,GAAGlvC,GAA7C,EAAkDi0C,QAAlD,CAAPgoB;;AACA,WAAK,IAAIvgE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgiE,WAApB,EAAiC,EAAEhiE,CAAnC,EAAsC;AACpCwiB,WAAG,CAACoF,IAAJpF;AACD;;AACD,UAAI,CAACvc,KAAK,CAACmtC,aAAD,CAAV,EAA2B;AACzBK,gBAAQ,GAAGD,UAAU,GAAGJ,aAAa,GAAG9uC,GAAxCmvC;;AACA,YAAIL,aAAa,GAAG9uC,GAAhB8uC,KAAwB,CAA5B,EAA+B;AAC7BK,kBAAQ,IAAInvC,GAAZmvC;AACD;AACF;AACF;;AACD8sB,WAAO,CAAC/9C,GAAD,EAAMkS,OAAN,EAAeme,MAAf,EAAuBgC,OAAvB,EAAgCpB,QAAhC,EAA0C8E,QAA1C,CAAPgoB;AACA/9C,OAAG,CAACoF,IAAJpF;AACA,WAAOixB,QAAP;AACD;;AACD,WAASwuB,qBAAT,CAA+Bz/C,GAA/B,EAAoCkS,OAApC,EAA6CwtC,KAA7C,EAAoD;AAClD,UAAM;AAACz/D,OAAD;AAAIE,OAAJ;AAAO6wC,gBAAP;AAAmB+rB,iBAAnB;AAAgCyC;AAAhC,QAA+CttC,OAArD;AACA,UAAM4f,WAAW,GAAGjwC,IAAI,CAACqC,GAALrC,CAASqwB,OAAO,CAAC4f,WAAR5f,GAAsB6qC,WAA/Bl7D,EAA4C,CAA5CA,CAApB;AACA,UAAMgwC,WAAW,GAAG3f,OAAO,CAAC2f,WAAR3f,GAAsB6qC,WAA1C;AACA,QAAIv/D,CAAJ;;AACA,QAAIkiE,KAAJ,EAAW;AACT5C,aAAO,CAAC98C,GAAD,EAAMkS,OAAN,EAAe8e,UAAU,GAAGlvC,GAA5B,CAAPg7D;AACD;;AACD98C,OAAG,CAAC4E,SAAJ5E;AACAA,OAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAc6xB,WAAd7xB,EAA2BgxB,UAAU,GAAGlvC,GAAxCke,EAA6CgxB,UAA7ChxB,EAAyD,IAAzDA;;AACA,SAAKxiB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgiE,WAAhB,EAA6B,EAAEhiE,CAA/B,EAAkC;AAChCwiB,SAAG,CAACsF,MAAJtF;AACD;;AACDA,OAAG,CAAC4E,SAAJ5E;AACAA,OAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAc8xB,WAAd9xB,EAA2BgxB,UAA3BhxB,EAAuCgxB,UAAU,GAAGlvC,GAApDke;;AACA,SAAKxiB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgiE,WAAhB,EAA6B,EAAEhiE,CAA/B,EAAkC;AAChCwiB,SAAG,CAACsF,MAAJtF;AACD;AACF;;AACD,WAASw3B,UAAT,CAAoBx3B,GAApB,EAAyBkS,OAAzB,EAAkCme,MAAlC,EAA0CgC,OAA1C,EAAmDpB,QAAnD,EAA6D8E,QAA7D,EAAuE;AACrE,UAAM;AAACh3C;AAAD,QAAYmzB,OAAlB;AACA,UAAM;AAAC7M,iBAAD;AAAcqV;AAAd,QAAiC37B,OAAvC;AACA,UAAM2gE,KAAK,GAAG3gE,OAAO,CAAC00C,WAAR10C,KAAwB,OAAtC;;AACA,QAAI,CAACsmB,WAAL,EAAkB;AAChB;AACD;;AACD,QAAIq6C,KAAJ,EAAW;AACT1/C,SAAG,CAACkH,SAAJlH,GAAgBqF,WAAW,GAAG,CAA9BrF;AACAA,SAAG,CAAC2/C,QAAJ3/C,GAAe0a,eAAe,IAAI,OAAlC1a;AAFF,WAGO;AACLA,SAAG,CAACkH,SAAJlH,GAAgBqF,WAAhBrF;AACAA,SAAG,CAAC2/C,QAAJ3/C,GAAe0a,eAAe,IAAI,OAAlC1a;AACD;;AACD,QAAIkS,OAAO,CAACstC,WAAZ,EAAyB;AACvBC,2BAAqB,CAACz/C,GAAD,EAAMkS,OAAN,EAAewtC,KAAf,CAArBD;AACD;;AACD,QAAIC,KAAJ,EAAW;AACT5C,aAAO,CAAC98C,GAAD,EAAMkS,OAAN,EAAe+e,QAAf,CAAP6rB;AACD;;AACDiB,WAAO,CAAC/9C,GAAD,EAAMkS,OAAN,EAAeme,MAAf,EAAuBgC,OAAvB,EAAgCpB,QAAhC,EAA0C8E,QAA1C,CAAPgoB;AACA/9C,OAAG,CAACsF,MAAJtF;AACD;;AACD,QAAM4/C,UAAN,SAAyBvpB,OAAzB,CAAiC;AAC/Bp5B,eAAW,CAACogB,GAAD,EAAM;AACf;AACA,WAAKt+B,OAAL,GAAea,SAAf;AACA,WAAKgxC,aAAL,GAAqBhxC,SAArB;AACA,WAAKoxC,UAAL,GAAkBpxC,SAAlB;AACA,WAAKqxC,QAAL,GAAgBrxC,SAAhB;AACA,WAAKiyC,WAAL,GAAmBjyC,SAAnB;AACA,WAAKkyC,WAAL,GAAmBlyC,SAAnB;AACA,WAAKm9D,WAAL,GAAmB,CAAnB;AACA,WAAKyC,WAAL,GAAmB,CAAnB;;AACA,UAAIniC,GAAJ,EAAS;AACPthC,cAAM,CAACsP,MAAPtP,CAAc,IAAdA,EAAoBshC,GAApBthC;AACD;AACF;;AACDstD,WAAO,CAACwW,MAAD,EAASC,MAAT,EAAiBvpB,gBAAjB,EAAmC;AACxC,YAAM/wB,KAAK,GAAG,KAAKgxB,QAAL,CAAc,CAAC,GAAD,EAAM,GAAN,CAAd,EAA0BD,gBAA1B,CAAd;AACA,YAAM;AAACxxC,aAAD;AAAQE;AAAR,UAAoBR,iBAAiB,CAAC+gB,KAAD,EAAQ;AAACvlB,SAAC,EAAE4/D,MAAJ;AAAY1/D,SAAC,EAAE2/D;AAAf,OAAR,CAA3C;AACA,YAAM;AAAC9uB,kBAAD;AAAaC,gBAAb;AAAuBY,mBAAvB;AAAoCC,mBAApC;AAAiDlB;AAAjD,UAAkE,KAAK4F,QAAL,CAAc,CACpF,YADoF,EAEpF,UAFoF,EAGpF,aAHoF,EAIpF,aAJoF,EAKpF,eALoF,CAAd,EAMrED,gBANqE,CAAxE;AAOA,YAAMwpB,OAAO,GAAG,KAAKhhE,OAAL,CAAaszC,OAAb,GAAuB,CAAvC;;AACA,YAAMY,cAAc,GAAGv2C,cAAc,CAACk0C,aAAD,EAAgBK,QAAQ,GAAGD,UAA3B,CAArC;;AACA,YAAMgvB,aAAa,GAAG/sB,cAAc,IAAInxC,GAAlBmxC,IAAyB1tC,aAAa,CAACR,KAAD,EAAQisC,UAAR,EAAoBC,QAApB,CAA5D;;AACA,YAAMgvB,YAAY,GAAG/5D,UAAU,CAACjB,QAAD,EAAW4sC,WAAW,GAAGkuB,OAAzB,EAAkCjuB,WAAW,GAAGiuB,OAAhD,CAA/B;;AACA,aAAQC,aAAa,IAAIC,YAAzB;AACD;;AACDvW,kBAAc,CAACnT,gBAAD,EAAmB;AAC/B,YAAM;AAACt2C,SAAD;AAAIE,SAAJ;AAAO6wC,kBAAP;AAAmBC,gBAAnB;AAA6BY,mBAA7B;AAA0CC;AAA1C,UAAyD,KAAK0E,QAAL,CAAc,CAC3E,GAD2E,EAE3E,GAF2E,EAG3E,YAH2E,EAI3E,UAJ2E,EAK3E,aAL2E,EAM3E,aAN2E,EAO3E,eAP2E,CAAd,EAQ5DD,gBAR4D,CAA/D;AASA,YAAM;AAAClG,cAAD;AAASgC;AAAT,UAAoB,KAAKtzC,OAA/B;AACA,YAAMmhE,SAAS,GAAG,CAAClvB,UAAU,GAAGC,QAAd,IAA0B,CAA5C;AACA,YAAMkvB,UAAU,GAAG,CAACtuB,WAAW,GAAGC,WAAdD,GAA4BQ,OAA5BR,GAAsCxB,MAAvC,IAAiD,CAApE;AACA,aAAO;AACLpwC,SAAC,EAAEA,CAAC,GAAG4B,IAAI,CAAC6K,GAAL7K,CAASq+D,SAATr+D,IAAsBs+D,UADxB;AAELhgE,SAAC,EAAEA,CAAC,GAAG0B,IAAI,CAAC4J,GAAL5J,CAASq+D,SAATr+D,IAAsBs+D;AAFxB,OAAP;AAID;;AACD7pB,mBAAe,CAACC,gBAAD,EAAmB;AAChC,aAAO,KAAKmT,cAAL,CAAoBnT,gBAApB,CAAP;AACD;;AACDza,QAAI,CAAC9b,GAAD,EAAM;AACR,YAAM;AAACjhB,eAAD;AAAU6xC;AAAV,UAA2B,IAAjC;AACA,YAAMP,MAAM,GAAG,CAACtxC,OAAO,CAACsxC,MAARtxC,IAAkB,CAAnB,IAAwB,CAAvC;AACA,YAAMszC,OAAO,GAAG,CAACtzC,OAAO,CAACszC,OAARtzC,IAAmB,CAApB,IAAyB,CAAzC;AACA,YAAMg3C,QAAQ,GAAGh3C,OAAO,CAACg3C,QAAzB;AACA,WAAKgnB,WAAL,GAAoBh+D,OAAO,CAAC00C,WAAR10C,KAAwB,OAAxBA,GAAmC,IAAnCA,GAA0C,CAA9D;AACA,WAAKygE,WAAL,GAAmB5uB,aAAa,GAAG9uC,GAAhB8uC,GAAsB/uC,IAAI,CAACkB,KAALlB,CAAW+uC,aAAa,GAAG9uC,GAA3BD,CAAtB+uC,GAAwD,CAA3E;;AACA,UAAIA,aAAa,KAAK,CAAlBA,IAAuB,KAAKiB,WAAL,GAAmB,CAA1CjB,IAA+C,KAAKkB,WAAL,GAAmB,CAAtE,EAAyE;AACvE;AACD;;AACD9xB,SAAG,CAACiD,IAAJjD;AACA,UAAIogD,YAAY,GAAG,CAAnB;;AACA,UAAI/vB,MAAJ,EAAY;AACV+vB,oBAAY,GAAG/vB,MAAM,GAAG,CAAxB+vB;AACA,cAAMF,SAAS,GAAG,CAAC,KAAKlvB,UAAL,GAAkB,KAAKC,QAAxB,IAAoC,CAAtD;AACAjxB,WAAG,CAAC0E,SAAJ1E,CAAcne,IAAI,CAAC6K,GAAL7K,CAASq+D,SAATr+D,IAAsBu+D,YAApCpgD,EAAkDne,IAAI,CAAC4J,GAAL5J,CAASq+D,SAATr+D,IAAsBu+D,YAAxEpgD;;AACA,YAAI,KAAK4wB,aAAL,IAAsBhvC,EAA1B,EAA8B;AAC5Bw+D,sBAAY,GAAG/vB,MAAf+vB;AACD;AACF;;AACDpgD,SAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAACigB,eAAxBgB;AACAA,SAAG,CAACiH,WAAJjH,GAAkBjhB,OAAO,CAACkgB,WAA1Be;AACA,YAAMixB,QAAQ,GAAGsuB,OAAO,CAACv/C,GAAD,EAAM,IAAN,EAAYogD,YAAZ,EAA0B/tB,OAA1B,EAAmC0D,QAAnC,CAAxB;AACAyB,gBAAU,CAACx3B,GAAD,EAAM,IAAN,EAAYogD,YAAZ,EAA0B/tB,OAA1B,EAAmCpB,QAAnC,EAA6C8E,QAA7C,CAAVyB;AACAx3B,SAAG,CAACqD,OAAJrD;AACD;;AA7E8B;;AA+EjC4/C,YAAU,CAACnkE,EAAXmkE,GAAgB,KAAhBA;AACAA,YAAU,CAAC79C,QAAX69C,GAAsB;AACpBnsB,eAAW,EAAE,QADO;AAEpBx0B,eAAW,EAAE,MAFO;AAGpByb,mBAAe,EAAE96B,SAHG;AAIpBw9D,gBAAY,EAAE,CAJM;AAKpB/3C,eAAW,EAAE,CALO;AAMpBgrB,UAAM,EAAE,CANY;AAOpBgC,WAAO,EAAE,CAPW;AAQpBttC,SAAK,EAAEnF,SARa;AASpBm2C,YAAQ,EAAE;AATU,GAAtB6pB;AAWAA,YAAU,CAACjpB,aAAXipB,GAA2B;AACzB5gD,mBAAe,EAAE;AADQ,GAA3B4gD;;AAIA,WAASS,QAAT,CAAkBrgD,GAAlB,EAAuBjhB,OAAvB,EAAiD;AAAA,QAAjB6gB,KAAiB,uEAAT7gB,OAAS;AAC/CihB,OAAG,CAACsgD,OAAJtgD,GAActjB,cAAc,CAACkjB,KAAK,CAAC2a,cAAP,EAAuBx7B,OAAO,CAACw7B,cAA/B,CAA5Bva;AACAA,OAAG,CAACokC,WAAJpkC,CAAgBtjB,cAAc,CAACkjB,KAAK,CAAC4a,UAAP,EAAmBz7B,OAAO,CAACy7B,UAA3B,CAA9Bxa;AACAA,OAAG,CAACqkC,cAAJrkC,GAAqBtjB,cAAc,CAACkjB,KAAK,CAAC6a,gBAAP,EAAyB17B,OAAO,CAAC07B,gBAAjC,CAAnCza;AACAA,OAAG,CAAC2/C,QAAJ3/C,GAAetjB,cAAc,CAACkjB,KAAK,CAAC8a,eAAP,EAAwB37B,OAAO,CAAC27B,eAAhC,CAA7B1a;AACAA,OAAG,CAACkH,SAAJlH,GAAgBtjB,cAAc,CAACkjB,KAAK,CAACyF,WAAP,EAAoBtmB,OAAO,CAACsmB,WAA5B,CAA9BrF;AACAA,OAAG,CAACiH,WAAJjH,GAAkBtjB,cAAc,CAACkjB,KAAK,CAACX,WAAP,EAAoBlgB,OAAO,CAACkgB,WAA5B,CAAhCe;AACD;;AACD,WAASiF,MAAT,CAAgBjF,GAAhB,EAAqBtgB,QAArB,EAA+BnB,MAA/B,EAAuC;AACrCyhB,OAAG,CAACiF,MAAJjF,CAAWzhB,MAAM,CAAC0B,CAAlB+f,EAAqBzhB,MAAM,CAAC4B,CAA5B6f;AACD;;AACD,WAASugD,aAAT,CAAuBxhE,OAAvB,EAAgC;AAC9B,QAAIA,OAAO,CAACyhE,OAAZ,EAAqB;AACnB,aAAOx6C,cAAP;AACD;;AACD,QAAIjnB,OAAO,CAACuyB,OAARvyB,IAAmBA,OAAO,CAACqyB,sBAARryB,KAAmC,UAA1D,EAAsE;AACpE,aAAOonB,cAAP;AACD;;AACD,WAAOlB,MAAP;AACD;;AACD,WAASw7C,QAAT,CAAkB12D,MAAlB,EAA0BiuB,OAA1B,EAAgD;AAAA,QAAbgzB,MAAa,uEAAJ,EAAI;AAC9C,UAAM9gD,KAAK,GAAGH,MAAM,CAACpM,MAArB;AACA,UAAM;AAAC6H,WAAK,EAAEk7D,WAAW,GAAG,CAAtB;AAAyBj7D,SAAG,EAAEk7D,SAAS,GAAGz2D,KAAK,GAAG;AAAlD,QAAuD8gD,MAA7D;AACA,UAAM;AAACxlD,WAAK,EAAEo7D,YAAR;AAAsBn7D,SAAG,EAAEo7D;AAA3B,QAAyC7oC,OAA/C;AACA,UAAMxyB,KAAK,GAAG3D,IAAI,CAACqC,GAALrC,CAAS6+D,WAAT7+D,EAAsB++D,YAAtB/+D,CAAd;AACA,UAAM4D,GAAG,GAAG5D,IAAI,CAACoC,GAALpC,CAAS8+D,SAAT9+D,EAAoBg/D,UAApBh/D,CAAZ;AACA,UAAMi/D,OAAO,GAAGJ,WAAW,GAAGE,YAAdF,IAA8BC,SAAS,GAAGC,YAA1CF,IAA0DA,WAAW,GAAGG,UAAdH,IAA4BC,SAAS,GAAGE,UAAlH;AACA,WAAO;AACL32D,WADK;AAEL1E,WAFK;AAGLyrB,UAAI,EAAE+G,OAAO,CAAC/G,IAHT;AAILlzB,UAAI,EAAE0H,GAAG,GAAGD,KAANC,IAAe,CAACq7D,OAAhBr7D,GAA0ByE,KAAK,GAAGzE,GAARyE,GAAc1E,KAAxCC,GAAgDA,GAAG,GAAGD;AAJvD,KAAP;AAMD;;AACD,WAASu7D,WAAT,CAAqB/gD,GAArB,EAA0B+G,IAA1B,EAAgCiR,OAAhC,EAAyCgzB,MAAzC,EAAiD;AAC/C,UAAM;AAACjhD,YAAD;AAAShL;AAAT,QAAoBgoB,IAA1B;AACA,UAAM;AAAC7c,WAAD;AAAQ1E,WAAR;AAAeyrB,UAAf;AAAqBlzB;AAArB,QAA6B0iE,QAAQ,CAAC12D,MAAD,EAASiuB,OAAT,EAAkBgzB,MAAlB,CAA3C;AACA,UAAMgW,UAAU,GAAGT,aAAa,CAACxhE,OAAD,CAAhC;AACA,QAAI;AAACwrC,UAAI,GAAG,IAAR;AAAchtC;AAAd,QAAyBytD,MAAM,IAAI,EAAvC;AACA,QAAIxtD,CAAJ,EAAOgoB,KAAP,EAAc6L,IAAd;;AACA,SAAK7zB,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIO,IAAjB,EAAuB,EAAEP,CAAzB,EAA4B;AAC1BgoB,WAAK,GAAGzb,MAAM,CAAC,CAACvE,KAAK,IAAIjI,OAAO,GAAGQ,IAAI,GAAGP,CAAV,GAAcA,CAAzB,CAAN,IAAqC0M,KAAtC,CAAdsb;;AACA,UAAIA,KAAK,CAACmJ,IAAV,EAAgB;AACd;AADF,aAEO,IAAI4b,IAAJ,EAAU;AACfvqB,WAAG,CAACgF,MAAJhF,CAAWwF,KAAK,CAACvlB,CAAjB+f,EAAoBwF,KAAK,CAACrlB,CAA1B6f;AACAuqB,YAAI,GAAG,KAAPA;AAFK,aAGA;AACLy2B,kBAAU,CAAChhD,GAAD,EAAMqR,IAAN,EAAY7L,KAAZ,EAAmBjoB,OAAnB,EAA4BwB,OAAO,CAACyhE,OAApC,CAAVQ;AACD;;AACD3vC,UAAI,GAAG7L,KAAP6L;AACD;;AACD,QAAIJ,IAAJ,EAAU;AACRzL,WAAK,GAAGzb,MAAM,CAAC,CAACvE,KAAK,IAAIjI,OAAO,GAAGQ,IAAH,GAAU,CAArB,CAAN,IAAiCmM,KAAlC,CAAdsb;AACAw7C,gBAAU,CAAChhD,GAAD,EAAMqR,IAAN,EAAY7L,KAAZ,EAAmBjoB,OAAnB,EAA4BwB,OAAO,CAACyhE,OAApC,CAAVQ;AACD;;AACD,WAAO,CAAC,CAAC/vC,IAAT;AACD;;AACD,WAASgwC,eAAT,CAAyBjhD,GAAzB,EAA8B+G,IAA9B,EAAoCiR,OAApC,EAA6CgzB,MAA7C,EAAqD;AACnD,UAAMjhD,MAAM,GAAGgd,IAAI,CAAChd,MAApB;AACA,UAAM;AAACG,WAAD;AAAQ1E,WAAR;AAAezH;AAAf,QAAuB0iE,QAAQ,CAAC12D,MAAD,EAASiuB,OAAT,EAAkBgzB,MAAlB,CAArC;AACA,UAAM;AAACzgB,UAAI,GAAG,IAAR;AAAchtC;AAAd,QAAyBytD,MAAM,IAAI,EAAzC;AACA,QAAIkW,IAAI,GAAG,CAAX;AACA,QAAIC,MAAM,GAAG,CAAb;AACA,QAAI3jE,CAAJ,EAAOgoB,KAAP,EAAc47C,KAAd,EAAqBzvB,IAArB,EAA2BF,IAA3B,EAAiC4vB,KAAjC;;AACA,UAAMC,UAAU,GAAInjE,KAAD,IAAW,CAACqH,KAAK,IAAIjI,OAAO,GAAGQ,IAAI,GAAGI,KAAV,GAAkBA,KAA7B,CAAN,IAA6C+L,KAA3E;;AACA,UAAMq3D,KAAK,GAAG,MAAM;AAClB,UAAI5vB,IAAI,KAAKF,IAAb,EAAmB;AACjBzxB,WAAG,CAACiF,MAAJjF,CAAWkhD,IAAXlhD,EAAiByxB,IAAjBzxB;AACAA,WAAG,CAACiF,MAAJjF,CAAWkhD,IAAXlhD,EAAiB2xB,IAAjB3xB;AACAA,WAAG,CAACiF,MAAJjF,CAAWkhD,IAAXlhD,EAAiBqhD,KAAjBrhD;AACD;AALH;;AAOA,QAAIuqB,IAAJ,EAAU;AACR/kB,WAAK,GAAGzb,MAAM,CAACu3D,UAAU,CAAC,CAAD,CAAX,CAAd97C;AACAxF,SAAG,CAACgF,MAAJhF,CAAWwF,KAAK,CAACvlB,CAAjB+f,EAAoBwF,KAAK,CAACrlB,CAA1B6f;AACD;;AACD,SAAKxiB,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIO,IAAjB,EAAuB,EAAEP,CAAzB,EAA4B;AAC1BgoB,WAAK,GAAGzb,MAAM,CAACu3D,UAAU,CAAC9jE,CAAD,CAAX,CAAdgoB;;AACA,UAAIA,KAAK,CAACmJ,IAAV,EAAgB;AACd;AACD;;AACD,YAAM1uB,CAAC,GAAGulB,KAAK,CAACvlB,CAAhB;AACA,YAAME,CAAC,GAAGqlB,KAAK,CAACrlB,CAAhB;AACA,YAAMqhE,MAAM,GAAGvhE,CAAC,GAAG,CAAnB;;AACA,UAAIuhE,MAAM,KAAKJ,KAAf,EAAsB;AACpB,YAAIjhE,CAAC,GAAGwxC,IAAR,EAAc;AACZA,cAAI,GAAGxxC,CAAPwxC;AADF,eAEO,IAAIxxC,CAAC,GAAGsxC,IAAR,EAAc;AACnBA,cAAI,GAAGtxC,CAAPsxC;AACD;;AACDyvB,YAAI,GAAG,CAACC,MAAM,GAAGD,IAATC,GAAgBlhE,CAAjB,IAAsB,EAAEkhE,MAA/BD;AANF,aAOO;AACLK,aAAK;AACLvhD,WAAG,CAACiF,MAAJjF,CAAW/f,CAAX+f,EAAc7f,CAAd6f;AACAohD,aAAK,GAAGI,MAARJ;AACAD,cAAM,GAAG,CAATA;AACAxvB,YAAI,GAAGF,IAAI,GAAGtxC,CAAdwxC;AACD;;AACD0vB,WAAK,GAAGlhE,CAARkhE;AACD;;AACDE,SAAK;AACN;;AACD,WAASE,iBAAT,CAA2B16C,IAA3B,EAAiC;AAC/B,UAAMJ,IAAI,GAAGI,IAAI,CAAChoB,OAAlB;AACA,UAAMy7B,UAAU,GAAG7T,IAAI,CAAC6T,UAAL7T,IAAmBA,IAAI,CAAC6T,UAAL7T,CAAgBhpB,MAAtD;AACA,UAAM+jE,WAAW,GAAG,CAAC36C,IAAI,CAACutB,UAAN,IAAoB,CAACvtB,IAAI,CAACsS,KAA1B,IAAmC,CAAC1S,IAAI,CAAC2K,OAAzC,IAAoD3K,IAAI,CAACyK,sBAALzK,KAAgC,UAApF,IAAkG,CAACA,IAAI,CAAC65C,OAAxG,IAAmH,CAAChmC,UAAxI;AACA,WAAOknC,WAAW,GAAGT,eAAH,GAAqBF,WAAvC;AACD;;AACD,WAASY,uBAAT,CAAiC5iE,OAAjC,EAA0C;AACxC,QAAIA,OAAO,CAACyhE,OAAZ,EAAqB;AACnB,aAAO/qC,qBAAP;AACD;;AACD,QAAI12B,OAAO,CAACuyB,OAARvyB,IAAmBA,OAAO,CAACqyB,sBAARryB,KAAmC,UAA1D,EAAsE;AACpE,aAAO22B,oBAAP;AACD;;AACD,WAAOF,YAAP;AACD;;AACD,WAASosC,mBAAT,CAA6B5hD,GAA7B,EAAkC+G,IAAlC,EAAwCvhB,KAAxC,EAA+C0E,KAA/C,EAAsD;AACpD,QAAI23D,IAAI,GAAG96C,IAAI,CAAC+6C,KAAhB;;AACA,QAAI,CAACD,IAAL,EAAW;AACTA,UAAI,GAAG96C,IAAI,CAAC+6C,KAAL/6C,GAAa,IAAIg7C,MAAJ,EAApBF;;AACA,UAAI96C,IAAI,CAAC86C,IAAL96C,CAAU86C,IAAV96C,EAAgBvhB,KAAhBuhB,EAAuB7c,KAAvB6c,CAAJ,EAAmC;AACjC86C,YAAI,CAAC98C,SAAL88C;AACD;AACF;;AACDxB,YAAQ,CAACrgD,GAAD,EAAM+G,IAAI,CAAChoB,OAAX,CAARshE;AACArgD,OAAG,CAACsF,MAAJtF,CAAW6hD,IAAX7hD;AACD;;AACD,WAASgiD,gBAAT,CAA0BhiD,GAA1B,EAA+B+G,IAA/B,EAAqCvhB,KAArC,EAA4C0E,KAA5C,EAAmD;AACjD,UAAM;AAAC2uB,cAAD;AAAW95B;AAAX,QAAsBgoB,IAA5B;;AACA,UAAMk7C,aAAa,GAAGR,iBAAiB,CAAC16C,IAAD,CAAvC;;AACA,SAAK,MAAMiR,OAAX,IAAsBa,QAAtB,EAAgC;AAC9BwnC,cAAQ,CAACrgD,GAAD,EAAMjhB,OAAN,EAAei5B,OAAO,CAACpY,KAAvB,CAARygD;AACArgD,SAAG,CAAC4E,SAAJ5E;;AACA,UAAIiiD,aAAa,CAACjiD,GAAD,EAAM+G,IAAN,EAAYiR,OAAZ,EAAqB;AAACxyB,aAAD;AAAQC,WAAG,EAAED,KAAK,GAAG0E,KAAR1E,GAAgB;AAA7B,OAArB,CAAjB,EAAwE;AACtEwa,WAAG,CAAC+E,SAAJ/E;AACD;;AACDA,SAAG,CAACsF,MAAJtF;AACD;AACF;;AACD,QAAMkiD,SAAS,GAAG,OAAOH,MAAP,KAAkB,UAApC;;AACA,WAASjmC,IAAT,CAAc9b,GAAd,EAAmB+G,IAAnB,EAAyBvhB,KAAzB,EAAgC0E,KAAhC,EAAuC;AACrC,QAAIg4D,SAAS,IAAI,CAACn7C,IAAI,CAAChoB,OAALgoB,CAAaiR,OAA/B,EAAwC;AACtC4pC,yBAAmB,CAAC5hD,GAAD,EAAM+G,IAAN,EAAYvhB,KAAZ,EAAmB0E,KAAnB,CAAnB03D;AADF,WAEO;AACLI,sBAAgB,CAAChiD,GAAD,EAAM+G,IAAN,EAAYvhB,KAAZ,EAAmB0E,KAAnB,CAAhB83D;AACD;AACF;;AACD,QAAMG,WAAN,SAA0B9rB,OAA1B,CAAkC;AAChCp5B,eAAW,CAACogB,GAAD,EAAM;AACf;AACA,WAAKkX,QAAL,GAAgB,IAAhB;AACA,WAAKx1C,OAAL,GAAea,SAAf;AACA,WAAK+5B,MAAL,GAAc/5B,SAAd;AACA,WAAKy5B,KAAL,GAAaz5B,SAAb;AACA,WAAK45B,SAAL,GAAiB55B,SAAjB;AACA,WAAKkiE,KAAL,GAAaliE,SAAb;AACA,WAAKwiE,OAAL,GAAexiE,SAAf;AACA,WAAKyiE,SAAL,GAAiBziE,SAAjB;AACA,WAAK00C,UAAL,GAAkB,KAAlB;AACA,WAAKguB,cAAL,GAAsB,KAAtB;AACA,WAAKxoC,aAAL,GAAqBl6B,SAArB;;AACA,UAAIy9B,GAAJ,EAAS;AACPthC,cAAM,CAACsP,MAAPtP,CAAc,IAAdA,EAAoBshC,GAApBthC;AACD;AACF;;AACD+4C,uBAAmB,CAACxM,SAAD,EAAYnoB,SAAZ,EAAuB;AACxC,YAAMphB,OAAO,GAAG,KAAKA,OAArB;;AACA,UAAI,CAACA,OAAO,CAACuyB,OAARvyB,IAAmBA,OAAO,CAACqyB,sBAARryB,KAAmC,UAAvD,KAAsE,CAACA,OAAO,CAACyhE,OAA/E,IAA0F,CAAC,KAAK8B,cAApG,EAAoH;AAClH,cAAMrxC,IAAI,GAAGlyB,OAAO,CAACoyB,QAARpyB,GAAmB,KAAKs6B,KAAxBt6B,GAAgC,KAAKy6B,SAAlD;;AACAxI,kCAA0B,CAAC,KAAKoxC,OAAN,EAAerjE,OAAf,EAAwBupC,SAAxB,EAAmCrX,IAAnC,EAAyC9Q,SAAzC,CAA1B6Q;;AACA,aAAKsxC,cAAL,GAAsB,IAAtB;AACD;AACF;;AACS,QAANv4D,MAAM,CAACA,MAAD,EAAS;AACjB,WAAKq4D,OAAL,GAAer4D,MAAf;AACA,aAAO,KAAKs4D,SAAZ;AACA,aAAO,KAAKP,KAAZ;AACA,WAAKQ,cAAL,GAAsB,KAAtB;AACD;;AACS,QAANv4D,MAAM,GAAG;AACX,aAAO,KAAKq4D,OAAZ;AACD;;AACW,QAARvpC,QAAQ,GAAG;AACb,aAAO,KAAKwpC,SAAL,KAAmB,KAAKA,SAAL,GAAiBlpC,gBAAgB,CAAC,IAAD,EAAO,KAAKp6B,OAAL,CAAai5B,OAApB,CAApD,CAAP;AACD;;AACDqhB,SAAK,GAAG;AACN,YAAMxgB,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAM9uB,MAAM,GAAG,KAAKA,MAApB;AACA,aAAO8uB,QAAQ,CAACl7B,MAATk7B,IAAmB9uB,MAAM,CAAC8uB,QAAQ,CAAC,CAAD,CAARA,CAAYrzB,KAAb,CAAhC;AACD;;AACDkB,QAAI,GAAG;AACL,YAAMmyB,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAM9uB,MAAM,GAAG,KAAKA,MAApB;AACA,YAAMG,KAAK,GAAG2uB,QAAQ,CAACl7B,MAAvB;AACA,aAAOuM,KAAK,IAAIH,MAAM,CAAC8uB,QAAQ,CAAC3uB,KAAK,GAAG,CAAT,CAAR2uB,CAAoBpzB,GAArB,CAAtB;AACD;;AACD6W,eAAW,CAACkJ,KAAD,EAAQxhB,QAAR,EAAkB;AAC3B,YAAMjF,OAAO,GAAG,KAAKA,OAArB;AACA,YAAMpD,KAAK,GAAG6pB,KAAK,CAACxhB,QAAD,CAAnB;AACA,YAAM+F,MAAM,GAAG,KAAKA,MAApB;;AACA,YAAM8uB,QAAQ,GAAGD,cAAc,CAAC,IAAD,EAAO;AAAC50B,gBAAD;AAAWwB,aAAK,EAAE7J,KAAlB;AAAyB8J,WAAG,EAAE9J;AAA9B,OAAP,CAA/B;;AACA,UAAI,CAACk9B,QAAQ,CAACl7B,MAAd,EAAsB;AACpB;AACD;;AACD,YAAMwF,MAAM,GAAG,EAAf;;AACA,YAAMo/D,YAAY,GAAGZ,uBAAuB,CAAC5iE,OAAD,CAA5C;;AACA,UAAIvB,CAAJ,EAAOO,IAAP;;AACA,WAAKP,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG86B,QAAQ,CAACl7B,MAA5B,EAAoCH,CAAC,GAAGO,IAAxC,EAA8C,EAAEP,CAAhD,EAAmD;AACjD,cAAM;AAACgI,eAAD;AAAQC;AAAR,YAAeozB,QAAQ,CAACr7B,CAAD,CAA7B;AACA,cAAMgT,EAAE,GAAGzG,MAAM,CAACvE,KAAD,CAAjB;AACA,cAAMiL,EAAE,GAAG1G,MAAM,CAACtE,GAAD,CAAjB;;AACA,YAAI+K,EAAE,KAAKC,EAAX,EAAe;AACbtN,gBAAM,CAACtC,IAAPsC,CAAYqN,EAAZrN;AACA;AACD;;AACD,cAAMoI,CAAC,GAAG1J,IAAI,CAAC8B,GAAL9B,CAAS,CAAClG,KAAK,GAAG6U,EAAE,CAACxM,QAAD,CAAX,KAA0ByM,EAAE,CAACzM,QAAD,CAAFyM,GAAeD,EAAE,CAACxM,QAAD,CAA3C,CAATnC,CAAV;;AACA,cAAM2gE,YAAY,GAAGD,YAAY,CAAC/xD,EAAD,EAAKC,EAAL,EAASlF,CAAT,EAAYxM,OAAO,CAACyhE,OAApB,CAAjC;;AACAgC,oBAAY,CAACx+D,QAAD,CAAZw+D,GAAyBh9C,KAAK,CAACxhB,QAAD,CAA9Bw+D;AACAr/D,cAAM,CAACtC,IAAPsC,CAAYq/D,YAAZr/D;AACD;;AACD,aAAOA,MAAM,CAACxF,MAAPwF,KAAkB,CAAlBA,GAAsBA,MAAM,CAAC,CAAD,CAA5BA,GAAkCA,MAAzC;AACD;;AACD49D,eAAW,CAAC/gD,GAAD,EAAMgY,OAAN,EAAegzB,MAAf,EAAuB;AAChC,YAAMiX,aAAa,GAAGR,iBAAiB,CAAC,IAAD,CAAvC;;AACA,aAAOQ,aAAa,CAACjiD,GAAD,EAAM,IAAN,EAAYgY,OAAZ,EAAqBgzB,MAArB,CAApB;AACD;;AACD6W,QAAI,CAAC7hD,GAAD,EAAMxa,KAAN,EAAa0E,KAAb,EAAoB;AACtB,YAAM2uB,QAAQ,GAAG,KAAKA,QAAtB;;AACA,YAAMopC,aAAa,GAAGR,iBAAiB,CAAC,IAAD,CAAvC;;AACA,UAAIxwC,IAAI,GAAG,KAAKoI,KAAhB;AACA7zB,WAAK,GAAGA,KAAK,IAAI,CAAjBA;AACA0E,WAAK,GAAGA,KAAK,IAAK,KAAKH,MAAL,CAAYpM,MAAZ,GAAqB6H,KAAvC0E;;AACA,WAAK,MAAM8tB,OAAX,IAAsBa,QAAtB,EAAgC;AAC9B5H,YAAI,IAAIgxC,aAAa,CAACjiD,GAAD,EAAM,IAAN,EAAYgY,OAAZ,EAAqB;AAACxyB,eAAD;AAAQC,aAAG,EAAED,KAAK,GAAG0E,KAAR1E,GAAgB;AAA7B,SAArB,CAArByrB;AACD;;AACD,aAAO,CAAC,CAACA,IAAT;AACD;;AACD6K,QAAI,CAAC9b,GAAD,EAAMsoB,SAAN,EAAiB9iC,KAAjB,EAAwB0E,KAAxB,EAA+B;AACjC,YAAMnL,OAAO,GAAG,KAAKA,OAAL,IAAgB,EAAhC;AACA,YAAMgL,MAAM,GAAG,KAAKA,MAAL,IAAe,EAA9B;;AACA,UAAIA,MAAM,CAACpM,MAAPoM,IAAiBhL,OAAO,CAACsmB,WAA7B,EAA0C;AACxCrF,WAAG,CAACiD,IAAJjD;AACA8b,YAAI,CAAC9b,GAAD,EAAM,IAAN,EAAYxa,KAAZ,EAAmB0E,KAAnB,CAAJ4xB;AACA9b,WAAG,CAACqD,OAAJrD;AACD;;AACD,UAAI,KAAKu0B,QAAT,EAAmB;AACjB,aAAK+tB,cAAL,GAAsB,KAAtB;AACA,aAAKR,KAAL,GAAaliE,SAAb;AACD;AACF;;AAtG+B;;AAwGlCuiE,aAAW,CAAC1mE,EAAZ0mE,GAAiB,MAAjBA;AACAA,aAAW,CAACpgD,QAAZogD,GAAuB;AACrB5nC,kBAAc,EAAE,MADK;AAErBC,cAAU,EAAE,EAFS;AAGrBC,oBAAgB,EAAE,CAHG;AAIrBC,mBAAe,EAAE,OAJI;AAKrBrV,eAAW,EAAE,CALQ;AAMrBuL,mBAAe,EAAE,IANI;AAOrBQ,0BAAsB,EAAE,SAPH;AAQrBhM,QAAI,EAAE,KARe;AASrB+L,YAAQ,EAAE,KATW;AAUrBqvC,WAAO,EAAE,KAVY;AAWrBlvC,WAAO,EAAE;AAXY,GAAvB6wC;AAaAA,aAAW,CAACxrB,aAAZwrB,GAA4B;AAC1BnjD,mBAAe,EAAE,iBADS;AAE1BC,eAAW,EAAE;AAFa,GAA5BkjD;AAIAA,aAAW,CAAC1jD,WAAZ0jD,GAA0B;AACxBngD,eAAW,EAAE,IADW;AAExBE,cAAU,EAAGZ,IAAD,IAAUA,IAAI,KAAK,YAATA,IAAyBA,IAAI,KAAK;AAFhC,GAA1B6gD;;AAKA,WAASM,SAAT,CAAmBrwC,EAAnB,EAAuBM,GAAvB,EAA4BpoB,IAA5B,EAAkCisC,gBAAlC,EAAoD;AAClD,UAAMx3C,OAAO,GAAGqzB,EAAE,CAACrzB,OAAnB;AACA,UAAM;AAAC,OAACuL,IAAD,GAAQ3O;AAAT,QAAkBy2B,EAAE,CAACokB,QAAHpkB,CAAY,CAAC9nB,IAAD,CAAZ8nB,EAAoBmkB,gBAApBnkB,CAAxB;AACA,WAAQvwB,IAAI,CAAC8B,GAAL9B,CAAS6wB,GAAG,GAAG/2B,KAAfkG,IAAwB9C,OAAO,CAACylB,MAARzlB,GAAiBA,OAAO,CAAC2jE,SAAzD;AACD;;AACD,QAAMC,YAAN,SAA2BtsB,OAA3B,CAAmC;AACjCp5B,eAAW,CAACogB,GAAD,EAAM;AACf;AACA,WAAKt+B,OAAL,GAAea,SAAf;AACA,WAAK2uB,MAAL,GAAc3uB,SAAd;AACA,WAAK+uB,IAAL,GAAY/uB,SAAZ;AACA,WAAKs5B,IAAL,GAAYt5B,SAAZ;;AACA,UAAIy9B,GAAJ,EAAS;AACPthC,cAAM,CAACsP,MAAPtP,CAAc,IAAdA,EAAoBshC,GAApBthC;AACD;AACF;;AACDstD,WAAO,CAACuZ,MAAD,EAASC,MAAT,EAAiBtsB,gBAAjB,EAAmC;AACxC,YAAMx3C,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM;AAACkB,SAAD;AAAIE;AAAJ,UAAS,KAAKq2C,QAAL,CAAc,CAAC,GAAD,EAAM,GAAN,CAAd,EAA0BD,gBAA1B,CAAf;AACA,aAAS10C,IAAI,CAACiB,GAALjB,CAAS+gE,MAAM,GAAG3iE,CAAlB4B,EAAqB,CAArBA,IAA0BA,IAAI,CAACiB,GAALjB,CAASghE,MAAM,GAAG1iE,CAAlB0B,EAAqB,CAArBA,CAA1BA,GAAqDA,IAAI,CAACiB,GAALjB,CAAS9C,OAAO,CAAC2jE,SAAR3jE,GAAoBA,OAAO,CAACylB,MAArC3iB,EAA6C,CAA7CA,CAA9D;AACD;;AACDihE,YAAQ,CAACF,MAAD,EAASrsB,gBAAT,EAA2B;AACjC,aAAOksB,SAAS,CAAC,IAAD,EAAOG,MAAP,EAAe,GAAf,EAAoBrsB,gBAApB,CAAhB;AACD;;AACDwsB,YAAQ,CAACF,MAAD,EAAStsB,gBAAT,EAA2B;AACjC,aAAOksB,SAAS,CAAC,IAAD,EAAOI,MAAP,EAAe,GAAf,EAAoBtsB,gBAApB,CAAhB;AACD;;AACDmT,kBAAc,CAACnT,gBAAD,EAAmB;AAC/B,YAAM;AAACt2C,SAAD;AAAIE;AAAJ,UAAS,KAAKq2C,QAAL,CAAc,CAAC,GAAD,EAAM,GAAN,CAAd,EAA0BD,gBAA1B,CAAf;AACA,aAAO;AAACt2C,SAAD;AAAIE;AAAJ,OAAP;AACD;;AACDoB,QAAI,CAACxC,OAAD,EAAU;AACZA,aAAO,GAAGA,OAAO,IAAI,KAAKA,OAAhBA,IAA2B,EAArCA;AACA,UAAIylB,MAAM,GAAGzlB,OAAO,CAACylB,MAARzlB,IAAkB,CAA/B;AACAylB,YAAM,GAAG3iB,IAAI,CAACqC,GAALrC,CAAS2iB,MAAT3iB,EAAiB2iB,MAAM,IAAIzlB,OAAO,CAACikE,WAAlBx+C,IAAiC,CAAlD3iB,CAAT2iB;AACA,YAAMa,WAAW,GAAGb,MAAM,IAAIzlB,OAAO,CAACsmB,WAAlBb,IAAiC,CAArD;AACA,aAAO,CAACA,MAAM,GAAGa,WAAV,IAAyB,CAAhC;AACD;;AACDyW,QAAI,CAAC9b,GAAD,EAAMyF,IAAN,EAAY;AACd,YAAM1mB,OAAO,GAAG,KAAKA,OAArB;;AACA,UAAI,KAAK4vB,IAAL,IAAa5vB,OAAO,CAACylB,MAARzlB,GAAiB,GAA9B,IAAqC,CAACwmB,cAAc,CAAC,IAAD,EAAOE,IAAP,EAAa,KAAKlkB,IAAL,CAAUxC,OAAV,IAAqB,CAAlC,CAAxD,EAA8F;AAC5F;AACD;;AACDihB,SAAG,CAACiH,WAAJjH,GAAkBjhB,OAAO,CAACkgB,WAA1Be;AACAA,SAAG,CAACkH,SAAJlH,GAAgBjhB,OAAO,CAACsmB,WAAxBrF;AACAA,SAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAACigB,eAAxBgB;AACAiE,eAAS,CAACjE,GAAD,EAAMjhB,OAAN,EAAe,KAAKkB,CAApB,EAAuB,KAAKE,CAA5B,CAAT8jB;AACD;;AACDykC,YAAQ,GAAG;AACT,YAAM3pD,OAAO,GAAG,KAAKA,OAAL,IAAgB,EAAhC;AACA,aAAOA,OAAO,CAACylB,MAARzlB,GAAiBA,OAAO,CAAC2jE,SAAhC;AACD;;AA9CgC;;AAgDnCC,cAAY,CAAClnE,EAAbknE,GAAkB,OAAlBA;AACAA,cAAY,CAAC5gD,QAAb4gD,GAAwB;AACtBt9C,eAAW,EAAE,CADS;AAEtBq9C,aAAS,EAAE,CAFW;AAGtBhvB,oBAAgB,EAAE,CAHI;AAItBsvB,eAAW,EAAE,CAJS;AAKtB1+C,cAAU,EAAE,QALU;AAMtBE,UAAM,EAAE,CANc;AAOtBD,YAAQ,EAAE;AAPY,GAAxBo+C;AASAA,cAAY,CAAChsB,aAAbgsB,GAA6B;AAC3B3jD,mBAAe,EAAE,iBADU;AAE3BC,eAAW,EAAE;AAFc,GAA7B0jD;;AAKA,WAASM,YAAT,CAAsBC,GAAtB,EAA2B3sB,gBAA3B,EAA6C;AAC3C,UAAM;AAACt2C,OAAD;AAAIE,OAAJ;AAAOqH,UAAP;AAAaob,WAAb;AAAoBoB;AAApB,QAA8Bk/C,GAAG,CAAC1sB,QAAJ0sB,CAAa,CAAC,GAAD,EAAM,GAAN,EAAW,MAAX,EAAmB,OAAnB,EAA4B,QAA5B,CAAbA,EAAoD3sB,gBAApD2sB,CAApC;AACA,QAAIz5D,IAAJ,EAAUC,KAAV,EAAiBic,GAAjB,EAAsBC,MAAtB,EAA8Bu9C,IAA9B;;AACA,QAAID,GAAG,CAAC11B,UAAR,EAAoB;AAClB21B,UAAI,GAAGn/C,MAAM,GAAG,CAAhBm/C;AACA15D,UAAI,GAAG5H,IAAI,CAACoC,GAALpC,CAAS5B,CAAT4B,EAAY2F,IAAZ3F,CAAP4H;AACAC,WAAK,GAAG7H,IAAI,CAACqC,GAALrC,CAAS5B,CAAT4B,EAAY2F,IAAZ3F,CAAR6H;AACAic,SAAG,GAAGxlB,CAAC,GAAGgjE,IAAVx9C;AACAC,YAAM,GAAGzlB,CAAC,GAAGgjE,IAAbv9C;AALF,WAMO;AACLu9C,UAAI,GAAGvgD,KAAK,GAAG,CAAfugD;AACA15D,UAAI,GAAGxJ,CAAC,GAAGkjE,IAAX15D;AACAC,WAAK,GAAGzJ,CAAC,GAAGkjE,IAAZz5D;AACAic,SAAG,GAAG9jB,IAAI,CAACoC,GAALpC,CAAS1B,CAAT0B,EAAY2F,IAAZ3F,CAAN8jB;AACAC,YAAM,GAAG/jB,IAAI,CAACqC,GAALrC,CAAS1B,CAAT0B,EAAY2F,IAAZ3F,CAAT+jB;AACD;;AACD,WAAO;AAACnc,UAAD;AAAOkc,SAAP;AAAYjc,WAAZ;AAAmBkc;AAAnB,KAAP;AACD;;AACD,WAASw9C,WAAT,CAAqBz0C,IAArB,EAA2BhzB,KAA3B,EAAkCsI,GAAlC,EAAuCC,GAAvC,EAA4C;AAC1C,WAAOyqB,IAAI,GAAG,CAAH,GAAO3oB,WAAW,CAACrK,KAAD,EAAQsI,GAAR,EAAaC,GAAb,CAA7B;AACD;;AACD,WAASm/D,gBAAT,CAA0BH,GAA1B,EAA+BI,IAA/B,EAAqCC,IAArC,EAA2C;AACzC,UAAM5nE,KAAK,GAAGunE,GAAG,CAACnkE,OAAJmkE,CAAY79C,WAA1B;AACA,UAAMsJ,IAAI,GAAGu0C,GAAG,CAACv1B,aAAjB;AACA,UAAMztC,CAAC,GAAGmpB,MAAM,CAAC1tB,KAAD,CAAhB;AACA,WAAO;AACL4P,OAAC,EAAE63D,WAAW,CAACz0C,IAAI,CAAChJ,GAAN,EAAWzlB,CAAC,CAACylB,GAAb,EAAkB,CAAlB,EAAqB49C,IAArB,CADT;AAELp0D,OAAC,EAAEi0D,WAAW,CAACz0C,IAAI,CAACjlB,KAAN,EAAaxJ,CAAC,CAACwJ,KAAf,EAAsB,CAAtB,EAAyB45D,IAAzB,CAFT;AAGLhiE,OAAC,EAAE8hE,WAAW,CAACz0C,IAAI,CAAC/I,MAAN,EAAc1lB,CAAC,CAAC0lB,MAAhB,EAAwB,CAAxB,EAA2B29C,IAA3B,CAHT;AAILx1D,OAAC,EAAEq1D,WAAW,CAACz0C,IAAI,CAACllB,IAAN,EAAYvJ,CAAC,CAACuJ,IAAd,EAAoB,CAApB,EAAuB65D,IAAvB;AAJT,KAAP;AAMD;;AACD,WAASE,iBAAT,CAA2BN,GAA3B,EAAgCI,IAAhC,EAAsCC,IAAtC,EAA4C;AAC1C,UAAM;AAAC31B;AAAD,QAAuBs1B,GAAG,CAAC1sB,QAAJ0sB,CAAa,CAAC,oBAAD,CAAbA,CAA7B;AACA,UAAMvnE,KAAK,GAAGunE,GAAG,CAACnkE,OAAJmkE,CAAY9F,YAA1B;AACA,UAAMl9D,CAAC,GAAGopB,aAAa,CAAC3tB,KAAD,CAAvB;AACA,UAAM8nE,IAAI,GAAG5hE,IAAI,CAACoC,GAALpC,CAASyhE,IAATzhE,EAAe0hE,IAAf1hE,CAAb;AACA,UAAM8sB,IAAI,GAAGu0C,GAAG,CAACv1B,aAAjB;AACA,UAAM+1B,YAAY,GAAG91B,kBAAkB,IAAIxxC,QAAQ,CAACT,KAAD,CAAnD;AACA,WAAO;AACL0sB,aAAO,EAAE+6C,WAAW,CAAC,CAACM,YAAD,IAAiB/0C,IAAI,CAAChJ,GAAtB,IAA6BgJ,IAAI,CAACllB,IAAnC,EAAyCvJ,CAAC,CAACmoB,OAA3C,EAAoD,CAApD,EAAuDo7C,IAAvD,CADf;AAELj7C,cAAQ,EAAE46C,WAAW,CAAC,CAACM,YAAD,IAAiB/0C,IAAI,CAAChJ,GAAtB,IAA6BgJ,IAAI,CAACjlB,KAAnC,EAA0CxJ,CAAC,CAACsoB,QAA5C,EAAsD,CAAtD,EAAyDi7C,IAAzD,CAFhB;AAGLn7C,gBAAU,EAAE86C,WAAW,CAAC,CAACM,YAAD,IAAiB/0C,IAAI,CAAC/I,MAAtB,IAAgC+I,IAAI,CAACllB,IAAtC,EAA4CvJ,CAAC,CAACooB,UAA9C,EAA0D,CAA1D,EAA6Dm7C,IAA7D,CAHlB;AAILl7C,iBAAW,EAAE66C,WAAW,CAAC,CAACM,YAAD,IAAiB/0C,IAAI,CAAC/I,MAAtB,IAAgC+I,IAAI,CAACjlB,KAAtC,EAA6CxJ,CAAC,CAACqoB,WAA/C,EAA4D,CAA5D,EAA+Dk7C,IAA/D;AAJnB,KAAP;AAMD;;AACD,WAASE,aAAT,CAAuBT,GAAvB,EAA4B;AAC1B,UAAMjrC,MAAM,GAAGgrC,YAAY,CAACC,GAAD,CAA3B;AACA,UAAMtgD,KAAK,GAAGqV,MAAM,CAACvuB,KAAPuuB,GAAeA,MAAM,CAACxuB,IAApC;AACA,UAAMua,MAAM,GAAGiU,MAAM,CAACrS,MAAPqS,GAAgBA,MAAM,CAACtS,GAAtC;AACA,UAAMivB,MAAM,GAAGyuB,gBAAgB,CAACH,GAAD,EAAMtgD,KAAK,GAAG,CAAd,EAAiBoB,MAAM,GAAG,CAA1B,CAA/B;AACA,UAAMQ,MAAM,GAAGg/C,iBAAiB,CAACN,GAAD,EAAMtgD,KAAK,GAAG,CAAd,EAAiBoB,MAAM,GAAG,CAA1B,CAAhC;AACA,WAAO;AACL4/C,WAAK,EAAE;AACL3jE,SAAC,EAAEg4B,MAAM,CAACxuB,IADL;AAELtJ,SAAC,EAAE83B,MAAM,CAACtS,GAFL;AAGL9V,SAAC,EAAE+S,KAHE;AAIL5U,SAAC,EAAEgW,MAJE;AAKLQ;AALK,OADF;AAQLk7C,WAAK,EAAE;AACLz/D,SAAC,EAAEg4B,MAAM,CAACxuB,IAAPwuB,GAAc2c,MAAM,CAAC7mC,CADnB;AAEL5N,SAAC,EAAE83B,MAAM,CAACtS,GAAPsS,GAAa2c,MAAM,CAACrpC,CAFlB;AAGLsE,SAAC,EAAE+S,KAAK,GAAGgyB,MAAM,CAAC7mC,CAAf6U,GAAmBgyB,MAAM,CAACzlC,CAHxB;AAILnB,SAAC,EAAEgW,MAAM,GAAG4wB,MAAM,CAACrpC,CAAhByY,GAAoB4wB,MAAM,CAACtzC,CAJzB;AAKLkjB,cAAM,EAAE;AACN6D,iBAAO,EAAExmB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY2iB,MAAM,CAAC6D,OAAP7D,GAAiB3iB,IAAI,CAACqC,GAALrC,CAAS+yC,MAAM,CAACrpC,CAAhB1J,EAAmB+yC,MAAM,CAAC7mC,CAA1BlM,CAA7BA,CADH;AAEN2mB,kBAAQ,EAAE3mB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY2iB,MAAM,CAACgE,QAAPhE,GAAkB3iB,IAAI,CAACqC,GAALrC,CAAS+yC,MAAM,CAACrpC,CAAhB1J,EAAmB+yC,MAAM,CAACzlC,CAA1BtN,CAA9BA,CAFJ;AAGNymB,oBAAU,EAAEzmB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY2iB,MAAM,CAAC8D,UAAP9D,GAAoB3iB,IAAI,CAACqC,GAALrC,CAAS+yC,MAAM,CAACtzC,CAAhBO,EAAmB+yC,MAAM,CAAC7mC,CAA1BlM,CAAhCA,CAHN;AAIN0mB,qBAAW,EAAE1mB,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAY2iB,MAAM,CAAC+D,WAAP/D,GAAqB3iB,IAAI,CAACqC,GAALrC,CAAS+yC,MAAM,CAACtzC,CAAhBO,EAAmB+yC,MAAM,CAACzlC,CAA1BtN,CAAjCA;AAJP;AALH;AARF,KAAP;AAqBD;;AACD,WAASwnD,OAAT,CAAiB6Z,GAAjB,EAAsBjjE,CAAtB,EAAyBE,CAAzB,EAA4Bo2C,gBAA5B,EAA8C;AAC5C,UAAMstB,KAAK,GAAG5jE,CAAC,KAAK,IAApB;AACA,UAAM6jE,KAAK,GAAG3jE,CAAC,KAAK,IAApB;AACA,UAAM4jE,QAAQ,GAAGF,KAAK,IAAIC,KAA1B;AACA,UAAM7rC,MAAM,GAAGirC,GAAG,IAAI,CAACa,QAARb,IAAoBD,YAAY,CAACC,GAAD,EAAM3sB,gBAAN,CAA/C;AACA,WAAOte,MAAM,KACT4rC,KAAK,IAAI39D,UAAU,CAACjG,CAAD,EAAIg4B,MAAM,CAACxuB,IAAX,EAAiBwuB,MAAM,CAACvuB,KAAxB,CADV,CAANuuB,KAEH6rC,KAAK,IAAI59D,UAAU,CAAC/F,CAAD,EAAI83B,MAAM,CAACtS,GAAX,EAAgBsS,MAAM,CAACrS,MAAvB,CAFhBqS,CAAP;AAGD;;AACD,WAAS+rC,SAAT,CAAmBx/C,MAAnB,EAA2B;AACzB,WAAOA,MAAM,CAAC6D,OAAP7D,IAAkBA,MAAM,CAACgE,QAAzBhE,IAAqCA,MAAM,CAAC8D,UAA5C9D,IAA0DA,MAAM,CAAC+D,WAAxE;AACD;;AACD,WAAS07C,iBAAT,CAA2BjkD,GAA3B,EAAgCmF,IAAhC,EAAsC;AACpCnF,OAAG,CAACmF,IAAJnF,CAASmF,IAAI,CAACllB,CAAd+f,EAAiBmF,IAAI,CAAChlB,CAAtB6f,EAAyBmF,IAAI,CAACtV,CAA9BmQ,EAAiCmF,IAAI,CAACnX,CAAtCgS;AACD;;AACD,WAASkkD,WAAT,CAAqB/+C,IAArB,EAA2B4iC,MAA3B,EAAiD;AAAA,QAAdoc,OAAc,uEAAJ,EAAI;AAC/C,UAAMlkE,CAAC,GAAGklB,IAAI,CAACllB,CAALklB,KAAWg/C,OAAO,CAAClkE,CAAnBklB,GAAuB,CAAC4iC,MAAxB5iC,GAAiC,CAA3C;AACA,UAAMhlB,CAAC,GAAGglB,IAAI,CAAChlB,CAALglB,KAAWg/C,OAAO,CAAChkE,CAAnBglB,GAAuB,CAAC4iC,MAAxB5iC,GAAiC,CAA3C;AACA,UAAMtV,CAAC,GAAG,CAACsV,IAAI,CAACllB,CAALklB,GAASA,IAAI,CAACtV,CAAdsV,KAAoBg/C,OAAO,CAAClkE,CAARkkE,GAAYA,OAAO,CAACt0D,CAAxCsV,GAA4C4iC,MAA5C5iC,GAAqD,CAAtD,IAA2DllB,CAArE;AACA,UAAM+N,CAAC,GAAG,CAACmX,IAAI,CAAChlB,CAALglB,GAASA,IAAI,CAACnX,CAAdmX,KAAoBg/C,OAAO,CAAChkE,CAARgkE,GAAYA,OAAO,CAACn2D,CAAxCmX,GAA4C4iC,MAA5C5iC,GAAqD,CAAtD,IAA2DhlB,CAArE;AACA,WAAO;AACLF,OAAC,EAAEklB,IAAI,CAACllB,CAALklB,GAASllB,CADP;AAELE,OAAC,EAAEglB,IAAI,CAAChlB,CAALglB,GAAShlB,CAFP;AAGL0P,OAAC,EAAEsV,IAAI,CAACtV,CAALsV,GAAStV,CAHP;AAIL7B,OAAC,EAAEmX,IAAI,CAACnX,CAALmX,GAASnX,CAJP;AAKLwW,YAAM,EAAEW,IAAI,CAACX;AALR,KAAP;AAOD;;AACD,QAAM4/C,UAAN,SAAyB/tB,OAAzB,CAAiC;AAC/Bp5B,eAAW,CAACogB,GAAD,EAAM;AACf;AACA,WAAKt+B,OAAL,GAAea,SAAf;AACA,WAAK4tC,UAAL,GAAkB5tC,SAAlB;AACA,WAAK4H,IAAL,GAAY5H,SAAZ;AACA,WAAKgjB,KAAL,GAAahjB,SAAb;AACA,WAAKokB,MAAL,GAAcpkB,SAAd;AACA,WAAKuuC,aAAL,GAAqBvuC,SAArB;;AACA,UAAIy9B,GAAJ,EAAS;AACPthC,cAAM,CAACsP,MAAPtP,CAAc,IAAdA,EAAoBshC,GAApBthC;AACD;AACF;;AACD+/B,QAAI,CAAC9b,GAAD,EAAM;AACR,YAAM;AAACmuB,qBAAD;AAAgBpvC,eAAO,EAAE;AAACkgB,qBAAD;AAAcD;AAAd;AAAzB,UAA2D,IAAjE;AACA,YAAM;AAAC0gD,aAAD;AAAQkE;AAAR,UAAiBD,aAAa,CAAC,IAAD,CAApC;AACA,YAAMU,WAAW,GAAGL,SAAS,CAACJ,KAAK,CAACp/C,MAAP,CAATw/C,GAA0B57C,kBAA1B47C,GAA+CC,iBAAnE;AACAjkD,SAAG,CAACiD,IAAJjD;;AACA,UAAI4jD,KAAK,CAAC/zD,CAAN+zD,KAAYlE,KAAK,CAAC7vD,CAAlB+zD,IAAuBA,KAAK,CAAC51D,CAAN41D,KAAYlE,KAAK,CAAC1xD,CAA7C,EAAgD;AAC9CgS,WAAG,CAAC4E,SAAJ5E;AACAqkD,mBAAW,CAACrkD,GAAD,EAAMkkD,WAAW,CAACN,KAAD,EAAQz1B,aAAR,EAAuBuxB,KAAvB,CAAjB,CAAX2E;AACArkD,WAAG,CAAC8F,IAAJ9F;AACAqkD,mBAAW,CAACrkD,GAAD,EAAMkkD,WAAW,CAACxE,KAAD,EAAQ,CAACvxB,aAAT,EAAwBy1B,KAAxB,CAAjB,CAAXS;AACArkD,WAAG,CAACwH,SAAJxH,GAAgBf,WAAhBe;AACAA,WAAG,CAACoF,IAAJpF,CAAS,SAATA;AACD;;AACDA,SAAG,CAAC4E,SAAJ5E;AACAqkD,iBAAW,CAACrkD,GAAD,EAAMkkD,WAAW,CAACxE,KAAD,EAAQvxB,aAAR,CAAjB,CAAXk2B;AACArkD,SAAG,CAACwH,SAAJxH,GAAgBhB,eAAhBgB;AACAA,SAAG,CAACoF,IAAJpF;AACAA,SAAG,CAACqD,OAAJrD;AACD;;AACDqpC,WAAO,CAACuZ,MAAD,EAASC,MAAT,EAAiBtsB,gBAAjB,EAAmC;AACxC,aAAO8S,OAAO,CAAC,IAAD,EAAOuZ,MAAP,EAAeC,MAAf,EAAuBtsB,gBAAvB,CAAd;AACD;;AACDusB,YAAQ,CAACF,MAAD,EAASrsB,gBAAT,EAA2B;AACjC,aAAO8S,OAAO,CAAC,IAAD,EAAOuZ,MAAP,EAAe,IAAf,EAAqBrsB,gBAArB,CAAd;AACD;;AACDwsB,YAAQ,CAACF,MAAD,EAAStsB,gBAAT,EAA2B;AACjC,aAAO8S,OAAO,CAAC,IAAD,EAAO,IAAP,EAAawZ,MAAb,EAAqBtsB,gBAArB,CAAd;AACD;;AACDmT,kBAAc,CAACnT,gBAAD,EAAmB;AAC/B,YAAM;AAACt2C,SAAD;AAAIE,SAAJ;AAAOqH,YAAP;AAAagmC;AAAb,UAA2B,KAAKgJ,QAAL,CAAc,CAAC,GAAD,EAAM,GAAN,EAAW,MAAX,EAAmB,YAAnB,CAAd,EAAgDD,gBAAhD,CAAjC;AACA,aAAO;AACLt2C,SAAC,EAAEutC,UAAU,GAAG,CAACvtC,CAAC,GAAGuH,IAAL,IAAa,CAAhB,GAAoBvH,CAD5B;AAELE,SAAC,EAAEqtC,UAAU,GAAGrtC,CAAH,GAAO,CAACA,CAAC,GAAGqH,IAAL,IAAa;AAF5B,OAAP;AAID;;AACDkhD,YAAQ,CAACp+C,IAAD,EAAO;AACb,aAAOA,IAAI,KAAK,GAATA,GAAe,KAAKsY,KAAL,GAAa,CAA5BtY,GAAgC,KAAK0Z,MAAL,GAAc,CAArD;AACD;;AAlD8B;;AAoDjCogD,YAAU,CAAC3oE,EAAX2oE,GAAgB,KAAhBA;AACAA,YAAU,CAACriD,QAAXqiD,GAAsB;AACpBz2B,iBAAa,EAAE,OADK;AAEpBtoB,eAAW,EAAE,CAFO;AAGpB+3C,gBAAY,EAAE,CAHM;AAIpBjvB,iBAAa,EAAE,MAJK;AAKpB7pB,cAAU,EAAE1kB;AALQ,GAAtBwkE;AAOAA,YAAU,CAACztB,aAAXytB,GAA2B;AACzBplD,mBAAe,EAAE,iBADQ;AAEzBC,eAAW,EAAE;AAFY,GAA3BmlD;AAKA,MAAI5kD,QAAQ,GAAG,aAAazjB,MAAM,CAACgtC,MAAPhtC,CAAc;AAC1C0rD,aAAS,EAAE,IAD+B;AAE1CmY,cAAU,EAAEA,UAF8B;AAG1CuC,eAAW,EAAEA,WAH6B;AAI1CQ,gBAAY,EAAEA,YAJ4B;AAK1CyB,cAAU,EAAEA;AAL8B,GAAdroE,CAA5B;;AAQA,WAASuoE,cAAT,CAAwBhiD,IAAxB,EAA8B9c,KAA9B,EAAqC0E,KAArC,EAA4CkhD,cAA5C,EAA4DrsD,OAA5D,EAAqE;AACnE,UAAMwlE,OAAO,GAAGxlE,OAAO,CAACwlE,OAARxlE,IAAmBqsD,cAAnC;;AACA,QAAImZ,OAAO,IAAIr6D,KAAf,EAAsB;AACpB,aAAOoY,IAAI,CAACnmB,KAALmmB,CAAW9c,KAAX8c,EAAkB9c,KAAK,GAAG0E,KAA1BoY,CAAP;AACD;;AACD,UAAMkiD,SAAS,GAAG,EAAlB;AACA,UAAMC,WAAW,GAAG,CAACv6D,KAAK,GAAG,CAAT,KAAeq6D,OAAO,GAAG,CAAzB,CAApB;AACA,QAAIG,YAAY,GAAG,CAAnB;AACA,UAAMC,QAAQ,GAAGn/D,KAAK,GAAG0E,KAAR1E,GAAgB,CAAjC;AACA,QAAInE,CAAC,GAAGmE,KAAR;AACA,QAAIhI,CAAJ,EAAOonE,YAAP,EAAqBC,OAArB,EAA8Bp/C,IAA9B,EAAoCq/C,KAApC;AACAN,aAAS,CAACE,YAAY,EAAb,CAATF,GAA4BliD,IAAI,CAACjhB,CAAD,CAAhCmjE;;AACA,SAAKhnE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG+mE,OAAO,GAAG,CAA1B,EAA6B/mE,CAAC,EAA9B,EAAkC;AAChC,UAAI0jE,IAAI,GAAG,CAAX;AACA,UAAI6D,IAAI,GAAG,CAAX;AACA,UAAItpD,CAAJ;AACA,YAAMupD,aAAa,GAAGnjE,IAAI,CAACkB,KAALlB,CAAW,CAACrE,CAAC,GAAG,CAAL,IAAUinE,WAArB5iE,IAAoC,CAApCA,GAAwC2D,KAA9D;AACA,YAAMy/D,WAAW,GAAGpjE,IAAI,CAACoC,GAALpC,CAASA,IAAI,CAACkB,KAALlB,CAAW,CAACrE,CAAC,GAAG,CAAL,IAAUinE,WAArB5iE,IAAoC,CAA7CA,EAAgDqI,KAAhDrI,IAAyD2D,KAA7E;AACA,YAAM0/D,cAAc,GAAGD,WAAW,GAAGD,aAArC;;AACA,WAAKvpD,CAAC,GAAGupD,aAAT,EAAwBvpD,CAAC,GAAGwpD,WAA5B,EAAyCxpD,CAAC,EAA1C,EAA8C;AAC5CylD,YAAI,IAAI5+C,IAAI,CAAC7G,CAAD,CAAJ6G,CAAQriB,CAAhBihE;AACA6D,YAAI,IAAIziD,IAAI,CAAC7G,CAAD,CAAJ6G,CAAQniB,CAAhB4kE;AACD;;AACD7D,UAAI,IAAIgE,cAARhE;AACA6D,UAAI,IAAIG,cAARH;AACA,YAAMI,SAAS,GAAGtjE,IAAI,CAACkB,KAALlB,CAAWrE,CAAC,GAAGinE,WAAf5iE,IAA8B,CAA9BA,GAAkC2D,KAApD;AACA,YAAM4/D,OAAO,GAAGvjE,IAAI,CAACoC,GAALpC,CAASA,IAAI,CAACkB,KAALlB,CAAW,CAACrE,CAAC,GAAG,CAAL,IAAUinE,WAArB5iE,IAAoC,CAA7CA,EAAgDqI,KAAhDrI,IAAyD2D,KAAzE;AACA,YAAM;AAACvF,SAAC,EAAEolE,OAAJ;AAAallE,SAAC,EAAEmlE;AAAhB,UAA2BhjD,IAAI,CAACjhB,CAAD,CAArC;AACAwjE,aAAO,GAAGp/C,IAAI,GAAG,CAAC,CAAlBo/C;;AACA,WAAKppD,CAAC,GAAG0pD,SAAT,EAAoB1pD,CAAC,GAAG2pD,OAAxB,EAAiC3pD,CAAC,EAAlC,EAAsC;AACpCgK,YAAI,GAAG,MAAM5jB,IAAI,CAAC8B,GAAL9B,CACX,CAACwjE,OAAO,GAAGnE,IAAX,KAAoB5+C,IAAI,CAAC7G,CAAD,CAAJ6G,CAAQniB,CAARmiB,GAAYgjD,OAAhC,IACA,CAACD,OAAO,GAAG/iD,IAAI,CAAC7G,CAAD,CAAJ6G,CAAQriB,CAAnB,KAAyB8kE,IAAI,GAAGO,OAAhC,CAFWzjE,CAAb4jB;;AAIA,YAAIA,IAAI,GAAGo/C,OAAX,EAAoB;AAClBA,iBAAO,GAAGp/C,IAAVo/C;AACAD,sBAAY,GAAGtiD,IAAI,CAAC7G,CAAD,CAAnBmpD;AACAE,eAAK,GAAGrpD,CAARqpD;AACD;AACF;;AACDN,eAAS,CAACE,YAAY,EAAb,CAATF,GAA4BI,YAA5BJ;AACAnjE,OAAC,GAAGyjE,KAAJzjE;AACD;;AACDmjE,aAAS,CAACE,YAAY,EAAb,CAATF,GAA4BliD,IAAI,CAACqiD,QAAD,CAAhCH;AACA,WAAOA,SAAP;AACD;;AACD,WAASe,gBAAT,CAA0BjjD,IAA1B,EAAgC9c,KAAhC,EAAuC0E,KAAvC,EAA8CkhD,cAA9C,EAA8D;AAC5D,QAAI8V,IAAI,GAAG,CAAX;AACA,QAAIC,MAAM,GAAG,CAAb;AACA,QAAI3jE,CAAJ,EAAOgoB,KAAP,EAAcvlB,CAAd,EAAiBE,CAAjB,EAAoBihE,KAApB,EAA2BoE,QAA3B,EAAqCC,QAArC,EAA+CC,UAA/C,EAA2D/zB,IAA3D,EAAiEF,IAAjE;AACA,UAAM+yB,SAAS,GAAG,EAAlB;AACA,UAAMG,QAAQ,GAAGn/D,KAAK,GAAG0E,KAAR1E,GAAgB,CAAjC;AACA,UAAMmgE,IAAI,GAAGrjD,IAAI,CAAC9c,KAAD,CAAJ8c,CAAYriB,CAAzB;AACA,UAAM2lE,IAAI,GAAGtjD,IAAI,CAACqiD,QAAD,CAAJriD,CAAeriB,CAA5B;AACA,UAAM4lE,EAAE,GAAGD,IAAI,GAAGD,IAAlB;;AACA,SAAKnoE,CAAC,GAAGgI,KAAT,EAAgBhI,CAAC,GAAGgI,KAAK,GAAG0E,KAA5B,EAAmC,EAAE1M,CAArC,EAAwC;AACtCgoB,WAAK,GAAGlD,IAAI,CAAC9kB,CAAD,CAAZgoB;AACAvlB,OAAC,GAAG,CAACulB,KAAK,CAACvlB,CAANulB,GAAUmgD,IAAX,IAAmBE,EAAnB,GAAwBza,cAA5BnrD;AACAE,OAAC,GAAGqlB,KAAK,CAACrlB,CAAVA;AACA,YAAMqhE,MAAM,GAAGvhE,CAAC,GAAG,CAAnB;;AACA,UAAIuhE,MAAM,KAAKJ,KAAf,EAAsB;AACpB,YAAIjhE,CAAC,GAAGwxC,IAAR,EAAc;AACZA,cAAI,GAAGxxC,CAAPwxC;AACA6zB,kBAAQ,GAAGhoE,CAAXgoE;AAFF,eAGO,IAAIrlE,CAAC,GAAGsxC,IAAR,EAAc;AACnBA,cAAI,GAAGtxC,CAAPsxC;AACAg0B,kBAAQ,GAAGjoE,CAAXioE;AACD;;AACDvE,YAAI,GAAG,CAACC,MAAM,GAAGD,IAATC,GAAgB37C,KAAK,CAACvlB,CAAvB,IAA4B,EAAEkhE,MAArCD;AARF,aASO;AACL,cAAM4E,SAAS,GAAGtoE,CAAC,GAAG,CAAtB;;AACA,YAAI,CAAC9B,aAAa,CAAC8pE,QAAD,CAAd,IAA4B,CAAC9pE,aAAa,CAAC+pE,QAAD,CAA9C,EAA0D;AACxD,gBAAMM,kBAAkB,GAAGlkE,IAAI,CAACoC,GAALpC,CAAS2jE,QAAT3jE,EAAmB4jE,QAAnB5jE,CAA3B;AACA,gBAAMmkE,kBAAkB,GAAGnkE,IAAI,CAACqC,GAALrC,CAAS2jE,QAAT3jE,EAAmB4jE,QAAnB5jE,CAA3B;;AACA,cAAIkkE,kBAAkB,KAAKL,UAAvBK,IAAqCA,kBAAkB,KAAKD,SAAhE,EAA2E;AACzEtB,qBAAS,CAAC3jE,IAAV2jE,iCACKliD,IAAI,CAACyjD,kBAAD,CADTvB;AAEEvkE,eAAC,EAAEihE;AAFLsD;AAID;;AACD,cAAIwB,kBAAkB,KAAKN,UAAvBM,IAAqCA,kBAAkB,KAAKF,SAAhE,EAA2E;AACzEtB,qBAAS,CAAC3jE,IAAV2jE,iCACKliD,IAAI,CAAC0jD,kBAAD,CADTxB;AAEEvkE,eAAC,EAAEihE;AAFLsD;AAID;AACF;;AACD,YAAIhnE,CAAC,GAAG,CAAJA,IAASsoE,SAAS,KAAKJ,UAA3B,EAAuC;AACrClB,mBAAS,CAAC3jE,IAAV2jE,CAAeliD,IAAI,CAACwjD,SAAD,CAAnBtB;AACD;;AACDA,iBAAS,CAAC3jE,IAAV2jE,CAAeh/C,KAAfg/C;AACApD,aAAK,GAAGI,MAARJ;AACAD,cAAM,GAAG,CAATA;AACAxvB,YAAI,GAAGF,IAAI,GAAGtxC,CAAdwxC;AACA6zB,gBAAQ,GAAGC,QAAQ,GAAGC,UAAU,GAAGloE,CAAnCgoE;AACD;AACF;;AACD,WAAOhB,SAAP;AACD;;AACD,WAASyB,qBAAT,CAA+BnjC,OAA/B,EAAwC;AACtC,QAAIA,OAAO,CAACwR,UAAZ,EAAwB;AACtB,YAAMhyB,IAAI,GAAGwgB,OAAO,CAACkB,KAArB;AACA,aAAOlB,OAAO,CAACwR,UAAf;AACA,aAAOxR,OAAO,CAACkB,KAAf;AACAjoC,YAAM,CAACoL,cAAPpL,CAAsB+mC,OAAtB/mC,EAA+B,MAA/BA,EAAuC;AAACJ,aAAK,EAAE2mB;AAAR,OAAvCvmB;AACD;AACF;;AACD,WAASmqE,kBAAT,CAA4B7mD,KAA5B,EAAmC;AACjCA,SAAK,CAACiD,IAANjD,CAAWH,QAAXG,CAAoB/X,OAApB+X,CAA6ByjB,OAAD,IAAa;AACvCmjC,2BAAqB,CAACnjC,OAAD,CAArBmjC;AADF;AAGD;;AACD,WAASE,yCAAT,CAAmDr8D,IAAnD,EAAyDC,MAAzD,EAAiE;AAC/D,UAAME,UAAU,GAAGF,MAAM,CAACpM,MAA1B;AACA,QAAI6H,KAAK,GAAG,CAAZ;AACA,QAAI0E,KAAJ;AACA,UAAM;AAACE;AAAD,QAAWN,IAAjB;AACA,UAAM;AAAC7F,SAAD;AAAMC,SAAN;AAAWqG,gBAAX;AAAuBC;AAAvB,QAAqCJ,MAAM,CAACK,aAAPL,EAA3C;;AACA,QAAIG,UAAJ,EAAgB;AACd/E,WAAK,GAAGQ,WAAW,CAACS,YAAY,CAACsD,MAAD,EAASK,MAAM,CAACE,IAAhB,EAAsBrG,GAAtB,CAAZwC,CAAuCF,EAAxC,EAA4C,CAA5C,EAA+C0D,UAAU,GAAG,CAA5D,CAAnBzE;AACD;;AACD,QAAIgF,UAAJ,EAAgB;AACdN,WAAK,GAAGlE,WAAW,CAACS,YAAY,CAACsD,MAAD,EAASK,MAAM,CAACE,IAAhB,EAAsBpG,GAAtB,CAAZuC,CAAuCH,EAAvCG,GAA4C,CAA7C,EAAgDjB,KAAhD,EAAuDyE,UAAvD,CAAXjE,GAAgFR,KAAxF0E;AADF,WAEO;AACLA,WAAK,GAAGD,UAAU,GAAGzE,KAArB0E;AACD;;AACD,WAAO;AAAC1E,WAAD;AAAQ0E;AAAR,KAAP;AACD;;AACD,MAAIk8D,iBAAiB,GAAG;AACtB3qE,MAAE,EAAE,YADkB;AAEtBsmB,YAAQ,EAAE;AACRskD,eAAS,EAAE,SADH;AAERntB,aAAO,EAAE;AAFD,KAFY;AAMtBotB,wBAAoB,EAAE,CAACjnD,KAAD,EAAQniB,IAAR,EAAc6B,OAAd,KAA0B;AAC9C,UAAI,CAACA,OAAO,CAACm6C,OAAb,EAAsB;AACpBgtB,0BAAkB,CAAC7mD,KAAD,CAAlB6mD;AACA;AACD;;AACD,YAAM9a,cAAc,GAAG/rC,KAAK,CAACuD,KAA7B;AACAvD,WAAK,CAACiD,IAANjD,CAAWH,QAAXG,CAAoB/X,OAApB+X,CAA4B,CAACyjB,OAAD,EAAU5kC,YAAV,KAA2B;AACrD,cAAM;AAAC8lC,eAAD;AAAQ7jB;AAAR,YAAqB2iB,OAA3B;AACA,cAAMh5B,IAAI,GAAGuV,KAAK,CAACsmB,cAANtmB,CAAqBnhB,YAArBmhB,CAAb;AACA,cAAMiD,IAAI,GAAG0hB,KAAK,IAAIlB,OAAO,CAACxgB,IAA9B;;AACA,YAAIoH,OAAO,CAAC,CAACvJ,SAAD,EAAYd,KAAK,CAACtgB,OAANsgB,CAAcc,SAA1B,CAAD,CAAPuJ,KAAkD,GAAtD,EAA2D;AACzD;AACD;;AACD,YAAI,CAAC5f,IAAI,CAACq4B,UAALr4B,CAAgBw6B,kBAArB,EAAyC;AACvC;AACD;;AACD,cAAMiiC,KAAK,GAAGlnD,KAAK,CAAC0B,MAAN1B,CAAavV,IAAI,CAACk7B,OAAlB3lB,CAAd;;AACA,YAAIknD,KAAK,CAACzqE,IAANyqE,KAAe,QAAfA,IAA2BA,KAAK,CAACzqE,IAANyqE,KAAe,MAA9C,EAAsD;AACpD;AACD;;AACD,YAAIlnD,KAAK,CAACtgB,OAANsgB,CAAcsB,OAAlB,EAA2B;AACzB;AACD;;AACD,YAAI;AAACnb,eAAD;AAAQ0E;AAAR,YAAiBi8D,yCAAyC,CAACr8D,IAAD,EAAOwY,IAAP,CAA9D;AACA,cAAMkkD,SAAS,GAAGznE,OAAO,CAACynE,SAARznE,IAAqB,IAAIqsD,cAA3C;;AACA,YAAIlhD,KAAK,IAAIs8D,SAAb,EAAwB;AACtBP,+BAAqB,CAACnjC,OAAD,CAArBmjC;AACA;AACD;;AACD,YAAIvqE,aAAa,CAACsoC,KAAD,CAAjB,EAA0B;AACxBlB,iBAAO,CAACkB,KAARlB,GAAgBxgB,IAAhBwgB;AACA,iBAAOA,OAAO,CAACxgB,IAAf;AACAvmB,gBAAM,CAACoL,cAAPpL,CAAsB+mC,OAAtB/mC,EAA+B,MAA/BA,EAAuC;AACrCqL,wBAAY,EAAE,IADuB;AAErCC,sBAAU,EAAE,IAFyB;AAGrC8Z,eAAG,EAAE,YAAW;AACd,qBAAO,KAAKmzB,UAAZ;AAJmC;AAMrCtsC,eAAG,EAAE,UAAS4F,CAAT,EAAY;AACf,mBAAKo2B,KAAL,GAAap2B,CAAb;AACD;AARoC,WAAvC7R;AAUD;;AACD,YAAIyoE,SAAJ;;AACA,gBAAQzlE,OAAO,CAACsnE,SAAhB;AACA,eAAK,MAAL;AACE7B,qBAAS,GAAGF,cAAc,CAAChiD,IAAD,EAAO9c,KAAP,EAAc0E,KAAd,EAAqBkhD,cAArB,EAAqCrsD,OAArC,CAA1BylE;AACA;;AACF,eAAK,SAAL;AACEA,qBAAS,GAAGe,gBAAgB,CAACjjD,IAAD,EAAO9c,KAAP,EAAc0E,KAAd,EAAqBkhD,cAArB,CAA5BoZ;AACA;;AACF;AACE,kBAAM,IAAIn3C,KAAJ,6CAA+CtuB,OAAO,CAACsnE,SAAvD,OAAN;AARF;;AAUAvjC,eAAO,CAACwR,UAARxR,GAAqB0hC,SAArB1hC;AAhDF;AAZoB;;AA+DtB24B,WAAO,CAACp8C,KAAD,EAAQ;AACb6mD,wBAAkB,CAAC7mD,KAAD,CAAlB6mD;AACD;;AAjEqB,GAAxB;;AAoEA,WAAS7D,SAAT,CAAmBt7C,IAAnB,EAAyBxoB,MAAzB,EAAiCyF,QAAjC,EAA2C;AACzC,UAAM60B,QAAQ,GAAG9R,IAAI,CAAC8R,QAAtB;AACA,UAAM9uB,MAAM,GAAGgd,IAAI,CAAChd,MAApB;AACA,UAAM08D,OAAO,GAAGloE,MAAM,CAACwL,MAAvB;AACA,UAAMtJ,KAAK,GAAG,EAAd;;AACA,SAAK,MAAMu3B,OAAX,IAAsBa,QAAtB,EAAgC;AAC9B,UAAI;AAACrzB,aAAD;AAAQC;AAAR,UAAeuyB,OAAnB;AACAvyB,SAAG,GAAGihE,eAAe,CAAClhE,KAAD,EAAQC,GAAR,EAAasE,MAAb,CAArBtE;;AACA,YAAMwyB,MAAM,GAAG0uC,UAAU,CAAC3iE,QAAD,EAAW+F,MAAM,CAACvE,KAAD,CAAjB,EAA0BuE,MAAM,CAACtE,GAAD,CAAhC,EAAuCuyB,OAAO,CAAC/G,IAA/C,CAAzB;;AACA,UAAI,CAAC1yB,MAAM,CAACs6B,QAAZ,EAAsB;AACpBp4B,aAAK,CAACI,IAANJ,CAAW;AACTpC,gBAAM,EAAE25B,OADC;AAETz5B,gBAAM,EAAE05B,MAFC;AAGTzyB,eAAK,EAAEuE,MAAM,CAACvE,KAAD,CAHJ;AAITC,aAAG,EAAEsE,MAAM,CAACtE,GAAD;AAJF,SAAXhF;AAMA;AACD;;AACD,YAAMmmE,cAAc,GAAGhuC,cAAc,CAACr6B,MAAD,EAAS05B,MAAT,CAArC;;AACA,WAAK,MAAM4uC,GAAX,IAAkBD,cAAlB,EAAkC;AAChC,cAAME,SAAS,GAAGH,UAAU,CAAC3iE,QAAD,EAAWyiE,OAAO,CAACI,GAAG,CAACrhE,KAAL,CAAlB,EAA+BihE,OAAO,CAACI,GAAG,CAACphE,GAAL,CAAtC,EAAiDohE,GAAG,CAAC51C,IAArD,CAA5B;;AACA,cAAM81C,WAAW,GAAG3uC,aAAa,CAACJ,OAAD,EAAUjuB,MAAV,EAAkB+8D,SAAlB,CAAjC;;AACA,aAAK,MAAME,UAAX,IAAyBD,WAAzB,EAAsC;AACpCtmE,eAAK,CAACI,IAANJ,CAAW;AACTpC,kBAAM,EAAE2oE,UADC;AAETzoE,kBAAM,EAAEsoE,GAFC;AAGTrhE,iBAAK,EAAE;AACL,eAACxB,QAAD,GAAYijE,QAAQ,CAAChvC,MAAD,EAAS6uC,SAAT,EAAoB,OAApB,EAA6BjlE,IAAI,CAACqC,GAAlC;AADf,aAHE;AAMTuB,eAAG,EAAE;AACH,eAACzB,QAAD,GAAYijE,QAAQ,CAAChvC,MAAD,EAAS6uC,SAAT,EAAoB,KAApB,EAA2BjlE,IAAI,CAACoC,GAAhC;AADjB;AANI,WAAXxD;AAUD;AACF;AACF;;AACD,WAAOA,KAAP;AACD;;AACD,WAASkmE,UAAT,CAAoB3iE,QAApB,EAA8Bq1C,KAA9B,EAAqC3yC,IAArC,EAA2CuqB,IAA3C,EAAiD;AAC/C,QAAIA,IAAJ,EAAU;AACR;AACD;;AACD,QAAIzrB,KAAK,GAAG6zC,KAAK,CAACr1C,QAAD,CAAjB;AACA,QAAIyB,GAAG,GAAGiB,IAAI,CAAC1C,QAAD,CAAd;;AACA,QAAIA,QAAQ,KAAK,OAAjB,EAA0B;AACxBwB,WAAK,GAAGF,eAAe,CAACE,KAAD,CAAvBA;AACAC,SAAG,GAAGH,eAAe,CAACG,GAAD,CAArBA;AACD;;AACD,WAAO;AAACzB,cAAD;AAAWwB,WAAX;AAAkBC;AAAlB,KAAP;AACD;;AACD,WAASyhE,mBAAT,CAA6BC,QAA7B,EAAuCpgD,IAAvC,EAA6C;AAC3C,UAAM;AAAC9mB,OAAC,GAAG,IAAL;AAAWE,OAAC,GAAG;AAAf,QAAuBgnE,QAAQ,IAAI,EAAzC;AACA,UAAMC,UAAU,GAAGrgD,IAAI,CAAChd,MAAxB;AACA,UAAMA,MAAM,GAAG,EAAf;AACAgd,QAAI,CAAC8R,QAAL9R,CAAczf,OAAdyf,CAAsB,SAAkB;AAAA,UAAjB;AAACvhB,aAAD;AAAQC;AAAR,OAAiB;AACtCA,SAAG,GAAGihE,eAAe,CAAClhE,KAAD,EAAQC,GAAR,EAAa2hE,UAAb,CAArB3hE;AACA,YAAM4zC,KAAK,GAAG+tB,UAAU,CAAC5hE,KAAD,CAAxB;AACA,YAAMkB,IAAI,GAAG0gE,UAAU,CAAC3hE,GAAD,CAAvB;;AACA,UAAItF,CAAC,KAAK,IAAV,EAAgB;AACd4J,cAAM,CAAClJ,IAAPkJ,CAAY;AAAC9J,WAAC,EAAEo5C,KAAK,CAACp5C,CAAV;AAAaE;AAAb,SAAZ4J;AACAA,cAAM,CAAClJ,IAAPkJ,CAAY;AAAC9J,WAAC,EAAEyG,IAAI,CAACzG,CAAT;AAAYE;AAAZ,SAAZ4J;AAFF,aAGO,IAAI9J,CAAC,KAAK,IAAV,EAAgB;AACrB8J,cAAM,CAAClJ,IAAPkJ,CAAY;AAAC9J,WAAD;AAAIE,WAAC,EAAEk5C,KAAK,CAACl5C;AAAb,SAAZ4J;AACAA,cAAM,CAAClJ,IAAPkJ,CAAY;AAAC9J,WAAD;AAAIE,WAAC,EAAEuG,IAAI,CAACvG;AAAZ,SAAZ4J;AACD;AAVH;AAYA,WAAOA,MAAP;AACD;;AACD,WAAS28D,eAAT,CAAyBlhE,KAAzB,EAAgCC,GAAhC,EAAqCsE,MAArC,EAA6C;AAC3C,WAAMtE,GAAG,GAAGD,KAAZ,EAAmBC,GAAG,EAAtB,EAA0B;AACxB,YAAM+f,KAAK,GAAGzb,MAAM,CAACtE,GAAD,CAApB;;AACA,UAAI,CAAChC,KAAK,CAAC+hB,KAAK,CAACvlB,CAAP,CAAN,IAAmB,CAACwD,KAAK,CAAC+hB,KAAK,CAACrlB,CAAP,CAA7B,EAAwC;AACtC;AACD;AACF;;AACD,WAAOsF,GAAP;AACD;;AACD,WAASwhE,QAAT,CAAkB5lE,CAAlB,EAAqBC,CAArB,EAAwB8nB,IAAxB,EAA8BnsB,EAA9B,EAAkC;AAChC,QAAIoE,CAAC,IAAIC,CAAT,EAAY;AACV,aAAOrE,EAAE,CAACoE,CAAC,CAAC+nB,IAAD,CAAF,EAAU9nB,CAAC,CAAC8nB,IAAD,CAAX,CAAT;AACD;;AACD,WAAO/nB,CAAC,GAAGA,CAAC,CAAC+nB,IAAD,CAAJ,GAAa9nB,CAAC,GAAGA,CAAC,CAAC8nB,IAAD,CAAJ,GAAa,CAAnC;AACD;;AAED,WAASi+C,mBAAT,CAA6BF,QAA7B,EAAuCpgD,IAAvC,EAA6C;AAC3C,QAAIhd,MAAM,GAAG,EAAb;AACA,QAAIsvB,KAAK,GAAG,KAAZ;;AACA,QAAIz9B,OAAO,CAACurE,QAAD,CAAX,EAAuB;AACrB9tC,WAAK,GAAG,IAARA;AACAtvB,YAAM,GAAGo9D,QAATp9D;AAFF,WAGO;AACLA,YAAM,GAAGm9D,mBAAmB,CAACC,QAAD,EAAWpgD,IAAX,CAA5Bhd;AACD;;AACD,WAAOA,MAAM,CAACpM,MAAPoM,GAAgB,IAAIo4D,WAAJ,CAAgB;AACrCp4D,YADqC;AAErChL,aAAO,EAAE;AAACuyB,eAAO,EAAE;AAAV,OAF4B;AAGrC+H,WAHqC;AAIrCG,eAAS,EAAEH;AAJ0B,KAAhB,CAAhBtvB,GAKF,IALL;AAMD;;AACD,WAASu9D,gBAAT,CAA0BjpE,MAA1B,EAAkC;AAChC,WAAOA,MAAM,IAAIA,MAAM,CAAC+mB,IAAP/mB,KAAgB,KAAjC;AACD;;AAED,WAASkpE,cAAT,CAAwBpoE,OAAxB,EAAiChB,KAAjC,EAAwCqpE,SAAxC,EAAmD;AACjD,UAAMnpE,MAAM,GAAGc,OAAO,CAAChB,KAAD,CAAtB;AACA,QAAIinB,IAAI,GAAG/mB,MAAM,CAAC+mB,IAAlB;AACA,UAAMqiD,OAAO,GAAG,CAACtpE,KAAD,CAAhB;AACA,QAAII,MAAJ;;AACA,QAAI,CAACipE,SAAL,EAAgB;AACd,aAAOpiD,IAAP;AACD;;AACD,WAAOA,IAAI,KAAK,KAATA,IAAkBqiD,OAAO,CAAC5oE,OAAR4oE,CAAgBriD,IAAhBqiD,MAA0B,CAAC,CAApD,EAAuD;AACrD,UAAI,CAACprE,cAAc,CAAC+oB,IAAD,CAAnB,EAA2B;AACzB,eAAOA,IAAP;AACD;;AACD7mB,YAAM,GAAGY,OAAO,CAACimB,IAAD,CAAhB7mB;;AACA,UAAI,CAACA,MAAL,EAAa;AACX,eAAO,KAAP;AACD;;AACD,UAAIA,MAAM,CAACygC,OAAX,EAAoB;AAClB,eAAO5Z,IAAP;AACD;;AACDqiD,aAAO,CAAC5mE,IAAR4mE,CAAariD,IAAbqiD;AACAriD,UAAI,GAAG7mB,MAAM,CAAC6mB,IAAdA;AACD;;AACD,WAAO,KAAP;AACD;;AACD,WAASsiD,WAAT,CAAqB3gD,IAArB,EAA2B5oB,KAA3B,EAAkC+L,KAAlC,EAAyC;AACvC,UAAMkb,IAAI,GAAGuiD,eAAe,CAAC5gD,IAAD,CAA5B;;AACA,QAAI3qB,QAAQ,CAACgpB,IAAD,CAAZ,EAAoB;AAClB,aAAO3hB,KAAK,CAAC2hB,IAAI,CAACzpB,KAAN,CAAL8H,GAAoB,KAApBA,GAA4B2hB,IAAnC;AACD;;AACD,QAAI7mB,MAAM,GAAGzB,UAAU,CAACsoB,IAAD,CAAvB;;AACA,QAAI/oB,cAAc,CAACkC,MAAD,CAAdlC,IAA0BwF,IAAI,CAACkB,KAALlB,CAAWtD,MAAXsD,MAAuBtD,MAArD,EAA6D;AAC3D,aAAOqpE,iBAAiB,CAACxiD,IAAI,CAAC,CAAD,CAAL,EAAUjnB,KAAV,EAAiBI,MAAjB,EAAyB2L,KAAzB,CAAxB;AACD;;AACD,WAAO,CAAC,QAAD,EAAW,OAAX,EAAoB,KAApB,EAA2B,OAA3B,EAAoC,OAApC,EAA6CrL,OAA7C,CAAqDumB,IAArD,KAA8D,CAA9D,IAAmEA,IAA1E;AACD;;AACD,WAASwiD,iBAAT,CAA2BC,OAA3B,EAAoC1pE,KAApC,EAA2CI,MAA3C,EAAmD2L,KAAnD,EAA0D;AACxD,QAAI29D,OAAO,KAAK,GAAZA,IAAmBA,OAAO,KAAK,GAAnC,EAAwC;AACtCtpE,YAAM,GAAGJ,KAAK,GAAGI,MAAjBA;AACD;;AACD,QAAIA,MAAM,KAAKJ,KAAXI,IAAoBA,MAAM,GAAG,CAA7BA,IAAkCA,MAAM,IAAI2L,KAAhD,EAAuD;AACrD,aAAO,KAAP;AACD;;AACD,WAAO3L,MAAP;AACD;;AACD,WAASupE,eAAT,CAAyB1iD,IAAzB,EAA+BtE,KAA/B,EAAsC;AACpC,QAAI0C,KAAK,GAAG,IAAZ;;AACA,QAAI4B,IAAI,KAAK,OAAb,EAAsB;AACpB5B,WAAK,GAAG1C,KAAK,CAAC8E,MAAdpC;AADF,WAEO,IAAI4B,IAAI,KAAK,KAAb,EAAoB;AACzB5B,WAAK,GAAG1C,KAAK,CAAC6E,GAAdnC;AADK,WAEA,IAAIpnB,QAAQ,CAACgpB,IAAD,CAAZ,EAAoB;AACzB5B,WAAK,GAAG1C,KAAK,CAACpW,gBAANoW,CAAuBsE,IAAI,CAACzpB,KAA5BmlB,CAAR0C;AADK,WAEA,IAAI1C,KAAK,CAAC0tB,YAAV,EAAwB;AAC7BhrB,WAAK,GAAG1C,KAAK,CAAC0tB,YAAN1tB,EAAR0C;AACD;;AACD,WAAOA,KAAP;AACD;;AACD,WAASukD,eAAT,CAAyB3iD,IAAzB,EAA+BtE,KAA/B,EAAsC6rB,UAAtC,EAAkD;AAChD,QAAIhxC,KAAJ;;AACA,QAAIypB,IAAI,KAAK,OAAb,EAAsB;AACpBzpB,WAAK,GAAGgxC,UAARhxC;AADF,WAEO,IAAIypB,IAAI,KAAK,KAAb,EAAoB;AACzBzpB,WAAK,GAAGmlB,KAAK,CAAC/hB,OAAN+hB,CAAcvjB,OAAdujB,GAAwBA,KAAK,CAAC7c,GAA9B6c,GAAoCA,KAAK,CAAC5c,GAAlDvI;AADK,WAEA,IAAIS,QAAQ,CAACgpB,IAAD,CAAZ,EAAoB;AACzBzpB,WAAK,GAAGypB,IAAI,CAACzpB,KAAbA;AADK,WAEA;AACLA,WAAK,GAAGmlB,KAAK,CAAC2gC,YAAN3gC,EAARnlB;AACD;;AACD,WAAOA,KAAP;AACD;;AACD,WAASgsE,eAAT,CAAyB5gD,IAAzB,EAA+B;AAC7B,UAAMhoB,OAAO,GAAGgoB,IAAI,CAAChoB,OAArB;AACA,UAAMipE,UAAU,GAAGjpE,OAAO,CAACqmB,IAA3B;AACA,QAAIA,IAAI,GAAG1oB,cAAc,CAACsrE,UAAU,IAAIA,UAAU,CAACzpE,MAA1B,EAAkCypE,UAAlC,CAAzB;;AACA,QAAI5iD,IAAI,KAAKxlB,SAAb,EAAwB;AACtBwlB,UAAI,GAAG,CAAC,CAACrmB,OAAO,CAACigB,eAAjBoG;AACD;;AACD,QAAIA,IAAI,KAAK,KAATA,IAAkBA,IAAI,KAAK,IAA/B,EAAqC;AACnC,aAAO,KAAP;AACD;;AACD,QAAIA,IAAI,KAAK,IAAb,EAAmB;AACjB,aAAO,QAAP;AACD;;AACD,WAAOA,IAAP;AACD;;AAED,WAAS6iD,eAAT,CAAyB5pE,MAAzB,EAAiC;AAC/B,UAAM;AAACyiB,WAAD;AAAQ3iB,WAAR;AAAe4oB;AAAf,QAAuB1oB,MAA7B;AACA,UAAM0L,MAAM,GAAG,EAAf;AACA,UAAM8uB,QAAQ,GAAG9R,IAAI,CAAC8R,QAAtB;AACA,UAAMqvC,YAAY,GAAGnhD,IAAI,CAAChd,MAA1B;AACA,UAAMo+D,UAAU,GAAGC,aAAa,CAACtnD,KAAD,EAAQ3iB,KAAR,CAAhC;AACAgqE,cAAU,CAACtnE,IAAXsnE,CAAgBd,mBAAmB,CAAC;AAACpnE,OAAC,EAAE,IAAJ;AAAUE,OAAC,EAAE2gB,KAAK,CAAC8E;AAAnB,KAAD,EAA6BmB,IAA7B,CAAnCohD;;AACA,SAAK,IAAI3qE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq7B,QAAQ,CAACl7B,MAA7B,EAAqCH,CAAC,EAAtC,EAA0C;AACxC,YAAMw6B,OAAO,GAAGa,QAAQ,CAACr7B,CAAD,CAAxB;;AACA,WAAK,IAAIie,CAAC,GAAGuc,OAAO,CAACxyB,KAArB,EAA4BiW,CAAC,IAAIuc,OAAO,CAACvyB,GAAzC,EAA8CgW,CAAC,EAA/C,EAAmD;AACjD4sD,sBAAc,CAACt+D,MAAD,EAASm+D,YAAY,CAACzsD,CAAD,CAArB,EAA0B0sD,UAA1B,CAAdE;AACD;AACF;;AACD,WAAO,IAAIlG,WAAJ,CAAgB;AAACp4D,YAAD;AAAShL,aAAO,EAAE;AAAlB,KAAhB,CAAP;AACD;;AACD,WAASqpE,aAAT,CAAuBtnD,KAAvB,EAA8B3iB,KAA9B,EAAqC;AACnC,UAAMmqE,KAAK,GAAG,EAAd;AACA,UAAMtrB,KAAK,GAAGl8B,KAAK,CAACmhB,uBAANnhB,CAA8B,MAA9BA,CAAd;;AACA,SAAK,IAAItjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGw/C,KAAK,CAACr/C,MAA1B,EAAkCH,CAAC,EAAnC,EAAuC;AACrC,YAAMsM,IAAI,GAAGkzC,KAAK,CAACx/C,CAAD,CAAlB;;AACA,UAAIsM,IAAI,CAAC3L,KAAL2L,KAAe3L,KAAnB,EAA0B;AACxB;AACD;;AACD,UAAI,CAAC2L,IAAI,CAAC25B,MAAV,EAAkB;AAChB6kC,aAAK,CAACC,OAAND,CAAcx+D,IAAI,CAACg5B,OAAnBwlC;AACD;AACF;;AACD,WAAOA,KAAP;AACD;;AACD,WAASD,cAAT,CAAwBt+D,MAAxB,EAAgCy+D,WAAhC,EAA6CL,UAA7C,EAAyD;AACvD,UAAMM,SAAS,GAAG,EAAlB;;AACA,SAAK,IAAIhtD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0sD,UAAU,CAACxqE,MAA/B,EAAuC8d,CAAC,EAAxC,EAA4C;AAC1C,YAAMsL,IAAI,GAAGohD,UAAU,CAAC1sD,CAAD,CAAvB;AACA,YAAM;AAAC49B,aAAD;AAAQ3yC,YAAR;AAAc8e;AAAd,UAAuBkjD,SAAS,CAAC3hD,IAAD,EAAOyhD,WAAP,EAAoB,GAApB,CAAtC;;AACA,UAAI,CAAChjD,KAAD,IAAW6zB,KAAK,IAAI3yC,IAAxB,EAA+B;AAC7B;AACD;;AACD,UAAI2yC,KAAJ,EAAW;AACTovB,iBAAS,CAACF,OAAVE,CAAkBjjD,KAAlBijD;AADF,aAEO;AACL1+D,cAAM,CAAClJ,IAAPkJ,CAAYyb,KAAZzb;;AACA,YAAI,CAACrD,IAAL,EAAW;AACT;AACD;AACF;AACF;;AACDqD,UAAM,CAAClJ,IAAPkJ,CAAY,GAAG0+D,SAAf1+D;AACD;;AACD,WAAS2+D,SAAT,CAAmB3hD,IAAnB,EAAyByhD,WAAzB,EAAsCxkE,QAAtC,EAAgD;AAC9C,UAAMwhB,KAAK,GAAGuB,IAAI,CAACzK,WAALyK,CAAiByhD,WAAjBzhD,EAA8B/iB,QAA9B+iB,CAAd;;AACA,QAAI,CAACvB,KAAL,EAAY;AACV,aAAO,EAAP;AACD;;AACD,UAAMmjD,UAAU,GAAGnjD,KAAK,CAACxhB,QAAD,CAAxB;AACA,UAAM60B,QAAQ,GAAG9R,IAAI,CAAC8R,QAAtB;AACA,UAAMuuC,UAAU,GAAGrgD,IAAI,CAAChd,MAAxB;AACA,QAAIsvC,KAAK,GAAG,KAAZ;AACA,QAAI3yC,IAAI,GAAG,KAAX;;AACA,SAAK,IAAIlJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq7B,QAAQ,CAACl7B,MAA7B,EAAqCH,CAAC,EAAtC,EAA0C;AACxC,YAAMw6B,OAAO,GAAGa,QAAQ,CAACr7B,CAAD,CAAxB;AACA,YAAMorE,UAAU,GAAGxB,UAAU,CAACpvC,OAAO,CAACxyB,KAAT,CAAV4hE,CAA0BpjE,QAA1BojE,CAAnB;AACA,YAAMyB,SAAS,GAAGzB,UAAU,CAACpvC,OAAO,CAACvyB,GAAT,CAAV2hE,CAAwBpjE,QAAxBojE,CAAlB;;AACA,UAAIlhE,UAAU,CAACyiE,UAAD,EAAaC,UAAb,EAAyBC,SAAzB,CAAd,EAAmD;AACjDxvB,aAAK,GAAGsvB,UAAU,KAAKC,UAAvBvvB;AACA3yC,YAAI,GAAGiiE,UAAU,KAAKE,SAAtBniE;AACA;AACD;AACF;;AACD,WAAO;AAAC2yC,WAAD;AAAQ3yC,UAAR;AAAc8e;AAAd,KAAP;AACD;;AAED,QAAMsjD,SAAN,CAAgB;AACd7rD,eAAW,CAAC0J,IAAD,EAAO;AAChB,WAAK1mB,CAAL,GAAS0mB,IAAI,CAAC1mB,CAAd;AACA,WAAKE,CAAL,GAASwmB,IAAI,CAACxmB,CAAd;AACA,WAAKqkB,MAAL,GAAcmC,IAAI,CAACnC,MAAnB;AACD;;AACDu8C,eAAW,CAAC/gD,GAAD,EAAMiY,MAAN,EAActR,IAAd,EAAoB;AAC7B,YAAM;AAAC1mB,SAAD;AAAIE,SAAJ;AAAOqkB;AAAP,UAAiB,IAAvB;AACAyT,YAAM,GAAGA,MAAM,IAAI;AAACzyB,aAAK,EAAE,CAAR;AAAWC,WAAG,EAAE3D;AAAhB,OAAnBm2B;AACAjY,SAAG,CAAC8E,GAAJ9E,CAAQ/f,CAAR+f,EAAW7f,CAAX6f,EAAcwE,MAAdxE,EAAsBiY,MAAM,CAACxyB,GAA7Bua,EAAkCiY,MAAM,CAACzyB,KAAzCwa,EAAgD,IAAhDA;AACA,aAAO,CAAC2G,IAAI,CAACsR,MAAb;AACD;;AACD3b,eAAW,CAACkJ,KAAD,EAAQ;AACjB,YAAM;AAACvlB,SAAD;AAAIE,SAAJ;AAAOqkB;AAAP,UAAiB,IAAvB;AACA,YAAMzf,KAAK,GAAGygB,KAAK,CAACzgB,KAApB;AACA,aAAO;AACL9E,SAAC,EAAEA,CAAC,GAAG4B,IAAI,CAAC6K,GAAL7K,CAASkD,KAATlD,IAAkB2iB,MADpB;AAELrkB,SAAC,EAAEA,CAAC,GAAG0B,IAAI,CAAC4J,GAAL5J,CAASkD,KAATlD,IAAkB2iB,MAFpB;AAGLzf;AAHK,OAAP;AAKD;;AApBa;;AAuBhB,WAASkmB,UAAT,CAAoB5sB,MAApB,EAA4B;AAC1B,UAAM;AAACghB,WAAD;AAAQ+F,UAAR;AAAc2B;AAAd,QAAsB1oB,MAA5B;;AACA,QAAIhC,cAAc,CAAC+oB,IAAD,CAAlB,EAA0B;AACxB,aAAO2jD,cAAc,CAAC1pD,KAAD,EAAQ+F,IAAR,CAArB;AACD;;AACD,QAAIA,IAAI,KAAK,OAAb,EAAsB;AACpB,aAAO6iD,eAAe,CAAC5pE,MAAD,CAAtB;AACD;;AACD,QAAI+mB,IAAI,KAAK,OAAb,EAAsB;AACpB,aAAO,IAAP;AACD;;AACD,UAAM+hD,QAAQ,GAAG6B,eAAe,CAAC3qE,MAAD,CAAhC;;AACA,QAAI8oE,QAAQ,YAAY2B,SAAxB,EAAmC;AACjC,aAAO3B,QAAP;AACD;;AACD,WAAOE,mBAAmB,CAACF,QAAD,EAAWpgD,IAAX,CAA1B;AACD;;AACD,WAASgiD,cAAT,CAAwB1pD,KAAxB,EAA+BlhB,KAA/B,EAAsC;AACpC,UAAM2L,IAAI,GAAGuV,KAAK,CAACsmB,cAANtmB,CAAqBlhB,KAArBkhB,CAAb;AACA,UAAM2f,OAAO,GAAGl1B,IAAI,IAAIuV,KAAK,CAAC8yB,gBAAN9yB,CAAuBlhB,KAAvBkhB,CAAxB;AACA,WAAO2f,OAAO,GAAGl1B,IAAI,CAACg5B,OAAR,GAAkB,IAAhC;AACD;;AACD,WAASkmC,eAAT,CAAyB3qE,MAAzB,EAAiC;AAC/B,UAAMyiB,KAAK,GAAGziB,MAAM,CAACyiB,KAAPziB,IAAgB,EAA9B;;AACA,QAAIyiB,KAAK,CAACs1B,wBAAV,EAAoC;AAClC,aAAO6yB,uBAAuB,CAAC5qE,MAAD,CAA9B;AACD;;AACD,WAAO6qE,qBAAqB,CAAC7qE,MAAD,CAA5B;AACD;;AACD,WAAS6qE,qBAAT,CAA+B7qE,MAA/B,EAAuC;AACrC,UAAM;AAACyiB,WAAK,GAAG,EAAT;AAAasE;AAAb,QAAqB/mB,MAA3B;;AACA,UAAMmlB,KAAK,GAAGskD,eAAe,CAAC1iD,IAAD,EAAOtE,KAAP,CAA7B;;AACA,QAAIzkB,cAAc,CAACmnB,KAAD,CAAlB,EAA2B;AACzB,YAAMgqB,UAAU,GAAG1sB,KAAK,CAACwsB,YAANxsB,EAAnB;AACA,aAAO;AACL7gB,SAAC,EAAEutC,UAAU,GAAGhqB,KAAH,GAAW,IADnB;AAELrjB,SAAC,EAAEqtC,UAAU,GAAG,IAAH,GAAUhqB;AAFlB,OAAP;AAID;;AACD,WAAO,IAAP;AACD;;AACD,WAASylD,uBAAT,CAAiC5qE,MAAjC,EAAyC;AACvC,UAAM;AAACyiB,WAAD;AAAQsE;AAAR,QAAgB/mB,MAAtB;AACA,UAAMU,OAAO,GAAG+hB,KAAK,CAAC/hB,OAAtB;AACA,UAAMpB,MAAM,GAAGmjB,KAAK,CAAComB,SAANpmB,GAAkBnjB,MAAjC;AACA,UAAM6H,KAAK,GAAGzG,OAAO,CAACxB,OAARwB,GAAkB+hB,KAAK,CAAC5c,GAAxBnF,GAA8B+hB,KAAK,CAAC7c,GAAlD;;AACA,UAAMtI,KAAK,GAAGosE,eAAe,CAAC3iD,IAAD,EAAOtE,KAAP,EAActb,KAAd,CAA7B;;AACA,UAAMjH,MAAM,GAAG,EAAf;;AACA,QAAIQ,OAAO,CAACuxC,IAARvxC,CAAag3C,QAAjB,EAA2B;AACzB,YAAMhH,MAAM,GAAGjuB,KAAK,CAACs1B,wBAANt1B,CAA+B,CAA/BA,EAAkCtb,KAAlCsb,CAAf;AACA,aAAO,IAAIgoD,SAAJ,CAAc;AACnB7oE,SAAC,EAAE8uC,MAAM,CAAC9uC,CADS;AAEnBE,SAAC,EAAE4uC,MAAM,CAAC5uC,CAFS;AAGnBqkB,cAAM,EAAE1D,KAAK,CAAC80B,6BAAN90B,CAAoCnlB,KAApCmlB;AAHW,OAAd,CAAP;AAKD;;AACD,SAAK,IAAItjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGG,MAApB,EAA4B,EAAEH,CAA9B,EAAiC;AAC/Be,YAAM,CAACsC,IAAPtC,CAAYuiB,KAAK,CAACs1B,wBAANt1B,CAA+BtjB,CAA/BsjB,EAAkCnlB,KAAlCmlB,CAAZviB;AACD;;AACD,WAAOA,MAAP;AACD;;AAED,WAAS4qE,SAAT,CAAmBnpD,GAAnB,EAAwB3hB,MAAxB,EAAgConB,IAAhC,EAAsC;AACpC,UAAMlnB,MAAM,GAAG0sB,UAAU,CAAC5sB,MAAD,CAAzB;;AACA,UAAM;AAAC0oB,UAAD;AAAOjG,WAAP;AAAcxW;AAAd,QAAsBjM,MAA5B;AACA,UAAM+qE,QAAQ,GAAGriD,IAAI,CAAChoB,OAAtB;AACA,UAAMipE,UAAU,GAAGoB,QAAQ,CAAChkD,IAA5B;AACA,UAAM9H,KAAK,GAAG8rD,QAAQ,CAACpqD,eAAvB;AACA,UAAM;AAACqqD,WAAK,GAAG/rD,KAAT;AAAgBgrD,WAAK,GAAGhrD;AAAxB,QAAiC0qD,UAAU,IAAI,EAArD;;AACA,QAAIzpE,MAAM,IAAIwoB,IAAI,CAAChd,MAALgd,CAAYppB,MAA1B,EAAkC;AAChCkoB,cAAQ,CAAC7F,GAAD,EAAMyF,IAAN,CAARI;AACAyjD,YAAM,CAACtpD,GAAD,EAAM;AAAC+G,YAAD;AAAOxoB,cAAP;AAAe8qE,aAAf;AAAsBf,aAAtB;AAA6B7iD,YAA7B;AAAmC3E,aAAnC;AAA0CxW;AAA1C,OAAN,CAANg/D;AACAvjD,gBAAU,CAAC/F,GAAD,CAAV+F;AACD;AACF;;AACD,WAASujD,MAAT,CAAgBtpD,GAAhB,EAAqBqd,GAArB,EAA0B;AACxB,UAAM;AAACtW,UAAD;AAAOxoB,YAAP;AAAe8qE,WAAf;AAAsBf,WAAtB;AAA6B7iD,UAA7B;AAAmC3E;AAAnC,QAA4Cuc,GAAlD;AACA,UAAMr5B,QAAQ,GAAG+iB,IAAI,CAACsS,KAALtS,GAAa,OAAbA,GAAuBsW,GAAG,CAAC/yB,IAA5C;AACA0V,OAAG,CAACiD,IAAJjD;;AACA,QAAIhc,QAAQ,KAAK,GAAbA,IAAoBskE,KAAK,KAAKe,KAAlC,EAAyC;AACvCE,kBAAY,CAACvpD,GAAD,EAAMzhB,MAAN,EAAcknB,IAAI,CAACE,GAAnB,CAAZ4jD;AACAnkD,UAAI,CAACpF,GAAD,EAAM;AAAC+G,YAAD;AAAOxoB,cAAP;AAAe+e,aAAK,EAAE+rD,KAAtB;AAA6BvoD,aAA7B;AAAoC9c;AAApC,OAAN,CAAJohB;AACApF,SAAG,CAACqD,OAAJrD;AACAA,SAAG,CAACiD,IAAJjD;AACAupD,kBAAY,CAACvpD,GAAD,EAAMzhB,MAAN,EAAcknB,IAAI,CAACG,MAAnB,CAAZ2jD;AACD;;AACDnkD,QAAI,CAACpF,GAAD,EAAM;AAAC+G,UAAD;AAAOxoB,YAAP;AAAe+e,WAAK,EAAEgrD,KAAtB;AAA6BxnD,WAA7B;AAAoC9c;AAApC,KAAN,CAAJohB;AACApF,OAAG,CAACqD,OAAJrD;AACD;;AACD,WAASupD,YAAT,CAAsBvpD,GAAtB,EAA2BzhB,MAA3B,EAAmCirE,KAAnC,EAA0C;AACxC,UAAM;AAAC3wC,cAAD;AAAW9uB;AAAX,QAAqBxL,MAA3B;AACA,QAAI86C,KAAK,GAAG,IAAZ;AACA,QAAIowB,QAAQ,GAAG,KAAf;AACAzpD,OAAG,CAAC4E,SAAJ5E;;AACA,SAAK,MAAMgY,OAAX,IAAsBa,QAAtB,EAAgC;AAC9B,YAAM;AAACrzB,aAAD;AAAQC;AAAR,UAAeuyB,OAArB;AACA,YAAMlJ,UAAU,GAAG/kB,MAAM,CAACvE,KAAD,CAAzB;;AACA,YAAMqvC,SAAS,GAAG9qC,MAAM,CAAC28D,eAAe,CAAClhE,KAAD,EAAQC,GAAR,EAAasE,MAAb,CAAhB,CAAxB;;AACA,UAAIsvC,KAAJ,EAAW;AACTr5B,WAAG,CAACgF,MAAJhF,CAAW8O,UAAU,CAAC7uB,CAAtB+f,EAAyB8O,UAAU,CAAC3uB,CAApC6f;AACAq5B,aAAK,GAAG,KAARA;AAFF,aAGO;AACLr5B,WAAG,CAACiF,MAAJjF,CAAW8O,UAAU,CAAC7uB,CAAtB+f,EAAyBwpD,KAAzBxpD;AACAA,WAAG,CAACiF,MAAJjF,CAAW8O,UAAU,CAAC7uB,CAAtB+f,EAAyB8O,UAAU,CAAC3uB,CAApC6f;AACD;;AACDypD,cAAQ,GAAG,CAAC,CAAClrE,MAAM,CAACwiE,WAAPxiE,CAAmByhB,GAAnBzhB,EAAwBy5B,OAAxBz5B,EAAiC;AAACgsC,YAAI,EAAEk/B;AAAP,OAAjClrE,CAAbkrE;;AACA,UAAIA,QAAJ,EAAc;AACZzpD,WAAG,CAAC+E,SAAJ/E;AADF,aAEO;AACLA,WAAG,CAACiF,MAAJjF,CAAW60B,SAAS,CAAC50C,CAArB+f,EAAwBwpD,KAAxBxpD;AACD;AACF;;AACDA,OAAG,CAACiF,MAAJjF,CAAWzhB,MAAM,CAAC86C,KAAP96C,GAAe0B,CAA1B+f,EAA6BwpD,KAA7BxpD;AACAA,OAAG,CAAC+E,SAAJ/E;AACAA,OAAG,CAAC8F,IAAJ9F;AACD;;AACD,WAASoF,IAAT,CAAcpF,GAAd,EAAmBqd,GAAnB,EAAwB;AACtB,UAAM;AAACtW,UAAD;AAAOxoB,YAAP;AAAeyF,cAAf;AAAyBsZ,WAAzB;AAAgCwD;AAAhC,QAAyCuc,GAA/C;;AACA,UAAMxE,QAAQ,GAAGwpC,SAAS,CAACt7C,IAAD,EAAOxoB,MAAP,EAAeyF,QAAf,CAA1B;;AACA,SAAK,MAAM;AAAC3F,YAAM,EAAEqrE,GAAT;AAAcnrE,YAAM,EAAEsoE,GAAtB;AAA2BrhE,WAA3B;AAAkCC;AAAlC,KAAX,IAAqDozB,QAArD,EAA+D;AAC7D,YAAM;AAACjZ,aAAK,EAAE;AAACZ,yBAAe,GAAG1B;AAAnB,YAA4B;AAApC,UAA0CosD,GAAhD;AACA,YAAMC,QAAQ,GAAGprE,MAAM,KAAK,IAA5B;AACAyhB,SAAG,CAACiD,IAAJjD;AACAA,SAAG,CAACwH,SAAJxH,GAAgBhB,eAAhBgB;AACA4pD,gBAAU,CAAC5pD,GAAD,EAAMc,KAAN,EAAa6oD,QAAQ,IAAIhD,UAAU,CAAC3iE,QAAD,EAAWwB,KAAX,EAAkBC,GAAlB,CAAnC,CAAVmkE;AACA5pD,SAAG,CAAC4E,SAAJ5E;AACA,YAAMypD,QAAQ,GAAG,CAAC,CAAC1iD,IAAI,CAACg6C,WAALh6C,CAAiB/G,GAAjB+G,EAAsB2iD,GAAtB3iD,CAAnB;AACA,UAAIkK,IAAJ;;AACA,UAAI04C,QAAJ,EAAc;AACZ,YAAIF,QAAJ,EAAc;AACZzpD,aAAG,CAAC+E,SAAJ/E;AADF,eAEO;AACL6pD,4BAAkB,CAAC7pD,GAAD,EAAMzhB,MAAN,EAAckH,GAAd,EAAmBzB,QAAnB,CAAlB6lE;AACD;;AACD,cAAMC,UAAU,GAAG,CAAC,CAACvrE,MAAM,CAACwiE,WAAPxiE,CAAmByhB,GAAnBzhB,EAAwBsoE,GAAxBtoE,EAA6B;AAACgsC,cAAI,EAAEk/B,QAAP;AAAiBlsE,iBAAO,EAAE;AAA1B,SAA7BgB,CAArB;AACA0yB,YAAI,GAAGw4C,QAAQ,IAAIK,UAAnB74C;;AACA,YAAI,CAACA,IAAL,EAAW;AACT44C,4BAAkB,CAAC7pD,GAAD,EAAMzhB,MAAN,EAAciH,KAAd,EAAqBxB,QAArB,CAAlB6lE;AACD;AACF;;AACD7pD,SAAG,CAAC+E,SAAJ/E;AACAA,SAAG,CAACoF,IAAJpF,CAASiR,IAAI,GAAG,SAAH,GAAe,SAA5BjR;AACAA,SAAG,CAACqD,OAAJrD;AACD;AACF;;AACD,WAAS4pD,UAAT,CAAoB5pD,GAApB,EAAyBc,KAAzB,EAAgCmX,MAAhC,EAAwC;AACtC,UAAM;AAACtS,SAAD;AAAMC;AAAN,QAAgB9E,KAAK,CAACzB,KAANyB,CAAYwnB,SAAlC;AACA,UAAM;AAACtkC,cAAD;AAAWwB,WAAX;AAAkBC;AAAlB,QAAyBwyB,MAAM,IAAI,EAAzC;;AACA,QAAIj0B,QAAQ,KAAK,GAAjB,EAAsB;AACpBgc,SAAG,CAAC4E,SAAJ5E;AACAA,SAAG,CAACmF,IAAJnF,CAASxa,KAATwa,EAAgB2F,GAAhB3F,EAAqBva,GAAG,GAAGD,KAA3Bwa,EAAkC4F,MAAM,GAAGD,GAA3C3F;AACAA,SAAG,CAAC8F,IAAJ9F;AACD;AACF;;AACD,WAAS6pD,kBAAT,CAA4B7pD,GAA5B,EAAiCzhB,MAAjC,EAAyCinB,KAAzC,EAAgDxhB,QAAhD,EAA0D;AACxD,UAAM+lE,iBAAiB,GAAGxrE,MAAM,CAAC+d,WAAP/d,CAAmBinB,KAAnBjnB,EAA0ByF,QAA1BzF,CAA1B;;AACA,QAAIwrE,iBAAJ,EAAuB;AACrB/pD,SAAG,CAACiF,MAAJjF,CAAW+pD,iBAAiB,CAAC9pE,CAA7B+f,EAAgC+pD,iBAAiB,CAAC5pE,CAAlD6f;AACD;AACF;;AAED,MAAI7hB,KAAK,GAAG;AACV1C,MAAE,EAAE,QADM;;AAEVuuE,uBAAmB,CAAC3qD,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AACzC,YAAMmL,KAAK,GAAG,CAACmV,KAAK,CAACiD,IAANjD,CAAWH,QAAXG,IAAuB,EAAxB,EAA4B1hB,MAA1C;AACA,YAAMwB,OAAO,GAAG,EAAhB;AACA,UAAI2K,IAAJ,EAAUtM,CAAV,EAAaupB,IAAb,EAAmB1oB,MAAnB;;AACA,WAAKb,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0M,KAAhB,EAAuB,EAAE1M,CAAzB,EAA4B;AAC1BsM,YAAI,GAAGuV,KAAK,CAACsmB,cAANtmB,CAAqB7hB,CAArB6hB,CAAPvV;AACAid,YAAI,GAAGjd,IAAI,CAACg5B,OAAZ/b;AACA1oB,cAAM,GAAG,IAATA;;AACA,YAAI0oB,IAAI,IAAIA,IAAI,CAAChoB,OAAbgoB,IAAwBA,IAAI,YAAYo7C,WAA5C,EAAyD;AACvD9jE,gBAAM,GAAG;AACP2gC,mBAAO,EAAE3f,KAAK,CAAC8yB,gBAAN9yB,CAAuB7hB,CAAvB6hB,CADF;AAEPlhB,iBAAK,EAAEX,CAFA;AAGP4nB,gBAAI,EAAEsiD,WAAW,CAAC3gD,IAAD,EAAOvpB,CAAP,EAAU0M,KAAV,CAHV;AAIPmV,iBAJO;AAKP/U,gBAAI,EAAER,IAAI,CAACq4B,UAALr4B,CAAgB/K,OAAhB+K,CAAwBqW,SALvB;AAMPW,iBAAK,EAAEhX,IAAI,CAACi4B,MANL;AAOPhb;AAPO,WAAT1oB;AASD;;AACDyL,YAAI,CAACogE,OAALpgE,GAAezL,MAAfyL;AACA3K,eAAO,CAAC0B,IAAR1B,CAAad,MAAbc;AACD;;AACD,WAAK3B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0M,KAAhB,EAAuB,EAAE1M,CAAzB,EAA4B;AAC1Ba,cAAM,GAAGc,OAAO,CAAC3B,CAAD,CAAhBa;;AACA,YAAI,CAACA,MAAD,IAAWA,MAAM,CAAC+mB,IAAP/mB,KAAgB,KAA/B,EAAsC;AACpC;AACD;;AACDA,cAAM,CAAC+mB,IAAP/mB,GAAckpE,cAAc,CAACpoE,OAAD,EAAU3B,CAAV,EAAauB,OAAO,CAACyoE,SAArB,CAA5BnpE;AACD;AA9BO;;AAgCV8rE,cAAU,CAAC9qD,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAChC,YAAM+8B,IAAI,GAAG/8B,OAAO,CAACqrE,QAARrrE,KAAqB,YAAlC;AACA,YAAM2hC,QAAQ,GAAGrhB,KAAK,CAACwlC,4BAANxlC,EAAjB;AACA,YAAMoG,IAAI,GAAGpG,KAAK,CAACipB,SAAnB;;AACA,WAAK,IAAI9qC,CAAC,GAAGkjC,QAAQ,CAAC/iC,MAAT+iC,GAAkB,CAA/B,EAAkCljC,CAAC,IAAI,CAAvC,EAA0C,EAAEA,CAA5C,EAA+C;AAC7C,cAAMa,MAAM,GAAGqiC,QAAQ,CAACljC,CAAD,CAARkjC,CAAYwpC,OAA3B;;AACA,YAAI,CAAC7rE,MAAL,EAAa;AACX;AACD;;AACDA,cAAM,CAAC0oB,IAAP1oB,CAAYy2C,mBAAZz2C,CAAgConB,IAAhCpnB,EAAsCA,MAAM,CAACiM,IAA7CjM;;AACA,YAAIy9B,IAAI,IAAIz9B,MAAM,CAAC+mB,IAAnB,EAAyB;AACvB+jD,mBAAS,CAAC9pD,KAAK,CAACW,GAAP,EAAY3hB,MAAZ,EAAoBonB,IAApB,CAAT0jD;AACD;AACF;AA7CO;;AA+CVkB,sBAAkB,CAAChrD,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AACxC,UAAIA,OAAO,CAACqrE,QAARrrE,KAAqB,oBAAzB,EAA+C;AAC7C;AACD;;AACD,YAAM2hC,QAAQ,GAAGrhB,KAAK,CAACwlC,4BAANxlC,EAAjB;;AACA,WAAK,IAAI7hB,CAAC,GAAGkjC,QAAQ,CAAC/iC,MAAT+iC,GAAkB,CAA/B,EAAkCljC,CAAC,IAAI,CAAvC,EAA0C,EAAEA,CAA5C,EAA+C;AAC7C,cAAMa,MAAM,GAAGqiC,QAAQ,CAACljC,CAAD,CAARkjC,CAAYwpC,OAA3B;;AACA,YAAI5C,gBAAgB,CAACjpE,MAAD,CAApB,EAA8B;AAC5B8qE,mBAAS,CAAC9pD,KAAK,CAACW,GAAP,EAAY3hB,MAAZ,EAAoBghB,KAAK,CAACipB,SAA1B,CAAT6gC;AACD;AACF;AAzDO;;AA2DVmB,qBAAiB,CAACjrD,KAAD,EAAQniB,IAAR,EAAc6B,OAAd,EAAuB;AACtC,YAAMV,MAAM,GAAGnB,IAAI,CAAC4M,IAAL5M,CAAUgtE,OAAzB;;AACA,UAAI,CAAC5C,gBAAgB,CAACjpE,MAAD,CAAjB,IAA6BU,OAAO,CAACqrE,QAARrrE,KAAqB,mBAAtD,EAA2E;AACzE;AACD;;AACDoqE,eAAS,CAAC9pD,KAAK,CAACW,GAAP,EAAY3hB,MAAZ,EAAoBghB,KAAK,CAACipB,SAA1B,CAAT6gC;AAhEQ;;AAkEVpnD,YAAQ,EAAE;AACRylD,eAAS,EAAE,IADH;AAER4C,cAAQ,EAAE;AAFF;AAlEA,GAAZ;;AAwEA,QAAMG,UAAU,GAAG,CAACC,SAAD,EAAYxlB,QAAZ,KAAyB;AAC1C,QAAI;AAACylB,eAAS,GAAGzlB,QAAb;AAAuB0lB,cAAQ,GAAG1lB;AAAlC,QAA8CwlB,SAAlD;;AACA,QAAIA,SAAS,CAACG,aAAd,EAA6B;AAC3BF,eAAS,GAAG5oE,IAAI,CAACoC,GAALpC,CAAS4oE,SAAT5oE,EAAoBmjD,QAApBnjD,CAAZ4oE;AACAC,cAAQ,GAAGF,SAAS,CAACI,eAAVJ,IAA6B3oE,IAAI,CAACoC,GAALpC,CAAS6oE,QAAT7oE,EAAmBmjD,QAAnBnjD,CAAxC6oE;AACD;;AACD,WAAO;AACLA,cADK;AAELD,eAFK;AAGLI,gBAAU,EAAEhpE,IAAI,CAACqC,GAALrC,CAASmjD,QAATnjD,EAAmB4oE,SAAnB5oE;AAHP,KAAP;AANF;;AAYA,QAAMipE,UAAU,GAAG,CAACzpE,CAAD,EAAIC,CAAJ,KAAUD,CAAC,KAAK,IAANA,IAAcC,CAAC,KAAK,IAApBD,IAA4BA,CAAC,CAACnD,YAAFmD,KAAmBC,CAAC,CAACpD,YAAjDmD,IAAiEA,CAAC,CAAClD,KAAFkD,KAAYC,CAAC,CAACnD,KAA5G;;AACA,QAAM4sE,MAAN,SAAqB10B,OAArB,CAA6B;AAC3Bp5B,eAAW,CAACkiB,MAAD,EAAS;AAClB;AACA,WAAK6rC,MAAL,GAAc,KAAd;AACA,WAAKC,cAAL,GAAsB,EAAtB;AACA,WAAKC,YAAL,GAAoB,IAApB;AACA,WAAKC,YAAL,GAAoB,KAApB;AACA,WAAK9rD,KAAL,GAAa8f,MAAM,CAAC9f,KAApB;AACA,WAAKtgB,OAAL,GAAeogC,MAAM,CAACpgC,OAAtB;AACA,WAAKihB,GAAL,GAAWmf,MAAM,CAACnf,GAAlB;AACA,WAAKorD,WAAL,GAAmBxrE,SAAnB;AACA,WAAKyrE,WAAL,GAAmBzrE,SAAnB;AACA,WAAK0rE,UAAL,GAAkB1rE,SAAlB;AACA,WAAKi0B,SAAL,GAAiBj0B,SAAjB;AACA,WAAKwnB,QAAL,GAAgBxnB,SAAhB;AACA,WAAK+lB,GAAL,GAAW/lB,SAAX;AACA,WAAKgmB,MAAL,GAAchmB,SAAd;AACA,WAAK6J,IAAL,GAAY7J,SAAZ;AACA,WAAK8J,KAAL,GAAa9J,SAAb;AACA,WAAKokB,MAAL,GAAcpkB,SAAd;AACA,WAAKgjB,KAAL,GAAahjB,SAAb;AACA,WAAK87C,QAAL,GAAgB97C,SAAhB;AACA,WAAKw7C,QAAL,GAAgBx7C,SAAhB;AACA,WAAK2d,MAAL,GAAc3d,SAAd;AACA,WAAK+gD,QAAL,GAAgB/gD,SAAhB;AACD;;AACDq+B,UAAM,CAAC7W,QAAD,EAAWyM,SAAX,EAAsBY,OAAtB,EAA+B;AACnC,WAAKrN,QAAL,GAAgBA,QAAhB;AACA,WAAKyM,SAAL,GAAiBA,SAAjB;AACA,WAAK6nB,QAAL,GAAgBjnB,OAAhB;AACA,WAAKgpB,aAAL;AACA,WAAK8tB,WAAL;AACA,WAAK/sB,GAAL;AACD;;AACDf,iBAAa,GAAG;AACd,UAAI,KAAKnQ,YAAL,EAAJ,EAAyB;AACvB,aAAK1qB,KAAL,GAAa,KAAKwE,QAAlB;AACA,aAAK3d,IAAL,GAAY,KAAKiyC,QAAL,CAAcjyC,IAA1B;AACA,aAAKC,KAAL,GAAa,KAAKkZ,KAAlB;AAHF,aAIO;AACL,aAAKoB,MAAL,GAAc,KAAK6P,SAAnB;AACA,aAAKlO,GAAL,GAAW,KAAK+1B,QAAL,CAAc/1B,GAAzB;AACA,aAAKC,MAAL,GAAc,KAAK5B,MAAnB;AACD;AACF;;AACDunD,eAAW,GAAG;AACZ,YAAMf,SAAS,GAAG,KAAKzrE,OAAL,CAAakoC,MAAb,IAAuB,EAAzC;AACA,UAAImkC,WAAW,GAAGpuE,QAAQ,CAACwtE,SAAS,CAAC12B,cAAX,EAA2B,CAAC,KAAKz0B,KAAN,CAA3B,EAAyC,IAAzC,CAARriB,IAA0D,EAA5E;;AACA,UAAIwtE,SAAS,CAAC98C,MAAd,EAAsB;AACpB09C,mBAAW,GAAGA,WAAW,CAAC19C,MAAZ09C,CAAoB5pE,IAAD,IAAUgpE,SAAS,CAAC98C,MAAV88C,CAAiBhpE,IAAjBgpE,EAAuB,KAAKnrD,KAAL,CAAWiD,IAAlCkoD,CAA7BY,CAAdA;AACD;;AACD,UAAIZ,SAAS,CAACnnE,IAAd,EAAoB;AAClB+nE,mBAAW,GAAGA,WAAW,CAAC/nE,IAAZ+nE,CAAiB,CAAC/pE,CAAD,EAAIC,CAAJ,KAAUkpE,SAAS,CAACnnE,IAAVmnE,CAAenpE,CAAfmpE,EAAkBlpE,CAAlBkpE,EAAqB,KAAKnrD,KAAL,CAAWiD,IAAhCkoD,CAA3BY,CAAdA;AACD;;AACD,UAAI,KAAKrsE,OAAL,CAAaxB,OAAjB,EAA0B;AACxB6tE,mBAAW,CAAC7tE,OAAZ6tE;AACD;;AACD,WAAKA,WAAL,GAAmBA,WAAnB;AACD;;AACD5sB,OAAG,GAAG;AACJ,YAAM;AAACz/C,eAAD;AAAUihB;AAAV,UAAiB,IAAvB;;AACA,UAAI,CAACjhB,OAAO,CAAC+2C,OAAb,EAAsB;AACpB,aAAKlzB,KAAL,GAAa,KAAKoB,MAAL,GAAc,CAA3B;AACA;AACD;;AACD,YAAMwmD,SAAS,GAAGzrE,OAAO,CAACkoC,MAA1B;AACA,YAAMukC,SAAS,GAAGhiD,MAAM,CAACghD,SAAS,CAAC9qD,IAAX,CAAxB;AACA,YAAMslC,QAAQ,GAAGwmB,SAAS,CAACjqE,IAA3B;;AACA,YAAMw+C,WAAW,GAAG,KAAK0rB,mBAAL,EAApB;;AACA,YAAM;AAACf,gBAAD;AAAWG;AAAX,UAAyBN,UAAU,CAACC,SAAD,EAAYxlB,QAAZ,CAAzC;AACA,UAAIpiC,KAAJ,EAAWoB,MAAX;AACAhE,SAAG,CAACN,IAAJM,GAAWwrD,SAAS,CAAC/oD,MAArBzC;;AACA,UAAI,KAAKstB,YAAL,EAAJ,EAAyB;AACvB1qB,aAAK,GAAG,KAAKwE,QAAbxE;AACAoB,cAAM,GAAG,KAAK0nD,QAAL,CAAc3rB,WAAd,EAA2BiF,QAA3B,EAAqC0lB,QAArC,EAA+CG,UAA/C,IAA6D,EAAtE7mD;AAFF,aAGO;AACLA,cAAM,GAAG,KAAK6P,SAAd7P;AACApB,aAAK,GAAG,KAAK+oD,QAAL,CAAc5rB,WAAd,EAA2BiF,QAA3B,EAAqC0lB,QAArC,EAA+CG,UAA/C,IAA6D,EAArEjoD;AACD;;AACD,WAAKA,KAAL,GAAa/gB,IAAI,CAACoC,GAALpC,CAAS+gB,KAAT/gB,EAAgB9C,OAAO,CAACqoB,QAARroB,IAAoB,KAAKqoB,QAAzCvlB,CAAb;AACA,WAAKmiB,MAAL,GAAcniB,IAAI,CAACoC,GAALpC,CAASmiB,MAATniB,EAAiB9C,OAAO,CAAC80B,SAAR90B,IAAqB,KAAK80B,SAA3ChyB,CAAd;AACD;;AACD6pE,YAAQ,CAAC3rB,WAAD,EAAciF,QAAd,EAAwB0lB,QAAxB,EAAkCG,UAAlC,EAA8C;AACpD,YAAM;AAAC7qD,WAAD;AAAMoH,gBAAN;AAAgBroB,eAAO,EAAE;AAACkoC,gBAAM,EAAE;AAAC6Q;AAAD;AAAT;AAAzB,UAAgD,IAAtD;AACA,YAAM8zB,QAAQ,GAAG,KAAKX,cAAL,GAAsB,EAAvC;AACA,YAAMK,UAAU,GAAG,KAAKA,UAAL,GAAkB,CAAC,CAAD,CAArC;AACA,YAAMzrD,UAAU,GAAGgrD,UAAU,GAAG/yB,OAAhC;AACA,UAAI+zB,WAAW,GAAG9rB,WAAlB;AACA//B,SAAG,CAACyH,SAAJzH,GAAgB,MAAhBA;AACAA,SAAG,CAAC0H,YAAJ1H,GAAmB,QAAnBA;AACA,UAAI8rD,GAAG,GAAG,CAAC,CAAX;AACA,UAAInmD,GAAG,GAAG,CAAC9F,UAAX;AACA,WAAKurD,WAAL,CAAiB9jE,OAAjB,CAAyB,CAACysC,UAAD,EAAav2C,CAAb,KAAmB;AAC1C,cAAMu5B,SAAS,GAAG2zC,QAAQ,GAAI1lB,QAAQ,GAAG,CAAvB0lB,GAA4B1qD,GAAG,CAAC2C,WAAJ3C,CAAgB+zB,UAAU,CAACrtB,IAA3B1G,EAAiC4C,KAA/E;;AACA,YAAIplB,CAAC,KAAK,CAANA,IAAW8tE,UAAU,CAACA,UAAU,CAAC3tE,MAAX2tE,GAAoB,CAArB,CAAVA,GAAoCv0C,SAApCu0C,GAAgD,IAAIxzB,OAApDwzB,GAA8DlkD,QAA7E,EAAuF;AACrFykD,qBAAW,IAAIhsD,UAAfgsD;AACAP,oBAAU,CAACA,UAAU,CAAC3tE,MAAX2tE,IAAqB9tE,CAAC,GAAG,CAAJA,GAAQ,CAARA,GAAY,CAAjC8tE,CAAD,CAAVA,GAAkD,CAAlDA;AACA3lD,aAAG,IAAI9F,UAAP8F;AACAmmD,aAAG;AACJ;;AACDF,gBAAQ,CAACpuE,CAAD,CAARouE,GAAc;AAACniE,cAAI,EAAE,CAAP;AAAUkc,aAAV;AAAemmD,aAAf;AAAoBlpD,eAAK,EAAEmU,SAA3B;AAAsC/S,gBAAM,EAAE6mD;AAA9C,SAAde;AACAN,kBAAU,CAACA,UAAU,CAAC3tE,MAAX2tE,GAAoB,CAArB,CAAVA,IAAqCv0C,SAAS,GAAG+gB,OAAjDwzB;AATF;AAWA,aAAOO,WAAP;AACD;;AACDF,YAAQ,CAAC5rB,WAAD,EAAciF,QAAd,EAAwB0lB,QAAxB,EAAkCG,UAAlC,EAA8C;AACpD,YAAM;AAAC7qD,WAAD;AAAM6T,iBAAN;AAAiB90B,eAAO,EAAE;AAACkoC,gBAAM,EAAE;AAAC6Q;AAAD;AAAT;AAA1B,UAAiD,IAAvD;AACA,YAAM8zB,QAAQ,GAAG,KAAKX,cAAL,GAAsB,EAAvC;AACA,YAAMI,WAAW,GAAG,KAAKA,WAAL,GAAmB,EAAvC;AACA,YAAMU,WAAW,GAAGl4C,SAAS,GAAGksB,WAAhC;AACA,UAAIisB,UAAU,GAAGl0B,OAAjB;AACA,UAAIm0B,eAAe,GAAG,CAAtB;AACA,UAAIC,gBAAgB,GAAG,CAAvB;AACA,UAAIziE,IAAI,GAAG,CAAX;AACA,UAAI0iE,GAAG,GAAG,CAAV;AACA,WAAKf,WAAL,CAAiB9jE,OAAjB,CAAyB,CAACysC,UAAD,EAAav2C,CAAb,KAAmB;AAC1C,cAAMu5B,SAAS,GAAG2zC,QAAQ,GAAI1lB,QAAQ,GAAG,CAAvB0lB,GAA4B1qD,GAAG,CAAC2C,WAAJ3C,CAAgB+zB,UAAU,CAACrtB,IAA3B1G,EAAiC4C,KAA/E;;AACA,YAAIplB,CAAC,GAAG,CAAJA,IAAS0uE,gBAAgB,GAAGrB,UAAnBqB,GAAgC,IAAIp0B,OAApCo0B,GAA8CH,WAA3D,EAAwE;AACtEC,oBAAU,IAAIC,eAAe,GAAGn0B,OAAhCk0B;AACAX,qBAAW,CAACxqE,IAAZwqE,CAAiB;AAACzoD,iBAAK,EAAEqpD,eAAR;AAAyBjoD,kBAAM,EAAEkoD;AAAjC,WAAjBb;AACA5hE,cAAI,IAAIwiE,eAAe,GAAGn0B,OAA1BruC;AACA0iE,aAAG;AACHF,yBAAe,GAAGC,gBAAgB,GAAG,CAArCD;AACD;;AACDL,gBAAQ,CAACpuE,CAAD,CAARouE,GAAc;AAACniE,cAAD;AAAOkc,aAAG,EAAEumD,gBAAZ;AAA8BC,aAA9B;AAAmCvpD,eAAK,EAAEmU,SAA1C;AAAqD/S,gBAAM,EAAE6mD;AAA7D,SAAde;AACAK,uBAAe,GAAGpqE,IAAI,CAACqC,GAALrC,CAASoqE,eAATpqE,EAA0Bk1B,SAA1Bl1B,CAAlBoqE;AACAC,wBAAgB,IAAIrB,UAAU,GAAG/yB,OAAjCo0B;AAXF;AAaAF,gBAAU,IAAIC,eAAdD;AACAX,iBAAW,CAACxqE,IAAZwqE,CAAiB;AAACzoD,aAAK,EAAEqpD,eAAR;AAAyBjoD,cAAM,EAAEkoD;AAAjC,OAAjBb;AACA,aAAOW,UAAP;AACD;;AACDI,kBAAc,GAAG;AACf,UAAI,CAAC,KAAKrtE,OAAL,CAAa+2C,OAAlB,EAA2B;AACzB;AACD;;AACD,YAAMiK,WAAW,GAAG,KAAK0rB,mBAAL,EAApB;;AACA,YAAM;AAACR,sBAAc,EAAEW,QAAjB;AAA2B7sE,eAAO,EAAE;AAACuK,eAAD;AAAQ29B,gBAAM,EAAE;AAAC6Q;AAAD,WAAhB;AAA2BnuC;AAA3B;AAApC,UAAuE,IAA7E;AACA,YAAM0iE,SAAS,GAAGn1C,aAAa,CAACvtB,GAAD,EAAM,KAAKF,IAAX,EAAiB,KAAKmZ,KAAtB,CAA/B;;AACA,UAAI,KAAK0qB,YAAL,EAAJ,EAAyB;AACvB,YAAIw+B,GAAG,GAAG,CAAV;;AACA,YAAIriE,IAAI,GAAGF,cAAc,CAACD,KAAD,EAAQ,KAAKG,IAAL,GAAYquC,OAApB,EAA6B,KAAKpuC,KAAL,GAAa,KAAK4hE,UAAL,CAAgBQ,GAAhB,CAA1C,CAAzB;;AACA,aAAK,MAAMQ,MAAX,IAAqBV,QAArB,EAA+B;AAC7B,cAAIE,GAAG,KAAKQ,MAAM,CAACR,GAAnB,EAAwB;AACtBA,eAAG,GAAGQ,MAAM,CAACR,GAAbA;AACAriE,gBAAI,GAAGF,cAAc,CAACD,KAAD,EAAQ,KAAKG,IAAL,GAAYquC,OAApB,EAA6B,KAAKpuC,KAAL,GAAa,KAAK4hE,UAAL,CAAgBQ,GAAhB,CAA1C,CAArBriE;AACD;;AACD6iE,gBAAM,CAAC3mD,GAAP2mD,IAAc,KAAK3mD,GAAL,GAAWo6B,WAAX,GAAyBjI,OAAvCw0B;AACAA,gBAAM,CAAC7iE,IAAP6iE,GAAcD,SAAS,CAACv1C,UAAVu1C,CAAqBA,SAAS,CAACpsE,CAAVosE,CAAY5iE,IAAZ4iE,CAArBA,EAAwCC,MAAM,CAAC1pD,KAA/CypD,CAAdC;AACA7iE,cAAI,IAAI6iE,MAAM,CAAC1pD,KAAP0pD,GAAex0B,OAAvBruC;AACD;AAXH,aAYO;AACL,YAAI0iE,GAAG,GAAG,CAAV;;AACA,YAAIxmD,GAAG,GAAGpc,cAAc,CAACD,KAAD,EAAQ,KAAKqc,GAAL,GAAWo6B,WAAX,GAAyBjI,OAAjC,EAA0C,KAAKlyB,MAAL,GAAc,KAAKylD,WAAL,CAAiBc,GAAjB,EAAsBnoD,MAA9E,CAAxB;;AACA,aAAK,MAAMsoD,MAAX,IAAqBV,QAArB,EAA+B;AAC7B,cAAIU,MAAM,CAACH,GAAPG,KAAeH,GAAnB,EAAwB;AACtBA,eAAG,GAAGG,MAAM,CAACH,GAAbA;AACAxmD,eAAG,GAAGpc,cAAc,CAACD,KAAD,EAAQ,KAAKqc,GAAL,GAAWo6B,WAAX,GAAyBjI,OAAjC,EAA0C,KAAKlyB,MAAL,GAAc,KAAKylD,WAAL,CAAiBc,GAAjB,EAAsBnoD,MAA9E,CAApB2B;AACD;;AACD2mD,gBAAM,CAAC3mD,GAAP2mD,GAAa3mD,GAAb2mD;AACAA,gBAAM,CAAC7iE,IAAP6iE,IAAe,KAAK7iE,IAAL,GAAYquC,OAA3Bw0B;AACAA,gBAAM,CAAC7iE,IAAP6iE,GAAcD,SAAS,CAACv1C,UAAVu1C,CAAqBA,SAAS,CAACpsE,CAAVosE,CAAYC,MAAM,CAAC7iE,IAAnB4iE,CAArBA,EAA+CC,MAAM,CAAC1pD,KAAtDypD,CAAdC;AACA3mD,aAAG,IAAI2mD,MAAM,CAACtoD,MAAPsoD,GAAgBx0B,OAAvBnyB;AACD;AACF;AACF;;AACD2nB,gBAAY,GAAG;AACb,aAAO,KAAKvuC,OAAL,CAAaq8C,QAAb,KAA0B,KAA1B,IAAmC,KAAKr8C,OAAL,CAAaq8C,QAAb,KAA0B,QAApE;AACD;;AACDtf,QAAI,GAAG;AACL,UAAI,KAAK/8B,OAAL,CAAa+2C,OAAjB,EAA0B;AACxB,cAAM91B,GAAG,GAAG,KAAKA,GAAjB;AACA6F,gBAAQ,CAAC7F,GAAD,EAAM,IAAN,CAAR6F;;AACA,aAAK0mD,KAAL;;AACAxmD,kBAAU,CAAC/F,GAAD,CAAV+F;AACD;AACF;;AACDwmD,SAAK,GAAG;AACN,YAAM;AAACxtE,eAAO,EAAE4nB,IAAV;AAAgB0kD,mBAAhB;AAA6BC,kBAA7B;AAAyCtrD;AAAzC,UAAgD,IAAtD;AACA,YAAM;AAAC1W,aAAD;AAAQ29B,cAAM,EAAEujC;AAAhB,UAA6B7jD,IAAnC;AACA,YAAM6lD,YAAY,GAAGzqD,QAAQ,CAACzE,KAA9B;AACA,YAAM+uD,SAAS,GAAGn1C,aAAa,CAACvQ,IAAI,CAAChd,GAAN,EAAW,KAAKF,IAAhB,EAAsB,KAAKmZ,KAA3B,CAA/B;AACA,YAAM4oD,SAAS,GAAGhiD,MAAM,CAACghD,SAAS,CAAC9qD,IAAX,CAAxB;AACA,YAAM;AAACpC,aAAK,EAAEmvD,SAAR;AAAmB30B;AAAnB,UAA8B0yB,SAApC;AACA,YAAMxlB,QAAQ,GAAGwmB,SAAS,CAACjqE,IAA3B;AACA,YAAMmrE,YAAY,GAAG1nB,QAAQ,GAAG,CAAhC;AACA,UAAI2nB,MAAJ;AACA,WAAKnoB,SAAL;AACAxkC,SAAG,CAACyH,SAAJzH,GAAgBqsD,SAAS,CAAC5kD,SAAV4kD,CAAoB,MAApBA,CAAhBrsD;AACAA,SAAG,CAAC0H,YAAJ1H,GAAmB,QAAnBA;AACAA,SAAG,CAACkH,SAAJlH,GAAgB,GAAhBA;AACAA,SAAG,CAACN,IAAJM,GAAWwrD,SAAS,CAAC/oD,MAArBzC;AACA,YAAM;AAAC0qD,gBAAD;AAAWD,iBAAX;AAAsBI;AAAtB,UAAoCN,UAAU,CAACC,SAAD,EAAYxlB,QAAZ,CAApD;;AACA,YAAM4nB,aAAa,GAAG,UAAS3sE,CAAT,EAAYE,CAAZ,EAAe4zC,UAAf,EAA2B;AAC/C,YAAItwC,KAAK,CAACinE,QAAD,CAALjnE,IAAmBinE,QAAQ,IAAI,CAA/BjnE,IAAoCA,KAAK,CAACgnE,SAAD,CAAzChnE,IAAwDgnE,SAAS,GAAG,CAAxE,EAA2E;AACzE;AACD;;AACDzqD,WAAG,CAACiD,IAAJjD;AACA,cAAMkH,SAAS,GAAGxqB,cAAc,CAACq3C,UAAU,CAAC7sB,SAAZ,EAAuB,CAAvB,CAAhC;AACAlH,WAAG,CAACwH,SAAJxH,GAAgBtjB,cAAc,CAACq3C,UAAU,CAACvsB,SAAZ,EAAuBglD,YAAvB,CAA9BxsD;AACAA,WAAG,CAACsgD,OAAJtgD,GAActjB,cAAc,CAACq3C,UAAU,CAACusB,OAAZ,EAAqB,MAArB,CAA5BtgD;AACAA,WAAG,CAACqkC,cAAJrkC,GAAqBtjB,cAAc,CAACq3C,UAAU,CAACsQ,cAAZ,EAA4B,CAA5B,CAAnCrkC;AACAA,WAAG,CAAC2/C,QAAJ3/C,GAAetjB,cAAc,CAACq3C,UAAU,CAAC4rB,QAAZ,EAAsB,OAAtB,CAA7B3/C;AACAA,WAAG,CAACkH,SAAJlH,GAAgBkH,SAAhBlH;AACAA,WAAG,CAACiH,WAAJjH,GAAkBtjB,cAAc,CAACq3C,UAAU,CAAC9sB,WAAZ,EAAyBulD,YAAzB,CAAhCxsD;AACAA,WAAG,CAACokC,WAAJpkC,CAAgBtjB,cAAc,CAACq3C,UAAU,CAAC84B,QAAZ,EAAsB,EAAtB,CAA9B7sD;;AACA,YAAIwqD,SAAS,CAACG,aAAd,EAA6B;AAC3B,gBAAMmC,WAAW,GAAG;AAClBtoD,kBAAM,EAAEimD,SAAS,GAAG5oE,IAAI,CAACkrE,KAAjBtC,GAAyB,CADf;AAElBnmD,sBAAU,EAAEyvB,UAAU,CAACzvB,UAFL;AAGlBC,oBAAQ,EAAEwvB,UAAU,CAACxvB,QAHH;AAIlBc,uBAAW,EAAE6B;AAJK,WAApB;AAMA,gBAAMmsB,OAAO,GAAGg5B,SAAS,CAACx1C,KAAVw1C,CAAgBpsE,CAAhBosE,EAAmB3B,QAAQ,GAAG,CAA9B2B,CAAhB;AACA,gBAAM/4B,OAAO,GAAGnzC,CAAC,GAAGusE,YAApB;AACAxoD,yBAAe,CAAClE,GAAD,EAAM8sD,WAAN,EAAmBz5B,OAAnB,EAA4BC,OAA5B,EAAqCk3B,SAAS,CAACI,eAAVJ,IAA6BE,QAAlE,CAAfxmD;AATF,eAUO;AACL,gBAAM8oD,OAAO,GAAG7sE,CAAC,GAAG0B,IAAI,CAACqC,GAALrC,CAAS,CAACmjD,QAAQ,GAAGylB,SAAZ,IAAyB,CAAlC5oE,EAAqC,CAArCA,CAApB;AACA,gBAAMorE,QAAQ,GAAGZ,SAAS,CAACv1C,UAAVu1C,CAAqBpsE,CAArBosE,EAAwB3B,QAAxB2B,CAAjB;AACA,gBAAMjP,YAAY,GAAG9zC,aAAa,CAACyqB,UAAU,CAACqpB,YAAZ,CAAlC;AACAp9C,aAAG,CAAC4E,SAAJ5E;;AACA,cAAIjkB,MAAM,CAAC8K,MAAP9K,CAAcqhE,YAAdrhE,EAA4B42D,IAA5B52D,CAAiCiE,CAAC,IAAIA,CAAC,KAAK,CAA5CjE,CAAJ,EAAoD;AAClDqsB,8BAAkB,CAACpI,GAAD,EAAM;AACtB/f,eAAC,EAAEgtE,QADmB;AAEtB9sE,eAAC,EAAE6sE,OAFmB;AAGtBn9D,eAAC,EAAE66D,QAHmB;AAItB18D,eAAC,EAAEy8D,SAJmB;AAKtBjmD,oBAAM,EAAE44C;AALc,aAAN,CAAlBh1C;AADF,iBAQO;AACLpI,eAAG,CAACmF,IAAJnF,CAASitD,QAATjtD,EAAmBgtD,OAAnBhtD,EAA4B0qD,QAA5B1qD,EAAsCyqD,SAAtCzqD;AACD;;AACDA,aAAG,CAACoF,IAAJpF;;AACA,cAAIkH,SAAS,KAAK,CAAlB,EAAqB;AACnBlH,eAAG,CAACsF,MAAJtF;AACD;AACF;;AACDA,WAAG,CAACqD,OAAJrD;AA5CF;;AA8CA,YAAMqH,QAAQ,GAAG,UAASpnB,CAAT,EAAYE,CAAZ,EAAe4zC,UAAf,EAA2B;AAC1CttB,kBAAU,CAACzG,GAAD,EAAM+zB,UAAU,CAACrtB,IAAjB,EAAuBzmB,CAAvB,EAA0BE,CAAC,GAAI0qE,UAAU,GAAG,CAA5C,EAAgDW,SAAhD,EAA2D;AACnE7jD,uBAAa,EAAEosB,UAAU,CAACtQ,MADyC;AAEnEhc,mBAAS,EAAE4kD,SAAS,CAAC5kD,SAAV4kD,CAAoBt4B,UAAU,CAACtsB,SAA/B4kD;AAFwD,SAA3D,CAAV5lD;AADF;;AAMA,YAAM6mB,YAAY,GAAG,KAAKA,YAAL,EAArB;;AACA,YAAMyS,WAAW,GAAG,KAAK0rB,mBAAL,EAApB;;AACA,UAAIn+B,YAAJ,EAAkB;AAChBq/B,cAAM,GAAG;AACP1sE,WAAC,EAAEsJ,cAAc,CAACD,KAAD,EAAQ,KAAKG,IAAL,GAAYquC,OAApB,EAA6B,KAAKpuC,KAAL,GAAa4hE,UAAU,CAAC,CAAD,CAApD,CADV;AAEPnrE,WAAC,EAAE,KAAKwlB,GAAL,GAAWmyB,OAAX,GAAqBiI,WAFjB;AAGPh5B,cAAI,EAAE;AAHC,SAAT4lD;AADF,aAMO;AACLA,cAAM,GAAG;AACP1sE,WAAC,EAAE,KAAKwJ,IAAL,GAAYquC,OADR;AAEP33C,WAAC,EAAEoJ,cAAc,CAACD,KAAD,EAAQ,KAAKqc,GAAL,GAAWo6B,WAAX,GAAyBjI,OAAjC,EAA0C,KAAKlyB,MAAL,GAAcylD,WAAW,CAAC,CAAD,CAAXA,CAAernD,MAAvE,CAFV;AAGP+C,cAAI,EAAE;AAHC,SAAT4lD;AAKD;;AACDx1C,2BAAqB,CAAC,KAAKnX,GAAN,EAAW2G,IAAI,CAACumD,aAAhB,CAArB/1C;AACA,YAAMtX,UAAU,GAAGgrD,UAAU,GAAG/yB,OAAhC;AACA,WAAKszB,WAAL,CAAiB9jE,OAAjB,CAAyB,CAACysC,UAAD,EAAav2C,CAAb,KAAmB;AAC1CwiB,WAAG,CAACiH,WAAJjH,GAAkB+zB,UAAU,CAAC04B,SAAX14B,IAAwB04B,SAA1CzsD;AACAA,WAAG,CAACwH,SAAJxH,GAAgB+zB,UAAU,CAAC04B,SAAX14B,IAAwB04B,SAAxCzsD;AACA,cAAM0C,SAAS,GAAG1C,GAAG,CAAC2C,WAAJ3C,CAAgB+zB,UAAU,CAACrtB,IAA3B1G,EAAiC4C,KAAnD;AACA,cAAM6E,SAAS,GAAG4kD,SAAS,CAAC5kD,SAAV4kD,CAAoBt4B,UAAU,CAACtsB,SAAXssB,KAAyBA,UAAU,CAACtsB,SAAXssB,GAAuBy2B,SAAS,CAAC/iD,SAA1DssB,CAApBs4B,CAAlB;AACA,cAAMzpD,KAAK,GAAG8nD,QAAQ,GAAGgC,YAAXhC,GAA0BhoD,SAAxC;AACA,YAAIziB,CAAC,GAAG0sE,MAAM,CAAC1sE,CAAf;AACA,YAAIE,CAAC,GAAGwsE,MAAM,CAACxsE,CAAf;AACAksE,iBAAS,CAACz1C,QAAVy1C,CAAmB,KAAKzpD,KAAxBypD;;AACA,YAAI/+B,YAAJ,EAAkB;AAChB,cAAI9vC,CAAC,GAAG,CAAJA,IAASyC,CAAC,GAAG2iB,KAAJ3iB,GAAY63C,OAAZ73C,GAAsB,KAAKyJ,KAAxC,EAA+C;AAC7CvJ,aAAC,GAAGwsE,MAAM,CAACxsE,CAAPwsE,IAAY9sD,UAAhB1f;AACAwsE,kBAAM,CAAC5lD,IAAP4lD;AACA1sE,aAAC,GAAG0sE,MAAM,CAAC1sE,CAAP0sE,GAAWpjE,cAAc,CAACD,KAAD,EAAQ,KAAKG,IAAL,GAAYquC,OAApB,EAA6B,KAAKpuC,KAAL,GAAa4hE,UAAU,CAACqB,MAAM,CAAC5lD,IAAR,CAApD,CAA7B9mB;AACD;AALH,eAMO,IAAIzC,CAAC,GAAG,CAAJA,IAAS2C,CAAC,GAAG0f,UAAJ1f,GAAiB,KAAKylB,MAAnC,EAA2C;AAChD3lB,WAAC,GAAG0sE,MAAM,CAAC1sE,CAAP0sE,GAAW1sE,CAAC,GAAGorE,WAAW,CAACsB,MAAM,CAAC5lD,IAAR,CAAXskD,CAAyBzoD,KAA7B3iB,GAAqC63C,OAApD73C;AACA0sE,gBAAM,CAAC5lD,IAAP4lD;AACAxsE,WAAC,GAAGwsE,MAAM,CAACxsE,CAAPwsE,GAAWpjE,cAAc,CAACD,KAAD,EAAQ,KAAKqc,GAAL,GAAWo6B,WAAX,GAAyBjI,OAAjC,EAA0C,KAAKlyB,MAAL,GAAcylD,WAAW,CAACsB,MAAM,CAAC5lD,IAAR,CAAXskD,CAAyBrnD,MAAjF,CAA7B7jB;AACD;;AACD,cAAMgtE,KAAK,GAAGd,SAAS,CAACpsE,CAAVosE,CAAYpsE,CAAZosE,CAAd;AACAO,qBAAa,CAACO,KAAD,EAAQhtE,CAAR,EAAW4zC,UAAX,CAAb64B;AACA3sE,SAAC,GAAGuJ,MAAM,CAACie,SAAD,EAAYxnB,CAAC,GAAGyqE,QAAJzqE,GAAeysE,YAA3B,EAAyCp/B,YAAY,GAAGrtC,CAAC,GAAG2iB,KAAP,GAAe,KAAKlZ,KAAzE,EAAgFid,IAAI,CAAChd,GAArF,CAAV1J;AACAonB,gBAAQ,CAACglD,SAAS,CAACpsE,CAAVosE,CAAYpsE,CAAZosE,CAAD,EAAiBlsE,CAAjB,EAAoB4zC,UAApB,CAAR1sB;;AACA,YAAIimB,YAAJ,EAAkB;AAChBq/B,gBAAM,CAAC1sE,CAAP0sE,IAAY/pD,KAAK,GAAGk1B,OAApB60B;AADF,eAEO;AACLA,gBAAM,CAACxsE,CAAPwsE,IAAY9sD,UAAZ8sD;AACD;AA5BH;AA8BAl1C,0BAAoB,CAAC,KAAKzX,GAAN,EAAW2G,IAAI,CAACumD,aAAhB,CAApBz1C;AACD;;AACD+sB,aAAS,GAAG;AACV,YAAM79B,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM8gD,SAAS,GAAGl5B,IAAI,CAAC+pB,KAAvB;AACA,YAAM08B,SAAS,GAAG5jD,MAAM,CAACq2B,SAAS,CAACngC,IAAX,CAAxB;AACA,YAAM2tD,YAAY,GAAG9jD,SAAS,CAACs2B,SAAS,CAAC/H,OAAX,CAA9B;;AACA,UAAI,CAAC+H,SAAS,CAAC/J,OAAf,EAAwB;AACtB;AACD;;AACD,YAAMu2B,SAAS,GAAGn1C,aAAa,CAACvQ,IAAI,CAAChd,GAAN,EAAW,KAAKF,IAAhB,EAAsB,KAAKmZ,KAA3B,CAA/B;AACA,YAAM5C,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAMo7B,QAAQ,GAAGyE,SAAS,CAACzE,QAA3B;AACA,YAAMsxB,YAAY,GAAGU,SAAS,CAAC7rE,IAAV6rE,GAAiB,CAAtC;AACA,YAAME,0BAA0B,GAAGD,YAAY,CAAC1nD,GAAb0nD,GAAmBX,YAAtD;AACA,UAAIvsE,CAAJ;AACA,UAAIsJ,IAAI,GAAG,KAAKA,IAAhB;AACA,UAAI2d,QAAQ,GAAG,KAAKxE,KAApB;;AACA,UAAI,KAAK0qB,YAAL,EAAJ,EAAyB;AACvBlmB,gBAAQ,GAAGvlB,IAAI,CAACqC,GAALrC,CAAS,GAAG,KAAKypE,UAAjBzpE,CAAXulB;AACAjnB,SAAC,GAAG,KAAKwlB,GAAL,GAAW2nD,0BAAfntE;AACAsJ,YAAI,GAAGF,cAAc,CAACod,IAAI,CAACrd,KAAN,EAAaG,IAAb,EAAmB,KAAKC,KAAL,GAAa0d,QAAhC,CAArB3d;AAHF,aAIO;AACL,cAAMoqB,SAAS,GAAG,KAAKw3C,WAAL,CAAiB5uC,MAAjB,CAAwB,CAACC,GAAD,EAAMn7B,IAAN,KAAeM,IAAI,CAACqC,GAALrC,CAAS66B,GAAT76B,EAAcN,IAAI,CAACyiB,MAAnBniB,CAAvC,EAAmE,CAAnE,CAAlB;AACA1B,SAAC,GAAGmtE,0BAA0B,GAAG/jE,cAAc,CAACod,IAAI,CAACrd,KAAN,EAAa,KAAKqc,GAAlB,EAAuB,KAAKC,MAAL,GAAciO,SAAd,GAA0BlN,IAAI,CAACsgB,MAALtgB,CAAYmxB,OAAtC,GAAgD,KAAK2zB,mBAAL,EAAvE,CAA/CtrE;AACD;;AACD,YAAMF,CAAC,GAAGsJ,cAAc,CAAC6xC,QAAD,EAAW3xC,IAAX,EAAiBA,IAAI,GAAG2d,QAAxB,CAAxB;;AACApH,SAAG,CAACyH,SAAJzH,GAAgBqsD,SAAS,CAAC5kD,SAAV4kD,CAAoBhjE,kBAAkB,CAAC+xC,QAAD,CAAtCixB,CAAhBrsD;AACAA,SAAG,CAAC0H,YAAJ1H,GAAmB,QAAnBA;AACAA,SAAG,CAACiH,WAAJjH,GAAkB6/B,SAAS,CAACviC,KAA5B0C;AACAA,SAAG,CAACwH,SAAJxH,GAAgB6/B,SAAS,CAACviC,KAA1B0C;AACAA,SAAG,CAACN,IAAJM,GAAWotD,SAAS,CAAC3qD,MAArBzC;AACAyG,gBAAU,CAACzG,GAAD,EAAM6/B,SAAS,CAACn5B,IAAhB,EAAsBzmB,CAAtB,EAAyBE,CAAzB,EAA4BitE,SAA5B,CAAV3mD;AACD;;AACDglD,uBAAmB,GAAG;AACpB,YAAM5rB,SAAS,GAAG,KAAK9gD,OAAL,CAAa2xC,KAA/B;AACA,YAAM08B,SAAS,GAAG5jD,MAAM,CAACq2B,SAAS,CAACngC,IAAX,CAAxB;AACA,YAAM2tD,YAAY,GAAG9jD,SAAS,CAACs2B,SAAS,CAAC/H,OAAX,CAA9B;AACA,aAAO+H,SAAS,CAAC/J,OAAV+J,GAAoButB,SAAS,CAACvtD,UAAVutD,GAAuBC,YAAY,CAACrpD,MAAxD67B,GAAiE,CAAxE;AACD;;AACD0tB,oBAAgB,CAACttE,CAAD,EAAIE,CAAJ,EAAO;AACrB,UAAI3C,CAAJ,EAAOgwE,MAAP,EAAeC,EAAf;;AACA,UAAIvnE,UAAU,CAACjG,CAAD,EAAI,KAAKwJ,IAAT,EAAe,KAAKC,KAApB,CAAVxD,IACCA,UAAU,CAAC/F,CAAD,EAAI,KAAKwlB,GAAT,EAAc,KAAKC,MAAnB,CADf,EAC2C;AACzC6nD,UAAE,GAAG,KAAKxC,cAAVwC;;AACA,aAAKjwE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGiwE,EAAE,CAAC9vE,MAAnB,EAA2B,EAAEH,CAA7B,EAAgC;AAC9BgwE,gBAAM,GAAGC,EAAE,CAACjwE,CAAD,CAAXgwE;;AACA,cAAItnE,UAAU,CAACjG,CAAD,EAAIutE,MAAM,CAAC/jE,IAAX,EAAiB+jE,MAAM,CAAC/jE,IAAP+jE,GAAcA,MAAM,CAAC5qD,KAAtC,CAAV1c,IACCA,UAAU,CAAC/F,CAAD,EAAIqtE,MAAM,CAAC7nD,GAAX,EAAgB6nD,MAAM,CAAC7nD,GAAP6nD,GAAaA,MAAM,CAACxpD,MAApC,CADf,EAC4D;AAC1D,mBAAO,KAAKonD,WAAL,CAAiB5tE,CAAjB,CAAP;AACD;AACF;AACF;;AACD,aAAO,IAAP;AACD;;AACDkwE,eAAW,CAAC/rE,CAAD,EAAI;AACb,YAAMglB,IAAI,GAAG,KAAK5nB,OAAlB;;AACA,UAAI,CAAC4uE,UAAU,CAAChsE,CAAC,CAAC7F,IAAH,EAAS6qB,IAAT,CAAf,EAA+B;AAC7B;AACD;;AACD,YAAMinD,WAAW,GAAG,KAAKL,gBAAL,CAAsB5rE,CAAC,CAAC1B,CAAxB,EAA2B0B,CAAC,CAACxB,CAA7B,CAApB;;AACA,UAAIwB,CAAC,CAAC7F,IAAF6F,KAAW,WAAXA,IAA0BA,CAAC,CAAC7F,IAAF6F,KAAW,UAAzC,EAAqD;AACnD,cAAMjC,QAAQ,GAAG,KAAKwrE,YAAtB;AACA,cAAM2C,QAAQ,GAAG/C,UAAU,CAACprE,QAAD,EAAWkuE,WAAX,CAA3B;;AACA,YAAIluE,QAAQ,IAAI,CAACmuE,QAAjB,EAA2B;AACzB7wE,kBAAQ,CAAC2pB,IAAI,CAACmnD,OAAN,EAAe,CAACnsE,CAAD,EAAIjC,QAAJ,EAAc,IAAd,CAAf,EAAoC,IAApC,CAAR1C;AACD;;AACD,aAAKkuE,YAAL,GAAoB0C,WAApB;;AACA,YAAIA,WAAW,IAAI,CAACC,QAApB,EAA8B;AAC5B7wE,kBAAQ,CAAC2pB,IAAI,CAAClG,OAAN,EAAe,CAAC9e,CAAD,EAAIisE,WAAJ,EAAiB,IAAjB,CAAf,EAAuC,IAAvC,CAAR5wE;AACD;AATH,aAUO,IAAI4wE,WAAJ,EAAiB;AACtB5wE,gBAAQ,CAAC2pB,IAAI,CAACjG,OAAN,EAAe,CAAC/e,CAAD,EAAIisE,WAAJ,EAAiB,IAAjB,CAAf,EAAuC,IAAvC,CAAR5wE;AACD;AACF;;AA9W0B;;AAgX7B,WAAS2wE,UAAT,CAAoB7xE,IAApB,EAA0B6qB,IAA1B,EAAgC;AAC9B,QAAI,CAAC7qB,IAAI,KAAK,WAATA,IAAwBA,IAAI,KAAK,UAAlC,MAAkD6qB,IAAI,CAAClG,OAALkG,IAAgBA,IAAI,CAACmnD,OAAvE,CAAJ,EAAqF;AACnF,aAAO,IAAP;AACD;;AACD,QAAInnD,IAAI,CAACjG,OAALiG,KAAiB7qB,IAAI,KAAK,OAATA,IAAoBA,IAAI,KAAK,SAA9C6qB,CAAJ,EAA8D;AAC5D,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AACD,MAAIonD,aAAa,GAAG;AAClBtyE,MAAE,EAAE,QADc;AAElBuyE,YAAQ,EAAEjD,MAFQ;;AAGlBvlE,SAAK,CAAC6Z,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAC3B,YAAM80C,MAAM,GAAGx0B,KAAK,CAACw0B,MAANx0B,GAAe,IAAI0rD,MAAJ,CAAW;AAAC/qD,WAAG,EAAEX,KAAK,CAACW,GAAZ;AAAiBjhB,eAAjB;AAA0BsgB;AAA1B,OAAX,CAA9B;AACAurC,aAAO,CAACvrB,SAARurB,CAAkBvrC,KAAlBurC,EAAyB/W,MAAzB+W,EAAiC7rD,OAAjC6rD;AACAA,aAAO,CAACwC,MAARxC,CAAevrC,KAAfurC,EAAsB/W,MAAtB+W;AANgB;;AAQlB1xB,QAAI,CAAC7Z,KAAD,EAAQ;AACVurC,aAAO,CAACyC,SAARzC,CAAkBvrC,KAAlBurC,EAAyBvrC,KAAK,CAACw0B,MAA/B+W;AACA,aAAOvrC,KAAK,CAACw0B,MAAb;AAVgB;;AAYlByJ,gBAAY,CAACj+B,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAClC,YAAM80C,MAAM,GAAGx0B,KAAK,CAACw0B,MAArB;AACA+W,aAAO,CAACvrB,SAARurB,CAAkBvrC,KAAlBurC,EAAyB/W,MAAzB+W,EAAiC7rD,OAAjC6rD;AACA/W,YAAM,CAAC90C,OAAP80C,GAAiB90C,OAAjB80C;AAfgB;;AAiBlB6K,eAAW,CAACr/B,KAAD,EAAQ;AACjB,YAAMw0B,MAAM,GAAGx0B,KAAK,CAACw0B,MAArB;AACAA,YAAM,CAAC03B,WAAP13B;AACAA,YAAM,CAACu4B,cAAPv4B;AApBgB;;AAsBlBo6B,cAAU,CAAC5uD,KAAD,EAAQniB,IAAR,EAAc;AACtB,UAAI,CAACA,IAAI,CAACo/D,MAAV,EAAkB;AAChBj9C,aAAK,CAACw0B,MAANx0B,CAAaquD,WAAbruD,CAAyBniB,IAAI,CAACq/B,KAA9Bld;AACD;AAzBe;;AA2BlB0C,YAAQ,EAAE;AACR+zB,aAAO,EAAE,IADD;AAERsF,cAAQ,EAAE,KAFF;AAGR9xC,WAAK,EAAE,QAHC;AAIRq3C,cAAQ,EAAE,IAJF;AAKRpjD,aAAO,EAAE,KALD;AAMRggB,YAAM,EAAE,IANA;;AAORmD,aAAO,CAAC/e,CAAD,EAAIoyC,UAAJ,EAAgBF,MAAhB,EAAwB;AAC7B,cAAM11C,KAAK,GAAG41C,UAAU,CAAC71C,YAAzB;AACA,cAAMgwE,EAAE,GAAGr6B,MAAM,CAACx0B,KAAlB;;AACA,YAAI6uD,EAAE,CAAC/7B,gBAAH+7B,CAAoB/vE,KAApB+vE,CAAJ,EAAgC;AAC9BA,YAAE,CAACjvC,IAAHivC,CAAQ/vE,KAAR+vE;AACAn6B,oBAAU,CAACtQ,MAAXsQ,GAAoB,IAApBA;AAFF,eAGO;AACLm6B,YAAE,CAACpvC,IAAHovC,CAAQ/vE,KAAR+vE;AACAn6B,oBAAU,CAACtQ,MAAXsQ,GAAoB,KAApBA;AACD;AAhBK;;AAkBRtzB,aAAO,EAAE,IAlBD;AAmBRqtD,aAAO,EAAE,IAnBD;AAoBR7mC,YAAM,EAAE;AACN3pB,aAAK,EAAG0C,GAAD,IAASA,GAAG,CAACX,KAAJW,CAAUjhB,OAAVihB,CAAkB1C,KAD5B;AAENotD,gBAAQ,EAAE,EAFJ;AAGN5yB,eAAO,EAAE,EAHH;;AAINhE,sBAAc,CAACz0B,KAAD,EAAQ;AACpB,gBAAMH,QAAQ,GAAGG,KAAK,CAACiD,IAANjD,CAAWH,QAA5B;AACA,gBAAM;AAAC+nB,kBAAM,EAAE;AAAC0jC,2BAAD;AAAgBrmD,wBAAhB;AAA4BmD,uBAA5B;AAAuCnK;AAAvC;AAAT,cAA0D+B,KAAK,CAACw0B,MAANx0B,CAAatgB,OAA7E;AACA,iBAAOsgB,KAAK,CAACshB,sBAANthB,GAA+B/gB,GAA/B+gB,CAAoCvV,IAAD,IAAU;AAClD,kBAAM8V,KAAK,GAAG9V,IAAI,CAACq4B,UAALr4B,CAAgBqoB,QAAhBroB,CAAyB6gE,aAAa,GAAG,CAAH,GAAO/qE,SAA7CkK,CAAd;AACA,kBAAMub,WAAW,GAAGkE,SAAS,CAAC3J,KAAK,CAACyF,WAAP,CAA7B;AACA,mBAAO;AACLqB,kBAAI,EAAExH,QAAQ,CAACpV,IAAI,CAAC3L,KAAN,CAAR+gB,CAAqBipB,KADtB;AAEL3gB,uBAAS,EAAE5H,KAAK,CAACZ,eAFZ;AAGLytD,uBAAS,EAAEnvD,KAHN;AAILmmB,oBAAM,EAAE,CAAC35B,IAAI,CAACk1B,OAJT;AAKLshC,qBAAO,EAAE1gD,KAAK,CAAC2a,cALV;AAMLsyC,sBAAQ,EAAEjtD,KAAK,CAAC4a,UANX;AAOL6pB,4BAAc,EAAEzkC,KAAK,CAAC6a,gBAPjB;AAQLklC,sBAAQ,EAAE//C,KAAK,CAAC8a,eARX;AASLxT,uBAAS,EAAE,CAAC7B,WAAW,CAACzC,KAAZyC,GAAoBA,WAAW,CAACrB,MAAjC,IAA2C,CATjD;AAULiD,yBAAW,EAAErH,KAAK,CAACX,WAVd;AAWLqF,wBAAU,EAAEA,UAAU,IAAI1E,KAAK,CAAC0E,UAX3B;AAYLC,sBAAQ,EAAE3E,KAAK,CAAC2E,QAZX;AAaLkD,uBAAS,EAAEA,SAAS,IAAI7H,KAAK,CAAC6H,SAbzB;AAcL21C,0BAAY,EAAE,CAdT;AAeLl/D,0BAAY,EAAE4L,IAAI,CAAC3L;AAfd,aAAP;AAHK,aAoBJ,IApBIkhB,CAAP;AAqBD;;AA5BK,OApBA;AAkDRqxB,WAAK,EAAE;AACLpzB,aAAK,EAAG0C,GAAD,IAASA,GAAG,CAACX,KAAJW,CAAUjhB,OAAVihB,CAAkB1C,KAD7B;AAELw4B,eAAO,EAAE,KAFJ;AAGLsF,gBAAQ,EAAE,QAHL;AAIL10B,YAAI,EAAE;AAJD;AAlDC,KA3BQ;AAoFlBjI,eAAW,EAAE;AACXuD,iBAAW,EAAGV,IAAD,IAAU,CAACA,IAAI,CAACW,UAALX,CAAgB,IAAhBA,CADb;AAEX2lB,YAAM,EAAE;AACNjlB,mBAAW,EAAGV,IAAD,IAAU,CAAC,CAAC,gBAAD,EAAmB,QAAnB,EAA6B,MAA7B,EAAqCqK,QAArC,CAA8CrK,IAA9C;AADlB;AAFG;AApFK,GAApB;;AA4FA,QAAM6sD,KAAN,SAAoB93B,OAApB,CAA4B;AAC1Bp5B,eAAW,CAACkiB,MAAD,EAAS;AAClB;AACA,WAAK9f,KAAL,GAAa8f,MAAM,CAAC9f,KAApB;AACA,WAAKtgB,OAAL,GAAeogC,MAAM,CAACpgC,OAAtB;AACA,WAAKihB,GAAL,GAAWmf,MAAM,CAACnf,GAAlB;AACA,WAAKouD,QAAL,GAAgBxuE,SAAhB;AACA,WAAK+lB,GAAL,GAAW/lB,SAAX;AACA,WAAKgmB,MAAL,GAAchmB,SAAd;AACA,WAAK6J,IAAL,GAAY7J,SAAZ;AACA,WAAK8J,KAAL,GAAa9J,SAAb;AACA,WAAKgjB,KAAL,GAAahjB,SAAb;AACA,WAAKokB,MAAL,GAAcpkB,SAAd;AACA,WAAKw7C,QAAL,GAAgBx7C,SAAhB;AACA,WAAK2d,MAAL,GAAc3d,SAAd;AACA,WAAK+gD,QAAL,GAAgB/gD,SAAhB;AACD;;AACDq+B,UAAM,CAAC7W,QAAD,EAAWyM,SAAX,EAAsB;AAC1B,YAAMlN,IAAI,GAAG,KAAK5nB,OAAlB;AACA,WAAK0K,IAAL,GAAY,CAAZ;AACA,WAAKkc,GAAL,GAAW,CAAX;;AACA,UAAI,CAACgB,IAAI,CAACmvB,OAAV,EAAmB;AACjB,aAAKlzB,KAAL,GAAa,KAAKoB,MAAL,GAAc,KAAKta,KAAL,GAAa,KAAKkc,MAAL,GAAc,CAAtD;AACA;AACD;;AACD,WAAKhD,KAAL,GAAa,KAAKlZ,KAAL,GAAa0d,QAA1B;AACA,WAAKpD,MAAL,GAAc,KAAK4B,MAAL,GAAciO,SAA5B;AACA,YAAMyvB,SAAS,GAAG1nD,OAAO,CAAC+qB,IAAI,CAACD,IAAN,CAAP9qB,GAAqB+qB,IAAI,CAACD,IAALC,CAAUhpB,MAA/B/B,GAAwC,CAA1D;AACA,WAAKwyE,QAAL,GAAgB7kD,SAAS,CAAC5C,IAAI,CAACmxB,OAAN,CAAzB;;AACA,YAAMu2B,QAAQ,GAAG/qB,SAAS,GAAG95B,MAAM,CAAC7C,IAAI,CAACjH,IAAN,CAAN8J,CAAkB3J,UAA9ByjC,GAA2C,KAAK8qB,QAAL,CAAcpqD,MAA1E;;AACA,UAAI,KAAKspB,YAAL,EAAJ,EAAyB;AACvB,aAAKtpB,MAAL,GAAcqqD,QAAd;AADF,aAEO;AACL,aAAKzrD,KAAL,GAAayrD,QAAb;AACD;AACF;;AACD/gC,gBAAY,GAAG;AACb,YAAM5a,GAAG,GAAG,KAAK3zB,OAAL,CAAaq8C,QAAzB;AACA,aAAO1oB,GAAG,KAAK,KAARA,IAAiBA,GAAG,KAAK,QAAhC;AACD;;AACD47C,aAAS,CAACj+B,MAAD,EAAS;AAChB,YAAM;AAAC1qB,WAAD;AAAMlc,YAAN;AAAYmc,cAAZ;AAAoBlc,aAApB;AAA2B3K;AAA3B,UAAsC,IAA5C;AACA,YAAMuK,KAAK,GAAGvK,OAAO,CAACuK,KAAtB;AACA,UAAIib,QAAQ,GAAG,CAAf;AACA,UAAI6C,QAAJ,EAAck0B,MAAd,EAAsBC,MAAtB;;AACA,UAAI,KAAKjO,YAAL,EAAJ,EAAyB;AACvBgO,cAAM,GAAG/xC,cAAc,CAACD,KAAD,EAAQG,IAAR,EAAcC,KAAd,CAAvB4xC;AACAC,cAAM,GAAG51B,GAAG,GAAG0qB,MAAfkL;AACAn0B,gBAAQ,GAAG1d,KAAK,GAAGD,IAAnB2d;AAHF,aAIO;AACL,YAAIroB,OAAO,CAACq8C,QAARr8C,KAAqB,MAAzB,EAAiC;AAC/Bu8C,gBAAM,GAAG7xC,IAAI,GAAG4mC,MAAhBiL;AACAC,gBAAM,GAAGhyC,cAAc,CAACD,KAAD,EAAQsc,MAAR,EAAgBD,GAAhB,CAAvB41B;AACAh3B,kBAAQ,GAAG3iB,EAAE,GAAG,CAAC,GAAjB2iB;AAHF,eAIO;AACL+2B,gBAAM,GAAG5xC,KAAK,GAAG2mC,MAAjBiL;AACAC,gBAAM,GAAGhyC,cAAc,CAACD,KAAD,EAAQqc,GAAR,EAAaC,MAAb,CAAvB21B;AACAh3B,kBAAQ,GAAG3iB,EAAE,GAAG,GAAhB2iB;AACD;;AACD6C,gBAAQ,GAAGxB,MAAM,GAAGD,GAApByB;AACD;;AACD,aAAO;AAACk0B,cAAD;AAASC,cAAT;AAAiBn0B,gBAAjB;AAA2B7C;AAA3B,OAAP;AACD;;AACDuX,QAAI,GAAG;AACL,YAAM9b,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAM2G,IAAI,GAAG,KAAK5nB,OAAlB;;AACA,UAAI,CAAC4nB,IAAI,CAACmvB,OAAV,EAAmB;AACjB;AACD;;AACD,YAAMy4B,QAAQ,GAAG/kD,MAAM,CAAC7C,IAAI,CAACjH,IAAN,CAAvB;AACA,YAAMG,UAAU,GAAG0uD,QAAQ,CAAC1uD,UAA5B;AACA,YAAMwwB,MAAM,GAAGxwB,UAAU,GAAG,CAAbA,GAAiB,KAAKuuD,QAAL,CAAczoD,GAA9C;;AACA,YAAM;AAAC21B,cAAD;AAASC,cAAT;AAAiBn0B,gBAAjB;AAA2B7C;AAA3B,UAAuC,KAAK+pD,SAAL,CAAej+B,MAAf,CAA7C;;AACA5pB,gBAAU,CAACzG,GAAD,EAAM2G,IAAI,CAACD,IAAX,EAAiB,CAAjB,EAAoB,CAApB,EAAuB6nD,QAAvB,EAAiC;AACzCjxD,aAAK,EAAEqJ,IAAI,CAACrJ,KAD6B;AAEzC8J,gBAFyC;AAGzC7C,gBAHyC;AAIzCkD,iBAAS,EAAEpe,kBAAkB,CAACsd,IAAI,CAACrd,KAAN,CAJY;AAKzCoe,oBAAY,EAAE,QAL2B;AAMzCH,mBAAW,EAAE,CAAC+zB,MAAD,EAASC,MAAT;AAN4B,OAAjC,CAAV90B;AAQD;;AAjFyB;;AAmF5B,WAAS+nD,WAAT,CAAqBnvD,KAArB,EAA4BwgC,SAA5B,EAAuC;AACrC,UAAMnP,KAAK,GAAG,IAAIy9B,KAAJ,CAAU;AACtBnuD,SAAG,EAAEX,KAAK,CAACW,GADW;AAEtBjhB,aAAO,EAAE8gD,SAFa;AAGtBxgC;AAHsB,KAAV,CAAd;AAKAurC,WAAO,CAACvrB,SAARurB,CAAkBvrC,KAAlBurC,EAAyBla,KAAzBka,EAAgC/K,SAAhC+K;AACAA,WAAO,CAACwC,MAARxC,CAAevrC,KAAfurC,EAAsBla,KAAtBka;AACAvrC,SAAK,CAACovD,UAANpvD,GAAmBqxB,KAAnBrxB;AACD;;AACD,MAAIqvD,YAAY,GAAG;AACjBjzE,MAAE,EAAE,OADa;AAEjBuyE,YAAQ,EAAEG,KAFO;;AAGjB3oE,SAAK,CAAC6Z,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAC3ByvE,iBAAW,CAACnvD,KAAD,EAAQtgB,OAAR,CAAXyvE;AAJe;;AAMjBt1C,QAAI,CAAC7Z,KAAD,EAAQ;AACV,YAAMovD,UAAU,GAAGpvD,KAAK,CAACovD,UAAzB;AACA7jB,aAAO,CAACyC,SAARzC,CAAkBvrC,KAAlBurC,EAAyB6jB,UAAzB7jB;AACA,aAAOvrC,KAAK,CAACovD,UAAb;AATe;;AAWjBnxB,gBAAY,CAACj+B,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAClC,YAAM2xC,KAAK,GAAGrxB,KAAK,CAACovD,UAApB;AACA7jB,aAAO,CAACvrB,SAARurB,CAAkBvrC,KAAlBurC,EAAyBla,KAAzBka,EAAgC7rD,OAAhC6rD;AACAla,WAAK,CAAC3xC,OAAN2xC,GAAgB3xC,OAAhB2xC;AAde;;AAgBjB3uB,YAAQ,EAAE;AACRzY,WAAK,EAAE,QADC;AAERwsC,aAAO,EAAE,KAFD;AAGRp2B,UAAI,EAAE;AACJnC,cAAM,EAAE;AADJ,OAHE;AAMRojC,cAAQ,EAAE,IANF;AAOR7I,aAAO,EAAE,EAPD;AAQRsD,cAAQ,EAAE,KARF;AASR10B,UAAI,EAAE,EATE;AAURnJ,YAAM,EAAE;AAVA,KAhBO;AA4BjBo5B,iBAAa,EAAE;AACbr5B,WAAK,EAAE;AADM,KA5BE;AA+BjBmB,eAAW,EAAE;AACXuD,iBAAW,EAAE,IADF;AAEXE,gBAAU,EAAE;AAFD;AA/BI,GAAnB;AAqCA,QAAM5jB,GAAG,GAAG,IAAIqwE,OAAJ,EAAZ;AACA,MAAIC,eAAe,GAAG;AACpBnzE,MAAE,EAAE,UADgB;;AAEpB+J,SAAK,CAAC6Z,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAC3B,YAAM2xC,KAAK,GAAG,IAAIy9B,KAAJ,CAAU;AACtBnuD,WAAG,EAAEX,KAAK,CAACW,GADW;AAEtBjhB,eAFsB;AAGtBsgB;AAHsB,OAAV,CAAd;AAKAurC,aAAO,CAACvrB,SAARurB,CAAkBvrC,KAAlBurC,EAAyBla,KAAzBka,EAAgC7rD,OAAhC6rD;AACAA,aAAO,CAACwC,MAARxC,CAAevrC,KAAfurC,EAAsBla,KAAtBka;AACAtsD,SAAG,CAAC0J,GAAJ1J,CAAQ+gB,KAAR/gB,EAAeoyC,KAAfpyC;AAVkB;;AAYpB46B,QAAI,CAAC7Z,KAAD,EAAQ;AACVurC,aAAO,CAACyC,SAARzC,CAAkBvrC,KAAlBurC,EAAyBtsD,GAAG,CAAC6iB,GAAJ7iB,CAAQ+gB,KAAR/gB,CAAzBssD;AACAtsD,SAAG,CAACivB,MAAJjvB,CAAW+gB,KAAX/gB;AAdkB;;AAgBpBg/C,gBAAY,CAACj+B,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAClC,YAAM2xC,KAAK,GAAGpyC,GAAG,CAAC6iB,GAAJ7iB,CAAQ+gB,KAAR/gB,CAAd;AACAssD,aAAO,CAACvrB,SAARurB,CAAkBvrC,KAAlBurC,EAAyBla,KAAzBka,EAAgC7rD,OAAhC6rD;AACAla,WAAK,CAAC3xC,OAAN2xC,GAAgB3xC,OAAhB2xC;AAnBkB;;AAqBpB3uB,YAAQ,EAAE;AACRzY,WAAK,EAAE,QADC;AAERwsC,aAAO,EAAE,KAFD;AAGRp2B,UAAI,EAAE;AACJnC,cAAM,EAAE;AADJ,OAHE;AAMRojC,cAAQ,EAAE,IANF;AAOR7I,aAAO,EAAE,CAPD;AAQRsD,cAAQ,EAAE,KARF;AASR10B,UAAI,EAAE,EATE;AAURnJ,YAAM,EAAE;AAVA,KArBU;AAiCpBo5B,iBAAa,EAAE;AACbr5B,WAAK,EAAE;AADM,KAjCK;AAoCpBmB,eAAW,EAAE;AACXuD,iBAAW,EAAE,IADF;AAEXE,gBAAU,EAAE;AAFD;AApCO,GAAtB;AA0CA,QAAM2sD,WAAW,GAAG;AAClBC,WAAO,CAAC/mE,KAAD,EAAQ;AACb,UAAI,CAACA,KAAK,CAACpK,MAAX,EAAmB;AACjB,eAAO,KAAP;AACD;;AACD,UAAIH,CAAJ,EAAOC,GAAP;AACA,UAAIwC,CAAC,GAAG,CAAR;AACA,UAAIE,CAAC,GAAG,CAAR;AACA,UAAI+J,KAAK,GAAG,CAAZ;;AACA,WAAK1M,CAAC,GAAG,CAAJA,EAAOC,GAAG,GAAGsK,KAAK,CAACpK,MAAxB,EAAgCH,CAAC,GAAGC,GAApC,EAAyC,EAAED,CAA3C,EAA8C;AAC5C,cAAM40B,EAAE,GAAGrqB,KAAK,CAACvK,CAAD,CAALuK,CAASmqB,OAApB;;AACA,YAAIE,EAAE,IAAIA,EAAE,CAACqkB,QAAHrkB,EAAV,EAAyB;AACvB,gBAAMM,GAAG,GAAGN,EAAE,CAACkkB,eAAHlkB,EAAZ;AACAnyB,WAAC,IAAIyyB,GAAG,CAACzyB,CAATA;AACAE,WAAC,IAAIuyB,GAAG,CAACvyB,CAATA;AACA,YAAE+J,KAAF;AACD;AACF;;AACD,aAAO;AACLjK,SAAC,EAAEA,CAAC,GAAGiK,KADF;AAEL/J,SAAC,EAAEA,CAAC,GAAG+J;AAFF,OAAP;AAlBgB;;AAuBlBggD,WAAO,CAACniD,KAAD,EAAQgnE,aAAR,EAAuB;AAC5B,UAAI,CAAChnE,KAAK,CAACpK,MAAX,EAAmB;AACjB,eAAO,KAAP;AACD;;AACD,UAAIsC,CAAC,GAAG8uE,aAAa,CAAC9uE,CAAtB;AACA,UAAIE,CAAC,GAAG4uE,aAAa,CAAC5uE,CAAtB;AACA,UAAIspD,WAAW,GAAGntD,MAAM,CAAC2F,iBAAzB;AACA,UAAIzE,CAAJ,EAAOC,GAAP,EAAYuxE,cAAZ;;AACA,WAAKxxE,CAAC,GAAG,CAAJA,EAAOC,GAAG,GAAGsK,KAAK,CAACpK,MAAxB,EAAgCH,CAAC,GAAGC,GAApC,EAAyC,EAAED,CAA3C,EAA8C;AAC5C,cAAM40B,EAAE,GAAGrqB,KAAK,CAACvK,CAAD,CAALuK,CAASmqB,OAApB;;AACA,YAAIE,EAAE,IAAIA,EAAE,CAACqkB,QAAHrkB,EAAV,EAAyB;AACvB,gBAAM2c,MAAM,GAAG3c,EAAE,CAACs3B,cAAHt3B,EAAf;AACA,gBAAMxkB,CAAC,GAAG1I,qBAAqB,CAAC6pE,aAAD,EAAgBhgC,MAAhB,CAA/B;;AACA,cAAInhC,CAAC,GAAG67C,WAAR,EAAqB;AACnBA,uBAAW,GAAG77C,CAAd67C;AACAulB,0BAAc,GAAG58C,EAAjB48C;AACD;AACF;AACF;;AACD,UAAIA,cAAJ,EAAoB;AAClB,cAAMC,EAAE,GAAGD,cAAc,CAAC14B,eAAf04B,EAAX;AACA/uE,SAAC,GAAGgvE,EAAE,CAAChvE,CAAPA;AACAE,SAAC,GAAG8uE,EAAE,CAAC9uE,CAAPA;AACD;;AACD,aAAO;AACLF,SADK;AAELE;AAFK,OAAP;AAID;;AAnDiB,GAApB;;AAqDA,WAAS+uE,YAAT,CAAsB1nE,IAAtB,EAA4B2nE,MAA5B,EAAoC;AAClC,QAAIA,MAAJ,EAAY;AACV,UAAIvzE,OAAO,CAACuzE,MAAD,CAAX,EAAqB;AACnBtzE,aAAK,CAACG,SAANH,CAAgBgF,IAAhBhF,CAAqBuB,KAArBvB,CAA2B2L,IAA3B3L,EAAiCszE,MAAjCtzE;AADF,aAEO;AACL2L,YAAI,CAAC3G,IAAL2G,CAAU2nE,MAAV3nE;AACD;AACF;;AACD,WAAOA,IAAP;AACD;;AACD,WAAS4nE,aAAT,CAAuBruE,GAAvB,EAA4B;AAC1B,QAAI,CAAC,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,YAAYsuE,MAA3C,KAAsDtuE,GAAG,CAAClC,OAAJkC,CAAY,IAAZA,IAAoB,CAAC,CAA/E,EAAkF;AAChF,aAAOA,GAAG,CAACL,KAAJK,CAAU,IAAVA,CAAP;AACD;;AACD,WAAOA,GAAP;AACD;;AACD,WAASuuE,iBAAT,CAA2BjwD,KAA3B,EAAkC7d,IAAlC,EAAwC;AACtC,UAAM;AAAC0wB,aAAD;AAAUh0B,kBAAV;AAAwBC;AAAxB,QAAiCqD,IAAvC;AACA,UAAM2gC,UAAU,GAAG9iB,KAAK,CAACsmB,cAANtmB,CAAqBnhB,YAArBmhB,EAAmC8iB,UAAtD;AACA,UAAM;AAACgG,WAAD;AAAQxsC;AAAR,QAAiBwmC,UAAU,CAAC+F,gBAAX/F,CAA4BhkC,KAA5BgkC,CAAvB;AACA,WAAO;AACL9iB,WADK;AAEL8oB,WAFK;AAGL5Z,YAAM,EAAE4T,UAAU,CAACmF,SAAXnF,CAAqBhkC,KAArBgkC,CAHH;AAILc,SAAG,EAAE5jB,KAAK,CAACiD,IAANjD,CAAWH,QAAXG,CAAoBnhB,YAApBmhB,EAAkCiD,IAAlCjD,CAAuClhB,KAAvCkhB,CAJA;AAKL80B,oBAAc,EAAEx4C,KALX;AAMLmnC,aAAO,EAAEX,UAAU,CAAC0C,UAAX1C,EANJ;AAOLa,eAAS,EAAE7kC,KAPN;AAQLD,kBARK;AASLg0B;AATK,KAAP;AAWD;;AACD,WAASq9C,cAAT,CAAwB9+B,OAAxB,EAAiC1xC,OAAjC,EAA0C;AACxC,UAAMihB,GAAG,GAAGywB,OAAO,CAACpxB,KAARoxB,CAAczwB,GAA1B;AACA,UAAM;AAACwvD,UAAD;AAAOC,YAAP;AAAe/+B;AAAf,QAAwBD,OAA9B;AACA,UAAM;AAACi6B,cAAD;AAAWD;AAAX,QAAwB1rE,OAA9B;AACA,UAAM2wE,QAAQ,GAAGlmD,MAAM,CAACzqB,OAAO,CAAC2wE,QAAT,CAAvB;AACA,UAAMtC,SAAS,GAAG5jD,MAAM,CAACzqB,OAAO,CAACquE,SAAT,CAAxB;AACA,UAAMuC,UAAU,GAAGnmD,MAAM,CAACzqB,OAAO,CAAC4wE,UAAT,CAAzB;AACA,UAAMC,cAAc,GAAGl/B,KAAK,CAAC/yC,MAA7B;AACA,UAAMkyE,eAAe,GAAGJ,MAAM,CAAC9xE,MAA/B;AACA,UAAMmyE,iBAAiB,GAAGN,IAAI,CAAC7xE,MAA/B;AACA,UAAMm6C,OAAO,GAAGvuB,SAAS,CAACxqB,OAAO,CAAC+4C,OAAT,CAAzB;AACA,QAAI9zB,MAAM,GAAG8zB,OAAO,CAAC9zB,MAArB;AACA,QAAIpB,KAAK,GAAG,CAAZ;AACA,QAAImtD,kBAAkB,GAAGP,IAAI,CAAC/yC,MAAL+yC,CAAY,CAACtlE,KAAD,EAAQ8lE,QAAR,KAAqB9lE,KAAK,GAAG8lE,QAAQ,CAACC,MAATD,CAAgBryE,MAAxBuM,GAAiC8lE,QAAQ,CAACppD,KAATopD,CAAeryE,MAAhDuM,GAAyD8lE,QAAQ,CAACE,KAATF,CAAeryE,MAAzG6xE,EAAiH,CAAjHA,CAAzB;AACAO,sBAAkB,IAAIt/B,OAAO,CAAC0/B,UAAR1/B,CAAmB9yC,MAAnB8yC,GAA4BA,OAAO,CAAC2/B,SAAR3/B,CAAkB9yC,MAApEoyE;;AACA,QAAIH,cAAJ,EAAoB;AAClB5rD,YAAM,IAAI4rD,cAAc,GAAGxC,SAAS,CAACvtD,UAA3B+vD,GACT,CAACA,cAAc,GAAG,CAAlB,IAAuB7wE,OAAO,CAACsxE,YADtBT,GAET7wE,OAAO,CAACuxE,iBAFTtsD;AAGD;;AACD,QAAI+rD,kBAAJ,EAAwB;AACtB,YAAMQ,cAAc,GAAGxxE,OAAO,CAACyxE,aAARzxE,GAAwB8C,IAAI,CAACqC,GAALrC,CAAS4oE,SAAT5oE,EAAoB6tE,QAAQ,CAAC7vD,UAA7Bhe,CAAxB9C,GAAmE2wE,QAAQ,CAAC7vD,UAAnG;AACAmE,YAAM,IAAI8rD,iBAAiB,GAAGS,cAApBT,GACT,CAACC,kBAAkB,GAAGD,iBAAtB,IAA2CJ,QAAQ,CAAC7vD,UAD3CiwD,GAET,CAACC,kBAAkB,GAAG,CAAtB,IAA2BhxE,OAAO,CAAC0xE,WAFpCzsD;AAGD;;AACD,QAAI6rD,eAAJ,EAAqB;AACnB7rD,YAAM,IAAIjlB,OAAO,CAAC2xE,eAAR3xE,GACT8wE,eAAe,GAAGF,UAAU,CAAC9vD,UADpB9gB,GAET,CAAC8wE,eAAe,GAAG,CAAnB,IAAwB9wE,OAAO,CAAC4xE,aAFjC3sD;AAGD;;AACD,QAAI4sD,YAAY,GAAG,CAAnB;;AACA,UAAMC,YAAY,GAAG,UAAS9pD,IAAT,EAAe;AAClCnE,WAAK,GAAG/gB,IAAI,CAACqC,GAALrC,CAAS+gB,KAAT/gB,EAAgBme,GAAG,CAAC2C,WAAJ3C,CAAgB+G,IAAhB/G,EAAsB4C,KAAtB5C,GAA8B4wD,YAA9C/uE,CAAR+gB;AADF;;AAGA5C,OAAG,CAACiD,IAAJjD;AACAA,OAAG,CAACN,IAAJM,GAAWotD,SAAS,CAAC3qD,MAArBzC;AACA3iB,QAAI,CAACozC,OAAO,CAACC,KAAT,EAAgBmgC,YAAhB,CAAJxzE;AACA2iB,OAAG,CAACN,IAAJM,GAAW0vD,QAAQ,CAACjtD,MAApBzC;AACA3iB,QAAI,CAACozC,OAAO,CAAC0/B,UAAR1/B,CAAmBlF,MAAnBkF,CAA0BA,OAAO,CAAC2/B,SAAlC3/B,CAAD,EAA+CogC,YAA/C,CAAJxzE;AACAuzE,gBAAY,GAAG7xE,OAAO,CAACyxE,aAARzxE,GAAyB2rE,QAAQ,GAAG,CAAXA,GAAe3rE,OAAO,CAACgtD,UAAhDhtD,GAA8D,CAA7E6xE;AACAvzE,QAAI,CAACmyE,IAAD,EAAQQ,QAAD,IAAc;AACvB3yE,UAAI,CAAC2yE,QAAQ,CAACC,MAAV,EAAkBY,YAAlB,CAAJxzE;AACAA,UAAI,CAAC2yE,QAAQ,CAACppD,KAAV,EAAiBiqD,YAAjB,CAAJxzE;AACAA,UAAI,CAAC2yE,QAAQ,CAACE,KAAV,EAAiBW,YAAjB,CAAJxzE;AAHE,MAAJA;AAKAuzE,gBAAY,GAAG,CAAfA;AACA5wD,OAAG,CAACN,IAAJM,GAAW2vD,UAAU,CAACltD,MAAtBzC;AACA3iB,QAAI,CAACozC,OAAO,CAACg/B,MAAT,EAAiBoB,YAAjB,CAAJxzE;AACA2iB,OAAG,CAACqD,OAAJrD;AACA4C,SAAK,IAAIk1B,OAAO,CAACl1B,KAAjBA;AACA,WAAO;AAACA,WAAD;AAAQoB;AAAR,KAAP;AACD;;AACD,WAAS8sD,eAAT,CAAyBzxD,KAAzB,EAAgC9d,IAAhC,EAAsC;AACpC,UAAM;AAACpB,OAAD;AAAI6jB;AAAJ,QAAcziB,IAApB;;AACA,QAAIpB,CAAC,GAAG6jB,MAAM,GAAG,CAAjB,EAAoB;AAClB,aAAO,KAAP;AADF,WAEO,IAAI7jB,CAAC,GAAIkf,KAAK,CAAC2E,MAAN3E,GAAe2E,MAAM,GAAG,CAAjC,EAAqC;AAC1C,aAAO,QAAP;AACD;;AACD,WAAO,QAAP;AACD;;AACD,WAAS+sD,mBAAT,CAA6BC,MAA7B,EAAqC3xD,KAArC,EAA4CtgB,OAA5C,EAAqDwC,IAArD,EAA2D;AACzD,UAAM;AAACtB,OAAD;AAAI2iB;AAAJ,QAAarhB,IAAnB;AACA,UAAM0vE,KAAK,GAAGlyE,OAAO,CAACmyE,SAARnyE,GAAoBA,OAAO,CAACoyE,YAA1C;;AACA,QAAIH,MAAM,KAAK,MAAXA,IAAqB/wE,CAAC,GAAG2iB,KAAJ3iB,GAAYgxE,KAAZhxE,GAAoBof,KAAK,CAACuD,KAAnD,EAA0D;AACxD,aAAO,IAAP;AACD;;AACD,QAAIouD,MAAM,KAAK,OAAXA,IAAsB/wE,CAAC,GAAG2iB,KAAJ3iB,GAAYgxE,KAAZhxE,GAAoB,CAA9C,EAAiD;AAC/C,aAAO,IAAP;AACD;AACF;;AACD,WAASmxE,eAAT,CAAyB/xD,KAAzB,EAAgCtgB,OAAhC,EAAyCwC,IAAzC,EAA+C8vE,MAA/C,EAAuD;AACrD,UAAM;AAACpxE,OAAD;AAAI2iB;AAAJ,QAAarhB,IAAnB;AACA,UAAM;AAACqhB,WAAK,EAAE0uD,UAAR;AAAoBhpC,eAAS,EAAE;AAAC7+B,YAAD;AAAOC;AAAP;AAA/B,QAAgD2V,KAAtD;AACA,QAAI2xD,MAAM,GAAG,QAAb;;AACA,QAAIK,MAAM,KAAK,QAAf,EAAyB;AACvBL,YAAM,GAAG/wE,CAAC,IAAI,CAACwJ,IAAI,GAAGC,KAAR,IAAiB,CAAtBzJ,GAA0B,MAA1BA,GAAmC,OAA5C+wE;AADF,WAEO,IAAI/wE,CAAC,IAAI2iB,KAAK,GAAG,CAAjB,EAAoB;AACzBouD,YAAM,GAAG,MAATA;AADK,WAEA,IAAI/wE,CAAC,IAAIqxE,UAAU,GAAG1uD,KAAK,GAAG,CAA9B,EAAiC;AACtCouD,YAAM,GAAG,OAATA;AACD;;AACD,QAAID,mBAAmB,CAACC,MAAD,EAAS3xD,KAAT,EAAgBtgB,OAAhB,EAAyBwC,IAAzB,CAAvB,EAAuD;AACrDyvE,YAAM,GAAG,QAATA;AACD;;AACD,WAAOA,MAAP;AACD;;AACD,WAASO,kBAAT,CAA4BlyD,KAA5B,EAAmCtgB,OAAnC,EAA4CwC,IAA5C,EAAkD;AAChD,UAAM8vE,MAAM,GAAG9vE,IAAI,CAAC8vE,MAAL9vE,IAAexC,OAAO,CAACsyE,MAAvB9vE,IAAiCuvE,eAAe,CAACzxD,KAAD,EAAQ9d,IAAR,CAA/D;AACA,WAAO;AACLyvE,YAAM,EAAEzvE,IAAI,CAACyvE,MAALzvE,IAAexC,OAAO,CAACiyE,MAAvBzvE,IAAiC6vE,eAAe,CAAC/xD,KAAD,EAAQtgB,OAAR,EAAiBwC,IAAjB,EAAuB8vE,MAAvB,CADnD;AAELA;AAFK,KAAP;AAID;;AACD,WAASG,MAAT,CAAgBjwE,IAAhB,EAAsByvE,MAAtB,EAA8B;AAC5B,QAAI;AAAC/wE,OAAD;AAAI2iB;AAAJ,QAAarhB,IAAjB;;AACA,QAAIyvE,MAAM,KAAK,OAAf,EAAwB;AACtB/wE,OAAC,IAAI2iB,KAAL3iB;AADF,WAEO,IAAI+wE,MAAM,KAAK,QAAf,EAAyB;AAC9B/wE,OAAC,IAAK2iB,KAAK,GAAG,CAAd3iB;AACD;;AACD,WAAOA,CAAP;AACD;;AACD,WAASwxE,MAAT,CAAgBlwE,IAAhB,EAAsB8vE,MAAtB,EAA8BK,cAA9B,EAA8C;AAC5C,QAAI;AAACvxE,OAAD;AAAI6jB;AAAJ,QAAcziB,IAAlB;;AACA,QAAI8vE,MAAM,KAAK,KAAf,EAAsB;AACpBlxE,OAAC,IAAIuxE,cAALvxE;AADF,WAEO,IAAIkxE,MAAM,KAAK,QAAf,EAAyB;AAC9BlxE,OAAC,IAAI6jB,MAAM,GAAG0tD,cAAdvxE;AADK,WAEA;AACLA,OAAC,IAAK6jB,MAAM,GAAG,CAAf7jB;AACD;;AACD,WAAOA,CAAP;AACD;;AACD,WAASwxE,kBAAT,CAA4B5yE,OAA5B,EAAqCwC,IAArC,EAA2CqwE,SAA3C,EAAsDvyD,KAAtD,EAA6D;AAC3D,UAAM;AAAC6xD,eAAD;AAAYC,kBAAZ;AAA0B9sD;AAA1B,QAA0CtlB,OAAhD;AACA,UAAM;AAACiyE,YAAD;AAASK;AAAT,QAAmBO,SAAzB;AACA,UAAMF,cAAc,GAAGR,SAAS,GAAGC,YAAnC;AACA,UAAM;AAAC9oD,aAAD;AAAUG,cAAV;AAAoBF,gBAApB;AAAgCC;AAAhC,QAA+Ce,aAAa,CAACjF,YAAD,CAAlE;AACA,QAAIpkB,CAAC,GAAGuxE,MAAM,CAACjwE,IAAD,EAAOyvE,MAAP,CAAd;AACA,UAAM7wE,CAAC,GAAGsxE,MAAM,CAAClwE,IAAD,EAAO8vE,MAAP,EAAeK,cAAf,CAAhB;;AACA,QAAIL,MAAM,KAAK,QAAf,EAAyB;AACvB,UAAIL,MAAM,KAAK,MAAf,EAAuB;AACrB/wE,SAAC,IAAIyxE,cAALzxE;AADF,aAEO,IAAI+wE,MAAM,KAAK,OAAf,EAAwB;AAC7B/wE,SAAC,IAAIyxE,cAALzxE;AACD;AALH,WAMO,IAAI+wE,MAAM,KAAK,MAAf,EAAuB;AAC5B/wE,OAAC,IAAI4B,IAAI,CAACqC,GAALrC,CAASwmB,OAATxmB,EAAkBymB,UAAlBzmB,IAAgCqvE,SAArCjxE;AADK,WAEA,IAAI+wE,MAAM,KAAK,OAAf,EAAwB;AAC7B/wE,OAAC,IAAI4B,IAAI,CAACqC,GAALrC,CAAS2mB,QAAT3mB,EAAmB0mB,WAAnB1mB,IAAkCqvE,SAAvCjxE;AACD;;AACD,WAAO;AACLA,OAAC,EAAE+F,WAAW,CAAC/F,CAAD,EAAI,CAAJ,EAAOof,KAAK,CAACuD,KAANvD,GAAc9d,IAAI,CAACqhB,KAA1B,CADT;AAELziB,OAAC,EAAE6F,WAAW,CAAC7F,CAAD,EAAI,CAAJ,EAAOkf,KAAK,CAAC2E,MAAN3E,GAAe9d,IAAI,CAACyiB,MAA3B;AAFT,KAAP;AAID;;AACD,WAAS6tD,WAAT,CAAqBphC,OAArB,EAA8BnnC,KAA9B,EAAqCvK,OAArC,EAA8C;AAC5C,UAAM+4C,OAAO,GAAGvuB,SAAS,CAACxqB,OAAO,CAAC+4C,OAAT,CAAzB;AACA,WAAOxuC,KAAK,KAAK,QAAVA,GACHmnC,OAAO,CAACxwC,CAARwwC,GAAYA,OAAO,CAAC7tB,KAAR6tB,GAAgB,CADzBnnC,GAEHA,KAAK,KAAK,OAAVA,GACEmnC,OAAO,CAACxwC,CAARwwC,GAAYA,OAAO,CAAC7tB,KAApB6tB,GAA4BqH,OAAO,CAACpuC,KADtCJ,GAEEmnC,OAAO,CAACxwC,CAARwwC,GAAYqH,OAAO,CAACruC,IAJ1B;AAKD;;AACD,WAASqoE,uBAAT,CAAiC90E,QAAjC,EAA2C;AACzC,WAAOkyE,YAAY,CAAC,EAAD,EAAKE,aAAa,CAACpyE,QAAD,CAAlB,CAAnB;AACD;;AACD,WAAS+0E,oBAAT,CAA8BlkD,MAA9B,EAAsC4iB,OAAtC,EAA+CuhC,YAA/C,EAA6D;AAC3D,WAAO5nD,aAAa,CAACyD,MAAD,EAAS;AAC3B4iB,aAD2B;AAE3BuhC,kBAF2B;AAG3Bl2E,UAAI,EAAE;AAHqB,KAAT,CAApB;AAKD;;AACD,WAASm2E,iBAAT,CAA2B92C,SAA3B,EAAsC/b,OAAtC,EAA+C;AAC7C,UAAMgC,QAAQ,GAAGhC,OAAO,IAAIA,OAAO,CAAC0jB,OAAnB1jB,IAA8BA,OAAO,CAAC0jB,OAAR1jB,CAAgBqxB,OAA9CrxB,IAAyDA,OAAO,CAAC0jB,OAAR1jB,CAAgBqxB,OAAhBrxB,CAAwB+b,SAAlG;AACA,WAAO/Z,QAAQ,GAAG+Z,SAAS,CAAC/Z,QAAV+Z,CAAmB/Z,QAAnB+Z,CAAH,GAAkCA,SAAjD;AACD;;AACD,QAAM+2C,OAAN,SAAsB77B,OAAtB,CAA8B;AAC5Bp5B,eAAW,CAACkiB,MAAD,EAAS;AAClB;AACA,WAAKgzC,OAAL,GAAe,CAAf;AACA,WAAKp2C,OAAL,GAAe,EAAf;AACA,WAAKq2C,cAAL,GAAsBxyE,SAAtB;AACA,WAAKyyE,KAAL,GAAazyE,SAAb;AACA,WAAK0yE,iBAAL,GAAyB1yE,SAAzB;AACA,WAAK2yE,aAAL,GAAqB,EAArB;AACA,WAAKxyC,WAAL,GAAmBngC,SAAnB;AACA,WAAK2kC,QAAL,GAAgB3kC,SAAhB;AACA,WAAKyf,KAAL,GAAa8f,MAAM,CAAC9f,KAAP8f,IAAgBA,MAAM,CAACxF,MAApC;AACA,WAAKA,MAAL,GAAc,KAAKta,KAAnB;AACA,WAAKtgB,OAAL,GAAeogC,MAAM,CAACpgC,OAAtB;AACA,WAAKyzE,UAAL,GAAkB5yE,SAAlB;AACA,WAAK8wC,KAAL,GAAa9wC,SAAb;AACA,WAAKuwE,UAAL,GAAkBvwE,SAAlB;AACA,WAAK4vE,IAAL,GAAY5vE,SAAZ;AACA,WAAKwwE,SAAL,GAAiBxwE,SAAjB;AACA,WAAK6vE,MAAL,GAAc7vE,SAAd;AACA,WAAKoxE,MAAL,GAAcpxE,SAAd;AACA,WAAKyxE,MAAL,GAAczxE,SAAd;AACA,WAAKK,CAAL,GAASL,SAAT;AACA,WAAKO,CAAL,GAASP,SAAT;AACA,WAAKokB,MAAL,GAAcpkB,SAAd;AACA,WAAKgjB,KAAL,GAAahjB,SAAb;AACA,WAAK6yE,MAAL,GAAc7yE,SAAd;AACA,WAAK8yE,MAAL,GAAc9yE,SAAd;AACA,WAAK+yE,WAAL,GAAmB/yE,SAAnB;AACA,WAAKgzE,gBAAL,GAAwBhzE,SAAxB;AACA,WAAKizE,eAAL,GAAuBjzE,SAAvB;AACD;;AACD6kC,cAAU,CAAC1lC,OAAD,EAAU;AAClB,WAAKA,OAAL,GAAeA,OAAf;AACA,WAAKuzE,iBAAL,GAAyB1yE,SAAzB;AACA,WAAK2kC,QAAL,GAAgB3kC,SAAhB;AACD;;AACDopC,sBAAkB,GAAG;AACnB,YAAM3F,MAAM,GAAG,KAAKivC,iBAApB;;AACA,UAAIjvC,MAAJ,EAAY;AACV,eAAOA,MAAP;AACD;;AACD,YAAMhkB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMtgB,OAAO,GAAG,KAAKA,OAAL,CAAawtB,UAAb,CAAwB,KAAK1I,UAAL,EAAxB,CAAhB;AACA,YAAM8C,IAAI,GAAG5nB,OAAO,CAACm6C,OAARn6C,IAAmBsgB,KAAK,CAACtgB,OAANsgB,CAAcN,SAAjChgB,IAA8CA,OAAO,CAACggC,UAAnE;AACA,YAAMA,UAAU,GAAG,IAAIG,UAAJ,CAAe,KAAK7f,KAApB,EAA2BsH,IAA3B,CAAnB;;AACA,UAAIA,IAAI,CAACmE,UAAT,EAAqB;AACnB,aAAKwnD,iBAAL,GAAyBv2E,MAAM,CAACgtC,MAAPhtC,CAAcgjC,UAAdhjC,CAAzB;AACD;;AACD,aAAOgjC,UAAP;AACD;;AACDlb,cAAU,GAAG;AACX,aAAO,KAAK0gB,QAAL,KACP,KAAKA,QAAL,GAAgBwtC,oBAAoB,CAAC,KAAK1yD,KAAL,CAAWwE,UAAX,EAAD,EAA0B,IAA1B,EAAgC,KAAK0uD,aAArC,CAD7B,CAAP;AAED;;AACDO,YAAQ,CAAC1zD,OAAD,EAAUrgB,OAAV,EAAmB;AACzB,YAAM;AAACo8B;AAAD,UAAcp8B,OAApB;AACA,YAAMg0E,WAAW,GAAG53C,SAAS,CAAC43C,WAAV53C,CAAsB/9B,KAAtB+9B,CAA4B,IAA5BA,EAAkC,CAAC/b,OAAD,CAAlC+b,CAApB;AACA,YAAMuV,KAAK,GAAGvV,SAAS,CAACuV,KAAVvV,CAAgB/9B,KAAhB+9B,CAAsB,IAAtBA,EAA4B,CAAC/b,OAAD,CAA5B+b,CAAd;AACA,YAAM63C,UAAU,GAAG73C,SAAS,CAAC63C,UAAV73C,CAAqB/9B,KAArB+9B,CAA2B,IAA3BA,EAAiC,CAAC/b,OAAD,CAAjC+b,CAAnB;AACA,UAAIvU,KAAK,GAAG,EAAZ;AACAA,WAAK,GAAGsoD,YAAY,CAACtoD,KAAD,EAAQwoD,aAAa,CAAC2D,WAAD,CAArB,CAApBnsD;AACAA,WAAK,GAAGsoD,YAAY,CAACtoD,KAAD,EAAQwoD,aAAa,CAAC1+B,KAAD,CAArB,CAApB9pB;AACAA,WAAK,GAAGsoD,YAAY,CAACtoD,KAAD,EAAQwoD,aAAa,CAAC4D,UAAD,CAArB,CAApBpsD;AACA,aAAOA,KAAP;AACD;;AACDqsD,iBAAa,CAACjB,YAAD,EAAejzE,OAAf,EAAwB;AACnC,aAAO+yE,uBAAuB,CAAC/yE,OAAO,CAACo8B,SAARp8B,CAAkBoxE,UAAlBpxE,CAA6B3B,KAA7B2B,CAAmC,IAAnCA,EAAyC,CAACizE,YAAD,CAAzCjzE,CAAD,CAA9B;AACD;;AACDm0E,WAAO,CAAClB,YAAD,EAAejzE,OAAf,EAAwB;AAC7B,YAAM;AAACo8B;AAAD,UAAcp8B,OAApB;AACA,YAAMo0E,SAAS,GAAG,EAAlB;AACA91E,UAAI,CAAC20E,YAAD,EAAgB5yD,OAAD,IAAa;AAC9B,cAAM4wD,QAAQ,GAAG;AACfC,gBAAM,EAAE,EADO;AAEfrpD,eAAK,EAAE,EAFQ;AAGfspD,eAAK,EAAE;AAHQ,SAAjB;AAKA,cAAMkD,MAAM,GAAGnB,iBAAiB,CAAC92C,SAAD,EAAY/b,OAAZ,CAAhC;AACA8vD,oBAAY,CAACc,QAAQ,CAACC,MAAV,EAAkBb,aAAa,CAACgE,MAAM,CAACC,WAAPD,CAAmBl3E,IAAnBk3E,CAAwB,IAAxBA,EAA8Bh0D,OAA9Bg0D,CAAD,CAA/B,CAAZlE;AACAA,oBAAY,CAACc,QAAQ,CAACppD,KAAV,EAAiBwsD,MAAM,CAACjrC,KAAPirC,CAAal3E,IAAbk3E,CAAkB,IAAlBA,EAAwBh0D,OAAxBg0D,CAAjB,CAAZlE;AACAA,oBAAY,CAACc,QAAQ,CAACE,KAAV,EAAiBd,aAAa,CAACgE,MAAM,CAACE,UAAPF,CAAkBl3E,IAAlBk3E,CAAuB,IAAvBA,EAA6Bh0D,OAA7Bg0D,CAAD,CAA9B,CAAZlE;AACAiE,iBAAS,CAACtyE,IAAVsyE,CAAenD,QAAfmD;AAVE,QAAJ91E;AAYA,aAAO81E,SAAP;AACD;;AACDI,gBAAY,CAACvB,YAAD,EAAejzE,OAAf,EAAwB;AAClC,aAAO+yE,uBAAuB,CAAC/yE,OAAO,CAACo8B,SAARp8B,CAAkBqxE,SAAlBrxE,CAA4B3B,KAA5B2B,CAAkC,IAAlCA,EAAwC,CAACizE,YAAD,CAAxCjzE,CAAD,CAA9B;AACD;;AACDy0E,aAAS,CAACxB,YAAD,EAAejzE,OAAf,EAAwB;AAC/B,YAAM;AAACo8B;AAAD,UAAcp8B,OAApB;AACA,YAAM00E,YAAY,GAAGt4C,SAAS,CAACs4C,YAAVt4C,CAAuB/9B,KAAvB+9B,CAA6B,IAA7BA,EAAmC,CAAC62C,YAAD,CAAnC72C,CAArB;AACA,YAAMs0C,MAAM,GAAGt0C,SAAS,CAACs0C,MAAVt0C,CAAiB/9B,KAAjB+9B,CAAuB,IAAvBA,EAA6B,CAAC62C,YAAD,CAA7B72C,CAAf;AACA,YAAMu4C,WAAW,GAAGv4C,SAAS,CAACu4C,WAAVv4C,CAAsB/9B,KAAtB+9B,CAA4B,IAA5BA,EAAkC,CAAC62C,YAAD,CAAlC72C,CAApB;AACA,UAAIvU,KAAK,GAAG,EAAZ;AACAA,WAAK,GAAGsoD,YAAY,CAACtoD,KAAD,EAAQwoD,aAAa,CAACqE,YAAD,CAArB,CAApB7sD;AACAA,WAAK,GAAGsoD,YAAY,CAACtoD,KAAD,EAAQwoD,aAAa,CAACK,MAAD,CAArB,CAApB7oD;AACAA,WAAK,GAAGsoD,YAAY,CAACtoD,KAAD,EAAQwoD,aAAa,CAACsE,WAAD,CAArB,CAApB9sD;AACA,aAAOA,KAAP;AACD;;AACD+sD,gBAAY,CAAC50E,OAAD,EAAU;AACpB,YAAMi/B,MAAM,GAAG,KAAKjC,OAApB;AACA,YAAMzZ,IAAI,GAAG,KAAKjD,KAAL,CAAWiD,IAAxB;AACA,YAAMqwD,WAAW,GAAG,EAApB;AACA,YAAMC,gBAAgB,GAAG,EAAzB;AACA,YAAMC,eAAe,GAAG,EAAxB;AACA,UAAIb,YAAY,GAAG,EAAnB;AACA,UAAIx0E,CAAJ,EAAOC,GAAP;;AACA,WAAKD,CAAC,GAAG,CAAJA,EAAOC,GAAG,GAAGugC,MAAM,CAACrgC,MAAzB,EAAiCH,CAAC,GAAGC,GAArC,EAA0C,EAAED,CAA5C,EAA+C;AAC7Cw0E,oBAAY,CAACnxE,IAAbmxE,CAAkB1C,iBAAiB,CAAC,KAAKjwD,KAAN,EAAa2e,MAAM,CAACxgC,CAAD,CAAnB,CAAnCw0E;AACD;;AACD,UAAIjzE,OAAO,CAAC2uB,MAAZ,EAAoB;AAClBskD,oBAAY,GAAGA,YAAY,CAACtkD,MAAbskD,CAAoB,CAAC9/C,OAAD,EAAU/zB,KAAV,EAAiB4F,KAAjB,KAA2BhF,OAAO,CAAC2uB,MAAR3uB,CAAemzB,OAAfnzB,EAAwBZ,KAAxBY,EAA+BgF,KAA/BhF,EAAsCujB,IAAtCvjB,CAA/CizE,CAAfA;AACD;;AACD,UAAIjzE,OAAO,CAAC60E,QAAZ,EAAsB;AACpB5B,oBAAY,GAAGA,YAAY,CAAC3uE,IAAb2uE,CAAkB,CAAC3wE,CAAD,EAAIC,CAAJ,KAAUvC,OAAO,CAAC60E,QAAR70E,CAAiBsC,CAAjBtC,EAAoBuC,CAApBvC,EAAuBujB,IAAvBvjB,CAA5BizE,CAAfA;AACD;;AACD30E,UAAI,CAAC20E,YAAD,EAAgB5yD,OAAD,IAAa;AAC9B,cAAMg0D,MAAM,GAAGnB,iBAAiB,CAAClzE,OAAO,CAACo8B,SAAT,EAAoB/b,OAApB,CAAhC;AACAuzD,mBAAW,CAAC9xE,IAAZ8xE,CAAiBS,MAAM,CAACS,UAAPT,CAAkBl3E,IAAlBk3E,CAAuB,IAAvBA,EAA6Bh0D,OAA7Bg0D,CAAjBT;AACAC,wBAAgB,CAAC/xE,IAAjB+xE,CAAsBQ,MAAM,CAACU,eAAPV,CAAuBl3E,IAAvBk3E,CAA4B,IAA5BA,EAAkCh0D,OAAlCg0D,CAAtBR;AACAC,uBAAe,CAAChyE,IAAhBgyE,CAAqBO,MAAM,CAACW,cAAPX,CAAsBl3E,IAAtBk3E,CAA2B,IAA3BA,EAAiCh0D,OAAjCg0D,CAArBP;AAJE,QAAJx1E;AAMA,WAAKs1E,WAAL,GAAmBA,WAAnB;AACA,WAAKC,gBAAL,GAAwBA,gBAAxB;AACA,WAAKC,eAAL,GAAuBA,eAAvB;AACA,WAAKL,UAAL,GAAkBR,YAAlB;AACA,aAAOA,YAAP;AACD;;AACD/zC,UAAM,CAAC7yB,OAAD,EAAUkxD,MAAV,EAAkB;AACtB,YAAMv9D,OAAO,GAAG,KAAKA,OAAL,CAAawtB,UAAb,CAAwB,KAAK1I,UAAL,EAAxB,CAAhB;AACA,YAAMma,MAAM,GAAG,KAAKjC,OAApB;AACA,UAAI6C,UAAJ;AACA,UAAIozC,YAAY,GAAG,EAAnB;;AACA,UAAI,CAACh0C,MAAM,CAACrgC,MAAZ,EAAoB;AAClB,YAAI,KAAKw0E,OAAL,KAAiB,CAArB,EAAwB;AACtBvzC,oBAAU,GAAG;AACXuzC,mBAAO,EAAE;AADE,WAAbvzC;AAGD;AALH,aAMO;AACL,cAAMwc,QAAQ,GAAGyzB,WAAW,CAAC9vE,OAAO,CAACq8C,QAAT,CAAXyzB,CAA8B3yE,IAA9B2yE,CAAmC,IAAnCA,EAAyC7wC,MAAzC6wC,EAAiD,KAAKuD,cAAtDvD,CAAjB;AACAmD,oBAAY,GAAG,KAAK2B,YAAL,CAAkB50E,OAAlB,CAAfizE;AACA,aAAKthC,KAAL,GAAa,KAAKoiC,QAAL,CAAcd,YAAd,EAA4BjzE,OAA5B,CAAb;AACA,aAAKoxE,UAAL,GAAkB,KAAK8C,aAAL,CAAmBjB,YAAnB,EAAiCjzE,OAAjC,CAAlB;AACA,aAAKywE,IAAL,GAAY,KAAK0D,OAAL,CAAalB,YAAb,EAA2BjzE,OAA3B,CAAZ;AACA,aAAKqxE,SAAL,GAAiB,KAAKmD,YAAL,CAAkBvB,YAAlB,EAAgCjzE,OAAhC,CAAjB;AACA,aAAK0wE,MAAL,GAAc,KAAK+D,SAAL,CAAexB,YAAf,EAA6BjzE,OAA7B,CAAd;AACA,cAAMwC,IAAI,GAAG,KAAK8wE,KAAL,GAAa9C,cAAc,CAAC,IAAD,EAAOxwE,OAAP,CAAxC;AACA,cAAMi1E,eAAe,GAAGj4E,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkBq/C,QAAlBr/C,EAA4BwF,IAA5BxF,CAAxB;AACA,cAAM61E,SAAS,GAAGL,kBAAkB,CAAC,KAAKlyD,KAAN,EAAatgB,OAAb,EAAsBi1E,eAAtB,CAApC;AACA,cAAMC,eAAe,GAAGtC,kBAAkB,CAAC5yE,OAAD,EAAUi1E,eAAV,EAA2BpC,SAA3B,EAAsC,KAAKvyD,KAA3C,CAA1C;AACA,aAAK2xD,MAAL,GAAcY,SAAS,CAACZ,MAAxB;AACA,aAAKK,MAAL,GAAcO,SAAS,CAACP,MAAxB;AACAzyC,kBAAU,GAAG;AACXuzC,iBAAO,EAAE,CADE;AAEXlyE,WAAC,EAAEg0E,eAAe,CAACh0E,CAFR;AAGXE,WAAC,EAAE8zE,eAAe,CAAC9zE,CAHR;AAIXyiB,eAAK,EAAErhB,IAAI,CAACqhB,KAJD;AAKXoB,gBAAM,EAAEziB,IAAI,CAACyiB,MALF;AAMXyuD,gBAAM,EAAEr3B,QAAQ,CAACn7C,CANN;AAOXyyE,gBAAM,EAAEt3B,QAAQ,CAACj7C;AAPN,SAAby+B;AASD;;AACD,WAAK2zC,aAAL,GAAqBP,YAArB;AACA,WAAKztC,QAAL,GAAgB3kC,SAAhB;;AACA,UAAIg/B,UAAJ,EAAgB;AACd,aAAKoK,kBAAL,GAA0B/K,MAA1B,CAAiC,IAAjC,EAAuCW,UAAvC;AACD;;AACD,UAAIxzB,OAAO,IAAIrM,OAAO,CAACm1E,QAAvB,EAAiC;AAC/Bn1E,eAAO,CAACm1E,QAARn1E,CAAiB7C,IAAjB6C,CAAsB,IAAtBA,EAA4B;AAACsgB,eAAK,EAAE,KAAKA,KAAb;AAAoBoxB,iBAAO,EAAE,IAA7B;AAAmC6rB;AAAnC,SAA5Bv9D;AACD;AACF;;AACDo1E,aAAS,CAACC,YAAD,EAAep0D,GAAf,EAAoBze,IAApB,EAA0BxC,OAA1B,EAAmC;AAC1C,YAAMs1E,aAAa,GAAG,KAAKC,gBAAL,CAAsBF,YAAtB,EAAoC7yE,IAApC,EAA0CxC,OAA1C,CAAtB;AACAihB,SAAG,CAACiF,MAAJjF,CAAWq0D,aAAa,CAAC5xB,EAAzBziC,EAA6Bq0D,aAAa,CAAC3xB,EAA3C1iC;AACAA,SAAG,CAACiF,MAAJjF,CAAWq0D,aAAa,CAAC1xB,EAAzB3iC,EAA6Bq0D,aAAa,CAACzxB,EAA3C5iC;AACAA,SAAG,CAACiF,MAAJjF,CAAWq0D,aAAa,CAACE,EAAzBv0D,EAA6Bq0D,aAAa,CAACG,EAA3Cx0D;AACD;;AACDs0D,oBAAgB,CAACF,YAAD,EAAe7yE,IAAf,EAAqBxC,OAArB,EAA8B;AAC5C,YAAM;AAACiyE,cAAD;AAASK;AAAT,UAAmB,IAAzB;AACA,YAAM;AAACH,iBAAD;AAAY7sD;AAAZ,UAA4BtlB,OAAlC;AACA,YAAM;AAACspB,eAAD;AAAUG,gBAAV;AAAoBF,kBAApB;AAAgCC;AAAhC,UAA+Ce,aAAa,CAACjF,YAAD,CAAlE;AACA,YAAM;AAACpkB,SAAC,EAAEw0E,GAAJ;AAASt0E,SAAC,EAAEu0E;AAAZ,UAAmBN,YAAzB;AACA,YAAM;AAACxxD,aAAD;AAAQoB;AAAR,UAAkBziB,IAAxB;AACA,UAAIkhD,EAAJ,EAAQE,EAAR,EAAY4xB,EAAZ,EAAgB7xB,EAAhB,EAAoBE,EAApB,EAAwB4xB,EAAxB;;AACA,UAAInD,MAAM,KAAK,QAAf,EAAyB;AACvBzuB,UAAE,GAAG8xB,GAAG,GAAI1wD,MAAM,GAAG,CAArB4+B;;AACA,YAAIouB,MAAM,KAAK,MAAf,EAAuB;AACrBvuB,YAAE,GAAGgyB,GAALhyB;AACAE,YAAE,GAAGF,EAAE,GAAGyuB,SAAVvuB;AACAD,YAAE,GAAGE,EAAE,GAAGsuB,SAAVxuB;AACA8xB,YAAE,GAAG5xB,EAAE,GAAGsuB,SAAVsD;AAJF,eAKO;AACL/xB,YAAE,GAAGgyB,GAAG,GAAG7xD,KAAX6/B;AACAE,YAAE,GAAGF,EAAE,GAAGyuB,SAAVvuB;AACAD,YAAE,GAAGE,EAAE,GAAGsuB,SAAVxuB;AACA8xB,YAAE,GAAG5xB,EAAE,GAAGsuB,SAAVsD;AACD;;AACDD,UAAE,GAAG9xB,EAAL8xB;AAbF,aAcO;AACL,YAAIvD,MAAM,KAAK,MAAf,EAAuB;AACrBruB,YAAE,GAAG8xB,GAAG,GAAG5yE,IAAI,CAACqC,GAALrC,CAASwmB,OAATxmB,EAAkBymB,UAAlBzmB,CAAN4yE,GAAuCvD,SAA5CvuB;AADF,eAEO,IAAIquB,MAAM,KAAK,OAAf,EAAwB;AAC7BruB,YAAE,GAAG8xB,GAAG,GAAG7xD,KAAN6xD,GAAc5yE,IAAI,CAACqC,GAALrC,CAAS2mB,QAAT3mB,EAAmB0mB,WAAnB1mB,CAAd4yE,GAAgDvD,SAArDvuB;AADK,eAEA;AACLA,YAAE,GAAG,KAAK8vB,MAAV9vB;AACD;;AACD,YAAI0uB,MAAM,KAAK,KAAf,EAAsB;AACpB3uB,YAAE,GAAGgyB,GAALhyB;AACAE,YAAE,GAAGF,EAAE,GAAGwuB,SAAVtuB;AACAH,YAAE,GAAGE,EAAE,GAAGuuB,SAAVzuB;AACA8xB,YAAE,GAAG5xB,EAAE,GAAGuuB,SAAVqD;AAJF,eAKO;AACL7xB,YAAE,GAAGgyB,GAAG,GAAG1wD,MAAX0+B;AACAE,YAAE,GAAGF,EAAE,GAAGwuB,SAAVtuB;AACAH,YAAE,GAAGE,EAAE,GAAGuuB,SAAVzuB;AACA8xB,YAAE,GAAG5xB,EAAE,GAAGuuB,SAAVqD;AACD;;AACDC,UAAE,GAAG9xB,EAAL8xB;AACD;;AACD,aAAO;AAAC/xB,UAAD;AAAKE,UAAL;AAAS4xB,UAAT;AAAa7xB,UAAb;AAAiBE,UAAjB;AAAqB4xB;AAArB,OAAP;AACD;;AACDhwB,aAAS,CAAC7zB,EAAD,EAAK3Q,GAAL,EAAUjhB,OAAV,EAAmB;AAC1B,YAAM2xC,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM/yC,MAAM,GAAG+yC,KAAK,CAAC/yC,MAArB;AACA,UAAIyvE,SAAJ,EAAeiD,YAAf,EAA6B7yE,CAA7B;;AACA,UAAIG,MAAJ,EAAY;AACV,cAAM0uE,SAAS,GAAGn1C,aAAa,CAACn4B,OAAO,CAAC4K,GAAT,EAAc,KAAK1J,CAAnB,EAAsB,KAAK2iB,KAA3B,CAA/B;AACA+N,UAAE,CAAC1wB,CAAH0wB,GAAOkhD,WAAW,CAAC,IAAD,EAAO9yE,OAAO,CAACo8C,UAAf,EAA2Bp8C,OAA3B,CAAlB4xB;AACA3Q,WAAG,CAACyH,SAAJzH,GAAgBqsD,SAAS,CAAC5kD,SAAV4kD,CAAoBttE,OAAO,CAACo8C,UAA5BkxB,CAAhBrsD;AACAA,WAAG,CAAC0H,YAAJ1H,GAAmB,QAAnBA;AACAotD,iBAAS,GAAG5jD,MAAM,CAACzqB,OAAO,CAACquE,SAAT,CAAlBA;AACAiD,oBAAY,GAAGtxE,OAAO,CAACsxE,YAAvBA;AACArwD,WAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAAC41E,UAAxB30D;AACAA,WAAG,CAACN,IAAJM,GAAWotD,SAAS,CAAC3qD,MAArBzC;;AACA,aAAKxiB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGG,MAAhB,EAAwB,EAAEH,CAA1B,EAA6B;AAC3BwiB,aAAG,CAACqH,QAAJrH,CAAa0wB,KAAK,CAAClzC,CAAD,CAAlBwiB,EAAuBqsD,SAAS,CAACpsE,CAAVosE,CAAY17C,EAAE,CAAC1wB,CAAfosE,CAAvBrsD,EAA0C2Q,EAAE,CAACxwB,CAAHwwB,GAAOy8C,SAAS,CAACvtD,UAAVutD,GAAuB,CAAxEptD;AACA2Q,YAAE,CAACxwB,CAAHwwB,IAAQy8C,SAAS,CAACvtD,UAAVutD,GAAuBiD,YAA/B1/C;;AACA,cAAInzB,CAAC,GAAG,CAAJA,KAAUG,MAAd,EAAsB;AACpBgzB,cAAE,CAACxwB,CAAHwwB,IAAQ5xB,OAAO,CAACuxE,iBAARvxE,GAA4BsxE,YAApC1/C;AACD;AACF;AACF;AACF;;AACDikD,iBAAa,CAAC50D,GAAD,EAAM2Q,EAAN,EAAUnzB,CAAV,EAAa6uE,SAAb,EAAwBttE,OAAxB,EAAiC;AAC5C,YAAM4zE,WAAW,GAAG,KAAKA,WAAL,CAAiBn1E,CAAjB,CAApB;AACA,YAAMs2E,eAAe,GAAG,KAAKlB,gBAAL,CAAsBp1E,CAAtB,CAAxB;AACA,YAAM;AAACitE,iBAAD;AAAYC,gBAAZ;AAAsB3e;AAAtB,UAAoChtD,OAA1C;AACA,YAAM2wE,QAAQ,GAAGlmD,MAAM,CAACzqB,OAAO,CAAC2wE,QAAT,CAAvB;AACA,YAAMmF,MAAM,GAAGhD,WAAW,CAAC,IAAD,EAAO,MAAP,EAAe9yE,OAAf,CAA1B;AACA,YAAM+1E,SAAS,GAAGzI,SAAS,CAACpsE,CAAVosE,CAAYwI,MAAZxI,CAAlB;AACA,YAAM0I,OAAO,GAAGtK,SAAS,GAAGiF,QAAQ,CAAC7vD,UAArB4qD,GAAkC,CAACiF,QAAQ,CAAC7vD,UAAT6vD,GAAsBjF,SAAvB,IAAoC,CAAtEA,GAA0E,CAA1F;AACA,YAAMuK,MAAM,GAAGrkD,EAAE,CAACxwB,CAAHwwB,GAAOokD,OAAtB;;AACA,UAAIh2E,OAAO,CAAC4rE,aAAZ,EAA2B;AACzB,cAAMmC,WAAW,GAAG;AAClBtoD,gBAAM,EAAE3iB,IAAI,CAACoC,GAALpC,CAAS6oE,QAAT7oE,EAAmB4oE,SAAnB5oE,IAAgC,CADtB;AAElByiB,oBAAU,EAAEwvD,eAAe,CAACxvD,UAFV;AAGlBC,kBAAQ,EAAEuvD,eAAe,CAACvvD,QAHR;AAIlBc,qBAAW,EAAE;AAJK,SAApB;AAMA,cAAMguB,OAAO,GAAGg5B,SAAS,CAACv1C,UAAVu1C,CAAqByI,SAArBzI,EAAgC3B,QAAhC2B,IAA4C3B,QAAQ,GAAG,CAAvE;AACA,cAAMp3B,OAAO,GAAG0hC,MAAM,GAAGvK,SAAS,GAAG,CAArC;AACAzqD,WAAG,CAACiH,WAAJjH,GAAkBjhB,OAAO,CAACk2E,kBAA1Bj1D;AACAA,WAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAACk2E,kBAAxBj1D;AACAiE,iBAAS,CAACjE,GAAD,EAAM8sD,WAAN,EAAmBz5B,OAAnB,EAA4BC,OAA5B,CAATrvB;AACAjE,WAAG,CAACiH,WAAJjH,GAAkB2yD,WAAW,CAAC1zD,WAA9Be;AACAA,WAAG,CAACwH,SAAJxH,GAAgB2yD,WAAW,CAAC3zD,eAA5BgB;AACAiE,iBAAS,CAACjE,GAAD,EAAM8sD,WAAN,EAAmBz5B,OAAnB,EAA4BC,OAA5B,CAATrvB;AAdF,aAeO;AACLjE,WAAG,CAACkH,SAAJlH,GAAgB5jB,QAAQ,CAACu2E,WAAW,CAACttD,WAAb,CAARjpB,GAAoCyF,IAAI,CAACqC,GAALrC,CAAS,GAAG9F,MAAM,CAAC8K,MAAP9K,CAAc42E,WAAW,CAACttD,WAA1BtpB,CAAZ8F,CAApCzF,GAA2Fu2E,WAAW,CAACttD,WAAZstD,IAA2B,CAAtI3yD;AACAA,WAAG,CAACiH,WAAJjH,GAAkB2yD,WAAW,CAAC1zD,WAA9Be;AACAA,WAAG,CAACokC,WAAJpkC,CAAgB2yD,WAAW,CAACn4C,UAAZm4C,IAA0B,EAA1C3yD;AACAA,WAAG,CAACqkC,cAAJrkC,GAAqB2yD,WAAW,CAACl4C,gBAAZk4C,IAAgC,CAArD3yD;AACA,cAAMk1D,MAAM,GAAG7I,SAAS,CAACv1C,UAAVu1C,CAAqByI,SAArBzI,EAAgC3B,QAAQ,GAAG3e,UAA3CsgB,CAAf;AACA,cAAM8I,MAAM,GAAG9I,SAAS,CAACv1C,UAAVu1C,CAAqBA,SAAS,CAACx1C,KAAVw1C,CAAgByI,SAAhBzI,EAA2B,CAA3BA,CAArBA,EAAoD3B,QAAQ,GAAG3e,UAAX2e,GAAwB,CAA5E2B,CAAf;AACA,cAAMjP,YAAY,GAAG9zC,aAAa,CAACqpD,WAAW,CAACvV,YAAb,CAAlC;;AACA,YAAIrhE,MAAM,CAAC8K,MAAP9K,CAAcqhE,YAAdrhE,EAA4B42D,IAA5B52D,CAAiCiE,CAAC,IAAIA,CAAC,KAAK,CAA5CjE,CAAJ,EAAoD;AAClDikB,aAAG,CAAC4E,SAAJ5E;AACAA,aAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAACk2E,kBAAxBj1D;AACAoI,4BAAkB,CAACpI,GAAD,EAAM;AACtB/f,aAAC,EAAEi1E,MADmB;AAEtB/0E,aAAC,EAAE60E,MAFmB;AAGtBnlE,aAAC,EAAE66D,QAHmB;AAItB18D,aAAC,EAAEy8D,SAJmB;AAKtBjmD,kBAAM,EAAE44C;AALc,WAAN,CAAlBh1C;AAOApI,aAAG,CAACoF,IAAJpF;AACAA,aAAG,CAACsF,MAAJtF;AACAA,aAAG,CAACwH,SAAJxH,GAAgB2yD,WAAW,CAAC3zD,eAA5BgB;AACAA,aAAG,CAAC4E,SAAJ5E;AACAoI,4BAAkB,CAACpI,GAAD,EAAM;AACtB/f,aAAC,EAAEk1E,MADmB;AAEtBh1E,aAAC,EAAE60E,MAAM,GAAG,CAFU;AAGtBnlE,aAAC,EAAE66D,QAAQ,GAAG,CAHQ;AAItB18D,aAAC,EAAEy8D,SAAS,GAAG,CAJO;AAKtBjmD,kBAAM,EAAE44C;AALc,WAAN,CAAlBh1C;AAOApI,aAAG,CAACoF,IAAJpF;AArBF,eAsBO;AACLA,aAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAACk2E,kBAAxBj1D;AACAA,aAAG,CAACgkC,QAAJhkC,CAAak1D,MAAbl1D,EAAqBg1D,MAArBh1D,EAA6B0qD,QAA7B1qD,EAAuCyqD,SAAvCzqD;AACAA,aAAG,CAACo1D,UAAJp1D,CAAek1D,MAAfl1D,EAAuBg1D,MAAvBh1D,EAA+B0qD,QAA/B1qD,EAAyCyqD,SAAzCzqD;AACAA,aAAG,CAACwH,SAAJxH,GAAgB2yD,WAAW,CAAC3zD,eAA5BgB;AACAA,aAAG,CAACgkC,QAAJhkC,CAAam1D,MAAbn1D,EAAqBg1D,MAAM,GAAG,CAA9Bh1D,EAAiC0qD,QAAQ,GAAG,CAA5C1qD,EAA+CyqD,SAAS,GAAG,CAA3DzqD;AACD;AACF;;AACDA,SAAG,CAACwH,SAAJxH,GAAgB,KAAK6yD,eAAL,CAAqBr1E,CAArB,CAAhBwiB;AACD;;AACDq1D,YAAQ,CAAC1kD,EAAD,EAAK3Q,GAAL,EAAUjhB,OAAV,EAAmB;AACzB,YAAM;AAACywE;AAAD,UAAS,IAAf;AACA,YAAM;AAACiB,mBAAD;AAAc6E,iBAAd;AAAyB9E,qBAAzB;AAAwC/F,iBAAxC;AAAmDC,gBAAnD;AAA6D3e;AAA7D,UAA2EhtD,OAAjF;AACA,YAAM2wE,QAAQ,GAAGlmD,MAAM,CAACzqB,OAAO,CAAC2wE,QAAT,CAAvB;AACA,UAAIa,cAAc,GAAGb,QAAQ,CAAC7vD,UAA9B;AACA,UAAI01D,YAAY,GAAG,CAAnB;AACA,YAAMlJ,SAAS,GAAGn1C,aAAa,CAACn4B,OAAO,CAAC4K,GAAT,EAAc,KAAK1J,CAAnB,EAAsB,KAAK2iB,KAA3B,CAA/B;;AACA,YAAM4yD,cAAc,GAAG,UAASzuD,IAAT,EAAe;AACpC/G,WAAG,CAACqH,QAAJrH,CAAa+G,IAAb/G,EAAmBqsD,SAAS,CAACpsE,CAAVosE,CAAY17C,EAAE,CAAC1wB,CAAH0wB,GAAO4kD,YAAnBlJ,CAAnBrsD,EAAqD2Q,EAAE,CAACxwB,CAAHwwB,GAAO4/C,cAAc,GAAG,CAA7EvwD;AACA2Q,UAAE,CAACxwB,CAAHwwB,IAAQ4/C,cAAc,GAAGE,WAAzB9/C;AAFF;;AAIA,YAAM8kD,uBAAuB,GAAGpJ,SAAS,CAAC5kD,SAAV4kD,CAAoBiJ,SAApBjJ,CAAhC;AACA,UAAI2D,QAAJ,EAAc0F,SAAd,EAAyB9uD,KAAzB,EAAgCppB,CAAhC,EAAmCie,CAAnC,EAAsC1d,IAAtC,EAA4CmlB,IAA5C;AACAlD,SAAG,CAACyH,SAAJzH,GAAgBs1D,SAAhBt1D;AACAA,SAAG,CAAC0H,YAAJ1H,GAAmB,QAAnBA;AACAA,SAAG,CAACN,IAAJM,GAAW0vD,QAAQ,CAACjtD,MAApBzC;AACA2Q,QAAE,CAAC1wB,CAAH0wB,GAAOkhD,WAAW,CAAC,IAAD,EAAO4D,uBAAP,EAAgC12E,OAAhC,CAAlB4xB;AACA3Q,SAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAAC42E,SAAxB31D;AACA3iB,UAAI,CAAC,KAAK8yE,UAAN,EAAkBqF,cAAlB,CAAJn4E;AACAk4E,kBAAY,GAAG/E,aAAa,IAAIiF,uBAAuB,KAAK,OAA7CjF,GACX8E,SAAS,KAAK,QAAdA,GAA0B5K,QAAQ,GAAG,CAAXA,GAAe3e,UAAzCupB,GAAwD5K,QAAQ,GAAG,CAAXA,GAAe3e,UAD5DykB,GAEX,CAFJ+E;;AAGA,WAAK/3E,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGyxE,IAAI,CAAC7xE,MAAxB,EAAgCH,CAAC,GAAGO,IAApC,EAA0C,EAAEP,CAA5C,EAA+C;AAC7CwyE,gBAAQ,GAAGR,IAAI,CAAChyE,CAAD,CAAfwyE;AACA0F,iBAAS,GAAG,KAAK7C,eAAL,CAAqBr1E,CAArB,CAAZk4E;AACA11D,WAAG,CAACwH,SAAJxH,GAAgB01D,SAAhB11D;AACA3iB,YAAI,CAAC2yE,QAAQ,CAACC,MAAV,EAAkBuF,cAAlB,CAAJn4E;AACAupB,aAAK,GAAGopD,QAAQ,CAACppD,KAAjBA;;AACA,YAAI4pD,aAAa,IAAI5pD,KAAK,CAACjpB,MAA3B,EAAmC;AACjC,eAAKi3E,aAAL,CAAmB50D,GAAnB,EAAwB2Q,EAAxB,EAA4BnzB,CAA5B,EAA+B6uE,SAA/B,EAA0CttE,OAA1C;;AACAwxE,wBAAc,GAAG1uE,IAAI,CAACqC,GAALrC,CAAS6tE,QAAQ,CAAC7vD,UAAlBhe,EAA8B4oE,SAA9B5oE,CAAjB0uE;AACD;;AACD,aAAK90D,CAAC,GAAG,CAAJA,EAAOyH,IAAI,GAAG0D,KAAK,CAACjpB,MAAzB,EAAiC8d,CAAC,GAAGyH,IAArC,EAA2C,EAAEzH,CAA7C,EAAgD;AAC9C+5D,wBAAc,CAAC5uD,KAAK,CAACnL,CAAD,CAAN,CAAd+5D;AACAjF,wBAAc,GAAGb,QAAQ,CAAC7vD,UAA1B0wD;AACD;;AACDlzE,YAAI,CAAC2yE,QAAQ,CAACE,KAAV,EAAiBsF,cAAjB,CAAJn4E;AACD;;AACDk4E,kBAAY,GAAG,CAAfA;AACAhF,oBAAc,GAAGb,QAAQ,CAAC7vD,UAA1B0wD;AACAlzE,UAAI,CAAC,KAAK+yE,SAAN,EAAiBoF,cAAjB,CAAJn4E;AACAszB,QAAE,CAACxwB,CAAHwwB,IAAQ8/C,WAAR9/C;AACD;;AACDilD,cAAU,CAACjlD,EAAD,EAAK3Q,GAAL,EAAUjhB,OAAV,EAAmB;AAC3B,YAAM0wE,MAAM,GAAG,KAAKA,MAApB;AACA,YAAM9xE,MAAM,GAAG8xE,MAAM,CAAC9xE,MAAtB;AACA,UAAIgyE,UAAJ,EAAgBnyE,CAAhB;;AACA,UAAIG,MAAJ,EAAY;AACV,cAAM0uE,SAAS,GAAGn1C,aAAa,CAACn4B,OAAO,CAAC4K,GAAT,EAAc,KAAK1J,CAAnB,EAAsB,KAAK2iB,KAA3B,CAA/B;AACA+N,UAAE,CAAC1wB,CAAH0wB,GAAOkhD,WAAW,CAAC,IAAD,EAAO9yE,OAAO,CAAC82E,WAAf,EAA4B92E,OAA5B,CAAlB4xB;AACAA,UAAE,CAACxwB,CAAHwwB,IAAQ5xB,OAAO,CAAC2xE,eAAhB//C;AACA3Q,WAAG,CAACyH,SAAJzH,GAAgBqsD,SAAS,CAAC5kD,SAAV4kD,CAAoBttE,OAAO,CAAC82E,WAA5BxJ,CAAhBrsD;AACAA,WAAG,CAAC0H,YAAJ1H,GAAmB,QAAnBA;AACA2vD,kBAAU,GAAGnmD,MAAM,CAACzqB,OAAO,CAAC4wE,UAAT,CAAnBA;AACA3vD,WAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAAC+2E,WAAxB91D;AACAA,WAAG,CAACN,IAAJM,GAAW2vD,UAAU,CAACltD,MAAtBzC;;AACA,aAAKxiB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGG,MAAhB,EAAwB,EAAEH,CAA1B,EAA6B;AAC3BwiB,aAAG,CAACqH,QAAJrH,CAAayvD,MAAM,CAACjyE,CAAD,CAAnBwiB,EAAwBqsD,SAAS,CAACpsE,CAAVosE,CAAY17C,EAAE,CAAC1wB,CAAfosE,CAAxBrsD,EAA2C2Q,EAAE,CAACxwB,CAAHwwB,GAAOg/C,UAAU,CAAC9vD,UAAX8vD,GAAwB,CAA1E3vD;AACA2Q,YAAE,CAACxwB,CAAHwwB,IAAQg/C,UAAU,CAAC9vD,UAAX8vD,GAAwB5wE,OAAO,CAAC4xE,aAAxChgD;AACD;AACF;AACF;;AACDozB,kBAAc,CAACpzB,EAAD,EAAK3Q,GAAL,EAAU+1D,WAAV,EAAuBh3E,OAAvB,EAAgC;AAC5C,YAAM;AAACiyE,cAAD;AAASK;AAAT,UAAmB,IAAzB;AACA,YAAM;AAACpxE,SAAD;AAAIE;AAAJ,UAASwwB,EAAf;AACA,YAAM;AAAC/N,aAAD;AAAQoB;AAAR,UAAkB+xD,WAAxB;AACA,YAAM;AAAC1tD,eAAD;AAAUG,gBAAV;AAAoBF,kBAApB;AAAgCC;AAAhC,UAA+Ce,aAAa,CAACvqB,OAAO,CAACslB,YAAT,CAAlE;AACArE,SAAG,CAACwH,SAAJxH,GAAgBjhB,OAAO,CAACigB,eAAxBgB;AACAA,SAAG,CAACiH,WAAJjH,GAAkBjhB,OAAO,CAACkgB,WAA1Be;AACAA,SAAG,CAACkH,SAAJlH,GAAgBjhB,OAAO,CAACsmB,WAAxBrF;AACAA,SAAG,CAAC4E,SAAJ5E;AACAA,SAAG,CAACgF,MAAJhF,CAAW/f,CAAC,GAAGooB,OAAfrI,EAAwB7f,CAAxB6f;;AACA,UAAIqxD,MAAM,KAAK,KAAf,EAAsB;AACpB,aAAK8C,SAAL,CAAexjD,EAAf,EAAmB3Q,GAAnB,EAAwB+1D,WAAxB,EAAqCh3E,OAArC;AACD;;AACDihB,SAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAG2iB,KAAJ3iB,GAAYuoB,QAAvBxI,EAAiC7f,CAAjC6f;AACAA,SAAG,CAACg2D,gBAAJh2D,CAAqB/f,CAAC,GAAG2iB,KAAzB5C,EAAgC7f,CAAhC6f,EAAmC/f,CAAC,GAAG2iB,KAAvC5C,EAA8C7f,CAAC,GAAGqoB,QAAlDxI;;AACA,UAAIqxD,MAAM,KAAK,QAAXA,IAAuBL,MAAM,KAAK,OAAtC,EAA+C;AAC7C,aAAKmD,SAAL,CAAexjD,EAAf,EAAmB3Q,GAAnB,EAAwB+1D,WAAxB,EAAqCh3E,OAArC;AACD;;AACDihB,SAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAG2iB,KAAf5C,EAAsB7f,CAAC,GAAG6jB,MAAJ7jB,GAAaooB,WAAnCvI;AACAA,SAAG,CAACg2D,gBAAJh2D,CAAqB/f,CAAC,GAAG2iB,KAAzB5C,EAAgC7f,CAAC,GAAG6jB,MAApChE,EAA4C/f,CAAC,GAAG2iB,KAAJ3iB,GAAYsoB,WAAxDvI,EAAqE7f,CAAC,GAAG6jB,MAAzEhE;;AACA,UAAIqxD,MAAM,KAAK,QAAf,EAAyB;AACvB,aAAK8C,SAAL,CAAexjD,EAAf,EAAmB3Q,GAAnB,EAAwB+1D,WAAxB,EAAqCh3E,OAArC;AACD;;AACDihB,SAAG,CAACiF,MAAJjF,CAAW/f,CAAC,GAAGqoB,UAAftI,EAA2B7f,CAAC,GAAG6jB,MAA/BhE;AACAA,SAAG,CAACg2D,gBAAJh2D,CAAqB/f,CAArB+f,EAAwB7f,CAAC,GAAG6jB,MAA5BhE,EAAoC/f,CAApC+f,EAAuC7f,CAAC,GAAG6jB,MAAJ7jB,GAAamoB,UAApDtI;;AACA,UAAIqxD,MAAM,KAAK,QAAXA,IAAuBL,MAAM,KAAK,MAAtC,EAA8C;AAC5C,aAAKmD,SAAL,CAAexjD,EAAf,EAAmB3Q,GAAnB,EAAwB+1D,WAAxB,EAAqCh3E,OAArC;AACD;;AACDihB,SAAG,CAACiF,MAAJjF,CAAW/f,CAAX+f,EAAc7f,CAAC,GAAGkoB,OAAlBrI;AACAA,SAAG,CAACg2D,gBAAJh2D,CAAqB/f,CAArB+f,EAAwB7f,CAAxB6f,EAA2B/f,CAAC,GAAGooB,OAA/BrI,EAAwC7f,CAAxC6f;AACAA,SAAG,CAAC+E,SAAJ/E;AACAA,SAAG,CAACoF,IAAJpF;;AACA,UAAIjhB,OAAO,CAACsmB,WAARtmB,GAAsB,CAA1B,EAA6B;AAC3BihB,WAAG,CAACsF,MAAJtF;AACD;AACF;;AACDi2D,0BAAsB,CAACl3E,OAAD,EAAU;AAC9B,YAAMsgB,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAM4b,KAAK,GAAG,KAAK8E,WAAnB;AACA,YAAMm2C,KAAK,GAAGj7C,KAAK,IAAIA,KAAK,CAACh7B,CAA7B;AACA,YAAMk2E,KAAK,GAAGl7C,KAAK,IAAIA,KAAK,CAAC96B,CAA7B;;AACA,UAAI+1E,KAAK,IAAIC,KAAb,EAAoB;AAClB,cAAM/6B,QAAQ,GAAGyzB,WAAW,CAAC9vE,OAAO,CAACq8C,QAAT,CAAXyzB,CAA8B3yE,IAA9B2yE,CAAmC,IAAnCA,EAAyC,KAAK9yC,OAA9C8yC,EAAuD,KAAKuD,cAA5DvD,CAAjB;;AACA,YAAI,CAACzzB,QAAL,EAAe;AACb;AACD;;AACD,cAAM75C,IAAI,GAAG,KAAK8wE,KAAL,GAAa9C,cAAc,CAAC,IAAD,EAAOxwE,OAAP,CAAxC;AACA,cAAMi1E,eAAe,GAAGj4E,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkBq/C,QAAlBr/C,EAA4B,KAAKs2E,KAAjCt2E,CAAxB;AACA,cAAM61E,SAAS,GAAGL,kBAAkB,CAAClyD,KAAD,EAAQtgB,OAAR,EAAiBi1E,eAAjB,CAApC;AACA,cAAMxuD,KAAK,GAAGmsD,kBAAkB,CAAC5yE,OAAD,EAAUi1E,eAAV,EAA2BpC,SAA3B,EAAsCvyD,KAAtC,CAAhC;;AACA,YAAI62D,KAAK,CAACp4C,GAANo4C,KAAc1wD,KAAK,CAACvlB,CAApBi2E,IAAyBC,KAAK,CAACr4C,GAANq4C,KAAc3wD,KAAK,CAACrlB,CAAjD,EAAoD;AAClD,eAAK6wE,MAAL,GAAcY,SAAS,CAACZ,MAAxB;AACA,eAAKK,MAAL,GAAcO,SAAS,CAACP,MAAxB;AACA,eAAKzuD,KAAL,GAAarhB,IAAI,CAACqhB,KAAlB;AACA,eAAKoB,MAAL,GAAcziB,IAAI,CAACyiB,MAAnB;AACA,eAAKyuD,MAAL,GAAcr3B,QAAQ,CAACn7C,CAAvB;AACA,eAAKyyE,MAAL,GAAct3B,QAAQ,CAACj7C,CAAvB;;AACA,eAAK6oC,kBAAL,GAA0B/K,MAA1B,CAAiC,IAAjC,EAAuCzY,KAAvC;AACD;AACF;AACF;;AACD4wD,eAAW,GAAG;AACZ,aAAO,CAAC,CAAC,KAAKjE,OAAd;AACD;;AACDr2C,QAAI,CAAC9b,GAAD,EAAM;AACR,YAAMjhB,OAAO,GAAG,KAAKA,OAAL,CAAawtB,UAAb,CAAwB,KAAK1I,UAAL,EAAxB,CAAhB;AACA,UAAIsuD,OAAO,GAAG,KAAKA,OAAnB;;AACA,UAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AACD,WAAK8D,sBAAL,CAA4Bl3E,OAA5B;;AACA,YAAMg3E,WAAW,GAAG;AAClBnzD,aAAK,EAAE,KAAKA,KADM;AAElBoB,cAAM,EAAE,KAAKA;AAFK,OAApB;AAIA,YAAM2M,EAAE,GAAG;AACT1wB,SAAC,EAAE,KAAKA,CADC;AAETE,SAAC,EAAE,KAAKA;AAFC,OAAX;AAIAgyE,aAAO,GAAGtwE,IAAI,CAAC8B,GAAL9B,CAASswE,OAATtwE,IAAoB,IAApBA,GAA2B,CAA3BA,GAA+BswE,OAAzCA;AACA,YAAMr6B,OAAO,GAAGvuB,SAAS,CAACxqB,OAAO,CAAC+4C,OAAT,CAAzB;AACA,YAAMu+B,iBAAiB,GAAG,KAAK3lC,KAAL,CAAW/yC,MAAX,IAAqB,KAAKwyE,UAAL,CAAgBxyE,MAArC,IAA+C,KAAK6xE,IAAL,CAAU7xE,MAAzD,IAAmE,KAAKyyE,SAAL,CAAezyE,MAAlF,IAA4F,KAAK8xE,MAAL,CAAY9xE,MAAlI;;AACA,UAAIoB,OAAO,CAACm6C,OAARn6C,IAAmBs3E,iBAAvB,EAA0C;AACxCr2D,WAAG,CAACiD,IAAJjD;AACAA,WAAG,CAACs2D,WAAJt2D,GAAkBmyD,OAAlBnyD;AACA,aAAK+jC,cAAL,CAAoBpzB,EAApB,EAAwB3Q,GAAxB,EAA6B+1D,WAA7B,EAA0Ch3E,OAA1C;AACAo4B,6BAAqB,CAACnX,GAAD,EAAMjhB,OAAO,CAACmuE,aAAd,CAArB/1C;AACAxG,UAAE,CAACxwB,CAAHwwB,IAAQmnB,OAAO,CAACnyB,GAAhBgL;AACA,aAAK6zB,SAAL,CAAe7zB,EAAf,EAAmB3Q,GAAnB,EAAwBjhB,OAAxB;AACA,aAAKs2E,QAAL,CAAc1kD,EAAd,EAAkB3Q,GAAlB,EAAuBjhB,OAAvB;AACA,aAAK62E,UAAL,CAAgBjlD,EAAhB,EAAoB3Q,GAApB,EAAyBjhB,OAAzB;AACA04B,4BAAoB,CAACzX,GAAD,EAAMjhB,OAAO,CAACmuE,aAAd,CAApBz1C;AACAzX,WAAG,CAACqD,OAAJrD;AACD;AACF;;AACDk8C,qBAAiB,GAAG;AAClB,aAAO,KAAKngC,OAAL,IAAgB,EAAvB;AACD;;AACDogC,qBAAiB,CAACC,cAAD,EAAiB2S,aAAjB,EAAgC;AAC/C,YAAM1S,UAAU,GAAG,KAAKtgC,OAAxB;AACA,YAAMiC,MAAM,GAAGo+B,cAAc,CAAC99D,GAAf89D,CAAmB,SAA2B;AAAA,YAA1B;AAACl+D,sBAAD;AAAeC;AAAf,SAA0B;AAC3D,cAAM2L,IAAI,GAAG,KAAKuV,KAAL,CAAWsmB,cAAX,CAA0BznC,YAA1B,CAAb;;AACA,YAAI,CAAC4L,IAAL,EAAW;AACT,gBAAM,IAAIujB,KAAJ,CAAU,oCAAoCnvB,YAA9C,CAAN;AACD;;AACD,eAAO;AACLA,sBADK;AAELg0B,iBAAO,EAAEpoB,IAAI,CAACwY,IAALxY,CAAU3L,KAAV2L,CAFJ;AAGL3L;AAHK,SAAP;AALa,QAAf;AAWA,YAAMiN,OAAO,GAAG,CAACxN,cAAc,CAACy+D,UAAD,EAAar+B,MAAb,CAA/B;;AACA,YAAMu4C,eAAe,GAAG,KAAKC,gBAAL,CAAsBx4C,MAAtB,EAA8B+wC,aAA9B,CAAxB;;AACA,UAAI3jE,OAAO,IAAImrE,eAAf,EAAgC;AAC9B,aAAKx6C,OAAL,GAAeiC,MAAf;AACA,aAAKo0C,cAAL,GAAsBrD,aAAtB;AACA,aAAK0H,mBAAL,GAA2B,IAA3B;AACA,aAAKx4C,MAAL,CAAY,IAAZ;AACD;AACF;;AACDyvC,eAAW,CAAC/rE,CAAD,EAAI26D,MAAJ,EAAgC;AAAA,UAApBvF,WAAoB,uEAAN,IAAM;;AACzC,UAAIuF,MAAM,IAAI,KAAKma,mBAAnB,EAAwC;AACtC,eAAO,KAAP;AACD;;AACD,WAAKA,mBAAL,GAA2B,KAA3B;AACA,YAAM13E,OAAO,GAAG,KAAKA,OAArB;AACA,YAAMs9D,UAAU,GAAG,KAAKtgC,OAAL,IAAgB,EAAnC;;AACA,YAAMiC,MAAM,GAAG,KAAK4+B,kBAAL,CAAwBj7D,CAAxB,EAA2B06D,UAA3B,EAAuCC,MAAvC,EAA+CvF,WAA/C,CAAf;;AACA,YAAMwf,eAAe,GAAG,KAAKC,gBAAL,CAAsBx4C,MAAtB,EAA8Br8B,CAA9B,CAAxB;;AACA,YAAMyJ,OAAO,GAAGkxD,MAAM,IAAI,CAAC1+D,cAAc,CAACogC,MAAD,EAASq+B,UAAT,CAAzBC,IAAiDia,eAAjE;;AACA,UAAInrE,OAAJ,EAAa;AACX,aAAK2wB,OAAL,GAAeiC,MAAf;;AACA,YAAIj/B,OAAO,CAACm6C,OAARn6C,IAAmBA,OAAO,CAACm1E,QAA/B,EAAyC;AACvC,eAAK9B,cAAL,GAAsB;AACpBnyE,aAAC,EAAE0B,CAAC,CAAC1B,CADe;AAEpBE,aAAC,EAAEwB,CAAC,CAACxB;AAFe,WAAtB;AAIA,eAAK89B,MAAL,CAAY,IAAZ,EAAkBq+B,MAAlB;AACD;AACF;;AACD,aAAOlxD,OAAP;AACD;;AACDwxD,sBAAkB,CAACj7D,CAAD,EAAI06D,UAAJ,EAAgBC,MAAhB,EAAwBvF,WAAxB,EAAqC;AACrD,YAAMh4D,OAAO,GAAG,KAAKA,OAArB;;AACA,UAAI4C,CAAC,CAAC7F,IAAF6F,KAAW,UAAf,EAA2B;AACzB,eAAO,EAAP;AACD;;AACD,UAAI,CAACo1D,WAAL,EAAkB;AAChB,eAAOsF,UAAP;AACD;;AACD,YAAMr+B,MAAM,GAAG,KAAK3e,KAAL,CAAWg8C,yBAAX,CAAqC15D,CAArC,EAAwC5C,OAAO,CAACshB,IAAhD,EAAsDthB,OAAtD,EAA+Du9D,MAA/D,CAAf;;AACA,UAAIv9D,OAAO,CAACxB,OAAZ,EAAqB;AACnBygC,cAAM,CAACzgC,OAAPygC;AACD;;AACD,aAAOA,MAAP;AACD;;AACDw4C,oBAAgB,CAACx4C,MAAD,EAASr8B,CAAT,EAAY;AAC1B,YAAM;AAAC8wE,cAAD;AAASC,cAAT;AAAiB3zE;AAAjB,UAA4B,IAAlC;AACA,YAAMq8C,QAAQ,GAAGyzB,WAAW,CAAC9vE,OAAO,CAACq8C,QAAT,CAAXyzB,CAA8B3yE,IAA9B2yE,CAAmC,IAAnCA,EAAyC7wC,MAAzC6wC,EAAiDltE,CAAjDktE,CAAjB;AACA,aAAOzzB,QAAQ,KAAK,KAAbA,KAAuBq3B,MAAM,KAAKr3B,QAAQ,CAACn7C,CAApBwyE,IAAyBC,MAAM,KAAKt3B,QAAQ,CAACj7C,CAApEi7C,CAAP;AACD;;AAnhB2B;;AAqhB9B82B,SAAO,CAACrD,WAARqD,GAAsBrD,WAAtBqD;AACA,MAAIwE,cAAc,GAAG;AACnBj7E,MAAE,EAAE,SADe;AAEnBuyE,YAAQ,EAAEkE,OAFS;AAGnBrD,eAHmB;;AAInB8H,aAAS,CAACt3D,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAC/B,UAAIA,OAAJ,EAAa;AACXsgB,aAAK,CAACoxB,OAANpxB,GAAgB,IAAI6yD,OAAJ,CAAY;AAAC7yD,eAAD;AAAQtgB;AAAR,SAAZ,CAAhBsgB;AACD;AAPgB;;AASnBi+B,gBAAY,CAACj+B,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAClC,UAAIsgB,KAAK,CAACoxB,OAAV,EAAmB;AACjBpxB,aAAK,CAACoxB,OAANpxB,CAAcolB,UAAdplB,CAAyBtgB,OAAzBsgB;AACD;AAZgB;;AAcnBymB,SAAK,CAACzmB,KAAD,EAAQ4qD,KAAR,EAAelrE,OAAf,EAAwB;AAC3B,UAAIsgB,KAAK,CAACoxB,OAAV,EAAmB;AACjBpxB,aAAK,CAACoxB,OAANpxB,CAAcolB,UAAdplB,CAAyBtgB,OAAzBsgB;AACD;AAjBgB;;AAmBnBu3D,aAAS,CAACv3D,KAAD,EAAQ;AACf,YAAMoxB,OAAO,GAAGpxB,KAAK,CAACoxB,OAAtB;;AACA,UAAIA,OAAO,IAAIA,OAAO,CAAC2lC,WAAR3lC,EAAf,EAAsC;AACpC,cAAMvzC,IAAI,GAAG;AACXuzC;AADW,SAAb;;AAGA,YAAIpxB,KAAK,CAAC0/B,aAAN1/B,CAAoB,mBAApBA,EAAyCniB,IAAzCmiB,MAAmD,KAAvD,EAA8D;AAC5D;AACD;;AACDoxB,eAAO,CAAC3U,IAAR2U,CAAapxB,KAAK,CAACW,GAAnBywB;AACApxB,aAAK,CAAC0/B,aAAN1/B,CAAoB,kBAApBA,EAAwCniB,IAAxCmiB;AACD;AA9BgB;;AAgCnB4uD,cAAU,CAAC5uD,KAAD,EAAQniB,IAAR,EAAc;AACtB,UAAImiB,KAAK,CAACoxB,OAAV,EAAmB;AACjB,cAAM8F,gBAAgB,GAAGr5C,IAAI,CAACo/D,MAA9B;;AACA,YAAIj9C,KAAK,CAACoxB,OAANpxB,CAAcquD,WAAdruD,CAA0BniB,IAAI,CAACq/B,KAA/Bld,EAAsCk3B,gBAAtCl3B,EAAwDniB,IAAI,CAAC65D,WAA7D13C,CAAJ,EAA+E;AAC7EniB,cAAI,CAACkO,OAALlO,GAAe,IAAfA;AACD;AACF;AAtCgB;;AAwCnB6kB,YAAQ,EAAE;AACRm3B,aAAO,EAAE,IADD;AAERg7B,cAAQ,EAAE,IAFF;AAGR94B,cAAQ,EAAE,SAHF;AAIRp8B,qBAAe,EAAE,iBAJT;AAKR21D,gBAAU,EAAE,MALJ;AAMRvH,eAAS,EAAE;AACT7vD,cAAM,EAAE;AADC,OANH;AASR8yD,kBAAY,EAAE,CATN;AAURC,uBAAiB,EAAE,CAVX;AAWRn1B,gBAAU,EAAE,MAXJ;AAYRw6B,eAAS,EAAE,MAZH;AAaRlF,iBAAW,EAAE,CAbL;AAcRf,cAAQ,EAAE,EAdF;AAgBR4F,eAAS,EAAE,MAhBH;AAiBRQ,iBAAW,EAAE,MAjBL;AAkBRnF,mBAAa,EAAE,CAlBP;AAmBRD,qBAAe,EAAE,CAnBT;AAoBRf,gBAAU,EAAE;AACVpyD,cAAM,EAAE;AADE,OApBJ;AAuBRs4D,iBAAW,EAAE,MAvBL;AAwBR/9B,aAAO,EAAE,CAxBD;AAyBRq5B,kBAAY,EAAE,CAzBN;AA0BRD,eAAS,EAAE,CA1BH;AA2BR7sD,kBAAY,EAAE,CA3BN;AA4BRomD,eAAS,EAAE,CAACzqD,GAAD,EAAM2G,IAAN,KAAeA,IAAI,CAAC+oD,QAAL/oD,CAAcplB,IA5BhC;AA6BRmpE,cAAQ,EAAE,CAAC1qD,GAAD,EAAM2G,IAAN,KAAeA,IAAI,CAAC+oD,QAAL/oD,CAAcplB,IA7B/B;AA8BR0zE,wBAAkB,EAAE,MA9BZ;AA+BRzE,mBAAa,EAAE,IA/BP;AAgCRzkB,gBAAU,EAAE,CAhCJ;AAiCR9sC,iBAAW,EAAE,eAjCL;AAkCRoG,iBAAW,EAAE,CAlCL;AAmCRtG,eAAS,EAAE;AACTsc,gBAAQ,EAAE,GADD;AAEToC,cAAM,EAAE;AAFC,OAnCH;AAuCRsB,gBAAU,EAAE;AACVN,eAAO,EAAE;AACP3iC,cAAI,EAAE,QADC;AAEP8iC,oBAAU,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,OAAX,EAAoB,QAApB,EAA8B,QAA9B,EAAwC,QAAxC;AAFL,SADC;AAKVuzC,eAAO,EAAE;AACP10C,gBAAM,EAAE,QADD;AAEPpC,kBAAQ,EAAE;AAFH;AALC,OAvCJ;AAiDRF,eAAS,EAAE;AACT43C,mBAAW,EAAEx3E,IADJ;;AAETm1C,aAAK,CAACshC,YAAD,EAAe;AAClB,cAAIA,YAAY,CAACr0E,MAAbq0E,GAAsB,CAA1B,EAA6B;AAC3B,kBAAMxwE,IAAI,GAAGwwE,YAAY,CAAC,CAAD,CAAzB;AACA,kBAAM/qC,MAAM,GAAGzlC,IAAI,CAAC6d,KAAL7d,CAAW8gB,IAAX9gB,CAAgBylC,MAA/B;AACA,kBAAM4vC,UAAU,GAAG5vC,MAAM,GAAGA,MAAM,CAACtpC,MAAV,GAAmB,CAA5C;;AACA,gBAAI,QAAQ,KAAKoB,OAAb,IAAwB,KAAKA,OAAL,CAAashB,IAAb,KAAsB,SAAlD,EAA6D;AAC3D,qBAAO7e,IAAI,CAACshC,OAALthC,CAAa2mC,KAAb3mC,IAAsB,EAA7B;AADF,mBAEO,IAAIA,IAAI,CAAC2mC,KAAT,EAAgB;AACrB,qBAAO3mC,IAAI,CAAC2mC,KAAZ;AADK,mBAEA,IAAI0uC,UAAU,GAAG,CAAbA,IAAkBr1E,IAAI,CAACwhC,SAALxhC,GAAiBq1E,UAAvC,EAAmD;AACxD,qBAAO5vC,MAAM,CAACzlC,IAAI,CAACwhC,SAAN,CAAb;AACD;AACF;;AACD,iBAAO,EAAP;AAfO;;AAiBTgwC,kBAAU,EAAEz3E,IAjBH;AAkBT40E,kBAAU,EAAE50E,IAlBH;AAmBT83E,mBAAW,EAAE93E,IAnBJ;;AAoBT4sC,aAAK,CAAC8L,WAAD,EAAc;AACjB,cAAI,QAAQ,KAAKl1C,OAAb,IAAwB,KAAKA,OAAL,CAAashB,IAAb,KAAsB,SAAlD,EAA6D;AAC3D,mBAAO4zB,WAAW,CAAC9L,KAAZ8L,GAAoB,IAApBA,GAA2BA,WAAW,CAACE,cAAvCF,IAAyDA,WAAW,CAACE,cAA5E;AACD;;AACD,cAAIhM,KAAK,GAAG8L,WAAW,CAACnR,OAAZmR,CAAoB9L,KAApB8L,IAA6B,EAAzC;;AACA,cAAI9L,KAAJ,EAAW;AACTA,iBAAK,IAAI,IAATA;AACD;;AACD,gBAAMxsC,KAAK,GAAGs4C,WAAW,CAACE,cAA1B;;AACA,cAAI,CAACz4C,aAAa,CAACC,KAAD,CAAlB,EAA2B;AACzBwsC,iBAAK,IAAIxsC,KAATwsC;AACD;;AACD,iBAAOA,KAAP;AAhCO;;AAkCT0rC,kBAAU,CAAC5/B,WAAD,EAAc;AACtB,gBAAMnqC,IAAI,GAAGmqC,WAAW,CAAC50B,KAAZ40B,CAAkBtO,cAAlBsO,CAAiCA,WAAW,CAAC/1C,YAA7C+1C,CAAb;AACA,gBAAMl1C,OAAO,GAAG+K,IAAI,CAACq4B,UAALr4B,CAAgBqoB,QAAhBroB,CAAyBmqC,WAAW,CAACjR,SAArCl5B,CAAhB;AACA,iBAAO;AACLmV,uBAAW,EAAElgB,OAAO,CAACkgB,WADhB;AAELD,2BAAe,EAAEjgB,OAAO,CAACigB,eAFpB;AAGLqG,uBAAW,EAAEtmB,OAAO,CAACsmB,WAHhB;AAILmV,sBAAU,EAAEz7B,OAAO,CAACy7B,UAJf;AAKLC,4BAAgB,EAAE17B,OAAO,CAAC07B,gBALrB;AAML2iC,wBAAY,EAAE;AANT,WAAP;AArCO;;AA8CT2W,sBAAc,GAAG;AACf,iBAAO,KAAKh1E,OAAL,CAAa42E,SAApB;AA/CO;;AAiDT7B,uBAAe,CAAC7/B,WAAD,EAAc;AAC3B,gBAAMnqC,IAAI,GAAGmqC,WAAW,CAAC50B,KAAZ40B,CAAkBtO,cAAlBsO,CAAiCA,WAAW,CAAC/1C,YAA7C+1C,CAAb;AACA,gBAAMl1C,OAAO,GAAG+K,IAAI,CAACq4B,UAALr4B,CAAgBqoB,QAAhBroB,CAAyBmqC,WAAW,CAACjR,SAArCl5B,CAAhB;AACA,iBAAO;AACLwa,sBAAU,EAAEvlB,OAAO,CAACulB,UADf;AAELC,oBAAQ,EAAExlB,OAAO,CAACwlB;AAFb,WAAP;AApDO;;AAyDT+uD,kBAAU,EAAE/3E,IAzDH;AA0DT60E,iBAAS,EAAE70E,IA1DF;AA2DTk4E,oBAAY,EAAEl4E,IA3DL;AA4DTk0E,cAAM,EAAEl0E,IA5DC;AA6DTm4E,mBAAW,EAAEn4E;AA7DJ;AAjDH,KAxCS;AAyJnBo7C,iBAAa,EAAE;AACb+4B,cAAQ,EAAE,MADG;AAEbC,gBAAU,EAAE,MAFC;AAGbvC,eAAS,EAAE;AAHE,KAzJI;AA8JnB3uD,eAAW,EAAE;AACXuD,iBAAW,EAAGV,IAAD,IAAUA,IAAI,KAAK,QAATA,IAAqBA,IAAI,KAAK,UAA9BA,IAA4CA,IAAI,KAAK,UADjE;AAEXY,gBAAU,EAAE,KAFD;AAGXiZ,eAAS,EAAE;AACTnZ,mBAAW,EAAE,KADJ;AAETE,kBAAU,EAAE;AAFH,OAHA;AAOXnD,eAAS,EAAE;AACToD,iBAAS,EAAE;AADF,OAPA;AAUX4c,gBAAU,EAAE;AACV5c,iBAAS,EAAE;AADD;AAVD,KA9JM;AA4KnB8yC,0BAAsB,EAAE,CAAC,aAAD;AA5KL,GAArB;AA+KA,MAAIr0C,OAAO,GAAG,aAAa7kB,MAAM,CAACgtC,MAAPhtC,CAAc;AACzC0rD,aAAS,EAAE,IAD8B;AAEzCqvB,cAAU,EAAE1Q,iBAF6B;AAGzC2Q,UAAM,EAAE54E,KAHiC;AAIzC4sE,UAAM,EAAEgD,aAJiC;AAKzCiJ,YAAQ,EAAEpI,eAL+B;AAMzCT,SAAK,EAAEO,YANkC;AAOzCwD,WAAO,EAAEwE;AAPgC,GAAd36E,CAA3B;;AAUA,QAAMk7E,WAAW,GAAG,CAAChwC,MAAD,EAAShE,GAAT,EAAc9kC,KAAd,EAAqB+4E,WAArB,KAAqC;AACvD,QAAI,OAAOj0C,GAAP,KAAe,QAAnB,EAA6B;AAC3B9kC,WAAK,GAAG8oC,MAAM,CAACpmC,IAAPomC,CAAYhE,GAAZgE,IAAmB,CAA3B9oC;AACA+4E,iBAAW,CAAC3O,OAAZ2O,CAAoB;AAAC/4E,aAAD;AAAQgqC,aAAK,EAAElF;AAAf,OAApBi0C;AAFF,WAGO,IAAIzzE,KAAK,CAACw/B,GAAD,CAAT,EAAgB;AACrB9kC,WAAK,GAAG,IAARA;AACD;;AACD,WAAOA,KAAP;AAPF;;AASA,WAASg5E,cAAT,CAAwBlwC,MAAxB,EAAgChE,GAAhC,EAAqC9kC,KAArC,EAA4C+4E,WAA5C,EAAyD;AACvD,UAAM79B,KAAK,GAAGpS,MAAM,CAACpoC,OAAPooC,CAAehE,GAAfgE,CAAd;;AACA,QAAIoS,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB,aAAO49B,WAAW,CAAChwC,MAAD,EAAShE,GAAT,EAAc9kC,KAAd,EAAqB+4E,WAArB,CAAlB;AACD;;AACD,UAAMxwE,IAAI,GAAGugC,MAAM,CAACmwC,WAAPnwC,CAAmBhE,GAAnBgE,CAAb;AACA,WAAOoS,KAAK,KAAK3yC,IAAV2yC,GAAiBl7C,KAAjBk7C,GAAyBA,KAAhC;AACD;;AACD,QAAMuB,UAAU,GAAG,CAACz8C,KAAD,EAAQ+F,GAAR,KAAgB/F,KAAK,KAAK,IAAVA,GAAiB,IAAjBA,GAAwB6H,WAAW,CAACnE,IAAI,CAACc,KAALd,CAAW1D,KAAX0D,CAAD,EAAoB,CAApB,EAAuBqC,GAAvB,CAAtE;;AACA,QAAMmzE,aAAN,SAA4B57B,KAA5B,CAAkC;AAChCx+B,eAAW,CAACogB,GAAD,EAAM;AACf,YAAMA,GAAN;AACA,WAAKi6C,WAAL,GAAmB13E,SAAnB;AACA,WAAK23E,WAAL,GAAmB,CAAnB;AACA,WAAKC,YAAL,GAAoB,EAApB;AACD;;AACD36B,QAAI,CAAC0W,YAAD,EAAe;AACjB,YAAMkkB,KAAK,GAAG,KAAKD,YAAnB;;AACA,UAAIC,KAAK,CAAC95E,MAAV,EAAkB;AAChB,cAAMspC,MAAM,GAAG,KAAKC,SAAL,EAAf;;AACA,aAAK,MAAM;AAAC/oC,eAAD;AAAQgqC;AAAR,SAAX,IAA6BsvC,KAA7B,EAAoC;AAClC,cAAIxwC,MAAM,CAAC9oC,KAAD,CAAN8oC,KAAkBkB,KAAtB,EAA6B;AAC3BlB,kBAAM,CAACp/B,MAAPo/B,CAAc9oC,KAAd8oC,EAAqB,CAArBA;AACD;AACF;;AACD,aAAKuwC,YAAL,GAAoB,EAApB;AACD;;AACD,YAAM36B,IAAN,CAAW0W,YAAX;AACD;;AACD/kC,SAAK,CAACyU,GAAD,EAAM9kC,KAAN,EAAa;AAChB,UAAIzC,aAAa,CAACunC,GAAD,CAAjB,EAAwB;AACtB,eAAO,IAAP;AACD;;AACD,YAAMgE,MAAM,GAAG,KAAKC,SAAL,EAAf;AACA/oC,8BAAK,GAAG5B,QAAQ,CAAC4B,KAAD,CAAR5B,IAAmB0qC,MAAM,CAAC9oC,KAAD,CAAN8oC,KAAkBhE,GAArC1mC,GAA2C4B,KAA3C5B,GACJ46E,cAAc,CAAClwC,MAAD,EAAShE,GAAT,EAAcvmC,cAAc,CAACyB,KAAD,EAAQ8kC,GAAR,CAA5B,EAA0C,KAAKu0C,YAA/C,CADlBr5E;AAEA,aAAOy8C,UAAU,CAACz8C,KAAD,EAAQ8oC,MAAM,CAACtpC,MAAPspC,GAAgB,CAAxB,CAAjB;AACD;;AACD2W,uBAAmB,GAAG;AACpB,YAAM;AAACrzC,kBAAD;AAAaC;AAAb,UAA2B,KAAKC,aAAL,EAAjC;AACA,UAAI;AAACxG,WAAD;AAAMC;AAAN,UAAa,KAAKyjC,SAAL,CAAe,IAAf,CAAjB;;AACA,UAAI,KAAK5oC,OAAL,CAAak5B,MAAb,KAAwB,OAA5B,EAAqC;AACnC,YAAI,CAAC1tB,UAAL,EAAiB;AACftG,aAAG,GAAG,CAANA;AACD;;AACD,YAAI,CAACuG,UAAL,EAAiB;AACftG,aAAG,GAAG,KAAKgjC,SAAL,GAAiBvpC,MAAjB,GAA0B,CAAhCuG;AACD;AACF;;AACD,WAAKD,GAAL,GAAWA,GAAX;AACA,WAAKC,GAAL,GAAWA,GAAX;AACD;;AACD65C,cAAU,GAAG;AACX,YAAM95C,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAMC,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAMmsC,MAAM,GAAG,KAAKtxC,OAAL,CAAasxC,MAA5B;AACA,YAAMzE,KAAK,GAAG,EAAd;AACA,UAAI3E,MAAM,GAAG,KAAKC,SAAL,EAAb;AACAD,YAAM,GAAIhjC,GAAG,KAAK,CAARA,IAAaC,GAAG,KAAK+iC,MAAM,CAACtpC,MAAPspC,GAAgB,CAArChjC,GAA0CgjC,MAA1ChjC,GAAmDgjC,MAAM,CAAC9qC,KAAP8qC,CAAahjC,GAAbgjC,EAAkB/iC,GAAG,GAAG,CAAxB+iC,CAA7DA;AACA,WAAKswC,WAAL,GAAmB11E,IAAI,CAACqC,GAALrC,CAASolC,MAAM,CAACtpC,MAAPspC,IAAiBoJ,MAAM,GAAG,CAAH,GAAO,CAA9BpJ,CAATplC,EAA2C,CAA3CA,CAAnB;AACA,WAAKy1E,WAAL,GAAmB,KAAKrzE,GAAL,IAAYosC,MAAM,GAAG,GAAH,GAAS,CAA3B,CAAnB;;AACA,WAAK,IAAI10C,KAAK,GAAGsI,GAAjB,EAAsBtI,KAAK,IAAIuI,GAA/B,EAAoCvI,KAAK,EAAzC,EAA6C;AAC3CiwC,aAAK,CAAC/qC,IAAN+qC,CAAW;AAACjwC;AAAD,SAAXiwC;AACD;;AACD,aAAOA,KAAP;AACD;;AACDxD,oBAAgB,CAACzsC,KAAD,EAAQ;AACtB,YAAMsrC,MAAM,GAAG,KAAKC,SAAL,EAAf;;AACA,UAAIvrC,KAAK,IAAI,CAATA,IAAcA,KAAK,GAAGsrC,MAAM,CAACtpC,MAAjC,EAAyC;AACvC,eAAOspC,MAAM,CAACtrC,KAAD,CAAb;AACD;;AACD,aAAOA,KAAP;AACD;;AACD0jC,aAAS,GAAG;AACV,YAAMA,SAAN;;AACA,UAAI,CAAC,KAAKiO,YAAL,EAAL,EAA0B;AACxB,aAAK+O,cAAL,GAAsB,CAAC,KAAKA,cAA5B;AACD;AACF;;AACD3xC,oBAAgB,CAAC/O,KAAD,EAAQ;AACtB,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7BA,aAAK,GAAG,KAAK6yB,KAAL,CAAW7yB,KAAX,CAARA;AACD;;AACD,aAAOA,KAAK,KAAK,IAAVA,GAAiB+rC,GAAjB/rC,GAAuB,KAAKi0C,kBAAL,CAAwB,CAACj0C,KAAK,GAAG,KAAK27E,WAAd,IAA6B,KAAKC,WAA1D,CAA9B;AACD;;AACD1rC,mBAAe,CAAC1tC,KAAD,EAAQ;AACrB,YAAMytC,KAAK,GAAG,KAAKA,KAAnB;;AACA,UAAIztC,KAAK,GAAG,CAARA,IAAaA,KAAK,GAAGytC,KAAK,CAACjuC,MAANiuC,GAAe,CAAxC,EAA2C;AACzC,eAAO,IAAP;AACD;;AACD,aAAO,KAAKlhC,gBAAL,CAAsBkhC,KAAK,CAACztC,KAAD,CAALytC,CAAajwC,KAAnC,CAAP;AACD;;AACD2lD,oBAAgB,CAAC99B,KAAD,EAAQ;AACtB,aAAO3hB,IAAI,CAACc,KAALd,CAAW,KAAKy1E,WAAL,GAAmB,KAAK91B,kBAAL,CAAwBh+B,KAAxB,IAAiC,KAAK+zD,WAApE11E,CAAP;AACD;;AACD2sC,gBAAY,GAAG;AACb,aAAO,KAAK5oB,MAAZ;AACD;;AAxF+B;;AA0FlCyxD,eAAa,CAAC57E,EAAd47E,GAAmB,UAAnBA;AACAA,eAAa,CAACt1D,QAAds1D,GAAyB;AACvBzrC,SAAK,EAAE;AACL5uC,cAAQ,EAAEq6E,aAAa,CAACr7E,SAAdq7E,CAAwBjvC;AAD7B;AADgB,GAAzBivC;;AAMA,WAASK,eAAT,CAAyBC,iBAAzB,EAA4CC,SAA5C,EAAuD;AACrD,UAAMhsC,KAAK,GAAG,EAAd;AACA,UAAMisC,WAAW,GAAG,KAApB;AACA,UAAM;AAAC5/C,YAAD;AAAS6qB,UAAT;AAAe7+C,SAAf;AAAoBC,SAApB;AAAyB4zE,eAAzB;AAAoC5tE,WAApC;AAA2C6tE,cAA3C;AAAqDC,eAArD;AAAgEC;AAAhE,QAAiFN,iBAAvF;AACA,UAAM3vB,IAAI,GAAGlF,IAAI,IAAI,CAArB;AACA,UAAMo1B,SAAS,GAAGH,QAAQ,GAAG,CAA7B;AACA,UAAM;AAAC9zE,SAAG,EAAEk0E,IAAN;AAAYj0E,SAAG,EAAEk0E;AAAjB,QAAyBR,SAA/B;AACA,UAAMrtE,UAAU,GAAG,CAAC7O,aAAa,CAACuI,GAAD,CAAjC;AACA,UAAMuG,UAAU,GAAG,CAAC9O,aAAa,CAACwI,GAAD,CAAjC;AACA,UAAMm0E,YAAY,GAAG,CAAC38E,aAAa,CAACwO,KAAD,CAAnC;AACA,UAAMouE,UAAU,GAAG,CAACF,IAAI,GAAGD,IAAR,KAAiBH,SAAS,GAAG,CAA7B,CAAnB;AACA,QAAI3lC,OAAO,GAAG7vC,OAAO,CAAC,CAAC41E,IAAI,GAAGD,IAAR,IAAgBD,SAAhB,GAA4BlwB,IAA7B,CAAPxlD,GAA4CwlD,IAA1D;AACA,QAAI/qB,MAAJ,EAAYs7C,OAAZ,EAAqBC,OAArB,EAA8BC,SAA9B;;AACA,QAAIpmC,OAAO,GAAGwlC,WAAVxlC,IAAyB,CAAC9nC,UAA1B8nC,IAAwC,CAAC7nC,UAA7C,EAAyD;AACvD,aAAO,CAAC;AAAC7O,aAAK,EAAEw8E;AAAR,OAAD,EAAgB;AAACx8E,aAAK,EAAEy8E;AAAR,OAAhB,CAAP;AACD;;AACDK,aAAS,GAAG52E,IAAI,CAACo4C,IAALp4C,CAAUu2E,IAAI,GAAG/lC,OAAjBxwC,IAA4BA,IAAI,CAACkB,KAALlB,CAAWs2E,IAAI,GAAG9lC,OAAlBxwC,CAAxC42E;;AACA,QAAIA,SAAS,GAAGP,SAAhB,EAA2B;AACzB7lC,aAAO,GAAG7vC,OAAO,CAACi2E,SAAS,GAAGpmC,OAAZomC,GAAsBP,SAAtBO,GAAkCzwB,IAAnC,CAAPxlD,GAAkDwlD,IAA5D3V;AACD;;AACD,QAAI,CAAC32C,aAAa,CAACo8E,SAAD,CAAlB,EAA+B;AAC7B76C,YAAM,GAAGp7B,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAai2E,SAAbj2E,CAATo7B;AACAoV,aAAO,GAAGxwC,IAAI,CAACo4C,IAALp4C,CAAUwwC,OAAO,GAAGpV,MAApBp7B,IAA8Bo7B,MAAxCoV;AACD;;AACD,QAAIpa,MAAM,KAAK,OAAf,EAAwB;AACtBsgD,aAAO,GAAG12E,IAAI,CAACkB,KAALlB,CAAWs2E,IAAI,GAAG9lC,OAAlBxwC,IAA6BwwC,OAAvCkmC;AACAC,aAAO,GAAG32E,IAAI,CAACo4C,IAALp4C,CAAUu2E,IAAI,GAAG/lC,OAAjBxwC,IAA4BwwC,OAAtCmmC;AAFF,WAGO;AACLD,aAAO,GAAGJ,IAAVI;AACAC,aAAO,GAAGJ,IAAVI;AACD;;AACD,QAAIjuE,UAAU,IAAIC,UAAdD,IAA4Bu4C,IAA5Bv4C,IAAoC3G,WAAW,CAAC,CAACM,GAAG,GAAGD,GAAP,IAAc6+C,IAAf,EAAqBzQ,OAAO,GAAG,IAA/B,CAAnD,EAAyF;AACvFomC,eAAS,GAAG52E,IAAI,CAACc,KAALd,CAAWA,IAAI,CAACoC,GAALpC,CAAS,CAACqC,GAAG,GAAGD,GAAP,IAAcouC,OAAvBxwC,EAAgCk2E,QAAhCl2E,CAAXA,CAAZ42E;AACApmC,aAAO,GAAG,CAACnuC,GAAG,GAAGD,GAAP,IAAcw0E,SAAxBpmC;AACAkmC,aAAO,GAAGt0E,GAAVs0E;AACAC,aAAO,GAAGt0E,GAAVs0E;AAJF,WAKO,IAAIH,YAAJ,EAAkB;AACvBE,aAAO,GAAGhuE,UAAU,GAAGtG,GAAH,GAASs0E,OAA7BA;AACAC,aAAO,GAAGhuE,UAAU,GAAGtG,GAAH,GAASs0E,OAA7BA;AACAC,eAAS,GAAGvuE,KAAK,GAAG,CAApBuuE;AACApmC,aAAO,GAAG,CAACmmC,OAAO,GAAGD,OAAX,IAAsBE,SAAhCpmC;AAJK,WAKA;AACLomC,eAAS,GAAG,CAACD,OAAO,GAAGD,OAAX,IAAsBlmC,OAAlComC;;AACA,UAAI71E,YAAY,CAAC61E,SAAD,EAAY52E,IAAI,CAACc,KAALd,CAAW42E,SAAX52E,CAAZ,EAAmCwwC,OAAO,GAAG,IAA7C,CAAhB,EAAoE;AAClEomC,iBAAS,GAAG52E,IAAI,CAACc,KAALd,CAAW42E,SAAX52E,CAAZ42E;AADF,aAEO;AACLA,iBAAS,GAAG52E,IAAI,CAACo4C,IAALp4C,CAAU42E,SAAV52E,CAAZ42E;AACD;AACF;;AACD,UAAMC,aAAa,GAAG72E,IAAI,CAACqC,GAALrC,CACpB0C,cAAc,CAAC8tC,OAAD,CADMxwC,EAEpB0C,cAAc,CAACg0E,OAAD,CAFM12E,CAAtB;AAIAo7B,UAAM,GAAGp7B,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAanG,aAAa,CAACo8E,SAAD,CAAbp8E,GAA2Bg9E,aAA3Bh9E,GAA2Co8E,SAAxDj2E,CAATo7B;AACAs7C,WAAO,GAAG12E,IAAI,CAACc,KAALd,CAAW02E,OAAO,GAAGt7C,MAArBp7B,IAA+Bo7B,MAAzCs7C;AACAC,WAAO,GAAG32E,IAAI,CAACc,KAALd,CAAW22E,OAAO,GAAGv7C,MAArBp7B,IAA+Bo7B,MAAzCu7C;AACA,QAAI/8D,CAAC,GAAG,CAAR;;AACA,QAAIlR,UAAJ,EAAgB;AACd,UAAI0tE,aAAa,IAAIM,OAAO,KAAKt0E,GAAjC,EAAsC;AACpC2nC,aAAK,CAAC/qC,IAAN+qC,CAAW;AAACjwC,eAAK,EAAEsI;AAAR,SAAX2nC;;AACA,YAAI2sC,OAAO,GAAGt0E,GAAd,EAAmB;AACjBwX,WAAC;AACF;;AACD,YAAI7Y,YAAY,CAACf,IAAI,CAACc,KAALd,CAAW,CAAC02E,OAAO,GAAG98D,CAAC,GAAG42B,OAAf,IAA0BpV,MAArCp7B,IAA+Co7B,MAAhD,EAAwDh5B,GAAxD,EAA6D00E,iBAAiB,CAAC10E,GAAD,EAAMq0E,UAAN,EAAkBX,iBAAlB,CAA9E,CAAhB,EAAqI;AACnIl8D,WAAC;AACF;AAPH,aAQO,IAAI88D,OAAO,GAAGt0E,GAAd,EAAmB;AACxBwX,SAAC;AACF;AACF;;AACD,WAAOA,CAAC,GAAGg9D,SAAX,EAAsB,EAAEh9D,CAAxB,EAA2B;AACzBmwB,WAAK,CAAC/qC,IAAN+qC,CAAW;AAACjwC,aAAK,EAAEkG,IAAI,CAACc,KAALd,CAAW,CAAC02E,OAAO,GAAG98D,CAAC,GAAG42B,OAAf,IAA0BpV,MAArCp7B,IAA+Co7B;AAAvD,OAAX2O;AACD;;AACD,QAAIphC,UAAU,IAAIytE,aAAdztE,IAA+BguE,OAAO,KAAKt0E,GAA/C,EAAoD;AAClD,UAAI0nC,KAAK,CAACjuC,MAANiuC,IAAgBhpC,YAAY,CAACgpC,KAAK,CAACA,KAAK,CAACjuC,MAANiuC,GAAe,CAAhB,CAALA,CAAwBjwC,KAAzB,EAAgCuI,GAAhC,EAAqCy0E,iBAAiB,CAACz0E,GAAD,EAAMo0E,UAAN,EAAkBX,iBAAlB,CAAtD,CAAhC,EAA6H;AAC3H/rC,aAAK,CAACA,KAAK,CAACjuC,MAANiuC,GAAe,CAAhB,CAALA,CAAwBjwC,KAAxBiwC,GAAgC1nC,GAAhC0nC;AADF,aAEO;AACLA,aAAK,CAAC/qC,IAAN+qC,CAAW;AAACjwC,eAAK,EAAEuI;AAAR,SAAX0nC;AACD;AALH,WAMO,IAAI,CAACphC,UAAD,IAAeguE,OAAO,KAAKt0E,GAA/B,EAAoC;AACzC0nC,WAAK,CAAC/qC,IAAN+qC,CAAW;AAACjwC,aAAK,EAAE68E;AAAR,OAAX5sC;AACD;;AACD,WAAOA,KAAP;AACD;;AACD,WAAS+sC,iBAAT,CAA2Bh9E,KAA3B,EAAkC28E,UAAlC,SAAyE;AAAA,QAA3B;AAAC9qC,gBAAD;AAAauK;AAAb,KAA2B;AACvE,UAAMtzB,GAAG,GAAGtgB,SAAS,CAAC4zC,WAAD,CAArB;AACA,UAAMr7B,KAAK,GAAG,CAAC8wB,UAAU,GAAG3rC,IAAI,CAAC4J,GAAL5J,CAAS4iB,GAAT5iB,CAAH,GAAmBA,IAAI,CAAC6K,GAAL7K,CAAS4iB,GAAT5iB,CAA9B,KAAgD,KAA9D;AACA,UAAMlE,MAAM,GAAG,OAAO26E,UAAP,GAAoB,CAAC,KAAK38E,KAAN,EAAagC,MAAhD;AACA,WAAOkE,IAAI,CAACoC,GAALpC,CAASy2E,UAAU,GAAG57D,KAAtB7a,EAA6BlE,MAA7BkE,CAAP;AACD;;AACD,QAAM+2E,eAAN,SAA8Bn9B,KAA9B,CAAoC;AAClCx+B,eAAW,CAACogB,GAAD,EAAM;AACf,YAAMA,GAAN;AACA,WAAK73B,KAAL,GAAa5F,SAAb;AACA,WAAK6F,GAAL,GAAW7F,SAAX;AACA,WAAK03E,WAAL,GAAmB13E,SAAnB;AACA,WAAKi5E,SAAL,GAAiBj5E,SAAjB;AACA,WAAK23E,WAAL,GAAmB,CAAnB;AACD;;AACD/oD,SAAK,CAACyU,GAAD,EAAM9kC,KAAN,EAAa;AAChB,UAAIzC,aAAa,CAACunC,GAAD,CAAjB,EAAwB;AACtB,eAAO,IAAP;AACD;;AACD,UAAI,CAAC,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,YAAY3mC,MAA3C,KAAsD,CAACC,QAAQ,CAAC,CAAC0mC,GAAF,CAAnE,EAA2E;AACzE,eAAO,IAAP;AACD;;AACD,aAAO,CAACA,GAAR;AACD;;AACD61C,0BAAsB,GAAG;AACvB,YAAM;AAAC7uD;AAAD,UAAgB,KAAKlrB,OAA3B;AACA,YAAM;AAACwL,kBAAD;AAAaC;AAAb,UAA2B,KAAKC,aAAL,EAAjC;AACA,UAAI;AAACxG,WAAD;AAAMC;AAAN,UAAa,IAAjB;;AACA,YAAM60E,MAAM,GAAG/4E,CAAC,IAAKiE,GAAG,GAAGsG,UAAU,GAAGtG,GAAH,GAASjE,CAA9C;;AACA,YAAMg5E,MAAM,GAAGh5E,CAAC,IAAKkE,GAAG,GAAGsG,UAAU,GAAGtG,GAAH,GAASlE,CAA9C;;AACA,UAAIiqB,WAAJ,EAAiB;AACf,cAAMgvD,OAAO,GAAG12E,IAAI,CAAC0B,GAAD,CAApB;AACA,cAAMi1E,OAAO,GAAG32E,IAAI,CAAC2B,GAAD,CAApB;;AACA,YAAI+0E,OAAO,GAAG,CAAVA,IAAeC,OAAO,GAAG,CAA7B,EAAgC;AAC9BF,gBAAM,CAAC,CAAD,CAANA;AADF,eAEO,IAAIC,OAAO,GAAG,CAAVA,IAAeC,OAAO,GAAG,CAA7B,EAAgC;AACrCH,gBAAM,CAAC,CAAD,CAANA;AACD;AACF;;AACD,UAAI90E,GAAG,KAAKC,GAAZ,EAAiB;AACf,YAAImsC,MAAM,GAAG,CAAb;;AACA,YAAInsC,GAAG,IAAI5H,MAAM,CAAC68E,gBAAdj1E,IAAkCD,GAAG,IAAI3H,MAAM,CAAC88E,gBAApD,EAAsE;AACpE/oC,gBAAM,GAAGxuC,IAAI,CAAC8B,GAAL9B,CAASqC,GAAG,GAAG,IAAfrC,CAATwuC;AACD;;AACD2oC,cAAM,CAAC90E,GAAG,GAAGmsC,MAAP,CAAN2oC;;AACA,YAAI,CAAC/uD,WAAL,EAAkB;AAChB8uD,gBAAM,CAAC90E,GAAG,GAAGosC,MAAP,CAAN0oC;AACD;AACF;;AACD,WAAK90E,GAAL,GAAWA,GAAX;AACA,WAAKC,GAAL,GAAWA,GAAX;AACD;;AACDm1E,gBAAY,GAAG;AACb,YAAMxgC,QAAQ,GAAG,KAAK95C,OAAL,CAAa6sC,KAA9B;AACA,UAAI;AAACmN,qBAAD;AAAgBugC;AAAhB,UAA4BzgC,QAAhC;AACA,UAAIk/B,QAAJ;;AACA,UAAIuB,QAAJ,EAAc;AACZvB,gBAAQ,GAAGl2E,IAAI,CAACo4C,IAALp4C,CAAU,KAAKqC,GAAL,GAAWo1E,QAArBz3E,IAAiCA,IAAI,CAACkB,KAALlB,CAAW,KAAKoC,GAAL,GAAWq1E,QAAtBz3E,CAAjCA,GAAmE,CAA9Ek2E;;AACA,YAAIA,QAAQ,GAAG,IAAf,EAAqB;AACnBl4E,iBAAO,CAACC,IAARD,kBAAuB,KAAKpE,EAA5BoE,8BAAkDy5E,QAAlDz5E,4CAA4Fk4E,QAA5Fl4E;AACAk4E,kBAAQ,GAAG,IAAXA;AACD;AALH,aAMO;AACLA,gBAAQ,GAAG,KAAKwB,gBAAL,EAAXxB;AACAh/B,qBAAa,GAAGA,aAAa,IAAI,EAAjCA;AACD;;AACD,UAAIA,aAAJ,EAAmB;AACjBg/B,gBAAQ,GAAGl2E,IAAI,CAACoC,GAALpC,CAASk3C,aAATl3C,EAAwBk2E,QAAxBl2E,CAAXk2E;AACD;;AACD,aAAOA,QAAP;AACD;;AACDwB,oBAAgB,GAAG;AACjB,aAAOj9E,MAAM,CAAC2F,iBAAd;AACD;;AACD87C,cAAU,GAAG;AACX,YAAMp3B,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM85C,QAAQ,GAAGlyB,IAAI,CAACilB,KAAtB;AACA,UAAImsC,QAAQ,GAAG,KAAKsB,YAAL,EAAf;AACAtB,cAAQ,GAAGl2E,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYk2E,QAAZl2E,CAAXk2E;AACA,YAAMyB,uBAAuB,GAAG;AAC9BzB,gBAD8B;AAE9B9/C,cAAM,EAAEtR,IAAI,CAACsR,MAFiB;AAG9Bh0B,WAAG,EAAE0iB,IAAI,CAAC1iB,GAHoB;AAI9BC,WAAG,EAAEyiB,IAAI,CAACziB,GAJoB;AAK9B4zE,iBAAS,EAAEj/B,QAAQ,CAACi/B,SALU;AAM9Bh1B,YAAI,EAAEjK,QAAQ,CAACygC,QANe;AAO9BpvE,aAAK,EAAE2uC,QAAQ,CAAC3uC,KAPc;AAQ9B8tE,iBAAS,EAAE,KAAKjzB,UAAL,EARmB;AAS9BvX,kBAAU,EAAE,KAAKF,YAAL,EATkB;AAU9ByK,mBAAW,EAAEc,QAAQ,CAACd,WAATc,IAAwB,CAVP;AAW9Bo/B,qBAAa,EAAEp/B,QAAQ,CAACo/B,aAATp/B,KAA2B;AAXZ,OAAhC;AAaA,YAAM++B,SAAS,GAAG,KAAK57B,MAAL,IAAe,IAAjC;AACA,YAAMpQ,KAAK,GAAG8rC,eAAe,CAAC8B,uBAAD,EAA0B5B,SAA1B,CAA7B;;AACA,UAAIjxD,IAAI,CAACsR,MAALtR,KAAgB,OAApB,EAA6B;AAC3B7iB,0BAAkB,CAAC8nC,KAAD,EAAQ,IAAR,EAAc,OAAd,CAAlB9nC;AACD;;AACD,UAAI6iB,IAAI,CAACppB,OAAT,EAAkB;AAChBquC,aAAK,CAACruC,OAANquC;AACA,aAAKpmC,KAAL,GAAa,KAAKtB,GAAlB;AACA,aAAKuB,GAAL,GAAW,KAAKxB,GAAhB;AAHF,aAIO;AACL,aAAKuB,KAAL,GAAa,KAAKvB,GAAlB;AACA,aAAKwB,GAAL,GAAW,KAAKvB,GAAhB;AACD;;AACD,aAAO0nC,KAAP;AACD;;AACDvM,aAAS,GAAG;AACV,YAAMuM,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAIpmC,KAAK,GAAG,KAAKvB,GAAjB;AACA,UAAIwB,GAAG,GAAG,KAAKvB,GAAf;AACA,YAAMm7B,SAAN;;AACA,UAAI,KAAKtgC,OAAL,CAAasxC,MAAb,IAAuBzE,KAAK,CAACjuC,MAAjC,EAAyC;AACvC,cAAM0yC,MAAM,GAAG,CAAC5qC,GAAG,GAAGD,KAAP,IAAgB3D,IAAI,CAACqC,GAALrC,CAAS+pC,KAAK,CAACjuC,MAANiuC,GAAe,CAAxB/pC,EAA2B,CAA3BA,CAAhB,GAAgD,CAA/D;AACA2D,aAAK,IAAI6qC,MAAT7qC;AACAC,WAAG,IAAI4qC,MAAP5qC;AACD;;AACD,WAAK6xE,WAAL,GAAmB9xE,KAAnB;AACA,WAAKqzE,SAAL,GAAiBpzE,GAAjB;AACA,WAAK8xE,WAAL,GAAmB9xE,GAAG,GAAGD,KAAzB;AACD;;AACD4iC,oBAAgB,CAACzsC,KAAD,EAAQ;AACtB,aAAO46B,YAAY,CAAC56B,KAAD,EAAQ,KAAK0jB,KAAL,CAAWtgB,OAAX,CAAmBi3B,MAA3B,EAAmC,KAAKj3B,OAAL,CAAa6sC,KAAb,CAAmBnV,MAAtD,CAAnB;AACD;;AArHiC;;AAwHpC,QAAMgjD,WAAN,SAA0Bb,eAA1B,CAA0C;AACxCh7B,uBAAmB,GAAG;AACpB,YAAM;AAAC35C,WAAD;AAAMC;AAAN,UAAa,KAAKyjC,SAAL,CAAe,IAAf,CAAnB;AACA,WAAK1jC,GAAL,GAAW5H,cAAc,CAAC4H,GAAD,CAAd5H,GAAsB4H,GAAtB5H,GAA4B,CAAvC;AACA,WAAK6H,GAAL,GAAW7H,cAAc,CAAC6H,GAAD,CAAd7H,GAAsB6H,GAAtB7H,GAA4B,CAAvC;AACA,WAAKy8E,sBAAL;AACD;;AACDS,oBAAgB,GAAG;AACjB,YAAM/rC,UAAU,GAAG,KAAKF,YAAL,EAAnB;AACA,YAAM3vC,MAAM,GAAG6vC,UAAU,GAAG,KAAK5qB,KAAR,GAAgB,KAAKoB,MAA9C;AACA,YAAM+zB,WAAW,GAAG5zC,SAAS,CAAC,KAAKpF,OAAL,CAAa6sC,KAAb,CAAmBmM,WAApB,CAA7B;AACA,YAAMr7B,KAAK,GAAG,CAAC8wB,UAAU,GAAG3rC,IAAI,CAAC4J,GAAL5J,CAASk2C,WAATl2C,CAAH,GAA2BA,IAAI,CAAC6K,GAAL7K,CAASk2C,WAATl2C,CAAtC,KAAgE,KAA9E;;AACA,YAAMo/C,QAAQ,GAAG,KAAKE,uBAAL,CAA6B,CAA7B,CAAjB;;AACA,aAAOt/C,IAAI,CAACo4C,IAALp4C,CAAUlE,MAAM,GAAGkE,IAAI,CAACoC,GAALpC,CAAS,EAATA,EAAao/C,QAAQ,CAACphC,UAATohC,GAAsBvkC,KAAnC7a,CAAnBA,CAAP;AACD;;AACD6I,oBAAgB,CAAC/O,KAAD,EAAQ;AACtB,aAAOA,KAAK,KAAK,IAAVA,GAAiB+rC,GAAjB/rC,GAAuB,KAAKi0C,kBAAL,CAAwB,CAACj0C,KAAK,GAAG,KAAK27E,WAAd,IAA6B,KAAKC,WAA1D,CAA9B;AACD;;AACDj2B,oBAAgB,CAAC99B,KAAD,EAAQ;AACtB,aAAO,KAAK8zD,WAAL,GAAmB,KAAK91B,kBAAL,CAAwBh+B,KAAxB,IAAiC,KAAK+zD,WAAhE;AACD;;AApBuC;;AAsB1CkC,aAAW,CAACh+E,EAAZg+E,GAAiB,QAAjBA;AACAA,aAAW,CAAC13D,QAAZ03D,GAAuB;AACrB7tC,SAAK,EAAE;AACL5uC,cAAQ,EAAEu6C,KAAK,CAACX,UAANW,CAAiBV;AADtB;AADc,GAAvB4iC;;AAMA,WAASC,OAAT,CAAiBC,OAAjB,EAA0B;AACxB,UAAMx7C,MAAM,GAAGw7C,OAAO,GAAI93E,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAaA,IAAI,CAACkB,KAALlB,CAAWS,KAAK,CAACq3E,OAAD,CAAhB93E,CAAbA,CAA1B;AACA,WAAOs8B,MAAM,KAAK,CAAlB;AACD;;AACD,WAASy7C,aAAT,CAAuBjC,iBAAvB,EAA0CC,SAA1C,EAAqD;AACnD,UAAMiC,MAAM,GAAGh4E,IAAI,CAACkB,KAALlB,CAAWS,KAAK,CAACs1E,SAAS,CAAC1zE,GAAX,CAAhBrC,CAAf;AACA,UAAMi4E,cAAc,GAAGj4E,IAAI,CAACo4C,IAALp4C,CAAU+1E,SAAS,CAAC1zE,GAAV0zE,GAAgB/1E,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAag4E,MAAbh4E,CAA1BA,CAAvB;AACA,UAAM+pC,KAAK,GAAG,EAAd;AACA,QAAI+tC,OAAO,GAAGn9E,eAAe,CAACm7E,iBAAiB,CAAC1zE,GAAnB,EAAwBpC,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAaA,IAAI,CAACkB,KAALlB,CAAWS,KAAK,CAACs1E,SAAS,CAAC3zE,GAAX,CAAhBpC,CAAbA,CAAxB,CAA7B;AACA,QAAIk4E,GAAG,GAAGl4E,IAAI,CAACkB,KAALlB,CAAWS,KAAK,CAACq3E,OAAD,CAAhB93E,CAAV;AACA,QAAIm4E,WAAW,GAAGn4E,IAAI,CAACkB,KAALlB,CAAW83E,OAAO,GAAG93E,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAak4E,GAAbl4E,CAArBA,CAAlB;AACA,QAAIi2E,SAAS,GAAGiC,GAAG,GAAG,CAANA,GAAUl4E,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAaA,IAAI,CAAC8B,GAAL9B,CAASk4E,GAATl4E,CAAbA,CAAVk4E,GAAwC,CAAxD;;AACA,OAAG;AACDnuC,WAAK,CAAC/qC,IAAN+qC,CAAW;AAACjwC,aAAK,EAAEg+E,OAAR;AAAiBnhC,aAAK,EAAEkhC,OAAO,CAACC,OAAD;AAA/B,OAAX/tC;AACA,QAAEouC,WAAF;;AACA,UAAIA,WAAW,KAAK,EAApB,EAAwB;AACtBA,mBAAW,GAAG,CAAdA;AACA,UAAED,GAAF;AACAjC,iBAAS,GAAGiC,GAAG,IAAI,CAAPA,GAAW,CAAXA,GAAejC,SAA3BA;AACD;;AACD6B,aAAO,GAAG93E,IAAI,CAACc,KAALd,CAAWm4E,WAAW,GAAGn4E,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAak4E,GAAbl4E,CAAdm4E,GAAkClC,SAA7Cj2E,IAA0Di2E,SAApE6B;AARF,aASSI,GAAG,GAAGF,MAANE,IAAiBA,GAAG,KAAKF,MAARE,IAAkBC,WAAW,GAAGF,cAT1D;;AAUA,UAAMG,QAAQ,GAAGz9E,eAAe,CAACm7E,iBAAiB,CAACzzE,GAAnB,EAAwBy1E,OAAxB,CAAhC;AACA/tC,SAAK,CAAC/qC,IAAN+qC,CAAW;AAACjwC,WAAK,EAAEs+E,QAAR;AAAkBzhC,WAAK,EAAEkhC,OAAO,CAACC,OAAD;AAAhC,KAAX/tC;AACA,WAAOA,KAAP;AACD;;AACD,QAAMsuC,gBAAN,SAA+Bz+B,KAA/B,CAAqC;AACnCx+B,eAAW,CAACogB,GAAD,EAAM;AACf,YAAMA,GAAN;AACA,WAAK73B,KAAL,GAAa5F,SAAb;AACA,WAAK6F,GAAL,GAAW7F,SAAX;AACA,WAAK03E,WAAL,GAAmB13E,SAAnB;AACA,WAAK23E,WAAL,GAAmB,CAAnB;AACD;;AACD/oD,SAAK,CAACyU,GAAD,EAAM9kC,KAAN,EAAa;AAChB,YAAMxC,KAAK,GAAGi9E,eAAe,CAAC58E,SAAhB48E,CAA0BpqD,KAA1BoqD,CAAgCx7E,KAAhCw7E,CAAsC,IAAtCA,EAA4C,CAAC31C,GAAD,EAAM9kC,KAAN,CAA5Cy6E,CAAd;;AACA,UAAIj9E,KAAK,KAAK,CAAd,EAAiB;AACf,aAAKw+E,KAAL,GAAa,IAAb;AACA,eAAOv6E,SAAP;AACD;;AACD,aAAOvD,cAAc,CAACV,KAAD,CAAdU,IAAyBV,KAAK,GAAG,CAAjCU,GAAqCV,KAArCU,GAA6C,IAApD;AACD;;AACDuhD,uBAAmB,GAAG;AACpB,YAAM;AAAC35C,WAAD;AAAMC;AAAN,UAAa,KAAKyjC,SAAL,CAAe,IAAf,CAAnB;AACA,WAAK1jC,GAAL,GAAW5H,cAAc,CAAC4H,GAAD,CAAd5H,GAAsBwF,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYoC,GAAZpC,CAAtBxF,GAAyC,IAApD;AACA,WAAK6H,GAAL,GAAW7H,cAAc,CAAC6H,GAAD,CAAd7H,GAAsBwF,IAAI,CAACqC,GAALrC,CAAS,CAATA,EAAYqC,GAAZrC,CAAtBxF,GAAyC,IAApD;;AACA,UAAI,KAAK0C,OAAL,CAAakrB,WAAjB,EAA8B;AAC5B,aAAKkwD,KAAL,GAAa,IAAb;AACD;;AACD,WAAKrB,sBAAL;AACD;;AACDA,0BAAsB,GAAG;AACvB,YAAM;AAACvuE,kBAAD;AAAaC;AAAb,UAA2B,KAAKC,aAAL,EAAjC;AACA,UAAIxG,GAAG,GAAG,KAAKA,GAAf;AACA,UAAIC,GAAG,GAAG,KAAKA,GAAf;;AACA,YAAM60E,MAAM,GAAG/4E,CAAC,IAAKiE,GAAG,GAAGsG,UAAU,GAAGtG,GAAH,GAASjE,CAA9C;;AACA,YAAMg5E,MAAM,GAAGh5E,CAAC,IAAKkE,GAAG,GAAGsG,UAAU,GAAGtG,GAAH,GAASlE,CAA9C;;AACA,YAAM+5E,GAAG,GAAG,CAAC/5E,CAAD,EAAI2N,CAAJ,KAAU9L,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAaA,IAAI,CAACkB,KAALlB,CAAWS,KAAK,CAACtC,CAAD,CAAhB6B,IAAuB8L,CAApC9L,CAAtB;;AACA,UAAIoC,GAAG,KAAKC,GAAZ,EAAiB;AACf,YAAID,GAAG,IAAI,CAAX,EAAc;AACZ80E,gBAAM,CAAC,CAAD,CAANA;AACAC,gBAAM,CAAC,EAAD,CAANA;AAFF,eAGO;AACLD,gBAAM,CAACgB,GAAG,CAAC91E,GAAD,EAAM,CAAC,CAAP,CAAJ,CAAN80E;AACAC,gBAAM,CAACe,GAAG,CAAC71E,GAAD,EAAM,CAAC,CAAP,CAAJ,CAAN80E;AACD;AACF;;AACD,UAAI/0E,GAAG,IAAI,CAAX,EAAc;AACZ80E,cAAM,CAACgB,GAAG,CAAC71E,GAAD,EAAM,CAAC,CAAP,CAAJ,CAAN60E;AACD;;AACD,UAAI70E,GAAG,IAAI,CAAX,EAAc;AACZ80E,cAAM,CAACe,GAAG,CAAC91E,GAAD,EAAM,CAAC,CAAP,CAAJ,CAAN+0E;AACD;;AACD,UAAI,KAAKmB,KAAL,IAAc,KAAKl2E,GAAL,KAAa,KAAKw4C,aAAhC,IAAiDx4C,GAAG,KAAK81E,GAAG,CAAC,KAAK91E,GAAN,EAAW,CAAX,CAAhE,EAA+E;AAC7E80E,cAAM,CAACgB,GAAG,CAAC91E,GAAD,EAAM,CAAC,CAAP,CAAJ,CAAN80E;AACD;;AACD,WAAK90E,GAAL,GAAWA,GAAX;AACA,WAAKC,GAAL,GAAWA,GAAX;AACD;;AACD65C,cAAU,GAAG;AACX,YAAMp3B,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM44E,iBAAiB,GAAG;AACxB1zE,WAAG,EAAE,KAAKs4C,QADc;AAExBr4C,WAAG,EAAE,KAAKo4C;AAFc,OAA1B;AAIA,YAAM1Q,KAAK,GAAGguC,aAAa,CAACjC,iBAAD,EAAoB,IAApB,CAA3B;;AACA,UAAIhxD,IAAI,CAACsR,MAALtR,KAAgB,OAApB,EAA6B;AAC3B7iB,0BAAkB,CAAC8nC,KAAD,EAAQ,IAAR,EAAc,OAAd,CAAlB9nC;AACD;;AACD,UAAI6iB,IAAI,CAACppB,OAAT,EAAkB;AAChBquC,aAAK,CAACruC,OAANquC;AACA,aAAKpmC,KAAL,GAAa,KAAKtB,GAAlB;AACA,aAAKuB,GAAL,GAAW,KAAKxB,GAAhB;AAHF,aAIO;AACL,aAAKuB,KAAL,GAAa,KAAKvB,GAAlB;AACA,aAAKwB,GAAL,GAAW,KAAKvB,GAAhB;AACD;;AACD,aAAO0nC,KAAP;AACD;;AACDxD,oBAAgB,CAACzsC,KAAD,EAAQ;AACtB,aAAOA,KAAK,KAAKiE,SAAVjE,GACH,GADGA,GAEH46B,YAAY,CAAC56B,KAAD,EAAQ,KAAK0jB,KAAL,CAAWtgB,OAAX,CAAmBi3B,MAA3B,EAAmC,KAAKj3B,OAAL,CAAa6sC,KAAb,CAAmBnV,MAAtD,CAFhB;AAGD;;AACD4I,aAAS,GAAG;AACV,YAAM75B,KAAK,GAAG,KAAKvB,GAAnB;AACA,YAAMo7B,SAAN;AACA,WAAKi4C,WAAL,GAAmBh1E,KAAK,CAACkD,KAAD,CAAxB;AACA,WAAK+xE,WAAL,GAAmBj1E,KAAK,CAAC,KAAK4B,GAAN,CAAL5B,GAAkBA,KAAK,CAACkD,KAAD,CAA1C;AACD;;AACDkF,oBAAgB,CAAC/O,KAAD,EAAQ;AACtB,UAAIA,KAAK,KAAKiE,SAAVjE,IAAuBA,KAAK,KAAK,CAArC,EAAwC;AACtCA,aAAK,GAAG,KAAKsI,GAAbtI;AACD;;AACD,UAAIA,KAAK,KAAK,IAAVA,IAAkB8H,KAAK,CAAC9H,KAAD,CAA3B,EAAoC;AAClC,eAAO+rC,GAAP;AACD;;AACD,aAAO,KAAKkI,kBAAL,CAAwBj0C,KAAK,KAAK,KAAKsI,GAAftI,GAC3B,CAD2BA,GAE3B,CAAC2G,KAAK,CAAC3G,KAAD,CAAL2G,GAAe,KAAKg1E,WAArB,IAAoC,KAAKC,WAFtC,CAAP;AAGD;;AACDj2B,oBAAgB,CAAC99B,KAAD,EAAQ;AACtB,YAAM+9B,OAAO,GAAG,KAAKC,kBAAL,CAAwBh+B,KAAxB,CAAhB;AACA,aAAO3hB,IAAI,CAACiB,GAALjB,CAAS,EAATA,EAAa,KAAKy1E,WAAL,GAAmB/1B,OAAO,GAAG,KAAKg2B,WAA/C11E,CAAP;AACD;;AAlGkC;;AAoGrCq4E,kBAAgB,CAACz+E,EAAjBy+E,GAAsB,aAAtBA;AACAA,kBAAgB,CAACn4D,QAAjBm4D,GAA4B;AAC1BtuC,SAAK,EAAE;AACL5uC,cAAQ,EAAEu6C,KAAK,CAACX,UAANW,CAAiBD,WADtB;AAELkB,WAAK,EAAE;AACLU,eAAO,EAAE;AADJ;AAFF;AADmB,GAA5BghC;;AASA,WAASE,qBAAT,CAA+BzzD,IAA/B,EAAqC;AACnC,UAAMkyB,QAAQ,GAAGlyB,IAAI,CAACilB,KAAtB;;AACA,QAAIiN,QAAQ,CAAC/C,OAAT+C,IAAoBlyB,IAAI,CAACmvB,OAA7B,EAAsC;AACpC,YAAMgC,OAAO,GAAGvuB,SAAS,CAACsvB,QAAQ,CAACD,eAAV,CAAzB;AACA,aAAOl8C,cAAc,CAACm8C,QAAQ,CAACn5B,IAATm5B,IAAiBA,QAAQ,CAACn5B,IAATm5B,CAAct3C,IAAhC,EAAsCwgB,QAAQ,CAACrC,IAATqC,CAAcxgB,IAApD,CAAd7E,GAA0Eo7C,OAAO,CAAC9zB,MAAzF;AACD;;AACD,WAAO,CAAP;AACD;;AACD,WAASq2D,gBAAT,CAA0Br6D,GAA1B,EAA+BN,IAA/B,EAAqCyoB,KAArC,EAA4C;AAC1CA,SAAK,GAAGvsC,OAAO,CAACusC,KAAD,CAAPvsC,GAAiBusC,KAAjBvsC,GAAyB,CAACusC,KAAD,CAAjCA;AACA,WAAO;AACLt4B,OAAC,EAAEgT,YAAY,CAAC7C,GAAD,EAAMN,IAAI,CAAC+C,MAAX,EAAmB0lB,KAAnB,CADV;AAELn6B,OAAC,EAAEm6B,KAAK,CAACxqC,MAANwqC,GAAezoB,IAAI,CAACG;AAFlB,KAAP;AAID;;AACD,WAASy6D,eAAT,CAAyBv1E,KAAzB,EAAgC2tB,GAAhC,EAAqCnxB,IAArC,EAA2C0C,GAA3C,EAAgDC,GAAhD,EAAqD;AACnD,QAAIa,KAAK,KAAKd,GAAVc,IAAiBA,KAAK,KAAKb,GAA/B,EAAoC;AAClC,aAAO;AACLsB,aAAK,EAAEktB,GAAG,GAAInxB,IAAI,GAAG,CADhB;AAELkE,WAAG,EAAEitB,GAAG,GAAInxB,IAAI,GAAG;AAFd,OAAP;AADF,WAKO,IAAIwD,KAAK,GAAGd,GAARc,IAAeA,KAAK,GAAGb,GAA3B,EAAgC;AACrC,aAAO;AACLsB,aAAK,EAAEktB,GAAG,GAAGnxB,IADR;AAELkE,WAAG,EAAEitB;AAFA,OAAP;AAID;;AACD,WAAO;AACLltB,WAAK,EAAEktB,GADF;AAELjtB,SAAG,EAAEitB,GAAG,GAAGnxB;AAFN,KAAP;AAID;;AACD,WAASg5E,kBAAT,CAA4Bz5D,KAA5B,EAAmC;AACjC,UAAMktB,IAAI,GAAG;AACXjgC,OAAC,EAAE+S,KAAK,CAACrX,IAANqX,GAAaA,KAAK,CAACstD,QAANttD,CAAerX,IADpB;AAEX0F,OAAC,EAAE2R,KAAK,CAACpX,KAANoX,GAAcA,KAAK,CAACstD,QAANttD,CAAepX,KAFrB;AAGX6B,OAAC,EAAEuV,KAAK,CAAC6E,GAAN7E,GAAYA,KAAK,CAACstD,QAANttD,CAAe6E,GAHnB;AAIXrkB,OAAC,EAAEwf,KAAK,CAAC8E,MAAN9E,GAAeA,KAAK,CAACstD,QAANttD,CAAe8E;AAJtB,KAAb;AAMA,UAAM40D,MAAM,GAAGz+E,MAAM,CAACsP,MAAPtP,CAAc,EAAdA,EAAkBiyC,IAAlBjyC,CAAf;AACA,UAAMujD,UAAU,GAAG,EAAnB;AACA,UAAMxH,OAAO,GAAG,EAAhB;AACA,UAAM2iC,UAAU,GAAG35D,KAAK,CAAC45D,YAAN55D,CAAmBnjB,MAAtC;AACA,UAAMg9E,cAAc,GAAG75D,KAAK,CAAC/hB,OAAN+hB,CAAck1B,WAArC;AACA,UAAM4kC,eAAe,GAAGD,cAAc,CAACE,iBAAfF,GAAmC/4E,EAAE,GAAG64E,UAAxCE,GAAqD,CAA7E;;AACA,SAAK,IAAIn9E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGi9E,UAApB,EAAgCj9E,CAAC,EAAjC,EAAqC;AACnC,YAAMmpB,IAAI,GAAGg0D,cAAc,CAACpuD,UAAfouD,CAA0B75D,KAAK,CAACg6D,oBAANh6D,CAA2BtjB,CAA3BsjB,CAA1B65D,CAAb;AACA7iC,aAAO,CAACt6C,CAAD,CAAPs6C,GAAanxB,IAAI,CAACmxB,OAAlBA;AACA,YAAM3B,aAAa,GAAGr1B,KAAK,CAACi6D,gBAANj6D,CAAuBtjB,CAAvBsjB,EAA0BA,KAAK,CAACk6D,WAANl6D,GAAoBg3B,OAAO,CAACt6C,CAAD,CAArDsjB,EAA0D85D,eAA1D95D,CAAtB;AACA,YAAMm6D,MAAM,GAAGzxD,MAAM,CAAC7C,IAAI,CAACjH,IAAN,CAArB;AACA,YAAM2uD,QAAQ,GAAGgM,gBAAgB,CAACv5D,KAAK,CAACd,GAAP,EAAYi7D,MAAZ,EAAoBn6D,KAAK,CAAC45D,YAAN55D,CAAmBtjB,CAAnBsjB,CAApB,CAAjC;AACAw+B,gBAAU,CAAC9hD,CAAD,CAAV8hD,GAAgB+uB,QAAhB/uB;;AACA,YAAMW,YAAY,GAAG36C,eAAe,CAACwb,KAAK,CAAC00B,aAAN10B,CAAoBtjB,CAApBsjB,IAAyB85D,eAA1B,CAApC;;AACA,YAAM71E,KAAK,GAAGlD,IAAI,CAACc,KAALd,CAAWwC,SAAS,CAAC47C,YAAD,CAApBp+C,CAAd;AACA,YAAMq5E,OAAO,GAAGZ,eAAe,CAACv1E,KAAD,EAAQoxC,aAAa,CAACl2C,CAAtB,EAAyBouE,QAAQ,CAACx+D,CAAlC,EAAqC,CAArC,EAAwC,GAAxC,CAA/B;AACA,YAAMsrE,OAAO,GAAGb,eAAe,CAACv1E,KAAD,EAAQoxC,aAAa,CAACh2C,CAAtB,EAAyBkuE,QAAQ,CAACrgE,CAAlC,EAAqC,EAArC,EAAyC,GAAzC,CAA/B;AACAotE,kBAAY,CAACZ,MAAD,EAASxsC,IAAT,EAAeiS,YAAf,EAA6Bi7B,OAA7B,EAAsCC,OAAtC,CAAZC;AACD;;AACDt6D,SAAK,CAACu6D,cAANv6D,CACEktB,IAAI,CAACjgC,CAALigC,GAASwsC,MAAM,CAACzsE,CADlB+S,EAEE05D,MAAM,CAACrrE,CAAPqrE,GAAWxsC,IAAI,CAAC7+B,CAFlB2R,EAGEktB,IAAI,CAACziC,CAALyiC,GAASwsC,MAAM,CAACjvE,CAHlBuV,EAIE05D,MAAM,CAACl5E,CAAPk5E,GAAWxsC,IAAI,CAAC1sC,CAJlBwf;AAMAA,SAAK,CAACw6D,gBAANx6D,GAAyBy6D,oBAAoB,CAACz6D,KAAD,EAAQw+B,UAAR,EAAoBxH,OAApB,CAA7Ch3B;AACD;;AACD,WAASs6D,YAAT,CAAsBZ,MAAtB,EAA8BxsC,IAA9B,EAAoCjpC,KAApC,EAA2Cm2E,OAA3C,EAAoDC,OAApD,EAA6D;AAC3D,UAAM1vE,GAAG,GAAG5J,IAAI,CAAC8B,GAAL9B,CAASA,IAAI,CAAC4J,GAAL5J,CAASkD,KAATlD,CAATA,CAAZ;AACA,UAAM6K,GAAG,GAAG7K,IAAI,CAAC8B,GAAL9B,CAASA,IAAI,CAAC6K,GAAL7K,CAASkD,KAATlD,CAATA,CAAZ;AACA,QAAI5B,CAAC,GAAG,CAAR;AACA,QAAIE,CAAC,GAAG,CAAR;;AACA,QAAI+6E,OAAO,CAAC11E,KAAR01E,GAAgBltC,IAAI,CAACjgC,CAAzB,EAA4B;AAC1B9N,OAAC,GAAG,CAAC+tC,IAAI,CAACjgC,CAALigC,GAASktC,OAAO,CAAC11E,KAAlB,IAA2BiG,GAA/BxL;AACAu6E,YAAM,CAACzsE,CAAPysE,GAAW34E,IAAI,CAACoC,GAALpC,CAAS24E,MAAM,CAACzsE,CAAhBlM,EAAmBmsC,IAAI,CAACjgC,CAALigC,GAAS/tC,CAA5B4B,CAAX24E;AAFF,WAGO,IAAIU,OAAO,CAACz1E,GAARy1E,GAAcltC,IAAI,CAAC7+B,CAAvB,EAA0B;AAC/BlP,OAAC,GAAG,CAACi7E,OAAO,CAACz1E,GAARy1E,GAAcltC,IAAI,CAAC7+B,CAApB,IAAyB1D,GAA7BxL;AACAu6E,YAAM,CAACrrE,CAAPqrE,GAAW34E,IAAI,CAACqC,GAALrC,CAAS24E,MAAM,CAACrrE,CAAhBtN,EAAmBmsC,IAAI,CAAC7+B,CAAL6+B,GAAS/tC,CAA5B4B,CAAX24E;AACD;;AACD,QAAIW,OAAO,CAAC31E,KAAR21E,GAAgBntC,IAAI,CAACziC,CAAzB,EAA4B;AAC1BpL,OAAC,GAAG,CAAC6tC,IAAI,CAACziC,CAALyiC,GAASmtC,OAAO,CAAC31E,KAAlB,IAA2BkH,GAA/BvM;AACAq6E,YAAM,CAACjvE,CAAPivE,GAAW34E,IAAI,CAACoC,GAALpC,CAAS24E,MAAM,CAACjvE,CAAhB1J,EAAmBmsC,IAAI,CAACziC,CAALyiC,GAAS7tC,CAA5B0B,CAAX24E;AAFF,WAGO,IAAIW,OAAO,CAAC11E,GAAR01E,GAAcntC,IAAI,CAAC1sC,CAAvB,EAA0B;AAC/BnB,OAAC,GAAG,CAACg7E,OAAO,CAAC11E,GAAR01E,GAAcntC,IAAI,CAAC1sC,CAApB,IAAyBoL,GAA7BvM;AACAq6E,YAAM,CAACl5E,CAAPk5E,GAAW34E,IAAI,CAACqC,GAALrC,CAAS24E,MAAM,CAACl5E,CAAhBO,EAAmBmsC,IAAI,CAAC1sC,CAAL0sC,GAAS7tC,CAA5B0B,CAAX24E;AACD;AACF;;AACD,WAASe,oBAAT,CAA8Bz6D,KAA9B,EAAqCw+B,UAArC,EAAiDxH,OAAjD,EAA0D;AACxD,UAAM/vC,KAAK,GAAG,EAAd;AACA,UAAM0yE,UAAU,GAAG35D,KAAK,CAAC45D,YAAN55D,CAAmBnjB,MAAtC;AACA,UAAMgpB,IAAI,GAAG7F,KAAK,CAAC/hB,OAAnB;AACA,UAAMy8E,KAAK,GAAGpB,qBAAqB,CAACzzD,IAAD,CAArByzD,GAA8B,CAA5C;AACA,UAAMqB,aAAa,GAAG36D,KAAK,CAACk6D,WAA5B;AACA,UAAMJ,eAAe,GAAGj0D,IAAI,CAACqvB,WAALrvB,CAAiBk0D,iBAAjBl0D,GAAqC/kB,EAAE,GAAG64E,UAA1C9zD,GAAuD,CAA/E;;AACA,SAAK,IAAInpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGi9E,UAApB,EAAgCj9E,CAAC,EAAjC,EAAqC;AACnC,YAAMk+E,kBAAkB,GAAG56D,KAAK,CAACi6D,gBAANj6D,CAAuBtjB,CAAvBsjB,EAA0B26D,aAAa,GAAGD,KAAhBC,GAAwB3jC,OAAO,CAACt6C,CAAD,CAAzDsjB,EAA8D85D,eAA9D95D,CAA3B;AACA,YAAM/b,KAAK,GAAGlD,IAAI,CAACc,KAALd,CAAWwC,SAAS,CAACiB,eAAe,CAACo2E,kBAAkB,CAAC32E,KAAnB22E,GAA2Bv5E,OAA5B,CAAhB,CAApBN,CAAd;AACA,YAAMN,IAAI,GAAG+9C,UAAU,CAAC9hD,CAAD,CAAvB;AACA,YAAM2C,CAAC,GAAGw7E,SAAS,CAACD,kBAAkB,CAACv7E,CAApB,EAAuBoB,IAAI,CAACyM,CAA5B,EAA+BjJ,KAA/B,CAAnB;AACA,YAAM0iB,SAAS,GAAGm0D,oBAAoB,CAAC72E,KAAD,CAAtC;AACA,YAAM0E,IAAI,GAAGoyE,gBAAgB,CAACH,kBAAkB,CAACz7E,CAApB,EAAuBsB,IAAI,CAACsO,CAA5B,EAA+B4X,SAA/B,CAA7B;AACA1f,WAAK,CAAClH,IAANkH,CAAW;AACT9H,SAAC,EAAEy7E,kBAAkB,CAACz7E,CADb;AAETE,SAFS;AAGTsnB,iBAHS;AAIThe,YAJS;AAKTkc,WAAG,EAAExlB,CALI;AAMTuJ,aAAK,EAAED,IAAI,GAAGlI,IAAI,CAACsO,CANV;AAOT+V,cAAM,EAAEzlB,CAAC,GAAGoB,IAAI,CAACyM;AAPR,OAAXjG;AASD;;AACD,WAAOA,KAAP;AACD;;AACD,WAAS6zE,oBAAT,CAA8B72E,KAA9B,EAAqC;AACnC,QAAIA,KAAK,KAAK,CAAVA,IAAeA,KAAK,KAAK,GAA7B,EAAkC;AAChC,aAAO,QAAP;AADF,WAEO,IAAIA,KAAK,GAAG,GAAZ,EAAiB;AACtB,aAAO,MAAP;AACD;;AACD,WAAO,OAAP;AACD;;AACD,WAAS82E,gBAAT,CAA0B57E,CAA1B,EAA6B4P,CAA7B,EAAgCvG,KAAhC,EAAuC;AACrC,QAAIA,KAAK,KAAK,OAAd,EAAuB;AACrBrJ,OAAC,IAAI4P,CAAL5P;AADF,WAEO,IAAIqJ,KAAK,KAAK,QAAd,EAAwB;AAC7BrJ,OAAC,IAAK4P,CAAC,GAAG,CAAV5P;AACD;;AACD,WAAOA,CAAP;AACD;;AACD,WAAS07E,SAAT,CAAmBx7E,CAAnB,EAAsB6N,CAAtB,EAAyBjJ,KAAzB,EAAgC;AAC9B,QAAIA,KAAK,KAAK,EAAVA,IAAgBA,KAAK,KAAK,GAA9B,EAAmC;AACjC5E,OAAC,IAAK6N,CAAC,GAAG,CAAV7N;AADF,WAEO,IAAI4E,KAAK,GAAG,GAARA,IAAeA,KAAK,GAAG,EAA3B,EAA+B;AACpC5E,OAAC,IAAI6N,CAAL7N;AACD;;AACD,WAAOA,CAAP;AACD;;AACD,WAAS27E,eAAT,CAAyBh7D,KAAzB,EAAgC+1D,UAAhC,EAA4C;AAC1C,UAAM;AAAC72D,SAAD;AAAMjhB,aAAO,EAAE;AAACi3C;AAAD;AAAf,QAAgCl1B,KAAtC;;AACA,SAAK,IAAItjB,CAAC,GAAGq5E,UAAU,GAAG,CAA1B,EAA6Br5E,CAAC,IAAI,CAAlC,EAAqCA,CAAC,EAAtC,EAA0C;AACxC,YAAMulD,WAAW,GAAG/M,WAAW,CAACzpB,UAAZypB,CAAuBl1B,KAAK,CAACg6D,oBAANh6D,CAA2BtjB,CAA3BsjB,CAAvBk1B,CAApB;AACA,YAAMilC,MAAM,GAAGzxD,MAAM,CAACu5B,WAAW,CAACrjC,IAAb,CAArB;AACA,YAAM;AAACzf,SAAD;AAAIE,SAAJ;AAAOsnB,iBAAP;AAAkBhe,YAAlB;AAAwBkc,WAAxB;AAA6Bjc,aAA7B;AAAoCkc;AAApC,UAA8C9E,KAAK,CAACw6D,gBAANx6D,CAAuBtjB,CAAvBsjB,CAApD;AACA,YAAM;AAAC63B;AAAD,UAAkBoK,WAAxB;;AACA,UAAI,CAACrnD,aAAa,CAACi9C,aAAD,CAAlB,EAAmC;AACjC,cAAMykB,YAAY,GAAG9zC,aAAa,CAACy5B,WAAW,CAACqa,YAAb,CAAlC;AACA,cAAMtlB,OAAO,GAAGvuB,SAAS,CAACw5B,WAAW,CAACnK,eAAb,CAAzB;AACA54B,WAAG,CAACwH,SAAJxH,GAAgB24B,aAAhB34B;AACA,cAAM+7D,YAAY,GAAGtyE,IAAI,GAAGquC,OAAO,CAACruC,IAApC;AACA,cAAMuyE,WAAW,GAAGr2D,GAAG,GAAGmyB,OAAO,CAACnyB,GAAlC;AACA,cAAMs2D,aAAa,GAAGvyE,KAAK,GAAGD,IAARC,GAAeouC,OAAO,CAACl1B,KAA7C;AACA,cAAMs5D,cAAc,GAAGt2D,MAAM,GAAGD,GAATC,GAAekyB,OAAO,CAAC9zB,MAA9C;;AACA,YAAIjoB,MAAM,CAAC8K,MAAP9K,CAAcqhE,YAAdrhE,EAA4B42D,IAA5B52D,CAAiCiE,CAAC,IAAIA,CAAC,KAAK,CAA5CjE,CAAJ,EAAoD;AAClDikB,aAAG,CAAC4E,SAAJ5E;AACAoI,4BAAkB,CAACpI,GAAD,EAAM;AACtB/f,aAAC,EAAE87E,YADmB;AAEtB57E,aAAC,EAAE67E,WAFmB;AAGtBnsE,aAAC,EAAEosE,aAHmB;AAItBjuE,aAAC,EAAEkuE,cAJmB;AAKtB13D,kBAAM,EAAE44C;AALc,WAAN,CAAlBh1C;AAOApI,aAAG,CAACoF,IAAJpF;AATF,eAUO;AACLA,aAAG,CAACgkC,QAAJhkC,CAAa+7D,YAAb/7D,EAA2Bg8D,WAA3Bh8D,EAAwCi8D,aAAxCj8D,EAAuDk8D,cAAvDl8D;AACD;AACF;;AACDyG,gBAAU,CACRzG,GADQ,EAERc,KAAK,CAAC45D,YAAN55D,CAAmBtjB,CAAnBsjB,CAFQ,EAGR7gB,CAHQ,EAIRE,CAAC,GAAI86E,MAAM,CAACp7D,UAAPo7D,GAAoB,CAJjB,EAKRA,MALQ,EAMR;AACE39D,aAAK,EAAEylC,WAAW,CAACzlC,KADrB;AAEEmK,iBAAS,EAAEA,SAFb;AAGEC,oBAAY,EAAE;AAHhB,OANQ,CAAVjB;AAYD;AACF;;AACD,WAAS01D,cAAT,CAAwBr7D,KAAxB,EAA+B0D,MAA/B,EAAuCuxB,QAAvC,EAAiD8gC,UAAjD,EAA6D;AAC3D,UAAM;AAAC72D;AAAD,QAAQc,KAAd;;AACA,QAAIi1B,QAAJ,EAAc;AACZ/1B,SAAG,CAAC8E,GAAJ9E,CAAQc,KAAK,CAACu0B,OAAdr1B,EAAuBc,KAAK,CAACw0B,OAA7Bt1B,EAAsCwE,MAAtCxE,EAA8C,CAA9CA,EAAiDle,GAAjDke;AADF,WAEO;AACL,UAAIm2B,aAAa,GAAGr1B,KAAK,CAACi6D,gBAANj6D,CAAuB,CAAvBA,EAA0B0D,MAA1B1D,CAApB;AACAd,SAAG,CAACgF,MAAJhF,CAAWm2B,aAAa,CAACl2C,CAAzB+f,EAA4Bm2B,aAAa,CAACh2C,CAA1C6f;;AACA,WAAK,IAAIxiB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq5E,UAApB,EAAgCr5E,CAAC,EAAjC,EAAqC;AACnC24C,qBAAa,GAAGr1B,KAAK,CAACi6D,gBAANj6D,CAAuBtjB,CAAvBsjB,EAA0B0D,MAA1B1D,CAAhBq1B;AACAn2B,WAAG,CAACiF,MAAJjF,CAAWm2B,aAAa,CAACl2C,CAAzB+f,EAA4Bm2B,aAAa,CAACh2C,CAA1C6f;AACD;AACF;AACF;;AACD,WAASo8D,cAAT,CAAwBt7D,KAAxB,EAA+Bu7D,YAA/B,EAA6C73D,MAA7C,EAAqDqyD,UAArD,EAAiE;AAC/D,UAAM72D,GAAG,GAAGc,KAAK,CAACd,GAAlB;AACA,UAAM+1B,QAAQ,GAAGsmC,YAAY,CAACtmC,QAA9B;AACA,UAAM;AAACz4B,WAAD;AAAQ4J;AAAR,QAAqBm1D,YAA3B;;AACA,QAAK,CAACtmC,QAAD,IAAa,CAAC8gC,UAAd,IAA6B,CAACv5D,KAA9B,IAAuC,CAAC4J,SAAxC,IAAqD1C,MAAM,GAAG,CAAnE,EAAsE;AACpE;AACD;;AACDxE,OAAG,CAACiD,IAAJjD;AACAA,OAAG,CAACiH,WAAJjH,GAAkB1C,KAAlB0C;AACAA,OAAG,CAACkH,SAAJlH,GAAgBkH,SAAhBlH;AACAA,OAAG,CAACokC,WAAJpkC,CAAgBq8D,YAAY,CAAC7hD,UAA7Bxa;AACAA,OAAG,CAACqkC,cAAJrkC,GAAqBq8D,YAAY,CAAC5hD,gBAAlCza;AACAA,OAAG,CAAC4E,SAAJ5E;AACAm8D,kBAAc,CAACr7D,KAAD,EAAQ0D,MAAR,EAAgBuxB,QAAhB,EAA0B8gC,UAA1B,CAAdsF;AACAn8D,OAAG,CAAC+E,SAAJ/E;AACAA,OAAG,CAACsF,MAAJtF;AACAA,OAAG,CAACqD,OAAJrD;AACD;;AACD,WAASs8D,uBAAT,CAAiCzuD,MAAjC,EAAyC1vB,KAAzC,EAAgDgqC,KAAhD,EAAuD;AACrD,WAAO/d,aAAa,CAACyD,MAAD,EAAS;AAC3Bsa,WAD2B;AAE3BhqC,WAF2B;AAG3BrC,UAAI,EAAE;AAHqB,KAAT,CAApB;AAKD;;AACD,QAAMygF,iBAAN,SAAgC3D,eAAhC,CAAgD;AAC9C37D,eAAW,CAACogB,GAAD,EAAM;AACf,YAAMA,GAAN;AACA,WAAKgY,OAAL,GAAez1C,SAAf;AACA,WAAK01C,OAAL,GAAe11C,SAAf;AACA,WAAKo7E,WAAL,GAAmBp7E,SAAnB;AACA,WAAK86E,YAAL,GAAoB,EAApB;AACA,WAAKY,gBAAL,GAAwB,EAAxB;AACD;;AACD79B,iBAAa,GAAG;AACd,YAAM3F,OAAO,GAAG,KAAKs2B,QAAL,GAAgB7kD,SAAS,CAAC6wD,qBAAqB,CAAC,KAAKr7E,OAAN,CAArBq7E,GAAsC,CAAvC,CAAzC;AACA,YAAMvqE,CAAC,GAAG,KAAK+S,KAAL,GAAa,KAAKwE,QAAL,GAAgB0wB,OAAO,CAACl1B,KAA/C;AACA,YAAM5U,CAAC,GAAG,KAAKgW,MAAL,GAAc,KAAK6P,SAAL,GAAiBikB,OAAO,CAAC9zB,MAAjD;AACA,WAAKqxB,OAAL,GAAexzC,IAAI,CAACkB,KAALlB,CAAW,KAAK4H,IAAL,GAAYoG,CAAC,GAAG,CAAhB,GAAoBioC,OAAO,CAACruC,IAAvC5H,CAAf;AACA,WAAKyzC,OAAL,GAAezzC,IAAI,CAACkB,KAALlB,CAAW,KAAK8jB,GAAL,GAAW3X,CAAC,GAAG,CAAf,GAAmB8pC,OAAO,CAACnyB,GAAtC9jB,CAAf;AACA,WAAKm5E,WAAL,GAAmBn5E,IAAI,CAACkB,KAALlB,CAAWA,IAAI,CAACoC,GAALpC,CAASgO,CAAThO,EAAYmM,CAAZnM,IAAiB,CAA5BA,CAAnB;AACD;;AACD+7C,uBAAmB,GAAG;AACpB,YAAM;AAAC35C,WAAD;AAAMC;AAAN,UAAa,KAAKyjC,SAAL,CAAe,KAAf,CAAnB;AACA,WAAK1jC,GAAL,GAAW5H,cAAc,CAAC4H,GAAD,CAAd5H,IAAuB,CAACoH,KAAK,CAACQ,GAAD,CAA7B5H,GAAqC4H,GAArC5H,GAA2C,CAAtD;AACA,WAAK6H,GAAL,GAAW7H,cAAc,CAAC6H,GAAD,CAAd7H,IAAuB,CAACoH,KAAK,CAACS,GAAD,CAA7B7H,GAAqC6H,GAArC7H,GAA2C,CAAtD;AACA,WAAKy8E,sBAAL;AACD;;AACDS,oBAAgB,GAAG;AACjB,aAAO13E,IAAI,CAACo4C,IAALp4C,CAAU,KAAKm5E,WAAL,GAAmBZ,qBAAqB,CAAC,KAAKr7E,OAAN,CAAlD8C,CAAP;AACD;;AACDo9C,sBAAkB,CAACrT,KAAD,EAAQ;AACxBgtC,qBAAe,CAAC58E,SAAhB48E,CAA0B35B,kBAA1B25B,CAA6C18E,IAA7C08E,CAAkD,IAAlDA,EAAwDhtC,KAAxDgtC;AACA,WAAK8B,YAAL,GAAoB,KAAKxzC,SAAL,GACjB5oC,GADiB,CACb,CAAC3C,KAAD,EAAQwC,KAAR,KAAkB;AACrB,cAAMgqC,KAAK,GAAGnrC,QAAQ,CAAC,KAAK+B,OAAL,CAAai3C,WAAb,CAAyBh5C,QAA1B,EAAoC,CAACrB,KAAD,EAAQwC,KAAR,CAApC,EAAoD,IAApD,CAAtB;AACA,eAAOgqC,KAAK,IAAIA,KAAK,KAAK,CAAnBA,GAAuBA,KAAvBA,GAA+B,EAAtC;AAHgB,SAKjBza,MALiB,CAKV,CAAC1tB,CAAD,EAAIxC,CAAJ,KAAU,KAAK6hB,KAAL,CAAWqwB,iBAAX,CAA6BlyC,CAA7B,CALA,CAApB;AAMD;;AACDghD,OAAG,GAAG;AACJ,YAAM73B,IAAI,GAAG,KAAK5nB,OAAlB;;AACA,UAAI4nB,IAAI,CAACmvB,OAALnvB,IAAgBA,IAAI,CAACqvB,WAALrvB,CAAiBmvB,OAArC,EAA8C;AAC5CykC,0BAAkB,CAAC,IAAD,CAAlBA;AADF,aAEO;AACL,aAAKc,cAAL,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B;AACD;AACF;;AACDA,kBAAc,CAACmB,YAAD,EAAeC,aAAf,EAA8BC,WAA9B,EAA2CC,cAA3C,EAA2D;AACvE,WAAKtnC,OAAL,IAAgBxzC,IAAI,CAACkB,KAALlB,CAAW,CAAC26E,YAAY,GAAGC,aAAhB,IAAiC,CAA5C56E,CAAhB;AACA,WAAKyzC,OAAL,IAAgBzzC,IAAI,CAACkB,KAALlB,CAAW,CAAC66E,WAAW,GAAGC,cAAf,IAAiC,CAA5C96E,CAAhB;AACA,WAAKm5E,WAAL,IAAoBn5E,IAAI,CAACoC,GAALpC,CAAS,KAAKm5E,WAAL,GAAmB,CAA5Bn5E,EAA+BA,IAAI,CAACqC,GAALrC,CAAS26E,YAAT36E,EAAuB46E,aAAvB56E,EAAsC66E,WAAtC76E,EAAmD86E,cAAnD96E,CAA/BA,CAApB;AACD;;AACD2zC,iBAAa,CAACr3C,KAAD,EAAQ;AACnB,YAAMy+E,eAAe,GAAG96E,GAAG,IAAI,KAAK44E,YAAL,CAAkB/8E,MAAlB,IAA4B,CAAhC,CAA3B;AACA,YAAMqzC,UAAU,GAAG,KAAKjyC,OAAL,CAAaiyC,UAAb,IAA2B,CAA9C;AACA,aAAO1rC,eAAe,CAACnH,KAAK,GAAGy+E,eAARz+E,GAA0BgG,SAAS,CAAC6sC,UAAD,CAApC,CAAtB;AACD;;AACD4E,iCAA6B,CAACj6C,KAAD,EAAQ;AACnC,UAAID,aAAa,CAACC,KAAD,CAAjB,EAA0B;AACxB,eAAO+rC,GAAP;AACD;;AACD,YAAMm1C,aAAa,GAAG,KAAK7B,WAAL,IAAoB,KAAK92E,GAAL,GAAW,KAAKD,GAApC,CAAtB;;AACA,UAAI,KAAKlF,OAAL,CAAaxB,OAAjB,EAA0B;AACxB,eAAO,CAAC,KAAK2G,GAAL,GAAWvI,KAAZ,IAAqBkhF,aAA5B;AACD;;AACD,aAAO,CAAClhF,KAAK,GAAG,KAAKsI,GAAd,IAAqB44E,aAA5B;AACD;;AACDC,iCAA6B,CAAC73E,QAAD,EAAW;AACtC,UAAIvJ,aAAa,CAACuJ,QAAD,CAAjB,EAA6B;AAC3B,eAAOyiC,GAAP;AACD;;AACD,YAAMq1C,cAAc,GAAG93E,QAAQ,IAAI,KAAK+1E,WAAL,IAAoB,KAAK92E,GAAL,GAAW,KAAKD,GAApC,CAAJ,CAA/B;AACA,aAAO,KAAKlF,OAAL,CAAaxB,OAAb,GAAuB,KAAK2G,GAAL,GAAW64E,cAAlC,GAAmD,KAAK94E,GAAL,GAAW84E,cAArE;AACD;;AACDjC,wBAAoB,CAAC38E,KAAD,EAAQ;AAC1B,YAAM63C,WAAW,GAAG,KAAK0kC,YAAL,IAAqB,EAAzC;;AACA,UAAIv8E,KAAK,IAAI,CAATA,IAAcA,KAAK,GAAG63C,WAAW,CAACr4C,MAAtC,EAA8C;AAC5C,cAAMq/E,UAAU,GAAGhnC,WAAW,CAAC73C,KAAD,CAA9B;AACA,eAAOm+E,uBAAuB,CAAC,KAAKz4D,UAAL,EAAD,EAAoB1lB,KAApB,EAA2B6+E,UAA3B,CAA9B;AACD;AACF;;AACDjC,oBAAgB,CAAC58E,KAAD,EAAQ8+E,kBAAR,EAAiD;AAAA,UAArBrC,eAAqB,uEAAH,CAAG;AAC/D,YAAM71E,KAAK,GAAG,KAAKywC,aAAL,CAAmBr3C,KAAnB,IAA4BgE,OAA5B,GAAsCy4E,eAApD;AACA,aAAO;AACL36E,SAAC,EAAE4B,IAAI,CAAC6K,GAAL7K,CAASkD,KAATlD,IAAkBo7E,kBAAlBp7E,GAAuC,KAAKwzC,OAD1C;AAELl1C,SAAC,EAAE0B,IAAI,CAAC4J,GAAL5J,CAASkD,KAATlD,IAAkBo7E,kBAAlBp7E,GAAuC,KAAKyzC,OAF1C;AAGLvwC;AAHK,OAAP;AAKD;;AACDqxC,4BAAwB,CAACj4C,KAAD,EAAQxC,KAAR,EAAe;AACrC,aAAO,KAAKo/E,gBAAL,CAAsB58E,KAAtB,EAA6B,KAAKy3C,6BAAL,CAAmCj6C,KAAnC,CAA7B,CAAP;AACD;;AACDuhF,mBAAe,CAAC/+E,KAAD,EAAQ;AACrB,aAAO,KAAKi4C,wBAAL,CAA8Bj4C,KAAK,IAAI,CAAvC,EAA0C,KAAKsjD,YAAL,EAA1C,CAAP;AACD;;AACD07B,yBAAqB,CAACh/E,KAAD,EAAQ;AAC3B,YAAM;AAACsL,YAAD;AAAOkc,WAAP;AAAYjc,aAAZ;AAAmBkc;AAAnB,UAA6B,KAAK01D,gBAAL,CAAsBn9E,KAAtB,CAAnC;AACA,aAAO;AACLsL,YADK;AAELkc,WAFK;AAGLjc,aAHK;AAILkc;AAJK,OAAP;AAMD;;AACDm+B,kBAAc,GAAG;AACf,YAAM;AAAC/kC,uBAAD;AAAkBsxB,YAAI,EAAE;AAACyF;AAAD;AAAxB,UAAsC,KAAKh3C,OAAjD;;AACA,UAAIigB,eAAJ,EAAqB;AACnB,cAAMgB,GAAG,GAAG,KAAKA,GAAjB;AACAA,WAAG,CAACiD,IAAJjD;AACAA,WAAG,CAAC4E,SAAJ5E;AACAm8D,sBAAc,CAAC,IAAD,EAAO,KAAKvmC,6BAAL,CAAmC,KAAKijC,SAAxC,CAAP,EAA2D9iC,QAA3D,EAAqE,KAAK2kC,YAAL,CAAkB/8E,MAAvF,CAAdw+E;AACAn8D,WAAG,CAAC+E,SAAJ/E;AACAA,WAAG,CAACwH,SAAJxH,GAAgBhB,eAAhBgB;AACAA,WAAG,CAACoF,IAAJpF;AACAA,WAAG,CAACqD,OAAJrD;AACD;AACF;;AACDkkC,YAAQ,GAAG;AACT,YAAMlkC,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAM2G,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM;AAAC82C,kBAAD;AAAavF;AAAb,UAAqB3pB,IAA3B;AACA,YAAMkwD,UAAU,GAAG,KAAK6D,YAAL,CAAkB/8E,MAArC;AACA,UAAIH,CAAJ,EAAO6yC,MAAP,EAAe+K,QAAf;;AACA,UAAIz0B,IAAI,CAACqvB,WAALrvB,CAAiBmvB,OAArB,EAA8B;AAC5BgmC,uBAAe,CAAC,IAAD,EAAOjF,UAAP,CAAfiF;AACD;;AACD,UAAIxrC,IAAI,CAACwF,OAAT,EAAkB;AAChB,aAAKlK,KAAL,CAAWtkC,OAAX,CAAmB,CAAC20B,IAAD,EAAO99B,KAAP,KAAiB;AAClC,cAAIA,KAAK,KAAK,CAAd,EAAiB;AACfkyC,kBAAM,GAAG,KAAKuF,6BAAL,CAAmC3Z,IAAI,CAACtgC,KAAxC,CAAT00C;AACA,kBAAM0S,WAAW,GAAGzS,IAAI,CAAC/jB,UAAL+jB,CAAgB,KAAKzsB,UAAL,CAAgB1lB,KAAK,GAAG,CAAxB,CAAhBmyC,CAApB;AACA8rC,0BAAc,CAAC,IAAD,EAAOr5B,WAAP,EAAoB1S,MAApB,EAA4BwmC,UAA5B,CAAduF;AACD;AALH;AAOD;;AACD,UAAIvmC,UAAU,CAACC,OAAf,EAAwB;AACtB91B,WAAG,CAACiD,IAAJjD;;AACA,aAAKxiB,CAAC,GAAGq5E,UAAU,GAAG,CAAtB,EAAyBr5E,CAAC,IAAI,CAA9B,EAAiCA,CAAC,EAAlC,EAAsC;AACpC,gBAAMulD,WAAW,GAAGlN,UAAU,CAACtpB,UAAXspB,CAAsB,KAAKilC,oBAAL,CAA0Bt9E,CAA1B,CAAtBq4C,CAApB;AACA,gBAAM;AAACv4B,iBAAD;AAAQ4J;AAAR,cAAqB67B,WAA3B;;AACA,cAAI,CAAC77B,SAAD,IAAc,CAAC5J,KAAnB,EAA0B;AACxB;AACD;;AACD0C,aAAG,CAACkH,SAAJlH,GAAgBkH,SAAhBlH;AACAA,aAAG,CAACiH,WAAJjH,GAAkB1C,KAAlB0C;AACAA,aAAG,CAACokC,WAAJpkC,CAAgB+iC,WAAW,CAACvoB,UAA5Bxa;AACAA,aAAG,CAACqkC,cAAJrkC,GAAqB+iC,WAAW,CAACtoB,gBAAjCza;AACAqwB,gBAAM,GAAG,KAAKuF,6BAAL,CAAmCjvB,IAAI,CAACilB,KAALjlB,CAAWppB,OAAXopB,GAAqB,KAAK1iB,GAA1B0iB,GAAgC,KAAKziB,GAAxE,CAATmsC;AACA+K,kBAAQ,GAAG,KAAK2/B,gBAAL,CAAsBv9E,CAAtB,EAAyB6yC,MAAzB,CAAX+K;AACAp7B,aAAG,CAAC4E,SAAJ5E;AACAA,aAAG,CAACgF,MAAJhF,CAAW,KAAKq1B,OAAhBr1B,EAAyB,KAAKs1B,OAA9Bt1B;AACAA,aAAG,CAACiF,MAAJjF,CAAWo7B,QAAQ,CAACn7C,CAApB+f,EAAuBo7B,QAAQ,CAACj7C,CAAhC6f;AACAA,aAAG,CAACsF,MAAJtF;AACD;;AACDA,WAAG,CAACqD,OAAJrD;AACD;AACF;;AACDw3B,cAAU,GAAG,CAAE;;AACf+M,cAAU,GAAG;AACX,YAAMvkC,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAM2G,IAAI,GAAG,KAAK5nB,OAAlB;AACA,YAAM85C,QAAQ,GAAGlyB,IAAI,CAACilB,KAAtB;;AACA,UAAI,CAACiN,QAAQ,CAAC/C,OAAd,EAAuB;AACrB;AACD;;AACD,YAAM9E,UAAU,GAAG,KAAKwE,aAAL,CAAmB,CAAnB,CAAnB;AACA,UAAInF,MAAJ,EAAYztB,KAAZ;AACA5C,SAAG,CAACiD,IAAJjD;AACAA,SAAG,CAAC0E,SAAJ1E,CAAc,KAAKq1B,OAAnBr1B,EAA4B,KAAKs1B,OAAjCt1B;AACAA,SAAG,CAACtP,MAAJsP,CAAWgxB,UAAXhxB;AACAA,SAAG,CAACyH,SAAJzH,GAAgB,QAAhBA;AACAA,SAAG,CAAC0H,YAAJ1H,GAAmB,QAAnBA;AACA,WAAK4rB,KAAL,CAAWtkC,OAAX,CAAmB,CAAC20B,IAAD,EAAO99B,KAAP,KAAiB;AAClC,YAAIA,KAAK,KAAK,CAAVA,IAAe,CAACwoB,IAAI,CAACppB,OAAzB,EAAkC;AAChC;AACD;;AACD,cAAMwlD,WAAW,GAAGlK,QAAQ,CAACtsB,UAATssB,CAAoB,KAAKh1B,UAAL,CAAgB1lB,KAAhB,CAApB06C,CAApB;AACA,cAAMoI,QAAQ,GAAGz3B,MAAM,CAACu5B,WAAW,CAACrjC,IAAb,CAAvB;AACA2wB,cAAM,GAAG,KAAKuF,6BAAL,CAAmC,KAAKhK,KAAL,CAAWztC,KAAX,EAAkBxC,KAArD,CAAT00C;;AACA,YAAI0S,WAAW,CAACrK,iBAAhB,EAAmC;AACjC14B,aAAG,CAACN,IAAJM,GAAWihC,QAAQ,CAACx+B,MAApBzC;AACA4C,eAAK,GAAG5C,GAAG,CAAC2C,WAAJ3C,CAAgBic,IAAI,CAACkM,KAArBnoB,EAA4B4C,KAApCA;AACA5C,aAAG,CAACwH,SAAJxH,GAAgB+iC,WAAW,CAACpK,aAA5B34B;AACA,gBAAM83B,OAAO,GAAGvuB,SAAS,CAACw5B,WAAW,CAACnK,eAAb,CAAzB;AACA54B,aAAG,CAACgkC,QAAJhkC,CACE,CAAC4C,KAAD,GAAS,CAAT,GAAak1B,OAAO,CAACruC,IADvBuW,EAEE,CAACqwB,MAAD,GAAU4Q,QAAQ,CAAC1/C,IAAT0/C,GAAgB,CAA1B,GAA8BnJ,OAAO,CAACnyB,GAFxC3F,EAGE4C,KAAK,GAAGk1B,OAAO,CAACl1B,KAHlB5C,EAIEihC,QAAQ,CAAC1/C,IAAT0/C,GAAgBnJ,OAAO,CAAC9zB,MAJ1BhE;AAMD;;AACDyG,kBAAU,CAACzG,GAAD,EAAMic,IAAI,CAACkM,KAAX,EAAkB,CAAlB,EAAqB,CAACkI,MAAtB,EAA8B4Q,QAA9B,EAAwC;AAChD3jC,eAAK,EAAEylC,WAAW,CAACzlC;AAD6B,SAAxC,CAAVmJ;AAnBF;AAuBAzG,SAAG,CAACqD,OAAJrD;AACD;;AACDwkC,aAAS,GAAG,CAAE;;AAjMgC;;AAmMhD+3B,mBAAiB,CAAC9gF,EAAlB8gF,GAAuB,cAAvBA;AACAA,mBAAiB,CAACx6D,QAAlBw6D,GAA6B;AAC3BzmC,WAAO,EAAE,IADkB;AAE3BsnC,WAAO,EAAE,IAFkB;AAG3BhiC,YAAQ,EAAE,WAHiB;AAI3BvF,cAAU,EAAE;AACVC,aAAO,EAAE,IADC;AAEV5uB,eAAS,EAAE,CAFD;AAGVsT,gBAAU,EAAE,EAHF;AAIVC,sBAAgB,EAAE;AAJR,KAJe;AAU3B6V,QAAI,EAAE;AACJyF,cAAQ,EAAE;AADN,KAVqB;AAa3B/E,cAAU,EAAE,CAbe;AAc3BpF,SAAK,EAAE;AACL8M,uBAAiB,EAAE,IADd;AAEL17C,cAAQ,EAAEu6C,KAAK,CAACX,UAANW,CAAiBV;AAFtB,KAdoB;AAkB3Bb,eAAW,EAAE;AACX2C,mBAAa,EAAE/4C,SADJ;AAEXg5C,qBAAe,EAAE,CAFN;AAGX9C,aAAO,EAAE,IAHE;AAIXp2B,UAAI,EAAE;AACJne,YAAI,EAAE;AADF,OAJK;;AAOXvE,cAAQ,CAACmrC,KAAD,EAAQ;AACd,eAAOA,KAAP;AARS;;AAUX2P,aAAO,EAAE,CAVE;AAWX+iC,uBAAiB,EAAE;AAXR;AAlBc,GAA7B0B;AAgCAA,mBAAiB,CAAC5lC,aAAlB4lC,GAAkC;AAChC,wBAAoB,aADY;AAEhC,yBAAqB,OAFW;AAGhC,mBAAe;AAHiB,GAAlCA;AAKAA,mBAAiB,CAAC99D,WAAlB89D,GAAgC;AAC9B1mC,cAAU,EAAE;AACV1zB,eAAS,EAAE;AADD;AADkB,GAAhCo6D;AAMA,QAAMc,SAAS,GAAG;AAChBC,eAAW,EAAE;AAACC,YAAM,EAAE,IAAT;AAAeh8E,UAAI,EAAE,CAArB;AAAwBi8E,WAAK,EAAE;AAA/B,KADG;AAEhBC,UAAM,EAAE;AAACF,YAAM,EAAE,IAAT;AAAeh8E,UAAI,EAAE,IAArB;AAA2Bi8E,WAAK,EAAE;AAAlC,KAFQ;AAGhBE,UAAM,EAAE;AAACH,YAAM,EAAE,IAAT;AAAeh8E,UAAI,EAAE,KAArB;AAA4Bi8E,WAAK,EAAE;AAAnC,KAHQ;AAIhBG,QAAI,EAAE;AAACJ,YAAM,EAAE,IAAT;AAAeh8E,UAAI,EAAE,OAArB;AAA8Bi8E,WAAK,EAAE;AAArC,KAJU;AAKhBI,OAAG,EAAE;AAACL,YAAM,EAAE,IAAT;AAAeh8E,UAAI,EAAE,QAArB;AAA+Bi8E,WAAK,EAAE;AAAtC,KALW;AAMhBK,QAAI,EAAE;AAACN,YAAM,EAAE,KAAT;AAAgBh8E,UAAI,EAAE,SAAtB;AAAiCi8E,WAAK,EAAE;AAAxC,KANU;AAOhBM,SAAK,EAAE;AAACP,YAAM,EAAE,IAAT;AAAeh8E,UAAI,EAAE,OAArB;AAA8Bi8E,WAAK,EAAE;AAArC,KAPS;AAQhBO,WAAO,EAAE;AAACR,YAAM,EAAE,KAAT;AAAgBh8E,UAAI,EAAE,OAAtB;AAA+Bi8E,WAAK,EAAE;AAAtC,KARO;AAShBQ,QAAI,EAAE;AAACT,YAAM,EAAE,IAAT;AAAeh8E,UAAI,EAAE;AAArB;AATU,GAAlB;AAWA,QAAM08E,KAAK,GAAIliF,MAAM,CAAC2B,IAAP3B,CAAYshF,SAAZthF,CAAf;OAAMkiF;;AACN,WAASC,MAAT,CAAgB78E,CAAhB,EAAmBC,CAAnB,EAAsB;AACpB,WAAOD,CAAC,GAAGC,CAAX;AACD;;AACD,WAASktB,KAAT,CAAe1N,KAAf,EAAsBhE,KAAtB,EAA6B;AAC3B,QAAIphB,aAAa,CAACohB,KAAD,CAAjB,EAA0B;AACxB,aAAO,IAAP;AACD;;AACD,UAAMqhE,OAAO,GAAGr9D,KAAK,CAACs9D,QAAtB;AACA,UAAM;AAACC,YAAD;AAAS17E,WAAT;AAAgB27E;AAAhB,QAA8Bx9D,KAAK,CAACy9D,UAA1C;AACA,QAAI5iF,KAAK,GAAGmhB,KAAZ;;AACA,QAAI,OAAOuhE,MAAP,KAAkB,UAAtB,EAAkC;AAChC1iF,WAAK,GAAG0iF,MAAM,CAAC1iF,KAAD,CAAdA;AACD;;AACD,QAAI,CAACU,cAAc,CAACV,KAAD,CAAnB,EAA4B;AAC1BA,WAAK,GAAG,OAAO0iF,MAAP,KAAkB,QAAlB,GACJF,OAAO,CAAC3vD,KAAR2vD,CAAcxiF,KAAdwiF,EAAqBE,MAArBF,CADI,GAEJA,OAAO,CAAC3vD,KAAR2vD,CAAcxiF,KAAdwiF,CAFJxiF;AAGD;;AACD,QAAIA,KAAK,KAAK,IAAd,EAAoB;AAClB,aAAO,IAAP;AACD;;AACD,QAAIgH,KAAJ,EAAW;AACThH,WAAK,GAAGgH,KAAK,KAAK,MAAVA,KAAqBY,QAAQ,CAAC+6E,UAAD,CAAR/6E,IAAwB+6E,UAAU,KAAK,IAA5D37E,IACJw7E,OAAO,CAACl2B,OAARk2B,CAAgBxiF,KAAhBwiF,EAAuB,SAAvBA,EAAkCG,UAAlCH,CADIx7E,GAEJw7E,OAAO,CAACl2B,OAARk2B,CAAgBxiF,KAAhBwiF,EAAuBx7E,KAAvBw7E,CAFJxiF;AAGD;;AACD,WAAO,CAACA,KAAR;AACD;;AACD,WAAS6iF,yBAAT,CAAmCC,OAAnC,EAA4Cx6E,GAA5C,EAAiDC,GAAjD,EAAsDw6E,QAAtD,EAAgE;AAC9D,UAAM3gF,IAAI,GAAGkgF,KAAK,CAACtgF,MAAnB;;AACA,SAAK,IAAIH,CAAC,GAAGygF,KAAK,CAACp/E,OAANo/E,CAAcQ,OAAdR,CAAb,EAAqCzgF,CAAC,GAAGO,IAAI,GAAG,CAAhD,EAAmD,EAAEP,CAArD,EAAwD;AACtD,YAAMmhF,QAAQ,GAAGtB,SAAS,CAACY,KAAK,CAACzgF,CAAD,CAAN,CAA1B;AACA,YAAMy/B,MAAM,GAAG0hD,QAAQ,CAACnB,KAATmB,GAAiBA,QAAQ,CAACnB,KAA1BmB,GAAkCriF,MAAM,CAAC68E,gBAAxD;;AACA,UAAIwF,QAAQ,CAACpB,MAAToB,IAAmB98E,IAAI,CAACo4C,IAALp4C,CAAU,CAACqC,GAAG,GAAGD,GAAP,KAAeg5B,MAAM,GAAG0hD,QAAQ,CAACp9E,IAAjC,CAAVM,KAAqD68E,QAA5E,EAAsF;AACpF,eAAOT,KAAK,CAACzgF,CAAD,CAAZ;AACD;AACF;;AACD,WAAOygF,KAAK,CAAClgF,IAAI,GAAG,CAAR,CAAZ;AACD;;AACD,WAAS6gF,0BAAT,CAAoC99D,KAApC,EAA2Cq+B,QAA3C,EAAqDs/B,OAArD,EAA8Dx6E,GAA9D,EAAmEC,GAAnE,EAAwE;AACtE,SAAK,IAAI1G,CAAC,GAAGygF,KAAK,CAACtgF,MAANsgF,GAAe,CAA5B,EAA+BzgF,CAAC,IAAIygF,KAAK,CAACp/E,OAANo/E,CAAcQ,OAAdR,CAApC,EAA4DzgF,CAAC,EAA7D,EAAiE;AAC/D,YAAMwqD,IAAI,GAAGi2B,KAAK,CAACzgF,CAAD,CAAlB;;AACA,UAAI6/E,SAAS,CAACr1B,IAAD,CAATq1B,CAAgBE,MAAhBF,IAA0Bv8D,KAAK,CAACs9D,QAANt9D,CAAes5B,IAAft5B,CAAoB5c,GAApB4c,EAAyB7c,GAAzB6c,EAA8BknC,IAA9BlnC,KAAuCq+B,QAAQ,GAAG,CAAhF,EAAmF;AACjF,eAAO6I,IAAP;AACD;AACF;;AACD,WAAOi2B,KAAK,CAACQ,OAAO,GAAGR,KAAK,CAACp/E,OAANo/E,CAAcQ,OAAdR,CAAH,GAA4B,CAApC,CAAZ;AACD;;AACD,WAASY,kBAAT,CAA4B72B,IAA5B,EAAkC;AAChC,SAAK,IAAIxqD,CAAC,GAAGygF,KAAK,CAACp/E,OAANo/E,CAAcj2B,IAAdi2B,IAAsB,CAA9B,EAAiClgF,IAAI,GAAGkgF,KAAK,CAACtgF,MAAnD,EAA2DH,CAAC,GAAGO,IAA/D,EAAqE,EAAEP,CAAvE,EAA0E;AACxE,UAAI6/E,SAAS,CAACY,KAAK,CAACzgF,CAAD,CAAN,CAAT6/E,CAAoBE,MAAxB,EAAgC;AAC9B,eAAOU,KAAK,CAACzgF,CAAD,CAAZ;AACD;AACF;AACF;;AACD,WAASshF,OAAT,CAAiBlzC,KAAjB,EAAwBmzC,IAAxB,EAA8BC,UAA9B,EAA0C;AACxC,QAAI,CAACA,UAAL,EAAiB;AACfpzC,WAAK,CAACmzC,IAAD,CAALnzC,GAAc,IAAdA;AADF,WAEO,IAAIozC,UAAU,CAACrhF,MAAf,EAAuB;AAC5B,YAAM;AAAC4I,UAAD;AAAKD;AAAL,UAAWH,OAAO,CAAC64E,UAAD,EAAaD,IAAb,CAAxB;;AACA,YAAMj3B,SAAS,GAAGk3B,UAAU,CAACz4E,EAAD,CAAVy4E,IAAkBD,IAAlBC,GAAyBA,UAAU,CAACz4E,EAAD,CAAnCy4E,GAA0CA,UAAU,CAAC14E,EAAD,CAAtE;AACAslC,WAAK,CAACkc,SAAD,CAALlc,GAAmB,IAAnBA;AACD;AACF;;AACD,WAASqzC,aAAT,CAAuBn+D,KAAvB,EAA8B8qB,KAA9B,EAAqCttC,GAArC,EAA0C4gF,SAA1C,EAAqD;AACnD,UAAMf,OAAO,GAAGr9D,KAAK,CAACs9D,QAAtB;AACA,UAAM/kC,KAAK,GAAG,CAAC8kC,OAAO,CAACl2B,OAARk2B,CAAgBvyC,KAAK,CAAC,CAAD,CAALA,CAASjwC,KAAzBwiF,EAAgCe,SAAhCf,CAAf;AACA,UAAMz3E,IAAI,GAAGklC,KAAK,CAACA,KAAK,CAACjuC,MAANiuC,GAAe,CAAhB,CAALA,CAAwBjwC,KAArC;AACA,QAAI68C,KAAJ,EAAWr6C,KAAX;;AACA,SAAKq6C,KAAK,GAAGa,KAAb,EAAoBb,KAAK,IAAI9xC,IAA7B,EAAmC8xC,KAAK,GAAG,CAAC2lC,OAAO,CAACj2E,GAARi2E,CAAY3lC,KAAZ2lC,EAAmB,CAAnBA,EAAsBe,SAAtBf,CAA5C,EAA8E;AAC5EhgF,WAAK,GAAGG,GAAG,CAACk6C,KAAD,CAAXr6C;;AACA,UAAIA,KAAK,IAAI,CAAb,EAAgB;AACdytC,aAAK,CAACztC,KAAD,CAALytC,CAAa4M,KAAb5M,GAAqB,IAArBA;AACD;AACF;;AACD,WAAOA,KAAP;AACD;;AACD,WAASuzC,mBAAT,CAA6Br+D,KAA7B,EAAoCja,MAApC,EAA4Cq4E,SAA5C,EAAuD;AACrD,UAAMtzC,KAAK,GAAG,EAAd;AACA,UAAMttC,GAAG,GAAG,EAAZ;AACA,UAAMP,IAAI,GAAG8I,MAAM,CAAClJ,MAApB;AACA,QAAIH,CAAJ,EAAO7B,KAAP;;AACA,SAAK6B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGO,IAAhB,EAAsB,EAAEP,CAAxB,EAA2B;AACzB7B,WAAK,GAAGkL,MAAM,CAACrJ,CAAD,CAAd7B;AACA2C,SAAG,CAAC3C,KAAD,CAAH2C,GAAad,CAAbc;AACAstC,WAAK,CAAC/qC,IAAN+qC,CAAW;AACTjwC,aADS;AAET68C,aAAK,EAAE;AAFE,OAAX5M;AAID;;AACD,WAAQ7tC,IAAI,KAAK,CAATA,IAAc,CAACmhF,SAAfnhF,GAA4B6tC,KAA5B7tC,GAAoCkhF,aAAa,CAACn+D,KAAD,EAAQ8qB,KAAR,EAAettC,GAAf,EAAoB4gF,SAApB,CAAzD;AACD;;AACD,QAAME,SAAN,SAAwB3jC,KAAxB,CAA8B;AAC5Bx+B,eAAW,CAACgM,KAAD,EAAQ;AACjB,YAAMA,KAAN;AACA,WAAKmiB,MAAL,GAAc;AACZ9oB,YAAI,EAAE,EADM;AAEZ2kB,cAAM,EAAE,EAFI;AAGZ/G,WAAG,EAAE;AAHO,OAAd;AAKA,WAAKm/C,KAAL,GAAa,KAAb;AACA,WAAKC,UAAL,GAAkB1/E,SAAlB;AACA,WAAK2/E,QAAL,GAAgB,EAAhB;AACA,WAAKC,WAAL,GAAmB,KAAnB;AACA,WAAKjB,UAAL,GAAkB3+E,SAAlB;AACD;;AACDi9C,QAAI,CAACgc,SAAD,EAAYlyC,IAAZ,EAAkB;AACpB,YAAMo4D,IAAI,GAAGlmB,SAAS,CAACkmB,IAAVlmB,KAAmBA,SAAS,CAACkmB,IAAVlmB,GAAiB,EAApCA,CAAb;AACA,YAAMslB,OAAO,GAAG,KAAKC,QAAL,GAAgB,IAAI/1B,QAAQ,CAACC,KAAb,CAAmBuQ,SAAS,CAACxQ,QAAVwQ,CAAmB39B,IAAtC,CAAhC;AACAijD,aAAO,CAACthC,IAARshC,CAAax3D,IAAbw3D;AACA9+E,aAAO,CAAC0/E,IAAI,CAACU,cAAN,EAAsBtB,OAAO,CAACt2B,OAARs2B,EAAtB,CAAP9+E;AACA,WAAKk/E,UAAL,GAAkB;AAChBF,cAAM,EAAEU,IAAI,CAACV,MADG;AAEhB17E,aAAK,EAAEo8E,IAAI,CAACp8E,KAFI;AAGhB27E,kBAAU,EAAES,IAAI,CAACT;AAHD,OAAlB;AAKA,YAAMzhC,IAAN,CAAWgc,SAAX;AACA,WAAK2mB,WAAL,GAAmB74D,IAAI,CAAC+4D,UAAxB;AACD;;AACDlxD,SAAK,CAACyU,GAAD,EAAM9kC,KAAN,EAAa;AAChB,UAAI8kC,GAAG,KAAKrjC,SAAZ,EAAuB;AACrB,eAAO,IAAP;AACD;;AACD,aAAO4uB,KAAK,CAAC,IAAD,EAAOyU,GAAP,CAAZ;AACD;;AACDoa,gBAAY,GAAG;AACb,YAAMA,YAAN;AACA,WAAKjS,MAAL,GAAc;AACZ9oB,YAAI,EAAE,EADM;AAEZ2kB,cAAM,EAAE,EAFI;AAGZ/G,WAAG,EAAE;AAHO,OAAd;AAKD;;AACD0d,uBAAmB,GAAG;AACpB,YAAM7+C,OAAO,GAAG,KAAKA,OAArB;AACA,YAAMo/E,OAAO,GAAG,KAAKC,QAArB;AACA,YAAMp2B,IAAI,GAAGjpD,OAAO,CAACggF,IAARhgF,CAAaipD,IAAbjpD,IAAqB,KAAlC;AACA,UAAI;AAACkF,WAAD;AAAMC,WAAN;AAAWqG,kBAAX;AAAuBC;AAAvB,UAAqC,KAAKC,aAAL,EAAzC;;AACA,eAASk1E,YAAT,CAAsB1nD,MAAtB,EAA8B;AAC5B,YAAI,CAAC1tB,UAAD,IAAe,CAAC9G,KAAK,CAACw0B,MAAM,CAACh0B,GAAR,CAAzB,EAAuC;AACrCA,aAAG,GAAGpC,IAAI,CAACoC,GAALpC,CAASoC,GAATpC,EAAco2B,MAAM,CAACh0B,GAArBpC,CAANoC;AACD;;AACD,YAAI,CAACuG,UAAD,IAAe,CAAC/G,KAAK,CAACw0B,MAAM,CAAC/zB,GAAR,CAAzB,EAAuC;AACrCA,aAAG,GAAGrC,IAAI,CAACqC,GAALrC,CAASqC,GAATrC,EAAco2B,MAAM,CAAC/zB,GAArBrC,CAANqC;AACD;AACF;;AACD,UAAI,CAACqG,UAAD,IAAe,CAACC,UAApB,EAAgC;AAC9Bm1E,oBAAY,CAAC,KAAKC,eAAL,EAAD,CAAZD;;AACA,YAAI5gF,OAAO,CAACk5B,MAARl5B,KAAmB,OAAnBA,IAA8BA,OAAO,CAAC6sC,KAAR7sC,CAAcV,MAAdU,KAAyB,QAA3D,EAAqE;AACnE4gF,sBAAY,CAAC,KAAKh4C,SAAL,CAAe,KAAf,CAAD,CAAZg4C;AACD;AACF;;AACD17E,SAAG,GAAG5H,cAAc,CAAC4H,GAAD,CAAd5H,IAAuB,CAACoH,KAAK,CAACQ,GAAD,CAA7B5H,GAAqC4H,GAArC5H,GAA2C,CAAC8hF,OAAO,CAACl2B,OAARk2B,CAAgBziD,IAAI,CAACC,GAALD,EAAhByiD,EAA4Bn2B,IAA5Bm2B,CAAlDl6E;AACAC,SAAG,GAAG7H,cAAc,CAAC6H,GAAD,CAAd7H,IAAuB,CAACoH,KAAK,CAACS,GAAD,CAA7B7H,GAAqC6H,GAArC7H,GAA2C,CAAC8hF,OAAO,CAACh2B,KAARg2B,CAAcziD,IAAI,CAACC,GAALD,EAAdyiD,EAA0Bn2B,IAA1Bm2B,CAAD,GAAmC,CAApFj6E;AACA,WAAKD,GAAL,GAAWpC,IAAI,CAACoC,GAALpC,CAASoC,GAATpC,EAAcqC,GAAG,GAAG,CAApBrC,CAAX;AACA,WAAKqC,GAAL,GAAWrC,IAAI,CAACqC,GAALrC,CAASoC,GAAG,GAAG,CAAfpC,EAAkBqC,GAAlBrC,CAAX;AACD;;AACD+9E,mBAAe,GAAG;AAChB,YAAMnyD,GAAG,GAAG,KAAKoyD,kBAAL,EAAZ;AACA,UAAI57E,GAAG,GAAG3H,MAAM,CAAC2F,iBAAjB;AACA,UAAIiC,GAAG,GAAG5H,MAAM,CAACklC,iBAAjB;;AACA,UAAI/T,GAAG,CAAC9vB,MAAR,EAAgB;AACdsG,WAAG,GAAGwpB,GAAG,CAAC,CAAD,CAATxpB;AACAC,WAAG,GAAGupB,GAAG,CAACA,GAAG,CAAC9vB,MAAJ8vB,GAAa,CAAd,CAATvpB;AACD;;AACD,aAAO;AAACD,WAAD;AAAMC;AAAN,OAAP;AACD;;AACD65C,cAAU,GAAG;AACX,YAAMh/C,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM+gF,QAAQ,GAAG/gF,OAAO,CAACggF,IAAzB;AACA,YAAMlmC,QAAQ,GAAG95C,OAAO,CAAC6sC,KAAzB;AACA,YAAMozC,UAAU,GAAGnmC,QAAQ,CAACx6C,MAATw6C,KAAoB,QAApBA,GAA+B,KAAKgnC,kBAAL,EAA/BhnC,GAA2D,KAAKknC,SAAL,EAA9E;;AACA,UAAIhhF,OAAO,CAACk5B,MAARl5B,KAAmB,OAAnBA,IAA8BigF,UAAU,CAACrhF,MAA7C,EAAqD;AACnD,aAAKsG,GAAL,GAAW,KAAKs4C,QAAL,IAAiByiC,UAAU,CAAC,CAAD,CAAtC;AACA,aAAK96E,GAAL,GAAW,KAAKo4C,QAAL,IAAiB0iC,UAAU,CAACA,UAAU,CAACrhF,MAAXqhF,GAAoB,CAArB,CAAtC;AACD;;AACD,YAAM/6E,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAMC,GAAG,GAAG,KAAKA,GAAjB;;AACA,YAAM0nC,KAAK,GAAGhlC,cAAc,CAACo4E,UAAD,EAAa/6E,GAAb,EAAkBC,GAAlB,CAA5B;;AACA,WAAKm7E,KAAL,GAAaS,QAAQ,CAAC93B,IAAT83B,KAAkBjnC,QAAQ,CAACT,QAATS,GAC3B2lC,yBAAyB,CAACsB,QAAQ,CAACrB,OAAV,EAAmB,KAAKx6E,GAAxB,EAA6B,KAAKC,GAAlC,EAAuC,KAAK87E,iBAAL,CAAuB/7E,GAAvB,CAAvC,CADE40C,GAE3B+lC,0BAA0B,CAAC,IAAD,EAAOhzC,KAAK,CAACjuC,MAAb,EAAqBmiF,QAAQ,CAACrB,OAA9B,EAAuC,KAAKx6E,GAA5C,EAAiD,KAAKC,GAAtD,CAFjB47E,CAAb;AAGA,WAAKR,UAAL,GAAkB,CAACzmC,QAAQ,CAACL,KAATK,CAAeK,OAAhB,IAA2B,KAAKmmC,KAAL,KAAe,MAA1C,GAAmDz/E,SAAnD,GACdi/E,kBAAkB,CAAC,KAAKQ,KAAN,CADtB;AAEA,WAAKY,WAAL,CAAiBjB,UAAjB;;AACA,UAAIjgF,OAAO,CAACxB,OAAZ,EAAqB;AACnBquC,aAAK,CAACruC,OAANquC;AACD;;AACD,aAAOuzC,mBAAmB,CAAC,IAAD,EAAOvzC,KAAP,EAAc,KAAK0zC,UAAnB,CAA1B;AACD;;AACDhhC,iBAAa,GAAG;AACd,UAAI,KAAKv/C,OAAL,CAAamhF,mBAAjB,EAAsC;AACpC,aAAKD,WAAL,CAAiB,KAAKr0C,KAAL,CAAWttC,GAAX,CAAe29B,IAAI,IAAI,CAACA,IAAI,CAACtgC,KAA7B,CAAjB;AACD;AACF;;AACDskF,eAAW,CAACjB,UAAD,EAAa;AACtB,UAAIx5E,KAAK,GAAG,CAAZ;AACA,UAAIC,GAAG,GAAG,CAAV;AACA,UAAI4zC,KAAJ,EAAW3yC,IAAX;;AACA,UAAI,KAAK3H,OAAL,CAAasxC,MAAb,IAAuB2uC,UAAU,CAACrhF,MAAtC,EAA8C;AAC5C07C,aAAK,GAAG,KAAK8mC,kBAAL,CAAwBnB,UAAU,CAAC,CAAD,CAAlC,CAAR3lC;;AACA,YAAI2lC,UAAU,CAACrhF,MAAXqhF,KAAsB,CAA1B,EAA6B;AAC3Bx5E,eAAK,GAAG,IAAI6zC,KAAZ7zC;AADF,eAEO;AACLA,eAAK,GAAG,CAAC,KAAK26E,kBAAL,CAAwBnB,UAAU,CAAC,CAAD,CAAlC,IAAyC3lC,KAA1C,IAAmD,CAA3D7zC;AACD;;AACDkB,YAAI,GAAG,KAAKy5E,kBAAL,CAAwBnB,UAAU,CAACA,UAAU,CAACrhF,MAAXqhF,GAAoB,CAArB,CAAlC,CAAPt4E;;AACA,YAAIs4E,UAAU,CAACrhF,MAAXqhF,KAAsB,CAA1B,EAA6B;AAC3Bv5E,aAAG,GAAGiB,IAANjB;AADF,eAEO;AACLA,aAAG,GAAG,CAACiB,IAAI,GAAG,KAAKy5E,kBAAL,CAAwBnB,UAAU,CAACA,UAAU,CAACrhF,MAAXqhF,GAAoB,CAArB,CAAlC,CAAR,IAAsE,CAA5Ev5E;AACD;AACF;;AACD,YAAMo9C,KAAK,GAAGm8B,UAAU,CAACrhF,MAAXqhF,GAAoB,CAApBA,GAAwB,GAAxBA,GAA8B,IAA5C;AACAx5E,WAAK,GAAGQ,WAAW,CAACR,KAAD,EAAQ,CAAR,EAAWq9C,KAAX,CAAnBr9C;AACAC,SAAG,GAAGO,WAAW,CAACP,GAAD,EAAM,CAAN,EAASo9C,KAAT,CAAjBp9C;AACA,WAAK85E,QAAL,GAAgB;AAAC/5E,aAAD;AAAQC,WAAR;AAAaw3B,cAAM,EAAE,KAAKz3B,KAAK,GAAG,CAARA,GAAYC,GAAjB;AAArB,OAAhB;AACD;;AACDs6E,aAAS,GAAG;AACV,YAAM5B,OAAO,GAAG,KAAKC,QAArB;AACA,YAAMn6E,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAMC,GAAG,GAAG,KAAKA,GAAjB;AACA,YAAMnF,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM+gF,QAAQ,GAAG/gF,OAAO,CAACggF,IAAzB;AACA,YAAMxmC,KAAK,GAAGunC,QAAQ,CAAC93B,IAAT83B,IAAiBtB,yBAAyB,CAACsB,QAAQ,CAACrB,OAAV,EAAmBx6E,GAAnB,EAAwBC,GAAxB,EAA6B,KAAK87E,iBAAL,CAAuB/7E,GAAvB,CAA7B,CAAxD;AACA,YAAMq1E,QAAQ,GAAG58E,cAAc,CAACojF,QAAQ,CAACxG,QAAV,EAAoB,CAApB,CAA/B;AACA,YAAMpxB,OAAO,GAAG3P,KAAK,KAAK,MAAVA,GAAmBunC,QAAQ,CAACxB,UAA5B/lC,GAAyC,KAAzD;AACA,YAAM6nC,UAAU,GAAG78E,QAAQ,CAAC2kD,OAAD,CAAR3kD,IAAqB2kD,OAAO,KAAK,IAApD;AACA,YAAMtc,KAAK,GAAG,EAAd;AACA,UAAIyN,KAAK,GAAGp1C,GAAZ;AACA,UAAI86E,IAAJ,EAAU70E,KAAV;;AACA,UAAIk2E,UAAJ,EAAgB;AACd/mC,aAAK,GAAG,CAAC8kC,OAAO,CAACl2B,OAARk2B,CAAgB9kC,KAAhB8kC,EAAuB,SAAvBA,EAAkCj2B,OAAlCi2B,CAAT9kC;AACD;;AACDA,WAAK,GAAG,CAAC8kC,OAAO,CAACl2B,OAARk2B,CAAgB9kC,KAAhB8kC,EAAuBiC,UAAU,GAAG,KAAH,GAAW7nC,KAA5C4lC,CAAT9kC;;AACA,UAAI8kC,OAAO,CAAC/jC,IAAR+jC,CAAaj6E,GAAbi6E,EAAkBl6E,GAAlBk6E,EAAuB5lC,KAAvB4lC,IAAgC,SAAS7E,QAA7C,EAAuD;AACrD,cAAM,IAAIjsD,KAAJ,CAAUppB,GAAG,GAAG,OAANA,GAAgBC,GAAhBD,GAAsB,sCAAtBA,GAA+Dq1E,QAA/Dr1E,GAA0E,GAA1EA,GAAgFs0C,KAA1F,CAAN;AACD;;AACD,YAAMymC,UAAU,GAAGjgF,OAAO,CAAC6sC,KAAR7sC,CAAcV,MAAdU,KAAyB,MAAzBA,IAAmC,KAAKshF,iBAAL,EAAtD;;AACA,WAAKtB,IAAI,GAAG1lC,KAAP0lC,EAAc70E,KAAK,GAAG,CAA3B,EAA8B60E,IAAI,GAAG76E,GAArC,EAA0C66E,IAAI,GAAG,CAACZ,OAAO,CAACj2E,GAARi2E,CAAYY,IAAZZ,EAAkB7E,QAAlB6E,EAA4B5lC,KAA5B4lC,CAARY,EAA4C70E,KAAK,EAA3F,EAA+F;AAC7F40E,eAAO,CAAClzC,KAAD,EAAQmzC,IAAR,EAAcC,UAAd,CAAPF;AACD;;AACD,UAAIC,IAAI,KAAK76E,GAAT66E,IAAgBhgF,OAAO,CAACk5B,MAARl5B,KAAmB,OAAnCggF,IAA8C70E,KAAK,KAAK,CAA5D,EAA+D;AAC7D40E,eAAO,CAAClzC,KAAD,EAAQmzC,IAAR,EAAcC,UAAd,CAAPF;AACD;;AACD,aAAO/iF,MAAM,CAAC2B,IAAP3B,CAAY6vC,KAAZ7vC,EAAmBsH,IAAnBtH,CAAwB,CAACsF,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAAtCvF,EAAyCuC,GAAzCvC,CAA6CkE,CAAC,IAAI,CAACA,CAAnDlE,CAAP;AACD;;AACDqsC,oBAAgB,CAACzsC,KAAD,EAAQ;AACtB,YAAMwiF,OAAO,GAAG,KAAKC,QAArB;AACA,YAAM0B,QAAQ,GAAG,KAAK/gF,OAAL,CAAaggF,IAA9B;;AACA,UAAIe,QAAQ,CAACQ,aAAb,EAA4B;AAC1B,eAAOnC,OAAO,CAAC1nD,MAAR0nD,CAAexiF,KAAfwiF,EAAsB2B,QAAQ,CAACQ,aAA/BnC,CAAP;AACD;;AACD,aAAOA,OAAO,CAAC1nD,MAAR0nD,CAAexiF,KAAfwiF,EAAsB2B,QAAQ,CAACL,cAATK,CAAwBS,QAA9CpC,CAAP;AACD;;AACDqC,uBAAmB,CAACzB,IAAD,EAAO5gF,KAAP,EAAcytC,KAAd,EAAqBnV,MAArB,EAA6B;AAC9C,YAAM13B,OAAO,GAAG,KAAKA,OAArB;AACA,YAAM8oD,OAAO,GAAG9oD,OAAO,CAACggF,IAARhgF,CAAa0gF,cAA7B;AACA,YAAMz3B,IAAI,GAAG,KAAKq3B,KAAlB;AACA,YAAMH,SAAS,GAAG,KAAKI,UAAvB;AACA,YAAMmB,WAAW,GAAGz4B,IAAI,IAAIH,OAAO,CAACG,IAAD,CAAnC;AACA,YAAM04B,WAAW,GAAGxB,SAAS,IAAIr3B,OAAO,CAACq3B,SAAD,CAAxC;AACA,YAAMjjD,IAAI,GAAG2P,KAAK,CAACztC,KAAD,CAAlB;AACA,YAAMq6C,KAAK,GAAG0mC,SAAS,IAAIwB,WAAbxB,IAA4BjjD,IAA5BijD,IAAoCjjD,IAAI,CAACuc,KAAvD;;AACA,YAAMrQ,KAAK,GAAG,KAAKi2C,QAAL,CAAc3nD,MAAd,CAAqBsoD,IAArB,EAA2BtoD,MAAM,KAAK+hB,KAAK,GAAGkoC,WAAH,GAAiBD,WAA3B,CAAjC,CAAd;;AACA,YAAMrqD,SAAS,GAAGr3B,OAAO,CAAC6sC,KAAR7sC,CAAc/B,QAAhC;AACA,aAAOo5B,SAAS,GAAGp5B,QAAQ,CAACo5B,SAAD,EAAY,CAAC+R,KAAD,EAAQhqC,KAAR,EAAeytC,KAAf,CAAZ,EAAmC,IAAnC,CAAX,GAAsDzD,KAAtE;AACD;;AACD8W,sBAAkB,CAACrT,KAAD,EAAQ;AACxB,UAAIpuC,CAAJ,EAAOO,IAAP,EAAak+B,IAAb;;AACA,WAAKz+B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAG6tC,KAAK,CAACjuC,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9Cy+B,YAAI,GAAG2P,KAAK,CAACpuC,CAAD,CAAZy+B;AACAA,YAAI,CAACkM,KAALlM,GAAa,KAAKukD,mBAAL,CAAyBvkD,IAAI,CAACtgC,KAA9B,EAAqC6B,CAArC,EAAwCouC,KAAxC,CAAb3P;AACD;AACF;;AACDkkD,sBAAkB,CAACxkF,KAAD,EAAQ;AACxB,aAAOA,KAAK,KAAK,IAAVA,GAAiB+rC,GAAjB/rC,GAAuB,CAACA,KAAK,GAAG,KAAKsI,GAAd,KAAsB,KAAKC,GAAL,GAAW,KAAKD,GAAtC,CAA9B;AACD;;AACDyG,oBAAgB,CAAC/O,KAAD,EAAQ;AACtB,YAAMglF,OAAO,GAAG,KAAKpB,QAArB;AACA,YAAM7sD,GAAG,GAAG,KAAKytD,kBAAL,CAAwBxkF,KAAxB,CAAZ;AACA,aAAO,KAAKi0C,kBAAL,CAAwB,CAAC+wC,OAAO,CAACn7E,KAARm7E,GAAgBjuD,GAAjB,IAAwBiuD,OAAO,CAAC1jD,MAAxD,CAAP;AACD;;AACDqkB,oBAAgB,CAAC99B,KAAD,EAAQ;AACtB,YAAMm9D,OAAO,GAAG,KAAKpB,QAArB;AACA,YAAM7sD,GAAG,GAAG,KAAK8uB,kBAAL,CAAwBh+B,KAAxB,IAAiCm9D,OAAO,CAAC1jD,MAAzC,GAAkD0jD,OAAO,CAACl7E,GAAtE;AACA,aAAO,KAAKxB,GAAL,GAAWyuB,GAAG,IAAI,KAAKxuB,GAAL,GAAW,KAAKD,GAApB,CAArB;AACD;;AACD28E,iBAAa,CAACz4C,KAAD,EAAQ;AACnB,YAAM04C,SAAS,GAAG,KAAK9hF,OAAL,CAAa6sC,KAA/B;AACA,YAAMk1C,cAAc,GAAG,KAAK9gE,GAAL,CAAS2C,WAAT,CAAqBwlB,KAArB,EAA4BvlB,KAAnD;AACA,YAAM7d,KAAK,GAAGZ,SAAS,CAAC,KAAKmpC,YAAL,KAAsBuzC,SAAS,CAAC7oC,WAAhC,GAA8C6oC,SAAS,CAAC9oC,WAAzD,CAAvB;AACA,YAAMgpC,WAAW,GAAGl/E,IAAI,CAAC6K,GAAL7K,CAASkD,KAATlD,CAApB;AACA,YAAMm/E,WAAW,GAAGn/E,IAAI,CAAC4J,GAAL5J,CAASkD,KAATlD,CAApB;;AACA,YAAMo/E,YAAY,GAAG,KAAK9/B,uBAAL,CAA6B,CAA7B,EAAgC5/C,IAArD;;AACA,aAAO;AACLsO,SAAC,EAAGixE,cAAc,GAAGC,WAAjBD,GAAiCG,YAAY,GAAGD,WAD/C;AAELhzE,SAAC,EAAG8yE,cAAc,GAAGE,WAAjBF,GAAiCG,YAAY,GAAGF;AAF/C,OAAP;AAID;;AACDf,qBAAiB,CAACkB,WAAD,EAAc;AAC7B,YAAMpB,QAAQ,GAAG,KAAK/gF,OAAL,CAAaggF,IAA9B;AACA,YAAMU,cAAc,GAAGK,QAAQ,CAACL,cAAhC;AACA,YAAMhpD,MAAM,GAAGgpD,cAAc,CAACK,QAAQ,CAAC93B,IAAV,CAAdy3B,IAAiCA,cAAc,CAACnC,WAA/D;;AACA,YAAM6D,YAAY,GAAG,KAAKX,mBAAL,CAAyBU,WAAzB,EAAsC,CAAtC,EAAyC/B,mBAAmB,CAAC,IAAD,EAAO,CAAC+B,WAAD,CAAP,EAAsB,KAAK5B,UAA3B,CAA5D,EAAoG7oD,MAApG,CAArB;;AACA,YAAMl1B,IAAI,GAAG,KAAKq/E,aAAL,CAAmBO,YAAnB,CAAb;;AACA,YAAMzC,QAAQ,GAAG78E,IAAI,CAACkB,KAALlB,CAAW,KAAKyrC,YAAL,KAAsB,KAAK1qB,KAAL,GAAarhB,IAAI,CAACsO,CAAxC,GAA4C,KAAKmU,MAAL,GAAcziB,IAAI,CAACyM,CAA1EnM,IAA+E,CAAhG;AACA,aAAO68E,QAAQ,GAAG,CAAXA,GAAeA,QAAfA,GAA0B,CAAjC;AACD;;AACD2B,qBAAiB,GAAG;AAClB,UAAIrB,UAAU,GAAG,KAAK5zC,MAAL,CAAY9oB,IAAZ,IAAoB,EAArC;AACA,UAAI9kB,CAAJ,EAAOO,IAAP;;AACA,UAAIihF,UAAU,CAACrhF,MAAf,EAAuB;AACrB,eAAOqhF,UAAP;AACD;;AACD,YAAMhiC,KAAK,GAAG,KAAK/a,uBAAL,EAAd;;AACA,UAAI,KAAKu9C,WAAL,IAAoBxiC,KAAK,CAACr/C,MAA9B,EAAsC;AACpC,eAAQ,KAAKytC,MAAL,CAAY9oB,IAAZ,GAAmB06B,KAAK,CAAC,CAAD,CAALA,CAAS7a,UAAT6a,CAAoBhV,kBAApBgV,CAAuC,IAAvCA,CAA3B;AACD;;AACD,WAAKx/C,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGi/C,KAAK,CAACr/C,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9CwhF,kBAAU,GAAGA,UAAU,CAACzzC,MAAXyzC,CAAkBhiC,KAAK,CAACx/C,CAAD,CAALw/C,CAAS7a,UAAT6a,CAAoBhV,kBAApBgV,CAAuC,IAAvCA,CAAlBgiC,CAAbA;AACD;;AACD,aAAQ,KAAK5zC,MAAL,CAAY9oB,IAAZ,GAAmB,KAAKuV,SAAL,CAAemnD,UAAf,CAA3B;AACD;;AACDa,sBAAkB,GAAG;AACnB,YAAMb,UAAU,GAAG,KAAK5zC,MAAL,CAAYnE,MAAZ,IAAsB,EAAzC;AACA,UAAIzpC,CAAJ,EAAOO,IAAP;;AACA,UAAIihF,UAAU,CAACrhF,MAAf,EAAuB;AACrB,eAAOqhF,UAAP;AACD;;AACD,YAAM/3C,MAAM,GAAG,KAAKC,SAAL,EAAf;;AACA,WAAK1pC,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGkpC,MAAM,CAACtpC,MAA1B,EAAkCH,CAAC,GAAGO,IAAtC,EAA4C,EAAEP,CAA9C,EAAiD;AAC/CwhF,kBAAU,CAACn+E,IAAXm+E,CAAgBxwD,KAAK,CAAC,IAAD,EAAOyY,MAAM,CAACzpC,CAAD,CAAb,CAArBwhF;AACD;;AACD,aAAQ,KAAK5zC,MAAL,CAAYnE,MAAZ,GAAqB,KAAKu4C,WAAL,GAAmBR,UAAnB,GAAgC,KAAKnnD,SAAL,CAAemnD,UAAf,CAA7D;AACD;;AACDnnD,aAAS,CAAChxB,MAAD,EAAS;AAChB,aAAOiB,YAAY,CAACjB,MAAM,CAACxD,IAAPwD,CAAYq3E,MAAZr3E,CAAD,CAAnB;AACD;;AAtP2B;;AAwP9Bu4E,WAAS,CAAC3jF,EAAV2jF,GAAe,MAAfA;AACAA,WAAS,CAACr9D,QAAVq9D,GAAqB;AACnBnnD,UAAM,EAAE,MADW;AAEnBowB,YAAQ,EAAE,EAFS;AAGnB02B,QAAI,EAAE;AACJV,YAAM,EAAE,KADJ;AAEJr2B,UAAI,EAAE,KAFF;AAGJrlD,WAAK,EAAE,KAHH;AAIJ27E,gBAAU,EAAE,KAJR;AAKJG,aAAO,EAAE,aALL;AAMJgB,oBAAc,EAAE;AANZ,KAHa;AAWnB7zC,SAAK,EAAE;AACLvtC,YAAM,EAAE,MADH;AAELm6C,WAAK,EAAE;AACLU,eAAO,EAAE;AADJ;AAFF;AAXY,GAArBkmC;;AAmBA,WAAS9iE,WAAT,CAAqBlW,KAArB,EAA4B0X,GAA5B,EAAiCvgB,OAAjC,EAA0C;AACxC,QAAIgJ,EAAE,GAAG,CAAT;AACA,QAAID,EAAE,GAAGF,KAAK,CAACzI,MAANyI,GAAe,CAAxB;AACA,QAAIg7E,UAAJ,EAAgBC,UAAhB,EAA4BC,UAA5B,EAAwCC,UAAxC;;AACA,QAAIhkF,OAAJ,EAAa;AACX,UAAIugB,GAAG,IAAI1X,KAAK,CAACG,EAAD,CAALH,CAAUssB,GAAjB5U,IAAwBA,GAAG,IAAI1X,KAAK,CAACE,EAAD,CAALF,CAAUssB,GAA7C,EAAkD;AAChD,SAAC;AAACnsB,YAAD;AAAKD;AAAL,YAAWG,YAAY,CAACL,KAAD,EAAQ,KAAR,EAAe0X,GAAf,CAAxB;AACD;;AACD,OAAC;AAAC4U,WAAG,EAAE0uD,UAAN;AAAkBrC,YAAI,EAAEuC;AAAxB,UAAsCl7E,KAAK,CAACG,EAAD,CAA5C;AACA,OAAC;AAACmsB,WAAG,EAAE2uD,UAAN;AAAkBtC,YAAI,EAAEwC;AAAxB,UAAsCn7E,KAAK,CAACE,EAAD,CAA5C;AALF,WAMO;AACL,UAAIwX,GAAG,IAAI1X,KAAK,CAACG,EAAD,CAALH,CAAU24E,IAAjBjhE,IAAyBA,GAAG,IAAI1X,KAAK,CAACE,EAAD,CAALF,CAAU24E,IAA9C,EAAoD;AAClD,SAAC;AAACx4E,YAAD;AAAKD;AAAL,YAAWG,YAAY,CAACL,KAAD,EAAQ,MAAR,EAAgB0X,GAAhB,CAAxB;AACD;;AACD,OAAC;AAACihE,YAAI,EAAEqC,UAAP;AAAmB1uD,WAAG,EAAE4uD;AAAxB,UAAsCl7E,KAAK,CAACG,EAAD,CAA5C;AACA,OAAC;AAACw4E,YAAI,EAAEsC,UAAP;AAAmB3uD,WAAG,EAAE6uD;AAAxB,UAAsCn7E,KAAK,CAACE,EAAD,CAA5C;AACD;;AACD,UAAMk7E,IAAI,GAAGH,UAAU,GAAGD,UAA1B;AACA,WAAOI,IAAI,GAAGF,UAAU,GAAG,CAACC,UAAU,GAAGD,UAAd,KAA6BxjE,GAAG,GAAGsjE,UAAnC,IAAiDI,IAAjE,GAAwEF,UAAnF;AACD;;AACD,QAAMG,eAAN,SAA8BrC,SAA9B,CAAwC;AACtCniE,eAAW,CAACgM,KAAD,EAAQ;AACjB,YAAMA,KAAN;AACA,WAAKy4D,MAAL,GAAc,EAAd;AACA,WAAKC,OAAL,GAAe/hF,SAAf;AACA,WAAKgiF,WAAL,GAAmBhiF,SAAnB;AACD;;AACDqgF,eAAW,GAAG;AACZ,YAAMjB,UAAU,GAAG,KAAK6C,sBAAL,EAAnB;;AACA,YAAMz7E,KAAK,GAAG,KAAKs7E,MAAL,GAAc,KAAKI,gBAAL,CAAsB9C,UAAtB,CAA5B;AACA,WAAK2C,OAAL,GAAerlE,WAAW,CAAClW,KAAD,EAAQ,KAAKnC,GAAb,CAA1B;AACA,WAAK29E,WAAL,GAAmBtlE,WAAW,CAAClW,KAAD,EAAQ,KAAKlC,GAAb,CAAXoY,GAA+B,KAAKqlE,OAAvD;AACA,YAAM1B,WAAN,CAAkBjB,UAAlB;AACD;;AACD8C,oBAAgB,CAAC9C,UAAD,EAAa;AAC3B,YAAM;AAAC/6E,WAAD;AAAMC;AAAN,UAAa,IAAnB;AACA,YAAM6D,KAAK,GAAG,EAAd;AACA,YAAM3B,KAAK,GAAG,EAAd;AACA,UAAI5I,CAAJ,EAAOO,IAAP,EAAaszB,IAAb,EAAmBqa,IAAnB,EAAyBzc,IAAzB;;AACA,WAAKzxB,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGihF,UAAU,CAACrhF,MAA9B,EAAsCH,CAAC,GAAGO,IAA1C,EAAgD,EAAEP,CAAlD,EAAqD;AACnDkuC,YAAI,GAAGszC,UAAU,CAACxhF,CAAD,CAAjBkuC;;AACA,YAAIA,IAAI,IAAIznC,GAARynC,IAAeA,IAAI,IAAIxnC,GAA3B,EAAgC;AAC9B6D,eAAK,CAAClH,IAANkH,CAAW2jC,IAAX3jC;AACD;AACF;;AACD,UAAIA,KAAK,CAACpK,MAANoK,GAAe,CAAnB,EAAsB;AACpB,eAAO,CACL;AAACg3E,cAAI,EAAE96E,GAAP;AAAYyuB,aAAG,EAAE;AAAjB,SADK,EAEL;AAACqsD,cAAI,EAAE76E,GAAP;AAAYwuB,aAAG,EAAE;AAAjB,SAFK,CAAP;AAID;;AACD,WAAKl1B,CAAC,GAAG,CAAJA,EAAOO,IAAI,GAAGgK,KAAK,CAACpK,MAAzB,EAAiCH,CAAC,GAAGO,IAArC,EAA2C,EAAEP,CAA7C,EAAgD;AAC9CyxB,YAAI,GAAGlnB,KAAK,CAACvK,CAAC,GAAG,CAAL,CAAZyxB;AACAoC,YAAI,GAAGtpB,KAAK,CAACvK,CAAC,GAAG,CAAL,CAAZ6zB;AACAqa,YAAI,GAAG3jC,KAAK,CAACvK,CAAD,CAAZkuC;;AACA,YAAI7pC,IAAI,CAACc,KAALd,CAAW,CAACotB,IAAI,GAAGoC,IAAR,IAAgB,CAA3BxvB,MAAkC6pC,IAAtC,EAA4C;AAC1CtlC,eAAK,CAACvF,IAANuF,CAAW;AAAC24E,gBAAI,EAAErzC,IAAP;AAAahZ,eAAG,EAAEl1B,CAAC,IAAIO,IAAI,GAAG,CAAX;AAAnB,WAAXqI;AACD;AACF;;AACD,aAAOA,KAAP;AACD;;AACDy7E,0BAAsB,GAAG;AACvB,UAAI7C,UAAU,GAAG,KAAK5zC,MAAL,CAAYlL,GAAZ,IAAmB,EAApC;;AACA,UAAI8+C,UAAU,CAACrhF,MAAf,EAAuB;AACrB,eAAOqhF,UAAP;AACD;;AACD,YAAM18D,IAAI,GAAG,KAAK+9D,iBAAL,EAAb;AACA,YAAMl4C,KAAK,GAAG,KAAK03C,kBAAL,EAAd;;AACA,UAAIv9D,IAAI,CAAC3kB,MAAL2kB,IAAe6lB,KAAK,CAACxqC,MAAzB,EAAiC;AAC/BqhF,kBAAU,GAAG,KAAKnnD,SAAL,CAAevV,IAAI,CAACipB,MAALjpB,CAAY6lB,KAAZ7lB,CAAf,CAAb08D;AADF,aAEO;AACLA,kBAAU,GAAG18D,IAAI,CAAC3kB,MAAL2kB,GAAcA,IAAdA,GAAqB6lB,KAAlC62C;AACD;;AACDA,gBAAU,GAAG,KAAK5zC,MAAL,CAAYlL,GAAZ,GAAkB8+C,UAA/BA;AACA,aAAOA,UAAP;AACD;;AACDmB,sBAAkB,CAACxkF,KAAD,EAAQ;AACxB,aAAO,CAAC2gB,WAAW,CAAC,KAAKolE,MAAN,EAAc/lF,KAAd,CAAX2gB,GAAkC,KAAKqlE,OAAxC,IAAmD,KAAKC,WAA/D;AACD;;AACDtgC,oBAAgB,CAAC99B,KAAD,EAAQ;AACtB,YAAMm9D,OAAO,GAAG,KAAKpB,QAArB;AACA,YAAMh+B,OAAO,GAAG,KAAKC,kBAAL,CAAwBh+B,KAAxB,IAAiCm9D,OAAO,CAAC1jD,MAAzC,GAAkD0jD,OAAO,CAACl7E,GAA1E;AACA,aAAO6W,WAAW,CAAC,KAAKolE,MAAN,EAAcngC,OAAO,GAAG,KAAKqgC,WAAfrgC,GAA6B,KAAKogC,OAAhD,EAAyD,IAAzD,CAAlB;AACD;;AA/DqC;;AAiExCF,iBAAe,CAAChmF,EAAhBgmF,GAAqB,YAArBA;AACAA,iBAAe,CAAC1/D,QAAhB0/D,GAA2BrC,SAAS,CAACr9D,QAArC0/D;AAEA,MAAI1gE,MAAM,GAAG,aAAahlB,MAAM,CAACgtC,MAAPhtC,CAAc;AACxC0rD,aAAS,EAAE,IAD6B;AAExC4vB,iBAAa,EAAEA,aAFyB;AAGxCoC,eAAW,EAAEA,WAH2B;AAIxCS,oBAAgB,EAAEA,gBAJsB;AAKxCqC,qBAAiB,EAAEA,iBALqB;AAMxC6C,aAAS,EAAEA,SAN6B;AAOxCqC,mBAAe,EAAEA;AAPuB,GAAd1lF,CAA1B;AAUA,QAAMgmF,aAAa,GAAG,CACpB/7B,WADoB,EAEpBxmC,QAFoB,EAGpBoB,OAHoB,EAIpBG,MAJoB,CAAtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjgVA,MAAItf,GAAG,GAAG1F,MAAM,CAACC,SAAPD,CAAiBwD,cAA3B;;AAEA,WAASyiF,IAAT,CAAcC,IAAd,EAAoBC,GAApB,EAAyBtjF,GAAzB,EAA8B;AAC7B,SAAKA,GAAL,IAAYqjF,IAAI,CAACvkF,IAALukF,EAAZ,EAAyB;AACxB,UAAIE,MAAM,CAACvjF,GAAD,EAAMsjF,GAAN,CAAV,EAAsB,OAAOtjF,GAAP;AACtB;AACD;;AAEM,WAASujF,MAAT,CAAgBC,GAAhB,EAAqBlf,GAArB,EAA0B;AAChC,QAAImf,IAAJ,EAAU5kF,GAAV,EAAekD,GAAf;AACA,QAAIyhF,GAAG,KAAKlf,GAAZ,EAAiB,OAAO,IAAP;;AAEjB,QAAIkf,GAAG,IAAIlf,GAAPkf,IAAc,CAACC,IAAI,GAACD,GAAG,CAACnlE,WAAV,MAA2BimD,GAAG,CAACjmD,WAAjD,EAA8D;AAC7D,UAAIolE,IAAI,KAAK3mD,IAAb,EAAmB,OAAO0mD,GAAG,CAACE,OAAJF,OAAkBlf,GAAG,CAACof,OAAJpf,EAAzB;AACnB,UAAImf,IAAI,KAAK35D,MAAb,EAAqB,OAAO05D,GAAG,CAACnmF,QAAJmmF,OAAmBlf,GAAG,CAACjnE,QAAJinE,EAA1B;;AAErB,UAAImf,IAAI,KAAKxmF,KAAb,EAAoB;AACnB,YAAI,CAAC4B,GAAG,GAAC2kF,GAAG,CAACzkF,MAAT,MAAqBulE,GAAG,CAACvlE,MAA7B,EAAqC;AACpC,iBAAOF,GAAG,MAAM0kF,MAAM,CAACC,GAAG,CAAC3kF,GAAD,CAAJ,EAAWylE,GAAG,CAACzlE,GAAD,CAAd,CAAtB,CAA2C;AAC3C;;AACD,eAAOA,GAAG,KAAK,CAAC,CAAhB;AACA;;AAED,UAAI4kF,IAAI,KAAKp6E,GAAb,EAAkB;AACjB,YAAIm6E,GAAG,CAAC7gF,IAAJ6gF,KAAalf,GAAG,CAAC3hE,IAArB,EAA2B;AAC1B,iBAAO,KAAP;AACA;;AACD,aAAK9D,GAAL,IAAY2kF,GAAZ,EAAiB;AAChBzhF,aAAG,GAAGlD,GAANkD;;AACA,cAAIA,GAAG,IAAI,OAAOA,GAAP,KAAe,QAA1B,EAAoC;AACnCA,eAAG,GAAGqhF,IAAI,CAAC9e,GAAD,EAAMviE,GAAN,CAAVA;AACA,gBAAI,CAACA,GAAL,EAAU,OAAO,KAAP;AACV;;AACD,cAAI,CAACuiE,GAAG,CAACzhE,GAAJyhE,CAAQviE,GAARuiE,CAAL,EAAmB,OAAO,KAAP;AACnB;;AACD,eAAO,IAAP;AACA;;AAED,UAAImf,IAAI,KAAKvsD,GAAb,EAAkB;AACjB,YAAIssD,GAAG,CAAC7gF,IAAJ6gF,KAAalf,GAAG,CAAC3hE,IAArB,EAA2B;AAC1B,iBAAO,KAAP;AACA;;AACD,aAAK9D,GAAL,IAAY2kF,GAAZ,EAAiB;AAChBzhF,aAAG,GAAGlD,GAAG,CAAC,CAAD,CAATkD;;AACA,cAAIA,GAAG,IAAI,OAAOA,GAAP,KAAe,QAA1B,EAAoC;AACnCA,eAAG,GAAGqhF,IAAI,CAAC9e,GAAD,EAAMviE,GAAN,CAAVA;AACA,gBAAI,CAACA,GAAL,EAAU,OAAO,KAAP;AACV;;AACD,cAAI,CAACwhF,MAAM,CAAC1kF,GAAG,CAAC,CAAD,CAAJ,EAASylE,GAAG,CAAC/hD,GAAJ+hD,CAAQviE,GAARuiE,CAAT,CAAX,EAAmC;AAClC,mBAAO,KAAP;AACA;AACD;;AACD,eAAO,IAAP;AACA;;AAED,UAAImf,IAAI,KAAKE,WAAb,EAA0B;AACzBH,WAAG,GAAG,IAAII,UAAJ,CAAeJ,GAAf,CAANA;AACAlf,WAAG,GAAG,IAAIsf,UAAJ,CAAetf,GAAf,CAANA;AAFD,aAGO,IAAImf,IAAI,KAAKI,QAAb,EAAuB;AAC7B,YAAI,CAAChlF,GAAG,GAAC2kF,GAAG,CAACM,UAAT,MAAyBxf,GAAG,CAACwf,UAAjC,EAA6C;AAC5C,iBAAOjlF,GAAG,MAAM2kF,GAAG,CAACO,OAAJP,CAAY3kF,GAAZ2kF,MAAqBlf,GAAG,CAACyf,OAAJzf,CAAYzlE,GAAZylE,CAArC,CAAsD;AACtD;;AACD,eAAOzlE,GAAG,KAAK,CAAC,CAAhB;AACA;;AAED,UAAI8kF,WAAW,CAACK,MAAZL,CAAmBH,GAAnBG,CAAJ,EAA6B;AAC5B,YAAI,CAAC9kF,GAAG,GAAC2kF,GAAG,CAACM,UAAT,MAAyBxf,GAAG,CAACwf,UAAjC,EAA6C;AAC5C,iBAAOjlF,GAAG,MAAM2kF,GAAG,CAAC3kF,GAAD,CAAH2kF,KAAalf,GAAG,CAACzlE,GAAD,CAAhC,CAAsC;AACtC;;AACD,eAAOA,GAAG,KAAK,CAAC,CAAhB;AACA;;AAED,UAAI,CAAC4kF,IAAD,IAAS,OAAOD,GAAP,KAAe,QAA5B,EAAsC;AACrC3kF,WAAG,GAAG,CAANA;;AACA,aAAK4kF,IAAL,IAAaD,GAAb,EAAkB;AACjB,cAAI3gF,GAAG,CAACvF,IAAJuF,CAAS2gF,GAAT3gF,EAAc4gF,IAAd5gF,KAAuB,EAAEhE,GAAzBgE,IAAgC,CAACA,GAAG,CAACvF,IAAJuF,CAASyhE,GAATzhE,EAAc4gF,IAAd5gF,CAArC,EAA0D,OAAO,KAAP;AAC1D,cAAI,EAAE4gF,IAAI,IAAInf,GAAV,KAAkB,CAACif,MAAM,CAACC,GAAG,CAACC,IAAD,CAAJ,EAAYnf,GAAG,CAACmf,IAAD,CAAf,CAA7B,EAAqD,OAAO,KAAP;AACrD;;AACD,eAAOtmF,MAAM,CAAC2B,IAAP3B,CAAYmnE,GAAZnnE,EAAiB4B,MAAjB5B,KAA4B0B,GAAnC;AACA;AACD;;AAED,WAAO2kF,GAAG,KAAKA,GAARA,IAAelf,GAAG,KAAKA,GAA9B;AACA","file":"/packages/modules.js","sourcesContent":["/*!\r\n * Chart.js v3.9.1\r\n * https://www.chartjs.org\r\n * (c) 2022 Chart.js Contributors\r\n * Released under the MIT License\r\n */\r\nfunction noop() {}\r\nconst uid = (function() {\r\n  let id = 0;\r\n  return function() {\r\n    return id++;\r\n  };\r\n}());\r\nfunction isNullOrUndef(value) {\r\n  return value === null || typeof value === 'undefined';\r\n}\r\nfunction isArray(value) {\r\n  if (Array.isArray && Array.isArray(value)) {\r\n    return true;\r\n  }\r\n  const type = Object.prototype.toString.call(value);\r\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\nfunction isObject(value) {\r\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\r\n}\r\nconst isNumberFinite = (value) => (typeof value === 'number' || value instanceof Number) && isFinite(+value);\r\nfunction finiteOrDefault(value, defaultValue) {\r\n  return isNumberFinite(value) ? value : defaultValue;\r\n}\r\nfunction valueOrDefault(value, defaultValue) {\r\n  return typeof value === 'undefined' ? defaultValue : value;\r\n}\r\nconst toPercentage = (value, dimension) =>\r\n  typeof value === 'string' && value.endsWith('%') ?\r\n    parseFloat(value) / 100\r\n    : value / dimension;\r\nconst toDimension = (value, dimension) =>\r\n  typeof value === 'string' && value.endsWith('%') ?\r\n    parseFloat(value) / 100 * dimension\r\n    : +value;\r\nfunction callback(fn, args, thisArg) {\r\n  if (fn && typeof fn.call === 'function') {\r\n    return fn.apply(thisArg, args);\r\n  }\r\n}\r\nfunction each(loopable, fn, thisArg, reverse) {\r\n  let i, len, keys;\r\n  if (isArray(loopable)) {\r\n    len = loopable.length;\r\n    if (reverse) {\r\n      for (i = len - 1; i >= 0; i--) {\r\n        fn.call(thisArg, loopable[i], i);\r\n      }\r\n    } else {\r\n      for (i = 0; i < len; i++) {\r\n        fn.call(thisArg, loopable[i], i);\r\n      }\r\n    }\r\n  } else if (isObject(loopable)) {\r\n    keys = Object.keys(loopable);\r\n    len = keys.length;\r\n    for (i = 0; i < len; i++) {\r\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\r\n    }\r\n  }\r\n}\r\nfunction _elementsEqual(a0, a1) {\r\n  let i, ilen, v0, v1;\r\n  if (!a0 || !a1 || a0.length !== a1.length) {\r\n    return false;\r\n  }\r\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\r\n    v0 = a0[i];\r\n    v1 = a1[i];\r\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\nfunction clone$1(source) {\r\n  if (isArray(source)) {\r\n    return source.map(clone$1);\r\n  }\r\n  if (isObject(source)) {\r\n    const target = Object.create(null);\r\n    const keys = Object.keys(source);\r\n    const klen = keys.length;\r\n    let k = 0;\r\n    for (; k < klen; ++k) {\r\n      target[keys[k]] = clone$1(source[keys[k]]);\r\n    }\r\n    return target;\r\n  }\r\n  return source;\r\n}\r\nfunction isValidKey(key) {\r\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\r\n}\r\nfunction _merger(key, target, source, options) {\r\n  if (!isValidKey(key)) {\r\n    return;\r\n  }\r\n  const tval = target[key];\r\n  const sval = source[key];\r\n  if (isObject(tval) && isObject(sval)) {\r\n    merge(tval, sval, options);\r\n  } else {\r\n    target[key] = clone$1(sval);\r\n  }\r\n}\r\nfunction merge(target, source, options) {\r\n  const sources = isArray(source) ? source : [source];\r\n  const ilen = sources.length;\r\n  if (!isObject(target)) {\r\n    return target;\r\n  }\r\n  options = options || {};\r\n  const merger = options.merger || _merger;\r\n  for (let i = 0; i < ilen; ++i) {\r\n    source = sources[i];\r\n    if (!isObject(source)) {\r\n      continue;\r\n    }\r\n    const keys = Object.keys(source);\r\n    for (let k = 0, klen = keys.length; k < klen; ++k) {\r\n      merger(keys[k], target, source, options);\r\n    }\r\n  }\r\n  return target;\r\n}\r\nfunction mergeIf(target, source) {\r\n  return merge(target, source, {merger: _mergerIf});\r\n}\r\nfunction _mergerIf(key, target, source) {\r\n  if (!isValidKey(key)) {\r\n    return;\r\n  }\r\n  const tval = target[key];\r\n  const sval = source[key];\r\n  if (isObject(tval) && isObject(sval)) {\r\n    mergeIf(tval, sval);\r\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\r\n    target[key] = clone$1(sval);\r\n  }\r\n}\r\nfunction _deprecated(scope, value, previous, current) {\r\n  if (value !== undefined) {\r\n    console.warn(scope + ': \"' + previous +\r\n\t\t\t'\" is deprecated. Please use \"' + current + '\" instead');\r\n  }\r\n}\r\nconst keyResolvers = {\r\n  '': v => v,\r\n  x: o => o.x,\r\n  y: o => o.y\r\n};\r\nfunction resolveObjectKey(obj, key) {\r\n  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\r\n  return resolver(obj);\r\n}\r\nfunction _getKeyResolver(key) {\r\n  const keys = _splitKey(key);\r\n  return obj => {\r\n    for (const k of keys) {\r\n      if (k === '') {\r\n        break;\r\n      }\r\n      obj = obj && obj[k];\r\n    }\r\n    return obj;\r\n  };\r\n}\r\nfunction _splitKey(key) {\r\n  const parts = key.split('.');\r\n  const keys = [];\r\n  let tmp = '';\r\n  for (const part of parts) {\r\n    tmp += part;\r\n    if (tmp.endsWith('\\\\')) {\r\n      tmp = tmp.slice(0, -1) + '.';\r\n    } else {\r\n      keys.push(tmp);\r\n      tmp = '';\r\n    }\r\n  }\r\n  return keys;\r\n}\r\nfunction _capitalize(str) {\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\nconst defined = (value) => typeof value !== 'undefined';\r\nconst isFunction = (value) => typeof value === 'function';\r\nconst setsEqual = (a, b) => {\r\n  if (a.size !== b.size) {\r\n    return false;\r\n  }\r\n  for (const item of a) {\r\n    if (!b.has(item)) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\nfunction _isClickEvent(e) {\r\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\r\n}\r\n\r\nconst PI = Math.PI;\r\nconst TAU = 2 * PI;\r\nconst PITAU = TAU + PI;\r\nconst INFINITY = Number.POSITIVE_INFINITY;\r\nconst RAD_PER_DEG = PI / 180;\r\nconst HALF_PI = PI / 2;\r\nconst QUARTER_PI = PI / 4;\r\nconst TWO_THIRDS_PI = PI * 2 / 3;\r\nconst log10 = Math.log10;\r\nconst sign = Math.sign;\r\nfunction niceNum(range) {\r\n  const roundedRange = Math.round(range);\r\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\r\n  const niceRange = Math.pow(10, Math.floor(log10(range)));\r\n  const fraction = range / niceRange;\r\n  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\r\n  return niceFraction * niceRange;\r\n}\r\nfunction _factorize(value) {\r\n  const result = [];\r\n  const sqrt = Math.sqrt(value);\r\n  let i;\r\n  for (i = 1; i < sqrt; i++) {\r\n    if (value % i === 0) {\r\n      result.push(i);\r\n      result.push(value / i);\r\n    }\r\n  }\r\n  if (sqrt === (sqrt | 0)) {\r\n    result.push(sqrt);\r\n  }\r\n  result.sort((a, b) => a - b).pop();\r\n  return result;\r\n}\r\nfunction isNumber(n) {\r\n  return !isNaN(parseFloat(n)) && isFinite(n);\r\n}\r\nfunction almostEquals(x, y, epsilon) {\r\n  return Math.abs(x - y) < epsilon;\r\n}\r\nfunction almostWhole(x, epsilon) {\r\n  const rounded = Math.round(x);\r\n  return ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\r\n}\r\nfunction _setMinAndMaxByKey(array, target, property) {\r\n  let i, ilen, value;\r\n  for (i = 0, ilen = array.length; i < ilen; i++) {\r\n    value = array[i][property];\r\n    if (!isNaN(value)) {\r\n      target.min = Math.min(target.min, value);\r\n      target.max = Math.max(target.max, value);\r\n    }\r\n  }\r\n}\r\nfunction toRadians(degrees) {\r\n  return degrees * (PI / 180);\r\n}\r\nfunction toDegrees(radians) {\r\n  return radians * (180 / PI);\r\n}\r\nfunction _decimalPlaces(x) {\r\n  if (!isNumberFinite(x)) {\r\n    return;\r\n  }\r\n  let e = 1;\r\n  let p = 0;\r\n  while (Math.round(x * e) / e !== x) {\r\n    e *= 10;\r\n    p++;\r\n  }\r\n  return p;\r\n}\r\nfunction getAngleFromPoint(centrePoint, anglePoint) {\r\n  const distanceFromXCenter = anglePoint.x - centrePoint.x;\r\n  const distanceFromYCenter = anglePoint.y - centrePoint.y;\r\n  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\r\n  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\r\n  if (angle < (-0.5 * PI)) {\r\n    angle += TAU;\r\n  }\r\n  return {\r\n    angle,\r\n    distance: radialDistanceFromCenter\r\n  };\r\n}\r\nfunction distanceBetweenPoints(pt1, pt2) {\r\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\r\n}\r\nfunction _angleDiff(a, b) {\r\n  return (a - b + PITAU) % TAU - PI;\r\n}\r\nfunction _normalizeAngle(a) {\r\n  return (a % TAU + TAU) % TAU;\r\n}\r\nfunction _angleBetween(angle, start, end, sameAngleIsFullCircle) {\r\n  const a = _normalizeAngle(angle);\r\n  const s = _normalizeAngle(start);\r\n  const e = _normalizeAngle(end);\r\n  const angleToStart = _normalizeAngle(s - a);\r\n  const angleToEnd = _normalizeAngle(e - a);\r\n  const startToAngle = _normalizeAngle(a - s);\r\n  const endToAngle = _normalizeAngle(a - e);\r\n  return a === s || a === e || (sameAngleIsFullCircle && s === e)\r\n    || (angleToStart > angleToEnd && startToAngle < endToAngle);\r\n}\r\nfunction _limitValue(value, min, max) {\r\n  return Math.max(min, Math.min(max, value));\r\n}\r\nfunction _int16Range(value) {\r\n  return _limitValue(value, -32768, 32767);\r\n}\r\nfunction _isBetween(value, start, end, epsilon = 1e-6) {\r\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\r\n}\r\n\r\nfunction _lookup(table, value, cmp) {\r\n  cmp = cmp || ((index) => table[index] < value);\r\n  let hi = table.length - 1;\r\n  let lo = 0;\r\n  let mid;\r\n  while (hi - lo > 1) {\r\n    mid = (lo + hi) >> 1;\r\n    if (cmp(mid)) {\r\n      lo = mid;\r\n    } else {\r\n      hi = mid;\r\n    }\r\n  }\r\n  return {lo, hi};\r\n}\r\nconst _lookupByKey = (table, key, value, last) =>\r\n  _lookup(table, value, last\r\n    ? index => table[index][key] <= value\r\n    : index => table[index][key] < value);\r\nconst _rlookupByKey = (table, key, value) =>\r\n  _lookup(table, value, index => table[index][key] >= value);\r\nfunction _filterBetween(values, min, max) {\r\n  let start = 0;\r\n  let end = values.length;\r\n  while (start < end && values[start] < min) {\r\n    start++;\r\n  }\r\n  while (end > start && values[end - 1] > max) {\r\n    end--;\r\n  }\r\n  return start > 0 || end < values.length\r\n    ? values.slice(start, end)\r\n    : values;\r\n}\r\nconst arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'];\r\nfunction listenArrayEvents(array, listener) {\r\n  if (array._chartjs) {\r\n    array._chartjs.listeners.push(listener);\r\n    return;\r\n  }\r\n  Object.defineProperty(array, '_chartjs', {\r\n    configurable: true,\r\n    enumerable: false,\r\n    value: {\r\n      listeners: [listener]\r\n    }\r\n  });\r\n  arrayEvents.forEach((key) => {\r\n    const method = '_onData' + _capitalize(key);\r\n    const base = array[key];\r\n    Object.defineProperty(array, key, {\r\n      configurable: true,\r\n      enumerable: false,\r\n      value(...args) {\r\n        const res = base.apply(this, args);\r\n        array._chartjs.listeners.forEach((object) => {\r\n          if (typeof object[method] === 'function') {\r\n            object[method](...args);\r\n          }\r\n        });\r\n        return res;\r\n      }\r\n    });\r\n  });\r\n}\r\nfunction unlistenArrayEvents(array, listener) {\r\n  const stub = array._chartjs;\r\n  if (!stub) {\r\n    return;\r\n  }\r\n  const listeners = stub.listeners;\r\n  const index = listeners.indexOf(listener);\r\n  if (index !== -1) {\r\n    listeners.splice(index, 1);\r\n  }\r\n  if (listeners.length > 0) {\r\n    return;\r\n  }\r\n  arrayEvents.forEach((key) => {\r\n    delete array[key];\r\n  });\r\n  delete array._chartjs;\r\n}\r\nfunction _arrayUnique(items) {\r\n  const set = new Set();\r\n  let i, ilen;\r\n  for (i = 0, ilen = items.length; i < ilen; ++i) {\r\n    set.add(items[i]);\r\n  }\r\n  if (set.size === ilen) {\r\n    return items;\r\n  }\r\n  return Array.from(set);\r\n}\r\n\r\nfunction fontString(pixelSize, fontStyle, fontFamily) {\r\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\r\n}\r\nconst requestAnimFrame = (function() {\r\n  if (typeof window === 'undefined') {\r\n    return function(callback) {\r\n      return callback();\r\n    };\r\n  }\r\n  return window.requestAnimationFrame;\r\n}());\r\nfunction throttled(fn, thisArg, updateFn) {\r\n  const updateArgs = updateFn || ((args) => Array.prototype.slice.call(args));\r\n  let ticking = false;\r\n  let args = [];\r\n  return function(...rest) {\r\n    args = updateArgs(rest);\r\n    if (!ticking) {\r\n      ticking = true;\r\n      requestAnimFrame.call(window, () => {\r\n        ticking = false;\r\n        fn.apply(thisArg, args);\r\n      });\r\n    }\r\n  };\r\n}\r\nfunction debounce(fn, delay) {\r\n  let timeout;\r\n  return function(...args) {\r\n    if (delay) {\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(fn, delay, args);\r\n    } else {\r\n      fn.apply(this, args);\r\n    }\r\n    return delay;\r\n  };\r\n}\r\nconst _toLeftRightCenter = (align) => align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\r\nconst _alignStartEnd = (align, start, end) => align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\r\nconst _textX = (align, left, right, rtl) => {\r\n  const check = rtl ? 'left' : 'right';\r\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\r\n};\r\nfunction _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled) {\r\n  const pointCount = points.length;\r\n  let start = 0;\r\n  let count = pointCount;\r\n  if (meta._sorted) {\r\n    const {iScale, _parsed} = meta;\r\n    const axis = iScale.axis;\r\n    const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\r\n    if (minDefined) {\r\n      start = _limitValue(Math.min(\r\n        _lookupByKey(_parsed, iScale.axis, min).lo,\r\n        animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo),\r\n      0, pointCount - 1);\r\n    }\r\n    if (maxDefined) {\r\n      count = _limitValue(Math.max(\r\n        _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,\r\n        animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1),\r\n      start, pointCount) - start;\r\n    } else {\r\n      count = pointCount - start;\r\n    }\r\n  }\r\n  return {start, count};\r\n}\r\nfunction _scaleRangesChanged(meta) {\r\n  const {xScale, yScale, _scaleRanges} = meta;\r\n  const newRanges = {\r\n    xmin: xScale.min,\r\n    xmax: xScale.max,\r\n    ymin: yScale.min,\r\n    ymax: yScale.max\r\n  };\r\n  if (!_scaleRanges) {\r\n    meta._scaleRanges = newRanges;\r\n    return true;\r\n  }\r\n  const changed = _scaleRanges.xmin !== xScale.min\r\n\t\t|| _scaleRanges.xmax !== xScale.max\r\n\t\t|| _scaleRanges.ymin !== yScale.min\r\n\t\t|| _scaleRanges.ymax !== yScale.max;\r\n  Object.assign(_scaleRanges, newRanges);\r\n  return changed;\r\n}\r\n\r\nconst atEdge = (t) => t === 0 || t === 1;\r\nconst elasticIn = (t, s, p) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\r\nconst elasticOut = (t, s, p) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\r\nconst effects = {\r\n  linear: t => t,\r\n  easeInQuad: t => t * t,\r\n  easeOutQuad: t => -t * (t - 2),\r\n  easeInOutQuad: t => ((t /= 0.5) < 1)\r\n    ? 0.5 * t * t\r\n    : -0.5 * ((--t) * (t - 2) - 1),\r\n  easeInCubic: t => t * t * t,\r\n  easeOutCubic: t => (t -= 1) * t * t + 1,\r\n  easeInOutCubic: t => ((t /= 0.5) < 1)\r\n    ? 0.5 * t * t * t\r\n    : 0.5 * ((t -= 2) * t * t + 2),\r\n  easeInQuart: t => t * t * t * t,\r\n  easeOutQuart: t => -((t -= 1) * t * t * t - 1),\r\n  easeInOutQuart: t => ((t /= 0.5) < 1)\r\n    ? 0.5 * t * t * t * t\r\n    : -0.5 * ((t -= 2) * t * t * t - 2),\r\n  easeInQuint: t => t * t * t * t * t,\r\n  easeOutQuint: t => (t -= 1) * t * t * t * t + 1,\r\n  easeInOutQuint: t => ((t /= 0.5) < 1)\r\n    ? 0.5 * t * t * t * t * t\r\n    : 0.5 * ((t -= 2) * t * t * t * t + 2),\r\n  easeInSine: t => -Math.cos(t * HALF_PI) + 1,\r\n  easeOutSine: t => Math.sin(t * HALF_PI),\r\n  easeInOutSine: t => -0.5 * (Math.cos(PI * t) - 1),\r\n  easeInExpo: t => (t === 0) ? 0 : Math.pow(2, 10 * (t - 1)),\r\n  easeOutExpo: t => (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1,\r\n  easeInOutExpo: t => atEdge(t) ? t : t < 0.5\r\n    ? 0.5 * Math.pow(2, 10 * (t * 2 - 1))\r\n    : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\r\n  easeInCirc: t => (t >= 1) ? t : -(Math.sqrt(1 - t * t) - 1),\r\n  easeOutCirc: t => Math.sqrt(1 - (t -= 1) * t),\r\n  easeInOutCirc: t => ((t /= 0.5) < 1)\r\n    ? -0.5 * (Math.sqrt(1 - t * t) - 1)\r\n    : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\r\n  easeInElastic: t => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\r\n  easeOutElastic: t => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\r\n  easeInOutElastic(t) {\r\n    const s = 0.1125;\r\n    const p = 0.45;\r\n    return atEdge(t) ? t :\r\n      t < 0.5\r\n        ? 0.5 * elasticIn(t * 2, s, p)\r\n        : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\r\n  },\r\n  easeInBack(t) {\r\n    const s = 1.70158;\r\n    return t * t * ((s + 1) * t - s);\r\n  },\r\n  easeOutBack(t) {\r\n    const s = 1.70158;\r\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\r\n  },\r\n  easeInOutBack(t) {\r\n    let s = 1.70158;\r\n    if ((t /= 0.5) < 1) {\r\n      return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\r\n    }\r\n    return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\r\n  },\r\n  easeInBounce: t => 1 - effects.easeOutBounce(1 - t),\r\n  easeOutBounce(t) {\r\n    const m = 7.5625;\r\n    const d = 2.75;\r\n    if (t < (1 / d)) {\r\n      return m * t * t;\r\n    }\r\n    if (t < (2 / d)) {\r\n      return m * (t -= (1.5 / d)) * t + 0.75;\r\n    }\r\n    if (t < (2.5 / d)) {\r\n      return m * (t -= (2.25 / d)) * t + 0.9375;\r\n    }\r\n    return m * (t -= (2.625 / d)) * t + 0.984375;\r\n  },\r\n  easeInOutBounce: t => (t < 0.5)\r\n    ? effects.easeInBounce(t * 2) * 0.5\r\n    : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5,\r\n};\r\n\r\n/*!\r\n * @kurkle/color v0.2.1\r\n * https://github.com/kurkle/color#readme\r\n * (c) 2022 Jukka Kurkela\r\n * Released under the MIT License\r\n */\r\nfunction round(v) {\r\n  return v + 0.5 | 0;\r\n}\r\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\r\nfunction p2b(v) {\r\n  return lim(round(v * 2.55), 0, 255);\r\n}\r\nfunction n2b(v) {\r\n  return lim(round(v * 255), 0, 255);\r\n}\r\nfunction b2n(v) {\r\n  return lim(round(v / 2.55) / 100, 0, 1);\r\n}\r\nfunction n2p(v) {\r\n  return lim(round(v * 100), 0, 100);\r\n}\r\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\r\nconst hex = [...'0123456789ABCDEF'];\r\nconst h1 = b => hex[b & 0xF];\r\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\r\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\r\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\r\nfunction hexParse(str) {\r\n  var len = str.length;\r\n  var ret;\r\n  if (str[0] === '#') {\r\n    if (len === 4 || len === 5) {\r\n      ret = {\r\n        r: 255 & map$1[str[1]] * 17,\r\n        g: 255 & map$1[str[2]] * 17,\r\n        b: 255 & map$1[str[3]] * 17,\r\n        a: len === 5 ? map$1[str[4]] * 17 : 255\r\n      };\r\n    } else if (len === 7 || len === 9) {\r\n      ret = {\r\n        r: map$1[str[1]] << 4 | map$1[str[2]],\r\n        g: map$1[str[3]] << 4 | map$1[str[4]],\r\n        b: map$1[str[5]] << 4 | map$1[str[6]],\r\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\r\n      };\r\n    }\r\n  }\r\n  return ret;\r\n}\r\nconst alpha = (a, f) => a < 255 ? f(a) : '';\r\nfunction hexString(v) {\r\n  var f = isShort(v) ? h1 : h2;\r\n  return v\r\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\r\n    : undefined;\r\n}\r\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\r\nfunction hsl2rgbn(h, s, l) {\r\n  const a = s * Math.min(l, 1 - l);\r\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\r\n  return [f(0), f(8), f(4)];\r\n}\r\nfunction hsv2rgbn(h, s, v) {\r\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\r\n  return [f(5), f(3), f(1)];\r\n}\r\nfunction hwb2rgbn(h, w, b) {\r\n  const rgb = hsl2rgbn(h, 1, 0.5);\r\n  let i;\r\n  if (w + b > 1) {\r\n    i = 1 / (w + b);\r\n    w *= i;\r\n    b *= i;\r\n  }\r\n  for (i = 0; i < 3; i++) {\r\n    rgb[i] *= 1 - w - b;\r\n    rgb[i] += w;\r\n  }\r\n  return rgb;\r\n}\r\nfunction hueValue(r, g, b, d, max) {\r\n  if (r === max) {\r\n    return ((g - b) / d) + (g < b ? 6 : 0);\r\n  }\r\n  if (g === max) {\r\n    return (b - r) / d + 2;\r\n  }\r\n  return (r - g) / d + 4;\r\n}\r\nfunction rgb2hsl(v) {\r\n  const range = 255;\r\n  const r = v.r / range;\r\n  const g = v.g / range;\r\n  const b = v.b / range;\r\n  const max = Math.max(r, g, b);\r\n  const min = Math.min(r, g, b);\r\n  const l = (max + min) / 2;\r\n  let h, s, d;\r\n  if (max !== min) {\r\n    d = max - min;\r\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n    h = hueValue(r, g, b, d, max);\r\n    h = h * 60 + 0.5;\r\n  }\r\n  return [h | 0, s || 0, l];\r\n}\r\nfunction calln(f, a, b, c) {\r\n  return (\r\n    Array.isArray(a)\r\n      ? f(a[0], a[1], a[2])\r\n      : f(a, b, c)\r\n  ).map(n2b);\r\n}\r\nfunction hsl2rgb(h, s, l) {\r\n  return calln(hsl2rgbn, h, s, l);\r\n}\r\nfunction hwb2rgb(h, w, b) {\r\n  return calln(hwb2rgbn, h, w, b);\r\n}\r\nfunction hsv2rgb(h, s, v) {\r\n  return calln(hsv2rgbn, h, s, v);\r\n}\r\nfunction hue(h) {\r\n  return (h % 360 + 360) % 360;\r\n}\r\nfunction hueParse(str) {\r\n  const m = HUE_RE.exec(str);\r\n  let a = 255;\r\n  let v;\r\n  if (!m) {\r\n    return;\r\n  }\r\n  if (m[5] !== v) {\r\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\r\n  }\r\n  const h = hue(+m[2]);\r\n  const p1 = +m[3] / 100;\r\n  const p2 = +m[4] / 100;\r\n  if (m[1] === 'hwb') {\r\n    v = hwb2rgb(h, p1, p2);\r\n  } else if (m[1] === 'hsv') {\r\n    v = hsv2rgb(h, p1, p2);\r\n  } else {\r\n    v = hsl2rgb(h, p1, p2);\r\n  }\r\n  return {\r\n    r: v[0],\r\n    g: v[1],\r\n    b: v[2],\r\n    a: a\r\n  };\r\n}\r\nfunction rotate(v, deg) {\r\n  var h = rgb2hsl(v);\r\n  h[0] = hue(h[0] + deg);\r\n  h = hsl2rgb(h);\r\n  v.r = h[0];\r\n  v.g = h[1];\r\n  v.b = h[2];\r\n}\r\nfunction hslString(v) {\r\n  if (!v) {\r\n    return;\r\n  }\r\n  const a = rgb2hsl(v);\r\n  const h = a[0];\r\n  const s = n2p(a[1]);\r\n  const l = n2p(a[2]);\r\n  return v.a < 255\r\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\r\n    : `hsl(${h}, ${s}%, ${l}%)`;\r\n}\r\nconst map = {\r\n  x: 'dark',\r\n  Z: 'light',\r\n  Y: 're',\r\n  X: 'blu',\r\n  W: 'gr',\r\n  V: 'medium',\r\n  U: 'slate',\r\n  A: 'ee',\r\n  T: 'ol',\r\n  S: 'or',\r\n  B: 'ra',\r\n  C: 'lateg',\r\n  D: 'ights',\r\n  R: 'in',\r\n  Q: 'turquois',\r\n  E: 'hi',\r\n  P: 'ro',\r\n  O: 'al',\r\n  N: 'le',\r\n  M: 'de',\r\n  L: 'yello',\r\n  F: 'en',\r\n  K: 'ch',\r\n  G: 'arks',\r\n  H: 'ea',\r\n  I: 'ightg',\r\n  J: 'wh'\r\n};\r\nconst names$1 = {\r\n  OiceXe: 'f0f8ff',\r\n  antiquewEte: 'faebd7',\r\n  aqua: 'ffff',\r\n  aquamarRe: '7fffd4',\r\n  azuY: 'f0ffff',\r\n  beige: 'f5f5dc',\r\n  bisque: 'ffe4c4',\r\n  black: '0',\r\n  blanKedOmond: 'ffebcd',\r\n  Xe: 'ff',\r\n  XeviTet: '8a2be2',\r\n  bPwn: 'a52a2a',\r\n  burlywood: 'deb887',\r\n  caMtXe: '5f9ea0',\r\n  KartYuse: '7fff00',\r\n  KocTate: 'd2691e',\r\n  cSO: 'ff7f50',\r\n  cSnflowerXe: '6495ed',\r\n  cSnsilk: 'fff8dc',\r\n  crimson: 'dc143c',\r\n  cyan: 'ffff',\r\n  xXe: '8b',\r\n  xcyan: '8b8b',\r\n  xgTMnPd: 'b8860b',\r\n  xWay: 'a9a9a9',\r\n  xgYF: '6400',\r\n  xgYy: 'a9a9a9',\r\n  xkhaki: 'bdb76b',\r\n  xmagFta: '8b008b',\r\n  xTivegYF: '556b2f',\r\n  xSange: 'ff8c00',\r\n  xScEd: '9932cc',\r\n  xYd: '8b0000',\r\n  xsOmon: 'e9967a',\r\n  xsHgYF: '8fbc8f',\r\n  xUXe: '483d8b',\r\n  xUWay: '2f4f4f',\r\n  xUgYy: '2f4f4f',\r\n  xQe: 'ced1',\r\n  xviTet: '9400d3',\r\n  dAppRk: 'ff1493',\r\n  dApskyXe: 'bfff',\r\n  dimWay: '696969',\r\n  dimgYy: '696969',\r\n  dodgerXe: '1e90ff',\r\n  fiYbrick: 'b22222',\r\n  flSOwEte: 'fffaf0',\r\n  foYstWAn: '228b22',\r\n  fuKsia: 'ff00ff',\r\n  gaRsbSo: 'dcdcdc',\r\n  ghostwEte: 'f8f8ff',\r\n  gTd: 'ffd700',\r\n  gTMnPd: 'daa520',\r\n  Way: '808080',\r\n  gYF: '8000',\r\n  gYFLw: 'adff2f',\r\n  gYy: '808080',\r\n  honeyMw: 'f0fff0',\r\n  hotpRk: 'ff69b4',\r\n  RdianYd: 'cd5c5c',\r\n  Rdigo: '4b0082',\r\n  ivSy: 'fffff0',\r\n  khaki: 'f0e68c',\r\n  lavFMr: 'e6e6fa',\r\n  lavFMrXsh: 'fff0f5',\r\n  lawngYF: '7cfc00',\r\n  NmoncEffon: 'fffacd',\r\n  ZXe: 'add8e6',\r\n  ZcSO: 'f08080',\r\n  Zcyan: 'e0ffff',\r\n  ZgTMnPdLw: 'fafad2',\r\n  ZWay: 'd3d3d3',\r\n  ZgYF: '90ee90',\r\n  ZgYy: 'd3d3d3',\r\n  ZpRk: 'ffb6c1',\r\n  ZsOmon: 'ffa07a',\r\n  ZsHgYF: '20b2aa',\r\n  ZskyXe: '87cefa',\r\n  ZUWay: '778899',\r\n  ZUgYy: '778899',\r\n  ZstAlXe: 'b0c4de',\r\n  ZLw: 'ffffe0',\r\n  lime: 'ff00',\r\n  limegYF: '32cd32',\r\n  lRF: 'faf0e6',\r\n  magFta: 'ff00ff',\r\n  maPon: '800000',\r\n  VaquamarRe: '66cdaa',\r\n  VXe: 'cd',\r\n  VScEd: 'ba55d3',\r\n  VpurpN: '9370db',\r\n  VsHgYF: '3cb371',\r\n  VUXe: '7b68ee',\r\n  VsprRggYF: 'fa9a',\r\n  VQe: '48d1cc',\r\n  VviTetYd: 'c71585',\r\n  midnightXe: '191970',\r\n  mRtcYam: 'f5fffa',\r\n  mistyPse: 'ffe4e1',\r\n  moccasR: 'ffe4b5',\r\n  navajowEte: 'ffdead',\r\n  navy: '80',\r\n  Tdlace: 'fdf5e6',\r\n  Tive: '808000',\r\n  TivedBb: '6b8e23',\r\n  Sange: 'ffa500',\r\n  SangeYd: 'ff4500',\r\n  ScEd: 'da70d6',\r\n  pOegTMnPd: 'eee8aa',\r\n  pOegYF: '98fb98',\r\n  pOeQe: 'afeeee',\r\n  pOeviTetYd: 'db7093',\r\n  papayawEp: 'ffefd5',\r\n  pHKpuff: 'ffdab9',\r\n  peru: 'cd853f',\r\n  pRk: 'ffc0cb',\r\n  plum: 'dda0dd',\r\n  powMrXe: 'b0e0e6',\r\n  purpN: '800080',\r\n  YbeccapurpN: '663399',\r\n  Yd: 'ff0000',\r\n  Psybrown: 'bc8f8f',\r\n  PyOXe: '4169e1',\r\n  saddNbPwn: '8b4513',\r\n  sOmon: 'fa8072',\r\n  sandybPwn: 'f4a460',\r\n  sHgYF: '2e8b57',\r\n  sHshell: 'fff5ee',\r\n  siFna: 'a0522d',\r\n  silver: 'c0c0c0',\r\n  skyXe: '87ceeb',\r\n  UXe: '6a5acd',\r\n  UWay: '708090',\r\n  UgYy: '708090',\r\n  snow: 'fffafa',\r\n  sprRggYF: 'ff7f',\r\n  stAlXe: '4682b4',\r\n  tan: 'd2b48c',\r\n  teO: '8080',\r\n  tEstN: 'd8bfd8',\r\n  tomato: 'ff6347',\r\n  Qe: '40e0d0',\r\n  viTet: 'ee82ee',\r\n  JHt: 'f5deb3',\r\n  wEte: 'ffffff',\r\n  wEtesmoke: 'f5f5f5',\r\n  Lw: 'ffff00',\r\n  LwgYF: '9acd32'\r\n};\r\nfunction unpack() {\r\n  const unpacked = {};\r\n  const keys = Object.keys(names$1);\r\n  const tkeys = Object.keys(map);\r\n  let i, j, k, ok, nk;\r\n  for (i = 0; i < keys.length; i++) {\r\n    ok = nk = keys[i];\r\n    for (j = 0; j < tkeys.length; j++) {\r\n      k = tkeys[j];\r\n      nk = nk.replace(k, map[k]);\r\n    }\r\n    k = parseInt(names$1[ok], 16);\r\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\r\n  }\r\n  return unpacked;\r\n}\r\nlet names;\r\nfunction nameParse(str) {\r\n  if (!names) {\r\n    names = unpack();\r\n    names.transparent = [0, 0, 0, 0];\r\n  }\r\n  const a = names[str.toLowerCase()];\r\n  return a && {\r\n    r: a[0],\r\n    g: a[1],\r\n    b: a[2],\r\n    a: a.length === 4 ? a[3] : 255\r\n  };\r\n}\r\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\r\nfunction rgbParse(str) {\r\n  const m = RGB_RE.exec(str);\r\n  let a = 255;\r\n  let r, g, b;\r\n  if (!m) {\r\n    return;\r\n  }\r\n  if (m[7] !== r) {\r\n    const v = +m[7];\r\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\r\n  }\r\n  r = +m[1];\r\n  g = +m[3];\r\n  b = +m[5];\r\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\r\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\r\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\r\n  return {\r\n    r: r,\r\n    g: g,\r\n    b: b,\r\n    a: a\r\n  };\r\n}\r\nfunction rgbString(v) {\r\n  return v && (\r\n    v.a < 255\r\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\r\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\r\n  );\r\n}\r\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\r\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\r\nfunction interpolate(rgb1, rgb2, t) {\r\n  const r = from(b2n(rgb1.r));\r\n  const g = from(b2n(rgb1.g));\r\n  const b = from(b2n(rgb1.b));\r\n  return {\r\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\r\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\r\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\r\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\r\n  };\r\n}\r\nfunction modHSL(v, i, ratio) {\r\n  if (v) {\r\n    let tmp = rgb2hsl(v);\r\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\r\n    tmp = hsl2rgb(tmp);\r\n    v.r = tmp[0];\r\n    v.g = tmp[1];\r\n    v.b = tmp[2];\r\n  }\r\n}\r\nfunction clone(v, proto) {\r\n  return v ? Object.assign(proto || {}, v) : v;\r\n}\r\nfunction fromObject(input) {\r\n  var v = {r: 0, g: 0, b: 0, a: 255};\r\n  if (Array.isArray(input)) {\r\n    if (input.length >= 3) {\r\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\r\n      if (input.length > 3) {\r\n        v.a = n2b(input[3]);\r\n      }\r\n    }\r\n  } else {\r\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\r\n    v.a = n2b(v.a);\r\n  }\r\n  return v;\r\n}\r\nfunction functionParse(str) {\r\n  if (str.charAt(0) === 'r') {\r\n    return rgbParse(str);\r\n  }\r\n  return hueParse(str);\r\n}\r\nclass Color {\r\n  constructor(input) {\r\n    if (input instanceof Color) {\r\n      return input;\r\n    }\r\n    const type = typeof input;\r\n    let v;\r\n    if (type === 'object') {\r\n      v = fromObject(input);\r\n    } else if (type === 'string') {\r\n      v = hexParse(input) || nameParse(input) || functionParse(input);\r\n    }\r\n    this._rgb = v;\r\n    this._valid = !!v;\r\n  }\r\n  get valid() {\r\n    return this._valid;\r\n  }\r\n  get rgb() {\r\n    var v = clone(this._rgb);\r\n    if (v) {\r\n      v.a = b2n(v.a);\r\n    }\r\n    return v;\r\n  }\r\n  set rgb(obj) {\r\n    this._rgb = fromObject(obj);\r\n  }\r\n  rgbString() {\r\n    return this._valid ? rgbString(this._rgb) : undefined;\r\n  }\r\n  hexString() {\r\n    return this._valid ? hexString(this._rgb) : undefined;\r\n  }\r\n  hslString() {\r\n    return this._valid ? hslString(this._rgb) : undefined;\r\n  }\r\n  mix(color, weight) {\r\n    if (color) {\r\n      const c1 = this.rgb;\r\n      const c2 = color.rgb;\r\n      let w2;\r\n      const p = weight === w2 ? 0.5 : weight;\r\n      const w = 2 * p - 1;\r\n      const a = c1.a - c2.a;\r\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\r\n      w2 = 1 - w1;\r\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\r\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\r\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\r\n      c1.a = p * c1.a + (1 - p) * c2.a;\r\n      this.rgb = c1;\r\n    }\r\n    return this;\r\n  }\r\n  interpolate(color, t) {\r\n    if (color) {\r\n      this._rgb = interpolate(this._rgb, color._rgb, t);\r\n    }\r\n    return this;\r\n  }\r\n  clone() {\r\n    return new Color(this.rgb);\r\n  }\r\n  alpha(a) {\r\n    this._rgb.a = n2b(a);\r\n    return this;\r\n  }\r\n  clearer(ratio) {\r\n    const rgb = this._rgb;\r\n    rgb.a *= 1 - ratio;\r\n    return this;\r\n  }\r\n  greyscale() {\r\n    const rgb = this._rgb;\r\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\r\n    rgb.r = rgb.g = rgb.b = val;\r\n    return this;\r\n  }\r\n  opaquer(ratio) {\r\n    const rgb = this._rgb;\r\n    rgb.a *= 1 + ratio;\r\n    return this;\r\n  }\r\n  negate() {\r\n    const v = this._rgb;\r\n    v.r = 255 - v.r;\r\n    v.g = 255 - v.g;\r\n    v.b = 255 - v.b;\r\n    return this;\r\n  }\r\n  lighten(ratio) {\r\n    modHSL(this._rgb, 2, ratio);\r\n    return this;\r\n  }\r\n  darken(ratio) {\r\n    modHSL(this._rgb, 2, -ratio);\r\n    return this;\r\n  }\r\n  saturate(ratio) {\r\n    modHSL(this._rgb, 1, ratio);\r\n    return this;\r\n  }\r\n  desaturate(ratio) {\r\n    modHSL(this._rgb, 1, -ratio);\r\n    return this;\r\n  }\r\n  rotate(deg) {\r\n    rotate(this._rgb, deg);\r\n    return this;\r\n  }\r\n}\r\nfunction index_esm(input) {\r\n  return new Color(input);\r\n}\r\n\r\nfunction isPatternOrGradient(value) {\r\n  if (value && typeof value === 'object') {\r\n    const type = value.toString();\r\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\r\n  }\r\n  return false;\r\n}\r\nfunction color(value) {\r\n  return isPatternOrGradient(value) ? value : index_esm(value);\r\n}\r\nfunction getHoverColor(value) {\r\n  return isPatternOrGradient(value)\r\n    ? value\r\n    : index_esm(value).saturate(0.5).darken(0.1).hexString();\r\n}\r\n\r\nconst overrides = Object.create(null);\r\nconst descriptors = Object.create(null);\r\nfunction getScope$1(node, key) {\r\n  if (!key) {\r\n    return node;\r\n  }\r\n  const keys = key.split('.');\r\n  for (let i = 0, n = keys.length; i < n; ++i) {\r\n    const k = keys[i];\r\n    node = node[k] || (node[k] = Object.create(null));\r\n  }\r\n  return node;\r\n}\r\nfunction set(root, scope, values) {\r\n  if (typeof scope === 'string') {\r\n    return merge(getScope$1(root, scope), values);\r\n  }\r\n  return merge(getScope$1(root, ''), scope);\r\n}\r\nclass Defaults {\r\n  constructor(_descriptors) {\r\n    this.animation = undefined;\r\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\r\n    this.borderColor = 'rgba(0,0,0,0.1)';\r\n    this.color = '#666';\r\n    this.datasets = {};\r\n    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();\r\n    this.elements = {};\r\n    this.events = [\r\n      'mousemove',\r\n      'mouseout',\r\n      'click',\r\n      'touchstart',\r\n      'touchmove'\r\n    ];\r\n    this.font = {\r\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n      size: 12,\r\n      style: 'normal',\r\n      lineHeight: 1.2,\r\n      weight: null\r\n    };\r\n    this.hover = {};\r\n    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);\r\n    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);\r\n    this.hoverColor = (ctx, options) => getHoverColor(options.color);\r\n    this.indexAxis = 'x';\r\n    this.interaction = {\r\n      mode: 'nearest',\r\n      intersect: true,\r\n      includeInvisible: false\r\n    };\r\n    this.maintainAspectRatio = true;\r\n    this.onHover = null;\r\n    this.onClick = null;\r\n    this.parsing = true;\r\n    this.plugins = {};\r\n    this.responsive = true;\r\n    this.scale = undefined;\r\n    this.scales = {};\r\n    this.showLine = true;\r\n    this.drawActiveElementsOnTop = true;\r\n    this.describe(_descriptors);\r\n  }\r\n  set(scope, values) {\r\n    return set(this, scope, values);\r\n  }\r\n  get(scope) {\r\n    return getScope$1(this, scope);\r\n  }\r\n  describe(scope, values) {\r\n    return set(descriptors, scope, values);\r\n  }\r\n  override(scope, values) {\r\n    return set(overrides, scope, values);\r\n  }\r\n  route(scope, name, targetScope, targetName) {\r\n    const scopeObject = getScope$1(this, scope);\r\n    const targetScopeObject = getScope$1(this, targetScope);\r\n    const privateName = '_' + name;\r\n    Object.defineProperties(scopeObject, {\r\n      [privateName]: {\r\n        value: scopeObject[name],\r\n        writable: true\r\n      },\r\n      [name]: {\r\n        enumerable: true,\r\n        get() {\r\n          const local = this[privateName];\r\n          const target = targetScopeObject[targetName];\r\n          if (isObject(local)) {\r\n            return Object.assign({}, target, local);\r\n          }\r\n          return valueOrDefault(local, target);\r\n        },\r\n        set(value) {\r\n          this[privateName] = value;\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\nvar defaults = new Defaults({\r\n  _scriptable: (name) => !name.startsWith('on'),\r\n  _indexable: (name) => name !== 'events',\r\n  hover: {\r\n    _fallback: 'interaction'\r\n  },\r\n  interaction: {\r\n    _scriptable: false,\r\n    _indexable: false,\r\n  }\r\n});\r\n\r\nfunction toFontString(font) {\r\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\r\n    return null;\r\n  }\r\n  return (font.style ? font.style + ' ' : '')\r\n\t\t+ (font.weight ? font.weight + ' ' : '')\r\n\t\t+ font.size + 'px '\r\n\t\t+ font.family;\r\n}\r\nfunction _measureText(ctx, data, gc, longest, string) {\r\n  let textWidth = data[string];\r\n  if (!textWidth) {\r\n    textWidth = data[string] = ctx.measureText(string).width;\r\n    gc.push(string);\r\n  }\r\n  if (textWidth > longest) {\r\n    longest = textWidth;\r\n  }\r\n  return longest;\r\n}\r\nfunction _longestText(ctx, font, arrayOfThings, cache) {\r\n  cache = cache || {};\r\n  let data = cache.data = cache.data || {};\r\n  let gc = cache.garbageCollect = cache.garbageCollect || [];\r\n  if (cache.font !== font) {\r\n    data = cache.data = {};\r\n    gc = cache.garbageCollect = [];\r\n    cache.font = font;\r\n  }\r\n  ctx.save();\r\n  ctx.font = font;\r\n  let longest = 0;\r\n  const ilen = arrayOfThings.length;\r\n  let i, j, jlen, thing, nestedThing;\r\n  for (i = 0; i < ilen; i++) {\r\n    thing = arrayOfThings[i];\r\n    if (thing !== undefined && thing !== null && isArray(thing) !== true) {\r\n      longest = _measureText(ctx, data, gc, longest, thing);\r\n    } else if (isArray(thing)) {\r\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\r\n        nestedThing = thing[j];\r\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\r\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  ctx.restore();\r\n  const gcLen = gc.length / 2;\r\n  if (gcLen > arrayOfThings.length) {\r\n    for (i = 0; i < gcLen; i++) {\r\n      delete data[gc[i]];\r\n    }\r\n    gc.splice(0, gcLen);\r\n  }\r\n  return longest;\r\n}\r\nfunction _alignPixel(chart, pixel, width) {\r\n  const devicePixelRatio = chart.currentDevicePixelRatio;\r\n  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\r\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\r\n}\r\nfunction clearCanvas(canvas, ctx) {\r\n  ctx = ctx || canvas.getContext('2d');\r\n  ctx.save();\r\n  ctx.resetTransform();\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  ctx.restore();\r\n}\r\nfunction drawPoint(ctx, options, x, y) {\r\n  drawPointLegend(ctx, options, x, y, null);\r\n}\r\nfunction drawPointLegend(ctx, options, x, y, w) {\r\n  let type, xOffset, yOffset, size, cornerRadius, width;\r\n  const style = options.pointStyle;\r\n  const rotation = options.rotation;\r\n  const radius = options.radius;\r\n  let rad = (rotation || 0) * RAD_PER_DEG;\r\n  if (style && typeof style === 'object') {\r\n    type = style.toString();\r\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\r\n      ctx.save();\r\n      ctx.translate(x, y);\r\n      ctx.rotate(rad);\r\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\r\n      ctx.restore();\r\n      return;\r\n    }\r\n  }\r\n  if (isNaN(radius) || radius <= 0) {\r\n    return;\r\n  }\r\n  ctx.beginPath();\r\n  switch (style) {\r\n  default:\r\n    if (w) {\r\n      ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\r\n    } else {\r\n      ctx.arc(x, y, radius, 0, TAU);\r\n    }\r\n    ctx.closePath();\r\n    break;\r\n  case 'triangle':\r\n    ctx.moveTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n    rad += TWO_THIRDS_PI;\r\n    ctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n    rad += TWO_THIRDS_PI;\r\n    ctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n    ctx.closePath();\r\n    break;\r\n  case 'rectRounded':\r\n    cornerRadius = radius * 0.516;\r\n    size = radius - cornerRadius;\r\n    xOffset = Math.cos(rad + QUARTER_PI) * size;\r\n    yOffset = Math.sin(rad + QUARTER_PI) * size;\r\n    ctx.arc(x - xOffset, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\r\n    ctx.arc(x + yOffset, y - xOffset, cornerRadius, rad - HALF_PI, rad);\r\n    ctx.arc(x + xOffset, y + yOffset, cornerRadius, rad, rad + HALF_PI);\r\n    ctx.arc(x - yOffset, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\r\n    ctx.closePath();\r\n    break;\r\n  case 'rect':\r\n    if (!rotation) {\r\n      size = Math.SQRT1_2 * radius;\r\n      width = w ? w / 2 : size;\r\n      ctx.rect(x - width, y - size, 2 * width, 2 * size);\r\n      break;\r\n    }\r\n    rad += QUARTER_PI;\r\n  case 'rectRot':\r\n    xOffset = Math.cos(rad) * radius;\r\n    yOffset = Math.sin(rad) * radius;\r\n    ctx.moveTo(x - xOffset, y - yOffset);\r\n    ctx.lineTo(x + yOffset, y - xOffset);\r\n    ctx.lineTo(x + xOffset, y + yOffset);\r\n    ctx.lineTo(x - yOffset, y + xOffset);\r\n    ctx.closePath();\r\n    break;\r\n  case 'crossRot':\r\n    rad += QUARTER_PI;\r\n  case 'cross':\r\n    xOffset = Math.cos(rad) * radius;\r\n    yOffset = Math.sin(rad) * radius;\r\n    ctx.moveTo(x - xOffset, y - yOffset);\r\n    ctx.lineTo(x + xOffset, y + yOffset);\r\n    ctx.moveTo(x + yOffset, y - xOffset);\r\n    ctx.lineTo(x - yOffset, y + xOffset);\r\n    break;\r\n  case 'star':\r\n    xOffset = Math.cos(rad) * radius;\r\n    yOffset = Math.sin(rad) * radius;\r\n    ctx.moveTo(x - xOffset, y - yOffset);\r\n    ctx.lineTo(x + xOffset, y + yOffset);\r\n    ctx.moveTo(x + yOffset, y - xOffset);\r\n    ctx.lineTo(x - yOffset, y + xOffset);\r\n    rad += QUARTER_PI;\r\n    xOffset = Math.cos(rad) * radius;\r\n    yOffset = Math.sin(rad) * radius;\r\n    ctx.moveTo(x - xOffset, y - yOffset);\r\n    ctx.lineTo(x + xOffset, y + yOffset);\r\n    ctx.moveTo(x + yOffset, y - xOffset);\r\n    ctx.lineTo(x - yOffset, y + xOffset);\r\n    break;\r\n  case 'line':\r\n    xOffset = w ? w / 2 : Math.cos(rad) * radius;\r\n    yOffset = Math.sin(rad) * radius;\r\n    ctx.moveTo(x - xOffset, y - yOffset);\r\n    ctx.lineTo(x + xOffset, y + yOffset);\r\n    break;\r\n  case 'dash':\r\n    ctx.moveTo(x, y);\r\n    ctx.lineTo(x + Math.cos(rad) * radius, y + Math.sin(rad) * radius);\r\n    break;\r\n  }\r\n  ctx.fill();\r\n  if (options.borderWidth > 0) {\r\n    ctx.stroke();\r\n  }\r\n}\r\nfunction _isPointInArea(point, area, margin) {\r\n  margin = margin || 0.5;\r\n  return !area || (point && point.x > area.left - margin && point.x < area.right + margin &&\r\n\t\tpoint.y > area.top - margin && point.y < area.bottom + margin);\r\n}\r\nfunction clipArea(ctx, area) {\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\r\n  ctx.clip();\r\n}\r\nfunction unclipArea(ctx) {\r\n  ctx.restore();\r\n}\r\nfunction _steppedLineTo(ctx, previous, target, flip, mode) {\r\n  if (!previous) {\r\n    return ctx.lineTo(target.x, target.y);\r\n  }\r\n  if (mode === 'middle') {\r\n    const midpoint = (previous.x + target.x) / 2.0;\r\n    ctx.lineTo(midpoint, previous.y);\r\n    ctx.lineTo(midpoint, target.y);\r\n  } else if (mode === 'after' !== !!flip) {\r\n    ctx.lineTo(previous.x, target.y);\r\n  } else {\r\n    ctx.lineTo(target.x, previous.y);\r\n  }\r\n  ctx.lineTo(target.x, target.y);\r\n}\r\nfunction _bezierCurveTo(ctx, previous, target, flip) {\r\n  if (!previous) {\r\n    return ctx.lineTo(target.x, target.y);\r\n  }\r\n  ctx.bezierCurveTo(\r\n    flip ? previous.cp1x : previous.cp2x,\r\n    flip ? previous.cp1y : previous.cp2y,\r\n    flip ? target.cp2x : target.cp1x,\r\n    flip ? target.cp2y : target.cp1y,\r\n    target.x,\r\n    target.y);\r\n}\r\nfunction renderText(ctx, text, x, y, font, opts = {}) {\r\n  const lines = isArray(text) ? text : [text];\r\n  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\r\n  let i, line;\r\n  ctx.save();\r\n  ctx.font = font.string;\r\n  setRenderOpts(ctx, opts);\r\n  for (i = 0; i < lines.length; ++i) {\r\n    line = lines[i];\r\n    if (stroke) {\r\n      if (opts.strokeColor) {\r\n        ctx.strokeStyle = opts.strokeColor;\r\n      }\r\n      if (!isNullOrUndef(opts.strokeWidth)) {\r\n        ctx.lineWidth = opts.strokeWidth;\r\n      }\r\n      ctx.strokeText(line, x, y, opts.maxWidth);\r\n    }\r\n    ctx.fillText(line, x, y, opts.maxWidth);\r\n    decorateText(ctx, x, y, line, opts);\r\n    y += font.lineHeight;\r\n  }\r\n  ctx.restore();\r\n}\r\nfunction setRenderOpts(ctx, opts) {\r\n  if (opts.translation) {\r\n    ctx.translate(opts.translation[0], opts.translation[1]);\r\n  }\r\n  if (!isNullOrUndef(opts.rotation)) {\r\n    ctx.rotate(opts.rotation);\r\n  }\r\n  if (opts.color) {\r\n    ctx.fillStyle = opts.color;\r\n  }\r\n  if (opts.textAlign) {\r\n    ctx.textAlign = opts.textAlign;\r\n  }\r\n  if (opts.textBaseline) {\r\n    ctx.textBaseline = opts.textBaseline;\r\n  }\r\n}\r\nfunction decorateText(ctx, x, y, line, opts) {\r\n  if (opts.strikethrough || opts.underline) {\r\n    const metrics = ctx.measureText(line);\r\n    const left = x - metrics.actualBoundingBoxLeft;\r\n    const right = x + metrics.actualBoundingBoxRight;\r\n    const top = y - metrics.actualBoundingBoxAscent;\r\n    const bottom = y + metrics.actualBoundingBoxDescent;\r\n    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\r\n    ctx.strokeStyle = ctx.fillStyle;\r\n    ctx.beginPath();\r\n    ctx.lineWidth = opts.decorationWidth || 2;\r\n    ctx.moveTo(left, yDecoration);\r\n    ctx.lineTo(right, yDecoration);\r\n    ctx.stroke();\r\n  }\r\n}\r\nfunction addRoundedRectPath(ctx, rect) {\r\n  const {x, y, w, h, radius} = rect;\r\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, -HALF_PI, PI, true);\r\n  ctx.lineTo(x, y + h - radius.bottomLeft);\r\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\r\n  ctx.lineTo(x + w - radius.bottomRight, y + h);\r\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\r\n  ctx.lineTo(x + w, y + radius.topRight);\r\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\r\n  ctx.lineTo(x + radius.topLeft, y);\r\n}\r\n\r\nconst LINE_HEIGHT = new RegExp(/^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/);\r\nconst FONT_STYLE = new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);\r\nfunction toLineHeight(value, size) {\r\n  const matches = ('' + value).match(LINE_HEIGHT);\r\n  if (!matches || matches[1] === 'normal') {\r\n    return size * 1.2;\r\n  }\r\n  value = +matches[2];\r\n  switch (matches[3]) {\r\n  case 'px':\r\n    return value;\r\n  case '%':\r\n    value /= 100;\r\n    break;\r\n  }\r\n  return size * value;\r\n}\r\nconst numberOrZero = v => +v || 0;\r\nfunction _readValueToProps(value, props) {\r\n  const ret = {};\r\n  const objProps = isObject(props);\r\n  const keys = objProps ? Object.keys(props) : props;\r\n  const read = isObject(value)\r\n    ? objProps\r\n      ? prop => valueOrDefault(value[prop], value[props[prop]])\r\n      : prop => value[prop]\r\n    : () => value;\r\n  for (const prop of keys) {\r\n    ret[prop] = numberOrZero(read(prop));\r\n  }\r\n  return ret;\r\n}\r\nfunction toTRBL(value) {\r\n  return _readValueToProps(value, {top: 'y', right: 'x', bottom: 'y', left: 'x'});\r\n}\r\nfunction toTRBLCorners(value) {\r\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\r\n}\r\nfunction toPadding(value) {\r\n  const obj = toTRBL(value);\r\n  obj.width = obj.left + obj.right;\r\n  obj.height = obj.top + obj.bottom;\r\n  return obj;\r\n}\r\nfunction toFont(options, fallback) {\r\n  options = options || {};\r\n  fallback = fallback || defaults.font;\r\n  let size = valueOrDefault(options.size, fallback.size);\r\n  if (typeof size === 'string') {\r\n    size = parseInt(size, 10);\r\n  }\r\n  let style = valueOrDefault(options.style, fallback.style);\r\n  if (style && !('' + style).match(FONT_STYLE)) {\r\n    console.warn('Invalid font style specified: \"' + style + '\"');\r\n    style = '';\r\n  }\r\n  const font = {\r\n    family: valueOrDefault(options.family, fallback.family),\r\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\r\n    size,\r\n    style,\r\n    weight: valueOrDefault(options.weight, fallback.weight),\r\n    string: ''\r\n  };\r\n  font.string = toFontString(font);\r\n  return font;\r\n}\r\nfunction resolve(inputs, context, index, info) {\r\n  let cacheable = true;\r\n  let i, ilen, value;\r\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\r\n    value = inputs[i];\r\n    if (value === undefined) {\r\n      continue;\r\n    }\r\n    if (context !== undefined && typeof value === 'function') {\r\n      value = value(context);\r\n      cacheable = false;\r\n    }\r\n    if (index !== undefined && isArray(value)) {\r\n      value = value[index % value.length];\r\n      cacheable = false;\r\n    }\r\n    if (value !== undefined) {\r\n      if (info && !cacheable) {\r\n        info.cacheable = false;\r\n      }\r\n      return value;\r\n    }\r\n  }\r\n}\r\nfunction _addGrace(minmax, grace, beginAtZero) {\r\n  const {min, max} = minmax;\r\n  const change = toDimension(grace, (max - min) / 2);\r\n  const keepZero = (value, add) => beginAtZero && value === 0 ? 0 : value + add;\r\n  return {\r\n    min: keepZero(min, -Math.abs(change)),\r\n    max: keepZero(max, change)\r\n  };\r\n}\r\nfunction createContext(parentContext, context) {\r\n  return Object.assign(Object.create(parentContext), context);\r\n}\r\n\r\nfunction _createResolver(scopes, prefixes = [''], rootScopes = scopes, fallback, getTarget = () => scopes[0]) {\r\n  if (!defined(fallback)) {\r\n    fallback = _resolve('_fallback', scopes);\r\n  }\r\n  const cache = {\r\n    [Symbol.toStringTag]: 'Object',\r\n    _cacheable: true,\r\n    _scopes: scopes,\r\n    _rootScopes: rootScopes,\r\n    _fallback: fallback,\r\n    _getTarget: getTarget,\r\n    override: (scope) => _createResolver([scope, ...scopes], prefixes, rootScopes, fallback),\r\n  };\r\n  return new Proxy(cache, {\r\n    deleteProperty(target, prop) {\r\n      delete target[prop];\r\n      delete target._keys;\r\n      delete scopes[0][prop];\r\n      return true;\r\n    },\r\n    get(target, prop) {\r\n      return _cached(target, prop,\r\n        () => _resolveWithPrefixes(prop, prefixes, scopes, target));\r\n    },\r\n    getOwnPropertyDescriptor(target, prop) {\r\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\r\n    },\r\n    getPrototypeOf() {\r\n      return Reflect.getPrototypeOf(scopes[0]);\r\n    },\r\n    has(target, prop) {\r\n      return getKeysFromAllScopes(target).includes(prop);\r\n    },\r\n    ownKeys(target) {\r\n      return getKeysFromAllScopes(target);\r\n    },\r\n    set(target, prop, value) {\r\n      const storage = target._storage || (target._storage = getTarget());\r\n      target[prop] = storage[prop] = value;\r\n      delete target._keys;\r\n      return true;\r\n    }\r\n  });\r\n}\r\nfunction _attachContext(proxy, context, subProxy, descriptorDefaults) {\r\n  const cache = {\r\n    _cacheable: false,\r\n    _proxy: proxy,\r\n    _context: context,\r\n    _subProxy: subProxy,\r\n    _stack: new Set(),\r\n    _descriptors: _descriptors(proxy, descriptorDefaults),\r\n    setContext: (ctx) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),\r\n    override: (scope) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\r\n  };\r\n  return new Proxy(cache, {\r\n    deleteProperty(target, prop) {\r\n      delete target[prop];\r\n      delete proxy[prop];\r\n      return true;\r\n    },\r\n    get(target, prop, receiver) {\r\n      return _cached(target, prop,\r\n        () => _resolveWithContext(target, prop, receiver));\r\n    },\r\n    getOwnPropertyDescriptor(target, prop) {\r\n      return target._descriptors.allKeys\r\n        ? Reflect.has(proxy, prop) ? {enumerable: true, configurable: true} : undefined\r\n        : Reflect.getOwnPropertyDescriptor(proxy, prop);\r\n    },\r\n    getPrototypeOf() {\r\n      return Reflect.getPrototypeOf(proxy);\r\n    },\r\n    has(target, prop) {\r\n      return Reflect.has(proxy, prop);\r\n    },\r\n    ownKeys() {\r\n      return Reflect.ownKeys(proxy);\r\n    },\r\n    set(target, prop, value) {\r\n      proxy[prop] = value;\r\n      delete target[prop];\r\n      return true;\r\n    }\r\n  });\r\n}\r\nfunction _descriptors(proxy, defaults = {scriptable: true, indexable: true}) {\r\n  const {_scriptable = defaults.scriptable, _indexable = defaults.indexable, _allKeys = defaults.allKeys} = proxy;\r\n  return {\r\n    allKeys: _allKeys,\r\n    scriptable: _scriptable,\r\n    indexable: _indexable,\r\n    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,\r\n    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable\r\n  };\r\n}\r\nconst readKey = (prefix, name) => prefix ? prefix + _capitalize(name) : name;\r\nconst needsSubResolver = (prop, value) => isObject(value) && prop !== 'adapters' &&\r\n  (Object.getPrototypeOf(value) === null || value.constructor === Object);\r\nfunction _cached(target, prop, resolve) {\r\n  if (Object.prototype.hasOwnProperty.call(target, prop)) {\r\n    return target[prop];\r\n  }\r\n  const value = resolve();\r\n  target[prop] = value;\r\n  return value;\r\n}\r\nfunction _resolveWithContext(target, prop, receiver) {\r\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\r\n  let value = _proxy[prop];\r\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\r\n    value = _resolveScriptable(prop, value, target, receiver);\r\n  }\r\n  if (isArray(value) && value.length) {\r\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\r\n  }\r\n  if (needsSubResolver(prop, value)) {\r\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\r\n  }\r\n  return value;\r\n}\r\nfunction _resolveScriptable(prop, value, target, receiver) {\r\n  const {_proxy, _context, _subProxy, _stack} = target;\r\n  if (_stack.has(prop)) {\r\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\r\n  }\r\n  _stack.add(prop);\r\n  value = value(_context, _subProxy || receiver);\r\n  _stack.delete(prop);\r\n  if (needsSubResolver(prop, value)) {\r\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\r\n  }\r\n  return value;\r\n}\r\nfunction _resolveArray(prop, value, target, isIndexable) {\r\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\r\n  if (defined(_context.index) && isIndexable(prop)) {\r\n    value = value[_context.index % value.length];\r\n  } else if (isObject(value[0])) {\r\n    const arr = value;\r\n    const scopes = _proxy._scopes.filter(s => s !== arr);\r\n    value = [];\r\n    for (const item of arr) {\r\n      const resolver = createSubResolver(scopes, _proxy, prop, item);\r\n      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\r\n    }\r\n  }\r\n  return value;\r\n}\r\nfunction resolveFallback(fallback, prop, value) {\r\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\r\n}\r\nconst getScope = (key, parent) => key === true ? parent\r\n  : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\r\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\r\n  for (const parent of parentScopes) {\r\n    const scope = getScope(key, parent);\r\n    if (scope) {\r\n      set.add(scope);\r\n      const fallback = resolveFallback(scope._fallback, key, value);\r\n      if (defined(fallback) && fallback !== key && fallback !== parentFallback) {\r\n        return fallback;\r\n      }\r\n    } else if (scope === false && defined(parentFallback) && key !== parentFallback) {\r\n      return null;\r\n    }\r\n  }\r\n  return false;\r\n}\r\nfunction createSubResolver(parentScopes, resolver, prop, value) {\r\n  const rootScopes = resolver._rootScopes;\r\n  const fallback = resolveFallback(resolver._fallback, prop, value);\r\n  const allScopes = [...parentScopes, ...rootScopes];\r\n  const set = new Set();\r\n  set.add(value);\r\n  let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\r\n  if (key === null) {\r\n    return false;\r\n  }\r\n  if (defined(fallback) && fallback !== prop) {\r\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\r\n    if (key === null) {\r\n      return false;\r\n    }\r\n  }\r\n  return _createResolver(Array.from(set), [''], rootScopes, fallback,\r\n    () => subGetTarget(resolver, prop, value));\r\n}\r\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\r\n  while (key) {\r\n    key = addScopes(set, allScopes, key, fallback, item);\r\n  }\r\n  return key;\r\n}\r\nfunction subGetTarget(resolver, prop, value) {\r\n  const parent = resolver._getTarget();\r\n  if (!(prop in parent)) {\r\n    parent[prop] = {};\r\n  }\r\n  const target = parent[prop];\r\n  if (isArray(target) && isObject(value)) {\r\n    return value;\r\n  }\r\n  return target;\r\n}\r\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\r\n  let value;\r\n  for (const prefix of prefixes) {\r\n    value = _resolve(readKey(prefix, prop), scopes);\r\n    if (defined(value)) {\r\n      return needsSubResolver(prop, value)\r\n        ? createSubResolver(scopes, proxy, prop, value)\r\n        : value;\r\n    }\r\n  }\r\n}\r\nfunction _resolve(key, scopes) {\r\n  for (const scope of scopes) {\r\n    if (!scope) {\r\n      continue;\r\n    }\r\n    const value = scope[key];\r\n    if (defined(value)) {\r\n      return value;\r\n    }\r\n  }\r\n}\r\nfunction getKeysFromAllScopes(target) {\r\n  let keys = target._keys;\r\n  if (!keys) {\r\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\r\n  }\r\n  return keys;\r\n}\r\nfunction resolveKeysFromAllScopes(scopes) {\r\n  const set = new Set();\r\n  for (const scope of scopes) {\r\n    for (const key of Object.keys(scope).filter(k => !k.startsWith('_'))) {\r\n      set.add(key);\r\n    }\r\n  }\r\n  return Array.from(set);\r\n}\r\nfunction _parseObjectDataRadialScale(meta, data, start, count) {\r\n  const {iScale} = meta;\r\n  const {key = 'r'} = this._parsing;\r\n  const parsed = new Array(count);\r\n  let i, ilen, index, item;\r\n  for (i = 0, ilen = count; i < ilen; ++i) {\r\n    index = i + start;\r\n    item = data[index];\r\n    parsed[i] = {\r\n      r: iScale.parse(resolveObjectKey(item, key), index)\r\n    };\r\n  }\r\n  return parsed;\r\n}\r\n\r\nconst EPSILON = Number.EPSILON || 1e-14;\r\nconst getPoint = (points, i) => i < points.length && !points[i].skip && points[i];\r\nconst getValueAxis = (indexAxis) => indexAxis === 'x' ? 'y' : 'x';\r\nfunction splineCurve(firstPoint, middlePoint, afterPoint, t) {\r\n  const previous = firstPoint.skip ? middlePoint : firstPoint;\r\n  const current = middlePoint;\r\n  const next = afterPoint.skip ? middlePoint : afterPoint;\r\n  const d01 = distanceBetweenPoints(current, previous);\r\n  const d12 = distanceBetweenPoints(next, current);\r\n  let s01 = d01 / (d01 + d12);\r\n  let s12 = d12 / (d01 + d12);\r\n  s01 = isNaN(s01) ? 0 : s01;\r\n  s12 = isNaN(s12) ? 0 : s12;\r\n  const fa = t * s01;\r\n  const fb = t * s12;\r\n  return {\r\n    previous: {\r\n      x: current.x - fa * (next.x - previous.x),\r\n      y: current.y - fa * (next.y - previous.y)\r\n    },\r\n    next: {\r\n      x: current.x + fb * (next.x - previous.x),\r\n      y: current.y + fb * (next.y - previous.y)\r\n    }\r\n  };\r\n}\r\nfunction monotoneAdjust(points, deltaK, mK) {\r\n  const pointsLen = points.length;\r\n  let alphaK, betaK, tauK, squaredMagnitude, pointCurrent;\r\n  let pointAfter = getPoint(points, 0);\r\n  for (let i = 0; i < pointsLen - 1; ++i) {\r\n    pointCurrent = pointAfter;\r\n    pointAfter = getPoint(points, i + 1);\r\n    if (!pointCurrent || !pointAfter) {\r\n      continue;\r\n    }\r\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\r\n      mK[i] = mK[i + 1] = 0;\r\n      continue;\r\n    }\r\n    alphaK = mK[i] / deltaK[i];\r\n    betaK = mK[i + 1] / deltaK[i];\r\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\r\n    if (squaredMagnitude <= 9) {\r\n      continue;\r\n    }\r\n    tauK = 3 / Math.sqrt(squaredMagnitude);\r\n    mK[i] = alphaK * tauK * deltaK[i];\r\n    mK[i + 1] = betaK * tauK * deltaK[i];\r\n  }\r\n}\r\nfunction monotoneCompute(points, mK, indexAxis = 'x') {\r\n  const valueAxis = getValueAxis(indexAxis);\r\n  const pointsLen = points.length;\r\n  let delta, pointBefore, pointCurrent;\r\n  let pointAfter = getPoint(points, 0);\r\n  for (let i = 0; i < pointsLen; ++i) {\r\n    pointBefore = pointCurrent;\r\n    pointCurrent = pointAfter;\r\n    pointAfter = getPoint(points, i + 1);\r\n    if (!pointCurrent) {\r\n      continue;\r\n    }\r\n    const iPixel = pointCurrent[indexAxis];\r\n    const vPixel = pointCurrent[valueAxis];\r\n    if (pointBefore) {\r\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\r\n      pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\r\n      pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\r\n    }\r\n    if (pointAfter) {\r\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\r\n      pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\r\n      pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\r\n    }\r\n  }\r\n}\r\nfunction splineCurveMonotone(points, indexAxis = 'x') {\r\n  const valueAxis = getValueAxis(indexAxis);\r\n  const pointsLen = points.length;\r\n  const deltaK = Array(pointsLen).fill(0);\r\n  const mK = Array(pointsLen);\r\n  let i, pointBefore, pointCurrent;\r\n  let pointAfter = getPoint(points, 0);\r\n  for (i = 0; i < pointsLen; ++i) {\r\n    pointBefore = pointCurrent;\r\n    pointCurrent = pointAfter;\r\n    pointAfter = getPoint(points, i + 1);\r\n    if (!pointCurrent) {\r\n      continue;\r\n    }\r\n    if (pointAfter) {\r\n      const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\r\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\r\n    }\r\n    mK[i] = !pointBefore ? deltaK[i]\r\n      : !pointAfter ? deltaK[i - 1]\r\n      : (sign(deltaK[i - 1]) !== sign(deltaK[i])) ? 0\r\n      : (deltaK[i - 1] + deltaK[i]) / 2;\r\n  }\r\n  monotoneAdjust(points, deltaK, mK);\r\n  monotoneCompute(points, mK, indexAxis);\r\n}\r\nfunction capControlPoint(pt, min, max) {\r\n  return Math.max(Math.min(pt, max), min);\r\n}\r\nfunction capBezierPoints(points, area) {\r\n  let i, ilen, point, inArea, inAreaPrev;\r\n  let inAreaNext = _isPointInArea(points[0], area);\r\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\r\n    inAreaPrev = inArea;\r\n    inArea = inAreaNext;\r\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\r\n    if (!inArea) {\r\n      continue;\r\n    }\r\n    point = points[i];\r\n    if (inAreaPrev) {\r\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\r\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\r\n    }\r\n    if (inAreaNext) {\r\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\r\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\r\n    }\r\n  }\r\n}\r\nfunction _updateBezierControlPoints(points, options, area, loop, indexAxis) {\r\n  let i, ilen, point, controlPoints;\r\n  if (options.spanGaps) {\r\n    points = points.filter((pt) => !pt.skip);\r\n  }\r\n  if (options.cubicInterpolationMode === 'monotone') {\r\n    splineCurveMonotone(points, indexAxis);\r\n  } else {\r\n    let prev = loop ? points[points.length - 1] : points[0];\r\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\r\n      point = points[i];\r\n      controlPoints = splineCurve(\r\n        prev,\r\n        point,\r\n        points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen],\r\n        options.tension\r\n      );\r\n      point.cp1x = controlPoints.previous.x;\r\n      point.cp1y = controlPoints.previous.y;\r\n      point.cp2x = controlPoints.next.x;\r\n      point.cp2y = controlPoints.next.y;\r\n      prev = point;\r\n    }\r\n  }\r\n  if (options.capBezierPoints) {\r\n    capBezierPoints(points, area);\r\n  }\r\n}\r\n\r\nfunction _isDomSupported() {\r\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\r\n}\r\nfunction _getParentNode(domNode) {\r\n  let parent = domNode.parentNode;\r\n  if (parent && parent.toString() === '[object ShadowRoot]') {\r\n    parent = parent.host;\r\n  }\r\n  return parent;\r\n}\r\nfunction parseMaxStyle(styleValue, node, parentProperty) {\r\n  let valueInPixels;\r\n  if (typeof styleValue === 'string') {\r\n    valueInPixels = parseInt(styleValue, 10);\r\n    if (styleValue.indexOf('%') !== -1) {\r\n      valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\r\n    }\r\n  } else {\r\n    valueInPixels = styleValue;\r\n  }\r\n  return valueInPixels;\r\n}\r\nconst getComputedStyle = (element) => window.getComputedStyle(element, null);\r\nfunction getStyle(el, property) {\r\n  return getComputedStyle(el).getPropertyValue(property);\r\n}\r\nconst positions = ['top', 'right', 'bottom', 'left'];\r\nfunction getPositionedStyle(styles, style, suffix) {\r\n  const result = {};\r\n  suffix = suffix ? '-' + suffix : '';\r\n  for (let i = 0; i < 4; i++) {\r\n    const pos = positions[i];\r\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\r\n  }\r\n  result.width = result.left + result.right;\r\n  result.height = result.top + result.bottom;\r\n  return result;\r\n}\r\nconst useOffsetPos = (x, y, target) => (x > 0 || y > 0) && (!target || !target.shadowRoot);\r\nfunction getCanvasPosition(e, canvas) {\r\n  const touches = e.touches;\r\n  const source = touches && touches.length ? touches[0] : e;\r\n  const {offsetX, offsetY} = source;\r\n  let box = false;\r\n  let x, y;\r\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\r\n    x = offsetX;\r\n    y = offsetY;\r\n  } else {\r\n    const rect = canvas.getBoundingClientRect();\r\n    x = source.clientX - rect.left;\r\n    y = source.clientY - rect.top;\r\n    box = true;\r\n  }\r\n  return {x, y, box};\r\n}\r\nfunction getRelativePosition(evt, chart) {\r\n  if ('native' in evt) {\r\n    return evt;\r\n  }\r\n  const {canvas, currentDevicePixelRatio} = chart;\r\n  const style = getComputedStyle(canvas);\r\n  const borderBox = style.boxSizing === 'border-box';\r\n  const paddings = getPositionedStyle(style, 'padding');\r\n  const borders = getPositionedStyle(style, 'border', 'width');\r\n  const {x, y, box} = getCanvasPosition(evt, canvas);\r\n  const xOffset = paddings.left + (box && borders.left);\r\n  const yOffset = paddings.top + (box && borders.top);\r\n  let {width, height} = chart;\r\n  if (borderBox) {\r\n    width -= paddings.width + borders.width;\r\n    height -= paddings.height + borders.height;\r\n  }\r\n  return {\r\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\r\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\r\n  };\r\n}\r\nfunction getContainerSize(canvas, width, height) {\r\n  let maxWidth, maxHeight;\r\n  if (width === undefined || height === undefined) {\r\n    const container = _getParentNode(canvas);\r\n    if (!container) {\r\n      width = canvas.clientWidth;\r\n      height = canvas.clientHeight;\r\n    } else {\r\n      const rect = container.getBoundingClientRect();\r\n      const containerStyle = getComputedStyle(container);\r\n      const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\r\n      const containerPadding = getPositionedStyle(containerStyle, 'padding');\r\n      width = rect.width - containerPadding.width - containerBorder.width;\r\n      height = rect.height - containerPadding.height - containerBorder.height;\r\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\r\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\r\n    }\r\n  }\r\n  return {\r\n    width,\r\n    height,\r\n    maxWidth: maxWidth || INFINITY,\r\n    maxHeight: maxHeight || INFINITY\r\n  };\r\n}\r\nconst round1 = v => Math.round(v * 10) / 10;\r\nfunction getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {\r\n  const style = getComputedStyle(canvas);\r\n  const margins = getPositionedStyle(style, 'margin');\r\n  const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\r\n  const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\r\n  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\r\n  let {width, height} = containerSize;\r\n  if (style.boxSizing === 'content-box') {\r\n    const borders = getPositionedStyle(style, 'border', 'width');\r\n    const paddings = getPositionedStyle(style, 'padding');\r\n    width -= paddings.width + borders.width;\r\n    height -= paddings.height + borders.height;\r\n  }\r\n  width = Math.max(0, width - margins.width);\r\n  height = Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height - margins.height);\r\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\r\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\r\n  if (width && !height) {\r\n    height = round1(width / 2);\r\n  }\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\nfunction retinaScale(chart, forceRatio, forceStyle) {\r\n  const pixelRatio = forceRatio || 1;\r\n  const deviceHeight = Math.floor(chart.height * pixelRatio);\r\n  const deviceWidth = Math.floor(chart.width * pixelRatio);\r\n  chart.height = deviceHeight / pixelRatio;\r\n  chart.width = deviceWidth / pixelRatio;\r\n  const canvas = chart.canvas;\r\n  if (canvas.style && (forceStyle || (!canvas.style.height && !canvas.style.width))) {\r\n    canvas.style.height = `${chart.height}px`;\r\n    canvas.style.width = `${chart.width}px`;\r\n  }\r\n  if (chart.currentDevicePixelRatio !== pixelRatio\r\n      || canvas.height !== deviceHeight\r\n      || canvas.width !== deviceWidth) {\r\n    chart.currentDevicePixelRatio = pixelRatio;\r\n    canvas.height = deviceHeight;\r\n    canvas.width = deviceWidth;\r\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\nconst supportsEventListenerOptions = (function() {\r\n  let passiveSupported = false;\r\n  try {\r\n    const options = {\r\n      get passive() {\r\n        passiveSupported = true;\r\n        return false;\r\n      }\r\n    };\r\n    window.addEventListener('test', null, options);\r\n    window.removeEventListener('test', null, options);\r\n  } catch (e) {\r\n  }\r\n  return passiveSupported;\r\n}());\r\nfunction readUsedSize(element, property) {\r\n  const value = getStyle(element, property);\r\n  const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\r\n  return matches ? +matches[1] : undefined;\r\n}\r\n\r\nfunction _pointInLine(p1, p2, t, mode) {\r\n  return {\r\n    x: p1.x + t * (p2.x - p1.x),\r\n    y: p1.y + t * (p2.y - p1.y)\r\n  };\r\n}\r\nfunction _steppedInterpolation(p1, p2, t, mode) {\r\n  return {\r\n    x: p1.x + t * (p2.x - p1.x),\r\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y\r\n    : mode === 'after' ? t < 1 ? p1.y : p2.y\r\n    : t > 0 ? p2.y : p1.y\r\n  };\r\n}\r\nfunction _bezierInterpolation(p1, p2, t, mode) {\r\n  const cp1 = {x: p1.cp2x, y: p1.cp2y};\r\n  const cp2 = {x: p2.cp1x, y: p2.cp1y};\r\n  const a = _pointInLine(p1, cp1, t);\r\n  const b = _pointInLine(cp1, cp2, t);\r\n  const c = _pointInLine(cp2, p2, t);\r\n  const d = _pointInLine(a, b, t);\r\n  const e = _pointInLine(b, c, t);\r\n  return _pointInLine(d, e, t);\r\n}\r\n\r\nconst intlCache = new Map();\r\nfunction getNumberFormat(locale, options) {\r\n  options = options || {};\r\n  const cacheKey = locale + JSON.stringify(options);\r\n  let formatter = intlCache.get(cacheKey);\r\n  if (!formatter) {\r\n    formatter = new Intl.NumberFormat(locale, options);\r\n    intlCache.set(cacheKey, formatter);\r\n  }\r\n  return formatter;\r\n}\r\nfunction formatNumber(num, locale, options) {\r\n  return getNumberFormat(locale, options).format(num);\r\n}\r\n\r\nconst getRightToLeftAdapter = function(rectX, width) {\r\n  return {\r\n    x(x) {\r\n      return rectX + rectX + width - x;\r\n    },\r\n    setWidth(w) {\r\n      width = w;\r\n    },\r\n    textAlign(align) {\r\n      if (align === 'center') {\r\n        return align;\r\n      }\r\n      return align === 'right' ? 'left' : 'right';\r\n    },\r\n    xPlus(x, value) {\r\n      return x - value;\r\n    },\r\n    leftForLtr(x, itemWidth) {\r\n      return x - itemWidth;\r\n    },\r\n  };\r\n};\r\nconst getLeftToRightAdapter = function() {\r\n  return {\r\n    x(x) {\r\n      return x;\r\n    },\r\n    setWidth(w) {\r\n    },\r\n    textAlign(align) {\r\n      return align;\r\n    },\r\n    xPlus(x, value) {\r\n      return x + value;\r\n    },\r\n    leftForLtr(x, _itemWidth) {\r\n      return x;\r\n    },\r\n  };\r\n};\r\nfunction getRtlAdapter(rtl, rectX, width) {\r\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\r\n}\r\nfunction overrideTextDirection(ctx, direction) {\r\n  let style, original;\r\n  if (direction === 'ltr' || direction === 'rtl') {\r\n    style = ctx.canvas.style;\r\n    original = [\r\n      style.getPropertyValue('direction'),\r\n      style.getPropertyPriority('direction'),\r\n    ];\r\n    style.setProperty('direction', direction, 'important');\r\n    ctx.prevTextDirection = original;\r\n  }\r\n}\r\nfunction restoreTextDirection(ctx, original) {\r\n  if (original !== undefined) {\r\n    delete ctx.prevTextDirection;\r\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\r\n  }\r\n}\r\n\r\nfunction propertyFn(property) {\r\n  if (property === 'angle') {\r\n    return {\r\n      between: _angleBetween,\r\n      compare: _angleDiff,\r\n      normalize: _normalizeAngle,\r\n    };\r\n  }\r\n  return {\r\n    between: _isBetween,\r\n    compare: (a, b) => a - b,\r\n    normalize: x => x\r\n  };\r\n}\r\nfunction normalizeSegment({start, end, count, loop, style}) {\r\n  return {\r\n    start: start % count,\r\n    end: end % count,\r\n    loop: loop && (end - start + 1) % count === 0,\r\n    style\r\n  };\r\n}\r\nfunction getSegment(segment, points, bounds) {\r\n  const {property, start: startBound, end: endBound} = bounds;\r\n  const {between, normalize} = propertyFn(property);\r\n  const count = points.length;\r\n  let {start, end, loop} = segment;\r\n  let i, ilen;\r\n  if (loop) {\r\n    start += count;\r\n    end += count;\r\n    for (i = 0, ilen = count; i < ilen; ++i) {\r\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\r\n        break;\r\n      }\r\n      start--;\r\n      end--;\r\n    }\r\n    start %= count;\r\n    end %= count;\r\n  }\r\n  if (end < start) {\r\n    end += count;\r\n  }\r\n  return {start, end, loop, style: segment.style};\r\n}\r\nfunction _boundSegment(segment, points, bounds) {\r\n  if (!bounds) {\r\n    return [segment];\r\n  }\r\n  const {property, start: startBound, end: endBound} = bounds;\r\n  const count = points.length;\r\n  const {compare, between, normalize} = propertyFn(property);\r\n  const {start, end, loop, style} = getSegment(segment, points, bounds);\r\n  const result = [];\r\n  let inside = false;\r\n  let subStart = null;\r\n  let value, point, prevValue;\r\n  const startIsBefore = () => between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\r\n  const endIsBefore = () => compare(endBound, value) === 0 || between(endBound, prevValue, value);\r\n  const shouldStart = () => inside || startIsBefore();\r\n  const shouldStop = () => !inside || endIsBefore();\r\n  for (let i = start, prev = start; i <= end; ++i) {\r\n    point = points[i % count];\r\n    if (point.skip) {\r\n      continue;\r\n    }\r\n    value = normalize(point[property]);\r\n    if (value === prevValue) {\r\n      continue;\r\n    }\r\n    inside = between(value, startBound, endBound);\r\n    if (subStart === null && shouldStart()) {\r\n      subStart = compare(value, startBound) === 0 ? i : prev;\r\n    }\r\n    if (subStart !== null && shouldStop()) {\r\n      result.push(normalizeSegment({start: subStart, end: i, loop, count, style}));\r\n      subStart = null;\r\n    }\r\n    prev = i;\r\n    prevValue = value;\r\n  }\r\n  if (subStart !== null) {\r\n    result.push(normalizeSegment({start: subStart, end, loop, count, style}));\r\n  }\r\n  return result;\r\n}\r\nfunction _boundSegments(line, bounds) {\r\n  const result = [];\r\n  const segments = line.segments;\r\n  for (let i = 0; i < segments.length; i++) {\r\n    const sub = _boundSegment(segments[i], line.points, bounds);\r\n    if (sub.length) {\r\n      result.push(...sub);\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction findStartAndEnd(points, count, loop, spanGaps) {\r\n  let start = 0;\r\n  let end = count - 1;\r\n  if (loop && !spanGaps) {\r\n    while (start < count && !points[start].skip) {\r\n      start++;\r\n    }\r\n  }\r\n  while (start < count && points[start].skip) {\r\n    start++;\r\n  }\r\n  start %= count;\r\n  if (loop) {\r\n    end += start;\r\n  }\r\n  while (end > start && points[end % count].skip) {\r\n    end--;\r\n  }\r\n  end %= count;\r\n  return {start, end};\r\n}\r\nfunction solidSegments(points, start, max, loop) {\r\n  const count = points.length;\r\n  const result = [];\r\n  let last = start;\r\n  let prev = points[start];\r\n  let end;\r\n  for (end = start + 1; end <= max; ++end) {\r\n    const cur = points[end % count];\r\n    if (cur.skip || cur.stop) {\r\n      if (!prev.skip) {\r\n        loop = false;\r\n        result.push({start: start % count, end: (end - 1) % count, loop});\r\n        start = last = cur.stop ? end : null;\r\n      }\r\n    } else {\r\n      last = end;\r\n      if (prev.skip) {\r\n        start = end;\r\n      }\r\n    }\r\n    prev = cur;\r\n  }\r\n  if (last !== null) {\r\n    result.push({start: start % count, end: last % count, loop});\r\n  }\r\n  return result;\r\n}\r\nfunction _computeSegments(line, segmentOptions) {\r\n  const points = line.points;\r\n  const spanGaps = line.options.spanGaps;\r\n  const count = points.length;\r\n  if (!count) {\r\n    return [];\r\n  }\r\n  const loop = !!line._loop;\r\n  const {start, end} = findStartAndEnd(points, count, loop, spanGaps);\r\n  if (spanGaps === true) {\r\n    return splitByStyles(line, [{start, end, loop}], points, segmentOptions);\r\n  }\r\n  const max = end < start ? end + count : end;\r\n  const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\r\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\r\n}\r\nfunction splitByStyles(line, segments, points, segmentOptions) {\r\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\r\n    return segments;\r\n  }\r\n  return doSplitByStyles(line, segments, points, segmentOptions);\r\n}\r\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\r\n  const chartContext = line._chart.getContext();\r\n  const baseStyle = readStyle(line.options);\r\n  const {_datasetIndex: datasetIndex, options: {spanGaps}} = line;\r\n  const count = points.length;\r\n  const result = [];\r\n  let prevStyle = baseStyle;\r\n  let start = segments[0].start;\r\n  let i = start;\r\n  function addStyle(s, e, l, st) {\r\n    const dir = spanGaps ? -1 : 1;\r\n    if (s === e) {\r\n      return;\r\n    }\r\n    s += count;\r\n    while (points[s % count].skip) {\r\n      s -= dir;\r\n    }\r\n    while (points[e % count].skip) {\r\n      e += dir;\r\n    }\r\n    if (s % count !== e % count) {\r\n      result.push({start: s % count, end: e % count, loop: l, style: st});\r\n      prevStyle = st;\r\n      start = e % count;\r\n    }\r\n  }\r\n  for (const segment of segments) {\r\n    start = spanGaps ? start : segment.start;\r\n    let prev = points[start % count];\r\n    let style;\r\n    for (i = start + 1; i <= segment.end; i++) {\r\n      const pt = points[i % count];\r\n      style = readStyle(segmentOptions.setContext(createContext(chartContext, {\r\n        type: 'segment',\r\n        p0: prev,\r\n        p1: pt,\r\n        p0DataIndex: (i - 1) % count,\r\n        p1DataIndex: i % count,\r\n        datasetIndex\r\n      })));\r\n      if (styleChanged(style, prevStyle)) {\r\n        addStyle(start, i - 1, segment.loop, prevStyle);\r\n      }\r\n      prev = pt;\r\n      prevStyle = style;\r\n    }\r\n    if (start < i - 1) {\r\n      addStyle(start, i - 1, segment.loop, prevStyle);\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction readStyle(options) {\r\n  return {\r\n    backgroundColor: options.backgroundColor,\r\n    borderCapStyle: options.borderCapStyle,\r\n    borderDash: options.borderDash,\r\n    borderDashOffset: options.borderDashOffset,\r\n    borderJoinStyle: options.borderJoinStyle,\r\n    borderWidth: options.borderWidth,\r\n    borderColor: options.borderColor\r\n  };\r\n}\r\nfunction styleChanged(style, prevStyle) {\r\n  return prevStyle && JSON.stringify(style) !== JSON.stringify(prevStyle);\r\n}\r\n\r\nexport { _isPointInArea as $, _factorize as A, finiteOrDefault as B, callback as C, _addGrace as D, _limitValue as E, toDegrees as F, _measureText as G, HALF_PI as H, _int16Range as I, _alignPixel as J, toPadding as K, clipArea as L, renderText as M, unclipArea as N, toFont as O, PI as P, each as Q, _toLeftRightCenter as R, _alignStartEnd as S, TAU as T, overrides as U, merge as V, _capitalize as W, getRelativePosition as X, _rlookupByKey as Y, _lookupByKey as Z, _arrayUnique as _, resolve as a, toLineHeight as a$, getAngleFromPoint as a0, getMaximumSize as a1, _getParentNode as a2, readUsedSize as a3, throttled as a4, supportsEventListenerOptions as a5, _isDomSupported as a6, descriptors as a7, isFunction as a8, _attachContext as a9, getRtlAdapter as aA, overrideTextDirection as aB, _textX as aC, restoreTextDirection as aD, drawPointLegend as aE, noop as aF, distanceBetweenPoints as aG, _setMinAndMaxByKey as aH, niceNum as aI, almostWhole as aJ, almostEquals as aK, _decimalPlaces as aL, _longestText as aM, _filterBetween as aN, _lookup as aO, isPatternOrGradient as aP, getHoverColor as aQ, clone$1 as aR, _merger as aS, _mergerIf as aT, _deprecated as aU, _splitKey as aV, toFontString as aW, splineCurve as aX, splineCurveMonotone as aY, getStyle as aZ, fontString as a_, _createResolver as aa, _descriptors as ab, mergeIf as ac, uid as ad, debounce as ae, retinaScale as af, clearCanvas as ag, setsEqual as ah, _elementsEqual as ai, _isClickEvent as aj, _isBetween as ak, _readValueToProps as al, _updateBezierControlPoints as am, _computeSegments as an, _boundSegments as ao, _steppedInterpolation as ap, _bezierInterpolation as aq, _pointInLine as ar, _steppedLineTo as as, _bezierCurveTo as at, drawPoint as au, addRoundedRectPath as av, toTRBL as aw, toTRBLCorners as ax, _boundSegment as ay, _normalizeAngle as az, isArray as b, PITAU as b0, INFINITY as b1, RAD_PER_DEG as b2, QUARTER_PI as b3, TWO_THIRDS_PI as b4, _angleDiff as b5, color as c, defaults as d, effects as e, resolveObjectKey as f, isNumberFinite as g, createContext as h, isObject as i, defined as j, isNullOrUndef as k, listenArrayEvents as l, toPercentage as m, toDimension as n, formatNumber as o, _angleBetween as p, _getStartAndCountOfVisiblePoints as q, requestAnimFrame as r, sign as s, toRadians as t, unlistenArrayEvents as u, valueOrDefault as v, _scaleRangesChanged as w, isNumber as x, _parseObjectDataRadialScale as y, log10 as z };\r\n","/*!\r\n * Chart.js v3.9.1\r\n * https://www.chartjs.org\r\n * (c) 2022 Chart.js Contributors\r\n * Released under the MIT License\r\n */\r\nimport { r as requestAnimFrame, a as resolve, e as effects, c as color, d as defaults, i as isObject, b as isArray, v as valueOrDefault, u as unlistenArrayEvents, l as listenArrayEvents, f as resolveObjectKey, g as isNumberFinite, h as createContext, j as defined, s as sign, k as isNullOrUndef, _ as _arrayUnique, t as toRadians, m as toPercentage, n as toDimension, T as TAU, o as formatNumber, p as _angleBetween, H as HALF_PI, P as PI, q as _getStartAndCountOfVisiblePoints, w as _scaleRangesChanged, x as isNumber, y as _parseObjectDataRadialScale, z as log10, A as _factorize, B as finiteOrDefault, C as callback, D as _addGrace, E as _limitValue, F as toDegrees, G as _measureText, I as _int16Range, J as _alignPixel, K as toPadding, L as clipArea, M as renderText, N as unclipArea, O as toFont, Q as each, R as _toLeftRightCenter, S as _alignStartEnd, U as overrides, V as merge, W as _capitalize, X as getRelativePosition, Y as _rlookupByKey, Z as _lookupByKey, $ as _isPointInArea, a0 as getAngleFromPoint, a1 as getMaximumSize, a2 as _getParentNode, a3 as readUsedSize, a4 as throttled, a5 as supportsEventListenerOptions, a6 as _isDomSupported, a7 as descriptors, a8 as isFunction, a9 as _attachContext, aa as _createResolver, ab as _descriptors, ac as mergeIf, ad as uid, ae as debounce, af as retinaScale, ag as clearCanvas, ah as setsEqual, ai as _elementsEqual, aj as _isClickEvent, ak as _isBetween, al as _readValueToProps, am as _updateBezierControlPoints, an as _computeSegments, ao as _boundSegments, ap as _steppedInterpolation, aq as _bezierInterpolation, ar as _pointInLine, as as _steppedLineTo, at as _bezierCurveTo, au as drawPoint, av as addRoundedRectPath, aw as toTRBL, ax as toTRBLCorners, ay as _boundSegment, az as _normalizeAngle, aA as getRtlAdapter, aB as overrideTextDirection, aC as _textX, aD as restoreTextDirection, aE as drawPointLegend, aF as noop, aG as distanceBetweenPoints, aH as _setMinAndMaxByKey, aI as niceNum, aJ as almostWhole, aK as almostEquals, aL as _decimalPlaces, aM as _longestText, aN as _filterBetween, aO as _lookup } from './chunks/helpers.segment.mjs';\r\nexport { d as defaults } from './chunks/helpers.segment.mjs';\r\n\r\nclass Animator {\r\n  constructor() {\r\n    this._request = null;\r\n    this._charts = new Map();\r\n    this._running = false;\r\n    this._lastDate = undefined;\r\n  }\r\n  _notify(chart, anims, date, type) {\r\n    const callbacks = anims.listeners[type];\r\n    const numSteps = anims.duration;\r\n    callbacks.forEach(fn => fn({\r\n      chart,\r\n      initial: anims.initial,\r\n      numSteps,\r\n      currentStep: Math.min(date - anims.start, numSteps)\r\n    }));\r\n  }\r\n  _refresh() {\r\n    if (this._request) {\r\n      return;\r\n    }\r\n    this._running = true;\r\n    this._request = requestAnimFrame.call(window, () => {\r\n      this._update();\r\n      this._request = null;\r\n      if (this._running) {\r\n        this._refresh();\r\n      }\r\n    });\r\n  }\r\n  _update(date = Date.now()) {\r\n    let remaining = 0;\r\n    this._charts.forEach((anims, chart) => {\r\n      if (!anims.running || !anims.items.length) {\r\n        return;\r\n      }\r\n      const items = anims.items;\r\n      let i = items.length - 1;\r\n      let draw = false;\r\n      let item;\r\n      for (; i >= 0; --i) {\r\n        item = items[i];\r\n        if (item._active) {\r\n          if (item._total > anims.duration) {\r\n            anims.duration = item._total;\r\n          }\r\n          item.tick(date);\r\n          draw = true;\r\n        } else {\r\n          items[i] = items[items.length - 1];\r\n          items.pop();\r\n        }\r\n      }\r\n      if (draw) {\r\n        chart.draw();\r\n        this._notify(chart, anims, date, 'progress');\r\n      }\r\n      if (!items.length) {\r\n        anims.running = false;\r\n        this._notify(chart, anims, date, 'complete');\r\n        anims.initial = false;\r\n      }\r\n      remaining += items.length;\r\n    });\r\n    this._lastDate = date;\r\n    if (remaining === 0) {\r\n      this._running = false;\r\n    }\r\n  }\r\n  _getAnims(chart) {\r\n    const charts = this._charts;\r\n    let anims = charts.get(chart);\r\n    if (!anims) {\r\n      anims = {\r\n        running: false,\r\n        initial: true,\r\n        items: [],\r\n        listeners: {\r\n          complete: [],\r\n          progress: []\r\n        }\r\n      };\r\n      charts.set(chart, anims);\r\n    }\r\n    return anims;\r\n  }\r\n  listen(chart, event, cb) {\r\n    this._getAnims(chart).listeners[event].push(cb);\r\n  }\r\n  add(chart, items) {\r\n    if (!items || !items.length) {\r\n      return;\r\n    }\r\n    this._getAnims(chart).items.push(...items);\r\n  }\r\n  has(chart) {\r\n    return this._getAnims(chart).items.length > 0;\r\n  }\r\n  start(chart) {\r\n    const anims = this._charts.get(chart);\r\n    if (!anims) {\r\n      return;\r\n    }\r\n    anims.running = true;\r\n    anims.start = Date.now();\r\n    anims.duration = anims.items.reduce((acc, cur) => Math.max(acc, cur._duration), 0);\r\n    this._refresh();\r\n  }\r\n  running(chart) {\r\n    if (!this._running) {\r\n      return false;\r\n    }\r\n    const anims = this._charts.get(chart);\r\n    if (!anims || !anims.running || !anims.items.length) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  stop(chart) {\r\n    const anims = this._charts.get(chart);\r\n    if (!anims || !anims.items.length) {\r\n      return;\r\n    }\r\n    const items = anims.items;\r\n    let i = items.length - 1;\r\n    for (; i >= 0; --i) {\r\n      items[i].cancel();\r\n    }\r\n    anims.items = [];\r\n    this._notify(chart, anims, Date.now(), 'complete');\r\n  }\r\n  remove(chart) {\r\n    return this._charts.delete(chart);\r\n  }\r\n}\r\nvar animator = new Animator();\r\n\r\nconst transparent = 'transparent';\r\nconst interpolators = {\r\n  boolean(from, to, factor) {\r\n    return factor > 0.5 ? to : from;\r\n  },\r\n  color(from, to, factor) {\r\n    const c0 = color(from || transparent);\r\n    const c1 = c0.valid && color(to || transparent);\r\n    return c1 && c1.valid\r\n      ? c1.mix(c0, factor).hexString()\r\n      : to;\r\n  },\r\n  number(from, to, factor) {\r\n    return from + (to - from) * factor;\r\n  }\r\n};\r\nclass Animation {\r\n  constructor(cfg, target, prop, to) {\r\n    const currentValue = target[prop];\r\n    to = resolve([cfg.to, to, currentValue, cfg.from]);\r\n    const from = resolve([cfg.from, currentValue, to]);\r\n    this._active = true;\r\n    this._fn = cfg.fn || interpolators[cfg.type || typeof from];\r\n    this._easing = effects[cfg.easing] || effects.linear;\r\n    this._start = Math.floor(Date.now() + (cfg.delay || 0));\r\n    this._duration = this._total = Math.floor(cfg.duration);\r\n    this._loop = !!cfg.loop;\r\n    this._target = target;\r\n    this._prop = prop;\r\n    this._from = from;\r\n    this._to = to;\r\n    this._promises = undefined;\r\n  }\r\n  active() {\r\n    return this._active;\r\n  }\r\n  update(cfg, to, date) {\r\n    if (this._active) {\r\n      this._notify(false);\r\n      const currentValue = this._target[this._prop];\r\n      const elapsed = date - this._start;\r\n      const remain = this._duration - elapsed;\r\n      this._start = date;\r\n      this._duration = Math.floor(Math.max(remain, cfg.duration));\r\n      this._total += elapsed;\r\n      this._loop = !!cfg.loop;\r\n      this._to = resolve([cfg.to, to, currentValue, cfg.from]);\r\n      this._from = resolve([cfg.from, currentValue, to]);\r\n    }\r\n  }\r\n  cancel() {\r\n    if (this._active) {\r\n      this.tick(Date.now());\r\n      this._active = false;\r\n      this._notify(false);\r\n    }\r\n  }\r\n  tick(date) {\r\n    const elapsed = date - this._start;\r\n    const duration = this._duration;\r\n    const prop = this._prop;\r\n    const from = this._from;\r\n    const loop = this._loop;\r\n    const to = this._to;\r\n    let factor;\r\n    this._active = from !== to && (loop || (elapsed < duration));\r\n    if (!this._active) {\r\n      this._target[prop] = to;\r\n      this._notify(true);\r\n      return;\r\n    }\r\n    if (elapsed < 0) {\r\n      this._target[prop] = from;\r\n      return;\r\n    }\r\n    factor = (elapsed / duration) % 2;\r\n    factor = loop && factor > 1 ? 2 - factor : factor;\r\n    factor = this._easing(Math.min(1, Math.max(0, factor)));\r\n    this._target[prop] = this._fn(from, to, factor);\r\n  }\r\n  wait() {\r\n    const promises = this._promises || (this._promises = []);\r\n    return new Promise((res, rej) => {\r\n      promises.push({res, rej});\r\n    });\r\n  }\r\n  _notify(resolved) {\r\n    const method = resolved ? 'res' : 'rej';\r\n    const promises = this._promises || [];\r\n    for (let i = 0; i < promises.length; i++) {\r\n      promises[i][method]();\r\n    }\r\n  }\r\n}\r\n\r\nconst numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\r\nconst colors = ['color', 'borderColor', 'backgroundColor'];\r\ndefaults.set('animation', {\r\n  delay: undefined,\r\n  duration: 1000,\r\n  easing: 'easeOutQuart',\r\n  fn: undefined,\r\n  from: undefined,\r\n  loop: undefined,\r\n  to: undefined,\r\n  type: undefined,\r\n});\r\nconst animationOptions = Object.keys(defaults.animation);\r\ndefaults.describe('animation', {\r\n  _fallback: false,\r\n  _indexable: false,\r\n  _scriptable: (name) => name !== 'onProgress' && name !== 'onComplete' && name !== 'fn',\r\n});\r\ndefaults.set('animations', {\r\n  colors: {\r\n    type: 'color',\r\n    properties: colors\r\n  },\r\n  numbers: {\r\n    type: 'number',\r\n    properties: numbers\r\n  },\r\n});\r\ndefaults.describe('animations', {\r\n  _fallback: 'animation',\r\n});\r\ndefaults.set('transitions', {\r\n  active: {\r\n    animation: {\r\n      duration: 400\r\n    }\r\n  },\r\n  resize: {\r\n    animation: {\r\n      duration: 0\r\n    }\r\n  },\r\n  show: {\r\n    animations: {\r\n      colors: {\r\n        from: 'transparent'\r\n      },\r\n      visible: {\r\n        type: 'boolean',\r\n        duration: 0\r\n      },\r\n    }\r\n  },\r\n  hide: {\r\n    animations: {\r\n      colors: {\r\n        to: 'transparent'\r\n      },\r\n      visible: {\r\n        type: 'boolean',\r\n        easing: 'linear',\r\n        fn: v => v | 0\r\n      },\r\n    }\r\n  }\r\n});\r\nclass Animations {\r\n  constructor(chart, config) {\r\n    this._chart = chart;\r\n    this._properties = new Map();\r\n    this.configure(config);\r\n  }\r\n  configure(config) {\r\n    if (!isObject(config)) {\r\n      return;\r\n    }\r\n    const animatedProps = this._properties;\r\n    Object.getOwnPropertyNames(config).forEach(key => {\r\n      const cfg = config[key];\r\n      if (!isObject(cfg)) {\r\n        return;\r\n      }\r\n      const resolved = {};\r\n      for (const option of animationOptions) {\r\n        resolved[option] = cfg[option];\r\n      }\r\n      (isArray(cfg.properties) && cfg.properties || [key]).forEach((prop) => {\r\n        if (prop === key || !animatedProps.has(prop)) {\r\n          animatedProps.set(prop, resolved);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  _animateOptions(target, values) {\r\n    const newOptions = values.options;\r\n    const options = resolveTargetOptions(target, newOptions);\r\n    if (!options) {\r\n      return [];\r\n    }\r\n    const animations = this._createAnimations(options, newOptions);\r\n    if (newOptions.$shared) {\r\n      awaitAll(target.options.$animations, newOptions).then(() => {\r\n        target.options = newOptions;\r\n      }, () => {\r\n      });\r\n    }\r\n    return animations;\r\n  }\r\n  _createAnimations(target, values) {\r\n    const animatedProps = this._properties;\r\n    const animations = [];\r\n    const running = target.$animations || (target.$animations = {});\r\n    const props = Object.keys(values);\r\n    const date = Date.now();\r\n    let i;\r\n    for (i = props.length - 1; i >= 0; --i) {\r\n      const prop = props[i];\r\n      if (prop.charAt(0) === '$') {\r\n        continue;\r\n      }\r\n      if (prop === 'options') {\r\n        animations.push(...this._animateOptions(target, values));\r\n        continue;\r\n      }\r\n      const value = values[prop];\r\n      let animation = running[prop];\r\n      const cfg = animatedProps.get(prop);\r\n      if (animation) {\r\n        if (cfg && animation.active()) {\r\n          animation.update(cfg, value, date);\r\n          continue;\r\n        } else {\r\n          animation.cancel();\r\n        }\r\n      }\r\n      if (!cfg || !cfg.duration) {\r\n        target[prop] = value;\r\n        continue;\r\n      }\r\n      running[prop] = animation = new Animation(cfg, target, prop, value);\r\n      animations.push(animation);\r\n    }\r\n    return animations;\r\n  }\r\n  update(target, values) {\r\n    if (this._properties.size === 0) {\r\n      Object.assign(target, values);\r\n      return;\r\n    }\r\n    const animations = this._createAnimations(target, values);\r\n    if (animations.length) {\r\n      animator.add(this._chart, animations);\r\n      return true;\r\n    }\r\n  }\r\n}\r\nfunction awaitAll(animations, properties) {\r\n  const running = [];\r\n  const keys = Object.keys(properties);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const anim = animations[keys[i]];\r\n    if (anim && anim.active()) {\r\n      running.push(anim.wait());\r\n    }\r\n  }\r\n  return Promise.all(running);\r\n}\r\nfunction resolveTargetOptions(target, newOptions) {\r\n  if (!newOptions) {\r\n    return;\r\n  }\r\n  let options = target.options;\r\n  if (!options) {\r\n    target.options = newOptions;\r\n    return;\r\n  }\r\n  if (options.$shared) {\r\n    target.options = options = Object.assign({}, options, {$shared: false, $animations: {}});\r\n  }\r\n  return options;\r\n}\r\n\r\nfunction scaleClip(scale, allowedOverflow) {\r\n  const opts = scale && scale.options || {};\r\n  const reverse = opts.reverse;\r\n  const min = opts.min === undefined ? allowedOverflow : 0;\r\n  const max = opts.max === undefined ? allowedOverflow : 0;\r\n  return {\r\n    start: reverse ? max : min,\r\n    end: reverse ? min : max\r\n  };\r\n}\r\nfunction defaultClip(xScale, yScale, allowedOverflow) {\r\n  if (allowedOverflow === false) {\r\n    return false;\r\n  }\r\n  const x = scaleClip(xScale, allowedOverflow);\r\n  const y = scaleClip(yScale, allowedOverflow);\r\n  return {\r\n    top: y.end,\r\n    right: x.end,\r\n    bottom: y.start,\r\n    left: x.start\r\n  };\r\n}\r\nfunction toClip(value) {\r\n  let t, r, b, l;\r\n  if (isObject(value)) {\r\n    t = value.top;\r\n    r = value.right;\r\n    b = value.bottom;\r\n    l = value.left;\r\n  } else {\r\n    t = r = b = l = value;\r\n  }\r\n  return {\r\n    top: t,\r\n    right: r,\r\n    bottom: b,\r\n    left: l,\r\n    disabled: value === false\r\n  };\r\n}\r\nfunction getSortedDatasetIndices(chart, filterVisible) {\r\n  const keys = [];\r\n  const metasets = chart._getSortedDatasetMetas(filterVisible);\r\n  let i, ilen;\r\n  for (i = 0, ilen = metasets.length; i < ilen; ++i) {\r\n    keys.push(metasets[i].index);\r\n  }\r\n  return keys;\r\n}\r\nfunction applyStack(stack, value, dsIndex, options = {}) {\r\n  const keys = stack.keys;\r\n  const singleMode = options.mode === 'single';\r\n  let i, ilen, datasetIndex, otherValue;\r\n  if (value === null) {\r\n    return;\r\n  }\r\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n    datasetIndex = +keys[i];\r\n    if (datasetIndex === dsIndex) {\r\n      if (options.all) {\r\n        continue;\r\n      }\r\n      break;\r\n    }\r\n    otherValue = stack.values[datasetIndex];\r\n    if (isNumberFinite(otherValue) && (singleMode || (value === 0 || sign(value) === sign(otherValue)))) {\r\n      value += otherValue;\r\n    }\r\n  }\r\n  return value;\r\n}\r\nfunction convertObjectDataToArray(data) {\r\n  const keys = Object.keys(data);\r\n  const adata = new Array(keys.length);\r\n  let i, ilen, key;\r\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n    key = keys[i];\r\n    adata[i] = {\r\n      x: key,\r\n      y: data[key]\r\n    };\r\n  }\r\n  return adata;\r\n}\r\nfunction isStacked(scale, meta) {\r\n  const stacked = scale && scale.options.stacked;\r\n  return stacked || (stacked === undefined && meta.stack !== undefined);\r\n}\r\nfunction getStackKey(indexScale, valueScale, meta) {\r\n  return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\r\n}\r\nfunction getUserBounds(scale) {\r\n  const {min, max, minDefined, maxDefined} = scale.getUserBounds();\r\n  return {\r\n    min: minDefined ? min : Number.NEGATIVE_INFINITY,\r\n    max: maxDefined ? max : Number.POSITIVE_INFINITY\r\n  };\r\n}\r\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\r\n  const subStack = stacks[stackKey] || (stacks[stackKey] = {});\r\n  return subStack[indexValue] || (subStack[indexValue] = {});\r\n}\r\nfunction getLastIndexInStack(stack, vScale, positive, type) {\r\n  for (const meta of vScale.getMatchingVisibleMetas(type).reverse()) {\r\n    const value = stack[meta.index];\r\n    if ((positive && value > 0) || (!positive && value < 0)) {\r\n      return meta.index;\r\n    }\r\n  }\r\n  return null;\r\n}\r\nfunction updateStacks(controller, parsed) {\r\n  const {chart, _cachedMeta: meta} = controller;\r\n  const stacks = chart._stacks || (chart._stacks = {});\r\n  const {iScale, vScale, index: datasetIndex} = meta;\r\n  const iAxis = iScale.axis;\r\n  const vAxis = vScale.axis;\r\n  const key = getStackKey(iScale, vScale, meta);\r\n  const ilen = parsed.length;\r\n  let stack;\r\n  for (let i = 0; i < ilen; ++i) {\r\n    const item = parsed[i];\r\n    const {[iAxis]: index, [vAxis]: value} = item;\r\n    const itemStacks = item._stacks || (item._stacks = {});\r\n    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\r\n    stack[datasetIndex] = value;\r\n    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\r\n    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\r\n  }\r\n}\r\nfunction getFirstScaleId(chart, axis) {\r\n  const scales = chart.scales;\r\n  return Object.keys(scales).filter(key => scales[key].axis === axis).shift();\r\n}\r\nfunction createDatasetContext(parent, index) {\r\n  return createContext(parent,\r\n    {\r\n      active: false,\r\n      dataset: undefined,\r\n      datasetIndex: index,\r\n      index,\r\n      mode: 'default',\r\n      type: 'dataset'\r\n    }\r\n  );\r\n}\r\nfunction createDataContext(parent, index, element) {\r\n  return createContext(parent, {\r\n    active: false,\r\n    dataIndex: index,\r\n    parsed: undefined,\r\n    raw: undefined,\r\n    element,\r\n    index,\r\n    mode: 'default',\r\n    type: 'data'\r\n  });\r\n}\r\nfunction clearStacks(meta, items) {\r\n  const datasetIndex = meta.controller.index;\r\n  const axis = meta.vScale && meta.vScale.axis;\r\n  if (!axis) {\r\n    return;\r\n  }\r\n  items = items || meta._parsed;\r\n  for (const parsed of items) {\r\n    const stacks = parsed._stacks;\r\n    if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\r\n      return;\r\n    }\r\n    delete stacks[axis][datasetIndex];\r\n  }\r\n}\r\nconst isDirectUpdateMode = (mode) => mode === 'reset' || mode === 'none';\r\nconst cloneIfNotShared = (cached, shared) => shared ? cached : Object.assign({}, cached);\r\nconst createStack = (canStack, meta, chart) => canStack && !meta.hidden && meta._stacked\r\n  && {keys: getSortedDatasetIndices(chart, true), values: null};\r\nclass DatasetController {\r\n  constructor(chart, datasetIndex) {\r\n    this.chart = chart;\r\n    this._ctx = chart.ctx;\r\n    this.index = datasetIndex;\r\n    this._cachedDataOpts = {};\r\n    this._cachedMeta = this.getMeta();\r\n    this._type = this._cachedMeta.type;\r\n    this.options = undefined;\r\n    this._parsing = false;\r\n    this._data = undefined;\r\n    this._objectData = undefined;\r\n    this._sharedOptions = undefined;\r\n    this._drawStart = undefined;\r\n    this._drawCount = undefined;\r\n    this.enableOptionSharing = false;\r\n    this.supportsDecimation = false;\r\n    this.$context = undefined;\r\n    this._syncList = [];\r\n    this.initialize();\r\n  }\r\n  initialize() {\r\n    const meta = this._cachedMeta;\r\n    this.configure();\r\n    this.linkScales();\r\n    meta._stacked = isStacked(meta.vScale, meta);\r\n    this.addElements();\r\n  }\r\n  updateIndex(datasetIndex) {\r\n    if (this.index !== datasetIndex) {\r\n      clearStacks(this._cachedMeta);\r\n    }\r\n    this.index = datasetIndex;\r\n  }\r\n  linkScales() {\r\n    const chart = this.chart;\r\n    const meta = this._cachedMeta;\r\n    const dataset = this.getDataset();\r\n    const chooseId = (axis, x, y, r) => axis === 'x' ? x : axis === 'r' ? r : y;\r\n    const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\r\n    const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\r\n    const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\r\n    const indexAxis = meta.indexAxis;\r\n    const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\r\n    const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\r\n    meta.xScale = this.getScaleForId(xid);\r\n    meta.yScale = this.getScaleForId(yid);\r\n    meta.rScale = this.getScaleForId(rid);\r\n    meta.iScale = this.getScaleForId(iid);\r\n    meta.vScale = this.getScaleForId(vid);\r\n  }\r\n  getDataset() {\r\n    return this.chart.data.datasets[this.index];\r\n  }\r\n  getMeta() {\r\n    return this.chart.getDatasetMeta(this.index);\r\n  }\r\n  getScaleForId(scaleID) {\r\n    return this.chart.scales[scaleID];\r\n  }\r\n  _getOtherScale(scale) {\r\n    const meta = this._cachedMeta;\r\n    return scale === meta.iScale\r\n      ? meta.vScale\r\n      : meta.iScale;\r\n  }\r\n  reset() {\r\n    this._update('reset');\r\n  }\r\n  _destroy() {\r\n    const meta = this._cachedMeta;\r\n    if (this._data) {\r\n      unlistenArrayEvents(this._data, this);\r\n    }\r\n    if (meta._stacked) {\r\n      clearStacks(meta);\r\n    }\r\n  }\r\n  _dataCheck() {\r\n    const dataset = this.getDataset();\r\n    const data = dataset.data || (dataset.data = []);\r\n    const _data = this._data;\r\n    if (isObject(data)) {\r\n      this._data = convertObjectDataToArray(data);\r\n    } else if (_data !== data) {\r\n      if (_data) {\r\n        unlistenArrayEvents(_data, this);\r\n        const meta = this._cachedMeta;\r\n        clearStacks(meta);\r\n        meta._parsed = [];\r\n      }\r\n      if (data && Object.isExtensible(data)) {\r\n        listenArrayEvents(data, this);\r\n      }\r\n      this._syncList = [];\r\n      this._data = data;\r\n    }\r\n  }\r\n  addElements() {\r\n    const meta = this._cachedMeta;\r\n    this._dataCheck();\r\n    if (this.datasetElementType) {\r\n      meta.dataset = new this.datasetElementType();\r\n    }\r\n  }\r\n  buildOrUpdateElements(resetNewElements) {\r\n    const meta = this._cachedMeta;\r\n    const dataset = this.getDataset();\r\n    let stackChanged = false;\r\n    this._dataCheck();\r\n    const oldStacked = meta._stacked;\r\n    meta._stacked = isStacked(meta.vScale, meta);\r\n    if (meta.stack !== dataset.stack) {\r\n      stackChanged = true;\r\n      clearStacks(meta);\r\n      meta.stack = dataset.stack;\r\n    }\r\n    this._resyncElements(resetNewElements);\r\n    if (stackChanged || oldStacked !== meta._stacked) {\r\n      updateStacks(this, meta._parsed);\r\n    }\r\n  }\r\n  configure() {\r\n    const config = this.chart.config;\r\n    const scopeKeys = config.datasetScopeKeys(this._type);\r\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\r\n    this.options = config.createResolver(scopes, this.getContext());\r\n    this._parsing = this.options.parsing;\r\n    this._cachedDataOpts = {};\r\n  }\r\n  parse(start, count) {\r\n    const {_cachedMeta: meta, _data: data} = this;\r\n    const {iScale, _stacked} = meta;\r\n    const iAxis = iScale.axis;\r\n    let sorted = start === 0 && count === data.length ? true : meta._sorted;\r\n    let prev = start > 0 && meta._parsed[start - 1];\r\n    let i, cur, parsed;\r\n    if (this._parsing === false) {\r\n      meta._parsed = data;\r\n      meta._sorted = true;\r\n      parsed = data;\r\n    } else {\r\n      if (isArray(data[start])) {\r\n        parsed = this.parseArrayData(meta, data, start, count);\r\n      } else if (isObject(data[start])) {\r\n        parsed = this.parseObjectData(meta, data, start, count);\r\n      } else {\r\n        parsed = this.parsePrimitiveData(meta, data, start, count);\r\n      }\r\n      const isNotInOrderComparedToPrev = () => cur[iAxis] === null || (prev && cur[iAxis] < prev[iAxis]);\r\n      for (i = 0; i < count; ++i) {\r\n        meta._parsed[i + start] = cur = parsed[i];\r\n        if (sorted) {\r\n          if (isNotInOrderComparedToPrev()) {\r\n            sorted = false;\r\n          }\r\n          prev = cur;\r\n        }\r\n      }\r\n      meta._sorted = sorted;\r\n    }\r\n    if (_stacked) {\r\n      updateStacks(this, parsed);\r\n    }\r\n  }\r\n  parsePrimitiveData(meta, data, start, count) {\r\n    const {iScale, vScale} = meta;\r\n    const iAxis = iScale.axis;\r\n    const vAxis = vScale.axis;\r\n    const labels = iScale.getLabels();\r\n    const singleScale = iScale === vScale;\r\n    const parsed = new Array(count);\r\n    let i, ilen, index;\r\n    for (i = 0, ilen = count; i < ilen; ++i) {\r\n      index = i + start;\r\n      parsed[i] = {\r\n        [iAxis]: singleScale || iScale.parse(labels[index], index),\r\n        [vAxis]: vScale.parse(data[index], index)\r\n      };\r\n    }\r\n    return parsed;\r\n  }\r\n  parseArrayData(meta, data, start, count) {\r\n    const {xScale, yScale} = meta;\r\n    const parsed = new Array(count);\r\n    let i, ilen, index, item;\r\n    for (i = 0, ilen = count; i < ilen; ++i) {\r\n      index = i + start;\r\n      item = data[index];\r\n      parsed[i] = {\r\n        x: xScale.parse(item[0], index),\r\n        y: yScale.parse(item[1], index)\r\n      };\r\n    }\r\n    return parsed;\r\n  }\r\n  parseObjectData(meta, data, start, count) {\r\n    const {xScale, yScale} = meta;\r\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\r\n    const parsed = new Array(count);\r\n    let i, ilen, index, item;\r\n    for (i = 0, ilen = count; i < ilen; ++i) {\r\n      index = i + start;\r\n      item = data[index];\r\n      parsed[i] = {\r\n        x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\r\n        y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\r\n      };\r\n    }\r\n    return parsed;\r\n  }\r\n  getParsed(index) {\r\n    return this._cachedMeta._parsed[index];\r\n  }\r\n  getDataElement(index) {\r\n    return this._cachedMeta.data[index];\r\n  }\r\n  applyStack(scale, parsed, mode) {\r\n    const chart = this.chart;\r\n    const meta = this._cachedMeta;\r\n    const value = parsed[scale.axis];\r\n    const stack = {\r\n      keys: getSortedDatasetIndices(chart, true),\r\n      values: parsed._stacks[scale.axis]\r\n    };\r\n    return applyStack(stack, value, meta.index, {mode});\r\n  }\r\n  updateRangeFromParsed(range, scale, parsed, stack) {\r\n    const parsedValue = parsed[scale.axis];\r\n    let value = parsedValue === null ? NaN : parsedValue;\r\n    const values = stack && parsed._stacks[scale.axis];\r\n    if (stack && values) {\r\n      stack.values = values;\r\n      value = applyStack(stack, parsedValue, this._cachedMeta.index);\r\n    }\r\n    range.min = Math.min(range.min, value);\r\n    range.max = Math.max(range.max, value);\r\n  }\r\n  getMinMax(scale, canStack) {\r\n    const meta = this._cachedMeta;\r\n    const _parsed = meta._parsed;\r\n    const sorted = meta._sorted && scale === meta.iScale;\r\n    const ilen = _parsed.length;\r\n    const otherScale = this._getOtherScale(scale);\r\n    const stack = createStack(canStack, meta, this.chart);\r\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\r\n    const {min: otherMin, max: otherMax} = getUserBounds(otherScale);\r\n    let i, parsed;\r\n    function _skip() {\r\n      parsed = _parsed[i];\r\n      const otherValue = parsed[otherScale.axis];\r\n      return !isNumberFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\r\n    }\r\n    for (i = 0; i < ilen; ++i) {\r\n      if (_skip()) {\r\n        continue;\r\n      }\r\n      this.updateRangeFromParsed(range, scale, parsed, stack);\r\n      if (sorted) {\r\n        break;\r\n      }\r\n    }\r\n    if (sorted) {\r\n      for (i = ilen - 1; i >= 0; --i) {\r\n        if (_skip()) {\r\n          continue;\r\n        }\r\n        this.updateRangeFromParsed(range, scale, parsed, stack);\r\n        break;\r\n      }\r\n    }\r\n    return range;\r\n  }\r\n  getAllParsedValues(scale) {\r\n    const parsed = this._cachedMeta._parsed;\r\n    const values = [];\r\n    let i, ilen, value;\r\n    for (i = 0, ilen = parsed.length; i < ilen; ++i) {\r\n      value = parsed[i][scale.axis];\r\n      if (isNumberFinite(value)) {\r\n        values.push(value);\r\n      }\r\n    }\r\n    return values;\r\n  }\r\n  getMaxOverflow() {\r\n    return false;\r\n  }\r\n  getLabelAndValue(index) {\r\n    const meta = this._cachedMeta;\r\n    const iScale = meta.iScale;\r\n    const vScale = meta.vScale;\r\n    const parsed = this.getParsed(index);\r\n    return {\r\n      label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\r\n      value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\r\n    };\r\n  }\r\n  _update(mode) {\r\n    const meta = this._cachedMeta;\r\n    this.update(mode || 'default');\r\n    meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\r\n  }\r\n  update(mode) {}\r\n  draw() {\r\n    const ctx = this._ctx;\r\n    const chart = this.chart;\r\n    const meta = this._cachedMeta;\r\n    const elements = meta.data || [];\r\n    const area = chart.chartArea;\r\n    const active = [];\r\n    const start = this._drawStart || 0;\r\n    const count = this._drawCount || (elements.length - start);\r\n    const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\r\n    let i;\r\n    if (meta.dataset) {\r\n      meta.dataset.draw(ctx, area, start, count);\r\n    }\r\n    for (i = start; i < start + count; ++i) {\r\n      const element = elements[i];\r\n      if (element.hidden) {\r\n        continue;\r\n      }\r\n      if (element.active && drawActiveElementsOnTop) {\r\n        active.push(element);\r\n      } else {\r\n        element.draw(ctx, area);\r\n      }\r\n    }\r\n    for (i = 0; i < active.length; ++i) {\r\n      active[i].draw(ctx, area);\r\n    }\r\n  }\r\n  getStyle(index, active) {\r\n    const mode = active ? 'active' : 'default';\r\n    return index === undefined && this._cachedMeta.dataset\r\n      ? this.resolveDatasetElementOptions(mode)\r\n      : this.resolveDataElementOptions(index || 0, mode);\r\n  }\r\n  getContext(index, active, mode) {\r\n    const dataset = this.getDataset();\r\n    let context;\r\n    if (index >= 0 && index < this._cachedMeta.data.length) {\r\n      const element = this._cachedMeta.data[index];\r\n      context = element.$context ||\r\n        (element.$context = createDataContext(this.getContext(), index, element));\r\n      context.parsed = this.getParsed(index);\r\n      context.raw = dataset.data[index];\r\n      context.index = context.dataIndex = index;\r\n    } else {\r\n      context = this.$context ||\r\n        (this.$context = createDatasetContext(this.chart.getContext(), this.index));\r\n      context.dataset = dataset;\r\n      context.index = context.datasetIndex = this.index;\r\n    }\r\n    context.active = !!active;\r\n    context.mode = mode;\r\n    return context;\r\n  }\r\n  resolveDatasetElementOptions(mode) {\r\n    return this._resolveElementOptions(this.datasetElementType.id, mode);\r\n  }\r\n  resolveDataElementOptions(index, mode) {\r\n    return this._resolveElementOptions(this.dataElementType.id, mode, index);\r\n  }\r\n  _resolveElementOptions(elementType, mode = 'default', index) {\r\n    const active = mode === 'active';\r\n    const cache = this._cachedDataOpts;\r\n    const cacheKey = elementType + '-' + mode;\r\n    const cached = cache[cacheKey];\r\n    const sharing = this.enableOptionSharing && defined(index);\r\n    if (cached) {\r\n      return cloneIfNotShared(cached, sharing);\r\n    }\r\n    const config = this.chart.config;\r\n    const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\r\n    const prefixes = active ? [`${elementType}Hover`, 'hover', elementType, ''] : [elementType, ''];\r\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\r\n    const names = Object.keys(defaults.elements[elementType]);\r\n    const context = () => this.getContext(index, active);\r\n    const values = config.resolveNamedOptions(scopes, names, context, prefixes);\r\n    if (values.$shared) {\r\n      values.$shared = sharing;\r\n      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\r\n    }\r\n    return values;\r\n  }\r\n  _resolveAnimations(index, transition, active) {\r\n    const chart = this.chart;\r\n    const cache = this._cachedDataOpts;\r\n    const cacheKey = `animation-${transition}`;\r\n    const cached = cache[cacheKey];\r\n    if (cached) {\r\n      return cached;\r\n    }\r\n    let options;\r\n    if (chart.options.animation !== false) {\r\n      const config = this.chart.config;\r\n      const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\r\n      const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\r\n      options = config.createResolver(scopes, this.getContext(index, active, transition));\r\n    }\r\n    const animations = new Animations(chart, options && options.animations);\r\n    if (options && options._cacheable) {\r\n      cache[cacheKey] = Object.freeze(animations);\r\n    }\r\n    return animations;\r\n  }\r\n  getSharedOptions(options) {\r\n    if (!options.$shared) {\r\n      return;\r\n    }\r\n    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\r\n  }\r\n  includeOptions(mode, sharedOptions) {\r\n    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\r\n  }\r\n  _getSharedOptions(start, mode) {\r\n    const firstOpts = this.resolveDataElementOptions(start, mode);\r\n    const previouslySharedOptions = this._sharedOptions;\r\n    const sharedOptions = this.getSharedOptions(firstOpts);\r\n    const includeOptions = this.includeOptions(mode, sharedOptions) || (sharedOptions !== previouslySharedOptions);\r\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\r\n    return {sharedOptions, includeOptions};\r\n  }\r\n  updateElement(element, index, properties, mode) {\r\n    if (isDirectUpdateMode(mode)) {\r\n      Object.assign(element, properties);\r\n    } else {\r\n      this._resolveAnimations(index, mode).update(element, properties);\r\n    }\r\n  }\r\n  updateSharedOptions(sharedOptions, mode, newOptions) {\r\n    if (sharedOptions && !isDirectUpdateMode(mode)) {\r\n      this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\r\n    }\r\n  }\r\n  _setStyle(element, index, mode, active) {\r\n    element.active = active;\r\n    const options = this.getStyle(index, active);\r\n    this._resolveAnimations(index, mode, active).update(element, {\r\n      options: (!active && this.getSharedOptions(options)) || options\r\n    });\r\n  }\r\n  removeHoverStyle(element, datasetIndex, index) {\r\n    this._setStyle(element, index, 'active', false);\r\n  }\r\n  setHoverStyle(element, datasetIndex, index) {\r\n    this._setStyle(element, index, 'active', true);\r\n  }\r\n  _removeDatasetHoverStyle() {\r\n    const element = this._cachedMeta.dataset;\r\n    if (element) {\r\n      this._setStyle(element, undefined, 'active', false);\r\n    }\r\n  }\r\n  _setDatasetHoverStyle() {\r\n    const element = this._cachedMeta.dataset;\r\n    if (element) {\r\n      this._setStyle(element, undefined, 'active', true);\r\n    }\r\n  }\r\n  _resyncElements(resetNewElements) {\r\n    const data = this._data;\r\n    const elements = this._cachedMeta.data;\r\n    for (const [method, arg1, arg2] of this._syncList) {\r\n      this[method](arg1, arg2);\r\n    }\r\n    this._syncList = [];\r\n    const numMeta = elements.length;\r\n    const numData = data.length;\r\n    const count = Math.min(numData, numMeta);\r\n    if (count) {\r\n      this.parse(0, count);\r\n    }\r\n    if (numData > numMeta) {\r\n      this._insertElements(numMeta, numData - numMeta, resetNewElements);\r\n    } else if (numData < numMeta) {\r\n      this._removeElements(numData, numMeta - numData);\r\n    }\r\n  }\r\n  _insertElements(start, count, resetNewElements = true) {\r\n    const meta = this._cachedMeta;\r\n    const data = meta.data;\r\n    const end = start + count;\r\n    let i;\r\n    const move = (arr) => {\r\n      arr.length += count;\r\n      for (i = arr.length - 1; i >= end; i--) {\r\n        arr[i] = arr[i - count];\r\n      }\r\n    };\r\n    move(data);\r\n    for (i = start; i < end; ++i) {\r\n      data[i] = new this.dataElementType();\r\n    }\r\n    if (this._parsing) {\r\n      move(meta._parsed);\r\n    }\r\n    this.parse(start, count);\r\n    if (resetNewElements) {\r\n      this.updateElements(data, start, count, 'reset');\r\n    }\r\n  }\r\n  updateElements(element, start, count, mode) {}\r\n  _removeElements(start, count) {\r\n    const meta = this._cachedMeta;\r\n    if (this._parsing) {\r\n      const removed = meta._parsed.splice(start, count);\r\n      if (meta._stacked) {\r\n        clearStacks(meta, removed);\r\n      }\r\n    }\r\n    meta.data.splice(start, count);\r\n  }\r\n  _sync(args) {\r\n    if (this._parsing) {\r\n      this._syncList.push(args);\r\n    } else {\r\n      const [method, arg1, arg2] = args;\r\n      this[method](arg1, arg2);\r\n    }\r\n    this.chart._dataChanges.push([this.index, ...args]);\r\n  }\r\n  _onDataPush() {\r\n    const count = arguments.length;\r\n    this._sync(['_insertElements', this.getDataset().data.length - count, count]);\r\n  }\r\n  _onDataPop() {\r\n    this._sync(['_removeElements', this._cachedMeta.data.length - 1, 1]);\r\n  }\r\n  _onDataShift() {\r\n    this._sync(['_removeElements', 0, 1]);\r\n  }\r\n  _onDataSplice(start, count) {\r\n    if (count) {\r\n      this._sync(['_removeElements', start, count]);\r\n    }\r\n    const newCount = arguments.length - 2;\r\n    if (newCount) {\r\n      this._sync(['_insertElements', start, newCount]);\r\n    }\r\n  }\r\n  _onDataUnshift() {\r\n    this._sync(['_insertElements', 0, arguments.length]);\r\n  }\r\n}\r\nDatasetController.defaults = {};\r\nDatasetController.prototype.datasetElementType = null;\r\nDatasetController.prototype.dataElementType = null;\r\n\r\nfunction getAllScaleValues(scale, type) {\r\n  if (!scale._cache.$bar) {\r\n    const visibleMetas = scale.getMatchingVisibleMetas(type);\r\n    let values = [];\r\n    for (let i = 0, ilen = visibleMetas.length; i < ilen; i++) {\r\n      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\r\n    }\r\n    scale._cache.$bar = _arrayUnique(values.sort((a, b) => a - b));\r\n  }\r\n  return scale._cache.$bar;\r\n}\r\nfunction computeMinSampleSize(meta) {\r\n  const scale = meta.iScale;\r\n  const values = getAllScaleValues(scale, meta.type);\r\n  let min = scale._length;\r\n  let i, ilen, curr, prev;\r\n  const updateMinAndPrev = () => {\r\n    if (curr === 32767 || curr === -32768) {\r\n      return;\r\n    }\r\n    if (defined(prev)) {\r\n      min = Math.min(min, Math.abs(curr - prev) || min);\r\n    }\r\n    prev = curr;\r\n  };\r\n  for (i = 0, ilen = values.length; i < ilen; ++i) {\r\n    curr = scale.getPixelForValue(values[i]);\r\n    updateMinAndPrev();\r\n  }\r\n  prev = undefined;\r\n  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {\r\n    curr = scale.getPixelForTick(i);\r\n    updateMinAndPrev();\r\n  }\r\n  return min;\r\n}\r\nfunction computeFitCategoryTraits(index, ruler, options, stackCount) {\r\n  const thickness = options.barThickness;\r\n  let size, ratio;\r\n  if (isNullOrUndef(thickness)) {\r\n    size = ruler.min * options.categoryPercentage;\r\n    ratio = options.barPercentage;\r\n  } else {\r\n    size = thickness * stackCount;\r\n    ratio = 1;\r\n  }\r\n  return {\r\n    chunk: size / stackCount,\r\n    ratio,\r\n    start: ruler.pixels[index] - (size / 2)\r\n  };\r\n}\r\nfunction computeFlexCategoryTraits(index, ruler, options, stackCount) {\r\n  const pixels = ruler.pixels;\r\n  const curr = pixels[index];\r\n  let prev = index > 0 ? pixels[index - 1] : null;\r\n  let next = index < pixels.length - 1 ? pixels[index + 1] : null;\r\n  const percent = options.categoryPercentage;\r\n  if (prev === null) {\r\n    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\r\n  }\r\n  if (next === null) {\r\n    next = curr + curr - prev;\r\n  }\r\n  const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\r\n  const size = Math.abs(next - prev) / 2 * percent;\r\n  return {\r\n    chunk: size / stackCount,\r\n    ratio: options.barPercentage,\r\n    start\r\n  };\r\n}\r\nfunction parseFloatBar(entry, item, vScale, i) {\r\n  const startValue = vScale.parse(entry[0], i);\r\n  const endValue = vScale.parse(entry[1], i);\r\n  const min = Math.min(startValue, endValue);\r\n  const max = Math.max(startValue, endValue);\r\n  let barStart = min;\r\n  let barEnd = max;\r\n  if (Math.abs(min) > Math.abs(max)) {\r\n    barStart = max;\r\n    barEnd = min;\r\n  }\r\n  item[vScale.axis] = barEnd;\r\n  item._custom = {\r\n    barStart,\r\n    barEnd,\r\n    start: startValue,\r\n    end: endValue,\r\n    min,\r\n    max\r\n  };\r\n}\r\nfunction parseValue(entry, item, vScale, i) {\r\n  if (isArray(entry)) {\r\n    parseFloatBar(entry, item, vScale, i);\r\n  } else {\r\n    item[vScale.axis] = vScale.parse(entry, i);\r\n  }\r\n  return item;\r\n}\r\nfunction parseArrayOrPrimitive(meta, data, start, count) {\r\n  const iScale = meta.iScale;\r\n  const vScale = meta.vScale;\r\n  const labels = iScale.getLabels();\r\n  const singleScale = iScale === vScale;\r\n  const parsed = [];\r\n  let i, ilen, item, entry;\r\n  for (i = start, ilen = start + count; i < ilen; ++i) {\r\n    entry = data[i];\r\n    item = {};\r\n    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\r\n    parsed.push(parseValue(entry, item, vScale, i));\r\n  }\r\n  return parsed;\r\n}\r\nfunction isFloatBar(custom) {\r\n  return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\r\n}\r\nfunction barSign(size, vScale, actualBase) {\r\n  if (size !== 0) {\r\n    return sign(size);\r\n  }\r\n  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\r\n}\r\nfunction borderProps(properties) {\r\n  let reverse, start, end, top, bottom;\r\n  if (properties.horizontal) {\r\n    reverse = properties.base > properties.x;\r\n    start = 'left';\r\n    end = 'right';\r\n  } else {\r\n    reverse = properties.base < properties.y;\r\n    start = 'bottom';\r\n    end = 'top';\r\n  }\r\n  if (reverse) {\r\n    top = 'end';\r\n    bottom = 'start';\r\n  } else {\r\n    top = 'start';\r\n    bottom = 'end';\r\n  }\r\n  return {start, end, reverse, top, bottom};\r\n}\r\nfunction setBorderSkipped(properties, options, stack, index) {\r\n  let edge = options.borderSkipped;\r\n  const res = {};\r\n  if (!edge) {\r\n    properties.borderSkipped = res;\r\n    return;\r\n  }\r\n  if (edge === true) {\r\n    properties.borderSkipped = {top: true, right: true, bottom: true, left: true};\r\n    return;\r\n  }\r\n  const {start, end, reverse, top, bottom} = borderProps(properties);\r\n  if (edge === 'middle' && stack) {\r\n    properties.enableBorderRadius = true;\r\n    if ((stack._top || 0) === index) {\r\n      edge = top;\r\n    } else if ((stack._bottom || 0) === index) {\r\n      edge = bottom;\r\n    } else {\r\n      res[parseEdge(bottom, start, end, reverse)] = true;\r\n      edge = top;\r\n    }\r\n  }\r\n  res[parseEdge(edge, start, end, reverse)] = true;\r\n  properties.borderSkipped = res;\r\n}\r\nfunction parseEdge(edge, a, b, reverse) {\r\n  if (reverse) {\r\n    edge = swap(edge, a, b);\r\n    edge = startEnd(edge, b, a);\r\n  } else {\r\n    edge = startEnd(edge, a, b);\r\n  }\r\n  return edge;\r\n}\r\nfunction swap(orig, v1, v2) {\r\n  return orig === v1 ? v2 : orig === v2 ? v1 : orig;\r\n}\r\nfunction startEnd(v, start, end) {\r\n  return v === 'start' ? start : v === 'end' ? end : v;\r\n}\r\nfunction setInflateAmount(properties, {inflateAmount}, ratio) {\r\n  properties.inflateAmount = inflateAmount === 'auto'\r\n    ? ratio === 1 ? 0.33 : 0\r\n    : inflateAmount;\r\n}\r\nclass BarController extends DatasetController {\r\n  parsePrimitiveData(meta, data, start, count) {\r\n    return parseArrayOrPrimitive(meta, data, start, count);\r\n  }\r\n  parseArrayData(meta, data, start, count) {\r\n    return parseArrayOrPrimitive(meta, data, start, count);\r\n  }\r\n  parseObjectData(meta, data, start, count) {\r\n    const {iScale, vScale} = meta;\r\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\r\n    const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\r\n    const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\r\n    const parsed = [];\r\n    let i, ilen, item, obj;\r\n    for (i = start, ilen = start + count; i < ilen; ++i) {\r\n      obj = data[i];\r\n      item = {};\r\n      item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\r\n      parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\r\n    }\r\n    return parsed;\r\n  }\r\n  updateRangeFromParsed(range, scale, parsed, stack) {\r\n    super.updateRangeFromParsed(range, scale, parsed, stack);\r\n    const custom = parsed._custom;\r\n    if (custom && scale === this._cachedMeta.vScale) {\r\n      range.min = Math.min(range.min, custom.min);\r\n      range.max = Math.max(range.max, custom.max);\r\n    }\r\n  }\r\n  getMaxOverflow() {\r\n    return 0;\r\n  }\r\n  getLabelAndValue(index) {\r\n    const meta = this._cachedMeta;\r\n    const {iScale, vScale} = meta;\r\n    const parsed = this.getParsed(index);\r\n    const custom = parsed._custom;\r\n    const value = isFloatBar(custom)\r\n      ? '[' + custom.start + ', ' + custom.end + ']'\r\n      : '' + vScale.getLabelForValue(parsed[vScale.axis]);\r\n    return {\r\n      label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\r\n      value\r\n    };\r\n  }\r\n  initialize() {\r\n    this.enableOptionSharing = true;\r\n    super.initialize();\r\n    const meta = this._cachedMeta;\r\n    meta.stack = this.getDataset().stack;\r\n  }\r\n  update(mode) {\r\n    const meta = this._cachedMeta;\r\n    this.updateElements(meta.data, 0, meta.data.length, mode);\r\n  }\r\n  updateElements(bars, start, count, mode) {\r\n    const reset = mode === 'reset';\r\n    const {index, _cachedMeta: {vScale}} = this;\r\n    const base = vScale.getBasePixel();\r\n    const horizontal = vScale.isHorizontal();\r\n    const ruler = this._getRuler();\r\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\r\n    for (let i = start; i < start + count; i++) {\r\n      const parsed = this.getParsed(i);\r\n      const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {base, head: base} : this._calculateBarValuePixels(i);\r\n      const ipixels = this._calculateBarIndexPixels(i, ruler);\r\n      const stack = (parsed._stacks || {})[vScale.axis];\r\n      const properties = {\r\n        horizontal,\r\n        base: vpixels.base,\r\n        enableBorderRadius: !stack || isFloatBar(parsed._custom) || (index === stack._top || index === stack._bottom),\r\n        x: horizontal ? vpixels.head : ipixels.center,\r\n        y: horizontal ? ipixels.center : vpixels.head,\r\n        height: horizontal ? ipixels.size : Math.abs(vpixels.size),\r\n        width: horizontal ? Math.abs(vpixels.size) : ipixels.size\r\n      };\r\n      if (includeOptions) {\r\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\r\n      }\r\n      const options = properties.options || bars[i].options;\r\n      setBorderSkipped(properties, options, stack, index);\r\n      setInflateAmount(properties, options, ruler.ratio);\r\n      this.updateElement(bars[i], i, properties, mode);\r\n    }\r\n  }\r\n  _getStacks(last, dataIndex) {\r\n    const {iScale} = this._cachedMeta;\r\n    const metasets = iScale.getMatchingVisibleMetas(this._type)\r\n      .filter(meta => meta.controller.options.grouped);\r\n    const stacked = iScale.options.stacked;\r\n    const stacks = [];\r\n    const skipNull = (meta) => {\r\n      const parsed = meta.controller.getParsed(dataIndex);\r\n      const val = parsed && parsed[meta.vScale.axis];\r\n      if (isNullOrUndef(val) || isNaN(val)) {\r\n        return true;\r\n      }\r\n    };\r\n    for (const meta of metasets) {\r\n      if (dataIndex !== undefined && skipNull(meta)) {\r\n        continue;\r\n      }\r\n      if (stacked === false || stacks.indexOf(meta.stack) === -1 ||\r\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\r\n        stacks.push(meta.stack);\r\n      }\r\n      if (meta.index === last) {\r\n        break;\r\n      }\r\n    }\r\n    if (!stacks.length) {\r\n      stacks.push(undefined);\r\n    }\r\n    return stacks;\r\n  }\r\n  _getStackCount(index) {\r\n    return this._getStacks(undefined, index).length;\r\n  }\r\n  _getStackIndex(datasetIndex, name, dataIndex) {\r\n    const stacks = this._getStacks(datasetIndex, dataIndex);\r\n    const index = (name !== undefined)\r\n      ? stacks.indexOf(name)\r\n      : -1;\r\n    return (index === -1)\r\n      ? stacks.length - 1\r\n      : index;\r\n  }\r\n  _getRuler() {\r\n    const opts = this.options;\r\n    const meta = this._cachedMeta;\r\n    const iScale = meta.iScale;\r\n    const pixels = [];\r\n    let i, ilen;\r\n    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {\r\n      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\r\n    }\r\n    const barThickness = opts.barThickness;\r\n    const min = barThickness || computeMinSampleSize(meta);\r\n    return {\r\n      min,\r\n      pixels,\r\n      start: iScale._startPixel,\r\n      end: iScale._endPixel,\r\n      stackCount: this._getStackCount(),\r\n      scale: iScale,\r\n      grouped: opts.grouped,\r\n      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\r\n    };\r\n  }\r\n  _calculateBarValuePixels(index) {\r\n    const {_cachedMeta: {vScale, _stacked}, options: {base: baseValue, minBarLength}} = this;\r\n    const actualBase = baseValue || 0;\r\n    const parsed = this.getParsed(index);\r\n    const custom = parsed._custom;\r\n    const floating = isFloatBar(custom);\r\n    let value = parsed[vScale.axis];\r\n    let start = 0;\r\n    let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\r\n    let head, size;\r\n    if (length !== value) {\r\n      start = length - value;\r\n      length = value;\r\n    }\r\n    if (floating) {\r\n      value = custom.barStart;\r\n      length = custom.barEnd - custom.barStart;\r\n      if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\r\n        start = 0;\r\n      }\r\n      start += value;\r\n    }\r\n    const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\r\n    let base = vScale.getPixelForValue(startValue);\r\n    if (this.chart.getDataVisibility(index)) {\r\n      head = vScale.getPixelForValue(start + length);\r\n    } else {\r\n      head = base;\r\n    }\r\n    size = head - base;\r\n    if (Math.abs(size) < minBarLength) {\r\n      size = barSign(size, vScale, actualBase) * minBarLength;\r\n      if (value === actualBase) {\r\n        base -= size / 2;\r\n      }\r\n      const startPixel = vScale.getPixelForDecimal(0);\r\n      const endPixel = vScale.getPixelForDecimal(1);\r\n      const min = Math.min(startPixel, endPixel);\r\n      const max = Math.max(startPixel, endPixel);\r\n      base = Math.max(Math.min(base, max), min);\r\n      head = base + size;\r\n    }\r\n    if (base === vScale.getPixelForValue(actualBase)) {\r\n      const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\r\n      base += halfGrid;\r\n      size -= halfGrid;\r\n    }\r\n    return {\r\n      size,\r\n      base,\r\n      head,\r\n      center: head + size / 2\r\n    };\r\n  }\r\n  _calculateBarIndexPixels(index, ruler) {\r\n    const scale = ruler.scale;\r\n    const options = this.options;\r\n    const skipNull = options.skipNull;\r\n    const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\r\n    let center, size;\r\n    if (ruler.grouped) {\r\n      const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\r\n      const range = options.barThickness === 'flex'\r\n        ? computeFlexCategoryTraits(index, ruler, options, stackCount)\r\n        : computeFitCategoryTraits(index, ruler, options, stackCount);\r\n      const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);\r\n      center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\r\n      size = Math.min(maxBarThickness, range.chunk * range.ratio);\r\n    } else {\r\n      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\r\n      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\r\n    }\r\n    return {\r\n      base: center - size / 2,\r\n      head: center + size / 2,\r\n      center,\r\n      size\r\n    };\r\n  }\r\n  draw() {\r\n    const meta = this._cachedMeta;\r\n    const vScale = meta.vScale;\r\n    const rects = meta.data;\r\n    const ilen = rects.length;\r\n    let i = 0;\r\n    for (; i < ilen; ++i) {\r\n      if (this.getParsed(i)[vScale.axis] !== null) {\r\n        rects[i].draw(this._ctx);\r\n      }\r\n    }\r\n  }\r\n}\r\nBarController.id = 'bar';\r\nBarController.defaults = {\r\n  datasetElementType: false,\r\n  dataElementType: 'bar',\r\n  categoryPercentage: 0.8,\r\n  barPercentage: 0.9,\r\n  grouped: true,\r\n  animations: {\r\n    numbers: {\r\n      type: 'number',\r\n      properties: ['x', 'y', 'base', 'width', 'height']\r\n    }\r\n  }\r\n};\r\nBarController.overrides = {\r\n  scales: {\r\n    _index_: {\r\n      type: 'category',\r\n      offset: true,\r\n      grid: {\r\n        offset: true\r\n      }\r\n    },\r\n    _value_: {\r\n      type: 'linear',\r\n      beginAtZero: true,\r\n    }\r\n  }\r\n};\r\n\r\nclass BubbleController extends DatasetController {\r\n  initialize() {\r\n    this.enableOptionSharing = true;\r\n    super.initialize();\r\n  }\r\n  parsePrimitiveData(meta, data, start, count) {\r\n    const parsed = super.parsePrimitiveData(meta, data, start, count);\r\n    for (let i = 0; i < parsed.length; i++) {\r\n      parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\r\n    }\r\n    return parsed;\r\n  }\r\n  parseArrayData(meta, data, start, count) {\r\n    const parsed = super.parseArrayData(meta, data, start, count);\r\n    for (let i = 0; i < parsed.length; i++) {\r\n      const item = data[start + i];\r\n      parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\r\n    }\r\n    return parsed;\r\n  }\r\n  parseObjectData(meta, data, start, count) {\r\n    const parsed = super.parseObjectData(meta, data, start, count);\r\n    for (let i = 0; i < parsed.length; i++) {\r\n      const item = data[start + i];\r\n      parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\r\n    }\r\n    return parsed;\r\n  }\r\n  getMaxOverflow() {\r\n    const data = this._cachedMeta.data;\r\n    let max = 0;\r\n    for (let i = data.length - 1; i >= 0; --i) {\r\n      max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\r\n    }\r\n    return max > 0 && max;\r\n  }\r\n  getLabelAndValue(index) {\r\n    const meta = this._cachedMeta;\r\n    const {xScale, yScale} = meta;\r\n    const parsed = this.getParsed(index);\r\n    const x = xScale.getLabelForValue(parsed.x);\r\n    const y = yScale.getLabelForValue(parsed.y);\r\n    const r = parsed._custom;\r\n    return {\r\n      label: meta.label,\r\n      value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\r\n    };\r\n  }\r\n  update(mode) {\r\n    const points = this._cachedMeta.data;\r\n    this.updateElements(points, 0, points.length, mode);\r\n  }\r\n  updateElements(points, start, count, mode) {\r\n    const reset = mode === 'reset';\r\n    const {iScale, vScale} = this._cachedMeta;\r\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\r\n    const iAxis = iScale.axis;\r\n    const vAxis = vScale.axis;\r\n    for (let i = start; i < start + count; i++) {\r\n      const point = points[i];\r\n      const parsed = !reset && this.getParsed(i);\r\n      const properties = {};\r\n      const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\r\n      const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\r\n      properties.skip = isNaN(iPixel) || isNaN(vPixel);\r\n      if (includeOptions) {\r\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\r\n        if (reset) {\r\n          properties.options.radius = 0;\r\n        }\r\n      }\r\n      this.updateElement(point, i, properties, mode);\r\n    }\r\n  }\r\n  resolveDataElementOptions(index, mode) {\r\n    const parsed = this.getParsed(index);\r\n    let values = super.resolveDataElementOptions(index, mode);\r\n    if (values.$shared) {\r\n      values = Object.assign({}, values, {$shared: false});\r\n    }\r\n    const radius = values.radius;\r\n    if (mode !== 'active') {\r\n      values.radius = 0;\r\n    }\r\n    values.radius += valueOrDefault(parsed && parsed._custom, radius);\r\n    return values;\r\n  }\r\n}\r\nBubbleController.id = 'bubble';\r\nBubbleController.defaults = {\r\n  datasetElementType: false,\r\n  dataElementType: 'point',\r\n  animations: {\r\n    numbers: {\r\n      type: 'number',\r\n      properties: ['x', 'y', 'borderWidth', 'radius']\r\n    }\r\n  }\r\n};\r\nBubbleController.overrides = {\r\n  scales: {\r\n    x: {\r\n      type: 'linear'\r\n    },\r\n    y: {\r\n      type: 'linear'\r\n    }\r\n  },\r\n  plugins: {\r\n    tooltip: {\r\n      callbacks: {\r\n        title() {\r\n          return '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nfunction getRatioAndOffset(rotation, circumference, cutout) {\r\n  let ratioX = 1;\r\n  let ratioY = 1;\r\n  let offsetX = 0;\r\n  let offsetY = 0;\r\n  if (circumference < TAU) {\r\n    const startAngle = rotation;\r\n    const endAngle = startAngle + circumference;\r\n    const startX = Math.cos(startAngle);\r\n    const startY = Math.sin(startAngle);\r\n    const endX = Math.cos(endAngle);\r\n    const endY = Math.sin(endAngle);\r\n    const calcMax = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\r\n    const calcMin = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\r\n    const maxX = calcMax(0, startX, endX);\r\n    const maxY = calcMax(HALF_PI, startY, endY);\r\n    const minX = calcMin(PI, startX, endX);\r\n    const minY = calcMin(PI + HALF_PI, startY, endY);\r\n    ratioX = (maxX - minX) / 2;\r\n    ratioY = (maxY - minY) / 2;\r\n    offsetX = -(maxX + minX) / 2;\r\n    offsetY = -(maxY + minY) / 2;\r\n  }\r\n  return {ratioX, ratioY, offsetX, offsetY};\r\n}\r\nclass DoughnutController extends DatasetController {\r\n  constructor(chart, datasetIndex) {\r\n    super(chart, datasetIndex);\r\n    this.enableOptionSharing = true;\r\n    this.innerRadius = undefined;\r\n    this.outerRadius = undefined;\r\n    this.offsetX = undefined;\r\n    this.offsetY = undefined;\r\n  }\r\n  linkScales() {}\r\n  parse(start, count) {\r\n    const data = this.getDataset().data;\r\n    const meta = this._cachedMeta;\r\n    if (this._parsing === false) {\r\n      meta._parsed = data;\r\n    } else {\r\n      let getter = (i) => +data[i];\r\n      if (isObject(data[start])) {\r\n        const {key = 'value'} = this._parsing;\r\n        getter = (i) => +resolveObjectKey(data[i], key);\r\n      }\r\n      let i, ilen;\r\n      for (i = start, ilen = start + count; i < ilen; ++i) {\r\n        meta._parsed[i] = getter(i);\r\n      }\r\n    }\r\n  }\r\n  _getRotation() {\r\n    return toRadians(this.options.rotation - 90);\r\n  }\r\n  _getCircumference() {\r\n    return toRadians(this.options.circumference);\r\n  }\r\n  _getRotationExtents() {\r\n    let min = TAU;\r\n    let max = -TAU;\r\n    for (let i = 0; i < this.chart.data.datasets.length; ++i) {\r\n      if (this.chart.isDatasetVisible(i)) {\r\n        const controller = this.chart.getDatasetMeta(i).controller;\r\n        const rotation = controller._getRotation();\r\n        const circumference = controller._getCircumference();\r\n        min = Math.min(min, rotation);\r\n        max = Math.max(max, rotation + circumference);\r\n      }\r\n    }\r\n    return {\r\n      rotation: min,\r\n      circumference: max - min,\r\n    };\r\n  }\r\n  update(mode) {\r\n    const chart = this.chart;\r\n    const {chartArea} = chart;\r\n    const meta = this._cachedMeta;\r\n    const arcs = meta.data;\r\n    const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\r\n    const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\r\n    const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\r\n    const chartWeight = this._getRingWeight(this.index);\r\n    const {circumference, rotation} = this._getRotationExtents();\r\n    const {ratioX, ratioY, offsetX, offsetY} = getRatioAndOffset(rotation, circumference, cutout);\r\n    const maxWidth = (chartArea.width - spacing) / ratioX;\r\n    const maxHeight = (chartArea.height - spacing) / ratioY;\r\n    const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\r\n    const outerRadius = toDimension(this.options.radius, maxRadius);\r\n    const innerRadius = Math.max(outerRadius * cutout, 0);\r\n    const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\r\n    this.offsetX = offsetX * outerRadius;\r\n    this.offsetY = offsetY * outerRadius;\r\n    meta.total = this.calculateTotal();\r\n    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\r\n    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\r\n    this.updateElements(arcs, 0, arcs.length, mode);\r\n  }\r\n  _circumference(i, reset) {\r\n    const opts = this.options;\r\n    const meta = this._cachedMeta;\r\n    const circumference = this._getCircumference();\r\n    if ((reset && opts.animation.animateRotate) || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\r\n      return 0;\r\n    }\r\n    return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\r\n  }\r\n  updateElements(arcs, start, count, mode) {\r\n    const reset = mode === 'reset';\r\n    const chart = this.chart;\r\n    const chartArea = chart.chartArea;\r\n    const opts = chart.options;\r\n    const animationOpts = opts.animation;\r\n    const centerX = (chartArea.left + chartArea.right) / 2;\r\n    const centerY = (chartArea.top + chartArea.bottom) / 2;\r\n    const animateScale = reset && animationOpts.animateScale;\r\n    const innerRadius = animateScale ? 0 : this.innerRadius;\r\n    const outerRadius = animateScale ? 0 : this.outerRadius;\r\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\r\n    let startAngle = this._getRotation();\r\n    let i;\r\n    for (i = 0; i < start; ++i) {\r\n      startAngle += this._circumference(i, reset);\r\n    }\r\n    for (i = start; i < start + count; ++i) {\r\n      const circumference = this._circumference(i, reset);\r\n      const arc = arcs[i];\r\n      const properties = {\r\n        x: centerX + this.offsetX,\r\n        y: centerY + this.offsetY,\r\n        startAngle,\r\n        endAngle: startAngle + circumference,\r\n        circumference,\r\n        outerRadius,\r\n        innerRadius\r\n      };\r\n      if (includeOptions) {\r\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\r\n      }\r\n      startAngle += circumference;\r\n      this.updateElement(arc, i, properties, mode);\r\n    }\r\n  }\r\n  calculateTotal() {\r\n    const meta = this._cachedMeta;\r\n    const metaData = meta.data;\r\n    let total = 0;\r\n    let i;\r\n    for (i = 0; i < metaData.length; i++) {\r\n      const value = meta._parsed[i];\r\n      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\r\n        total += Math.abs(value);\r\n      }\r\n    }\r\n    return total;\r\n  }\r\n  calculateCircumference(value) {\r\n    const total = this._cachedMeta.total;\r\n    if (total > 0 && !isNaN(value)) {\r\n      return TAU * (Math.abs(value) / total);\r\n    }\r\n    return 0;\r\n  }\r\n  getLabelAndValue(index) {\r\n    const meta = this._cachedMeta;\r\n    const chart = this.chart;\r\n    const labels = chart.data.labels || [];\r\n    const value = formatNumber(meta._parsed[index], chart.options.locale);\r\n    return {\r\n      label: labels[index] || '',\r\n      value,\r\n    };\r\n  }\r\n  getMaxBorderWidth(arcs) {\r\n    let max = 0;\r\n    const chart = this.chart;\r\n    let i, ilen, meta, controller, options;\r\n    if (!arcs) {\r\n      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\r\n        if (chart.isDatasetVisible(i)) {\r\n          meta = chart.getDatasetMeta(i);\r\n          arcs = meta.data;\r\n          controller = meta.controller;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (!arcs) {\r\n      return 0;\r\n    }\r\n    for (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n      options = controller.resolveDataElementOptions(i);\r\n      if (options.borderAlign !== 'inner') {\r\n        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\r\n      }\r\n    }\r\n    return max;\r\n  }\r\n  getMaxOffset(arcs) {\r\n    let max = 0;\r\n    for (let i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n      const options = this.resolveDataElementOptions(i);\r\n      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\r\n    }\r\n    return max;\r\n  }\r\n  _getRingWeightOffset(datasetIndex) {\r\n    let ringWeightOffset = 0;\r\n    for (let i = 0; i < datasetIndex; ++i) {\r\n      if (this.chart.isDatasetVisible(i)) {\r\n        ringWeightOffset += this._getRingWeight(i);\r\n      }\r\n    }\r\n    return ringWeightOffset;\r\n  }\r\n  _getRingWeight(datasetIndex) {\r\n    return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\r\n  }\r\n  _getVisibleDatasetWeightTotal() {\r\n    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\r\n  }\r\n}\r\nDoughnutController.id = 'doughnut';\r\nDoughnutController.defaults = {\r\n  datasetElementType: false,\r\n  dataElementType: 'arc',\r\n  animation: {\r\n    animateRotate: true,\r\n    animateScale: false\r\n  },\r\n  animations: {\r\n    numbers: {\r\n      type: 'number',\r\n      properties: ['circumference', 'endAngle', 'innerRadius', 'outerRadius', 'startAngle', 'x', 'y', 'offset', 'borderWidth', 'spacing']\r\n    },\r\n  },\r\n  cutout: '50%',\r\n  rotation: 0,\r\n  circumference: 360,\r\n  radius: '100%',\r\n  spacing: 0,\r\n  indexAxis: 'r',\r\n};\r\nDoughnutController.descriptors = {\r\n  _scriptable: (name) => name !== 'spacing',\r\n  _indexable: (name) => name !== 'spacing',\r\n};\r\nDoughnutController.overrides = {\r\n  aspectRatio: 1,\r\n  plugins: {\r\n    legend: {\r\n      labels: {\r\n        generateLabels(chart) {\r\n          const data = chart.data;\r\n          if (data.labels.length && data.datasets.length) {\r\n            const {labels: {pointStyle}} = chart.legend.options;\r\n            return data.labels.map((label, i) => {\r\n              const meta = chart.getDatasetMeta(0);\r\n              const style = meta.controller.getStyle(i);\r\n              return {\r\n                text: label,\r\n                fillStyle: style.backgroundColor,\r\n                strokeStyle: style.borderColor,\r\n                lineWidth: style.borderWidth,\r\n                pointStyle: pointStyle,\r\n                hidden: !chart.getDataVisibility(i),\r\n                index: i\r\n              };\r\n            });\r\n          }\r\n          return [];\r\n        }\r\n      },\r\n      onClick(e, legendItem, legend) {\r\n        legend.chart.toggleDataVisibility(legendItem.index);\r\n        legend.chart.update();\r\n      }\r\n    },\r\n    tooltip: {\r\n      callbacks: {\r\n        title() {\r\n          return '';\r\n        },\r\n        label(tooltipItem) {\r\n          let dataLabel = tooltipItem.label;\r\n          const value = ': ' + tooltipItem.formattedValue;\r\n          if (isArray(dataLabel)) {\r\n            dataLabel = dataLabel.slice();\r\n            dataLabel[0] += value;\r\n          } else {\r\n            dataLabel += value;\r\n          }\r\n          return dataLabel;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nclass LineController extends DatasetController {\r\n  initialize() {\r\n    this.enableOptionSharing = true;\r\n    this.supportsDecimation = true;\r\n    super.initialize();\r\n  }\r\n  update(mode) {\r\n    const meta = this._cachedMeta;\r\n    const {dataset: line, data: points = [], _dataset} = meta;\r\n    const animationsDisabled = this.chart._animationsDisabled;\r\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\r\n    this._drawStart = start;\r\n    this._drawCount = count;\r\n    if (_scaleRangesChanged(meta)) {\r\n      start = 0;\r\n      count = points.length;\r\n    }\r\n    line._chart = this.chart;\r\n    line._datasetIndex = this.index;\r\n    line._decimated = !!_dataset._decimated;\r\n    line.points = points;\r\n    const options = this.resolveDatasetElementOptions(mode);\r\n    if (!this.options.showLine) {\r\n      options.borderWidth = 0;\r\n    }\r\n    options.segment = this.options.segment;\r\n    this.updateElement(line, undefined, {\r\n      animated: !animationsDisabled,\r\n      options\r\n    }, mode);\r\n    this.updateElements(points, start, count, mode);\r\n  }\r\n  updateElements(points, start, count, mode) {\r\n    const reset = mode === 'reset';\r\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\r\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\r\n    const iAxis = iScale.axis;\r\n    const vAxis = vScale.axis;\r\n    const {spanGaps, segment} = this.options;\r\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\r\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\r\n    let prevParsed = start > 0 && this.getParsed(start - 1);\r\n    for (let i = start; i < start + count; ++i) {\r\n      const point = points[i];\r\n      const parsed = this.getParsed(i);\r\n      const properties = directUpdate ? point : {};\r\n      const nullData = isNullOrUndef(parsed[vAxis]);\r\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\r\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\r\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\r\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\r\n      if (segment) {\r\n        properties.parsed = parsed;\r\n        properties.raw = _dataset.data[i];\r\n      }\r\n      if (includeOptions) {\r\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\r\n      }\r\n      if (!directUpdate) {\r\n        this.updateElement(point, i, properties, mode);\r\n      }\r\n      prevParsed = parsed;\r\n    }\r\n  }\r\n  getMaxOverflow() {\r\n    const meta = this._cachedMeta;\r\n    const dataset = meta.dataset;\r\n    const border = dataset.options && dataset.options.borderWidth || 0;\r\n    const data = meta.data || [];\r\n    if (!data.length) {\r\n      return border;\r\n    }\r\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\r\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\r\n    return Math.max(border, firstPoint, lastPoint) / 2;\r\n  }\r\n  draw() {\r\n    const meta = this._cachedMeta;\r\n    meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\r\n    super.draw();\r\n  }\r\n}\r\nLineController.id = 'line';\r\nLineController.defaults = {\r\n  datasetElementType: 'line',\r\n  dataElementType: 'point',\r\n  showLine: true,\r\n  spanGaps: false,\r\n};\r\nLineController.overrides = {\r\n  scales: {\r\n    _index_: {\r\n      type: 'category',\r\n    },\r\n    _value_: {\r\n      type: 'linear',\r\n    },\r\n  }\r\n};\r\n\r\nclass PolarAreaController extends DatasetController {\r\n  constructor(chart, datasetIndex) {\r\n    super(chart, datasetIndex);\r\n    this.innerRadius = undefined;\r\n    this.outerRadius = undefined;\r\n  }\r\n  getLabelAndValue(index) {\r\n    const meta = this._cachedMeta;\r\n    const chart = this.chart;\r\n    const labels = chart.data.labels || [];\r\n    const value = formatNumber(meta._parsed[index].r, chart.options.locale);\r\n    return {\r\n      label: labels[index] || '',\r\n      value,\r\n    };\r\n  }\r\n  parseObjectData(meta, data, start, count) {\r\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\r\n  }\r\n  update(mode) {\r\n    const arcs = this._cachedMeta.data;\r\n    this._updateRadius();\r\n    this.updateElements(arcs, 0, arcs.length, mode);\r\n  }\r\n  getMinMax() {\r\n    const meta = this._cachedMeta;\r\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\r\n    meta.data.forEach((element, index) => {\r\n      const parsed = this.getParsed(index).r;\r\n      if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\r\n        if (parsed < range.min) {\r\n          range.min = parsed;\r\n        }\r\n        if (parsed > range.max) {\r\n          range.max = parsed;\r\n        }\r\n      }\r\n    });\r\n    return range;\r\n  }\r\n  _updateRadius() {\r\n    const chart = this.chart;\r\n    const chartArea = chart.chartArea;\r\n    const opts = chart.options;\r\n    const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\r\n    const outerRadius = Math.max(minSize / 2, 0);\r\n    const innerRadius = Math.max(opts.cutoutPercentage ? (outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\r\n    const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\r\n    this.outerRadius = outerRadius - (radiusLength * this.index);\r\n    this.innerRadius = this.outerRadius - radiusLength;\r\n  }\r\n  updateElements(arcs, start, count, mode) {\r\n    const reset = mode === 'reset';\r\n    const chart = this.chart;\r\n    const opts = chart.options;\r\n    const animationOpts = opts.animation;\r\n    const scale = this._cachedMeta.rScale;\r\n    const centerX = scale.xCenter;\r\n    const centerY = scale.yCenter;\r\n    const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\r\n    let angle = datasetStartAngle;\r\n    let i;\r\n    const defaultAngle = 360 / this.countVisibleElements();\r\n    for (i = 0; i < start; ++i) {\r\n      angle += this._computeAngle(i, mode, defaultAngle);\r\n    }\r\n    for (i = start; i < start + count; i++) {\r\n      const arc = arcs[i];\r\n      let startAngle = angle;\r\n      let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\r\n      let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\r\n      angle = endAngle;\r\n      if (reset) {\r\n        if (animationOpts.animateScale) {\r\n          outerRadius = 0;\r\n        }\r\n        if (animationOpts.animateRotate) {\r\n          startAngle = endAngle = datasetStartAngle;\r\n        }\r\n      }\r\n      const properties = {\r\n        x: centerX,\r\n        y: centerY,\r\n        innerRadius: 0,\r\n        outerRadius,\r\n        startAngle,\r\n        endAngle,\r\n        options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\r\n      };\r\n      this.updateElement(arc, i, properties, mode);\r\n    }\r\n  }\r\n  countVisibleElements() {\r\n    const meta = this._cachedMeta;\r\n    let count = 0;\r\n    meta.data.forEach((element, index) => {\r\n      if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\r\n        count++;\r\n      }\r\n    });\r\n    return count;\r\n  }\r\n  _computeAngle(index, mode, defaultAngle) {\r\n    return this.chart.getDataVisibility(index)\r\n      ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle)\r\n      : 0;\r\n  }\r\n}\r\nPolarAreaController.id = 'polarArea';\r\nPolarAreaController.defaults = {\r\n  dataElementType: 'arc',\r\n  animation: {\r\n    animateRotate: true,\r\n    animateScale: true\r\n  },\r\n  animations: {\r\n    numbers: {\r\n      type: 'number',\r\n      properties: ['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius']\r\n    },\r\n  },\r\n  indexAxis: 'r',\r\n  startAngle: 0,\r\n};\r\nPolarAreaController.overrides = {\r\n  aspectRatio: 1,\r\n  plugins: {\r\n    legend: {\r\n      labels: {\r\n        generateLabels(chart) {\r\n          const data = chart.data;\r\n          if (data.labels.length && data.datasets.length) {\r\n            const {labels: {pointStyle}} = chart.legend.options;\r\n            return data.labels.map((label, i) => {\r\n              const meta = chart.getDatasetMeta(0);\r\n              const style = meta.controller.getStyle(i);\r\n              return {\r\n                text: label,\r\n                fillStyle: style.backgroundColor,\r\n                strokeStyle: style.borderColor,\r\n                lineWidth: style.borderWidth,\r\n                pointStyle: pointStyle,\r\n                hidden: !chart.getDataVisibility(i),\r\n                index: i\r\n              };\r\n            });\r\n          }\r\n          return [];\r\n        }\r\n      },\r\n      onClick(e, legendItem, legend) {\r\n        legend.chart.toggleDataVisibility(legendItem.index);\r\n        legend.chart.update();\r\n      }\r\n    },\r\n    tooltip: {\r\n      callbacks: {\r\n        title() {\r\n          return '';\r\n        },\r\n        label(context) {\r\n          return context.chart.data.labels[context.dataIndex] + ': ' + context.formattedValue;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  scales: {\r\n    r: {\r\n      type: 'radialLinear',\r\n      angleLines: {\r\n        display: false\r\n      },\r\n      beginAtZero: true,\r\n      grid: {\r\n        circular: true\r\n      },\r\n      pointLabels: {\r\n        display: false\r\n      },\r\n      startAngle: 0\r\n    }\r\n  }\r\n};\r\n\r\nclass PieController extends DoughnutController {\r\n}\r\nPieController.id = 'pie';\r\nPieController.defaults = {\r\n  cutout: 0,\r\n  rotation: 0,\r\n  circumference: 360,\r\n  radius: '100%'\r\n};\r\n\r\nclass RadarController extends DatasetController {\r\n  getLabelAndValue(index) {\r\n    const vScale = this._cachedMeta.vScale;\r\n    const parsed = this.getParsed(index);\r\n    return {\r\n      label: vScale.getLabels()[index],\r\n      value: '' + vScale.getLabelForValue(parsed[vScale.axis])\r\n    };\r\n  }\r\n  parseObjectData(meta, data, start, count) {\r\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\r\n  }\r\n  update(mode) {\r\n    const meta = this._cachedMeta;\r\n    const line = meta.dataset;\r\n    const points = meta.data || [];\r\n    const labels = meta.iScale.getLabels();\r\n    line.points = points;\r\n    if (mode !== 'resize') {\r\n      const options = this.resolveDatasetElementOptions(mode);\r\n      if (!this.options.showLine) {\r\n        options.borderWidth = 0;\r\n      }\r\n      const properties = {\r\n        _loop: true,\r\n        _fullLoop: labels.length === points.length,\r\n        options\r\n      };\r\n      this.updateElement(line, undefined, properties, mode);\r\n    }\r\n    this.updateElements(points, 0, points.length, mode);\r\n  }\r\n  updateElements(points, start, count, mode) {\r\n    const scale = this._cachedMeta.rScale;\r\n    const reset = mode === 'reset';\r\n    for (let i = start; i < start + count; i++) {\r\n      const point = points[i];\r\n      const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\r\n      const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\r\n      const x = reset ? scale.xCenter : pointPosition.x;\r\n      const y = reset ? scale.yCenter : pointPosition.y;\r\n      const properties = {\r\n        x,\r\n        y,\r\n        angle: pointPosition.angle,\r\n        skip: isNaN(x) || isNaN(y),\r\n        options\r\n      };\r\n      this.updateElement(point, i, properties, mode);\r\n    }\r\n  }\r\n}\r\nRadarController.id = 'radar';\r\nRadarController.defaults = {\r\n  datasetElementType: 'line',\r\n  dataElementType: 'point',\r\n  indexAxis: 'r',\r\n  showLine: true,\r\n  elements: {\r\n    line: {\r\n      fill: 'start'\r\n    }\r\n  },\r\n};\r\nRadarController.overrides = {\r\n  aspectRatio: 1,\r\n  scales: {\r\n    r: {\r\n      type: 'radialLinear',\r\n    }\r\n  }\r\n};\r\n\r\nclass Element {\r\n  constructor() {\r\n    this.x = undefined;\r\n    this.y = undefined;\r\n    this.active = false;\r\n    this.options = undefined;\r\n    this.$animations = undefined;\r\n  }\r\n  tooltipPosition(useFinalPosition) {\r\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\r\n    return {x, y};\r\n  }\r\n  hasValue() {\r\n    return isNumber(this.x) && isNumber(this.y);\r\n  }\r\n  getProps(props, final) {\r\n    const anims = this.$animations;\r\n    if (!final || !anims) {\r\n      return this;\r\n    }\r\n    const ret = {};\r\n    props.forEach(prop => {\r\n      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop];\r\n    });\r\n    return ret;\r\n  }\r\n}\r\nElement.defaults = {};\r\nElement.defaultRoutes = undefined;\r\n\r\nconst formatters = {\r\n  values(value) {\r\n    return isArray(value) ? value : '' + value;\r\n  },\r\n  numeric(tickValue, index, ticks) {\r\n    if (tickValue === 0) {\r\n      return '0';\r\n    }\r\n    const locale = this.chart.options.locale;\r\n    let notation;\r\n    let delta = tickValue;\r\n    if (ticks.length > 1) {\r\n      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\r\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\r\n        notation = 'scientific';\r\n      }\r\n      delta = calculateDelta(tickValue, ticks);\r\n    }\r\n    const logDelta = log10(Math.abs(delta));\r\n    const numDecimal = Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\r\n    const options = {notation, minimumFractionDigits: numDecimal, maximumFractionDigits: numDecimal};\r\n    Object.assign(options, this.options.ticks.format);\r\n    return formatNumber(tickValue, locale, options);\r\n  },\r\n  logarithmic(tickValue, index, ticks) {\r\n    if (tickValue === 0) {\r\n      return '0';\r\n    }\r\n    const remain = tickValue / (Math.pow(10, Math.floor(log10(tickValue))));\r\n    if (remain === 1 || remain === 2 || remain === 5) {\r\n      return formatters.numeric.call(this, tickValue, index, ticks);\r\n    }\r\n    return '';\r\n  }\r\n};\r\nfunction calculateDelta(tickValue, ticks) {\r\n  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\r\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\r\n    delta = tickValue - Math.floor(tickValue);\r\n  }\r\n  return delta;\r\n}\r\nvar Ticks = {formatters};\r\n\r\ndefaults.set('scale', {\r\n  display: true,\r\n  offset: false,\r\n  reverse: false,\r\n  beginAtZero: false,\r\n  bounds: 'ticks',\r\n  grace: 0,\r\n  grid: {\r\n    display: true,\r\n    lineWidth: 1,\r\n    drawBorder: true,\r\n    drawOnChartArea: true,\r\n    drawTicks: true,\r\n    tickLength: 8,\r\n    tickWidth: (_ctx, options) => options.lineWidth,\r\n    tickColor: (_ctx, options) => options.color,\r\n    offset: false,\r\n    borderDash: [],\r\n    borderDashOffset: 0.0,\r\n    borderWidth: 1\r\n  },\r\n  title: {\r\n    display: false,\r\n    text: '',\r\n    padding: {\r\n      top: 4,\r\n      bottom: 4\r\n    }\r\n  },\r\n  ticks: {\r\n    minRotation: 0,\r\n    maxRotation: 50,\r\n    mirror: false,\r\n    textStrokeWidth: 0,\r\n    textStrokeColor: '',\r\n    padding: 3,\r\n    display: true,\r\n    autoSkip: true,\r\n    autoSkipPadding: 3,\r\n    labelOffset: 0,\r\n    callback: Ticks.formatters.values,\r\n    minor: {},\r\n    major: {},\r\n    align: 'center',\r\n    crossAlign: 'near',\r\n    showLabelBackdrop: false,\r\n    backdropColor: 'rgba(255, 255, 255, 0.75)',\r\n    backdropPadding: 2,\r\n  }\r\n});\r\ndefaults.route('scale.ticks', 'color', '', 'color');\r\ndefaults.route('scale.grid', 'color', '', 'borderColor');\r\ndefaults.route('scale.grid', 'borderColor', '', 'borderColor');\r\ndefaults.route('scale.title', 'color', '', 'color');\r\ndefaults.describe('scale', {\r\n  _fallback: false,\r\n  _scriptable: (name) => !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\r\n  _indexable: (name) => name !== 'borderDash' && name !== 'tickBorderDash',\r\n});\r\ndefaults.describe('scales', {\r\n  _fallback: 'scale',\r\n});\r\ndefaults.describe('scale.ticks', {\r\n  _scriptable: (name) => name !== 'backdropPadding' && name !== 'callback',\r\n  _indexable: (name) => name !== 'backdropPadding',\r\n});\r\n\r\nfunction autoSkip(scale, ticks) {\r\n  const tickOpts = scale.options.ticks;\r\n  const ticksLimit = tickOpts.maxTicksLimit || determineMaxTicks(scale);\r\n  const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\r\n  const numMajorIndices = majorIndices.length;\r\n  const first = majorIndices[0];\r\n  const last = majorIndices[numMajorIndices - 1];\r\n  const newTicks = [];\r\n  if (numMajorIndices > ticksLimit) {\r\n    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\r\n    return newTicks;\r\n  }\r\n  const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\r\n  if (numMajorIndices > 0) {\r\n    let i, ilen;\r\n    const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\r\n    skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\r\n    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\r\n      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\r\n    }\r\n    skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\r\n    return newTicks;\r\n  }\r\n  skip(ticks, newTicks, spacing);\r\n  return newTicks;\r\n}\r\nfunction determineMaxTicks(scale) {\r\n  const offset = scale.options.offset;\r\n  const tickLength = scale._tickSize();\r\n  const maxScale = scale._length / tickLength + (offset ? 0 : 1);\r\n  const maxChart = scale._maxLength / tickLength;\r\n  return Math.floor(Math.min(maxScale, maxChart));\r\n}\r\nfunction calculateSpacing(majorIndices, ticks, ticksLimit) {\r\n  const evenMajorSpacing = getEvenSpacing(majorIndices);\r\n  const spacing = ticks.length / ticksLimit;\r\n  if (!evenMajorSpacing) {\r\n    return Math.max(spacing, 1);\r\n  }\r\n  const factors = _factorize(evenMajorSpacing);\r\n  for (let i = 0, ilen = factors.length - 1; i < ilen; i++) {\r\n    const factor = factors[i];\r\n    if (factor > spacing) {\r\n      return factor;\r\n    }\r\n  }\r\n  return Math.max(spacing, 1);\r\n}\r\nfunction getMajorIndices(ticks) {\r\n  const result = [];\r\n  let i, ilen;\r\n  for (i = 0, ilen = ticks.length; i < ilen; i++) {\r\n    if (ticks[i].major) {\r\n      result.push(i);\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction skipMajors(ticks, newTicks, majorIndices, spacing) {\r\n  let count = 0;\r\n  let next = majorIndices[0];\r\n  let i;\r\n  spacing = Math.ceil(spacing);\r\n  for (i = 0; i < ticks.length; i++) {\r\n    if (i === next) {\r\n      newTicks.push(ticks[i]);\r\n      count++;\r\n      next = majorIndices[count * spacing];\r\n    }\r\n  }\r\n}\r\nfunction skip(ticks, newTicks, spacing, majorStart, majorEnd) {\r\n  const start = valueOrDefault(majorStart, 0);\r\n  const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\r\n  let count = 0;\r\n  let length, i, next;\r\n  spacing = Math.ceil(spacing);\r\n  if (majorEnd) {\r\n    length = majorEnd - majorStart;\r\n    spacing = length / Math.floor(length / spacing);\r\n  }\r\n  next = start;\r\n  while (next < 0) {\r\n    count++;\r\n    next = Math.round(start + count * spacing);\r\n  }\r\n  for (i = Math.max(start, 0); i < end; i++) {\r\n    if (i === next) {\r\n      newTicks.push(ticks[i]);\r\n      count++;\r\n      next = Math.round(start + count * spacing);\r\n    }\r\n  }\r\n}\r\nfunction getEvenSpacing(arr) {\r\n  const len = arr.length;\r\n  let i, diff;\r\n  if (len < 2) {\r\n    return false;\r\n  }\r\n  for (diff = arr[0], i = 1; i < len; ++i) {\r\n    if (arr[i] - arr[i - 1] !== diff) {\r\n      return false;\r\n    }\r\n  }\r\n  return diff;\r\n}\r\n\r\nconst reverseAlign = (align) => align === 'left' ? 'right' : align === 'right' ? 'left' : align;\r\nconst offsetFromEdge = (scale, edge, offset) => edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\r\nfunction sample(arr, numItems) {\r\n  const result = [];\r\n  const increment = arr.length / numItems;\r\n  const len = arr.length;\r\n  let i = 0;\r\n  for (; i < len; i += increment) {\r\n    result.push(arr[Math.floor(i)]);\r\n  }\r\n  return result;\r\n}\r\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\r\n  const length = scale.ticks.length;\r\n  const validIndex = Math.min(index, length - 1);\r\n  const start = scale._startPixel;\r\n  const end = scale._endPixel;\r\n  const epsilon = 1e-6;\r\n  let lineValue = scale.getPixelForTick(validIndex);\r\n  let offset;\r\n  if (offsetGridLines) {\r\n    if (length === 1) {\r\n      offset = Math.max(lineValue - start, end - lineValue);\r\n    } else if (index === 0) {\r\n      offset = (scale.getPixelForTick(1) - lineValue) / 2;\r\n    } else {\r\n      offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\r\n    }\r\n    lineValue += validIndex < index ? offset : -offset;\r\n    if (lineValue < start - epsilon || lineValue > end + epsilon) {\r\n      return;\r\n    }\r\n  }\r\n  return lineValue;\r\n}\r\nfunction garbageCollect(caches, length) {\r\n  each(caches, (cache) => {\r\n    const gc = cache.gc;\r\n    const gcLen = gc.length / 2;\r\n    let i;\r\n    if (gcLen > length) {\r\n      for (i = 0; i < gcLen; ++i) {\r\n        delete cache.data[gc[i]];\r\n      }\r\n      gc.splice(0, gcLen);\r\n    }\r\n  });\r\n}\r\nfunction getTickMarkLength(options) {\r\n  return options.drawTicks ? options.tickLength : 0;\r\n}\r\nfunction getTitleHeight(options, fallback) {\r\n  if (!options.display) {\r\n    return 0;\r\n  }\r\n  const font = toFont(options.font, fallback);\r\n  const padding = toPadding(options.padding);\r\n  const lines = isArray(options.text) ? options.text.length : 1;\r\n  return (lines * font.lineHeight) + padding.height;\r\n}\r\nfunction createScaleContext(parent, scale) {\r\n  return createContext(parent, {\r\n    scale,\r\n    type: 'scale'\r\n  });\r\n}\r\nfunction createTickContext(parent, index, tick) {\r\n  return createContext(parent, {\r\n    tick,\r\n    index,\r\n    type: 'tick'\r\n  });\r\n}\r\nfunction titleAlign(align, position, reverse) {\r\n  let ret = _toLeftRightCenter(align);\r\n  if ((reverse && position !== 'right') || (!reverse && position === 'right')) {\r\n    ret = reverseAlign(ret);\r\n  }\r\n  return ret;\r\n}\r\nfunction titleArgs(scale, offset, position, align) {\r\n  const {top, left, bottom, right, chart} = scale;\r\n  const {chartArea, scales} = chart;\r\n  let rotation = 0;\r\n  let maxWidth, titleX, titleY;\r\n  const height = bottom - top;\r\n  const width = right - left;\r\n  if (scale.isHorizontal()) {\r\n    titleX = _alignStartEnd(align, left, right);\r\n    if (isObject(position)) {\r\n      const positionAxisID = Object.keys(position)[0];\r\n      const value = position[positionAxisID];\r\n      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\r\n    } else if (position === 'center') {\r\n      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\r\n    } else {\r\n      titleY = offsetFromEdge(scale, position, offset);\r\n    }\r\n    maxWidth = right - left;\r\n  } else {\r\n    if (isObject(position)) {\r\n      const positionAxisID = Object.keys(position)[0];\r\n      const value = position[positionAxisID];\r\n      titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\r\n    } else if (position === 'center') {\r\n      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\r\n    } else {\r\n      titleX = offsetFromEdge(scale, position, offset);\r\n    }\r\n    titleY = _alignStartEnd(align, bottom, top);\r\n    rotation = position === 'left' ? -HALF_PI : HALF_PI;\r\n  }\r\n  return {titleX, titleY, maxWidth, rotation};\r\n}\r\nclass Scale extends Element {\r\n  constructor(cfg) {\r\n    super();\r\n    this.id = cfg.id;\r\n    this.type = cfg.type;\r\n    this.options = undefined;\r\n    this.ctx = cfg.ctx;\r\n    this.chart = cfg.chart;\r\n    this.top = undefined;\r\n    this.bottom = undefined;\r\n    this.left = undefined;\r\n    this.right = undefined;\r\n    this.width = undefined;\r\n    this.height = undefined;\r\n    this._margins = {\r\n      left: 0,\r\n      right: 0,\r\n      top: 0,\r\n      bottom: 0\r\n    };\r\n    this.maxWidth = undefined;\r\n    this.maxHeight = undefined;\r\n    this.paddingTop = undefined;\r\n    this.paddingBottom = undefined;\r\n    this.paddingLeft = undefined;\r\n    this.paddingRight = undefined;\r\n    this.axis = undefined;\r\n    this.labelRotation = undefined;\r\n    this.min = undefined;\r\n    this.max = undefined;\r\n    this._range = undefined;\r\n    this.ticks = [];\r\n    this._gridLineItems = null;\r\n    this._labelItems = null;\r\n    this._labelSizes = null;\r\n    this._length = 0;\r\n    this._maxLength = 0;\r\n    this._longestTextCache = {};\r\n    this._startPixel = undefined;\r\n    this._endPixel = undefined;\r\n    this._reversePixels = false;\r\n    this._userMax = undefined;\r\n    this._userMin = undefined;\r\n    this._suggestedMax = undefined;\r\n    this._suggestedMin = undefined;\r\n    this._ticksLength = 0;\r\n    this._borderValue = 0;\r\n    this._cache = {};\r\n    this._dataLimitsCached = false;\r\n    this.$context = undefined;\r\n  }\r\n  init(options) {\r\n    this.options = options.setContext(this.getContext());\r\n    this.axis = options.axis;\r\n    this._userMin = this.parse(options.min);\r\n    this._userMax = this.parse(options.max);\r\n    this._suggestedMin = this.parse(options.suggestedMin);\r\n    this._suggestedMax = this.parse(options.suggestedMax);\r\n  }\r\n  parse(raw, index) {\r\n    return raw;\r\n  }\r\n  getUserBounds() {\r\n    let {_userMin, _userMax, _suggestedMin, _suggestedMax} = this;\r\n    _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\r\n    _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\r\n    _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\r\n    _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\r\n    return {\r\n      min: finiteOrDefault(_userMin, _suggestedMin),\r\n      max: finiteOrDefault(_userMax, _suggestedMax),\r\n      minDefined: isNumberFinite(_userMin),\r\n      maxDefined: isNumberFinite(_userMax)\r\n    };\r\n  }\r\n  getMinMax(canStack) {\r\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\r\n    let range;\r\n    if (minDefined && maxDefined) {\r\n      return {min, max};\r\n    }\r\n    const metas = this.getMatchingVisibleMetas();\r\n    for (let i = 0, ilen = metas.length; i < ilen; ++i) {\r\n      range = metas[i].controller.getMinMax(this, canStack);\r\n      if (!minDefined) {\r\n        min = Math.min(min, range.min);\r\n      }\r\n      if (!maxDefined) {\r\n        max = Math.max(max, range.max);\r\n      }\r\n    }\r\n    min = maxDefined && min > max ? max : min;\r\n    max = minDefined && min > max ? min : max;\r\n    return {\r\n      min: finiteOrDefault(min, finiteOrDefault(max, min)),\r\n      max: finiteOrDefault(max, finiteOrDefault(min, max))\r\n    };\r\n  }\r\n  getPadding() {\r\n    return {\r\n      left: this.paddingLeft || 0,\r\n      top: this.paddingTop || 0,\r\n      right: this.paddingRight || 0,\r\n      bottom: this.paddingBottom || 0\r\n    };\r\n  }\r\n  getTicks() {\r\n    return this.ticks;\r\n  }\r\n  getLabels() {\r\n    const data = this.chart.data;\r\n    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\r\n  }\r\n  beforeLayout() {\r\n    this._cache = {};\r\n    this._dataLimitsCached = false;\r\n  }\r\n  beforeUpdate() {\r\n    callback(this.options.beforeUpdate, [this]);\r\n  }\r\n  update(maxWidth, maxHeight, margins) {\r\n    const {beginAtZero, grace, ticks: tickOpts} = this.options;\r\n    const sampleSize = tickOpts.sampleSize;\r\n    this.beforeUpdate();\r\n    this.maxWidth = maxWidth;\r\n    this.maxHeight = maxHeight;\r\n    this._margins = margins = Object.assign({\r\n      left: 0,\r\n      right: 0,\r\n      top: 0,\r\n      bottom: 0\r\n    }, margins);\r\n    this.ticks = null;\r\n    this._labelSizes = null;\r\n    this._gridLineItems = null;\r\n    this._labelItems = null;\r\n    this.beforeSetDimensions();\r\n    this.setDimensions();\r\n    this.afterSetDimensions();\r\n    this._maxLength = this.isHorizontal()\r\n      ? this.width + margins.left + margins.right\r\n      : this.height + margins.top + margins.bottom;\r\n    if (!this._dataLimitsCached) {\r\n      this.beforeDataLimits();\r\n      this.determineDataLimits();\r\n      this.afterDataLimits();\r\n      this._range = _addGrace(this, grace, beginAtZero);\r\n      this._dataLimitsCached = true;\r\n    }\r\n    this.beforeBuildTicks();\r\n    this.ticks = this.buildTicks() || [];\r\n    this.afterBuildTicks();\r\n    const samplingEnabled = sampleSize < this.ticks.length;\r\n    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\r\n    this.configure();\r\n    this.beforeCalculateLabelRotation();\r\n    this.calculateLabelRotation();\r\n    this.afterCalculateLabelRotation();\r\n    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\r\n      this.ticks = autoSkip(this, this.ticks);\r\n      this._labelSizes = null;\r\n      this.afterAutoSkip();\r\n    }\r\n    if (samplingEnabled) {\r\n      this._convertTicksToLabels(this.ticks);\r\n    }\r\n    this.beforeFit();\r\n    this.fit();\r\n    this.afterFit();\r\n    this.afterUpdate();\r\n  }\r\n  configure() {\r\n    let reversePixels = this.options.reverse;\r\n    let startPixel, endPixel;\r\n    if (this.isHorizontal()) {\r\n      startPixel = this.left;\r\n      endPixel = this.right;\r\n    } else {\r\n      startPixel = this.top;\r\n      endPixel = this.bottom;\r\n      reversePixels = !reversePixels;\r\n    }\r\n    this._startPixel = startPixel;\r\n    this._endPixel = endPixel;\r\n    this._reversePixels = reversePixels;\r\n    this._length = endPixel - startPixel;\r\n    this._alignToPixels = this.options.alignToPixels;\r\n  }\r\n  afterUpdate() {\r\n    callback(this.options.afterUpdate, [this]);\r\n  }\r\n  beforeSetDimensions() {\r\n    callback(this.options.beforeSetDimensions, [this]);\r\n  }\r\n  setDimensions() {\r\n    if (this.isHorizontal()) {\r\n      this.width = this.maxWidth;\r\n      this.left = 0;\r\n      this.right = this.width;\r\n    } else {\r\n      this.height = this.maxHeight;\r\n      this.top = 0;\r\n      this.bottom = this.height;\r\n    }\r\n    this.paddingLeft = 0;\r\n    this.paddingTop = 0;\r\n    this.paddingRight = 0;\r\n    this.paddingBottom = 0;\r\n  }\r\n  afterSetDimensions() {\r\n    callback(this.options.afterSetDimensions, [this]);\r\n  }\r\n  _callHooks(name) {\r\n    this.chart.notifyPlugins(name, this.getContext());\r\n    callback(this.options[name], [this]);\r\n  }\r\n  beforeDataLimits() {\r\n    this._callHooks('beforeDataLimits');\r\n  }\r\n  determineDataLimits() {}\r\n  afterDataLimits() {\r\n    this._callHooks('afterDataLimits');\r\n  }\r\n  beforeBuildTicks() {\r\n    this._callHooks('beforeBuildTicks');\r\n  }\r\n  buildTicks() {\r\n    return [];\r\n  }\r\n  afterBuildTicks() {\r\n    this._callHooks('afterBuildTicks');\r\n  }\r\n  beforeTickToLabelConversion() {\r\n    callback(this.options.beforeTickToLabelConversion, [this]);\r\n  }\r\n  generateTickLabels(ticks) {\r\n    const tickOpts = this.options.ticks;\r\n    let i, ilen, tick;\r\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\r\n      tick = ticks[i];\r\n      tick.label = callback(tickOpts.callback, [tick.value, i, ticks], this);\r\n    }\r\n  }\r\n  afterTickToLabelConversion() {\r\n    callback(this.options.afterTickToLabelConversion, [this]);\r\n  }\r\n  beforeCalculateLabelRotation() {\r\n    callback(this.options.beforeCalculateLabelRotation, [this]);\r\n  }\r\n  calculateLabelRotation() {\r\n    const options = this.options;\r\n    const tickOpts = options.ticks;\r\n    const numTicks = this.ticks.length;\r\n    const minRotation = tickOpts.minRotation || 0;\r\n    const maxRotation = tickOpts.maxRotation;\r\n    let labelRotation = minRotation;\r\n    let tickWidth, maxHeight, maxLabelDiagonal;\r\n    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\r\n      this.labelRotation = minRotation;\r\n      return;\r\n    }\r\n    const labelSizes = this._getLabelSizes();\r\n    const maxLabelWidth = labelSizes.widest.width;\r\n    const maxLabelHeight = labelSizes.highest.height;\r\n    const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\r\n    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\r\n    if (maxLabelWidth + 6 > tickWidth) {\r\n      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\r\n      maxHeight = this.maxHeight - getTickMarkLength(options.grid)\r\n\t\t\t\t- tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\r\n      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\r\n      labelRotation = toDegrees(Math.min(\r\n        Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)),\r\n        Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))\r\n      ));\r\n      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\r\n    }\r\n    this.labelRotation = labelRotation;\r\n  }\r\n  afterCalculateLabelRotation() {\r\n    callback(this.options.afterCalculateLabelRotation, [this]);\r\n  }\r\n  afterAutoSkip() {}\r\n  beforeFit() {\r\n    callback(this.options.beforeFit, [this]);\r\n  }\r\n  fit() {\r\n    const minSize = {\r\n      width: 0,\r\n      height: 0\r\n    };\r\n    const {chart, options: {ticks: tickOpts, title: titleOpts, grid: gridOpts}} = this;\r\n    const display = this._isVisible();\r\n    const isHorizontal = this.isHorizontal();\r\n    if (display) {\r\n      const titleHeight = getTitleHeight(titleOpts, chart.options.font);\r\n      if (isHorizontal) {\r\n        minSize.width = this.maxWidth;\r\n        minSize.height = getTickMarkLength(gridOpts) + titleHeight;\r\n      } else {\r\n        minSize.height = this.maxHeight;\r\n        minSize.width = getTickMarkLength(gridOpts) + titleHeight;\r\n      }\r\n      if (tickOpts.display && this.ticks.length) {\r\n        const {first, last, widest, highest} = this._getLabelSizes();\r\n        const tickPadding = tickOpts.padding * 2;\r\n        const angleRadians = toRadians(this.labelRotation);\r\n        const cos = Math.cos(angleRadians);\r\n        const sin = Math.sin(angleRadians);\r\n        if (isHorizontal) {\r\n          const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\r\n          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\r\n        } else {\r\n          const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\r\n          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\r\n        }\r\n        this._calculatePadding(first, last, sin, cos);\r\n      }\r\n    }\r\n    this._handleMargins();\r\n    if (isHorizontal) {\r\n      this.width = this._length = chart.width - this._margins.left - this._margins.right;\r\n      this.height = minSize.height;\r\n    } else {\r\n      this.width = minSize.width;\r\n      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\r\n    }\r\n  }\r\n  _calculatePadding(first, last, sin, cos) {\r\n    const {ticks: {align, padding}, position} = this.options;\r\n    const isRotated = this.labelRotation !== 0;\r\n    const labelsBelowTicks = position !== 'top' && this.axis === 'x';\r\n    if (this.isHorizontal()) {\r\n      const offsetLeft = this.getPixelForTick(0) - this.left;\r\n      const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\r\n      let paddingLeft = 0;\r\n      let paddingRight = 0;\r\n      if (isRotated) {\r\n        if (labelsBelowTicks) {\r\n          paddingLeft = cos * first.width;\r\n          paddingRight = sin * last.height;\r\n        } else {\r\n          paddingLeft = sin * first.height;\r\n          paddingRight = cos * last.width;\r\n        }\r\n      } else if (align === 'start') {\r\n        paddingRight = last.width;\r\n      } else if (align === 'end') {\r\n        paddingLeft = first.width;\r\n      } else if (align !== 'inner') {\r\n        paddingLeft = first.width / 2;\r\n        paddingRight = last.width / 2;\r\n      }\r\n      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\r\n      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\r\n    } else {\r\n      let paddingTop = last.height / 2;\r\n      let paddingBottom = first.height / 2;\r\n      if (align === 'start') {\r\n        paddingTop = 0;\r\n        paddingBottom = first.height;\r\n      } else if (align === 'end') {\r\n        paddingTop = last.height;\r\n        paddingBottom = 0;\r\n      }\r\n      this.paddingTop = paddingTop + padding;\r\n      this.paddingBottom = paddingBottom + padding;\r\n    }\r\n  }\r\n  _handleMargins() {\r\n    if (this._margins) {\r\n      this._margins.left = Math.max(this.paddingLeft, this._margins.left);\r\n      this._margins.top = Math.max(this.paddingTop, this._margins.top);\r\n      this._margins.right = Math.max(this.paddingRight, this._margins.right);\r\n      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\r\n    }\r\n  }\r\n  afterFit() {\r\n    callback(this.options.afterFit, [this]);\r\n  }\r\n  isHorizontal() {\r\n    const {axis, position} = this.options;\r\n    return position === 'top' || position === 'bottom' || axis === 'x';\r\n  }\r\n  isFullSize() {\r\n    return this.options.fullSize;\r\n  }\r\n  _convertTicksToLabels(ticks) {\r\n    this.beforeTickToLabelConversion();\r\n    this.generateTickLabels(ticks);\r\n    let i, ilen;\r\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\r\n      if (isNullOrUndef(ticks[i].label)) {\r\n        ticks.splice(i, 1);\r\n        ilen--;\r\n        i--;\r\n      }\r\n    }\r\n    this.afterTickToLabelConversion();\r\n  }\r\n  _getLabelSizes() {\r\n    let labelSizes = this._labelSizes;\r\n    if (!labelSizes) {\r\n      const sampleSize = this.options.ticks.sampleSize;\r\n      let ticks = this.ticks;\r\n      if (sampleSize < ticks.length) {\r\n        ticks = sample(ticks, sampleSize);\r\n      }\r\n      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length);\r\n    }\r\n    return labelSizes;\r\n  }\r\n  _computeLabelSizes(ticks, length) {\r\n    const {ctx, _longestTextCache: caches} = this;\r\n    const widths = [];\r\n    const heights = [];\r\n    let widestLabelSize = 0;\r\n    let highestLabelSize = 0;\r\n    let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\r\n    for (i = 0; i < length; ++i) {\r\n      label = ticks[i].label;\r\n      tickFont = this._resolveTickFontOptions(i);\r\n      ctx.font = fontString = tickFont.string;\r\n      cache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\r\n      lineHeight = tickFont.lineHeight;\r\n      width = height = 0;\r\n      if (!isNullOrUndef(label) && !isArray(label)) {\r\n        width = _measureText(ctx, cache.data, cache.gc, width, label);\r\n        height = lineHeight;\r\n      } else if (isArray(label)) {\r\n        for (j = 0, jlen = label.length; j < jlen; ++j) {\r\n          nestedLabel = label[j];\r\n          if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\r\n            width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\r\n            height += lineHeight;\r\n          }\r\n        }\r\n      }\r\n      widths.push(width);\r\n      heights.push(height);\r\n      widestLabelSize = Math.max(width, widestLabelSize);\r\n      highestLabelSize = Math.max(height, highestLabelSize);\r\n    }\r\n    garbageCollect(caches, length);\r\n    const widest = widths.indexOf(widestLabelSize);\r\n    const highest = heights.indexOf(highestLabelSize);\r\n    const valueAt = (idx) => ({width: widths[idx] || 0, height: heights[idx] || 0});\r\n    return {\r\n      first: valueAt(0),\r\n      last: valueAt(length - 1),\r\n      widest: valueAt(widest),\r\n      highest: valueAt(highest),\r\n      widths,\r\n      heights,\r\n    };\r\n  }\r\n  getLabelForValue(value) {\r\n    return value;\r\n  }\r\n  getPixelForValue(value, index) {\r\n    return NaN;\r\n  }\r\n  getValueForPixel(pixel) {}\r\n  getPixelForTick(index) {\r\n    const ticks = this.ticks;\r\n    if (index < 0 || index > ticks.length - 1) {\r\n      return null;\r\n    }\r\n    return this.getPixelForValue(ticks[index].value);\r\n  }\r\n  getPixelForDecimal(decimal) {\r\n    if (this._reversePixels) {\r\n      decimal = 1 - decimal;\r\n    }\r\n    const pixel = this._startPixel + decimal * this._length;\r\n    return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\r\n  }\r\n  getDecimalForPixel(pixel) {\r\n    const decimal = (pixel - this._startPixel) / this._length;\r\n    return this._reversePixels ? 1 - decimal : decimal;\r\n  }\r\n  getBasePixel() {\r\n    return this.getPixelForValue(this.getBaseValue());\r\n  }\r\n  getBaseValue() {\r\n    const {min, max} = this;\r\n    return min < 0 && max < 0 ? max :\r\n      min > 0 && max > 0 ? min :\r\n      0;\r\n  }\r\n  getContext(index) {\r\n    const ticks = this.ticks || [];\r\n    if (index >= 0 && index < ticks.length) {\r\n      const tick = ticks[index];\r\n      return tick.$context ||\r\n\t\t\t\t(tick.$context = createTickContext(this.getContext(), index, tick));\r\n    }\r\n    return this.$context ||\r\n\t\t\t(this.$context = createScaleContext(this.chart.getContext(), this));\r\n  }\r\n  _tickSize() {\r\n    const optionTicks = this.options.ticks;\r\n    const rot = toRadians(this.labelRotation);\r\n    const cos = Math.abs(Math.cos(rot));\r\n    const sin = Math.abs(Math.sin(rot));\r\n    const labelSizes = this._getLabelSizes();\r\n    const padding = optionTicks.autoSkipPadding || 0;\r\n    const w = labelSizes ? labelSizes.widest.width + padding : 0;\r\n    const h = labelSizes ? labelSizes.highest.height + padding : 0;\r\n    return this.isHorizontal()\r\n      ? h * cos > w * sin ? w / cos : h / sin\r\n      : h * sin < w * cos ? h / cos : w / sin;\r\n  }\r\n  _isVisible() {\r\n    const display = this.options.display;\r\n    if (display !== 'auto') {\r\n      return !!display;\r\n    }\r\n    return this.getMatchingVisibleMetas().length > 0;\r\n  }\r\n  _computeGridLineItems(chartArea) {\r\n    const axis = this.axis;\r\n    const chart = this.chart;\r\n    const options = this.options;\r\n    const {grid, position} = options;\r\n    const offset = grid.offset;\r\n    const isHorizontal = this.isHorizontal();\r\n    const ticks = this.ticks;\r\n    const ticksLength = ticks.length + (offset ? 1 : 0);\r\n    const tl = getTickMarkLength(grid);\r\n    const items = [];\r\n    const borderOpts = grid.setContext(this.getContext());\r\n    const axisWidth = borderOpts.drawBorder ? borderOpts.borderWidth : 0;\r\n    const axisHalfWidth = axisWidth / 2;\r\n    const alignBorderValue = function(pixel) {\r\n      return _alignPixel(chart, pixel, axisWidth);\r\n    };\r\n    let borderValue, i, lineValue, alignedLineValue;\r\n    let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\r\n    if (position === 'top') {\r\n      borderValue = alignBorderValue(this.bottom);\r\n      ty1 = this.bottom - tl;\r\n      ty2 = borderValue - axisHalfWidth;\r\n      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\r\n      y2 = chartArea.bottom;\r\n    } else if (position === 'bottom') {\r\n      borderValue = alignBorderValue(this.top);\r\n      y1 = chartArea.top;\r\n      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\r\n      ty1 = borderValue + axisHalfWidth;\r\n      ty2 = this.top + tl;\r\n    } else if (position === 'left') {\r\n      borderValue = alignBorderValue(this.right);\r\n      tx1 = this.right - tl;\r\n      tx2 = borderValue - axisHalfWidth;\r\n      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\r\n      x2 = chartArea.right;\r\n    } else if (position === 'right') {\r\n      borderValue = alignBorderValue(this.left);\r\n      x1 = chartArea.left;\r\n      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\r\n      tx1 = borderValue + axisHalfWidth;\r\n      tx2 = this.left + tl;\r\n    } else if (axis === 'x') {\r\n      if (position === 'center') {\r\n        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\r\n      } else if (isObject(position)) {\r\n        const positionAxisID = Object.keys(position)[0];\r\n        const value = position[positionAxisID];\r\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\r\n      }\r\n      y1 = chartArea.top;\r\n      y2 = chartArea.bottom;\r\n      ty1 = borderValue + axisHalfWidth;\r\n      ty2 = ty1 + tl;\r\n    } else if (axis === 'y') {\r\n      if (position === 'center') {\r\n        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\r\n      } else if (isObject(position)) {\r\n        const positionAxisID = Object.keys(position)[0];\r\n        const value = position[positionAxisID];\r\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\r\n      }\r\n      tx1 = borderValue - axisHalfWidth;\r\n      tx2 = tx1 - tl;\r\n      x1 = chartArea.left;\r\n      x2 = chartArea.right;\r\n    }\r\n    const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\r\n    const step = Math.max(1, Math.ceil(ticksLength / limit));\r\n    for (i = 0; i < ticksLength; i += step) {\r\n      const optsAtIndex = grid.setContext(this.getContext(i));\r\n      const lineWidth = optsAtIndex.lineWidth;\r\n      const lineColor = optsAtIndex.color;\r\n      const borderDash = optsAtIndex.borderDash || [];\r\n      const borderDashOffset = optsAtIndex.borderDashOffset;\r\n      const tickWidth = optsAtIndex.tickWidth;\r\n      const tickColor = optsAtIndex.tickColor;\r\n      const tickBorderDash = optsAtIndex.tickBorderDash || [];\r\n      const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\r\n      lineValue = getPixelForGridLine(this, i, offset);\r\n      if (lineValue === undefined) {\r\n        continue;\r\n      }\r\n      alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\r\n      if (isHorizontal) {\r\n        tx1 = tx2 = x1 = x2 = alignedLineValue;\r\n      } else {\r\n        ty1 = ty2 = y1 = y2 = alignedLineValue;\r\n      }\r\n      items.push({\r\n        tx1,\r\n        ty1,\r\n        tx2,\r\n        ty2,\r\n        x1,\r\n        y1,\r\n        x2,\r\n        y2,\r\n        width: lineWidth,\r\n        color: lineColor,\r\n        borderDash,\r\n        borderDashOffset,\r\n        tickWidth,\r\n        tickColor,\r\n        tickBorderDash,\r\n        tickBorderDashOffset,\r\n      });\r\n    }\r\n    this._ticksLength = ticksLength;\r\n    this._borderValue = borderValue;\r\n    return items;\r\n  }\r\n  _computeLabelItems(chartArea) {\r\n    const axis = this.axis;\r\n    const options = this.options;\r\n    const {position, ticks: optionTicks} = options;\r\n    const isHorizontal = this.isHorizontal();\r\n    const ticks = this.ticks;\r\n    const {align, crossAlign, padding, mirror} = optionTicks;\r\n    const tl = getTickMarkLength(options.grid);\r\n    const tickAndPadding = tl + padding;\r\n    const hTickAndPadding = mirror ? -padding : tickAndPadding;\r\n    const rotation = -toRadians(this.labelRotation);\r\n    const items = [];\r\n    let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\r\n    let textBaseline = 'middle';\r\n    if (position === 'top') {\r\n      y = this.bottom - hTickAndPadding;\r\n      textAlign = this._getXAxisLabelAlignment();\r\n    } else if (position === 'bottom') {\r\n      y = this.top + hTickAndPadding;\r\n      textAlign = this._getXAxisLabelAlignment();\r\n    } else if (position === 'left') {\r\n      const ret = this._getYAxisLabelAlignment(tl);\r\n      textAlign = ret.textAlign;\r\n      x = ret.x;\r\n    } else if (position === 'right') {\r\n      const ret = this._getYAxisLabelAlignment(tl);\r\n      textAlign = ret.textAlign;\r\n      x = ret.x;\r\n    } else if (axis === 'x') {\r\n      if (position === 'center') {\r\n        y = ((chartArea.top + chartArea.bottom) / 2) + tickAndPadding;\r\n      } else if (isObject(position)) {\r\n        const positionAxisID = Object.keys(position)[0];\r\n        const value = position[positionAxisID];\r\n        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\r\n      }\r\n      textAlign = this._getXAxisLabelAlignment();\r\n    } else if (axis === 'y') {\r\n      if (position === 'center') {\r\n        x = ((chartArea.left + chartArea.right) / 2) - tickAndPadding;\r\n      } else if (isObject(position)) {\r\n        const positionAxisID = Object.keys(position)[0];\r\n        const value = position[positionAxisID];\r\n        x = this.chart.scales[positionAxisID].getPixelForValue(value);\r\n      }\r\n      textAlign = this._getYAxisLabelAlignment(tl).textAlign;\r\n    }\r\n    if (axis === 'y') {\r\n      if (align === 'start') {\r\n        textBaseline = 'top';\r\n      } else if (align === 'end') {\r\n        textBaseline = 'bottom';\r\n      }\r\n    }\r\n    const labelSizes = this._getLabelSizes();\r\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n      tick = ticks[i];\r\n      label = tick.label;\r\n      const optsAtIndex = optionTicks.setContext(this.getContext(i));\r\n      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\r\n      font = this._resolveTickFontOptions(i);\r\n      lineHeight = font.lineHeight;\r\n      lineCount = isArray(label) ? label.length : 1;\r\n      const halfCount = lineCount / 2;\r\n      const color = optsAtIndex.color;\r\n      const strokeColor = optsAtIndex.textStrokeColor;\r\n      const strokeWidth = optsAtIndex.textStrokeWidth;\r\n      let tickTextAlign = textAlign;\r\n      if (isHorizontal) {\r\n        x = pixel;\r\n        if (textAlign === 'inner') {\r\n          if (i === ilen - 1) {\r\n            tickTextAlign = !this.options.reverse ? 'right' : 'left';\r\n          } else if (i === 0) {\r\n            tickTextAlign = !this.options.reverse ? 'left' : 'right';\r\n          } else {\r\n            tickTextAlign = 'center';\r\n          }\r\n        }\r\n        if (position === 'top') {\r\n          if (crossAlign === 'near' || rotation !== 0) {\r\n            textOffset = -lineCount * lineHeight + lineHeight / 2;\r\n          } else if (crossAlign === 'center') {\r\n            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\r\n          } else {\r\n            textOffset = -labelSizes.highest.height + lineHeight / 2;\r\n          }\r\n        } else {\r\n          if (crossAlign === 'near' || rotation !== 0) {\r\n            textOffset = lineHeight / 2;\r\n          } else if (crossAlign === 'center') {\r\n            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\r\n          } else {\r\n            textOffset = labelSizes.highest.height - lineCount * lineHeight;\r\n          }\r\n        }\r\n        if (mirror) {\r\n          textOffset *= -1;\r\n        }\r\n      } else {\r\n        y = pixel;\r\n        textOffset = (1 - lineCount) * lineHeight / 2;\r\n      }\r\n      let backdrop;\r\n      if (optsAtIndex.showLabelBackdrop) {\r\n        const labelPadding = toPadding(optsAtIndex.backdropPadding);\r\n        const height = labelSizes.heights[i];\r\n        const width = labelSizes.widths[i];\r\n        let top = y + textOffset - labelPadding.top;\r\n        let left = x - labelPadding.left;\r\n        switch (textBaseline) {\r\n        case 'middle':\r\n          top -= height / 2;\r\n          break;\r\n        case 'bottom':\r\n          top -= height;\r\n          break;\r\n        }\r\n        switch (textAlign) {\r\n        case 'center':\r\n          left -= width / 2;\r\n          break;\r\n        case 'right':\r\n          left -= width;\r\n          break;\r\n        }\r\n        backdrop = {\r\n          left,\r\n          top,\r\n          width: width + labelPadding.width,\r\n          height: height + labelPadding.height,\r\n          color: optsAtIndex.backdropColor,\r\n        };\r\n      }\r\n      items.push({\r\n        rotation,\r\n        label,\r\n        font,\r\n        color,\r\n        strokeColor,\r\n        strokeWidth,\r\n        textOffset,\r\n        textAlign: tickTextAlign,\r\n        textBaseline,\r\n        translation: [x, y],\r\n        backdrop,\r\n      });\r\n    }\r\n    return items;\r\n  }\r\n  _getXAxisLabelAlignment() {\r\n    const {position, ticks} = this.options;\r\n    const rotation = -toRadians(this.labelRotation);\r\n    if (rotation) {\r\n      return position === 'top' ? 'left' : 'right';\r\n    }\r\n    let align = 'center';\r\n    if (ticks.align === 'start') {\r\n      align = 'left';\r\n    } else if (ticks.align === 'end') {\r\n      align = 'right';\r\n    } else if (ticks.align === 'inner') {\r\n      align = 'inner';\r\n    }\r\n    return align;\r\n  }\r\n  _getYAxisLabelAlignment(tl) {\r\n    const {position, ticks: {crossAlign, mirror, padding}} = this.options;\r\n    const labelSizes = this._getLabelSizes();\r\n    const tickAndPadding = tl + padding;\r\n    const widest = labelSizes.widest.width;\r\n    let textAlign;\r\n    let x;\r\n    if (position === 'left') {\r\n      if (mirror) {\r\n        x = this.right + padding;\r\n        if (crossAlign === 'near') {\r\n          textAlign = 'left';\r\n        } else if (crossAlign === 'center') {\r\n          textAlign = 'center';\r\n          x += (widest / 2);\r\n        } else {\r\n          textAlign = 'right';\r\n          x += widest;\r\n        }\r\n      } else {\r\n        x = this.right - tickAndPadding;\r\n        if (crossAlign === 'near') {\r\n          textAlign = 'right';\r\n        } else if (crossAlign === 'center') {\r\n          textAlign = 'center';\r\n          x -= (widest / 2);\r\n        } else {\r\n          textAlign = 'left';\r\n          x = this.left;\r\n        }\r\n      }\r\n    } else if (position === 'right') {\r\n      if (mirror) {\r\n        x = this.left + padding;\r\n        if (crossAlign === 'near') {\r\n          textAlign = 'right';\r\n        } else if (crossAlign === 'center') {\r\n          textAlign = 'center';\r\n          x -= (widest / 2);\r\n        } else {\r\n          textAlign = 'left';\r\n          x -= widest;\r\n        }\r\n      } else {\r\n        x = this.left + tickAndPadding;\r\n        if (crossAlign === 'near') {\r\n          textAlign = 'left';\r\n        } else if (crossAlign === 'center') {\r\n          textAlign = 'center';\r\n          x += widest / 2;\r\n        } else {\r\n          textAlign = 'right';\r\n          x = this.right;\r\n        }\r\n      }\r\n    } else {\r\n      textAlign = 'right';\r\n    }\r\n    return {textAlign, x};\r\n  }\r\n  _computeLabelArea() {\r\n    if (this.options.ticks.mirror) {\r\n      return;\r\n    }\r\n    const chart = this.chart;\r\n    const position = this.options.position;\r\n    if (position === 'left' || position === 'right') {\r\n      return {top: 0, left: this.left, bottom: chart.height, right: this.right};\r\n    } if (position === 'top' || position === 'bottom') {\r\n      return {top: this.top, left: 0, bottom: this.bottom, right: chart.width};\r\n    }\r\n  }\r\n  drawBackground() {\r\n    const {ctx, options: {backgroundColor}, left, top, width, height} = this;\r\n    if (backgroundColor) {\r\n      ctx.save();\r\n      ctx.fillStyle = backgroundColor;\r\n      ctx.fillRect(left, top, width, height);\r\n      ctx.restore();\r\n    }\r\n  }\r\n  getLineWidthForValue(value) {\r\n    const grid = this.options.grid;\r\n    if (!this._isVisible() || !grid.display) {\r\n      return 0;\r\n    }\r\n    const ticks = this.ticks;\r\n    const index = ticks.findIndex(t => t.value === value);\r\n    if (index >= 0) {\r\n      const opts = grid.setContext(this.getContext(index));\r\n      return opts.lineWidth;\r\n    }\r\n    return 0;\r\n  }\r\n  drawGrid(chartArea) {\r\n    const grid = this.options.grid;\r\n    const ctx = this.ctx;\r\n    const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\r\n    let i, ilen;\r\n    const drawLine = (p1, p2, style) => {\r\n      if (!style.width || !style.color) {\r\n        return;\r\n      }\r\n      ctx.save();\r\n      ctx.lineWidth = style.width;\r\n      ctx.strokeStyle = style.color;\r\n      ctx.setLineDash(style.borderDash || []);\r\n      ctx.lineDashOffset = style.borderDashOffset;\r\n      ctx.beginPath();\r\n      ctx.moveTo(p1.x, p1.y);\r\n      ctx.lineTo(p2.x, p2.y);\r\n      ctx.stroke();\r\n      ctx.restore();\r\n    };\r\n    if (grid.display) {\r\n      for (i = 0, ilen = items.length; i < ilen; ++i) {\r\n        const item = items[i];\r\n        if (grid.drawOnChartArea) {\r\n          drawLine(\r\n            {x: item.x1, y: item.y1},\r\n            {x: item.x2, y: item.y2},\r\n            item\r\n          );\r\n        }\r\n        if (grid.drawTicks) {\r\n          drawLine(\r\n            {x: item.tx1, y: item.ty1},\r\n            {x: item.tx2, y: item.ty2},\r\n            {\r\n              color: item.tickColor,\r\n              width: item.tickWidth,\r\n              borderDash: item.tickBorderDash,\r\n              borderDashOffset: item.tickBorderDashOffset\r\n            }\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  drawBorder() {\r\n    const {chart, ctx, options: {grid}} = this;\r\n    const borderOpts = grid.setContext(this.getContext());\r\n    const axisWidth = grid.drawBorder ? borderOpts.borderWidth : 0;\r\n    if (!axisWidth) {\r\n      return;\r\n    }\r\n    const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\r\n    const borderValue = this._borderValue;\r\n    let x1, x2, y1, y2;\r\n    if (this.isHorizontal()) {\r\n      x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\r\n      x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\r\n      y1 = y2 = borderValue;\r\n    } else {\r\n      y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\r\n      y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\r\n      x1 = x2 = borderValue;\r\n    }\r\n    ctx.save();\r\n    ctx.lineWidth = borderOpts.borderWidth;\r\n    ctx.strokeStyle = borderOpts.borderColor;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n  drawLabels(chartArea) {\r\n    const optionTicks = this.options.ticks;\r\n    if (!optionTicks.display) {\r\n      return;\r\n    }\r\n    const ctx = this.ctx;\r\n    const area = this._computeLabelArea();\r\n    if (area) {\r\n      clipArea(ctx, area);\r\n    }\r\n    const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\r\n    let i, ilen;\r\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\r\n      const item = items[i];\r\n      const tickFont = item.font;\r\n      const label = item.label;\r\n      if (item.backdrop) {\r\n        ctx.fillStyle = item.backdrop.color;\r\n        ctx.fillRect(item.backdrop.left, item.backdrop.top, item.backdrop.width, item.backdrop.height);\r\n      }\r\n      let y = item.textOffset;\r\n      renderText(ctx, label, 0, y, tickFont, item);\r\n    }\r\n    if (area) {\r\n      unclipArea(ctx);\r\n    }\r\n  }\r\n  drawTitle() {\r\n    const {ctx, options: {position, title, reverse}} = this;\r\n    if (!title.display) {\r\n      return;\r\n    }\r\n    const font = toFont(title.font);\r\n    const padding = toPadding(title.padding);\r\n    const align = title.align;\r\n    let offset = font.lineHeight / 2;\r\n    if (position === 'bottom' || position === 'center' || isObject(position)) {\r\n      offset += padding.bottom;\r\n      if (isArray(title.text)) {\r\n        offset += font.lineHeight * (title.text.length - 1);\r\n      }\r\n    } else {\r\n      offset += padding.top;\r\n    }\r\n    const {titleX, titleY, maxWidth, rotation} = titleArgs(this, offset, position, align);\r\n    renderText(ctx, title.text, 0, 0, font, {\r\n      color: title.color,\r\n      maxWidth,\r\n      rotation,\r\n      textAlign: titleAlign(align, position, reverse),\r\n      textBaseline: 'middle',\r\n      translation: [titleX, titleY],\r\n    });\r\n  }\r\n  draw(chartArea) {\r\n    if (!this._isVisible()) {\r\n      return;\r\n    }\r\n    this.drawBackground();\r\n    this.drawGrid(chartArea);\r\n    this.drawBorder();\r\n    this.drawTitle();\r\n    this.drawLabels(chartArea);\r\n  }\r\n  _layers() {\r\n    const opts = this.options;\r\n    const tz = opts.ticks && opts.ticks.z || 0;\r\n    const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\r\n    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\r\n      return [{\r\n        z: tz,\r\n        draw: (chartArea) => {\r\n          this.draw(chartArea);\r\n        }\r\n      }];\r\n    }\r\n    return [{\r\n      z: gz,\r\n      draw: (chartArea) => {\r\n        this.drawBackground();\r\n        this.drawGrid(chartArea);\r\n        this.drawTitle();\r\n      }\r\n    }, {\r\n      z: gz + 1,\r\n      draw: () => {\r\n        this.drawBorder();\r\n      }\r\n    }, {\r\n      z: tz,\r\n      draw: (chartArea) => {\r\n        this.drawLabels(chartArea);\r\n      }\r\n    }];\r\n  }\r\n  getMatchingVisibleMetas(type) {\r\n    const metas = this.chart.getSortedVisibleDatasetMetas();\r\n    const axisID = this.axis + 'AxisID';\r\n    const result = [];\r\n    let i, ilen;\r\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\r\n      const meta = metas[i];\r\n      if (meta[axisID] === this.id && (!type || meta.type === type)) {\r\n        result.push(meta);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  _resolveTickFontOptions(index) {\r\n    const opts = this.options.ticks.setContext(this.getContext(index));\r\n    return toFont(opts.font);\r\n  }\r\n  _maxDigits() {\r\n    const fontSize = this._resolveTickFontOptions(0).lineHeight;\r\n    return (this.isHorizontal() ? this.width : this.height) / fontSize;\r\n  }\r\n}\r\n\r\nclass TypedRegistry {\r\n  constructor(type, scope, override) {\r\n    this.type = type;\r\n    this.scope = scope;\r\n    this.override = override;\r\n    this.items = Object.create(null);\r\n  }\r\n  isForType(type) {\r\n    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\r\n  }\r\n  register(item) {\r\n    const proto = Object.getPrototypeOf(item);\r\n    let parentScope;\r\n    if (isIChartComponent(proto)) {\r\n      parentScope = this.register(proto);\r\n    }\r\n    const items = this.items;\r\n    const id = item.id;\r\n    const scope = this.scope + '.' + id;\r\n    if (!id) {\r\n      throw new Error('class does not have id: ' + item);\r\n    }\r\n    if (id in items) {\r\n      return scope;\r\n    }\r\n    items[id] = item;\r\n    registerDefaults(item, scope, parentScope);\r\n    if (this.override) {\r\n      defaults.override(item.id, item.overrides);\r\n    }\r\n    return scope;\r\n  }\r\n  get(id) {\r\n    return this.items[id];\r\n  }\r\n  unregister(item) {\r\n    const items = this.items;\r\n    const id = item.id;\r\n    const scope = this.scope;\r\n    if (id in items) {\r\n      delete items[id];\r\n    }\r\n    if (scope && id in defaults[scope]) {\r\n      delete defaults[scope][id];\r\n      if (this.override) {\r\n        delete overrides[id];\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction registerDefaults(item, scope, parentScope) {\r\n  const itemDefaults = merge(Object.create(null), [\r\n    parentScope ? defaults.get(parentScope) : {},\r\n    defaults.get(scope),\r\n    item.defaults\r\n  ]);\r\n  defaults.set(scope, itemDefaults);\r\n  if (item.defaultRoutes) {\r\n    routeDefaults(scope, item.defaultRoutes);\r\n  }\r\n  if (item.descriptors) {\r\n    defaults.describe(scope, item.descriptors);\r\n  }\r\n}\r\nfunction routeDefaults(scope, routes) {\r\n  Object.keys(routes).forEach(property => {\r\n    const propertyParts = property.split('.');\r\n    const sourceName = propertyParts.pop();\r\n    const sourceScope = [scope].concat(propertyParts).join('.');\r\n    const parts = routes[property].split('.');\r\n    const targetName = parts.pop();\r\n    const targetScope = parts.join('.');\r\n    defaults.route(sourceScope, sourceName, targetScope, targetName);\r\n  });\r\n}\r\nfunction isIChartComponent(proto) {\r\n  return 'id' in proto && 'defaults' in proto;\r\n}\r\n\r\nclass Registry {\r\n  constructor() {\r\n    this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\r\n    this.elements = new TypedRegistry(Element, 'elements');\r\n    this.plugins = new TypedRegistry(Object, 'plugins');\r\n    this.scales = new TypedRegistry(Scale, 'scales');\r\n    this._typedRegistries = [this.controllers, this.scales, this.elements];\r\n  }\r\n  add(...args) {\r\n    this._each('register', args);\r\n  }\r\n  remove(...args) {\r\n    this._each('unregister', args);\r\n  }\r\n  addControllers(...args) {\r\n    this._each('register', args, this.controllers);\r\n  }\r\n  addElements(...args) {\r\n    this._each('register', args, this.elements);\r\n  }\r\n  addPlugins(...args) {\r\n    this._each('register', args, this.plugins);\r\n  }\r\n  addScales(...args) {\r\n    this._each('register', args, this.scales);\r\n  }\r\n  getController(id) {\r\n    return this._get(id, this.controllers, 'controller');\r\n  }\r\n  getElement(id) {\r\n    return this._get(id, this.elements, 'element');\r\n  }\r\n  getPlugin(id) {\r\n    return this._get(id, this.plugins, 'plugin');\r\n  }\r\n  getScale(id) {\r\n    return this._get(id, this.scales, 'scale');\r\n  }\r\n  removeControllers(...args) {\r\n    this._each('unregister', args, this.controllers);\r\n  }\r\n  removeElements(...args) {\r\n    this._each('unregister', args, this.elements);\r\n  }\r\n  removePlugins(...args) {\r\n    this._each('unregister', args, this.plugins);\r\n  }\r\n  removeScales(...args) {\r\n    this._each('unregister', args, this.scales);\r\n  }\r\n  _each(method, args, typedRegistry) {\r\n    [...args].forEach(arg => {\r\n      const reg = typedRegistry || this._getRegistryForType(arg);\r\n      if (typedRegistry || reg.isForType(arg) || (reg === this.plugins && arg.id)) {\r\n        this._exec(method, reg, arg);\r\n      } else {\r\n        each(arg, item => {\r\n          const itemReg = typedRegistry || this._getRegistryForType(item);\r\n          this._exec(method, itemReg, item);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  _exec(method, registry, component) {\r\n    const camelMethod = _capitalize(method);\r\n    callback(component['before' + camelMethod], [], component);\r\n    registry[method](component);\r\n    callback(component['after' + camelMethod], [], component);\r\n  }\r\n  _getRegistryForType(type) {\r\n    for (let i = 0; i < this._typedRegistries.length; i++) {\r\n      const reg = this._typedRegistries[i];\r\n      if (reg.isForType(type)) {\r\n        return reg;\r\n      }\r\n    }\r\n    return this.plugins;\r\n  }\r\n  _get(id, typedRegistry, type) {\r\n    const item = typedRegistry.get(id);\r\n    if (item === undefined) {\r\n      throw new Error('\"' + id + '\" is not a registered ' + type + '.');\r\n    }\r\n    return item;\r\n  }\r\n}\r\nvar registry = new Registry();\r\n\r\nclass ScatterController extends DatasetController {\r\n  update(mode) {\r\n    const meta = this._cachedMeta;\r\n    const {data: points = []} = meta;\r\n    const animationsDisabled = this.chart._animationsDisabled;\r\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\r\n    this._drawStart = start;\r\n    this._drawCount = count;\r\n    if (_scaleRangesChanged(meta)) {\r\n      start = 0;\r\n      count = points.length;\r\n    }\r\n    if (this.options.showLine) {\r\n      const {dataset: line, _dataset} = meta;\r\n      line._chart = this.chart;\r\n      line._datasetIndex = this.index;\r\n      line._decimated = !!_dataset._decimated;\r\n      line.points = points;\r\n      const options = this.resolveDatasetElementOptions(mode);\r\n      options.segment = this.options.segment;\r\n      this.updateElement(line, undefined, {\r\n        animated: !animationsDisabled,\r\n        options\r\n      }, mode);\r\n    }\r\n    this.updateElements(points, start, count, mode);\r\n  }\r\n  addElements() {\r\n    const {showLine} = this.options;\r\n    if (!this.datasetElementType && showLine) {\r\n      this.datasetElementType = registry.getElement('line');\r\n    }\r\n    super.addElements();\r\n  }\r\n  updateElements(points, start, count, mode) {\r\n    const reset = mode === 'reset';\r\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\r\n    const firstOpts = this.resolveDataElementOptions(start, mode);\r\n    const sharedOptions = this.getSharedOptions(firstOpts);\r\n    const includeOptions = this.includeOptions(mode, sharedOptions);\r\n    const iAxis = iScale.axis;\r\n    const vAxis = vScale.axis;\r\n    const {spanGaps, segment} = this.options;\r\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\r\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\r\n    let prevParsed = start > 0 && this.getParsed(start - 1);\r\n    for (let i = start; i < start + count; ++i) {\r\n      const point = points[i];\r\n      const parsed = this.getParsed(i);\r\n      const properties = directUpdate ? point : {};\r\n      const nullData = isNullOrUndef(parsed[vAxis]);\r\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\r\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\r\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\r\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\r\n      if (segment) {\r\n        properties.parsed = parsed;\r\n        properties.raw = _dataset.data[i];\r\n      }\r\n      if (includeOptions) {\r\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\r\n      }\r\n      if (!directUpdate) {\r\n        this.updateElement(point, i, properties, mode);\r\n      }\r\n      prevParsed = parsed;\r\n    }\r\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\r\n  }\r\n  getMaxOverflow() {\r\n    const meta = this._cachedMeta;\r\n    const data = meta.data || [];\r\n    if (!this.options.showLine) {\r\n      let max = 0;\r\n      for (let i = data.length - 1; i >= 0; --i) {\r\n        max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\r\n      }\r\n      return max > 0 && max;\r\n    }\r\n    const dataset = meta.dataset;\r\n    const border = dataset.options && dataset.options.borderWidth || 0;\r\n    if (!data.length) {\r\n      return border;\r\n    }\r\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\r\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\r\n    return Math.max(border, firstPoint, lastPoint) / 2;\r\n  }\r\n}\r\nScatterController.id = 'scatter';\r\nScatterController.defaults = {\r\n  datasetElementType: false,\r\n  dataElementType: 'point',\r\n  showLine: false,\r\n  fill: false\r\n};\r\nScatterController.overrides = {\r\n  interaction: {\r\n    mode: 'point'\r\n  },\r\n  plugins: {\r\n    tooltip: {\r\n      callbacks: {\r\n        title() {\r\n          return '';\r\n        },\r\n        label(item) {\r\n          return '(' + item.label + ', ' + item.formattedValue + ')';\r\n        }\r\n      }\r\n    }\r\n  },\r\n  scales: {\r\n    x: {\r\n      type: 'linear'\r\n    },\r\n    y: {\r\n      type: 'linear'\r\n    }\r\n  }\r\n};\r\n\r\nvar controllers = /*#__PURE__*/Object.freeze({\r\n__proto__: null,\r\nBarController: BarController,\r\nBubbleController: BubbleController,\r\nDoughnutController: DoughnutController,\r\nLineController: LineController,\r\nPolarAreaController: PolarAreaController,\r\nPieController: PieController,\r\nRadarController: RadarController,\r\nScatterController: ScatterController\r\n});\r\n\r\nfunction abstract() {\r\n  throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\r\n}\r\nclass DateAdapter {\r\n  constructor(options) {\r\n    this.options = options || {};\r\n  }\r\n  init(chartOptions) {}\r\n  formats() {\r\n    return abstract();\r\n  }\r\n  parse(value, format) {\r\n    return abstract();\r\n  }\r\n  format(timestamp, format) {\r\n    return abstract();\r\n  }\r\n  add(timestamp, amount, unit) {\r\n    return abstract();\r\n  }\r\n  diff(a, b, unit) {\r\n    return abstract();\r\n  }\r\n  startOf(timestamp, unit, weekday) {\r\n    return abstract();\r\n  }\r\n  endOf(timestamp, unit) {\r\n    return abstract();\r\n  }\r\n}\r\nDateAdapter.override = function(members) {\r\n  Object.assign(DateAdapter.prototype, members);\r\n};\r\nvar adapters = {\r\n  _date: DateAdapter\r\n};\r\n\r\nfunction binarySearch(metaset, axis, value, intersect) {\r\n  const {controller, data, _sorted} = metaset;\r\n  const iScale = controller._cachedMeta.iScale;\r\n  if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\r\n    const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\r\n    if (!intersect) {\r\n      return lookupMethod(data, axis, value);\r\n    } else if (controller._sharedOptions) {\r\n      const el = data[0];\r\n      const range = typeof el.getRange === 'function' && el.getRange(axis);\r\n      if (range) {\r\n        const start = lookupMethod(data, axis, value - range);\r\n        const end = lookupMethod(data, axis, value + range);\r\n        return {lo: start.lo, hi: end.hi};\r\n      }\r\n    }\r\n  }\r\n  return {lo: 0, hi: data.length - 1};\r\n}\r\nfunction evaluateInteractionItems(chart, axis, position, handler, intersect) {\r\n  const metasets = chart.getSortedVisibleDatasetMetas();\r\n  const value = position[axis];\r\n  for (let i = 0, ilen = metasets.length; i < ilen; ++i) {\r\n    const {index, data} = metasets[i];\r\n    const {lo, hi} = binarySearch(metasets[i], axis, value, intersect);\r\n    for (let j = lo; j <= hi; ++j) {\r\n      const element = data[j];\r\n      if (!element.skip) {\r\n        handler(element, index, j);\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction getDistanceMetricForAxis(axis) {\r\n  const useX = axis.indexOf('x') !== -1;\r\n  const useY = axis.indexOf('y') !== -1;\r\n  return function(pt1, pt2) {\r\n    const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\r\n    const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\r\n    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n  };\r\n}\r\nfunction getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\r\n  const items = [];\r\n  if (!includeInvisible && !chart.isPointInArea(position)) {\r\n    return items;\r\n  }\r\n  const evaluationFunc = function(element, datasetIndex, index) {\r\n    if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\r\n      return;\r\n    }\r\n    if (element.inRange(position.x, position.y, useFinalPosition)) {\r\n      items.push({element, datasetIndex, index});\r\n    }\r\n  };\r\n  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\r\n  return items;\r\n}\r\nfunction getNearestRadialItems(chart, position, axis, useFinalPosition) {\r\n  let items = [];\r\n  function evaluationFunc(element, datasetIndex, index) {\r\n    const {startAngle, endAngle} = element.getProps(['startAngle', 'endAngle'], useFinalPosition);\r\n    const {angle} = getAngleFromPoint(element, {x: position.x, y: position.y});\r\n    if (_angleBetween(angle, startAngle, endAngle)) {\r\n      items.push({element, datasetIndex, index});\r\n    }\r\n  }\r\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\r\n  return items;\r\n}\r\nfunction getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\r\n  let items = [];\r\n  const distanceMetric = getDistanceMetricForAxis(axis);\r\n  let minDistance = Number.POSITIVE_INFINITY;\r\n  function evaluationFunc(element, datasetIndex, index) {\r\n    const inRange = element.inRange(position.x, position.y, useFinalPosition);\r\n    if (intersect && !inRange) {\r\n      return;\r\n    }\r\n    const center = element.getCenterPoint(useFinalPosition);\r\n    const pointInArea = !!includeInvisible || chart.isPointInArea(center);\r\n    if (!pointInArea && !inRange) {\r\n      return;\r\n    }\r\n    const distance = distanceMetric(position, center);\r\n    if (distance < minDistance) {\r\n      items = [{element, datasetIndex, index}];\r\n      minDistance = distance;\r\n    } else if (distance === minDistance) {\r\n      items.push({element, datasetIndex, index});\r\n    }\r\n  }\r\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\r\n  return items;\r\n}\r\nfunction getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\r\n  if (!includeInvisible && !chart.isPointInArea(position)) {\r\n    return [];\r\n  }\r\n  return axis === 'r' && !intersect\r\n    ? getNearestRadialItems(chart, position, axis, useFinalPosition)\r\n    : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\r\n}\r\nfunction getAxisItems(chart, position, axis, intersect, useFinalPosition) {\r\n  const items = [];\r\n  const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\r\n  let intersectsItem = false;\r\n  evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index) => {\r\n    if (element[rangeMethod](position[axis], useFinalPosition)) {\r\n      items.push({element, datasetIndex, index});\r\n      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\r\n    }\r\n  });\r\n  if (intersect && !intersectsItem) {\r\n    return [];\r\n  }\r\n  return items;\r\n}\r\nvar Interaction = {\r\n  evaluateInteractionItems,\r\n  modes: {\r\n    index(chart, e, options, useFinalPosition) {\r\n      const position = getRelativePosition(e, chart);\r\n      const axis = options.axis || 'x';\r\n      const includeInvisible = options.includeInvisible || false;\r\n      const items = options.intersect\r\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible)\r\n        : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\r\n      const elements = [];\r\n      if (!items.length) {\r\n        return [];\r\n      }\r\n      chart.getSortedVisibleDatasetMetas().forEach((meta) => {\r\n        const index = items[0].index;\r\n        const element = meta.data[index];\r\n        if (element && !element.skip) {\r\n          elements.push({element, datasetIndex: meta.index, index});\r\n        }\r\n      });\r\n      return elements;\r\n    },\r\n    dataset(chart, e, options, useFinalPosition) {\r\n      const position = getRelativePosition(e, chart);\r\n      const axis = options.axis || 'xy';\r\n      const includeInvisible = options.includeInvisible || false;\r\n      let items = options.intersect\r\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) :\r\n        getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\r\n      if (items.length > 0) {\r\n        const datasetIndex = items[0].datasetIndex;\r\n        const data = chart.getDatasetMeta(datasetIndex).data;\r\n        items = [];\r\n        for (let i = 0; i < data.length; ++i) {\r\n          items.push({element: data[i], datasetIndex, index: i});\r\n        }\r\n      }\r\n      return items;\r\n    },\r\n    point(chart, e, options, useFinalPosition) {\r\n      const position = getRelativePosition(e, chart);\r\n      const axis = options.axis || 'xy';\r\n      const includeInvisible = options.includeInvisible || false;\r\n      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\r\n    },\r\n    nearest(chart, e, options, useFinalPosition) {\r\n      const position = getRelativePosition(e, chart);\r\n      const axis = options.axis || 'xy';\r\n      const includeInvisible = options.includeInvisible || false;\r\n      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\r\n    },\r\n    x(chart, e, options, useFinalPosition) {\r\n      const position = getRelativePosition(e, chart);\r\n      return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\r\n    },\r\n    y(chart, e, options, useFinalPosition) {\r\n      const position = getRelativePosition(e, chart);\r\n      return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\r\n    }\r\n  }\r\n};\r\n\r\nconst STATIC_POSITIONS = ['left', 'top', 'right', 'bottom'];\r\nfunction filterByPosition(array, position) {\r\n  return array.filter(v => v.pos === position);\r\n}\r\nfunction filterDynamicPositionByAxis(array, axis) {\r\n  return array.filter(v => STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\r\n}\r\nfunction sortByWeight(array, reverse) {\r\n  return array.sort((a, b) => {\r\n    const v0 = reverse ? b : a;\r\n    const v1 = reverse ? a : b;\r\n    return v0.weight === v1.weight ?\r\n      v0.index - v1.index :\r\n      v0.weight - v1.weight;\r\n  });\r\n}\r\nfunction wrapBoxes(boxes) {\r\n  const layoutBoxes = [];\r\n  let i, ilen, box, pos, stack, stackWeight;\r\n  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\r\n    box = boxes[i];\r\n    ({position: pos, options: {stack, stackWeight = 1}} = box);\r\n    layoutBoxes.push({\r\n      index: i,\r\n      box,\r\n      pos,\r\n      horizontal: box.isHorizontal(),\r\n      weight: box.weight,\r\n      stack: stack && (pos + stack),\r\n      stackWeight\r\n    });\r\n  }\r\n  return layoutBoxes;\r\n}\r\nfunction buildStacks(layouts) {\r\n  const stacks = {};\r\n  for (const wrap of layouts) {\r\n    const {stack, pos, stackWeight} = wrap;\r\n    if (!stack || !STATIC_POSITIONS.includes(pos)) {\r\n      continue;\r\n    }\r\n    const _stack = stacks[stack] || (stacks[stack] = {count: 0, placed: 0, weight: 0, size: 0});\r\n    _stack.count++;\r\n    _stack.weight += stackWeight;\r\n  }\r\n  return stacks;\r\n}\r\nfunction setLayoutDims(layouts, params) {\r\n  const stacks = buildStacks(layouts);\r\n  const {vBoxMaxWidth, hBoxMaxHeight} = params;\r\n  let i, ilen, layout;\r\n  for (i = 0, ilen = layouts.length; i < ilen; ++i) {\r\n    layout = layouts[i];\r\n    const {fullSize} = layout.box;\r\n    const stack = stacks[layout.stack];\r\n    const factor = stack && layout.stackWeight / stack.weight;\r\n    if (layout.horizontal) {\r\n      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\r\n      layout.height = hBoxMaxHeight;\r\n    } else {\r\n      layout.width = vBoxMaxWidth;\r\n      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\r\n    }\r\n  }\r\n  return stacks;\r\n}\r\nfunction buildLayoutBoxes(boxes) {\r\n  const layoutBoxes = wrapBoxes(boxes);\r\n  const fullSize = sortByWeight(layoutBoxes.filter(wrap => wrap.box.fullSize), true);\r\n  const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\r\n  const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\r\n  const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\r\n  const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\r\n  const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\r\n  const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\r\n  return {\r\n    fullSize,\r\n    leftAndTop: left.concat(top),\r\n    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\r\n    chartArea: filterByPosition(layoutBoxes, 'chartArea'),\r\n    vertical: left.concat(right).concat(centerVertical),\r\n    horizontal: top.concat(bottom).concat(centerHorizontal)\r\n  };\r\n}\r\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\r\n  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\r\n}\r\nfunction updateMaxPadding(maxPadding, boxPadding) {\r\n  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\r\n  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\r\n  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\r\n  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\r\n}\r\nfunction updateDims(chartArea, params, layout, stacks) {\r\n  const {pos, box} = layout;\r\n  const maxPadding = chartArea.maxPadding;\r\n  if (!isObject(pos)) {\r\n    if (layout.size) {\r\n      chartArea[pos] -= layout.size;\r\n    }\r\n    const stack = stacks[layout.stack] || {size: 0, count: 1};\r\n    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\r\n    layout.size = stack.size / stack.count;\r\n    chartArea[pos] += layout.size;\r\n  }\r\n  if (box.getPadding) {\r\n    updateMaxPadding(maxPadding, box.getPadding());\r\n  }\r\n  const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\r\n  const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\r\n  const widthChanged = newWidth !== chartArea.w;\r\n  const heightChanged = newHeight !== chartArea.h;\r\n  chartArea.w = newWidth;\r\n  chartArea.h = newHeight;\r\n  return layout.horizontal\r\n    ? {same: widthChanged, other: heightChanged}\r\n    : {same: heightChanged, other: widthChanged};\r\n}\r\nfunction handleMaxPadding(chartArea) {\r\n  const maxPadding = chartArea.maxPadding;\r\n  function updatePos(pos) {\r\n    const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\r\n    chartArea[pos] += change;\r\n    return change;\r\n  }\r\n  chartArea.y += updatePos('top');\r\n  chartArea.x += updatePos('left');\r\n  updatePos('right');\r\n  updatePos('bottom');\r\n}\r\nfunction getMargins(horizontal, chartArea) {\r\n  const maxPadding = chartArea.maxPadding;\r\n  function marginForPositions(positions) {\r\n    const margin = {left: 0, top: 0, right: 0, bottom: 0};\r\n    positions.forEach((pos) => {\r\n      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\r\n    });\r\n    return margin;\r\n  }\r\n  return horizontal\r\n    ? marginForPositions(['left', 'right'])\r\n    : marginForPositions(['top', 'bottom']);\r\n}\r\nfunction fitBoxes(boxes, chartArea, params, stacks) {\r\n  const refitBoxes = [];\r\n  let i, ilen, layout, box, refit, changed;\r\n  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {\r\n    layout = boxes[i];\r\n    box = layout.box;\r\n    box.update(\r\n      layout.width || chartArea.w,\r\n      layout.height || chartArea.h,\r\n      getMargins(layout.horizontal, chartArea)\r\n    );\r\n    const {same, other} = updateDims(chartArea, params, layout, stacks);\r\n    refit |= same && refitBoxes.length;\r\n    changed = changed || other;\r\n    if (!box.fullSize) {\r\n      refitBoxes.push(layout);\r\n    }\r\n  }\r\n  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\r\n}\r\nfunction setBoxDims(box, left, top, width, height) {\r\n  box.top = top;\r\n  box.left = left;\r\n  box.right = left + width;\r\n  box.bottom = top + height;\r\n  box.width = width;\r\n  box.height = height;\r\n}\r\nfunction placeBoxes(boxes, chartArea, params, stacks) {\r\n  const userPadding = params.padding;\r\n  let {x, y} = chartArea;\r\n  for (const layout of boxes) {\r\n    const box = layout.box;\r\n    const stack = stacks[layout.stack] || {count: 1, placed: 0, weight: 1};\r\n    const weight = (layout.stackWeight / stack.weight) || 1;\r\n    if (layout.horizontal) {\r\n      const width = chartArea.w * weight;\r\n      const height = stack.size || box.height;\r\n      if (defined(stack.start)) {\r\n        y = stack.start;\r\n      }\r\n      if (box.fullSize) {\r\n        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\r\n      } else {\r\n        setBoxDims(box, chartArea.left + stack.placed, y, width, height);\r\n      }\r\n      stack.start = y;\r\n      stack.placed += width;\r\n      y = box.bottom;\r\n    } else {\r\n      const height = chartArea.h * weight;\r\n      const width = stack.size || box.width;\r\n      if (defined(stack.start)) {\r\n        x = stack.start;\r\n      }\r\n      if (box.fullSize) {\r\n        setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\r\n      } else {\r\n        setBoxDims(box, x, chartArea.top + stack.placed, width, height);\r\n      }\r\n      stack.start = x;\r\n      stack.placed += height;\r\n      x = box.right;\r\n    }\r\n  }\r\n  chartArea.x = x;\r\n  chartArea.y = y;\r\n}\r\ndefaults.set('layout', {\r\n  autoPadding: true,\r\n  padding: {\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    left: 0\r\n  }\r\n});\r\nvar layouts = {\r\n  addBox(chart, item) {\r\n    if (!chart.boxes) {\r\n      chart.boxes = [];\r\n    }\r\n    item.fullSize = item.fullSize || false;\r\n    item.position = item.position || 'top';\r\n    item.weight = item.weight || 0;\r\n    item._layers = item._layers || function() {\r\n      return [{\r\n        z: 0,\r\n        draw(chartArea) {\r\n          item.draw(chartArea);\r\n        }\r\n      }];\r\n    };\r\n    chart.boxes.push(item);\r\n  },\r\n  removeBox(chart, layoutItem) {\r\n    const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\r\n    if (index !== -1) {\r\n      chart.boxes.splice(index, 1);\r\n    }\r\n  },\r\n  configure(chart, item, options) {\r\n    item.fullSize = options.fullSize;\r\n    item.position = options.position;\r\n    item.weight = options.weight;\r\n  },\r\n  update(chart, width, height, minPadding) {\r\n    if (!chart) {\r\n      return;\r\n    }\r\n    const padding = toPadding(chart.options.layout.padding);\r\n    const availableWidth = Math.max(width - padding.width, 0);\r\n    const availableHeight = Math.max(height - padding.height, 0);\r\n    const boxes = buildLayoutBoxes(chart.boxes);\r\n    const verticalBoxes = boxes.vertical;\r\n    const horizontalBoxes = boxes.horizontal;\r\n    each(chart.boxes, box => {\r\n      if (typeof box.beforeLayout === 'function') {\r\n        box.beforeLayout();\r\n      }\r\n    });\r\n    const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap) =>\r\n      wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\r\n    const params = Object.freeze({\r\n      outerWidth: width,\r\n      outerHeight: height,\r\n      padding,\r\n      availableWidth,\r\n      availableHeight,\r\n      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\r\n      hBoxMaxHeight: availableHeight / 2\r\n    });\r\n    const maxPadding = Object.assign({}, padding);\r\n    updateMaxPadding(maxPadding, toPadding(minPadding));\r\n    const chartArea = Object.assign({\r\n      maxPadding,\r\n      w: availableWidth,\r\n      h: availableHeight,\r\n      x: padding.left,\r\n      y: padding.top\r\n    }, padding);\r\n    const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\r\n    fitBoxes(boxes.fullSize, chartArea, params, stacks);\r\n    fitBoxes(verticalBoxes, chartArea, params, stacks);\r\n    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\r\n      fitBoxes(verticalBoxes, chartArea, params, stacks);\r\n    }\r\n    handleMaxPadding(chartArea);\r\n    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\r\n    chartArea.x += chartArea.w;\r\n    chartArea.y += chartArea.h;\r\n    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\r\n    chart.chartArea = {\r\n      left: chartArea.left,\r\n      top: chartArea.top,\r\n      right: chartArea.left + chartArea.w,\r\n      bottom: chartArea.top + chartArea.h,\r\n      height: chartArea.h,\r\n      width: chartArea.w,\r\n    };\r\n    each(boxes.chartArea, (layout) => {\r\n      const box = layout.box;\r\n      Object.assign(box, chart.chartArea);\r\n      box.update(chartArea.w, chartArea.h, {left: 0, top: 0, right: 0, bottom: 0});\r\n    });\r\n  }\r\n};\r\n\r\nclass BasePlatform {\r\n  acquireContext(canvas, aspectRatio) {}\r\n  releaseContext(context) {\r\n    return false;\r\n  }\r\n  addEventListener(chart, type, listener) {}\r\n  removeEventListener(chart, type, listener) {}\r\n  getDevicePixelRatio() {\r\n    return 1;\r\n  }\r\n  getMaximumSize(element, width, height, aspectRatio) {\r\n    width = Math.max(0, width || element.width);\r\n    height = height || element.height;\r\n    return {\r\n      width,\r\n      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\r\n    };\r\n  }\r\n  isAttached(canvas) {\r\n    return true;\r\n  }\r\n  updateConfig(config) {\r\n  }\r\n}\r\n\r\nclass BasicPlatform extends BasePlatform {\r\n  acquireContext(item) {\r\n    return item && item.getContext && item.getContext('2d') || null;\r\n  }\r\n  updateConfig(config) {\r\n    config.options.animation = false;\r\n  }\r\n}\r\n\r\nconst EXPANDO_KEY = '$chartjs';\r\nconst EVENT_TYPES = {\r\n  touchstart: 'mousedown',\r\n  touchmove: 'mousemove',\r\n  touchend: 'mouseup',\r\n  pointerenter: 'mouseenter',\r\n  pointerdown: 'mousedown',\r\n  pointermove: 'mousemove',\r\n  pointerup: 'mouseup',\r\n  pointerleave: 'mouseout',\r\n  pointerout: 'mouseout'\r\n};\r\nconst isNullOrEmpty = value => value === null || value === '';\r\nfunction initCanvas(canvas, aspectRatio) {\r\n  const style = canvas.style;\r\n  const renderHeight = canvas.getAttribute('height');\r\n  const renderWidth = canvas.getAttribute('width');\r\n  canvas[EXPANDO_KEY] = {\r\n    initial: {\r\n      height: renderHeight,\r\n      width: renderWidth,\r\n      style: {\r\n        display: style.display,\r\n        height: style.height,\r\n        width: style.width\r\n      }\r\n    }\r\n  };\r\n  style.display = style.display || 'block';\r\n  style.boxSizing = style.boxSizing || 'border-box';\r\n  if (isNullOrEmpty(renderWidth)) {\r\n    const displayWidth = readUsedSize(canvas, 'width');\r\n    if (displayWidth !== undefined) {\r\n      canvas.width = displayWidth;\r\n    }\r\n  }\r\n  if (isNullOrEmpty(renderHeight)) {\r\n    if (canvas.style.height === '') {\r\n      canvas.height = canvas.width / (aspectRatio || 2);\r\n    } else {\r\n      const displayHeight = readUsedSize(canvas, 'height');\r\n      if (displayHeight !== undefined) {\r\n        canvas.height = displayHeight;\r\n      }\r\n    }\r\n  }\r\n  return canvas;\r\n}\r\nconst eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\r\nfunction addListener(node, type, listener) {\r\n  node.addEventListener(type, listener, eventListenerOptions);\r\n}\r\nfunction removeListener(chart, type, listener) {\r\n  chart.canvas.removeEventListener(type, listener, eventListenerOptions);\r\n}\r\nfunction fromNativeEvent(event, chart) {\r\n  const type = EVENT_TYPES[event.type] || event.type;\r\n  const {x, y} = getRelativePosition(event, chart);\r\n  return {\r\n    type,\r\n    chart,\r\n    native: event,\r\n    x: x !== undefined ? x : null,\r\n    y: y !== undefined ? y : null,\r\n  };\r\n}\r\nfunction nodeListContains(nodeList, canvas) {\r\n  for (const node of nodeList) {\r\n    if (node === canvas || node.contains(canvas)) {\r\n      return true;\r\n    }\r\n  }\r\n}\r\nfunction createAttachObserver(chart, type, listener) {\r\n  const canvas = chart.canvas;\r\n  const observer = new MutationObserver(entries => {\r\n    let trigger = false;\r\n    for (const entry of entries) {\r\n      trigger = trigger || nodeListContains(entry.addedNodes, canvas);\r\n      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\r\n    }\r\n    if (trigger) {\r\n      listener();\r\n    }\r\n  });\r\n  observer.observe(document, {childList: true, subtree: true});\r\n  return observer;\r\n}\r\nfunction createDetachObserver(chart, type, listener) {\r\n  const canvas = chart.canvas;\r\n  const observer = new MutationObserver(entries => {\r\n    let trigger = false;\r\n    for (const entry of entries) {\r\n      trigger = trigger || nodeListContains(entry.removedNodes, canvas);\r\n      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\r\n    }\r\n    if (trigger) {\r\n      listener();\r\n    }\r\n  });\r\n  observer.observe(document, {childList: true, subtree: true});\r\n  return observer;\r\n}\r\nconst drpListeningCharts = new Map();\r\nlet oldDevicePixelRatio = 0;\r\nfunction onWindowResize() {\r\n  const dpr = window.devicePixelRatio;\r\n  if (dpr === oldDevicePixelRatio) {\r\n    return;\r\n  }\r\n  oldDevicePixelRatio = dpr;\r\n  drpListeningCharts.forEach((resize, chart) => {\r\n    if (chart.currentDevicePixelRatio !== dpr) {\r\n      resize();\r\n    }\r\n  });\r\n}\r\nfunction listenDevicePixelRatioChanges(chart, resize) {\r\n  if (!drpListeningCharts.size) {\r\n    window.addEventListener('resize', onWindowResize);\r\n  }\r\n  drpListeningCharts.set(chart, resize);\r\n}\r\nfunction unlistenDevicePixelRatioChanges(chart) {\r\n  drpListeningCharts.delete(chart);\r\n  if (!drpListeningCharts.size) {\r\n    window.removeEventListener('resize', onWindowResize);\r\n  }\r\n}\r\nfunction createResizeObserver(chart, type, listener) {\r\n  const canvas = chart.canvas;\r\n  const container = canvas && _getParentNode(canvas);\r\n  if (!container) {\r\n    return;\r\n  }\r\n  const resize = throttled((width, height) => {\r\n    const w = container.clientWidth;\r\n    listener(width, height);\r\n    if (w < container.clientWidth) {\r\n      listener();\r\n    }\r\n  }, window);\r\n  const observer = new ResizeObserver(entries => {\r\n    const entry = entries[0];\r\n    const width = entry.contentRect.width;\r\n    const height = entry.contentRect.height;\r\n    if (width === 0 && height === 0) {\r\n      return;\r\n    }\r\n    resize(width, height);\r\n  });\r\n  observer.observe(container);\r\n  listenDevicePixelRatioChanges(chart, resize);\r\n  return observer;\r\n}\r\nfunction releaseObserver(chart, type, observer) {\r\n  if (observer) {\r\n    observer.disconnect();\r\n  }\r\n  if (type === 'resize') {\r\n    unlistenDevicePixelRatioChanges(chart);\r\n  }\r\n}\r\nfunction createProxyAndListen(chart, type, listener) {\r\n  const canvas = chart.canvas;\r\n  const proxy = throttled((event) => {\r\n    if (chart.ctx !== null) {\r\n      listener(fromNativeEvent(event, chart));\r\n    }\r\n  }, chart, (args) => {\r\n    const event = args[0];\r\n    return [event, event.offsetX, event.offsetY];\r\n  });\r\n  addListener(canvas, type, proxy);\r\n  return proxy;\r\n}\r\nclass DomPlatform extends BasePlatform {\r\n  acquireContext(canvas, aspectRatio) {\r\n    const context = canvas && canvas.getContext && canvas.getContext('2d');\r\n    if (context && context.canvas === canvas) {\r\n      initCanvas(canvas, aspectRatio);\r\n      return context;\r\n    }\r\n    return null;\r\n  }\r\n  releaseContext(context) {\r\n    const canvas = context.canvas;\r\n    if (!canvas[EXPANDO_KEY]) {\r\n      return false;\r\n    }\r\n    const initial = canvas[EXPANDO_KEY].initial;\r\n    ['height', 'width'].forEach((prop) => {\r\n      const value = initial[prop];\r\n      if (isNullOrUndef(value)) {\r\n        canvas.removeAttribute(prop);\r\n      } else {\r\n        canvas.setAttribute(prop, value);\r\n      }\r\n    });\r\n    const style = initial.style || {};\r\n    Object.keys(style).forEach((key) => {\r\n      canvas.style[key] = style[key];\r\n    });\r\n    canvas.width = canvas.width;\r\n    delete canvas[EXPANDO_KEY];\r\n    return true;\r\n  }\r\n  addEventListener(chart, type, listener) {\r\n    this.removeEventListener(chart, type);\r\n    const proxies = chart.$proxies || (chart.$proxies = {});\r\n    const handlers = {\r\n      attach: createAttachObserver,\r\n      detach: createDetachObserver,\r\n      resize: createResizeObserver\r\n    };\r\n    const handler = handlers[type] || createProxyAndListen;\r\n    proxies[type] = handler(chart, type, listener);\r\n  }\r\n  removeEventListener(chart, type) {\r\n    const proxies = chart.$proxies || (chart.$proxies = {});\r\n    const proxy = proxies[type];\r\n    if (!proxy) {\r\n      return;\r\n    }\r\n    const handlers = {\r\n      attach: releaseObserver,\r\n      detach: releaseObserver,\r\n      resize: releaseObserver\r\n    };\r\n    const handler = handlers[type] || removeListener;\r\n    handler(chart, type, proxy);\r\n    proxies[type] = undefined;\r\n  }\r\n  getDevicePixelRatio() {\r\n    return window.devicePixelRatio;\r\n  }\r\n  getMaximumSize(canvas, width, height, aspectRatio) {\r\n    return getMaximumSize(canvas, width, height, aspectRatio);\r\n  }\r\n  isAttached(canvas) {\r\n    const container = _getParentNode(canvas);\r\n    return !!(container && container.isConnected);\r\n  }\r\n}\r\n\r\nfunction _detectPlatform(canvas) {\r\n  if (!_isDomSupported() || (typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\r\n    return BasicPlatform;\r\n  }\r\n  return DomPlatform;\r\n}\r\n\r\nclass PluginService {\r\n  constructor() {\r\n    this._init = [];\r\n  }\r\n  notify(chart, hook, args, filter) {\r\n    if (hook === 'beforeInit') {\r\n      this._init = this._createDescriptors(chart, true);\r\n      this._notify(this._init, chart, 'install');\r\n    }\r\n    const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\r\n    const result = this._notify(descriptors, chart, hook, args);\r\n    if (hook === 'afterDestroy') {\r\n      this._notify(descriptors, chart, 'stop');\r\n      this._notify(this._init, chart, 'uninstall');\r\n    }\r\n    return result;\r\n  }\r\n  _notify(descriptors, chart, hook, args) {\r\n    args = args || {};\r\n    for (const descriptor of descriptors) {\r\n      const plugin = descriptor.plugin;\r\n      const method = plugin[hook];\r\n      const params = [chart, args, descriptor.options];\r\n      if (callback(method, params, plugin) === false && args.cancelable) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  invalidate() {\r\n    if (!isNullOrUndef(this._cache)) {\r\n      this._oldCache = this._cache;\r\n      this._cache = undefined;\r\n    }\r\n  }\r\n  _descriptors(chart) {\r\n    if (this._cache) {\r\n      return this._cache;\r\n    }\r\n    const descriptors = this._cache = this._createDescriptors(chart);\r\n    this._notifyStateChanges(chart);\r\n    return descriptors;\r\n  }\r\n  _createDescriptors(chart, all) {\r\n    const config = chart && chart.config;\r\n    const options = valueOrDefault(config.options && config.options.plugins, {});\r\n    const plugins = allPlugins(config);\r\n    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\r\n  }\r\n  _notifyStateChanges(chart) {\r\n    const previousDescriptors = this._oldCache || [];\r\n    const descriptors = this._cache;\r\n    const diff = (a, b) => a.filter(x => !b.some(y => x.plugin.id === y.plugin.id));\r\n    this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\r\n    this._notify(diff(descriptors, previousDescriptors), chart, 'start');\r\n  }\r\n}\r\nfunction allPlugins(config) {\r\n  const localIds = {};\r\n  const plugins = [];\r\n  const keys = Object.keys(registry.plugins.items);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    plugins.push(registry.getPlugin(keys[i]));\r\n  }\r\n  const local = config.plugins || [];\r\n  for (let i = 0; i < local.length; i++) {\r\n    const plugin = local[i];\r\n    if (plugins.indexOf(plugin) === -1) {\r\n      plugins.push(plugin);\r\n      localIds[plugin.id] = true;\r\n    }\r\n  }\r\n  return {plugins, localIds};\r\n}\r\nfunction getOpts(options, all) {\r\n  if (!all && options === false) {\r\n    return null;\r\n  }\r\n  if (options === true) {\r\n    return {};\r\n  }\r\n  return options;\r\n}\r\nfunction createDescriptors(chart, {plugins, localIds}, options, all) {\r\n  const result = [];\r\n  const context = chart.getContext();\r\n  for (const plugin of plugins) {\r\n    const id = plugin.id;\r\n    const opts = getOpts(options[id], all);\r\n    if (opts === null) {\r\n      continue;\r\n    }\r\n    result.push({\r\n      plugin,\r\n      options: pluginOpts(chart.config, {plugin, local: localIds[id]}, opts, context)\r\n    });\r\n  }\r\n  return result;\r\n}\r\nfunction pluginOpts(config, {plugin, local}, opts, context) {\r\n  const keys = config.pluginScopeKeys(plugin);\r\n  const scopes = config.getOptionScopes(opts, keys);\r\n  if (local && plugin.defaults) {\r\n    scopes.push(plugin.defaults);\r\n  }\r\n  return config.createResolver(scopes, context, [''], {\r\n    scriptable: false,\r\n    indexable: false,\r\n    allKeys: true\r\n  });\r\n}\r\n\r\nfunction getIndexAxis(type, options) {\r\n  const datasetDefaults = defaults.datasets[type] || {};\r\n  const datasetOptions = (options.datasets || {})[type] || {};\r\n  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\r\n}\r\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\r\n  let axis = id;\r\n  if (id === '_index_') {\r\n    axis = indexAxis;\r\n  } else if (id === '_value_') {\r\n    axis = indexAxis === 'x' ? 'y' : 'x';\r\n  }\r\n  return axis;\r\n}\r\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\r\n  return axis === indexAxis ? '_index_' : '_value_';\r\n}\r\nfunction axisFromPosition(position) {\r\n  if (position === 'top' || position === 'bottom') {\r\n    return 'x';\r\n  }\r\n  if (position === 'left' || position === 'right') {\r\n    return 'y';\r\n  }\r\n}\r\nfunction determineAxis(id, scaleOptions) {\r\n  if (id === 'x' || id === 'y') {\r\n    return id;\r\n  }\r\n  return scaleOptions.axis || axisFromPosition(scaleOptions.position) || id.charAt(0).toLowerCase();\r\n}\r\nfunction mergeScaleConfig(config, options) {\r\n  const chartDefaults = overrides[config.type] || {scales: {}};\r\n  const configScales = options.scales || {};\r\n  const chartIndexAxis = getIndexAxis(config.type, options);\r\n  const firstIDs = Object.create(null);\r\n  const scales = Object.create(null);\r\n  Object.keys(configScales).forEach(id => {\r\n    const scaleConf = configScales[id];\r\n    if (!isObject(scaleConf)) {\r\n      return console.error(`Invalid scale configuration for scale: ${id}`);\r\n    }\r\n    if (scaleConf._proxy) {\r\n      return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\r\n    }\r\n    const axis = determineAxis(id, scaleConf);\r\n    const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\r\n    const defaultScaleOptions = chartDefaults.scales || {};\r\n    firstIDs[axis] = firstIDs[axis] || id;\r\n    scales[id] = mergeIf(Object.create(null), [{axis}, scaleConf, defaultScaleOptions[axis], defaultScaleOptions[defaultId]]);\r\n  });\r\n  config.data.datasets.forEach(dataset => {\r\n    const type = dataset.type || config.type;\r\n    const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\r\n    const datasetDefaults = overrides[type] || {};\r\n    const defaultScaleOptions = datasetDefaults.scales || {};\r\n    Object.keys(defaultScaleOptions).forEach(defaultID => {\r\n      const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\r\n      const id = dataset[axis + 'AxisID'] || firstIDs[axis] || axis;\r\n      scales[id] = scales[id] || Object.create(null);\r\n      mergeIf(scales[id], [{axis}, configScales[id], defaultScaleOptions[defaultID]]);\r\n    });\r\n  });\r\n  Object.keys(scales).forEach(key => {\r\n    const scale = scales[key];\r\n    mergeIf(scale, [defaults.scales[scale.type], defaults.scale]);\r\n  });\r\n  return scales;\r\n}\r\nfunction initOptions(config) {\r\n  const options = config.options || (config.options = {});\r\n  options.plugins = valueOrDefault(options.plugins, {});\r\n  options.scales = mergeScaleConfig(config, options);\r\n}\r\nfunction initData(data) {\r\n  data = data || {};\r\n  data.datasets = data.datasets || [];\r\n  data.labels = data.labels || [];\r\n  return data;\r\n}\r\nfunction initConfig(config) {\r\n  config = config || {};\r\n  config.data = initData(config.data);\r\n  initOptions(config);\r\n  return config;\r\n}\r\nconst keyCache = new Map();\r\nconst keysCached = new Set();\r\nfunction cachedKeys(cacheKey, generate) {\r\n  let keys = keyCache.get(cacheKey);\r\n  if (!keys) {\r\n    keys = generate();\r\n    keyCache.set(cacheKey, keys);\r\n    keysCached.add(keys);\r\n  }\r\n  return keys;\r\n}\r\nconst addIfFound = (set, obj, key) => {\r\n  const opts = resolveObjectKey(obj, key);\r\n  if (opts !== undefined) {\r\n    set.add(opts);\r\n  }\r\n};\r\nclass Config {\r\n  constructor(config) {\r\n    this._config = initConfig(config);\r\n    this._scopeCache = new Map();\r\n    this._resolverCache = new Map();\r\n  }\r\n  get platform() {\r\n    return this._config.platform;\r\n  }\r\n  get type() {\r\n    return this._config.type;\r\n  }\r\n  set type(type) {\r\n    this._config.type = type;\r\n  }\r\n  get data() {\r\n    return this._config.data;\r\n  }\r\n  set data(data) {\r\n    this._config.data = initData(data);\r\n  }\r\n  get options() {\r\n    return this._config.options;\r\n  }\r\n  set options(options) {\r\n    this._config.options = options;\r\n  }\r\n  get plugins() {\r\n    return this._config.plugins;\r\n  }\r\n  update() {\r\n    const config = this._config;\r\n    this.clearCache();\r\n    initOptions(config);\r\n  }\r\n  clearCache() {\r\n    this._scopeCache.clear();\r\n    this._resolverCache.clear();\r\n  }\r\n  datasetScopeKeys(datasetType) {\r\n    return cachedKeys(datasetType,\r\n      () => [[\r\n        `datasets.${datasetType}`,\r\n        ''\r\n      ]]);\r\n  }\r\n  datasetAnimationScopeKeys(datasetType, transition) {\r\n    return cachedKeys(`${datasetType}.transition.${transition}`,\r\n      () => [\r\n        [\r\n          `datasets.${datasetType}.transitions.${transition}`,\r\n          `transitions.${transition}`,\r\n        ],\r\n        [\r\n          `datasets.${datasetType}`,\r\n          ''\r\n        ]\r\n      ]);\r\n  }\r\n  datasetElementScopeKeys(datasetType, elementType) {\r\n    return cachedKeys(`${datasetType}-${elementType}`,\r\n      () => [[\r\n        `datasets.${datasetType}.elements.${elementType}`,\r\n        `datasets.${datasetType}`,\r\n        `elements.${elementType}`,\r\n        ''\r\n      ]]);\r\n  }\r\n  pluginScopeKeys(plugin) {\r\n    const id = plugin.id;\r\n    const type = this.type;\r\n    return cachedKeys(`${type}-plugin-${id}`,\r\n      () => [[\r\n        `plugins.${id}`,\r\n        ...plugin.additionalOptionScopes || [],\r\n      ]]);\r\n  }\r\n  _cachedScopes(mainScope, resetCache) {\r\n    const _scopeCache = this._scopeCache;\r\n    let cache = _scopeCache.get(mainScope);\r\n    if (!cache || resetCache) {\r\n      cache = new Map();\r\n      _scopeCache.set(mainScope, cache);\r\n    }\r\n    return cache;\r\n  }\r\n  getOptionScopes(mainScope, keyLists, resetCache) {\r\n    const {options, type} = this;\r\n    const cache = this._cachedScopes(mainScope, resetCache);\r\n    const cached = cache.get(keyLists);\r\n    if (cached) {\r\n      return cached;\r\n    }\r\n    const scopes = new Set();\r\n    keyLists.forEach(keys => {\r\n      if (mainScope) {\r\n        scopes.add(mainScope);\r\n        keys.forEach(key => addIfFound(scopes, mainScope, key));\r\n      }\r\n      keys.forEach(key => addIfFound(scopes, options, key));\r\n      keys.forEach(key => addIfFound(scopes, overrides[type] || {}, key));\r\n      keys.forEach(key => addIfFound(scopes, defaults, key));\r\n      keys.forEach(key => addIfFound(scopes, descriptors, key));\r\n    });\r\n    const array = Array.from(scopes);\r\n    if (array.length === 0) {\r\n      array.push(Object.create(null));\r\n    }\r\n    if (keysCached.has(keyLists)) {\r\n      cache.set(keyLists, array);\r\n    }\r\n    return array;\r\n  }\r\n  chartOptionScopes() {\r\n    const {options, type} = this;\r\n    return [\r\n      options,\r\n      overrides[type] || {},\r\n      defaults.datasets[type] || {},\r\n      {type},\r\n      defaults,\r\n      descriptors\r\n    ];\r\n  }\r\n  resolveNamedOptions(scopes, names, context, prefixes = ['']) {\r\n    const result = {$shared: true};\r\n    const {resolver, subPrefixes} = getResolver(this._resolverCache, scopes, prefixes);\r\n    let options = resolver;\r\n    if (needContext(resolver, names)) {\r\n      result.$shared = false;\r\n      context = isFunction(context) ? context() : context;\r\n      const subResolver = this.createResolver(scopes, context, subPrefixes);\r\n      options = _attachContext(resolver, context, subResolver);\r\n    }\r\n    for (const prop of names) {\r\n      result[prop] = options[prop];\r\n    }\r\n    return result;\r\n  }\r\n  createResolver(scopes, context, prefixes = [''], descriptorDefaults) {\r\n    const {resolver} = getResolver(this._resolverCache, scopes, prefixes);\r\n    return isObject(context)\r\n      ? _attachContext(resolver, context, undefined, descriptorDefaults)\r\n      : resolver;\r\n  }\r\n}\r\nfunction getResolver(resolverCache, scopes, prefixes) {\r\n  let cache = resolverCache.get(scopes);\r\n  if (!cache) {\r\n    cache = new Map();\r\n    resolverCache.set(scopes, cache);\r\n  }\r\n  const cacheKey = prefixes.join();\r\n  let cached = cache.get(cacheKey);\r\n  if (!cached) {\r\n    const resolver = _createResolver(scopes, prefixes);\r\n    cached = {\r\n      resolver,\r\n      subPrefixes: prefixes.filter(p => !p.toLowerCase().includes('hover'))\r\n    };\r\n    cache.set(cacheKey, cached);\r\n  }\r\n  return cached;\r\n}\r\nconst hasFunction = value => isObject(value)\r\n  && Object.getOwnPropertyNames(value).reduce((acc, key) => acc || isFunction(value[key]), false);\r\nfunction needContext(proxy, names) {\r\n  const {isScriptable, isIndexable} = _descriptors(proxy);\r\n  for (const prop of names) {\r\n    const scriptable = isScriptable(prop);\r\n    const indexable = isIndexable(prop);\r\n    const value = (indexable || scriptable) && proxy[prop];\r\n    if ((scriptable && (isFunction(value) || hasFunction(value)))\r\n      || (indexable && isArray(value))) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nvar version = \"3.9.1\";\r\n\r\nconst KNOWN_POSITIONS = ['top', 'bottom', 'left', 'right', 'chartArea'];\r\nfunction positionIsHorizontal(position, axis) {\r\n  return position === 'top' || position === 'bottom' || (KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x');\r\n}\r\nfunction compare2Level(l1, l2) {\r\n  return function(a, b) {\r\n    return a[l1] === b[l1]\r\n      ? a[l2] - b[l2]\r\n      : a[l1] - b[l1];\r\n  };\r\n}\r\nfunction onAnimationsComplete(context) {\r\n  const chart = context.chart;\r\n  const animationOptions = chart.options.animation;\r\n  chart.notifyPlugins('afterRender');\r\n  callback(animationOptions && animationOptions.onComplete, [context], chart);\r\n}\r\nfunction onAnimationProgress(context) {\r\n  const chart = context.chart;\r\n  const animationOptions = chart.options.animation;\r\n  callback(animationOptions && animationOptions.onProgress, [context], chart);\r\n}\r\nfunction getCanvas(item) {\r\n  if (_isDomSupported() && typeof item === 'string') {\r\n    item = document.getElementById(item);\r\n  } else if (item && item.length) {\r\n    item = item[0];\r\n  }\r\n  if (item && item.canvas) {\r\n    item = item.canvas;\r\n  }\r\n  return item;\r\n}\r\nconst instances = {};\r\nconst getChart = (key) => {\r\n  const canvas = getCanvas(key);\r\n  return Object.values(instances).filter((c) => c.canvas === canvas).pop();\r\n};\r\nfunction moveNumericKeys(obj, start, move) {\r\n  const keys = Object.keys(obj);\r\n  for (const key of keys) {\r\n    const intKey = +key;\r\n    if (intKey >= start) {\r\n      const value = obj[key];\r\n      delete obj[key];\r\n      if (move > 0 || intKey > start) {\r\n        obj[intKey + move] = value;\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction determineLastEvent(e, lastEvent, inChartArea, isClick) {\r\n  if (!inChartArea || e.type === 'mouseout') {\r\n    return null;\r\n  }\r\n  if (isClick) {\r\n    return lastEvent;\r\n  }\r\n  return e;\r\n}\r\nclass Chart {\r\n  constructor(item, userConfig) {\r\n    const config = this.config = new Config(userConfig);\r\n    const initialCanvas = getCanvas(item);\r\n    const existingChart = getChart(initialCanvas);\r\n    if (existingChart) {\r\n      throw new Error(\r\n        'Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' +\r\n\t\t\t\t' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.'\r\n      );\r\n    }\r\n    const options = config.createResolver(config.chartOptionScopes(), this.getContext());\r\n    this.platform = new (config.platform || _detectPlatform(initialCanvas))();\r\n    this.platform.updateConfig(config);\r\n    const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\r\n    const canvas = context && context.canvas;\r\n    const height = canvas && canvas.height;\r\n    const width = canvas && canvas.width;\r\n    this.id = uid();\r\n    this.ctx = context;\r\n    this.canvas = canvas;\r\n    this.width = width;\r\n    this.height = height;\r\n    this._options = options;\r\n    this._aspectRatio = this.aspectRatio;\r\n    this._layers = [];\r\n    this._metasets = [];\r\n    this._stacks = undefined;\r\n    this.boxes = [];\r\n    this.currentDevicePixelRatio = undefined;\r\n    this.chartArea = undefined;\r\n    this._active = [];\r\n    this._lastEvent = undefined;\r\n    this._listeners = {};\r\n    this._responsiveListeners = undefined;\r\n    this._sortedMetasets = [];\r\n    this.scales = {};\r\n    this._plugins = new PluginService();\r\n    this.$proxies = {};\r\n    this._hiddenIndices = {};\r\n    this.attached = false;\r\n    this._animationsDisabled = undefined;\r\n    this.$context = undefined;\r\n    this._doResize = debounce(mode => this.update(mode), options.resizeDelay || 0);\r\n    this._dataChanges = [];\r\n    instances[this.id] = this;\r\n    if (!context || !canvas) {\r\n      console.error(\"Failed to create chart: can't acquire context from the given item\");\r\n      return;\r\n    }\r\n    animator.listen(this, 'complete', onAnimationsComplete);\r\n    animator.listen(this, 'progress', onAnimationProgress);\r\n    this._initialize();\r\n    if (this.attached) {\r\n      this.update();\r\n    }\r\n  }\r\n  get aspectRatio() {\r\n    const {options: {aspectRatio, maintainAspectRatio}, width, height, _aspectRatio} = this;\r\n    if (!isNullOrUndef(aspectRatio)) {\r\n      return aspectRatio;\r\n    }\r\n    if (maintainAspectRatio && _aspectRatio) {\r\n      return _aspectRatio;\r\n    }\r\n    return height ? width / height : null;\r\n  }\r\n  get data() {\r\n    return this.config.data;\r\n  }\r\n  set data(data) {\r\n    this.config.data = data;\r\n  }\r\n  get options() {\r\n    return this._options;\r\n  }\r\n  set options(options) {\r\n    this.config.options = options;\r\n  }\r\n  _initialize() {\r\n    this.notifyPlugins('beforeInit');\r\n    if (this.options.responsive) {\r\n      this.resize();\r\n    } else {\r\n      retinaScale(this, this.options.devicePixelRatio);\r\n    }\r\n    this.bindEvents();\r\n    this.notifyPlugins('afterInit');\r\n    return this;\r\n  }\r\n  clear() {\r\n    clearCanvas(this.canvas, this.ctx);\r\n    return this;\r\n  }\r\n  stop() {\r\n    animator.stop(this);\r\n    return this;\r\n  }\r\n  resize(width, height) {\r\n    if (!animator.running(this)) {\r\n      this._resize(width, height);\r\n    } else {\r\n      this._resizeBeforeDraw = {width, height};\r\n    }\r\n  }\r\n  _resize(width, height) {\r\n    const options = this.options;\r\n    const canvas = this.canvas;\r\n    const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\r\n    const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\r\n    const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\r\n    const mode = this.width ? 'resize' : 'attach';\r\n    this.width = newSize.width;\r\n    this.height = newSize.height;\r\n    this._aspectRatio = this.aspectRatio;\r\n    if (!retinaScale(this, newRatio, true)) {\r\n      return;\r\n    }\r\n    this.notifyPlugins('resize', {size: newSize});\r\n    callback(options.onResize, [this, newSize], this);\r\n    if (this.attached) {\r\n      if (this._doResize(mode)) {\r\n        this.render();\r\n      }\r\n    }\r\n  }\r\n  ensureScalesHaveIDs() {\r\n    const options = this.options;\r\n    const scalesOptions = options.scales || {};\r\n    each(scalesOptions, (axisOptions, axisID) => {\r\n      axisOptions.id = axisID;\r\n    });\r\n  }\r\n  buildOrUpdateScales() {\r\n    const options = this.options;\r\n    const scaleOpts = options.scales;\r\n    const scales = this.scales;\r\n    const updated = Object.keys(scales).reduce((obj, id) => {\r\n      obj[id] = false;\r\n      return obj;\r\n    }, {});\r\n    let items = [];\r\n    if (scaleOpts) {\r\n      items = items.concat(\r\n        Object.keys(scaleOpts).map((id) => {\r\n          const scaleOptions = scaleOpts[id];\r\n          const axis = determineAxis(id, scaleOptions);\r\n          const isRadial = axis === 'r';\r\n          const isHorizontal = axis === 'x';\r\n          return {\r\n            options: scaleOptions,\r\n            dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\r\n            dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\r\n          };\r\n        })\r\n      );\r\n    }\r\n    each(items, (item) => {\r\n      const scaleOptions = item.options;\r\n      const id = scaleOptions.id;\r\n      const axis = determineAxis(id, scaleOptions);\r\n      const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\r\n      if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\r\n        scaleOptions.position = item.dposition;\r\n      }\r\n      updated[id] = true;\r\n      let scale = null;\r\n      if (id in scales && scales[id].type === scaleType) {\r\n        scale = scales[id];\r\n      } else {\r\n        const scaleClass = registry.getScale(scaleType);\r\n        scale = new scaleClass({\r\n          id,\r\n          type: scaleType,\r\n          ctx: this.ctx,\r\n          chart: this\r\n        });\r\n        scales[scale.id] = scale;\r\n      }\r\n      scale.init(scaleOptions, options);\r\n    });\r\n    each(updated, (hasUpdated, id) => {\r\n      if (!hasUpdated) {\r\n        delete scales[id];\r\n      }\r\n    });\r\n    each(scales, (scale) => {\r\n      layouts.configure(this, scale, scale.options);\r\n      layouts.addBox(this, scale);\r\n    });\r\n  }\r\n  _updateMetasets() {\r\n    const metasets = this._metasets;\r\n    const numData = this.data.datasets.length;\r\n    const numMeta = metasets.length;\r\n    metasets.sort((a, b) => a.index - b.index);\r\n    if (numMeta > numData) {\r\n      for (let i = numData; i < numMeta; ++i) {\r\n        this._destroyDatasetMeta(i);\r\n      }\r\n      metasets.splice(numData, numMeta - numData);\r\n    }\r\n    this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\r\n  }\r\n  _removeUnreferencedMetasets() {\r\n    const {_metasets: metasets, data: {datasets}} = this;\r\n    if (metasets.length > datasets.length) {\r\n      delete this._stacks;\r\n    }\r\n    metasets.forEach((meta, index) => {\r\n      if (datasets.filter(x => x === meta._dataset).length === 0) {\r\n        this._destroyDatasetMeta(index);\r\n      }\r\n    });\r\n  }\r\n  buildOrUpdateControllers() {\r\n    const newControllers = [];\r\n    const datasets = this.data.datasets;\r\n    let i, ilen;\r\n    this._removeUnreferencedMetasets();\r\n    for (i = 0, ilen = datasets.length; i < ilen; i++) {\r\n      const dataset = datasets[i];\r\n      let meta = this.getDatasetMeta(i);\r\n      const type = dataset.type || this.config.type;\r\n      if (meta.type && meta.type !== type) {\r\n        this._destroyDatasetMeta(i);\r\n        meta = this.getDatasetMeta(i);\r\n      }\r\n      meta.type = type;\r\n      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\r\n      meta.order = dataset.order || 0;\r\n      meta.index = i;\r\n      meta.label = '' + dataset.label;\r\n      meta.visible = this.isDatasetVisible(i);\r\n      if (meta.controller) {\r\n        meta.controller.updateIndex(i);\r\n        meta.controller.linkScales();\r\n      } else {\r\n        const ControllerClass = registry.getController(type);\r\n        const {datasetElementType, dataElementType} = defaults.datasets[type];\r\n        Object.assign(ControllerClass.prototype, {\r\n          dataElementType: registry.getElement(dataElementType),\r\n          datasetElementType: datasetElementType && registry.getElement(datasetElementType)\r\n        });\r\n        meta.controller = new ControllerClass(this, i);\r\n        newControllers.push(meta.controller);\r\n      }\r\n    }\r\n    this._updateMetasets();\r\n    return newControllers;\r\n  }\r\n  _resetElements() {\r\n    each(this.data.datasets, (dataset, datasetIndex) => {\r\n      this.getDatasetMeta(datasetIndex).controller.reset();\r\n    }, this);\r\n  }\r\n  reset() {\r\n    this._resetElements();\r\n    this.notifyPlugins('reset');\r\n  }\r\n  update(mode) {\r\n    const config = this.config;\r\n    config.update();\r\n    const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\r\n    const animsDisabled = this._animationsDisabled = !options.animation;\r\n    this._updateScales();\r\n    this._checkEventBindings();\r\n    this._updateHiddenIndices();\r\n    this._plugins.invalidate();\r\n    if (this.notifyPlugins('beforeUpdate', {mode, cancelable: true}) === false) {\r\n      return;\r\n    }\r\n    const newControllers = this.buildOrUpdateControllers();\r\n    this.notifyPlugins('beforeElementsUpdate');\r\n    let minPadding = 0;\r\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; i++) {\r\n      const {controller} = this.getDatasetMeta(i);\r\n      const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\r\n      controller.buildOrUpdateElements(reset);\r\n      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\r\n    }\r\n    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\r\n    this._updateLayout(minPadding);\r\n    if (!animsDisabled) {\r\n      each(newControllers, (controller) => {\r\n        controller.reset();\r\n      });\r\n    }\r\n    this._updateDatasets(mode);\r\n    this.notifyPlugins('afterUpdate', {mode});\r\n    this._layers.sort(compare2Level('z', '_idx'));\r\n    const {_active, _lastEvent} = this;\r\n    if (_lastEvent) {\r\n      this._eventHandler(_lastEvent, true);\r\n    } else if (_active.length) {\r\n      this._updateHoverStyles(_active, _active, true);\r\n    }\r\n    this.render();\r\n  }\r\n  _updateScales() {\r\n    each(this.scales, (scale) => {\r\n      layouts.removeBox(this, scale);\r\n    });\r\n    this.ensureScalesHaveIDs();\r\n    this.buildOrUpdateScales();\r\n  }\r\n  _checkEventBindings() {\r\n    const options = this.options;\r\n    const existingEvents = new Set(Object.keys(this._listeners));\r\n    const newEvents = new Set(options.events);\r\n    if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\r\n      this.unbindEvents();\r\n      this.bindEvents();\r\n    }\r\n  }\r\n  _updateHiddenIndices() {\r\n    const {_hiddenIndices} = this;\r\n    const changes = this._getUniformDataChanges() || [];\r\n    for (const {method, start, count} of changes) {\r\n      const move = method === '_removeElements' ? -count : count;\r\n      moveNumericKeys(_hiddenIndices, start, move);\r\n    }\r\n  }\r\n  _getUniformDataChanges() {\r\n    const _dataChanges = this._dataChanges;\r\n    if (!_dataChanges || !_dataChanges.length) {\r\n      return;\r\n    }\r\n    this._dataChanges = [];\r\n    const datasetCount = this.data.datasets.length;\r\n    const makeSet = (idx) => new Set(\r\n      _dataChanges\r\n        .filter(c => c[0] === idx)\r\n        .map((c, i) => i + ',' + c.splice(1).join(','))\r\n    );\r\n    const changeSet = makeSet(0);\r\n    for (let i = 1; i < datasetCount; i++) {\r\n      if (!setsEqual(changeSet, makeSet(i))) {\r\n        return;\r\n      }\r\n    }\r\n    return Array.from(changeSet)\r\n      .map(c => c.split(','))\r\n      .map(a => ({method: a[1], start: +a[2], count: +a[3]}));\r\n  }\r\n  _updateLayout(minPadding) {\r\n    if (this.notifyPlugins('beforeLayout', {cancelable: true}) === false) {\r\n      return;\r\n    }\r\n    layouts.update(this, this.width, this.height, minPadding);\r\n    const area = this.chartArea;\r\n    const noArea = area.width <= 0 || area.height <= 0;\r\n    this._layers = [];\r\n    each(this.boxes, (box) => {\r\n      if (noArea && box.position === 'chartArea') {\r\n        return;\r\n      }\r\n      if (box.configure) {\r\n        box.configure();\r\n      }\r\n      this._layers.push(...box._layers());\r\n    }, this);\r\n    this._layers.forEach((item, index) => {\r\n      item._idx = index;\r\n    });\r\n    this.notifyPlugins('afterLayout');\r\n  }\r\n  _updateDatasets(mode) {\r\n    if (this.notifyPlugins('beforeDatasetsUpdate', {mode, cancelable: true}) === false) {\r\n      return;\r\n    }\r\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\r\n      this.getDatasetMeta(i).controller.configure();\r\n    }\r\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\r\n      this._updateDataset(i, isFunction(mode) ? mode({datasetIndex: i}) : mode);\r\n    }\r\n    this.notifyPlugins('afterDatasetsUpdate', {mode});\r\n  }\r\n  _updateDataset(index, mode) {\r\n    const meta = this.getDatasetMeta(index);\r\n    const args = {meta, index, mode, cancelable: true};\r\n    if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\r\n      return;\r\n    }\r\n    meta.controller._update(mode);\r\n    args.cancelable = false;\r\n    this.notifyPlugins('afterDatasetUpdate', args);\r\n  }\r\n  render() {\r\n    if (this.notifyPlugins('beforeRender', {cancelable: true}) === false) {\r\n      return;\r\n    }\r\n    if (animator.has(this)) {\r\n      if (this.attached && !animator.running(this)) {\r\n        animator.start(this);\r\n      }\r\n    } else {\r\n      this.draw();\r\n      onAnimationsComplete({chart: this});\r\n    }\r\n  }\r\n  draw() {\r\n    let i;\r\n    if (this._resizeBeforeDraw) {\r\n      const {width, height} = this._resizeBeforeDraw;\r\n      this._resize(width, height);\r\n      this._resizeBeforeDraw = null;\r\n    }\r\n    this.clear();\r\n    if (this.width <= 0 || this.height <= 0) {\r\n      return;\r\n    }\r\n    if (this.notifyPlugins('beforeDraw', {cancelable: true}) === false) {\r\n      return;\r\n    }\r\n    const layers = this._layers;\r\n    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\r\n      layers[i].draw(this.chartArea);\r\n    }\r\n    this._drawDatasets();\r\n    for (; i < layers.length; ++i) {\r\n      layers[i].draw(this.chartArea);\r\n    }\r\n    this.notifyPlugins('afterDraw');\r\n  }\r\n  _getSortedDatasetMetas(filterVisible) {\r\n    const metasets = this._sortedMetasets;\r\n    const result = [];\r\n    let i, ilen;\r\n    for (i = 0, ilen = metasets.length; i < ilen; ++i) {\r\n      const meta = metasets[i];\r\n      if (!filterVisible || meta.visible) {\r\n        result.push(meta);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  getSortedVisibleDatasetMetas() {\r\n    return this._getSortedDatasetMetas(true);\r\n  }\r\n  _drawDatasets() {\r\n    if (this.notifyPlugins('beforeDatasetsDraw', {cancelable: true}) === false) {\r\n      return;\r\n    }\r\n    const metasets = this.getSortedVisibleDatasetMetas();\r\n    for (let i = metasets.length - 1; i >= 0; --i) {\r\n      this._drawDataset(metasets[i]);\r\n    }\r\n    this.notifyPlugins('afterDatasetsDraw');\r\n  }\r\n  _drawDataset(meta) {\r\n    const ctx = this.ctx;\r\n    const clip = meta._clip;\r\n    const useClip = !clip.disabled;\r\n    const area = this.chartArea;\r\n    const args = {\r\n      meta,\r\n      index: meta.index,\r\n      cancelable: true\r\n    };\r\n    if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\r\n      return;\r\n    }\r\n    if (useClip) {\r\n      clipArea(ctx, {\r\n        left: clip.left === false ? 0 : area.left - clip.left,\r\n        right: clip.right === false ? this.width : area.right + clip.right,\r\n        top: clip.top === false ? 0 : area.top - clip.top,\r\n        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom\r\n      });\r\n    }\r\n    meta.controller.draw();\r\n    if (useClip) {\r\n      unclipArea(ctx);\r\n    }\r\n    args.cancelable = false;\r\n    this.notifyPlugins('afterDatasetDraw', args);\r\n  }\r\n  isPointInArea(point) {\r\n    return _isPointInArea(point, this.chartArea, this._minPadding);\r\n  }\r\n  getElementsAtEventForMode(e, mode, options, useFinalPosition) {\r\n    const method = Interaction.modes[mode];\r\n    if (typeof method === 'function') {\r\n      return method(this, e, options, useFinalPosition);\r\n    }\r\n    return [];\r\n  }\r\n  getDatasetMeta(datasetIndex) {\r\n    const dataset = this.data.datasets[datasetIndex];\r\n    const metasets = this._metasets;\r\n    let meta = metasets.filter(x => x && x._dataset === dataset).pop();\r\n    if (!meta) {\r\n      meta = {\r\n        type: null,\r\n        data: [],\r\n        dataset: null,\r\n        controller: null,\r\n        hidden: null,\r\n        xAxisID: null,\r\n        yAxisID: null,\r\n        order: dataset && dataset.order || 0,\r\n        index: datasetIndex,\r\n        _dataset: dataset,\r\n        _parsed: [],\r\n        _sorted: false\r\n      };\r\n      metasets.push(meta);\r\n    }\r\n    return meta;\r\n  }\r\n  getContext() {\r\n    return this.$context || (this.$context = createContext(null, {chart: this, type: 'chart'}));\r\n  }\r\n  getVisibleDatasetCount() {\r\n    return this.getSortedVisibleDatasetMetas().length;\r\n  }\r\n  isDatasetVisible(datasetIndex) {\r\n    const dataset = this.data.datasets[datasetIndex];\r\n    if (!dataset) {\r\n      return false;\r\n    }\r\n    const meta = this.getDatasetMeta(datasetIndex);\r\n    return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\r\n  }\r\n  setDatasetVisibility(datasetIndex, visible) {\r\n    const meta = this.getDatasetMeta(datasetIndex);\r\n    meta.hidden = !visible;\r\n  }\r\n  toggleDataVisibility(index) {\r\n    this._hiddenIndices[index] = !this._hiddenIndices[index];\r\n  }\r\n  getDataVisibility(index) {\r\n    return !this._hiddenIndices[index];\r\n  }\r\n  _updateVisibility(datasetIndex, dataIndex, visible) {\r\n    const mode = visible ? 'show' : 'hide';\r\n    const meta = this.getDatasetMeta(datasetIndex);\r\n    const anims = meta.controller._resolveAnimations(undefined, mode);\r\n    if (defined(dataIndex)) {\r\n      meta.data[dataIndex].hidden = !visible;\r\n      this.update();\r\n    } else {\r\n      this.setDatasetVisibility(datasetIndex, visible);\r\n      anims.update(meta, {visible});\r\n      this.update((ctx) => ctx.datasetIndex === datasetIndex ? mode : undefined);\r\n    }\r\n  }\r\n  hide(datasetIndex, dataIndex) {\r\n    this._updateVisibility(datasetIndex, dataIndex, false);\r\n  }\r\n  show(datasetIndex, dataIndex) {\r\n    this._updateVisibility(datasetIndex, dataIndex, true);\r\n  }\r\n  _destroyDatasetMeta(datasetIndex) {\r\n    const meta = this._metasets[datasetIndex];\r\n    if (meta && meta.controller) {\r\n      meta.controller._destroy();\r\n    }\r\n    delete this._metasets[datasetIndex];\r\n  }\r\n  _stop() {\r\n    let i, ilen;\r\n    this.stop();\r\n    animator.remove(this);\r\n    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\r\n      this._destroyDatasetMeta(i);\r\n    }\r\n  }\r\n  destroy() {\r\n    this.notifyPlugins('beforeDestroy');\r\n    const {canvas, ctx} = this;\r\n    this._stop();\r\n    this.config.clearCache();\r\n    if (canvas) {\r\n      this.unbindEvents();\r\n      clearCanvas(canvas, ctx);\r\n      this.platform.releaseContext(ctx);\r\n      this.canvas = null;\r\n      this.ctx = null;\r\n    }\r\n    this.notifyPlugins('destroy');\r\n    delete instances[this.id];\r\n    this.notifyPlugins('afterDestroy');\r\n  }\r\n  toBase64Image(...args) {\r\n    return this.canvas.toDataURL(...args);\r\n  }\r\n  bindEvents() {\r\n    this.bindUserEvents();\r\n    if (this.options.responsive) {\r\n      this.bindResponsiveEvents();\r\n    } else {\r\n      this.attached = true;\r\n    }\r\n  }\r\n  bindUserEvents() {\r\n    const listeners = this._listeners;\r\n    const platform = this.platform;\r\n    const _add = (type, listener) => {\r\n      platform.addEventListener(this, type, listener);\r\n      listeners[type] = listener;\r\n    };\r\n    const listener = (e, x, y) => {\r\n      e.offsetX = x;\r\n      e.offsetY = y;\r\n      this._eventHandler(e);\r\n    };\r\n    each(this.options.events, (type) => _add(type, listener));\r\n  }\r\n  bindResponsiveEvents() {\r\n    if (!this._responsiveListeners) {\r\n      this._responsiveListeners = {};\r\n    }\r\n    const listeners = this._responsiveListeners;\r\n    const platform = this.platform;\r\n    const _add = (type, listener) => {\r\n      platform.addEventListener(this, type, listener);\r\n      listeners[type] = listener;\r\n    };\r\n    const _remove = (type, listener) => {\r\n      if (listeners[type]) {\r\n        platform.removeEventListener(this, type, listener);\r\n        delete listeners[type];\r\n      }\r\n    };\r\n    const listener = (width, height) => {\r\n      if (this.canvas) {\r\n        this.resize(width, height);\r\n      }\r\n    };\r\n    let detached;\r\n    const attached = () => {\r\n      _remove('attach', attached);\r\n      this.attached = true;\r\n      this.resize();\r\n      _add('resize', listener);\r\n      _add('detach', detached);\r\n    };\r\n    detached = () => {\r\n      this.attached = false;\r\n      _remove('resize', listener);\r\n      this._stop();\r\n      this._resize(0, 0);\r\n      _add('attach', attached);\r\n    };\r\n    if (platform.isAttached(this.canvas)) {\r\n      attached();\r\n    } else {\r\n      detached();\r\n    }\r\n  }\r\n  unbindEvents() {\r\n    each(this._listeners, (listener, type) => {\r\n      this.platform.removeEventListener(this, type, listener);\r\n    });\r\n    this._listeners = {};\r\n    each(this._responsiveListeners, (listener, type) => {\r\n      this.platform.removeEventListener(this, type, listener);\r\n    });\r\n    this._responsiveListeners = undefined;\r\n  }\r\n  updateHoverStyle(items, mode, enabled) {\r\n    const prefix = enabled ? 'set' : 'remove';\r\n    let meta, item, i, ilen;\r\n    if (mode === 'dataset') {\r\n      meta = this.getDatasetMeta(items[0].datasetIndex);\r\n      meta.controller['_' + prefix + 'DatasetHoverStyle']();\r\n    }\r\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\r\n      item = items[i];\r\n      const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\r\n      if (controller) {\r\n        controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\r\n      }\r\n    }\r\n  }\r\n  getActiveElements() {\r\n    return this._active || [];\r\n  }\r\n  setActiveElements(activeElements) {\r\n    const lastActive = this._active || [];\r\n    const active = activeElements.map(({datasetIndex, index}) => {\r\n      const meta = this.getDatasetMeta(datasetIndex);\r\n      if (!meta) {\r\n        throw new Error('No dataset found at index ' + datasetIndex);\r\n      }\r\n      return {\r\n        datasetIndex,\r\n        element: meta.data[index],\r\n        index,\r\n      };\r\n    });\r\n    const changed = !_elementsEqual(active, lastActive);\r\n    if (changed) {\r\n      this._active = active;\r\n      this._lastEvent = null;\r\n      this._updateHoverStyles(active, lastActive);\r\n    }\r\n  }\r\n  notifyPlugins(hook, args, filter) {\r\n    return this._plugins.notify(this, hook, args, filter);\r\n  }\r\n  _updateHoverStyles(active, lastActive, replay) {\r\n    const hoverOptions = this.options.hover;\r\n    const diff = (a, b) => a.filter(x => !b.some(y => x.datasetIndex === y.datasetIndex && x.index === y.index));\r\n    const deactivated = diff(lastActive, active);\r\n    const activated = replay ? active : diff(active, lastActive);\r\n    if (deactivated.length) {\r\n      this.updateHoverStyle(deactivated, hoverOptions.mode, false);\r\n    }\r\n    if (activated.length && hoverOptions.mode) {\r\n      this.updateHoverStyle(activated, hoverOptions.mode, true);\r\n    }\r\n  }\r\n  _eventHandler(e, replay) {\r\n    const args = {\r\n      event: e,\r\n      replay,\r\n      cancelable: true,\r\n      inChartArea: this.isPointInArea(e)\r\n    };\r\n    const eventFilter = (plugin) => (plugin.options.events || this.options.events).includes(e.native.type);\r\n    if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\r\n      return;\r\n    }\r\n    const changed = this._handleEvent(e, replay, args.inChartArea);\r\n    args.cancelable = false;\r\n    this.notifyPlugins('afterEvent', args, eventFilter);\r\n    if (changed || args.changed) {\r\n      this.render();\r\n    }\r\n    return this;\r\n  }\r\n  _handleEvent(e, replay, inChartArea) {\r\n    const {_active: lastActive = [], options} = this;\r\n    const useFinalPosition = replay;\r\n    const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\r\n    const isClick = _isClickEvent(e);\r\n    const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\r\n    if (inChartArea) {\r\n      this._lastEvent = null;\r\n      callback(options.onHover, [e, active, this], this);\r\n      if (isClick) {\r\n        callback(options.onClick, [e, active, this], this);\r\n      }\r\n    }\r\n    const changed = !_elementsEqual(active, lastActive);\r\n    if (changed || replay) {\r\n      this._active = active;\r\n      this._updateHoverStyles(active, lastActive, replay);\r\n    }\r\n    this._lastEvent = lastEvent;\r\n    return changed;\r\n  }\r\n  _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\r\n    if (e.type === 'mouseout') {\r\n      return [];\r\n    }\r\n    if (!inChartArea) {\r\n      return lastActive;\r\n    }\r\n    const hoverOptions = this.options.hover;\r\n    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\r\n  }\r\n}\r\nconst invalidatePlugins = () => each(Chart.instances, (chart) => chart._plugins.invalidate());\r\nconst enumerable = true;\r\nObject.defineProperties(Chart, {\r\n  defaults: {\r\n    enumerable,\r\n    value: defaults\r\n  },\r\n  instances: {\r\n    enumerable,\r\n    value: instances\r\n  },\r\n  overrides: {\r\n    enumerable,\r\n    value: overrides\r\n  },\r\n  registry: {\r\n    enumerable,\r\n    value: registry\r\n  },\r\n  version: {\r\n    enumerable,\r\n    value: version\r\n  },\r\n  getChart: {\r\n    enumerable,\r\n    value: getChart\r\n  },\r\n  register: {\r\n    enumerable,\r\n    value: (...items) => {\r\n      registry.add(...items);\r\n      invalidatePlugins();\r\n    }\r\n  },\r\n  unregister: {\r\n    enumerable,\r\n    value: (...items) => {\r\n      registry.remove(...items);\r\n      invalidatePlugins();\r\n    }\r\n  }\r\n});\r\n\r\nfunction clipArc(ctx, element, endAngle) {\r\n  const {startAngle, pixelMargin, x, y, outerRadius, innerRadius} = element;\r\n  let angleMargin = pixelMargin / outerRadius;\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\r\n  if (innerRadius > pixelMargin) {\r\n    angleMargin = pixelMargin / innerRadius;\r\n    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\r\n  } else {\r\n    ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\r\n  }\r\n  ctx.closePath();\r\n  ctx.clip();\r\n}\r\nfunction toRadiusCorners(value) {\r\n  return _readValueToProps(value, ['outerStart', 'outerEnd', 'innerStart', 'innerEnd']);\r\n}\r\nfunction parseBorderRadius$1(arc, innerRadius, outerRadius, angleDelta) {\r\n  const o = toRadiusCorners(arc.options.borderRadius);\r\n  const halfThickness = (outerRadius - innerRadius) / 2;\r\n  const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\r\n  const computeOuterLimit = (val) => {\r\n    const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\r\n    return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\r\n  };\r\n  return {\r\n    outerStart: computeOuterLimit(o.outerStart),\r\n    outerEnd: computeOuterLimit(o.outerEnd),\r\n    innerStart: _limitValue(o.innerStart, 0, innerLimit),\r\n    innerEnd: _limitValue(o.innerEnd, 0, innerLimit),\r\n  };\r\n}\r\nfunction rThetaToXY(r, theta, x, y) {\r\n  return {\r\n    x: x + r * Math.cos(theta),\r\n    y: y + r * Math.sin(theta),\r\n  };\r\n}\r\nfunction pathArc(ctx, element, offset, spacing, end, circular) {\r\n  const {x, y, startAngle: start, pixelMargin, innerRadius: innerR} = element;\r\n  const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\r\n  const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\r\n  let spacingOffset = 0;\r\n  const alpha = end - start;\r\n  if (spacing) {\r\n    const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\r\n    const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\r\n    const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\r\n    const adjustedAngle = avNogSpacingRadius !== 0 ? (alpha * avNogSpacingRadius) / (avNogSpacingRadius + spacing) : alpha;\r\n    spacingOffset = (alpha - adjustedAngle) / 2;\r\n  }\r\n  const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\r\n  const angleOffset = (alpha - beta) / 2;\r\n  const startAngle = start + angleOffset + spacingOffset;\r\n  const endAngle = end - angleOffset - spacingOffset;\r\n  const {outerStart, outerEnd, innerStart, innerEnd} = parseBorderRadius$1(element, innerRadius, outerRadius, endAngle - startAngle);\r\n  const outerStartAdjustedRadius = outerRadius - outerStart;\r\n  const outerEndAdjustedRadius = outerRadius - outerEnd;\r\n  const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\r\n  const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\r\n  const innerStartAdjustedRadius = innerRadius + innerStart;\r\n  const innerEndAdjustedRadius = innerRadius + innerEnd;\r\n  const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\r\n  const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\r\n  ctx.beginPath();\r\n  if (circular) {\r\n    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerEndAdjustedAngle);\r\n    if (outerEnd > 0) {\r\n      const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\r\n      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\r\n    }\r\n    const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\r\n    ctx.lineTo(p4.x, p4.y);\r\n    if (innerEnd > 0) {\r\n      const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\r\n      ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\r\n    }\r\n    ctx.arc(x, y, innerRadius, endAngle - (innerEnd / innerRadius), startAngle + (innerStart / innerRadius), true);\r\n    if (innerStart > 0) {\r\n      const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\r\n      ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\r\n    }\r\n    const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\r\n    ctx.lineTo(p8.x, p8.y);\r\n    if (outerStart > 0) {\r\n      const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\r\n      ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\r\n    }\r\n  } else {\r\n    ctx.moveTo(x, y);\r\n    const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\r\n    const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\r\n    ctx.lineTo(outerStartX, outerStartY);\r\n    const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\r\n    const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\r\n    ctx.lineTo(outerEndX, outerEndY);\r\n  }\r\n  ctx.closePath();\r\n}\r\nfunction drawArc(ctx, element, offset, spacing, circular) {\r\n  const {fullCircles, startAngle, circumference} = element;\r\n  let endAngle = element.endAngle;\r\n  if (fullCircles) {\r\n    pathArc(ctx, element, offset, spacing, startAngle + TAU, circular);\r\n    for (let i = 0; i < fullCircles; ++i) {\r\n      ctx.fill();\r\n    }\r\n    if (!isNaN(circumference)) {\r\n      endAngle = startAngle + circumference % TAU;\r\n      if (circumference % TAU === 0) {\r\n        endAngle += TAU;\r\n      }\r\n    }\r\n  }\r\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\r\n  ctx.fill();\r\n  return endAngle;\r\n}\r\nfunction drawFullCircleBorders(ctx, element, inner) {\r\n  const {x, y, startAngle, pixelMargin, fullCircles} = element;\r\n  const outerRadius = Math.max(element.outerRadius - pixelMargin, 0);\r\n  const innerRadius = element.innerRadius + pixelMargin;\r\n  let i;\r\n  if (inner) {\r\n    clipArc(ctx, element, startAngle + TAU);\r\n  }\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, innerRadius, startAngle + TAU, startAngle, true);\r\n  for (i = 0; i < fullCircles; ++i) {\r\n    ctx.stroke();\r\n  }\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, outerRadius, startAngle, startAngle + TAU);\r\n  for (i = 0; i < fullCircles; ++i) {\r\n    ctx.stroke();\r\n  }\r\n}\r\nfunction drawBorder(ctx, element, offset, spacing, endAngle, circular) {\r\n  const {options} = element;\r\n  const {borderWidth, borderJoinStyle} = options;\r\n  const inner = options.borderAlign === 'inner';\r\n  if (!borderWidth) {\r\n    return;\r\n  }\r\n  if (inner) {\r\n    ctx.lineWidth = borderWidth * 2;\r\n    ctx.lineJoin = borderJoinStyle || 'round';\r\n  } else {\r\n    ctx.lineWidth = borderWidth;\r\n    ctx.lineJoin = borderJoinStyle || 'bevel';\r\n  }\r\n  if (element.fullCircles) {\r\n    drawFullCircleBorders(ctx, element, inner);\r\n  }\r\n  if (inner) {\r\n    clipArc(ctx, element, endAngle);\r\n  }\r\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\r\n  ctx.stroke();\r\n}\r\nclass ArcElement extends Element {\r\n  constructor(cfg) {\r\n    super();\r\n    this.options = undefined;\r\n    this.circumference = undefined;\r\n    this.startAngle = undefined;\r\n    this.endAngle = undefined;\r\n    this.innerRadius = undefined;\r\n    this.outerRadius = undefined;\r\n    this.pixelMargin = 0;\r\n    this.fullCircles = 0;\r\n    if (cfg) {\r\n      Object.assign(this, cfg);\r\n    }\r\n  }\r\n  inRange(chartX, chartY, useFinalPosition) {\r\n    const point = this.getProps(['x', 'y'], useFinalPosition);\r\n    const {angle, distance} = getAngleFromPoint(point, {x: chartX, y: chartY});\r\n    const {startAngle, endAngle, innerRadius, outerRadius, circumference} = this.getProps([\r\n      'startAngle',\r\n      'endAngle',\r\n      'innerRadius',\r\n      'outerRadius',\r\n      'circumference'\r\n    ], useFinalPosition);\r\n    const rAdjust = this.options.spacing / 2;\r\n    const _circumference = valueOrDefault(circumference, endAngle - startAngle);\r\n    const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);\r\n    const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\r\n    return (betweenAngles && withinRadius);\r\n  }\r\n  getCenterPoint(useFinalPosition) {\r\n    const {x, y, startAngle, endAngle, innerRadius, outerRadius} = this.getProps([\r\n      'x',\r\n      'y',\r\n      'startAngle',\r\n      'endAngle',\r\n      'innerRadius',\r\n      'outerRadius',\r\n      'circumference',\r\n    ], useFinalPosition);\r\n    const {offset, spacing} = this.options;\r\n    const halfAngle = (startAngle + endAngle) / 2;\r\n    const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\r\n    return {\r\n      x: x + Math.cos(halfAngle) * halfRadius,\r\n      y: y + Math.sin(halfAngle) * halfRadius\r\n    };\r\n  }\r\n  tooltipPosition(useFinalPosition) {\r\n    return this.getCenterPoint(useFinalPosition);\r\n  }\r\n  draw(ctx) {\r\n    const {options, circumference} = this;\r\n    const offset = (options.offset || 0) / 2;\r\n    const spacing = (options.spacing || 0) / 2;\r\n    const circular = options.circular;\r\n    this.pixelMargin = (options.borderAlign === 'inner') ? 0.33 : 0;\r\n    this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\r\n    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\r\n      return;\r\n    }\r\n    ctx.save();\r\n    let radiusOffset = 0;\r\n    if (offset) {\r\n      radiusOffset = offset / 2;\r\n      const halfAngle = (this.startAngle + this.endAngle) / 2;\r\n      ctx.translate(Math.cos(halfAngle) * radiusOffset, Math.sin(halfAngle) * radiusOffset);\r\n      if (this.circumference >= PI) {\r\n        radiusOffset = offset;\r\n      }\r\n    }\r\n    ctx.fillStyle = options.backgroundColor;\r\n    ctx.strokeStyle = options.borderColor;\r\n    const endAngle = drawArc(ctx, this, radiusOffset, spacing, circular);\r\n    drawBorder(ctx, this, radiusOffset, spacing, endAngle, circular);\r\n    ctx.restore();\r\n  }\r\n}\r\nArcElement.id = 'arc';\r\nArcElement.defaults = {\r\n  borderAlign: 'center',\r\n  borderColor: '#fff',\r\n  borderJoinStyle: undefined,\r\n  borderRadius: 0,\r\n  borderWidth: 2,\r\n  offset: 0,\r\n  spacing: 0,\r\n  angle: undefined,\r\n  circular: true,\r\n};\r\nArcElement.defaultRoutes = {\r\n  backgroundColor: 'backgroundColor'\r\n};\r\n\r\nfunction setStyle(ctx, options, style = options) {\r\n  ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\r\n  ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\r\n  ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\r\n  ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\r\n  ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\r\n  ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\r\n}\r\nfunction lineTo(ctx, previous, target) {\r\n  ctx.lineTo(target.x, target.y);\r\n}\r\nfunction getLineMethod(options) {\r\n  if (options.stepped) {\r\n    return _steppedLineTo;\r\n  }\r\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\r\n    return _bezierCurveTo;\r\n  }\r\n  return lineTo;\r\n}\r\nfunction pathVars(points, segment, params = {}) {\r\n  const count = points.length;\r\n  const {start: paramsStart = 0, end: paramsEnd = count - 1} = params;\r\n  const {start: segmentStart, end: segmentEnd} = segment;\r\n  const start = Math.max(paramsStart, segmentStart);\r\n  const end = Math.min(paramsEnd, segmentEnd);\r\n  const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\r\n  return {\r\n    count,\r\n    start,\r\n    loop: segment.loop,\r\n    ilen: end < start && !outside ? count + end - start : end - start\r\n  };\r\n}\r\nfunction pathSegment(ctx, line, segment, params) {\r\n  const {points, options} = line;\r\n  const {count, start, loop, ilen} = pathVars(points, segment, params);\r\n  const lineMethod = getLineMethod(options);\r\n  let {move = true, reverse} = params || {};\r\n  let i, point, prev;\r\n  for (i = 0; i <= ilen; ++i) {\r\n    point = points[(start + (reverse ? ilen - i : i)) % count];\r\n    if (point.skip) {\r\n      continue;\r\n    } else if (move) {\r\n      ctx.moveTo(point.x, point.y);\r\n      move = false;\r\n    } else {\r\n      lineMethod(ctx, prev, point, reverse, options.stepped);\r\n    }\r\n    prev = point;\r\n  }\r\n  if (loop) {\r\n    point = points[(start + (reverse ? ilen : 0)) % count];\r\n    lineMethod(ctx, prev, point, reverse, options.stepped);\r\n  }\r\n  return !!loop;\r\n}\r\nfunction fastPathSegment(ctx, line, segment, params) {\r\n  const points = line.points;\r\n  const {count, start, ilen} = pathVars(points, segment, params);\r\n  const {move = true, reverse} = params || {};\r\n  let avgX = 0;\r\n  let countX = 0;\r\n  let i, point, prevX, minY, maxY, lastY;\r\n  const pointIndex = (index) => (start + (reverse ? ilen - index : index)) % count;\r\n  const drawX = () => {\r\n    if (minY !== maxY) {\r\n      ctx.lineTo(avgX, maxY);\r\n      ctx.lineTo(avgX, minY);\r\n      ctx.lineTo(avgX, lastY);\r\n    }\r\n  };\r\n  if (move) {\r\n    point = points[pointIndex(0)];\r\n    ctx.moveTo(point.x, point.y);\r\n  }\r\n  for (i = 0; i <= ilen; ++i) {\r\n    point = points[pointIndex(i)];\r\n    if (point.skip) {\r\n      continue;\r\n    }\r\n    const x = point.x;\r\n    const y = point.y;\r\n    const truncX = x | 0;\r\n    if (truncX === prevX) {\r\n      if (y < minY) {\r\n        minY = y;\r\n      } else if (y > maxY) {\r\n        maxY = y;\r\n      }\r\n      avgX = (countX * avgX + x) / ++countX;\r\n    } else {\r\n      drawX();\r\n      ctx.lineTo(x, y);\r\n      prevX = truncX;\r\n      countX = 0;\r\n      minY = maxY = y;\r\n    }\r\n    lastY = y;\r\n  }\r\n  drawX();\r\n}\r\nfunction _getSegmentMethod(line) {\r\n  const opts = line.options;\r\n  const borderDash = opts.borderDash && opts.borderDash.length;\r\n  const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\r\n  return useFastPath ? fastPathSegment : pathSegment;\r\n}\r\nfunction _getInterpolationMethod(options) {\r\n  if (options.stepped) {\r\n    return _steppedInterpolation;\r\n  }\r\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\r\n    return _bezierInterpolation;\r\n  }\r\n  return _pointInLine;\r\n}\r\nfunction strokePathWithCache(ctx, line, start, count) {\r\n  let path = line._path;\r\n  if (!path) {\r\n    path = line._path = new Path2D();\r\n    if (line.path(path, start, count)) {\r\n      path.closePath();\r\n    }\r\n  }\r\n  setStyle(ctx, line.options);\r\n  ctx.stroke(path);\r\n}\r\nfunction strokePathDirect(ctx, line, start, count) {\r\n  const {segments, options} = line;\r\n  const segmentMethod = _getSegmentMethod(line);\r\n  for (const segment of segments) {\r\n    setStyle(ctx, options, segment.style);\r\n    ctx.beginPath();\r\n    if (segmentMethod(ctx, line, segment, {start, end: start + count - 1})) {\r\n      ctx.closePath();\r\n    }\r\n    ctx.stroke();\r\n  }\r\n}\r\nconst usePath2D = typeof Path2D === 'function';\r\nfunction draw(ctx, line, start, count) {\r\n  if (usePath2D && !line.options.segment) {\r\n    strokePathWithCache(ctx, line, start, count);\r\n  } else {\r\n    strokePathDirect(ctx, line, start, count);\r\n  }\r\n}\r\nclass LineElement extends Element {\r\n  constructor(cfg) {\r\n    super();\r\n    this.animated = true;\r\n    this.options = undefined;\r\n    this._chart = undefined;\r\n    this._loop = undefined;\r\n    this._fullLoop = undefined;\r\n    this._path = undefined;\r\n    this._points = undefined;\r\n    this._segments = undefined;\r\n    this._decimated = false;\r\n    this._pointsUpdated = false;\r\n    this._datasetIndex = undefined;\r\n    if (cfg) {\r\n      Object.assign(this, cfg);\r\n    }\r\n  }\r\n  updateControlPoints(chartArea, indexAxis) {\r\n    const options = this.options;\r\n    if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\r\n      const loop = options.spanGaps ? this._loop : this._fullLoop;\r\n      _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\r\n      this._pointsUpdated = true;\r\n    }\r\n  }\r\n  set points(points) {\r\n    this._points = points;\r\n    delete this._segments;\r\n    delete this._path;\r\n    this._pointsUpdated = false;\r\n  }\r\n  get points() {\r\n    return this._points;\r\n  }\r\n  get segments() {\r\n    return this._segments || (this._segments = _computeSegments(this, this.options.segment));\r\n  }\r\n  first() {\r\n    const segments = this.segments;\r\n    const points = this.points;\r\n    return segments.length && points[segments[0].start];\r\n  }\r\n  last() {\r\n    const segments = this.segments;\r\n    const points = this.points;\r\n    const count = segments.length;\r\n    return count && points[segments[count - 1].end];\r\n  }\r\n  interpolate(point, property) {\r\n    const options = this.options;\r\n    const value = point[property];\r\n    const points = this.points;\r\n    const segments = _boundSegments(this, {property, start: value, end: value});\r\n    if (!segments.length) {\r\n      return;\r\n    }\r\n    const result = [];\r\n    const _interpolate = _getInterpolationMethod(options);\r\n    let i, ilen;\r\n    for (i = 0, ilen = segments.length; i < ilen; ++i) {\r\n      const {start, end} = segments[i];\r\n      const p1 = points[start];\r\n      const p2 = points[end];\r\n      if (p1 === p2) {\r\n        result.push(p1);\r\n        continue;\r\n      }\r\n      const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\r\n      const interpolated = _interpolate(p1, p2, t, options.stepped);\r\n      interpolated[property] = point[property];\r\n      result.push(interpolated);\r\n    }\r\n    return result.length === 1 ? result[0] : result;\r\n  }\r\n  pathSegment(ctx, segment, params) {\r\n    const segmentMethod = _getSegmentMethod(this);\r\n    return segmentMethod(ctx, this, segment, params);\r\n  }\r\n  path(ctx, start, count) {\r\n    const segments = this.segments;\r\n    const segmentMethod = _getSegmentMethod(this);\r\n    let loop = this._loop;\r\n    start = start || 0;\r\n    count = count || (this.points.length - start);\r\n    for (const segment of segments) {\r\n      loop &= segmentMethod(ctx, this, segment, {start, end: start + count - 1});\r\n    }\r\n    return !!loop;\r\n  }\r\n  draw(ctx, chartArea, start, count) {\r\n    const options = this.options || {};\r\n    const points = this.points || [];\r\n    if (points.length && options.borderWidth) {\r\n      ctx.save();\r\n      draw(ctx, this, start, count);\r\n      ctx.restore();\r\n    }\r\n    if (this.animated) {\r\n      this._pointsUpdated = false;\r\n      this._path = undefined;\r\n    }\r\n  }\r\n}\r\nLineElement.id = 'line';\r\nLineElement.defaults = {\r\n  borderCapStyle: 'butt',\r\n  borderDash: [],\r\n  borderDashOffset: 0,\r\n  borderJoinStyle: 'miter',\r\n  borderWidth: 3,\r\n  capBezierPoints: true,\r\n  cubicInterpolationMode: 'default',\r\n  fill: false,\r\n  spanGaps: false,\r\n  stepped: false,\r\n  tension: 0,\r\n};\r\nLineElement.defaultRoutes = {\r\n  backgroundColor: 'backgroundColor',\r\n  borderColor: 'borderColor'\r\n};\r\nLineElement.descriptors = {\r\n  _scriptable: true,\r\n  _indexable: (name) => name !== 'borderDash' && name !== 'fill',\r\n};\r\n\r\nfunction inRange$1(el, pos, axis, useFinalPosition) {\r\n  const options = el.options;\r\n  const {[axis]: value} = el.getProps([axis], useFinalPosition);\r\n  return (Math.abs(pos - value) < options.radius + options.hitRadius);\r\n}\r\nclass PointElement extends Element {\r\n  constructor(cfg) {\r\n    super();\r\n    this.options = undefined;\r\n    this.parsed = undefined;\r\n    this.skip = undefined;\r\n    this.stop = undefined;\r\n    if (cfg) {\r\n      Object.assign(this, cfg);\r\n    }\r\n  }\r\n  inRange(mouseX, mouseY, useFinalPosition) {\r\n    const options = this.options;\r\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\r\n    return ((Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2)) < Math.pow(options.hitRadius + options.radius, 2));\r\n  }\r\n  inXRange(mouseX, useFinalPosition) {\r\n    return inRange$1(this, mouseX, 'x', useFinalPosition);\r\n  }\r\n  inYRange(mouseY, useFinalPosition) {\r\n    return inRange$1(this, mouseY, 'y', useFinalPosition);\r\n  }\r\n  getCenterPoint(useFinalPosition) {\r\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\r\n    return {x, y};\r\n  }\r\n  size(options) {\r\n    options = options || this.options || {};\r\n    let radius = options.radius || 0;\r\n    radius = Math.max(radius, radius && options.hoverRadius || 0);\r\n    const borderWidth = radius && options.borderWidth || 0;\r\n    return (radius + borderWidth) * 2;\r\n  }\r\n  draw(ctx, area) {\r\n    const options = this.options;\r\n    if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\r\n      return;\r\n    }\r\n    ctx.strokeStyle = options.borderColor;\r\n    ctx.lineWidth = options.borderWidth;\r\n    ctx.fillStyle = options.backgroundColor;\r\n    drawPoint(ctx, options, this.x, this.y);\r\n  }\r\n  getRange() {\r\n    const options = this.options || {};\r\n    return options.radius + options.hitRadius;\r\n  }\r\n}\r\nPointElement.id = 'point';\r\nPointElement.defaults = {\r\n  borderWidth: 1,\r\n  hitRadius: 1,\r\n  hoverBorderWidth: 1,\r\n  hoverRadius: 4,\r\n  pointStyle: 'circle',\r\n  radius: 3,\r\n  rotation: 0\r\n};\r\nPointElement.defaultRoutes = {\r\n  backgroundColor: 'backgroundColor',\r\n  borderColor: 'borderColor'\r\n};\r\n\r\nfunction getBarBounds(bar, useFinalPosition) {\r\n  const {x, y, base, width, height} = bar.getProps(['x', 'y', 'base', 'width', 'height'], useFinalPosition);\r\n  let left, right, top, bottom, half;\r\n  if (bar.horizontal) {\r\n    half = height / 2;\r\n    left = Math.min(x, base);\r\n    right = Math.max(x, base);\r\n    top = y - half;\r\n    bottom = y + half;\r\n  } else {\r\n    half = width / 2;\r\n    left = x - half;\r\n    right = x + half;\r\n    top = Math.min(y, base);\r\n    bottom = Math.max(y, base);\r\n  }\r\n  return {left, top, right, bottom};\r\n}\r\nfunction skipOrLimit(skip, value, min, max) {\r\n  return skip ? 0 : _limitValue(value, min, max);\r\n}\r\nfunction parseBorderWidth(bar, maxW, maxH) {\r\n  const value = bar.options.borderWidth;\r\n  const skip = bar.borderSkipped;\r\n  const o = toTRBL(value);\r\n  return {\r\n    t: skipOrLimit(skip.top, o.top, 0, maxH),\r\n    r: skipOrLimit(skip.right, o.right, 0, maxW),\r\n    b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\r\n    l: skipOrLimit(skip.left, o.left, 0, maxW)\r\n  };\r\n}\r\nfunction parseBorderRadius(bar, maxW, maxH) {\r\n  const {enableBorderRadius} = bar.getProps(['enableBorderRadius']);\r\n  const value = bar.options.borderRadius;\r\n  const o = toTRBLCorners(value);\r\n  const maxR = Math.min(maxW, maxH);\r\n  const skip = bar.borderSkipped;\r\n  const enableBorder = enableBorderRadius || isObject(value);\r\n  return {\r\n    topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\r\n    topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\r\n    bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\r\n    bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\r\n  };\r\n}\r\nfunction boundingRects(bar) {\r\n  const bounds = getBarBounds(bar);\r\n  const width = bounds.right - bounds.left;\r\n  const height = bounds.bottom - bounds.top;\r\n  const border = parseBorderWidth(bar, width / 2, height / 2);\r\n  const radius = parseBorderRadius(bar, width / 2, height / 2);\r\n  return {\r\n    outer: {\r\n      x: bounds.left,\r\n      y: bounds.top,\r\n      w: width,\r\n      h: height,\r\n      radius\r\n    },\r\n    inner: {\r\n      x: bounds.left + border.l,\r\n      y: bounds.top + border.t,\r\n      w: width - border.l - border.r,\r\n      h: height - border.t - border.b,\r\n      radius: {\r\n        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\r\n        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\r\n        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\r\n        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r)),\r\n      }\r\n    }\r\n  };\r\n}\r\nfunction inRange(bar, x, y, useFinalPosition) {\r\n  const skipX = x === null;\r\n  const skipY = y === null;\r\n  const skipBoth = skipX && skipY;\r\n  const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\r\n  return bounds\r\n\t\t&& (skipX || _isBetween(x, bounds.left, bounds.right))\r\n\t\t&& (skipY || _isBetween(y, bounds.top, bounds.bottom));\r\n}\r\nfunction hasRadius(radius) {\r\n  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\r\n}\r\nfunction addNormalRectPath(ctx, rect) {\r\n  ctx.rect(rect.x, rect.y, rect.w, rect.h);\r\n}\r\nfunction inflateRect(rect, amount, refRect = {}) {\r\n  const x = rect.x !== refRect.x ? -amount : 0;\r\n  const y = rect.y !== refRect.y ? -amount : 0;\r\n  const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\r\n  const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\r\n  return {\r\n    x: rect.x + x,\r\n    y: rect.y + y,\r\n    w: rect.w + w,\r\n    h: rect.h + h,\r\n    radius: rect.radius\r\n  };\r\n}\r\nclass BarElement extends Element {\r\n  constructor(cfg) {\r\n    super();\r\n    this.options = undefined;\r\n    this.horizontal = undefined;\r\n    this.base = undefined;\r\n    this.width = undefined;\r\n    this.height = undefined;\r\n    this.inflateAmount = undefined;\r\n    if (cfg) {\r\n      Object.assign(this, cfg);\r\n    }\r\n  }\r\n  draw(ctx) {\r\n    const {inflateAmount, options: {borderColor, backgroundColor}} = this;\r\n    const {inner, outer} = boundingRects(this);\r\n    const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\r\n    ctx.save();\r\n    if (outer.w !== inner.w || outer.h !== inner.h) {\r\n      ctx.beginPath();\r\n      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\r\n      ctx.clip();\r\n      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\r\n      ctx.fillStyle = borderColor;\r\n      ctx.fill('evenodd');\r\n    }\r\n    ctx.beginPath();\r\n    addRectPath(ctx, inflateRect(inner, inflateAmount));\r\n    ctx.fillStyle = backgroundColor;\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  inRange(mouseX, mouseY, useFinalPosition) {\r\n    return inRange(this, mouseX, mouseY, useFinalPosition);\r\n  }\r\n  inXRange(mouseX, useFinalPosition) {\r\n    return inRange(this, mouseX, null, useFinalPosition);\r\n  }\r\n  inYRange(mouseY, useFinalPosition) {\r\n    return inRange(this, null, mouseY, useFinalPosition);\r\n  }\r\n  getCenterPoint(useFinalPosition) {\r\n    const {x, y, base, horizontal} = this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition);\r\n    return {\r\n      x: horizontal ? (x + base) / 2 : x,\r\n      y: horizontal ? y : (y + base) / 2\r\n    };\r\n  }\r\n  getRange(axis) {\r\n    return axis === 'x' ? this.width / 2 : this.height / 2;\r\n  }\r\n}\r\nBarElement.id = 'bar';\r\nBarElement.defaults = {\r\n  borderSkipped: 'start',\r\n  borderWidth: 0,\r\n  borderRadius: 0,\r\n  inflateAmount: 'auto',\r\n  pointStyle: undefined\r\n};\r\nBarElement.defaultRoutes = {\r\n  backgroundColor: 'backgroundColor',\r\n  borderColor: 'borderColor'\r\n};\r\n\r\nvar elements = /*#__PURE__*/Object.freeze({\r\n__proto__: null,\r\nArcElement: ArcElement,\r\nLineElement: LineElement,\r\nPointElement: PointElement,\r\nBarElement: BarElement\r\n});\r\n\r\nfunction lttbDecimation(data, start, count, availableWidth, options) {\r\n  const samples = options.samples || availableWidth;\r\n  if (samples >= count) {\r\n    return data.slice(start, start + count);\r\n  }\r\n  const decimated = [];\r\n  const bucketWidth = (count - 2) / (samples - 2);\r\n  let sampledIndex = 0;\r\n  const endIndex = start + count - 1;\r\n  let a = start;\r\n  let i, maxAreaPoint, maxArea, area, nextA;\r\n  decimated[sampledIndex++] = data[a];\r\n  for (i = 0; i < samples - 2; i++) {\r\n    let avgX = 0;\r\n    let avgY = 0;\r\n    let j;\r\n    const avgRangeStart = Math.floor((i + 1) * bucketWidth) + 1 + start;\r\n    const avgRangeEnd = Math.min(Math.floor((i + 2) * bucketWidth) + 1, count) + start;\r\n    const avgRangeLength = avgRangeEnd - avgRangeStart;\r\n    for (j = avgRangeStart; j < avgRangeEnd; j++) {\r\n      avgX += data[j].x;\r\n      avgY += data[j].y;\r\n    }\r\n    avgX /= avgRangeLength;\r\n    avgY /= avgRangeLength;\r\n    const rangeOffs = Math.floor(i * bucketWidth) + 1 + start;\r\n    const rangeTo = Math.min(Math.floor((i + 1) * bucketWidth) + 1, count) + start;\r\n    const {x: pointAx, y: pointAy} = data[a];\r\n    maxArea = area = -1;\r\n    for (j = rangeOffs; j < rangeTo; j++) {\r\n      area = 0.5 * Math.abs(\r\n        (pointAx - avgX) * (data[j].y - pointAy) -\r\n        (pointAx - data[j].x) * (avgY - pointAy)\r\n      );\r\n      if (area > maxArea) {\r\n        maxArea = area;\r\n        maxAreaPoint = data[j];\r\n        nextA = j;\r\n      }\r\n    }\r\n    decimated[sampledIndex++] = maxAreaPoint;\r\n    a = nextA;\r\n  }\r\n  decimated[sampledIndex++] = data[endIndex];\r\n  return decimated;\r\n}\r\nfunction minMaxDecimation(data, start, count, availableWidth) {\r\n  let avgX = 0;\r\n  let countX = 0;\r\n  let i, point, x, y, prevX, minIndex, maxIndex, startIndex, minY, maxY;\r\n  const decimated = [];\r\n  const endIndex = start + count - 1;\r\n  const xMin = data[start].x;\r\n  const xMax = data[endIndex].x;\r\n  const dx = xMax - xMin;\r\n  for (i = start; i < start + count; ++i) {\r\n    point = data[i];\r\n    x = (point.x - xMin) / dx * availableWidth;\r\n    y = point.y;\r\n    const truncX = x | 0;\r\n    if (truncX === prevX) {\r\n      if (y < minY) {\r\n        minY = y;\r\n        minIndex = i;\r\n      } else if (y > maxY) {\r\n        maxY = y;\r\n        maxIndex = i;\r\n      }\r\n      avgX = (countX * avgX + point.x) / ++countX;\r\n    } else {\r\n      const lastIndex = i - 1;\r\n      if (!isNullOrUndef(minIndex) && !isNullOrUndef(maxIndex)) {\r\n        const intermediateIndex1 = Math.min(minIndex, maxIndex);\r\n        const intermediateIndex2 = Math.max(minIndex, maxIndex);\r\n        if (intermediateIndex1 !== startIndex && intermediateIndex1 !== lastIndex) {\r\n          decimated.push({\r\n            ...data[intermediateIndex1],\r\n            x: avgX,\r\n          });\r\n        }\r\n        if (intermediateIndex2 !== startIndex && intermediateIndex2 !== lastIndex) {\r\n          decimated.push({\r\n            ...data[intermediateIndex2],\r\n            x: avgX\r\n          });\r\n        }\r\n      }\r\n      if (i > 0 && lastIndex !== startIndex) {\r\n        decimated.push(data[lastIndex]);\r\n      }\r\n      decimated.push(point);\r\n      prevX = truncX;\r\n      countX = 0;\r\n      minY = maxY = y;\r\n      minIndex = maxIndex = startIndex = i;\r\n    }\r\n  }\r\n  return decimated;\r\n}\r\nfunction cleanDecimatedDataset(dataset) {\r\n  if (dataset._decimated) {\r\n    const data = dataset._data;\r\n    delete dataset._decimated;\r\n    delete dataset._data;\r\n    Object.defineProperty(dataset, 'data', {value: data});\r\n  }\r\n}\r\nfunction cleanDecimatedData(chart) {\r\n  chart.data.datasets.forEach((dataset) => {\r\n    cleanDecimatedDataset(dataset);\r\n  });\r\n}\r\nfunction getStartAndCountOfVisiblePointsSimplified(meta, points) {\r\n  const pointCount = points.length;\r\n  let start = 0;\r\n  let count;\r\n  const {iScale} = meta;\r\n  const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\r\n  if (minDefined) {\r\n    start = _limitValue(_lookupByKey(points, iScale.axis, min).lo, 0, pointCount - 1);\r\n  }\r\n  if (maxDefined) {\r\n    count = _limitValue(_lookupByKey(points, iScale.axis, max).hi + 1, start, pointCount) - start;\r\n  } else {\r\n    count = pointCount - start;\r\n  }\r\n  return {start, count};\r\n}\r\nvar plugin_decimation = {\r\n  id: 'decimation',\r\n  defaults: {\r\n    algorithm: 'min-max',\r\n    enabled: false,\r\n  },\r\n  beforeElementsUpdate: (chart, args, options) => {\r\n    if (!options.enabled) {\r\n      cleanDecimatedData(chart);\r\n      return;\r\n    }\r\n    const availableWidth = chart.width;\r\n    chart.data.datasets.forEach((dataset, datasetIndex) => {\r\n      const {_data, indexAxis} = dataset;\r\n      const meta = chart.getDatasetMeta(datasetIndex);\r\n      const data = _data || dataset.data;\r\n      if (resolve([indexAxis, chart.options.indexAxis]) === 'y') {\r\n        return;\r\n      }\r\n      if (!meta.controller.supportsDecimation) {\r\n        return;\r\n      }\r\n      const xAxis = chart.scales[meta.xAxisID];\r\n      if (xAxis.type !== 'linear' && xAxis.type !== 'time') {\r\n        return;\r\n      }\r\n      if (chart.options.parsing) {\r\n        return;\r\n      }\r\n      let {start, count} = getStartAndCountOfVisiblePointsSimplified(meta, data);\r\n      const threshold = options.threshold || 4 * availableWidth;\r\n      if (count <= threshold) {\r\n        cleanDecimatedDataset(dataset);\r\n        return;\r\n      }\r\n      if (isNullOrUndef(_data)) {\r\n        dataset._data = data;\r\n        delete dataset.data;\r\n        Object.defineProperty(dataset, 'data', {\r\n          configurable: true,\r\n          enumerable: true,\r\n          get: function() {\r\n            return this._decimated;\r\n          },\r\n          set: function(d) {\r\n            this._data = d;\r\n          }\r\n        });\r\n      }\r\n      let decimated;\r\n      switch (options.algorithm) {\r\n      case 'lttb':\r\n        decimated = lttbDecimation(data, start, count, availableWidth, options);\r\n        break;\r\n      case 'min-max':\r\n        decimated = minMaxDecimation(data, start, count, availableWidth);\r\n        break;\r\n      default:\r\n        throw new Error(`Unsupported decimation algorithm '${options.algorithm}'`);\r\n      }\r\n      dataset._decimated = decimated;\r\n    });\r\n  },\r\n  destroy(chart) {\r\n    cleanDecimatedData(chart);\r\n  }\r\n};\r\n\r\nfunction _segments(line, target, property) {\r\n  const segments = line.segments;\r\n  const points = line.points;\r\n  const tpoints = target.points;\r\n  const parts = [];\r\n  for (const segment of segments) {\r\n    let {start, end} = segment;\r\n    end = _findSegmentEnd(start, end, points);\r\n    const bounds = _getBounds(property, points[start], points[end], segment.loop);\r\n    if (!target.segments) {\r\n      parts.push({\r\n        source: segment,\r\n        target: bounds,\r\n        start: points[start],\r\n        end: points[end]\r\n      });\r\n      continue;\r\n    }\r\n    const targetSegments = _boundSegments(target, bounds);\r\n    for (const tgt of targetSegments) {\r\n      const subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);\r\n      const fillSources = _boundSegment(segment, points, subBounds);\r\n      for (const fillSource of fillSources) {\r\n        parts.push({\r\n          source: fillSource,\r\n          target: tgt,\r\n          start: {\r\n            [property]: _getEdge(bounds, subBounds, 'start', Math.max)\r\n          },\r\n          end: {\r\n            [property]: _getEdge(bounds, subBounds, 'end', Math.min)\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  return parts;\r\n}\r\nfunction _getBounds(property, first, last, loop) {\r\n  if (loop) {\r\n    return;\r\n  }\r\n  let start = first[property];\r\n  let end = last[property];\r\n  if (property === 'angle') {\r\n    start = _normalizeAngle(start);\r\n    end = _normalizeAngle(end);\r\n  }\r\n  return {property, start, end};\r\n}\r\nfunction _pointsFromSegments(boundary, line) {\r\n  const {x = null, y = null} = boundary || {};\r\n  const linePoints = line.points;\r\n  const points = [];\r\n  line.segments.forEach(({start, end}) => {\r\n    end = _findSegmentEnd(start, end, linePoints);\r\n    const first = linePoints[start];\r\n    const last = linePoints[end];\r\n    if (y !== null) {\r\n      points.push({x: first.x, y});\r\n      points.push({x: last.x, y});\r\n    } else if (x !== null) {\r\n      points.push({x, y: first.y});\r\n      points.push({x, y: last.y});\r\n    }\r\n  });\r\n  return points;\r\n}\r\nfunction _findSegmentEnd(start, end, points) {\r\n  for (;end > start; end--) {\r\n    const point = points[end];\r\n    if (!isNaN(point.x) && !isNaN(point.y)) {\r\n      break;\r\n    }\r\n  }\r\n  return end;\r\n}\r\nfunction _getEdge(a, b, prop, fn) {\r\n  if (a && b) {\r\n    return fn(a[prop], b[prop]);\r\n  }\r\n  return a ? a[prop] : b ? b[prop] : 0;\r\n}\r\n\r\nfunction _createBoundaryLine(boundary, line) {\r\n  let points = [];\r\n  let _loop = false;\r\n  if (isArray(boundary)) {\r\n    _loop = true;\r\n    points = boundary;\r\n  } else {\r\n    points = _pointsFromSegments(boundary, line);\r\n  }\r\n  return points.length ? new LineElement({\r\n    points,\r\n    options: {tension: 0},\r\n    _loop,\r\n    _fullLoop: _loop\r\n  }) : null;\r\n}\r\nfunction _shouldApplyFill(source) {\r\n  return source && source.fill !== false;\r\n}\r\n\r\nfunction _resolveTarget(sources, index, propagate) {\r\n  const source = sources[index];\r\n  let fill = source.fill;\r\n  const visited = [index];\r\n  let target;\r\n  if (!propagate) {\r\n    return fill;\r\n  }\r\n  while (fill !== false && visited.indexOf(fill) === -1) {\r\n    if (!isNumberFinite(fill)) {\r\n      return fill;\r\n    }\r\n    target = sources[fill];\r\n    if (!target) {\r\n      return false;\r\n    }\r\n    if (target.visible) {\r\n      return fill;\r\n    }\r\n    visited.push(fill);\r\n    fill = target.fill;\r\n  }\r\n  return false;\r\n}\r\nfunction _decodeFill(line, index, count) {\r\n  const fill = parseFillOption(line);\r\n  if (isObject(fill)) {\r\n    return isNaN(fill.value) ? false : fill;\r\n  }\r\n  let target = parseFloat(fill);\r\n  if (isNumberFinite(target) && Math.floor(target) === target) {\r\n    return decodeTargetIndex(fill[0], index, target, count);\r\n  }\r\n  return ['origin', 'start', 'end', 'stack', 'shape'].indexOf(fill) >= 0 && fill;\r\n}\r\nfunction decodeTargetIndex(firstCh, index, target, count) {\r\n  if (firstCh === '-' || firstCh === '+') {\r\n    target = index + target;\r\n  }\r\n  if (target === index || target < 0 || target >= count) {\r\n    return false;\r\n  }\r\n  return target;\r\n}\r\nfunction _getTargetPixel(fill, scale) {\r\n  let pixel = null;\r\n  if (fill === 'start') {\r\n    pixel = scale.bottom;\r\n  } else if (fill === 'end') {\r\n    pixel = scale.top;\r\n  } else if (isObject(fill)) {\r\n    pixel = scale.getPixelForValue(fill.value);\r\n  } else if (scale.getBasePixel) {\r\n    pixel = scale.getBasePixel();\r\n  }\r\n  return pixel;\r\n}\r\nfunction _getTargetValue(fill, scale, startValue) {\r\n  let value;\r\n  if (fill === 'start') {\r\n    value = startValue;\r\n  } else if (fill === 'end') {\r\n    value = scale.options.reverse ? scale.min : scale.max;\r\n  } else if (isObject(fill)) {\r\n    value = fill.value;\r\n  } else {\r\n    value = scale.getBaseValue();\r\n  }\r\n  return value;\r\n}\r\nfunction parseFillOption(line) {\r\n  const options = line.options;\r\n  const fillOption = options.fill;\r\n  let fill = valueOrDefault(fillOption && fillOption.target, fillOption);\r\n  if (fill === undefined) {\r\n    fill = !!options.backgroundColor;\r\n  }\r\n  if (fill === false || fill === null) {\r\n    return false;\r\n  }\r\n  if (fill === true) {\r\n    return 'origin';\r\n  }\r\n  return fill;\r\n}\r\n\r\nfunction _buildStackLine(source) {\r\n  const {scale, index, line} = source;\r\n  const points = [];\r\n  const segments = line.segments;\r\n  const sourcePoints = line.points;\r\n  const linesBelow = getLinesBelow(scale, index);\r\n  linesBelow.push(_createBoundaryLine({x: null, y: scale.bottom}, line));\r\n  for (let i = 0; i < segments.length; i++) {\r\n    const segment = segments[i];\r\n    for (let j = segment.start; j <= segment.end; j++) {\r\n      addPointsBelow(points, sourcePoints[j], linesBelow);\r\n    }\r\n  }\r\n  return new LineElement({points, options: {}});\r\n}\r\nfunction getLinesBelow(scale, index) {\r\n  const below = [];\r\n  const metas = scale.getMatchingVisibleMetas('line');\r\n  for (let i = 0; i < metas.length; i++) {\r\n    const meta = metas[i];\r\n    if (meta.index === index) {\r\n      break;\r\n    }\r\n    if (!meta.hidden) {\r\n      below.unshift(meta.dataset);\r\n    }\r\n  }\r\n  return below;\r\n}\r\nfunction addPointsBelow(points, sourcePoint, linesBelow) {\r\n  const postponed = [];\r\n  for (let j = 0; j < linesBelow.length; j++) {\r\n    const line = linesBelow[j];\r\n    const {first, last, point} = findPoint(line, sourcePoint, 'x');\r\n    if (!point || (first && last)) {\r\n      continue;\r\n    }\r\n    if (first) {\r\n      postponed.unshift(point);\r\n    } else {\r\n      points.push(point);\r\n      if (!last) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  points.push(...postponed);\r\n}\r\nfunction findPoint(line, sourcePoint, property) {\r\n  const point = line.interpolate(sourcePoint, property);\r\n  if (!point) {\r\n    return {};\r\n  }\r\n  const pointValue = point[property];\r\n  const segments = line.segments;\r\n  const linePoints = line.points;\r\n  let first = false;\r\n  let last = false;\r\n  for (let i = 0; i < segments.length; i++) {\r\n    const segment = segments[i];\r\n    const firstValue = linePoints[segment.start][property];\r\n    const lastValue = linePoints[segment.end][property];\r\n    if (_isBetween(pointValue, firstValue, lastValue)) {\r\n      first = pointValue === firstValue;\r\n      last = pointValue === lastValue;\r\n      break;\r\n    }\r\n  }\r\n  return {first, last, point};\r\n}\r\n\r\nclass simpleArc {\r\n  constructor(opts) {\r\n    this.x = opts.x;\r\n    this.y = opts.y;\r\n    this.radius = opts.radius;\r\n  }\r\n  pathSegment(ctx, bounds, opts) {\r\n    const {x, y, radius} = this;\r\n    bounds = bounds || {start: 0, end: TAU};\r\n    ctx.arc(x, y, radius, bounds.end, bounds.start, true);\r\n    return !opts.bounds;\r\n  }\r\n  interpolate(point) {\r\n    const {x, y, radius} = this;\r\n    const angle = point.angle;\r\n    return {\r\n      x: x + Math.cos(angle) * radius,\r\n      y: y + Math.sin(angle) * radius,\r\n      angle\r\n    };\r\n  }\r\n}\r\n\r\nfunction _getTarget(source) {\r\n  const {chart, fill, line} = source;\r\n  if (isNumberFinite(fill)) {\r\n    return getLineByIndex(chart, fill);\r\n  }\r\n  if (fill === 'stack') {\r\n    return _buildStackLine(source);\r\n  }\r\n  if (fill === 'shape') {\r\n    return true;\r\n  }\r\n  const boundary = computeBoundary(source);\r\n  if (boundary instanceof simpleArc) {\r\n    return boundary;\r\n  }\r\n  return _createBoundaryLine(boundary, line);\r\n}\r\nfunction getLineByIndex(chart, index) {\r\n  const meta = chart.getDatasetMeta(index);\r\n  const visible = meta && chart.isDatasetVisible(index);\r\n  return visible ? meta.dataset : null;\r\n}\r\nfunction computeBoundary(source) {\r\n  const scale = source.scale || {};\r\n  if (scale.getPointPositionForValue) {\r\n    return computeCircularBoundary(source);\r\n  }\r\n  return computeLinearBoundary(source);\r\n}\r\nfunction computeLinearBoundary(source) {\r\n  const {scale = {}, fill} = source;\r\n  const pixel = _getTargetPixel(fill, scale);\r\n  if (isNumberFinite(pixel)) {\r\n    const horizontal = scale.isHorizontal();\r\n    return {\r\n      x: horizontal ? pixel : null,\r\n      y: horizontal ? null : pixel\r\n    };\r\n  }\r\n  return null;\r\n}\r\nfunction computeCircularBoundary(source) {\r\n  const {scale, fill} = source;\r\n  const options = scale.options;\r\n  const length = scale.getLabels().length;\r\n  const start = options.reverse ? scale.max : scale.min;\r\n  const value = _getTargetValue(fill, scale, start);\r\n  const target = [];\r\n  if (options.grid.circular) {\r\n    const center = scale.getPointPositionForValue(0, start);\r\n    return new simpleArc({\r\n      x: center.x,\r\n      y: center.y,\r\n      radius: scale.getDistanceFromCenterForValue(value)\r\n    });\r\n  }\r\n  for (let i = 0; i < length; ++i) {\r\n    target.push(scale.getPointPositionForValue(i, value));\r\n  }\r\n  return target;\r\n}\r\n\r\nfunction _drawfill(ctx, source, area) {\r\n  const target = _getTarget(source);\r\n  const {line, scale, axis} = source;\r\n  const lineOpts = line.options;\r\n  const fillOption = lineOpts.fill;\r\n  const color = lineOpts.backgroundColor;\r\n  const {above = color, below = color} = fillOption || {};\r\n  if (target && line.points.length) {\r\n    clipArea(ctx, area);\r\n    doFill(ctx, {line, target, above, below, area, scale, axis});\r\n    unclipArea(ctx);\r\n  }\r\n}\r\nfunction doFill(ctx, cfg) {\r\n  const {line, target, above, below, area, scale} = cfg;\r\n  const property = line._loop ? 'angle' : cfg.axis;\r\n  ctx.save();\r\n  if (property === 'x' && below !== above) {\r\n    clipVertical(ctx, target, area.top);\r\n    fill(ctx, {line, target, color: above, scale, property});\r\n    ctx.restore();\r\n    ctx.save();\r\n    clipVertical(ctx, target, area.bottom);\r\n  }\r\n  fill(ctx, {line, target, color: below, scale, property});\r\n  ctx.restore();\r\n}\r\nfunction clipVertical(ctx, target, clipY) {\r\n  const {segments, points} = target;\r\n  let first = true;\r\n  let lineLoop = false;\r\n  ctx.beginPath();\r\n  for (const segment of segments) {\r\n    const {start, end} = segment;\r\n    const firstPoint = points[start];\r\n    const lastPoint = points[_findSegmentEnd(start, end, points)];\r\n    if (first) {\r\n      ctx.moveTo(firstPoint.x, firstPoint.y);\r\n      first = false;\r\n    } else {\r\n      ctx.lineTo(firstPoint.x, clipY);\r\n      ctx.lineTo(firstPoint.x, firstPoint.y);\r\n    }\r\n    lineLoop = !!target.pathSegment(ctx, segment, {move: lineLoop});\r\n    if (lineLoop) {\r\n      ctx.closePath();\r\n    } else {\r\n      ctx.lineTo(lastPoint.x, clipY);\r\n    }\r\n  }\r\n  ctx.lineTo(target.first().x, clipY);\r\n  ctx.closePath();\r\n  ctx.clip();\r\n}\r\nfunction fill(ctx, cfg) {\r\n  const {line, target, property, color, scale} = cfg;\r\n  const segments = _segments(line, target, property);\r\n  for (const {source: src, target: tgt, start, end} of segments) {\r\n    const {style: {backgroundColor = color} = {}} = src;\r\n    const notShape = target !== true;\r\n    ctx.save();\r\n    ctx.fillStyle = backgroundColor;\r\n    clipBounds(ctx, scale, notShape && _getBounds(property, start, end));\r\n    ctx.beginPath();\r\n    const lineLoop = !!line.pathSegment(ctx, src);\r\n    let loop;\r\n    if (notShape) {\r\n      if (lineLoop) {\r\n        ctx.closePath();\r\n      } else {\r\n        interpolatedLineTo(ctx, target, end, property);\r\n      }\r\n      const targetLoop = !!target.pathSegment(ctx, tgt, {move: lineLoop, reverse: true});\r\n      loop = lineLoop && targetLoop;\r\n      if (!loop) {\r\n        interpolatedLineTo(ctx, target, start, property);\r\n      }\r\n    }\r\n    ctx.closePath();\r\n    ctx.fill(loop ? 'evenodd' : 'nonzero');\r\n    ctx.restore();\r\n  }\r\n}\r\nfunction clipBounds(ctx, scale, bounds) {\r\n  const {top, bottom} = scale.chart.chartArea;\r\n  const {property, start, end} = bounds || {};\r\n  if (property === 'x') {\r\n    ctx.beginPath();\r\n    ctx.rect(start, top, end - start, bottom - top);\r\n    ctx.clip();\r\n  }\r\n}\r\nfunction interpolatedLineTo(ctx, target, point, property) {\r\n  const interpolatedPoint = target.interpolate(point, property);\r\n  if (interpolatedPoint) {\r\n    ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);\r\n  }\r\n}\r\n\r\nvar index = {\r\n  id: 'filler',\r\n  afterDatasetsUpdate(chart, _args, options) {\r\n    const count = (chart.data.datasets || []).length;\r\n    const sources = [];\r\n    let meta, i, line, source;\r\n    for (i = 0; i < count; ++i) {\r\n      meta = chart.getDatasetMeta(i);\r\n      line = meta.dataset;\r\n      source = null;\r\n      if (line && line.options && line instanceof LineElement) {\r\n        source = {\r\n          visible: chart.isDatasetVisible(i),\r\n          index: i,\r\n          fill: _decodeFill(line, i, count),\r\n          chart,\r\n          axis: meta.controller.options.indexAxis,\r\n          scale: meta.vScale,\r\n          line,\r\n        };\r\n      }\r\n      meta.$filler = source;\r\n      sources.push(source);\r\n    }\r\n    for (i = 0; i < count; ++i) {\r\n      source = sources[i];\r\n      if (!source || source.fill === false) {\r\n        continue;\r\n      }\r\n      source.fill = _resolveTarget(sources, i, options.propagate);\r\n    }\r\n  },\r\n  beforeDraw(chart, _args, options) {\r\n    const draw = options.drawTime === 'beforeDraw';\r\n    const metasets = chart.getSortedVisibleDatasetMetas();\r\n    const area = chart.chartArea;\r\n    for (let i = metasets.length - 1; i >= 0; --i) {\r\n      const source = metasets[i].$filler;\r\n      if (!source) {\r\n        continue;\r\n      }\r\n      source.line.updateControlPoints(area, source.axis);\r\n      if (draw && source.fill) {\r\n        _drawfill(chart.ctx, source, area);\r\n      }\r\n    }\r\n  },\r\n  beforeDatasetsDraw(chart, _args, options) {\r\n    if (options.drawTime !== 'beforeDatasetsDraw') {\r\n      return;\r\n    }\r\n    const metasets = chart.getSortedVisibleDatasetMetas();\r\n    for (let i = metasets.length - 1; i >= 0; --i) {\r\n      const source = metasets[i].$filler;\r\n      if (_shouldApplyFill(source)) {\r\n        _drawfill(chart.ctx, source, chart.chartArea);\r\n      }\r\n    }\r\n  },\r\n  beforeDatasetDraw(chart, args, options) {\r\n    const source = args.meta.$filler;\r\n    if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\r\n      return;\r\n    }\r\n    _drawfill(chart.ctx, source, chart.chartArea);\r\n  },\r\n  defaults: {\r\n    propagate: true,\r\n    drawTime: 'beforeDatasetDraw'\r\n  }\r\n};\r\n\r\nconst getBoxSize = (labelOpts, fontSize) => {\r\n  let {boxHeight = fontSize, boxWidth = fontSize} = labelOpts;\r\n  if (labelOpts.usePointStyle) {\r\n    boxHeight = Math.min(boxHeight, fontSize);\r\n    boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\r\n  }\r\n  return {\r\n    boxWidth,\r\n    boxHeight,\r\n    itemHeight: Math.max(fontSize, boxHeight)\r\n  };\r\n};\r\nconst itemsEqual = (a, b) => a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\r\nclass Legend extends Element {\r\n  constructor(config) {\r\n    super();\r\n    this._added = false;\r\n    this.legendHitBoxes = [];\r\n    this._hoveredItem = null;\r\n    this.doughnutMode = false;\r\n    this.chart = config.chart;\r\n    this.options = config.options;\r\n    this.ctx = config.ctx;\r\n    this.legendItems = undefined;\r\n    this.columnSizes = undefined;\r\n    this.lineWidths = undefined;\r\n    this.maxHeight = undefined;\r\n    this.maxWidth = undefined;\r\n    this.top = undefined;\r\n    this.bottom = undefined;\r\n    this.left = undefined;\r\n    this.right = undefined;\r\n    this.height = undefined;\r\n    this.width = undefined;\r\n    this._margins = undefined;\r\n    this.position = undefined;\r\n    this.weight = undefined;\r\n    this.fullSize = undefined;\r\n  }\r\n  update(maxWidth, maxHeight, margins) {\r\n    this.maxWidth = maxWidth;\r\n    this.maxHeight = maxHeight;\r\n    this._margins = margins;\r\n    this.setDimensions();\r\n    this.buildLabels();\r\n    this.fit();\r\n  }\r\n  setDimensions() {\r\n    if (this.isHorizontal()) {\r\n      this.width = this.maxWidth;\r\n      this.left = this._margins.left;\r\n      this.right = this.width;\r\n    } else {\r\n      this.height = this.maxHeight;\r\n      this.top = this._margins.top;\r\n      this.bottom = this.height;\r\n    }\r\n  }\r\n  buildLabels() {\r\n    const labelOpts = this.options.labels || {};\r\n    let legendItems = callback(labelOpts.generateLabels, [this.chart], this) || [];\r\n    if (labelOpts.filter) {\r\n      legendItems = legendItems.filter((item) => labelOpts.filter(item, this.chart.data));\r\n    }\r\n    if (labelOpts.sort) {\r\n      legendItems = legendItems.sort((a, b) => labelOpts.sort(a, b, this.chart.data));\r\n    }\r\n    if (this.options.reverse) {\r\n      legendItems.reverse();\r\n    }\r\n    this.legendItems = legendItems;\r\n  }\r\n  fit() {\r\n    const {options, ctx} = this;\r\n    if (!options.display) {\r\n      this.width = this.height = 0;\r\n      return;\r\n    }\r\n    const labelOpts = options.labels;\r\n    const labelFont = toFont(labelOpts.font);\r\n    const fontSize = labelFont.size;\r\n    const titleHeight = this._computeTitleHeight();\r\n    const {boxWidth, itemHeight} = getBoxSize(labelOpts, fontSize);\r\n    let width, height;\r\n    ctx.font = labelFont.string;\r\n    if (this.isHorizontal()) {\r\n      width = this.maxWidth;\r\n      height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\r\n    } else {\r\n      height = this.maxHeight;\r\n      width = this._fitCols(titleHeight, fontSize, boxWidth, itemHeight) + 10;\r\n    }\r\n    this.width = Math.min(width, options.maxWidth || this.maxWidth);\r\n    this.height = Math.min(height, options.maxHeight || this.maxHeight);\r\n  }\r\n  _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\r\n    const {ctx, maxWidth, options: {labels: {padding}}} = this;\r\n    const hitboxes = this.legendHitBoxes = [];\r\n    const lineWidths = this.lineWidths = [0];\r\n    const lineHeight = itemHeight + padding;\r\n    let totalHeight = titleHeight;\r\n    ctx.textAlign = 'left';\r\n    ctx.textBaseline = 'middle';\r\n    let row = -1;\r\n    let top = -lineHeight;\r\n    this.legendItems.forEach((legendItem, i) => {\r\n      const itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\r\n      if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\r\n        totalHeight += lineHeight;\r\n        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\r\n        top += lineHeight;\r\n        row++;\r\n      }\r\n      hitboxes[i] = {left: 0, top, row, width: itemWidth, height: itemHeight};\r\n      lineWidths[lineWidths.length - 1] += itemWidth + padding;\r\n    });\r\n    return totalHeight;\r\n  }\r\n  _fitCols(titleHeight, fontSize, boxWidth, itemHeight) {\r\n    const {ctx, maxHeight, options: {labels: {padding}}} = this;\r\n    const hitboxes = this.legendHitBoxes = [];\r\n    const columnSizes = this.columnSizes = [];\r\n    const heightLimit = maxHeight - titleHeight;\r\n    let totalWidth = padding;\r\n    let currentColWidth = 0;\r\n    let currentColHeight = 0;\r\n    let left = 0;\r\n    let col = 0;\r\n    this.legendItems.forEach((legendItem, i) => {\r\n      const itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\r\n      if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\r\n        totalWidth += currentColWidth + padding;\r\n        columnSizes.push({width: currentColWidth, height: currentColHeight});\r\n        left += currentColWidth + padding;\r\n        col++;\r\n        currentColWidth = currentColHeight = 0;\r\n      }\r\n      hitboxes[i] = {left, top: currentColHeight, col, width: itemWidth, height: itemHeight};\r\n      currentColWidth = Math.max(currentColWidth, itemWidth);\r\n      currentColHeight += itemHeight + padding;\r\n    });\r\n    totalWidth += currentColWidth;\r\n    columnSizes.push({width: currentColWidth, height: currentColHeight});\r\n    return totalWidth;\r\n  }\r\n  adjustHitBoxes() {\r\n    if (!this.options.display) {\r\n      return;\r\n    }\r\n    const titleHeight = this._computeTitleHeight();\r\n    const {legendHitBoxes: hitboxes, options: {align, labels: {padding}, rtl}} = this;\r\n    const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\r\n    if (this.isHorizontal()) {\r\n      let row = 0;\r\n      let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\r\n      for (const hitbox of hitboxes) {\r\n        if (row !== hitbox.row) {\r\n          row = hitbox.row;\r\n          left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\r\n        }\r\n        hitbox.top += this.top + titleHeight + padding;\r\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\r\n        left += hitbox.width + padding;\r\n      }\r\n    } else {\r\n      let col = 0;\r\n      let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\r\n      for (const hitbox of hitboxes) {\r\n        if (hitbox.col !== col) {\r\n          col = hitbox.col;\r\n          top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\r\n        }\r\n        hitbox.top = top;\r\n        hitbox.left += this.left + padding;\r\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox.left), hitbox.width);\r\n        top += hitbox.height + padding;\r\n      }\r\n    }\r\n  }\r\n  isHorizontal() {\r\n    return this.options.position === 'top' || this.options.position === 'bottom';\r\n  }\r\n  draw() {\r\n    if (this.options.display) {\r\n      const ctx = this.ctx;\r\n      clipArea(ctx, this);\r\n      this._draw();\r\n      unclipArea(ctx);\r\n    }\r\n  }\r\n  _draw() {\r\n    const {options: opts, columnSizes, lineWidths, ctx} = this;\r\n    const {align, labels: labelOpts} = opts;\r\n    const defaultColor = defaults.color;\r\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\r\n    const labelFont = toFont(labelOpts.font);\r\n    const {color: fontColor, padding} = labelOpts;\r\n    const fontSize = labelFont.size;\r\n    const halfFontSize = fontSize / 2;\r\n    let cursor;\r\n    this.drawTitle();\r\n    ctx.textAlign = rtlHelper.textAlign('left');\r\n    ctx.textBaseline = 'middle';\r\n    ctx.lineWidth = 0.5;\r\n    ctx.font = labelFont.string;\r\n    const {boxWidth, boxHeight, itemHeight} = getBoxSize(labelOpts, fontSize);\r\n    const drawLegendBox = function(x, y, legendItem) {\r\n      if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\r\n        return;\r\n      }\r\n      ctx.save();\r\n      const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\r\n      ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\r\n      ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\r\n      ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\r\n      ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\r\n      ctx.lineWidth = lineWidth;\r\n      ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\r\n      ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\r\n      if (labelOpts.usePointStyle) {\r\n        const drawOptions = {\r\n          radius: boxHeight * Math.SQRT2 / 2,\r\n          pointStyle: legendItem.pointStyle,\r\n          rotation: legendItem.rotation,\r\n          borderWidth: lineWidth\r\n        };\r\n        const centerX = rtlHelper.xPlus(x, boxWidth / 2);\r\n        const centerY = y + halfFontSize;\r\n        drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\r\n      } else {\r\n        const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\r\n        const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\r\n        const borderRadius = toTRBLCorners(legendItem.borderRadius);\r\n        ctx.beginPath();\r\n        if (Object.values(borderRadius).some(v => v !== 0)) {\r\n          addRoundedRectPath(ctx, {\r\n            x: xBoxLeft,\r\n            y: yBoxTop,\r\n            w: boxWidth,\r\n            h: boxHeight,\r\n            radius: borderRadius,\r\n          });\r\n        } else {\r\n          ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\r\n        }\r\n        ctx.fill();\r\n        if (lineWidth !== 0) {\r\n          ctx.stroke();\r\n        }\r\n      }\r\n      ctx.restore();\r\n    };\r\n    const fillText = function(x, y, legendItem) {\r\n      renderText(ctx, legendItem.text, x, y + (itemHeight / 2), labelFont, {\r\n        strikethrough: legendItem.hidden,\r\n        textAlign: rtlHelper.textAlign(legendItem.textAlign)\r\n      });\r\n    };\r\n    const isHorizontal = this.isHorizontal();\r\n    const titleHeight = this._computeTitleHeight();\r\n    if (isHorizontal) {\r\n      cursor = {\r\n        x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\r\n        y: this.top + padding + titleHeight,\r\n        line: 0\r\n      };\r\n    } else {\r\n      cursor = {\r\n        x: this.left + padding,\r\n        y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\r\n        line: 0\r\n      };\r\n    }\r\n    overrideTextDirection(this.ctx, opts.textDirection);\r\n    const lineHeight = itemHeight + padding;\r\n    this.legendItems.forEach((legendItem, i) => {\r\n      ctx.strokeStyle = legendItem.fontColor || fontColor;\r\n      ctx.fillStyle = legendItem.fontColor || fontColor;\r\n      const textWidth = ctx.measureText(legendItem.text).width;\r\n      const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\r\n      const width = boxWidth + halfFontSize + textWidth;\r\n      let x = cursor.x;\r\n      let y = cursor.y;\r\n      rtlHelper.setWidth(this.width);\r\n      if (isHorizontal) {\r\n        if (i > 0 && x + width + padding > this.right) {\r\n          y = cursor.y += lineHeight;\r\n          cursor.line++;\r\n          x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\r\n        }\r\n      } else if (i > 0 && y + lineHeight > this.bottom) {\r\n        x = cursor.x = x + columnSizes[cursor.line].width + padding;\r\n        cursor.line++;\r\n        y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\r\n      }\r\n      const realX = rtlHelper.x(x);\r\n      drawLegendBox(realX, y, legendItem);\r\n      x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\r\n      fillText(rtlHelper.x(x), y, legendItem);\r\n      if (isHorizontal) {\r\n        cursor.x += width + padding;\r\n      } else {\r\n        cursor.y += lineHeight;\r\n      }\r\n    });\r\n    restoreTextDirection(this.ctx, opts.textDirection);\r\n  }\r\n  drawTitle() {\r\n    const opts = this.options;\r\n    const titleOpts = opts.title;\r\n    const titleFont = toFont(titleOpts.font);\r\n    const titlePadding = toPadding(titleOpts.padding);\r\n    if (!titleOpts.display) {\r\n      return;\r\n    }\r\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\r\n    const ctx = this.ctx;\r\n    const position = titleOpts.position;\r\n    const halfFontSize = titleFont.size / 2;\r\n    const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\r\n    let y;\r\n    let left = this.left;\r\n    let maxWidth = this.width;\r\n    if (this.isHorizontal()) {\r\n      maxWidth = Math.max(...this.lineWidths);\r\n      y = this.top + topPaddingPlusHalfFontSize;\r\n      left = _alignStartEnd(opts.align, left, this.right - maxWidth);\r\n    } else {\r\n      const maxHeight = this.columnSizes.reduce((acc, size) => Math.max(acc, size.height), 0);\r\n      y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\r\n    }\r\n    const x = _alignStartEnd(position, left, left + maxWidth);\r\n    ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\r\n    ctx.textBaseline = 'middle';\r\n    ctx.strokeStyle = titleOpts.color;\r\n    ctx.fillStyle = titleOpts.color;\r\n    ctx.font = titleFont.string;\r\n    renderText(ctx, titleOpts.text, x, y, titleFont);\r\n  }\r\n  _computeTitleHeight() {\r\n    const titleOpts = this.options.title;\r\n    const titleFont = toFont(titleOpts.font);\r\n    const titlePadding = toPadding(titleOpts.padding);\r\n    return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\r\n  }\r\n  _getLegendItemAt(x, y) {\r\n    let i, hitBox, lh;\r\n    if (_isBetween(x, this.left, this.right)\r\n      && _isBetween(y, this.top, this.bottom)) {\r\n      lh = this.legendHitBoxes;\r\n      for (i = 0; i < lh.length; ++i) {\r\n        hitBox = lh[i];\r\n        if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width)\r\n          && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\r\n          return this.legendItems[i];\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  handleEvent(e) {\r\n    const opts = this.options;\r\n    if (!isListened(e.type, opts)) {\r\n      return;\r\n    }\r\n    const hoveredItem = this._getLegendItemAt(e.x, e.y);\r\n    if (e.type === 'mousemove' || e.type === 'mouseout') {\r\n      const previous = this._hoveredItem;\r\n      const sameItem = itemsEqual(previous, hoveredItem);\r\n      if (previous && !sameItem) {\r\n        callback(opts.onLeave, [e, previous, this], this);\r\n      }\r\n      this._hoveredItem = hoveredItem;\r\n      if (hoveredItem && !sameItem) {\r\n        callback(opts.onHover, [e, hoveredItem, this], this);\r\n      }\r\n    } else if (hoveredItem) {\r\n      callback(opts.onClick, [e, hoveredItem, this], this);\r\n    }\r\n  }\r\n}\r\nfunction isListened(type, opts) {\r\n  if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\r\n    return true;\r\n  }\r\n  if (opts.onClick && (type === 'click' || type === 'mouseup')) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\nvar plugin_legend = {\r\n  id: 'legend',\r\n  _element: Legend,\r\n  start(chart, _args, options) {\r\n    const legend = chart.legend = new Legend({ctx: chart.ctx, options, chart});\r\n    layouts.configure(chart, legend, options);\r\n    layouts.addBox(chart, legend);\r\n  },\r\n  stop(chart) {\r\n    layouts.removeBox(chart, chart.legend);\r\n    delete chart.legend;\r\n  },\r\n  beforeUpdate(chart, _args, options) {\r\n    const legend = chart.legend;\r\n    layouts.configure(chart, legend, options);\r\n    legend.options = options;\r\n  },\r\n  afterUpdate(chart) {\r\n    const legend = chart.legend;\r\n    legend.buildLabels();\r\n    legend.adjustHitBoxes();\r\n  },\r\n  afterEvent(chart, args) {\r\n    if (!args.replay) {\r\n      chart.legend.handleEvent(args.event);\r\n    }\r\n  },\r\n  defaults: {\r\n    display: true,\r\n    position: 'top',\r\n    align: 'center',\r\n    fullSize: true,\r\n    reverse: false,\r\n    weight: 1000,\r\n    onClick(e, legendItem, legend) {\r\n      const index = legendItem.datasetIndex;\r\n      const ci = legend.chart;\r\n      if (ci.isDatasetVisible(index)) {\r\n        ci.hide(index);\r\n        legendItem.hidden = true;\r\n      } else {\r\n        ci.show(index);\r\n        legendItem.hidden = false;\r\n      }\r\n    },\r\n    onHover: null,\r\n    onLeave: null,\r\n    labels: {\r\n      color: (ctx) => ctx.chart.options.color,\r\n      boxWidth: 40,\r\n      padding: 10,\r\n      generateLabels(chart) {\r\n        const datasets = chart.data.datasets;\r\n        const {labels: {usePointStyle, pointStyle, textAlign, color}} = chart.legend.options;\r\n        return chart._getSortedDatasetMetas().map((meta) => {\r\n          const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\r\n          const borderWidth = toPadding(style.borderWidth);\r\n          return {\r\n            text: datasets[meta.index].label,\r\n            fillStyle: style.backgroundColor,\r\n            fontColor: color,\r\n            hidden: !meta.visible,\r\n            lineCap: style.borderCapStyle,\r\n            lineDash: style.borderDash,\r\n            lineDashOffset: style.borderDashOffset,\r\n            lineJoin: style.borderJoinStyle,\r\n            lineWidth: (borderWidth.width + borderWidth.height) / 4,\r\n            strokeStyle: style.borderColor,\r\n            pointStyle: pointStyle || style.pointStyle,\r\n            rotation: style.rotation,\r\n            textAlign: textAlign || style.textAlign,\r\n            borderRadius: 0,\r\n            datasetIndex: meta.index\r\n          };\r\n        }, this);\r\n      }\r\n    },\r\n    title: {\r\n      color: (ctx) => ctx.chart.options.color,\r\n      display: false,\r\n      position: 'center',\r\n      text: '',\r\n    }\r\n  },\r\n  descriptors: {\r\n    _scriptable: (name) => !name.startsWith('on'),\r\n    labels: {\r\n      _scriptable: (name) => !['generateLabels', 'filter', 'sort'].includes(name),\r\n    }\r\n  },\r\n};\r\n\r\nclass Title extends Element {\r\n  constructor(config) {\r\n    super();\r\n    this.chart = config.chart;\r\n    this.options = config.options;\r\n    this.ctx = config.ctx;\r\n    this._padding = undefined;\r\n    this.top = undefined;\r\n    this.bottom = undefined;\r\n    this.left = undefined;\r\n    this.right = undefined;\r\n    this.width = undefined;\r\n    this.height = undefined;\r\n    this.position = undefined;\r\n    this.weight = undefined;\r\n    this.fullSize = undefined;\r\n  }\r\n  update(maxWidth, maxHeight) {\r\n    const opts = this.options;\r\n    this.left = 0;\r\n    this.top = 0;\r\n    if (!opts.display) {\r\n      this.width = this.height = this.right = this.bottom = 0;\r\n      return;\r\n    }\r\n    this.width = this.right = maxWidth;\r\n    this.height = this.bottom = maxHeight;\r\n    const lineCount = isArray(opts.text) ? opts.text.length : 1;\r\n    this._padding = toPadding(opts.padding);\r\n    const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\r\n    if (this.isHorizontal()) {\r\n      this.height = textSize;\r\n    } else {\r\n      this.width = textSize;\r\n    }\r\n  }\r\n  isHorizontal() {\r\n    const pos = this.options.position;\r\n    return pos === 'top' || pos === 'bottom';\r\n  }\r\n  _drawArgs(offset) {\r\n    const {top, left, bottom, right, options} = this;\r\n    const align = options.align;\r\n    let rotation = 0;\r\n    let maxWidth, titleX, titleY;\r\n    if (this.isHorizontal()) {\r\n      titleX = _alignStartEnd(align, left, right);\r\n      titleY = top + offset;\r\n      maxWidth = right - left;\r\n    } else {\r\n      if (options.position === 'left') {\r\n        titleX = left + offset;\r\n        titleY = _alignStartEnd(align, bottom, top);\r\n        rotation = PI * -0.5;\r\n      } else {\r\n        titleX = right - offset;\r\n        titleY = _alignStartEnd(align, top, bottom);\r\n        rotation = PI * 0.5;\r\n      }\r\n      maxWidth = bottom - top;\r\n    }\r\n    return {titleX, titleY, maxWidth, rotation};\r\n  }\r\n  draw() {\r\n    const ctx = this.ctx;\r\n    const opts = this.options;\r\n    if (!opts.display) {\r\n      return;\r\n    }\r\n    const fontOpts = toFont(opts.font);\r\n    const lineHeight = fontOpts.lineHeight;\r\n    const offset = lineHeight / 2 + this._padding.top;\r\n    const {titleX, titleY, maxWidth, rotation} = this._drawArgs(offset);\r\n    renderText(ctx, opts.text, 0, 0, fontOpts, {\r\n      color: opts.color,\r\n      maxWidth,\r\n      rotation,\r\n      textAlign: _toLeftRightCenter(opts.align),\r\n      textBaseline: 'middle',\r\n      translation: [titleX, titleY],\r\n    });\r\n  }\r\n}\r\nfunction createTitle(chart, titleOpts) {\r\n  const title = new Title({\r\n    ctx: chart.ctx,\r\n    options: titleOpts,\r\n    chart\r\n  });\r\n  layouts.configure(chart, title, titleOpts);\r\n  layouts.addBox(chart, title);\r\n  chart.titleBlock = title;\r\n}\r\nvar plugin_title = {\r\n  id: 'title',\r\n  _element: Title,\r\n  start(chart, _args, options) {\r\n    createTitle(chart, options);\r\n  },\r\n  stop(chart) {\r\n    const titleBlock = chart.titleBlock;\r\n    layouts.removeBox(chart, titleBlock);\r\n    delete chart.titleBlock;\r\n  },\r\n  beforeUpdate(chart, _args, options) {\r\n    const title = chart.titleBlock;\r\n    layouts.configure(chart, title, options);\r\n    title.options = options;\r\n  },\r\n  defaults: {\r\n    align: 'center',\r\n    display: false,\r\n    font: {\r\n      weight: 'bold',\r\n    },\r\n    fullSize: true,\r\n    padding: 10,\r\n    position: 'top',\r\n    text: '',\r\n    weight: 2000\r\n  },\r\n  defaultRoutes: {\r\n    color: 'color'\r\n  },\r\n  descriptors: {\r\n    _scriptable: true,\r\n    _indexable: false,\r\n  },\r\n};\r\n\r\nconst map = new WeakMap();\r\nvar plugin_subtitle = {\r\n  id: 'subtitle',\r\n  start(chart, _args, options) {\r\n    const title = new Title({\r\n      ctx: chart.ctx,\r\n      options,\r\n      chart\r\n    });\r\n    layouts.configure(chart, title, options);\r\n    layouts.addBox(chart, title);\r\n    map.set(chart, title);\r\n  },\r\n  stop(chart) {\r\n    layouts.removeBox(chart, map.get(chart));\r\n    map.delete(chart);\r\n  },\r\n  beforeUpdate(chart, _args, options) {\r\n    const title = map.get(chart);\r\n    layouts.configure(chart, title, options);\r\n    title.options = options;\r\n  },\r\n  defaults: {\r\n    align: 'center',\r\n    display: false,\r\n    font: {\r\n      weight: 'normal',\r\n    },\r\n    fullSize: true,\r\n    padding: 0,\r\n    position: 'top',\r\n    text: '',\r\n    weight: 1500\r\n  },\r\n  defaultRoutes: {\r\n    color: 'color'\r\n  },\r\n  descriptors: {\r\n    _scriptable: true,\r\n    _indexable: false,\r\n  },\r\n};\r\n\r\nconst positioners = {\r\n  average(items) {\r\n    if (!items.length) {\r\n      return false;\r\n    }\r\n    let i, len;\r\n    let x = 0;\r\n    let y = 0;\r\n    let count = 0;\r\n    for (i = 0, len = items.length; i < len; ++i) {\r\n      const el = items[i].element;\r\n      if (el && el.hasValue()) {\r\n        const pos = el.tooltipPosition();\r\n        x += pos.x;\r\n        y += pos.y;\r\n        ++count;\r\n      }\r\n    }\r\n    return {\r\n      x: x / count,\r\n      y: y / count\r\n    };\r\n  },\r\n  nearest(items, eventPosition) {\r\n    if (!items.length) {\r\n      return false;\r\n    }\r\n    let x = eventPosition.x;\r\n    let y = eventPosition.y;\r\n    let minDistance = Number.POSITIVE_INFINITY;\r\n    let i, len, nearestElement;\r\n    for (i = 0, len = items.length; i < len; ++i) {\r\n      const el = items[i].element;\r\n      if (el && el.hasValue()) {\r\n        const center = el.getCenterPoint();\r\n        const d = distanceBetweenPoints(eventPosition, center);\r\n        if (d < minDistance) {\r\n          minDistance = d;\r\n          nearestElement = el;\r\n        }\r\n      }\r\n    }\r\n    if (nearestElement) {\r\n      const tp = nearestElement.tooltipPosition();\r\n      x = tp.x;\r\n      y = tp.y;\r\n    }\r\n    return {\r\n      x,\r\n      y\r\n    };\r\n  }\r\n};\r\nfunction pushOrConcat(base, toPush) {\r\n  if (toPush) {\r\n    if (isArray(toPush)) {\r\n      Array.prototype.push.apply(base, toPush);\r\n    } else {\r\n      base.push(toPush);\r\n    }\r\n  }\r\n  return base;\r\n}\r\nfunction splitNewlines(str) {\r\n  if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\r\n    return str.split('\\n');\r\n  }\r\n  return str;\r\n}\r\nfunction createTooltipItem(chart, item) {\r\n  const {element, datasetIndex, index} = item;\r\n  const controller = chart.getDatasetMeta(datasetIndex).controller;\r\n  const {label, value} = controller.getLabelAndValue(index);\r\n  return {\r\n    chart,\r\n    label,\r\n    parsed: controller.getParsed(index),\r\n    raw: chart.data.datasets[datasetIndex].data[index],\r\n    formattedValue: value,\r\n    dataset: controller.getDataset(),\r\n    dataIndex: index,\r\n    datasetIndex,\r\n    element\r\n  };\r\n}\r\nfunction getTooltipSize(tooltip, options) {\r\n  const ctx = tooltip.chart.ctx;\r\n  const {body, footer, title} = tooltip;\r\n  const {boxWidth, boxHeight} = options;\r\n  const bodyFont = toFont(options.bodyFont);\r\n  const titleFont = toFont(options.titleFont);\r\n  const footerFont = toFont(options.footerFont);\r\n  const titleLineCount = title.length;\r\n  const footerLineCount = footer.length;\r\n  const bodyLineItemCount = body.length;\r\n  const padding = toPadding(options.padding);\r\n  let height = padding.height;\r\n  let width = 0;\r\n  let combinedBodyLength = body.reduce((count, bodyItem) => count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\r\n  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\r\n  if (titleLineCount) {\r\n    height += titleLineCount * titleFont.lineHeight\r\n\t\t\t+ (titleLineCount - 1) * options.titleSpacing\r\n\t\t\t+ options.titleMarginBottom;\r\n  }\r\n  if (combinedBodyLength) {\r\n    const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\r\n    height += bodyLineItemCount * bodyLineHeight\r\n\t\t\t+ (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight\r\n\t\t\t+ (combinedBodyLength - 1) * options.bodySpacing;\r\n  }\r\n  if (footerLineCount) {\r\n    height += options.footerMarginTop\r\n\t\t\t+ footerLineCount * footerFont.lineHeight\r\n\t\t\t+ (footerLineCount - 1) * options.footerSpacing;\r\n  }\r\n  let widthPadding = 0;\r\n  const maxLineWidth = function(line) {\r\n    width = Math.max(width, ctx.measureText(line).width + widthPadding);\r\n  };\r\n  ctx.save();\r\n  ctx.font = titleFont.string;\r\n  each(tooltip.title, maxLineWidth);\r\n  ctx.font = bodyFont.string;\r\n  each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\r\n  widthPadding = options.displayColors ? (boxWidth + 2 + options.boxPadding) : 0;\r\n  each(body, (bodyItem) => {\r\n    each(bodyItem.before, maxLineWidth);\r\n    each(bodyItem.lines, maxLineWidth);\r\n    each(bodyItem.after, maxLineWidth);\r\n  });\r\n  widthPadding = 0;\r\n  ctx.font = footerFont.string;\r\n  each(tooltip.footer, maxLineWidth);\r\n  ctx.restore();\r\n  width += padding.width;\r\n  return {width, height};\r\n}\r\nfunction determineYAlign(chart, size) {\r\n  const {y, height} = size;\r\n  if (y < height / 2) {\r\n    return 'top';\r\n  } else if (y > (chart.height - height / 2)) {\r\n    return 'bottom';\r\n  }\r\n  return 'center';\r\n}\r\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\r\n  const {x, width} = size;\r\n  const caret = options.caretSize + options.caretPadding;\r\n  if (xAlign === 'left' && x + width + caret > chart.width) {\r\n    return true;\r\n  }\r\n  if (xAlign === 'right' && x - width - caret < 0) {\r\n    return true;\r\n  }\r\n}\r\nfunction determineXAlign(chart, options, size, yAlign) {\r\n  const {x, width} = size;\r\n  const {width: chartWidth, chartArea: {left, right}} = chart;\r\n  let xAlign = 'center';\r\n  if (yAlign === 'center') {\r\n    xAlign = x <= (left + right) / 2 ? 'left' : 'right';\r\n  } else if (x <= width / 2) {\r\n    xAlign = 'left';\r\n  } else if (x >= chartWidth - width / 2) {\r\n    xAlign = 'right';\r\n  }\r\n  if (doesNotFitWithAlign(xAlign, chart, options, size)) {\r\n    xAlign = 'center';\r\n  }\r\n  return xAlign;\r\n}\r\nfunction determineAlignment(chart, options, size) {\r\n  const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\r\n  return {\r\n    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\r\n    yAlign\r\n  };\r\n}\r\nfunction alignX(size, xAlign) {\r\n  let {x, width} = size;\r\n  if (xAlign === 'right') {\r\n    x -= width;\r\n  } else if (xAlign === 'center') {\r\n    x -= (width / 2);\r\n  }\r\n  return x;\r\n}\r\nfunction alignY(size, yAlign, paddingAndSize) {\r\n  let {y, height} = size;\r\n  if (yAlign === 'top') {\r\n    y += paddingAndSize;\r\n  } else if (yAlign === 'bottom') {\r\n    y -= height + paddingAndSize;\r\n  } else {\r\n    y -= (height / 2);\r\n  }\r\n  return y;\r\n}\r\nfunction getBackgroundPoint(options, size, alignment, chart) {\r\n  const {caretSize, caretPadding, cornerRadius} = options;\r\n  const {xAlign, yAlign} = alignment;\r\n  const paddingAndSize = caretSize + caretPadding;\r\n  const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\r\n  let x = alignX(size, xAlign);\r\n  const y = alignY(size, yAlign, paddingAndSize);\r\n  if (yAlign === 'center') {\r\n    if (xAlign === 'left') {\r\n      x += paddingAndSize;\r\n    } else if (xAlign === 'right') {\r\n      x -= paddingAndSize;\r\n    }\r\n  } else if (xAlign === 'left') {\r\n    x -= Math.max(topLeft, bottomLeft) + caretSize;\r\n  } else if (xAlign === 'right') {\r\n    x += Math.max(topRight, bottomRight) + caretSize;\r\n  }\r\n  return {\r\n    x: _limitValue(x, 0, chart.width - size.width),\r\n    y: _limitValue(y, 0, chart.height - size.height)\r\n  };\r\n}\r\nfunction getAlignedX(tooltip, align, options) {\r\n  const padding = toPadding(options.padding);\r\n  return align === 'center'\r\n    ? tooltip.x + tooltip.width / 2\r\n    : align === 'right'\r\n      ? tooltip.x + tooltip.width - padding.right\r\n      : tooltip.x + padding.left;\r\n}\r\nfunction getBeforeAfterBodyLines(callback) {\r\n  return pushOrConcat([], splitNewlines(callback));\r\n}\r\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\r\n  return createContext(parent, {\r\n    tooltip,\r\n    tooltipItems,\r\n    type: 'tooltip'\r\n  });\r\n}\r\nfunction overrideCallbacks(callbacks, context) {\r\n  const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\r\n  return override ? callbacks.override(override) : callbacks;\r\n}\r\nclass Tooltip extends Element {\r\n  constructor(config) {\r\n    super();\r\n    this.opacity = 0;\r\n    this._active = [];\r\n    this._eventPosition = undefined;\r\n    this._size = undefined;\r\n    this._cachedAnimations = undefined;\r\n    this._tooltipItems = [];\r\n    this.$animations = undefined;\r\n    this.$context = undefined;\r\n    this.chart = config.chart || config._chart;\r\n    this._chart = this.chart;\r\n    this.options = config.options;\r\n    this.dataPoints = undefined;\r\n    this.title = undefined;\r\n    this.beforeBody = undefined;\r\n    this.body = undefined;\r\n    this.afterBody = undefined;\r\n    this.footer = undefined;\r\n    this.xAlign = undefined;\r\n    this.yAlign = undefined;\r\n    this.x = undefined;\r\n    this.y = undefined;\r\n    this.height = undefined;\r\n    this.width = undefined;\r\n    this.caretX = undefined;\r\n    this.caretY = undefined;\r\n    this.labelColors = undefined;\r\n    this.labelPointStyles = undefined;\r\n    this.labelTextColors = undefined;\r\n  }\r\n  initialize(options) {\r\n    this.options = options;\r\n    this._cachedAnimations = undefined;\r\n    this.$context = undefined;\r\n  }\r\n  _resolveAnimations() {\r\n    const cached = this._cachedAnimations;\r\n    if (cached) {\r\n      return cached;\r\n    }\r\n    const chart = this.chart;\r\n    const options = this.options.setContext(this.getContext());\r\n    const opts = options.enabled && chart.options.animation && options.animations;\r\n    const animations = new Animations(this.chart, opts);\r\n    if (opts._cacheable) {\r\n      this._cachedAnimations = Object.freeze(animations);\r\n    }\r\n    return animations;\r\n  }\r\n  getContext() {\r\n    return this.$context ||\r\n\t\t\t(this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\r\n  }\r\n  getTitle(context, options) {\r\n    const {callbacks} = options;\r\n    const beforeTitle = callbacks.beforeTitle.apply(this, [context]);\r\n    const title = callbacks.title.apply(this, [context]);\r\n    const afterTitle = callbacks.afterTitle.apply(this, [context]);\r\n    let lines = [];\r\n    lines = pushOrConcat(lines, splitNewlines(beforeTitle));\r\n    lines = pushOrConcat(lines, splitNewlines(title));\r\n    lines = pushOrConcat(lines, splitNewlines(afterTitle));\r\n    return lines;\r\n  }\r\n  getBeforeBody(tooltipItems, options) {\r\n    return getBeforeAfterBodyLines(options.callbacks.beforeBody.apply(this, [tooltipItems]));\r\n  }\r\n  getBody(tooltipItems, options) {\r\n    const {callbacks} = options;\r\n    const bodyItems = [];\r\n    each(tooltipItems, (context) => {\r\n      const bodyItem = {\r\n        before: [],\r\n        lines: [],\r\n        after: []\r\n      };\r\n      const scoped = overrideCallbacks(callbacks, context);\r\n      pushOrConcat(bodyItem.before, splitNewlines(scoped.beforeLabel.call(this, context)));\r\n      pushOrConcat(bodyItem.lines, scoped.label.call(this, context));\r\n      pushOrConcat(bodyItem.after, splitNewlines(scoped.afterLabel.call(this, context)));\r\n      bodyItems.push(bodyItem);\r\n    });\r\n    return bodyItems;\r\n  }\r\n  getAfterBody(tooltipItems, options) {\r\n    return getBeforeAfterBodyLines(options.callbacks.afterBody.apply(this, [tooltipItems]));\r\n  }\r\n  getFooter(tooltipItems, options) {\r\n    const {callbacks} = options;\r\n    const beforeFooter = callbacks.beforeFooter.apply(this, [tooltipItems]);\r\n    const footer = callbacks.footer.apply(this, [tooltipItems]);\r\n    const afterFooter = callbacks.afterFooter.apply(this, [tooltipItems]);\r\n    let lines = [];\r\n    lines = pushOrConcat(lines, splitNewlines(beforeFooter));\r\n    lines = pushOrConcat(lines, splitNewlines(footer));\r\n    lines = pushOrConcat(lines, splitNewlines(afterFooter));\r\n    return lines;\r\n  }\r\n  _createItems(options) {\r\n    const active = this._active;\r\n    const data = this.chart.data;\r\n    const labelColors = [];\r\n    const labelPointStyles = [];\r\n    const labelTextColors = [];\r\n    let tooltipItems = [];\r\n    let i, len;\r\n    for (i = 0, len = active.length; i < len; ++i) {\r\n      tooltipItems.push(createTooltipItem(this.chart, active[i]));\r\n    }\r\n    if (options.filter) {\r\n      tooltipItems = tooltipItems.filter((element, index, array) => options.filter(element, index, array, data));\r\n    }\r\n    if (options.itemSort) {\r\n      tooltipItems = tooltipItems.sort((a, b) => options.itemSort(a, b, data));\r\n    }\r\n    each(tooltipItems, (context) => {\r\n      const scoped = overrideCallbacks(options.callbacks, context);\r\n      labelColors.push(scoped.labelColor.call(this, context));\r\n      labelPointStyles.push(scoped.labelPointStyle.call(this, context));\r\n      labelTextColors.push(scoped.labelTextColor.call(this, context));\r\n    });\r\n    this.labelColors = labelColors;\r\n    this.labelPointStyles = labelPointStyles;\r\n    this.labelTextColors = labelTextColors;\r\n    this.dataPoints = tooltipItems;\r\n    return tooltipItems;\r\n  }\r\n  update(changed, replay) {\r\n    const options = this.options.setContext(this.getContext());\r\n    const active = this._active;\r\n    let properties;\r\n    let tooltipItems = [];\r\n    if (!active.length) {\r\n      if (this.opacity !== 0) {\r\n        properties = {\r\n          opacity: 0\r\n        };\r\n      }\r\n    } else {\r\n      const position = positioners[options.position].call(this, active, this._eventPosition);\r\n      tooltipItems = this._createItems(options);\r\n      this.title = this.getTitle(tooltipItems, options);\r\n      this.beforeBody = this.getBeforeBody(tooltipItems, options);\r\n      this.body = this.getBody(tooltipItems, options);\r\n      this.afterBody = this.getAfterBody(tooltipItems, options);\r\n      this.footer = this.getFooter(tooltipItems, options);\r\n      const size = this._size = getTooltipSize(this, options);\r\n      const positionAndSize = Object.assign({}, position, size);\r\n      const alignment = determineAlignment(this.chart, options, positionAndSize);\r\n      const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\r\n      this.xAlign = alignment.xAlign;\r\n      this.yAlign = alignment.yAlign;\r\n      properties = {\r\n        opacity: 1,\r\n        x: backgroundPoint.x,\r\n        y: backgroundPoint.y,\r\n        width: size.width,\r\n        height: size.height,\r\n        caretX: position.x,\r\n        caretY: position.y\r\n      };\r\n    }\r\n    this._tooltipItems = tooltipItems;\r\n    this.$context = undefined;\r\n    if (properties) {\r\n      this._resolveAnimations().update(this, properties);\r\n    }\r\n    if (changed && options.external) {\r\n      options.external.call(this, {chart: this.chart, tooltip: this, replay});\r\n    }\r\n  }\r\n  drawCaret(tooltipPoint, ctx, size, options) {\r\n    const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\r\n    ctx.lineTo(caretPosition.x1, caretPosition.y1);\r\n    ctx.lineTo(caretPosition.x2, caretPosition.y2);\r\n    ctx.lineTo(caretPosition.x3, caretPosition.y3);\r\n  }\r\n  getCaretPosition(tooltipPoint, size, options) {\r\n    const {xAlign, yAlign} = this;\r\n    const {caretSize, cornerRadius} = options;\r\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\r\n    const {x: ptX, y: ptY} = tooltipPoint;\r\n    const {width, height} = size;\r\n    let x1, x2, x3, y1, y2, y3;\r\n    if (yAlign === 'center') {\r\n      y2 = ptY + (height / 2);\r\n      if (xAlign === 'left') {\r\n        x1 = ptX;\r\n        x2 = x1 - caretSize;\r\n        y1 = y2 + caretSize;\r\n        y3 = y2 - caretSize;\r\n      } else {\r\n        x1 = ptX + width;\r\n        x2 = x1 + caretSize;\r\n        y1 = y2 - caretSize;\r\n        y3 = y2 + caretSize;\r\n      }\r\n      x3 = x1;\r\n    } else {\r\n      if (xAlign === 'left') {\r\n        x2 = ptX + Math.max(topLeft, bottomLeft) + (caretSize);\r\n      } else if (xAlign === 'right') {\r\n        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\r\n      } else {\r\n        x2 = this.caretX;\r\n      }\r\n      if (yAlign === 'top') {\r\n        y1 = ptY;\r\n        y2 = y1 - caretSize;\r\n        x1 = x2 - caretSize;\r\n        x3 = x2 + caretSize;\r\n      } else {\r\n        y1 = ptY + height;\r\n        y2 = y1 + caretSize;\r\n        x1 = x2 + caretSize;\r\n        x3 = x2 - caretSize;\r\n      }\r\n      y3 = y1;\r\n    }\r\n    return {x1, x2, x3, y1, y2, y3};\r\n  }\r\n  drawTitle(pt, ctx, options) {\r\n    const title = this.title;\r\n    const length = title.length;\r\n    let titleFont, titleSpacing, i;\r\n    if (length) {\r\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\r\n      pt.x = getAlignedX(this, options.titleAlign, options);\r\n      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\r\n      ctx.textBaseline = 'middle';\r\n      titleFont = toFont(options.titleFont);\r\n      titleSpacing = options.titleSpacing;\r\n      ctx.fillStyle = options.titleColor;\r\n      ctx.font = titleFont.string;\r\n      for (i = 0; i < length; ++i) {\r\n        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\r\n        pt.y += titleFont.lineHeight + titleSpacing;\r\n        if (i + 1 === length) {\r\n          pt.y += options.titleMarginBottom - titleSpacing;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  _drawColorBox(ctx, pt, i, rtlHelper, options) {\r\n    const labelColors = this.labelColors[i];\r\n    const labelPointStyle = this.labelPointStyles[i];\r\n    const {boxHeight, boxWidth, boxPadding} = options;\r\n    const bodyFont = toFont(options.bodyFont);\r\n    const colorX = getAlignedX(this, 'left', options);\r\n    const rtlColorX = rtlHelper.x(colorX);\r\n    const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\r\n    const colorY = pt.y + yOffSet;\r\n    if (options.usePointStyle) {\r\n      const drawOptions = {\r\n        radius: Math.min(boxWidth, boxHeight) / 2,\r\n        pointStyle: labelPointStyle.pointStyle,\r\n        rotation: labelPointStyle.rotation,\r\n        borderWidth: 1\r\n      };\r\n      const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\r\n      const centerY = colorY + boxHeight / 2;\r\n      ctx.strokeStyle = options.multiKeyBackground;\r\n      ctx.fillStyle = options.multiKeyBackground;\r\n      drawPoint(ctx, drawOptions, centerX, centerY);\r\n      ctx.strokeStyle = labelColors.borderColor;\r\n      ctx.fillStyle = labelColors.backgroundColor;\r\n      drawPoint(ctx, drawOptions, centerX, centerY);\r\n    } else {\r\n      ctx.lineWidth = isObject(labelColors.borderWidth) ? Math.max(...Object.values(labelColors.borderWidth)) : (labelColors.borderWidth || 1);\r\n      ctx.strokeStyle = labelColors.borderColor;\r\n      ctx.setLineDash(labelColors.borderDash || []);\r\n      ctx.lineDashOffset = labelColors.borderDashOffset || 0;\r\n      const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth - boxPadding);\r\n      const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - boxPadding - 2);\r\n      const borderRadius = toTRBLCorners(labelColors.borderRadius);\r\n      if (Object.values(borderRadius).some(v => v !== 0)) {\r\n        ctx.beginPath();\r\n        ctx.fillStyle = options.multiKeyBackground;\r\n        addRoundedRectPath(ctx, {\r\n          x: outerX,\r\n          y: colorY,\r\n          w: boxWidth,\r\n          h: boxHeight,\r\n          radius: borderRadius,\r\n        });\r\n        ctx.fill();\r\n        ctx.stroke();\r\n        ctx.fillStyle = labelColors.backgroundColor;\r\n        ctx.beginPath();\r\n        addRoundedRectPath(ctx, {\r\n          x: innerX,\r\n          y: colorY + 1,\r\n          w: boxWidth - 2,\r\n          h: boxHeight - 2,\r\n          radius: borderRadius,\r\n        });\r\n        ctx.fill();\r\n      } else {\r\n        ctx.fillStyle = options.multiKeyBackground;\r\n        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\r\n        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\r\n        ctx.fillStyle = labelColors.backgroundColor;\r\n        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\r\n      }\r\n    }\r\n    ctx.fillStyle = this.labelTextColors[i];\r\n  }\r\n  drawBody(pt, ctx, options) {\r\n    const {body} = this;\r\n    const {bodySpacing, bodyAlign, displayColors, boxHeight, boxWidth, boxPadding} = options;\r\n    const bodyFont = toFont(options.bodyFont);\r\n    let bodyLineHeight = bodyFont.lineHeight;\r\n    let xLinePadding = 0;\r\n    const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\r\n    const fillLineOfText = function(line) {\r\n      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\r\n      pt.y += bodyLineHeight + bodySpacing;\r\n    };\r\n    const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\r\n    let bodyItem, textColor, lines, i, j, ilen, jlen;\r\n    ctx.textAlign = bodyAlign;\r\n    ctx.textBaseline = 'middle';\r\n    ctx.font = bodyFont.string;\r\n    pt.x = getAlignedX(this, bodyAlignForCalculation, options);\r\n    ctx.fillStyle = options.bodyColor;\r\n    each(this.beforeBody, fillLineOfText);\r\n    xLinePadding = displayColors && bodyAlignForCalculation !== 'right'\r\n      ? bodyAlign === 'center' ? (boxWidth / 2 + boxPadding) : (boxWidth + 2 + boxPadding)\r\n      : 0;\r\n    for (i = 0, ilen = body.length; i < ilen; ++i) {\r\n      bodyItem = body[i];\r\n      textColor = this.labelTextColors[i];\r\n      ctx.fillStyle = textColor;\r\n      each(bodyItem.before, fillLineOfText);\r\n      lines = bodyItem.lines;\r\n      if (displayColors && lines.length) {\r\n        this._drawColorBox(ctx, pt, i, rtlHelper, options);\r\n        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\r\n      }\r\n      for (j = 0, jlen = lines.length; j < jlen; ++j) {\r\n        fillLineOfText(lines[j]);\r\n        bodyLineHeight = bodyFont.lineHeight;\r\n      }\r\n      each(bodyItem.after, fillLineOfText);\r\n    }\r\n    xLinePadding = 0;\r\n    bodyLineHeight = bodyFont.lineHeight;\r\n    each(this.afterBody, fillLineOfText);\r\n    pt.y -= bodySpacing;\r\n  }\r\n  drawFooter(pt, ctx, options) {\r\n    const footer = this.footer;\r\n    const length = footer.length;\r\n    let footerFont, i;\r\n    if (length) {\r\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\r\n      pt.x = getAlignedX(this, options.footerAlign, options);\r\n      pt.y += options.footerMarginTop;\r\n      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\r\n      ctx.textBaseline = 'middle';\r\n      footerFont = toFont(options.footerFont);\r\n      ctx.fillStyle = options.footerColor;\r\n      ctx.font = footerFont.string;\r\n      for (i = 0; i < length; ++i) {\r\n        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\r\n        pt.y += footerFont.lineHeight + options.footerSpacing;\r\n      }\r\n    }\r\n  }\r\n  drawBackground(pt, ctx, tooltipSize, options) {\r\n    const {xAlign, yAlign} = this;\r\n    const {x, y} = pt;\r\n    const {width, height} = tooltipSize;\r\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(options.cornerRadius);\r\n    ctx.fillStyle = options.backgroundColor;\r\n    ctx.strokeStyle = options.borderColor;\r\n    ctx.lineWidth = options.borderWidth;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + topLeft, y);\r\n    if (yAlign === 'top') {\r\n      this.drawCaret(pt, ctx, tooltipSize, options);\r\n    }\r\n    ctx.lineTo(x + width - topRight, y);\r\n    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\r\n    if (yAlign === 'center' && xAlign === 'right') {\r\n      this.drawCaret(pt, ctx, tooltipSize, options);\r\n    }\r\n    ctx.lineTo(x + width, y + height - bottomRight);\r\n    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\r\n    if (yAlign === 'bottom') {\r\n      this.drawCaret(pt, ctx, tooltipSize, options);\r\n    }\r\n    ctx.lineTo(x + bottomLeft, y + height);\r\n    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\r\n    if (yAlign === 'center' && xAlign === 'left') {\r\n      this.drawCaret(pt, ctx, tooltipSize, options);\r\n    }\r\n    ctx.lineTo(x, y + topLeft);\r\n    ctx.quadraticCurveTo(x, y, x + topLeft, y);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    if (options.borderWidth > 0) {\r\n      ctx.stroke();\r\n    }\r\n  }\r\n  _updateAnimationTarget(options) {\r\n    const chart = this.chart;\r\n    const anims = this.$animations;\r\n    const animX = anims && anims.x;\r\n    const animY = anims && anims.y;\r\n    if (animX || animY) {\r\n      const position = positioners[options.position].call(this, this._active, this._eventPosition);\r\n      if (!position) {\r\n        return;\r\n      }\r\n      const size = this._size = getTooltipSize(this, options);\r\n      const positionAndSize = Object.assign({}, position, this._size);\r\n      const alignment = determineAlignment(chart, options, positionAndSize);\r\n      const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\r\n      if (animX._to !== point.x || animY._to !== point.y) {\r\n        this.xAlign = alignment.xAlign;\r\n        this.yAlign = alignment.yAlign;\r\n        this.width = size.width;\r\n        this.height = size.height;\r\n        this.caretX = position.x;\r\n        this.caretY = position.y;\r\n        this._resolveAnimations().update(this, point);\r\n      }\r\n    }\r\n  }\r\n  _willRender() {\r\n    return !!this.opacity;\r\n  }\r\n  draw(ctx) {\r\n    const options = this.options.setContext(this.getContext());\r\n    let opacity = this.opacity;\r\n    if (!opacity) {\r\n      return;\r\n    }\r\n    this._updateAnimationTarget(options);\r\n    const tooltipSize = {\r\n      width: this.width,\r\n      height: this.height\r\n    };\r\n    const pt = {\r\n      x: this.x,\r\n      y: this.y\r\n    };\r\n    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\r\n    const padding = toPadding(options.padding);\r\n    const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\r\n    if (options.enabled && hasTooltipContent) {\r\n      ctx.save();\r\n      ctx.globalAlpha = opacity;\r\n      this.drawBackground(pt, ctx, tooltipSize, options);\r\n      overrideTextDirection(ctx, options.textDirection);\r\n      pt.y += padding.top;\r\n      this.drawTitle(pt, ctx, options);\r\n      this.drawBody(pt, ctx, options);\r\n      this.drawFooter(pt, ctx, options);\r\n      restoreTextDirection(ctx, options.textDirection);\r\n      ctx.restore();\r\n    }\r\n  }\r\n  getActiveElements() {\r\n    return this._active || [];\r\n  }\r\n  setActiveElements(activeElements, eventPosition) {\r\n    const lastActive = this._active;\r\n    const active = activeElements.map(({datasetIndex, index}) => {\r\n      const meta = this.chart.getDatasetMeta(datasetIndex);\r\n      if (!meta) {\r\n        throw new Error('Cannot find a dataset at index ' + datasetIndex);\r\n      }\r\n      return {\r\n        datasetIndex,\r\n        element: meta.data[index],\r\n        index,\r\n      };\r\n    });\r\n    const changed = !_elementsEqual(lastActive, active);\r\n    const positionChanged = this._positionChanged(active, eventPosition);\r\n    if (changed || positionChanged) {\r\n      this._active = active;\r\n      this._eventPosition = eventPosition;\r\n      this._ignoreReplayEvents = true;\r\n      this.update(true);\r\n    }\r\n  }\r\n  handleEvent(e, replay, inChartArea = true) {\r\n    if (replay && this._ignoreReplayEvents) {\r\n      return false;\r\n    }\r\n    this._ignoreReplayEvents = false;\r\n    const options = this.options;\r\n    const lastActive = this._active || [];\r\n    const active = this._getActiveElements(e, lastActive, replay, inChartArea);\r\n    const positionChanged = this._positionChanged(active, e);\r\n    const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\r\n    if (changed) {\r\n      this._active = active;\r\n      if (options.enabled || options.external) {\r\n        this._eventPosition = {\r\n          x: e.x,\r\n          y: e.y\r\n        };\r\n        this.update(true, replay);\r\n      }\r\n    }\r\n    return changed;\r\n  }\r\n  _getActiveElements(e, lastActive, replay, inChartArea) {\r\n    const options = this.options;\r\n    if (e.type === 'mouseout') {\r\n      return [];\r\n    }\r\n    if (!inChartArea) {\r\n      return lastActive;\r\n    }\r\n    const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\r\n    if (options.reverse) {\r\n      active.reverse();\r\n    }\r\n    return active;\r\n  }\r\n  _positionChanged(active, e) {\r\n    const {caretX, caretY, options} = this;\r\n    const position = positioners[options.position].call(this, active, e);\r\n    return position !== false && (caretX !== position.x || caretY !== position.y);\r\n  }\r\n}\r\nTooltip.positioners = positioners;\r\nvar plugin_tooltip = {\r\n  id: 'tooltip',\r\n  _element: Tooltip,\r\n  positioners,\r\n  afterInit(chart, _args, options) {\r\n    if (options) {\r\n      chart.tooltip = new Tooltip({chart, options});\r\n    }\r\n  },\r\n  beforeUpdate(chart, _args, options) {\r\n    if (chart.tooltip) {\r\n      chart.tooltip.initialize(options);\r\n    }\r\n  },\r\n  reset(chart, _args, options) {\r\n    if (chart.tooltip) {\r\n      chart.tooltip.initialize(options);\r\n    }\r\n  },\r\n  afterDraw(chart) {\r\n    const tooltip = chart.tooltip;\r\n    if (tooltip && tooltip._willRender()) {\r\n      const args = {\r\n        tooltip\r\n      };\r\n      if (chart.notifyPlugins('beforeTooltipDraw', args) === false) {\r\n        return;\r\n      }\r\n      tooltip.draw(chart.ctx);\r\n      chart.notifyPlugins('afterTooltipDraw', args);\r\n    }\r\n  },\r\n  afterEvent(chart, args) {\r\n    if (chart.tooltip) {\r\n      const useFinalPosition = args.replay;\r\n      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\r\n        args.changed = true;\r\n      }\r\n    }\r\n  },\r\n  defaults: {\r\n    enabled: true,\r\n    external: null,\r\n    position: 'average',\r\n    backgroundColor: 'rgba(0,0,0,0.8)',\r\n    titleColor: '#fff',\r\n    titleFont: {\r\n      weight: 'bold',\r\n    },\r\n    titleSpacing: 2,\r\n    titleMarginBottom: 6,\r\n    titleAlign: 'left',\r\n    bodyColor: '#fff',\r\n    bodySpacing: 2,\r\n    bodyFont: {\r\n    },\r\n    bodyAlign: 'left',\r\n    footerColor: '#fff',\r\n    footerSpacing: 2,\r\n    footerMarginTop: 6,\r\n    footerFont: {\r\n      weight: 'bold',\r\n    },\r\n    footerAlign: 'left',\r\n    padding: 6,\r\n    caretPadding: 2,\r\n    caretSize: 5,\r\n    cornerRadius: 6,\r\n    boxHeight: (ctx, opts) => opts.bodyFont.size,\r\n    boxWidth: (ctx, opts) => opts.bodyFont.size,\r\n    multiKeyBackground: '#fff',\r\n    displayColors: true,\r\n    boxPadding: 0,\r\n    borderColor: 'rgba(0,0,0,0)',\r\n    borderWidth: 0,\r\n    animation: {\r\n      duration: 400,\r\n      easing: 'easeOutQuart',\r\n    },\r\n    animations: {\r\n      numbers: {\r\n        type: 'number',\r\n        properties: ['x', 'y', 'width', 'height', 'caretX', 'caretY'],\r\n      },\r\n      opacity: {\r\n        easing: 'linear',\r\n        duration: 200\r\n      }\r\n    },\r\n    callbacks: {\r\n      beforeTitle: noop,\r\n      title(tooltipItems) {\r\n        if (tooltipItems.length > 0) {\r\n          const item = tooltipItems[0];\r\n          const labels = item.chart.data.labels;\r\n          const labelCount = labels ? labels.length : 0;\r\n          if (this && this.options && this.options.mode === 'dataset') {\r\n            return item.dataset.label || '';\r\n          } else if (item.label) {\r\n            return item.label;\r\n          } else if (labelCount > 0 && item.dataIndex < labelCount) {\r\n            return labels[item.dataIndex];\r\n          }\r\n        }\r\n        return '';\r\n      },\r\n      afterTitle: noop,\r\n      beforeBody: noop,\r\n      beforeLabel: noop,\r\n      label(tooltipItem) {\r\n        if (this && this.options && this.options.mode === 'dataset') {\r\n          return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\r\n        }\r\n        let label = tooltipItem.dataset.label || '';\r\n        if (label) {\r\n          label += ': ';\r\n        }\r\n        const value = tooltipItem.formattedValue;\r\n        if (!isNullOrUndef(value)) {\r\n          label += value;\r\n        }\r\n        return label;\r\n      },\r\n      labelColor(tooltipItem) {\r\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\r\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\r\n        return {\r\n          borderColor: options.borderColor,\r\n          backgroundColor: options.backgroundColor,\r\n          borderWidth: options.borderWidth,\r\n          borderDash: options.borderDash,\r\n          borderDashOffset: options.borderDashOffset,\r\n          borderRadius: 0,\r\n        };\r\n      },\r\n      labelTextColor() {\r\n        return this.options.bodyColor;\r\n      },\r\n      labelPointStyle(tooltipItem) {\r\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\r\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\r\n        return {\r\n          pointStyle: options.pointStyle,\r\n          rotation: options.rotation,\r\n        };\r\n      },\r\n      afterLabel: noop,\r\n      afterBody: noop,\r\n      beforeFooter: noop,\r\n      footer: noop,\r\n      afterFooter: noop\r\n    }\r\n  },\r\n  defaultRoutes: {\r\n    bodyFont: 'font',\r\n    footerFont: 'font',\r\n    titleFont: 'font'\r\n  },\r\n  descriptors: {\r\n    _scriptable: (name) => name !== 'filter' && name !== 'itemSort' && name !== 'external',\r\n    _indexable: false,\r\n    callbacks: {\r\n      _scriptable: false,\r\n      _indexable: false,\r\n    },\r\n    animation: {\r\n      _fallback: false\r\n    },\r\n    animations: {\r\n      _fallback: 'animation'\r\n    }\r\n  },\r\n  additionalOptionScopes: ['interaction']\r\n};\r\n\r\nvar plugins = /*#__PURE__*/Object.freeze({\r\n__proto__: null,\r\nDecimation: plugin_decimation,\r\nFiller: index,\r\nLegend: plugin_legend,\r\nSubTitle: plugin_subtitle,\r\nTitle: plugin_title,\r\nTooltip: plugin_tooltip\r\n});\r\n\r\nconst addIfString = (labels, raw, index, addedLabels) => {\r\n  if (typeof raw === 'string') {\r\n    index = labels.push(raw) - 1;\r\n    addedLabels.unshift({index, label: raw});\r\n  } else if (isNaN(raw)) {\r\n    index = null;\r\n  }\r\n  return index;\r\n};\r\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\r\n  const first = labels.indexOf(raw);\r\n  if (first === -1) {\r\n    return addIfString(labels, raw, index, addedLabels);\r\n  }\r\n  const last = labels.lastIndexOf(raw);\r\n  return first !== last ? index : first;\r\n}\r\nconst validIndex = (index, max) => index === null ? null : _limitValue(Math.round(index), 0, max);\r\nclass CategoryScale extends Scale {\r\n  constructor(cfg) {\r\n    super(cfg);\r\n    this._startValue = undefined;\r\n    this._valueRange = 0;\r\n    this._addedLabels = [];\r\n  }\r\n  init(scaleOptions) {\r\n    const added = this._addedLabels;\r\n    if (added.length) {\r\n      const labels = this.getLabels();\r\n      for (const {index, label} of added) {\r\n        if (labels[index] === label) {\r\n          labels.splice(index, 1);\r\n        }\r\n      }\r\n      this._addedLabels = [];\r\n    }\r\n    super.init(scaleOptions);\r\n  }\r\n  parse(raw, index) {\r\n    if (isNullOrUndef(raw)) {\r\n      return null;\r\n    }\r\n    const labels = this.getLabels();\r\n    index = isFinite(index) && labels[index] === raw ? index\r\n      : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\r\n    return validIndex(index, labels.length - 1);\r\n  }\r\n  determineDataLimits() {\r\n    const {minDefined, maxDefined} = this.getUserBounds();\r\n    let {min, max} = this.getMinMax(true);\r\n    if (this.options.bounds === 'ticks') {\r\n      if (!minDefined) {\r\n        min = 0;\r\n      }\r\n      if (!maxDefined) {\r\n        max = this.getLabels().length - 1;\r\n      }\r\n    }\r\n    this.min = min;\r\n    this.max = max;\r\n  }\r\n  buildTicks() {\r\n    const min = this.min;\r\n    const max = this.max;\r\n    const offset = this.options.offset;\r\n    const ticks = [];\r\n    let labels = this.getLabels();\r\n    labels = (min === 0 && max === labels.length - 1) ? labels : labels.slice(min, max + 1);\r\n    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\r\n    this._startValue = this.min - (offset ? 0.5 : 0);\r\n    for (let value = min; value <= max; value++) {\r\n      ticks.push({value});\r\n    }\r\n    return ticks;\r\n  }\r\n  getLabelForValue(value) {\r\n    const labels = this.getLabels();\r\n    if (value >= 0 && value < labels.length) {\r\n      return labels[value];\r\n    }\r\n    return value;\r\n  }\r\n  configure() {\r\n    super.configure();\r\n    if (!this.isHorizontal()) {\r\n      this._reversePixels = !this._reversePixels;\r\n    }\r\n  }\r\n  getPixelForValue(value) {\r\n    if (typeof value !== 'number') {\r\n      value = this.parse(value);\r\n    }\r\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\r\n  }\r\n  getPixelForTick(index) {\r\n    const ticks = this.ticks;\r\n    if (index < 0 || index > ticks.length - 1) {\r\n      return null;\r\n    }\r\n    return this.getPixelForValue(ticks[index].value);\r\n  }\r\n  getValueForPixel(pixel) {\r\n    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\r\n  }\r\n  getBasePixel() {\r\n    return this.bottom;\r\n  }\r\n}\r\nCategoryScale.id = 'category';\r\nCategoryScale.defaults = {\r\n  ticks: {\r\n    callback: CategoryScale.prototype.getLabelForValue\r\n  }\r\n};\r\n\r\nfunction generateTicks$1(generationOptions, dataRange) {\r\n  const ticks = [];\r\n  const MIN_SPACING = 1e-14;\r\n  const {bounds, step, min, max, precision, count, maxTicks, maxDigits, includeBounds} = generationOptions;\r\n  const unit = step || 1;\r\n  const maxSpaces = maxTicks - 1;\r\n  const {min: rmin, max: rmax} = dataRange;\r\n  const minDefined = !isNullOrUndef(min);\r\n  const maxDefined = !isNullOrUndef(max);\r\n  const countDefined = !isNullOrUndef(count);\r\n  const minSpacing = (rmax - rmin) / (maxDigits + 1);\r\n  let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\r\n  let factor, niceMin, niceMax, numSpaces;\r\n  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\r\n    return [{value: rmin}, {value: rmax}];\r\n  }\r\n  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\r\n  if (numSpaces > maxSpaces) {\r\n    spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\r\n  }\r\n  if (!isNullOrUndef(precision)) {\r\n    factor = Math.pow(10, precision);\r\n    spacing = Math.ceil(spacing * factor) / factor;\r\n  }\r\n  if (bounds === 'ticks') {\r\n    niceMin = Math.floor(rmin / spacing) * spacing;\r\n    niceMax = Math.ceil(rmax / spacing) * spacing;\r\n  } else {\r\n    niceMin = rmin;\r\n    niceMax = rmax;\r\n  }\r\n  if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\r\n    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\r\n    spacing = (max - min) / numSpaces;\r\n    niceMin = min;\r\n    niceMax = max;\r\n  } else if (countDefined) {\r\n    niceMin = minDefined ? min : niceMin;\r\n    niceMax = maxDefined ? max : niceMax;\r\n    numSpaces = count - 1;\r\n    spacing = (niceMax - niceMin) / numSpaces;\r\n  } else {\r\n    numSpaces = (niceMax - niceMin) / spacing;\r\n    if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\r\n      numSpaces = Math.round(numSpaces);\r\n    } else {\r\n      numSpaces = Math.ceil(numSpaces);\r\n    }\r\n  }\r\n  const decimalPlaces = Math.max(\r\n    _decimalPlaces(spacing),\r\n    _decimalPlaces(niceMin)\r\n  );\r\n  factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\r\n  niceMin = Math.round(niceMin * factor) / factor;\r\n  niceMax = Math.round(niceMax * factor) / factor;\r\n  let j = 0;\r\n  if (minDefined) {\r\n    if (includeBounds && niceMin !== min) {\r\n      ticks.push({value: min});\r\n      if (niceMin < min) {\r\n        j++;\r\n      }\r\n      if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\r\n        j++;\r\n      }\r\n    } else if (niceMin < min) {\r\n      j++;\r\n    }\r\n  }\r\n  for (; j < numSpaces; ++j) {\r\n    ticks.push({value: Math.round((niceMin + j * spacing) * factor) / factor});\r\n  }\r\n  if (maxDefined && includeBounds && niceMax !== max) {\r\n    if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\r\n      ticks[ticks.length - 1].value = max;\r\n    } else {\r\n      ticks.push({value: max});\r\n    }\r\n  } else if (!maxDefined || niceMax === max) {\r\n    ticks.push({value: niceMax});\r\n  }\r\n  return ticks;\r\n}\r\nfunction relativeLabelSize(value, minSpacing, {horizontal, minRotation}) {\r\n  const rad = toRadians(minRotation);\r\n  const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\r\n  const length = 0.75 * minSpacing * ('' + value).length;\r\n  return Math.min(minSpacing / ratio, length);\r\n}\r\nclass LinearScaleBase extends Scale {\r\n  constructor(cfg) {\r\n    super(cfg);\r\n    this.start = undefined;\r\n    this.end = undefined;\r\n    this._startValue = undefined;\r\n    this._endValue = undefined;\r\n    this._valueRange = 0;\r\n  }\r\n  parse(raw, index) {\r\n    if (isNullOrUndef(raw)) {\r\n      return null;\r\n    }\r\n    if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\r\n      return null;\r\n    }\r\n    return +raw;\r\n  }\r\n  handleTickRangeOptions() {\r\n    const {beginAtZero} = this.options;\r\n    const {minDefined, maxDefined} = this.getUserBounds();\r\n    let {min, max} = this;\r\n    const setMin = v => (min = minDefined ? min : v);\r\n    const setMax = v => (max = maxDefined ? max : v);\r\n    if (beginAtZero) {\r\n      const minSign = sign(min);\r\n      const maxSign = sign(max);\r\n      if (minSign < 0 && maxSign < 0) {\r\n        setMax(0);\r\n      } else if (minSign > 0 && maxSign > 0) {\r\n        setMin(0);\r\n      }\r\n    }\r\n    if (min === max) {\r\n      let offset = 1;\r\n      if (max >= Number.MAX_SAFE_INTEGER || min <= Number.MIN_SAFE_INTEGER) {\r\n        offset = Math.abs(max * 0.05);\r\n      }\r\n      setMax(max + offset);\r\n      if (!beginAtZero) {\r\n        setMin(min - offset);\r\n      }\r\n    }\r\n    this.min = min;\r\n    this.max = max;\r\n  }\r\n  getTickLimit() {\r\n    const tickOpts = this.options.ticks;\r\n    let {maxTicksLimit, stepSize} = tickOpts;\r\n    let maxTicks;\r\n    if (stepSize) {\r\n      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\r\n      if (maxTicks > 1000) {\r\n        console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\r\n        maxTicks = 1000;\r\n      }\r\n    } else {\r\n      maxTicks = this.computeTickLimit();\r\n      maxTicksLimit = maxTicksLimit || 11;\r\n    }\r\n    if (maxTicksLimit) {\r\n      maxTicks = Math.min(maxTicksLimit, maxTicks);\r\n    }\r\n    return maxTicks;\r\n  }\r\n  computeTickLimit() {\r\n    return Number.POSITIVE_INFINITY;\r\n  }\r\n  buildTicks() {\r\n    const opts = this.options;\r\n    const tickOpts = opts.ticks;\r\n    let maxTicks = this.getTickLimit();\r\n    maxTicks = Math.max(2, maxTicks);\r\n    const numericGeneratorOptions = {\r\n      maxTicks,\r\n      bounds: opts.bounds,\r\n      min: opts.min,\r\n      max: opts.max,\r\n      precision: tickOpts.precision,\r\n      step: tickOpts.stepSize,\r\n      count: tickOpts.count,\r\n      maxDigits: this._maxDigits(),\r\n      horizontal: this.isHorizontal(),\r\n      minRotation: tickOpts.minRotation || 0,\r\n      includeBounds: tickOpts.includeBounds !== false\r\n    };\r\n    const dataRange = this._range || this;\r\n    const ticks = generateTicks$1(numericGeneratorOptions, dataRange);\r\n    if (opts.bounds === 'ticks') {\r\n      _setMinAndMaxByKey(ticks, this, 'value');\r\n    }\r\n    if (opts.reverse) {\r\n      ticks.reverse();\r\n      this.start = this.max;\r\n      this.end = this.min;\r\n    } else {\r\n      this.start = this.min;\r\n      this.end = this.max;\r\n    }\r\n    return ticks;\r\n  }\r\n  configure() {\r\n    const ticks = this.ticks;\r\n    let start = this.min;\r\n    let end = this.max;\r\n    super.configure();\r\n    if (this.options.offset && ticks.length) {\r\n      const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\r\n      start -= offset;\r\n      end += offset;\r\n    }\r\n    this._startValue = start;\r\n    this._endValue = end;\r\n    this._valueRange = end - start;\r\n  }\r\n  getLabelForValue(value) {\r\n    return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\r\n  }\r\n}\r\n\r\nclass LinearScale extends LinearScaleBase {\r\n  determineDataLimits() {\r\n    const {min, max} = this.getMinMax(true);\r\n    this.min = isNumberFinite(min) ? min : 0;\r\n    this.max = isNumberFinite(max) ? max : 1;\r\n    this.handleTickRangeOptions();\r\n  }\r\n  computeTickLimit() {\r\n    const horizontal = this.isHorizontal();\r\n    const length = horizontal ? this.width : this.height;\r\n    const minRotation = toRadians(this.options.ticks.minRotation);\r\n    const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\r\n    const tickFont = this._resolveTickFontOptions(0);\r\n    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\r\n  }\r\n  getPixelForValue(value) {\r\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\r\n  }\r\n  getValueForPixel(pixel) {\r\n    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\r\n  }\r\n}\r\nLinearScale.id = 'linear';\r\nLinearScale.defaults = {\r\n  ticks: {\r\n    callback: Ticks.formatters.numeric\r\n  }\r\n};\r\n\r\nfunction isMajor(tickVal) {\r\n  const remain = tickVal / (Math.pow(10, Math.floor(log10(tickVal))));\r\n  return remain === 1;\r\n}\r\nfunction generateTicks(generationOptions, dataRange) {\r\n  const endExp = Math.floor(log10(dataRange.max));\r\n  const endSignificand = Math.ceil(dataRange.max / Math.pow(10, endExp));\r\n  const ticks = [];\r\n  let tickVal = finiteOrDefault(generationOptions.min, Math.pow(10, Math.floor(log10(dataRange.min))));\r\n  let exp = Math.floor(log10(tickVal));\r\n  let significand = Math.floor(tickVal / Math.pow(10, exp));\r\n  let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\r\n  do {\r\n    ticks.push({value: tickVal, major: isMajor(tickVal)});\r\n    ++significand;\r\n    if (significand === 10) {\r\n      significand = 1;\r\n      ++exp;\r\n      precision = exp >= 0 ? 1 : precision;\r\n    }\r\n    tickVal = Math.round(significand * Math.pow(10, exp) * precision) / precision;\r\n  } while (exp < endExp || (exp === endExp && significand < endSignificand));\r\n  const lastTick = finiteOrDefault(generationOptions.max, tickVal);\r\n  ticks.push({value: lastTick, major: isMajor(tickVal)});\r\n  return ticks;\r\n}\r\nclass LogarithmicScale extends Scale {\r\n  constructor(cfg) {\r\n    super(cfg);\r\n    this.start = undefined;\r\n    this.end = undefined;\r\n    this._startValue = undefined;\r\n    this._valueRange = 0;\r\n  }\r\n  parse(raw, index) {\r\n    const value = LinearScaleBase.prototype.parse.apply(this, [raw, index]);\r\n    if (value === 0) {\r\n      this._zero = true;\r\n      return undefined;\r\n    }\r\n    return isNumberFinite(value) && value > 0 ? value : null;\r\n  }\r\n  determineDataLimits() {\r\n    const {min, max} = this.getMinMax(true);\r\n    this.min = isNumberFinite(min) ? Math.max(0, min) : null;\r\n    this.max = isNumberFinite(max) ? Math.max(0, max) : null;\r\n    if (this.options.beginAtZero) {\r\n      this._zero = true;\r\n    }\r\n    this.handleTickRangeOptions();\r\n  }\r\n  handleTickRangeOptions() {\r\n    const {minDefined, maxDefined} = this.getUserBounds();\r\n    let min = this.min;\r\n    let max = this.max;\r\n    const setMin = v => (min = minDefined ? min : v);\r\n    const setMax = v => (max = maxDefined ? max : v);\r\n    const exp = (v, m) => Math.pow(10, Math.floor(log10(v)) + m);\r\n    if (min === max) {\r\n      if (min <= 0) {\r\n        setMin(1);\r\n        setMax(10);\r\n      } else {\r\n        setMin(exp(min, -1));\r\n        setMax(exp(max, +1));\r\n      }\r\n    }\r\n    if (min <= 0) {\r\n      setMin(exp(max, -1));\r\n    }\r\n    if (max <= 0) {\r\n      setMax(exp(min, +1));\r\n    }\r\n    if (this._zero && this.min !== this._suggestedMin && min === exp(this.min, 0)) {\r\n      setMin(exp(min, -1));\r\n    }\r\n    this.min = min;\r\n    this.max = max;\r\n  }\r\n  buildTicks() {\r\n    const opts = this.options;\r\n    const generationOptions = {\r\n      min: this._userMin,\r\n      max: this._userMax\r\n    };\r\n    const ticks = generateTicks(generationOptions, this);\r\n    if (opts.bounds === 'ticks') {\r\n      _setMinAndMaxByKey(ticks, this, 'value');\r\n    }\r\n    if (opts.reverse) {\r\n      ticks.reverse();\r\n      this.start = this.max;\r\n      this.end = this.min;\r\n    } else {\r\n      this.start = this.min;\r\n      this.end = this.max;\r\n    }\r\n    return ticks;\r\n  }\r\n  getLabelForValue(value) {\r\n    return value === undefined\r\n      ? '0'\r\n      : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\r\n  }\r\n  configure() {\r\n    const start = this.min;\r\n    super.configure();\r\n    this._startValue = log10(start);\r\n    this._valueRange = log10(this.max) - log10(start);\r\n  }\r\n  getPixelForValue(value) {\r\n    if (value === undefined || value === 0) {\r\n      value = this.min;\r\n    }\r\n    if (value === null || isNaN(value)) {\r\n      return NaN;\r\n    }\r\n    return this.getPixelForDecimal(value === this.min\r\n      ? 0\r\n      : (log10(value) - this._startValue) / this._valueRange);\r\n  }\r\n  getValueForPixel(pixel) {\r\n    const decimal = this.getDecimalForPixel(pixel);\r\n    return Math.pow(10, this._startValue + decimal * this._valueRange);\r\n  }\r\n}\r\nLogarithmicScale.id = 'logarithmic';\r\nLogarithmicScale.defaults = {\r\n  ticks: {\r\n    callback: Ticks.formatters.logarithmic,\r\n    major: {\r\n      enabled: true\r\n    }\r\n  }\r\n};\r\n\r\nfunction getTickBackdropHeight(opts) {\r\n  const tickOpts = opts.ticks;\r\n  if (tickOpts.display && opts.display) {\r\n    const padding = toPadding(tickOpts.backdropPadding);\r\n    return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\r\n  }\r\n  return 0;\r\n}\r\nfunction measureLabelSize(ctx, font, label) {\r\n  label = isArray(label) ? label : [label];\r\n  return {\r\n    w: _longestText(ctx, font.string, label),\r\n    h: label.length * font.lineHeight\r\n  };\r\n}\r\nfunction determineLimits(angle, pos, size, min, max) {\r\n  if (angle === min || angle === max) {\r\n    return {\r\n      start: pos - (size / 2),\r\n      end: pos + (size / 2)\r\n    };\r\n  } else if (angle < min || angle > max) {\r\n    return {\r\n      start: pos - size,\r\n      end: pos\r\n    };\r\n  }\r\n  return {\r\n    start: pos,\r\n    end: pos + size\r\n  };\r\n}\r\nfunction fitWithPointLabels(scale) {\r\n  const orig = {\r\n    l: scale.left + scale._padding.left,\r\n    r: scale.right - scale._padding.right,\r\n    t: scale.top + scale._padding.top,\r\n    b: scale.bottom - scale._padding.bottom\r\n  };\r\n  const limits = Object.assign({}, orig);\r\n  const labelSizes = [];\r\n  const padding = [];\r\n  const valueCount = scale._pointLabels.length;\r\n  const pointLabelOpts = scale.options.pointLabels;\r\n  const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\r\n  for (let i = 0; i < valueCount; i++) {\r\n    const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\r\n    padding[i] = opts.padding;\r\n    const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\r\n    const plFont = toFont(opts.font);\r\n    const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\r\n    labelSizes[i] = textSize;\r\n    const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\r\n    const angle = Math.round(toDegrees(angleRadians));\r\n    const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\r\n    const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\r\n    updateLimits(limits, orig, angleRadians, hLimits, vLimits);\r\n  }\r\n  scale.setCenterPoint(\r\n    orig.l - limits.l,\r\n    limits.r - orig.r,\r\n    orig.t - limits.t,\r\n    limits.b - orig.b\r\n  );\r\n  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\r\n}\r\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\r\n  const sin = Math.abs(Math.sin(angle));\r\n  const cos = Math.abs(Math.cos(angle));\r\n  let x = 0;\r\n  let y = 0;\r\n  if (hLimits.start < orig.l) {\r\n    x = (orig.l - hLimits.start) / sin;\r\n    limits.l = Math.min(limits.l, orig.l - x);\r\n  } else if (hLimits.end > orig.r) {\r\n    x = (hLimits.end - orig.r) / sin;\r\n    limits.r = Math.max(limits.r, orig.r + x);\r\n  }\r\n  if (vLimits.start < orig.t) {\r\n    y = (orig.t - vLimits.start) / cos;\r\n    limits.t = Math.min(limits.t, orig.t - y);\r\n  } else if (vLimits.end > orig.b) {\r\n    y = (vLimits.end - orig.b) / cos;\r\n    limits.b = Math.max(limits.b, orig.b + y);\r\n  }\r\n}\r\nfunction buildPointLabelItems(scale, labelSizes, padding) {\r\n  const items = [];\r\n  const valueCount = scale._pointLabels.length;\r\n  const opts = scale.options;\r\n  const extra = getTickBackdropHeight(opts) / 2;\r\n  const outerDistance = scale.drawingArea;\r\n  const additionalAngle = opts.pointLabels.centerPointLabels ? PI / valueCount : 0;\r\n  for (let i = 0; i < valueCount; i++) {\r\n    const pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + padding[i], additionalAngle);\r\n    const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\r\n    const size = labelSizes[i];\r\n    const y = yForAngle(pointLabelPosition.y, size.h, angle);\r\n    const textAlign = getTextAlignForAngle(angle);\r\n    const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\r\n    items.push({\r\n      x: pointLabelPosition.x,\r\n      y,\r\n      textAlign,\r\n      left,\r\n      top: y,\r\n      right: left + size.w,\r\n      bottom: y + size.h\r\n    });\r\n  }\r\n  return items;\r\n}\r\nfunction getTextAlignForAngle(angle) {\r\n  if (angle === 0 || angle === 180) {\r\n    return 'center';\r\n  } else if (angle < 180) {\r\n    return 'left';\r\n  }\r\n  return 'right';\r\n}\r\nfunction leftForTextAlign(x, w, align) {\r\n  if (align === 'right') {\r\n    x -= w;\r\n  } else if (align === 'center') {\r\n    x -= (w / 2);\r\n  }\r\n  return x;\r\n}\r\nfunction yForAngle(y, h, angle) {\r\n  if (angle === 90 || angle === 270) {\r\n    y -= (h / 2);\r\n  } else if (angle > 270 || angle < 90) {\r\n    y -= h;\r\n  }\r\n  return y;\r\n}\r\nfunction drawPointLabels(scale, labelCount) {\r\n  const {ctx, options: {pointLabels}} = scale;\r\n  for (let i = labelCount - 1; i >= 0; i--) {\r\n    const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\r\n    const plFont = toFont(optsAtIndex.font);\r\n    const {x, y, textAlign, left, top, right, bottom} = scale._pointLabelItems[i];\r\n    const {backdropColor} = optsAtIndex;\r\n    if (!isNullOrUndef(backdropColor)) {\r\n      const borderRadius = toTRBLCorners(optsAtIndex.borderRadius);\r\n      const padding = toPadding(optsAtIndex.backdropPadding);\r\n      ctx.fillStyle = backdropColor;\r\n      const backdropLeft = left - padding.left;\r\n      const backdropTop = top - padding.top;\r\n      const backdropWidth = right - left + padding.width;\r\n      const backdropHeight = bottom - top + padding.height;\r\n      if (Object.values(borderRadius).some(v => v !== 0)) {\r\n        ctx.beginPath();\r\n        addRoundedRectPath(ctx, {\r\n          x: backdropLeft,\r\n          y: backdropTop,\r\n          w: backdropWidth,\r\n          h: backdropHeight,\r\n          radius: borderRadius,\r\n        });\r\n        ctx.fill();\r\n      } else {\r\n        ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\r\n      }\r\n    }\r\n    renderText(\r\n      ctx,\r\n      scale._pointLabels[i],\r\n      x,\r\n      y + (plFont.lineHeight / 2),\r\n      plFont,\r\n      {\r\n        color: optsAtIndex.color,\r\n        textAlign: textAlign,\r\n        textBaseline: 'middle'\r\n      }\r\n    );\r\n  }\r\n}\r\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\r\n  const {ctx} = scale;\r\n  if (circular) {\r\n    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\r\n  } else {\r\n    let pointPosition = scale.getPointPosition(0, radius);\r\n    ctx.moveTo(pointPosition.x, pointPosition.y);\r\n    for (let i = 1; i < labelCount; i++) {\r\n      pointPosition = scale.getPointPosition(i, radius);\r\n      ctx.lineTo(pointPosition.x, pointPosition.y);\r\n    }\r\n  }\r\n}\r\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount) {\r\n  const ctx = scale.ctx;\r\n  const circular = gridLineOpts.circular;\r\n  const {color, lineWidth} = gridLineOpts;\r\n  if ((!circular && !labelCount) || !color || !lineWidth || radius < 0) {\r\n    return;\r\n  }\r\n  ctx.save();\r\n  ctx.strokeStyle = color;\r\n  ctx.lineWidth = lineWidth;\r\n  ctx.setLineDash(gridLineOpts.borderDash);\r\n  ctx.lineDashOffset = gridLineOpts.borderDashOffset;\r\n  ctx.beginPath();\r\n  pathRadiusLine(scale, radius, circular, labelCount);\r\n  ctx.closePath();\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\nfunction createPointLabelContext(parent, index, label) {\r\n  return createContext(parent, {\r\n    label,\r\n    index,\r\n    type: 'pointLabel'\r\n  });\r\n}\r\nclass RadialLinearScale extends LinearScaleBase {\r\n  constructor(cfg) {\r\n    super(cfg);\r\n    this.xCenter = undefined;\r\n    this.yCenter = undefined;\r\n    this.drawingArea = undefined;\r\n    this._pointLabels = [];\r\n    this._pointLabelItems = [];\r\n  }\r\n  setDimensions() {\r\n    const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\r\n    const w = this.width = this.maxWidth - padding.width;\r\n    const h = this.height = this.maxHeight - padding.height;\r\n    this.xCenter = Math.floor(this.left + w / 2 + padding.left);\r\n    this.yCenter = Math.floor(this.top + h / 2 + padding.top);\r\n    this.drawingArea = Math.floor(Math.min(w, h) / 2);\r\n  }\r\n  determineDataLimits() {\r\n    const {min, max} = this.getMinMax(false);\r\n    this.min = isNumberFinite(min) && !isNaN(min) ? min : 0;\r\n    this.max = isNumberFinite(max) && !isNaN(max) ? max : 0;\r\n    this.handleTickRangeOptions();\r\n  }\r\n  computeTickLimit() {\r\n    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\r\n  }\r\n  generateTickLabels(ticks) {\r\n    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\r\n    this._pointLabels = this.getLabels()\r\n      .map((value, index) => {\r\n        const label = callback(this.options.pointLabels.callback, [value, index], this);\r\n        return label || label === 0 ? label : '';\r\n      })\r\n      .filter((v, i) => this.chart.getDataVisibility(i));\r\n  }\r\n  fit() {\r\n    const opts = this.options;\r\n    if (opts.display && opts.pointLabels.display) {\r\n      fitWithPointLabels(this);\r\n    } else {\r\n      this.setCenterPoint(0, 0, 0, 0);\r\n    }\r\n  }\r\n  setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\r\n    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\r\n    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\r\n    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\r\n  }\r\n  getIndexAngle(index) {\r\n    const angleMultiplier = TAU / (this._pointLabels.length || 1);\r\n    const startAngle = this.options.startAngle || 0;\r\n    return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\r\n  }\r\n  getDistanceFromCenterForValue(value) {\r\n    if (isNullOrUndef(value)) {\r\n      return NaN;\r\n    }\r\n    const scalingFactor = this.drawingArea / (this.max - this.min);\r\n    if (this.options.reverse) {\r\n      return (this.max - value) * scalingFactor;\r\n    }\r\n    return (value - this.min) * scalingFactor;\r\n  }\r\n  getValueForDistanceFromCenter(distance) {\r\n    if (isNullOrUndef(distance)) {\r\n      return NaN;\r\n    }\r\n    const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\r\n    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\r\n  }\r\n  getPointLabelContext(index) {\r\n    const pointLabels = this._pointLabels || [];\r\n    if (index >= 0 && index < pointLabels.length) {\r\n      const pointLabel = pointLabels[index];\r\n      return createPointLabelContext(this.getContext(), index, pointLabel);\r\n    }\r\n  }\r\n  getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\r\n    const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\r\n    return {\r\n      x: Math.cos(angle) * distanceFromCenter + this.xCenter,\r\n      y: Math.sin(angle) * distanceFromCenter + this.yCenter,\r\n      angle\r\n    };\r\n  }\r\n  getPointPositionForValue(index, value) {\r\n    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\r\n  }\r\n  getBasePosition(index) {\r\n    return this.getPointPositionForValue(index || 0, this.getBaseValue());\r\n  }\r\n  getPointLabelPosition(index) {\r\n    const {left, top, right, bottom} = this._pointLabelItems[index];\r\n    return {\r\n      left,\r\n      top,\r\n      right,\r\n      bottom,\r\n    };\r\n  }\r\n  drawBackground() {\r\n    const {backgroundColor, grid: {circular}} = this.options;\r\n    if (backgroundColor) {\r\n      const ctx = this.ctx;\r\n      ctx.save();\r\n      ctx.beginPath();\r\n      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\r\n      ctx.closePath();\r\n      ctx.fillStyle = backgroundColor;\r\n      ctx.fill();\r\n      ctx.restore();\r\n    }\r\n  }\r\n  drawGrid() {\r\n    const ctx = this.ctx;\r\n    const opts = this.options;\r\n    const {angleLines, grid} = opts;\r\n    const labelCount = this._pointLabels.length;\r\n    let i, offset, position;\r\n    if (opts.pointLabels.display) {\r\n      drawPointLabels(this, labelCount);\r\n    }\r\n    if (grid.display) {\r\n      this.ticks.forEach((tick, index) => {\r\n        if (index !== 0) {\r\n          offset = this.getDistanceFromCenterForValue(tick.value);\r\n          const optsAtIndex = grid.setContext(this.getContext(index - 1));\r\n          drawRadiusLine(this, optsAtIndex, offset, labelCount);\r\n        }\r\n      });\r\n    }\r\n    if (angleLines.display) {\r\n      ctx.save();\r\n      for (i = labelCount - 1; i >= 0; i--) {\r\n        const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\r\n        const {color, lineWidth} = optsAtIndex;\r\n        if (!lineWidth || !color) {\r\n          continue;\r\n        }\r\n        ctx.lineWidth = lineWidth;\r\n        ctx.strokeStyle = color;\r\n        ctx.setLineDash(optsAtIndex.borderDash);\r\n        ctx.lineDashOffset = optsAtIndex.borderDashOffset;\r\n        offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);\r\n        position = this.getPointPosition(i, offset);\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.xCenter, this.yCenter);\r\n        ctx.lineTo(position.x, position.y);\r\n        ctx.stroke();\r\n      }\r\n      ctx.restore();\r\n    }\r\n  }\r\n  drawBorder() {}\r\n  drawLabels() {\r\n    const ctx = this.ctx;\r\n    const opts = this.options;\r\n    const tickOpts = opts.ticks;\r\n    if (!tickOpts.display) {\r\n      return;\r\n    }\r\n    const startAngle = this.getIndexAngle(0);\r\n    let offset, width;\r\n    ctx.save();\r\n    ctx.translate(this.xCenter, this.yCenter);\r\n    ctx.rotate(startAngle);\r\n    ctx.textAlign = 'center';\r\n    ctx.textBaseline = 'middle';\r\n    this.ticks.forEach((tick, index) => {\r\n      if (index === 0 && !opts.reverse) {\r\n        return;\r\n      }\r\n      const optsAtIndex = tickOpts.setContext(this.getContext(index));\r\n      const tickFont = toFont(optsAtIndex.font);\r\n      offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\r\n      if (optsAtIndex.showLabelBackdrop) {\r\n        ctx.font = tickFont.string;\r\n        width = ctx.measureText(tick.label).width;\r\n        ctx.fillStyle = optsAtIndex.backdropColor;\r\n        const padding = toPadding(optsAtIndex.backdropPadding);\r\n        ctx.fillRect(\r\n          -width / 2 - padding.left,\r\n          -offset - tickFont.size / 2 - padding.top,\r\n          width + padding.width,\r\n          tickFont.size + padding.height\r\n        );\r\n      }\r\n      renderText(ctx, tick.label, 0, -offset, tickFont, {\r\n        color: optsAtIndex.color,\r\n      });\r\n    });\r\n    ctx.restore();\r\n  }\r\n  drawTitle() {}\r\n}\r\nRadialLinearScale.id = 'radialLinear';\r\nRadialLinearScale.defaults = {\r\n  display: true,\r\n  animate: true,\r\n  position: 'chartArea',\r\n  angleLines: {\r\n    display: true,\r\n    lineWidth: 1,\r\n    borderDash: [],\r\n    borderDashOffset: 0.0\r\n  },\r\n  grid: {\r\n    circular: false\r\n  },\r\n  startAngle: 0,\r\n  ticks: {\r\n    showLabelBackdrop: true,\r\n    callback: Ticks.formatters.numeric\r\n  },\r\n  pointLabels: {\r\n    backdropColor: undefined,\r\n    backdropPadding: 2,\r\n    display: true,\r\n    font: {\r\n      size: 10\r\n    },\r\n    callback(label) {\r\n      return label;\r\n    },\r\n    padding: 5,\r\n    centerPointLabels: false\r\n  }\r\n};\r\nRadialLinearScale.defaultRoutes = {\r\n  'angleLines.color': 'borderColor',\r\n  'pointLabels.color': 'color',\r\n  'ticks.color': 'color'\r\n};\r\nRadialLinearScale.descriptors = {\r\n  angleLines: {\r\n    _fallback: 'grid'\r\n  }\r\n};\r\n\r\nconst INTERVALS = {\r\n  millisecond: {common: true, size: 1, steps: 1000},\r\n  second: {common: true, size: 1000, steps: 60},\r\n  minute: {common: true, size: 60000, steps: 60},\r\n  hour: {common: true, size: 3600000, steps: 24},\r\n  day: {common: true, size: 86400000, steps: 30},\r\n  week: {common: false, size: 604800000, steps: 4},\r\n  month: {common: true, size: 2.628e9, steps: 12},\r\n  quarter: {common: false, size: 7.884e9, steps: 4},\r\n  year: {common: true, size: 3.154e10}\r\n};\r\nconst UNITS = (Object.keys(INTERVALS));\r\nfunction sorter(a, b) {\r\n  return a - b;\r\n}\r\nfunction parse(scale, input) {\r\n  if (isNullOrUndef(input)) {\r\n    return null;\r\n  }\r\n  const adapter = scale._adapter;\r\n  const {parser, round, isoWeekday} = scale._parseOpts;\r\n  let value = input;\r\n  if (typeof parser === 'function') {\r\n    value = parser(value);\r\n  }\r\n  if (!isNumberFinite(value)) {\r\n    value = typeof parser === 'string'\r\n      ? adapter.parse(value, parser)\r\n      : adapter.parse(value);\r\n  }\r\n  if (value === null) {\r\n    return null;\r\n  }\r\n  if (round) {\r\n    value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true)\r\n      ? adapter.startOf(value, 'isoWeek', isoWeekday)\r\n      : adapter.startOf(value, round);\r\n  }\r\n  return +value;\r\n}\r\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\r\n  const ilen = UNITS.length;\r\n  for (let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\r\n    const interval = INTERVALS[UNITS[i]];\r\n    const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\r\n    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\r\n      return UNITS[i];\r\n    }\r\n  }\r\n  return UNITS[ilen - 1];\r\n}\r\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\r\n  for (let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\r\n    const unit = UNITS[i];\r\n    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\r\n      return unit;\r\n    }\r\n  }\r\n  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\r\n}\r\nfunction determineMajorUnit(unit) {\r\n  for (let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\r\n    if (INTERVALS[UNITS[i]].common) {\r\n      return UNITS[i];\r\n    }\r\n  }\r\n}\r\nfunction addTick(ticks, time, timestamps) {\r\n  if (!timestamps) {\r\n    ticks[time] = true;\r\n  } else if (timestamps.length) {\r\n    const {lo, hi} = _lookup(timestamps, time);\r\n    const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\r\n    ticks[timestamp] = true;\r\n  }\r\n}\r\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\r\n  const adapter = scale._adapter;\r\n  const first = +adapter.startOf(ticks[0].value, majorUnit);\r\n  const last = ticks[ticks.length - 1].value;\r\n  let major, index;\r\n  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\r\n    index = map[major];\r\n    if (index >= 0) {\r\n      ticks[index].major = true;\r\n    }\r\n  }\r\n  return ticks;\r\n}\r\nfunction ticksFromTimestamps(scale, values, majorUnit) {\r\n  const ticks = [];\r\n  const map = {};\r\n  const ilen = values.length;\r\n  let i, value;\r\n  for (i = 0; i < ilen; ++i) {\r\n    value = values[i];\r\n    map[value] = i;\r\n    ticks.push({\r\n      value,\r\n      major: false\r\n    });\r\n  }\r\n  return (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\r\n}\r\nclass TimeScale extends Scale {\r\n  constructor(props) {\r\n    super(props);\r\n    this._cache = {\r\n      data: [],\r\n      labels: [],\r\n      all: []\r\n    };\r\n    this._unit = 'day';\r\n    this._majorUnit = undefined;\r\n    this._offsets = {};\r\n    this._normalized = false;\r\n    this._parseOpts = undefined;\r\n  }\r\n  init(scaleOpts, opts) {\r\n    const time = scaleOpts.time || (scaleOpts.time = {});\r\n    const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\r\n    adapter.init(opts);\r\n    mergeIf(time.displayFormats, adapter.formats());\r\n    this._parseOpts = {\r\n      parser: time.parser,\r\n      round: time.round,\r\n      isoWeekday: time.isoWeekday\r\n    };\r\n    super.init(scaleOpts);\r\n    this._normalized = opts.normalized;\r\n  }\r\n  parse(raw, index) {\r\n    if (raw === undefined) {\r\n      return null;\r\n    }\r\n    return parse(this, raw);\r\n  }\r\n  beforeLayout() {\r\n    super.beforeLayout();\r\n    this._cache = {\r\n      data: [],\r\n      labels: [],\r\n      all: []\r\n    };\r\n  }\r\n  determineDataLimits() {\r\n    const options = this.options;\r\n    const adapter = this._adapter;\r\n    const unit = options.time.unit || 'day';\r\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\r\n    function _applyBounds(bounds) {\r\n      if (!minDefined && !isNaN(bounds.min)) {\r\n        min = Math.min(min, bounds.min);\r\n      }\r\n      if (!maxDefined && !isNaN(bounds.max)) {\r\n        max = Math.max(max, bounds.max);\r\n      }\r\n    }\r\n    if (!minDefined || !maxDefined) {\r\n      _applyBounds(this._getLabelBounds());\r\n      if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\r\n        _applyBounds(this.getMinMax(false));\r\n      }\r\n    }\r\n    min = isNumberFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\r\n    max = isNumberFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\r\n    this.min = Math.min(min, max - 1);\r\n    this.max = Math.max(min + 1, max);\r\n  }\r\n  _getLabelBounds() {\r\n    const arr = this.getLabelTimestamps();\r\n    let min = Number.POSITIVE_INFINITY;\r\n    let max = Number.NEGATIVE_INFINITY;\r\n    if (arr.length) {\r\n      min = arr[0];\r\n      max = arr[arr.length - 1];\r\n    }\r\n    return {min, max};\r\n  }\r\n  buildTicks() {\r\n    const options = this.options;\r\n    const timeOpts = options.time;\r\n    const tickOpts = options.ticks;\r\n    const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\r\n    if (options.bounds === 'ticks' && timestamps.length) {\r\n      this.min = this._userMin || timestamps[0];\r\n      this.max = this._userMax || timestamps[timestamps.length - 1];\r\n    }\r\n    const min = this.min;\r\n    const max = this.max;\r\n    const ticks = _filterBetween(timestamps, min, max);\r\n    this._unit = timeOpts.unit || (tickOpts.autoSkip\r\n      ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min))\r\n      : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\r\n    this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined\r\n      : determineMajorUnit(this._unit);\r\n    this.initOffsets(timestamps);\r\n    if (options.reverse) {\r\n      ticks.reverse();\r\n    }\r\n    return ticksFromTimestamps(this, ticks, this._majorUnit);\r\n  }\r\n  afterAutoSkip() {\r\n    if (this.options.offsetAfterAutoskip) {\r\n      this.initOffsets(this.ticks.map(tick => +tick.value));\r\n    }\r\n  }\r\n  initOffsets(timestamps) {\r\n    let start = 0;\r\n    let end = 0;\r\n    let first, last;\r\n    if (this.options.offset && timestamps.length) {\r\n      first = this.getDecimalForValue(timestamps[0]);\r\n      if (timestamps.length === 1) {\r\n        start = 1 - first;\r\n      } else {\r\n        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\r\n      }\r\n      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\r\n      if (timestamps.length === 1) {\r\n        end = last;\r\n      } else {\r\n        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\r\n      }\r\n    }\r\n    const limit = timestamps.length < 3 ? 0.5 : 0.25;\r\n    start = _limitValue(start, 0, limit);\r\n    end = _limitValue(end, 0, limit);\r\n    this._offsets = {start, end, factor: 1 / (start + 1 + end)};\r\n  }\r\n  _generate() {\r\n    const adapter = this._adapter;\r\n    const min = this.min;\r\n    const max = this.max;\r\n    const options = this.options;\r\n    const timeOpts = options.time;\r\n    const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\r\n    const stepSize = valueOrDefault(timeOpts.stepSize, 1);\r\n    const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\r\n    const hasWeekday = isNumber(weekday) || weekday === true;\r\n    const ticks = {};\r\n    let first = min;\r\n    let time, count;\r\n    if (hasWeekday) {\r\n      first = +adapter.startOf(first, 'isoWeek', weekday);\r\n    }\r\n    first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\r\n    if (adapter.diff(max, min, minor) > 100000 * stepSize) {\r\n      throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\r\n    }\r\n    const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\r\n    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {\r\n      addTick(ticks, time, timestamps);\r\n    }\r\n    if (time === max || options.bounds === 'ticks' || count === 1) {\r\n      addTick(ticks, time, timestamps);\r\n    }\r\n    return Object.keys(ticks).sort((a, b) => a - b).map(x => +x);\r\n  }\r\n  getLabelForValue(value) {\r\n    const adapter = this._adapter;\r\n    const timeOpts = this.options.time;\r\n    if (timeOpts.tooltipFormat) {\r\n      return adapter.format(value, timeOpts.tooltipFormat);\r\n    }\r\n    return adapter.format(value, timeOpts.displayFormats.datetime);\r\n  }\r\n  _tickFormatFunction(time, index, ticks, format) {\r\n    const options = this.options;\r\n    const formats = options.time.displayFormats;\r\n    const unit = this._unit;\r\n    const majorUnit = this._majorUnit;\r\n    const minorFormat = unit && formats[unit];\r\n    const majorFormat = majorUnit && formats[majorUnit];\r\n    const tick = ticks[index];\r\n    const major = majorUnit && majorFormat && tick && tick.major;\r\n    const label = this._adapter.format(time, format || (major ? majorFormat : minorFormat));\r\n    const formatter = options.ticks.callback;\r\n    return formatter ? callback(formatter, [label, index, ticks], this) : label;\r\n  }\r\n  generateTickLabels(ticks) {\r\n    let i, ilen, tick;\r\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n      tick = ticks[i];\r\n      tick.label = this._tickFormatFunction(tick.value, i, ticks);\r\n    }\r\n  }\r\n  getDecimalForValue(value) {\r\n    return value === null ? NaN : (value - this.min) / (this.max - this.min);\r\n  }\r\n  getPixelForValue(value) {\r\n    const offsets = this._offsets;\r\n    const pos = this.getDecimalForValue(value);\r\n    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\r\n  }\r\n  getValueForPixel(pixel) {\r\n    const offsets = this._offsets;\r\n    const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\r\n    return this.min + pos * (this.max - this.min);\r\n  }\r\n  _getLabelSize(label) {\r\n    const ticksOpts = this.options.ticks;\r\n    const tickLabelWidth = this.ctx.measureText(label).width;\r\n    const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\r\n    const cosRotation = Math.cos(angle);\r\n    const sinRotation = Math.sin(angle);\r\n    const tickFontSize = this._resolveTickFontOptions(0).size;\r\n    return {\r\n      w: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\r\n      h: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\r\n    };\r\n  }\r\n  _getLabelCapacity(exampleTime) {\r\n    const timeOpts = this.options.time;\r\n    const displayFormats = timeOpts.displayFormats;\r\n    const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\r\n    const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [exampleTime], this._majorUnit), format);\r\n    const size = this._getLabelSize(exampleLabel);\r\n    const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\r\n    return capacity > 0 ? capacity : 1;\r\n  }\r\n  getDataTimestamps() {\r\n    let timestamps = this._cache.data || [];\r\n    let i, ilen;\r\n    if (timestamps.length) {\r\n      return timestamps;\r\n    }\r\n    const metas = this.getMatchingVisibleMetas();\r\n    if (this._normalized && metas.length) {\r\n      return (this._cache.data = metas[0].controller.getAllParsedValues(this));\r\n    }\r\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\r\n      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\r\n    }\r\n    return (this._cache.data = this.normalize(timestamps));\r\n  }\r\n  getLabelTimestamps() {\r\n    const timestamps = this._cache.labels || [];\r\n    let i, ilen;\r\n    if (timestamps.length) {\r\n      return timestamps;\r\n    }\r\n    const labels = this.getLabels();\r\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\r\n      timestamps.push(parse(this, labels[i]));\r\n    }\r\n    return (this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps));\r\n  }\r\n  normalize(values) {\r\n    return _arrayUnique(values.sort(sorter));\r\n  }\r\n}\r\nTimeScale.id = 'time';\r\nTimeScale.defaults = {\r\n  bounds: 'data',\r\n  adapters: {},\r\n  time: {\r\n    parser: false,\r\n    unit: false,\r\n    round: false,\r\n    isoWeekday: false,\r\n    minUnit: 'millisecond',\r\n    displayFormats: {}\r\n  },\r\n  ticks: {\r\n    source: 'auto',\r\n    major: {\r\n      enabled: false\r\n    }\r\n  }\r\n};\r\n\r\nfunction interpolate(table, val, reverse) {\r\n  let lo = 0;\r\n  let hi = table.length - 1;\r\n  let prevSource, nextSource, prevTarget, nextTarget;\r\n  if (reverse) {\r\n    if (val >= table[lo].pos && val <= table[hi].pos) {\r\n      ({lo, hi} = _lookupByKey(table, 'pos', val));\r\n    }\r\n    ({pos: prevSource, time: prevTarget} = table[lo]);\r\n    ({pos: nextSource, time: nextTarget} = table[hi]);\r\n  } else {\r\n    if (val >= table[lo].time && val <= table[hi].time) {\r\n      ({lo, hi} = _lookupByKey(table, 'time', val));\r\n    }\r\n    ({time: prevSource, pos: prevTarget} = table[lo]);\r\n    ({time: nextSource, pos: nextTarget} = table[hi]);\r\n  }\r\n  const span = nextSource - prevSource;\r\n  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\r\n}\r\nclass TimeSeriesScale extends TimeScale {\r\n  constructor(props) {\r\n    super(props);\r\n    this._table = [];\r\n    this._minPos = undefined;\r\n    this._tableRange = undefined;\r\n  }\r\n  initOffsets() {\r\n    const timestamps = this._getTimestampsForTable();\r\n    const table = this._table = this.buildLookupTable(timestamps);\r\n    this._minPos = interpolate(table, this.min);\r\n    this._tableRange = interpolate(table, this.max) - this._minPos;\r\n    super.initOffsets(timestamps);\r\n  }\r\n  buildLookupTable(timestamps) {\r\n    const {min, max} = this;\r\n    const items = [];\r\n    const table = [];\r\n    let i, ilen, prev, curr, next;\r\n    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {\r\n      curr = timestamps[i];\r\n      if (curr >= min && curr <= max) {\r\n        items.push(curr);\r\n      }\r\n    }\r\n    if (items.length < 2) {\r\n      return [\r\n        {time: min, pos: 0},\r\n        {time: max, pos: 1}\r\n      ];\r\n    }\r\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\r\n      next = items[i + 1];\r\n      prev = items[i - 1];\r\n      curr = items[i];\r\n      if (Math.round((next + prev) / 2) !== curr) {\r\n        table.push({time: curr, pos: i / (ilen - 1)});\r\n      }\r\n    }\r\n    return table;\r\n  }\r\n  _getTimestampsForTable() {\r\n    let timestamps = this._cache.all || [];\r\n    if (timestamps.length) {\r\n      return timestamps;\r\n    }\r\n    const data = this.getDataTimestamps();\r\n    const label = this.getLabelTimestamps();\r\n    if (data.length && label.length) {\r\n      timestamps = this.normalize(data.concat(label));\r\n    } else {\r\n      timestamps = data.length ? data : label;\r\n    }\r\n    timestamps = this._cache.all = timestamps;\r\n    return timestamps;\r\n  }\r\n  getDecimalForValue(value) {\r\n    return (interpolate(this._table, value) - this._minPos) / this._tableRange;\r\n  }\r\n  getValueForPixel(pixel) {\r\n    const offsets = this._offsets;\r\n    const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\r\n    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\r\n  }\r\n}\r\nTimeSeriesScale.id = 'timeseries';\r\nTimeSeriesScale.defaults = TimeScale.defaults;\r\n\r\nvar scales = /*#__PURE__*/Object.freeze({\r\n__proto__: null,\r\nCategoryScale: CategoryScale,\r\nLinearScale: LinearScale,\r\nLogarithmicScale: LogarithmicScale,\r\nRadialLinearScale: RadialLinearScale,\r\nTimeScale: TimeScale,\r\nTimeSeriesScale: TimeSeriesScale\r\n});\r\n\r\nconst registerables = [\r\n  controllers,\r\n  elements,\r\n  plugins,\r\n  scales,\r\n];\r\n\r\nexport { Animation, Animations, ArcElement, BarController, BarElement, BasePlatform, BasicPlatform, BubbleController, CategoryScale, Chart, DatasetController, plugin_decimation as Decimation, DomPlatform, DoughnutController, Element, index as Filler, Interaction, plugin_legend as Legend, LineController, LineElement, LinearScale, LogarithmicScale, PieController, PointElement, PolarAreaController, RadarController, RadialLinearScale, Scale, ScatterController, plugin_subtitle as SubTitle, Ticks, TimeScale, TimeSeriesScale, plugin_title as Title, plugin_tooltip as Tooltip, adapters as _adapters, _detectPlatform, animator, controllers, elements, layouts, plugins, registerables, registry, scales };\r\n","var has = Object.prototype.hasOwnProperty;\r\n\r\nfunction find(iter, tar, key) {\r\n\tfor (key of iter.keys()) {\r\n\t\tif (dequal(key, tar)) return key;\r\n\t}\r\n}\r\n\r\nexport function dequal(foo, bar) {\r\n\tvar ctor, len, tmp;\r\n\tif (foo === bar) return true;\r\n\r\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\r\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\r\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\r\n\r\n\t\tif (ctor === Array) {\r\n\t\t\tif ((len=foo.length) === bar.length) {\r\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\r\n\t\t\t}\r\n\t\t\treturn len === -1;\r\n\t\t}\r\n\r\n\t\tif (ctor === Set) {\r\n\t\t\tif (foo.size !== bar.size) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (len of foo) {\r\n\t\t\t\ttmp = len;\r\n\t\t\t\tif (tmp && typeof tmp === 'object') {\r\n\t\t\t\t\ttmp = find(bar, tmp);\r\n\t\t\t\t\tif (!tmp) return false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!bar.has(tmp)) return false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (ctor === Map) {\r\n\t\t\tif (foo.size !== bar.size) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (len of foo) {\r\n\t\t\t\ttmp = len[0];\r\n\t\t\t\tif (tmp && typeof tmp === 'object') {\r\n\t\t\t\t\ttmp = find(bar, tmp);\r\n\t\t\t\t\tif (!tmp) return false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!dequal(len[1], bar.get(tmp))) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (ctor === ArrayBuffer) {\r\n\t\t\tfoo = new Uint8Array(foo);\r\n\t\t\tbar = new Uint8Array(bar);\r\n\t\t} else if (ctor === DataView) {\r\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\r\n\t\t\t\twhile (len-- && foo.getInt8(len) === bar.getInt8(len));\r\n\t\t\t}\r\n\t\t\treturn len === -1;\r\n\t\t}\r\n\r\n\t\tif (ArrayBuffer.isView(foo)) {\r\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\r\n\t\t\t\twhile (len-- && foo[len] === bar[len]);\r\n\t\t\t}\r\n\t\t\treturn len === -1;\r\n\t\t}\r\n\r\n\t\tif (!ctor || typeof foo === 'object') {\r\n\t\t\tlen = 0;\r\n\t\t\tfor (ctor in foo) {\r\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\r\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\r\n\t\t\t}\r\n\t\t\treturn Object.keys(bar).length === len;\r\n\t\t}\r\n\t}\r\n\r\n\treturn foo !== foo && bar !== bar;\r\n}\r\n"]}